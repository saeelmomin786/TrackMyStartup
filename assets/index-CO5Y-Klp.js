var PR=Object.defineProperty;var TR=(e,t,r)=>t in e?PR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var da=(e,t,r)=>TR(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var xne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ro(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function OR(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var s=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(r,a,s.get?s:{enumerable:!0,get:function(){return e[a]}})}),r}var Gy={exports:{}},np={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X5;function DR(){if(X5)return np;X5=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,s,i){var l=null;if(i!==void 0&&(l=""+i),s.key!==void 0&&(l=""+s.key),"key"in s){i={};for(var u in s)u!=="key"&&(i[u]=s[u])}else i=s;return s=i.ref,{$$typeof:e,type:a,key:l,ref:s!==void 0?s:null,props:i}}return np.Fragment=t,np.jsx=r,np.jsxs=r,np}var Z5;function RR(){return Z5||(Z5=1,Gy.exports=DR()),Gy.exports}var n=RR(),Ky={exports:{}},Rr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J5;function LR(){if(J5)return Rr;J5=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(Y){return Y===null||typeof Y!="object"?null:(Y=g&&Y[g]||Y["@@iterator"],typeof Y=="function"?Y:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,b={};function A(Y,ye,P){this.props=Y,this.context=ye,this.refs=b,this.updater=P||x}A.prototype.isReactComponent={},A.prototype.setState=function(Y,ye){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,ye,"setState")},A.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function S(){}S.prototype=A.prototype;function T(Y,ye,P){this.props=Y,this.context=ye,this.refs=b,this.updater=P||x}var E=T.prototype=new S;E.constructor=T,j(E,A.prototype),E.isPureReactComponent=!0;var D=Array.isArray,L={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function z(Y,ye,P,Z,ce,je){return P=je.ref,{$$typeof:e,type:Y,key:ye,ref:P!==void 0?P:null,props:je}}function M(Y,ye){return z(Y.type,ye,void 0,void 0,void 0,Y.props)}function U(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===e}function oe(Y){var ye={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(P){return ye[P]})}var R=/\/+/g;function q(Y,ye){return typeof Y=="object"&&Y!==null&&Y.key!=null?oe(""+Y.key):ye.toString(36)}function se(){}function J(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(se,se):(Y.status="pending",Y.then(function(ye){Y.status==="pending"&&(Y.status="fulfilled",Y.value=ye)},function(ye){Y.status==="pending"&&(Y.status="rejected",Y.reason=ye)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function Q(Y,ye,P,Z,ce){var je=typeof Y;(je==="undefined"||je==="boolean")&&(Y=null);var ke=!1;if(Y===null)ke=!0;else switch(je){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(Y.$$typeof){case e:case t:ke=!0;break;case m:return ke=Y._init,Q(ke(Y._payload),ye,P,Z,ce)}}if(ke)return ce=ce(Y),ke=Z===""?"."+q(Y,0):Z,D(ce)?(P="",ke!=null&&(P=ke.replace(R,"$&/")+"/"),Q(ce,ye,P,"",function(ne){return ne})):ce!=null&&(U(ce)&&(ce=M(ce,P+(ce.key==null||Y&&Y.key===ce.key?"":(""+ce.key).replace(R,"$&/")+"/")+ke)),ye.push(ce)),1;ke=0;var De=Z===""?".":Z+":";if(D(Y))for(var Ee=0;Ee<Y.length;Ee++)Z=Y[Ee],je=De+q(Z,Ee),ke+=Q(Z,ye,P,je,ce);else if(Ee=v(Y),typeof Ee=="function")for(Y=Ee.call(Y),Ee=0;!(Z=Y.next()).done;)Z=Z.value,je=De+q(Z,Ee++),ke+=Q(Z,ye,P,je,ce);else if(je==="object"){if(typeof Y.then=="function")return Q(J(Y),ye,P,Z,ce);throw ye=String(Y),Error("Objects are not valid as a React child (found: "+(ye==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":ye)+"). If you meant to render a collection of children, use an array instead.")}return ke}function ae(Y,ye,P){if(Y==null)return Y;var Z=[],ce=0;return Q(Y,Z,"","",function(je){return ye.call(P,je,ce++)}),Z}function he(Y){if(Y._status===-1){var ye=Y._result;ye=ye(),ye.then(function(P){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=P)},function(P){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=P)}),Y._status===-1&&(Y._status=0,Y._result=ye)}if(Y._status===1)return Y._result.default;throw Y._result}var de=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ye=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(ye))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)};function _e(){}return Rr.Children={map:ae,forEach:function(Y,ye,P){ae(Y,function(){ye.apply(this,arguments)},P)},count:function(Y){var ye=0;return ae(Y,function(){ye++}),ye},toArray:function(Y){return ae(Y,function(ye){return ye})||[]},only:function(Y){if(!U(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},Rr.Component=A,Rr.Fragment=r,Rr.Profiler=s,Rr.PureComponent=T,Rr.StrictMode=a,Rr.Suspense=d,Rr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Rr.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return L.H.useMemoCache(Y)}},Rr.cache=function(Y){return function(){return Y.apply(null,arguments)}},Rr.cloneElement=function(Y,ye,P){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var Z=j({},Y.props),ce=Y.key,je=void 0;if(ye!=null)for(ke in ye.ref!==void 0&&(je=void 0),ye.key!==void 0&&(ce=""+ye.key),ye)!F.call(ye,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&ye.ref===void 0||(Z[ke]=ye[ke]);var ke=arguments.length-2;if(ke===1)Z.children=P;else if(1<ke){for(var De=Array(ke),Ee=0;Ee<ke;Ee++)De[Ee]=arguments[Ee+2];Z.children=De}return z(Y.type,ce,void 0,void 0,je,Z)},Rr.createContext=function(Y){return Y={$$typeof:l,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:i,_context:Y},Y},Rr.createElement=function(Y,ye,P){var Z,ce={},je=null;if(ye!=null)for(Z in ye.key!==void 0&&(je=""+ye.key),ye)F.call(ye,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(ce[Z]=ye[Z]);var ke=arguments.length-2;if(ke===1)ce.children=P;else if(1<ke){for(var De=Array(ke),Ee=0;Ee<ke;Ee++)De[Ee]=arguments[Ee+2];ce.children=De}if(Y&&Y.defaultProps)for(Z in ke=Y.defaultProps,ke)ce[Z]===void 0&&(ce[Z]=ke[Z]);return z(Y,je,void 0,void 0,null,ce)},Rr.createRef=function(){return{current:null}},Rr.forwardRef=function(Y){return{$$typeof:u,render:Y}},Rr.isValidElement=U,Rr.lazy=function(Y){return{$$typeof:m,_payload:{_status:-1,_result:Y},_init:he}},Rr.memo=function(Y,ye){return{$$typeof:f,type:Y,compare:ye===void 0?null:ye}},Rr.startTransition=function(Y){var ye=L.T,P={};L.T=P;try{var Z=Y(),ce=L.S;ce!==null&&ce(P,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(_e,de)}catch(je){de(je)}finally{L.T=ye}},Rr.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Rr.use=function(Y){return L.H.use(Y)},Rr.useActionState=function(Y,ye,P){return L.H.useActionState(Y,ye,P)},Rr.useCallback=function(Y,ye){return L.H.useCallback(Y,ye)},Rr.useContext=function(Y){return L.H.useContext(Y)},Rr.useDebugValue=function(){},Rr.useDeferredValue=function(Y,ye){return L.H.useDeferredValue(Y,ye)},Rr.useEffect=function(Y,ye,P){var Z=L.H;if(typeof P=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(Y,ye)},Rr.useId=function(){return L.H.useId()},Rr.useImperativeHandle=function(Y,ye,P){return L.H.useImperativeHandle(Y,ye,P)},Rr.useInsertionEffect=function(Y,ye){return L.H.useInsertionEffect(Y,ye)},Rr.useLayoutEffect=function(Y,ye){return L.H.useLayoutEffect(Y,ye)},Rr.useMemo=function(Y,ye){return L.H.useMemo(Y,ye)},Rr.useOptimistic=function(Y,ye){return L.H.useOptimistic(Y,ye)},Rr.useReducer=function(Y,ye,P){return L.H.useReducer(Y,ye,P)},Rr.useRef=function(Y){return L.H.useRef(Y)},Rr.useState=function(Y){return L.H.useState(Y)},Rr.useSyncExternalStore=function(Y,ye,P){return L.H.useSyncExternalStore(Y,ye,P)},Rr.useTransition=function(){return L.H.useTransition()},Rr.version="19.1.1",Rr}var Q5;function im(){return Q5||(Q5=1,Ky.exports=LR()),Ky.exports}var _=im();const Wc=Ro(_);var Wy={exports:{}},sp={},Yy={exports:{}},Xy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eS;function MR(){return eS||(eS=1,function(e){function t(ae,he){var de=ae.length;ae.push(he);e:for(;0<de;){var _e=de-1>>>1,Y=ae[_e];if(0<s(Y,he))ae[_e]=he,ae[de]=Y,de=_e;else break e}}function r(ae){return ae.length===0?null:ae[0]}function a(ae){if(ae.length===0)return null;var he=ae[0],de=ae.pop();if(de!==he){ae[0]=de;e:for(var _e=0,Y=ae.length,ye=Y>>>1;_e<ye;){var P=2*(_e+1)-1,Z=ae[P],ce=P+1,je=ae[ce];if(0>s(Z,de))ce<Y&&0>s(je,Z)?(ae[_e]=je,ae[ce]=de,_e=ce):(ae[_e]=Z,ae[P]=de,_e=P);else if(ce<Y&&0>s(je,de))ae[_e]=je,ae[ce]=de,_e=ce;else break e}}return he}function s(ae,he){var de=ae.sortIndex-he.sortIndex;return de!==0?de:ae.id-he.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],f=[],m=1,g=null,v=3,x=!1,j=!1,b=!1,A=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function D(ae){for(var he=r(f);he!==null;){if(he.callback===null)a(f);else if(he.startTime<=ae)a(f),he.sortIndex=he.expirationTime,t(d,he);else break;he=r(f)}}function L(ae){if(b=!1,D(ae),!j)if(r(d)!==null)j=!0,F||(F=!0,q());else{var he=r(f);he!==null&&Q(L,he.startTime-ae)}}var F=!1,z=-1,M=5,U=-1;function oe(){return A?!0:!(e.unstable_now()-U<M)}function R(){if(A=!1,F){var ae=e.unstable_now();U=ae;var he=!0;try{e:{j=!1,b&&(b=!1,T(z),z=-1),x=!0;var de=v;try{t:{for(D(ae),g=r(d);g!==null&&!(g.expirationTime>ae&&oe());){var _e=g.callback;if(typeof _e=="function"){g.callback=null,v=g.priorityLevel;var Y=_e(g.expirationTime<=ae);if(ae=e.unstable_now(),typeof Y=="function"){g.callback=Y,D(ae),he=!0;break t}g===r(d)&&a(d),D(ae)}else a(d);g=r(d)}if(g!==null)he=!0;else{var ye=r(f);ye!==null&&Q(L,ye.startTime-ae),he=!1}}break e}finally{g=null,v=de,x=!1}he=void 0}}finally{he?q():F=!1}}}var q;if(typeof E=="function")q=function(){E(R)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,J=se.port2;se.port1.onmessage=R,q=function(){J.postMessage(null)}}else q=function(){S(R,0)};function Q(ae,he){z=S(function(){ae(e.unstable_now())},he)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ae){ae.callback=null},e.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ae?Math.floor(1e3/ae):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(ae){switch(v){case 1:case 2:case 3:var he=3;break;default:he=v}var de=v;v=he;try{return ae()}finally{v=de}},e.unstable_requestPaint=function(){A=!0},e.unstable_runWithPriority=function(ae,he){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var de=v;v=ae;try{return he()}finally{v=de}},e.unstable_scheduleCallback=function(ae,he,de){var _e=e.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?_e+de:_e):de=_e,ae){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=de+Y,ae={id:m++,callback:he,priorityLevel:ae,startTime:de,expirationTime:Y,sortIndex:-1},de>_e?(ae.sortIndex=de,t(f,ae),r(d)===null&&ae===r(f)&&(b?(T(z),z=-1):b=!0,Q(L,de-_e))):(ae.sortIndex=Y,t(d,ae),j||x||(j=!0,F||(F=!0,q()))),ae},e.unstable_shouldYield=oe,e.unstable_wrapCallback=function(ae){var he=v;return function(){var de=v;v=he;try{return ae.apply(this,arguments)}finally{v=de}}}}(Xy)),Xy}var tS;function IR(){return tS||(tS=1,Yy.exports=MR()),Yy.exports}var Zy={exports:{}},Bs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rS;function qR(){if(rS)return Bs;rS=1;var e=im();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(d,f,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:d,containerInfo:f,implementation:m}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Bs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Bs.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return i(d,f,null,m)},Bs.flushSync=function(d){var f=l.T,m=a.p;try{if(l.T=null,a.p=2,d)return d()}finally{l.T=f,a.p=m,a.d.f()}},Bs.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,a.d.C(d,f))},Bs.prefetchDNS=function(d){typeof d=="string"&&a.d.D(d)},Bs.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,g=u(m,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?a.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:x}):m==="script"&&a.d.X(d,{crossOrigin:g,integrity:v,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Bs.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=u(f.as,f.crossOrigin);a.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&a.d.M(d)},Bs.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,g=u(m,f.crossOrigin);a.d.L(d,m,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Bs.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=u(f.as,f.crossOrigin);a.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else a.d.m(d)},Bs.requestFormReset=function(d){a.d.r(d)},Bs.unstable_batchedUpdates=function(d,f){return d(f)},Bs.useFormState=function(d,f,m){return l.H.useFormState(d,f,m)},Bs.useFormStatus=function(){return l.H.useHostTransitionStatus()},Bs.version="19.1.1",Bs}var aS;function vk(){if(aS)return Zy.exports;aS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Zy.exports=qR(),Zy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nS;function FR(){if(nS)return sp;nS=1;var e=IR(),t=im(),r=vk();function a(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function i(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function l(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function u(o){if(i(o)!==o)throw Error(a(188))}function d(o){var c=o.alternate;if(!c){if(c=i(o),c===null)throw Error(a(188));return c!==o?null:o}for(var h=o,p=c;;){var w=h.return;if(w===null)break;var C=w.alternate;if(C===null){if(p=w.return,p!==null){h=p;continue}break}if(w.child===C.child){for(C=w.child;C;){if(C===h)return u(w),o;if(C===p)return u(w),c;C=C.sibling}throw Error(a(188))}if(h.return!==p.return)h=w,p=C;else{for(var K=!1,fe=w.child;fe;){if(fe===h){K=!0,h=w,p=C;break}if(fe===p){K=!0,p=w,h=C;break}fe=fe.sibling}if(!K){for(fe=C.child;fe;){if(fe===h){K=!0,h=C,p=w;break}if(fe===p){K=!0,p=C,h=w;break}fe=fe.sibling}if(!K)throw Error(a(189))}}if(h.alternate!==p)throw Error(a(190))}if(h.tag!==3)throw Error(a(188));return h.stateNode.current===h?o:c}function f(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=f(o),c!==null)return c;o=o.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),E=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function q(o){return o===null||typeof o!="object"?null:(o=R&&o[R]||o["@@iterator"],typeof o=="function"?o:null)}var se=Symbol.for("react.client.reference");function J(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===se?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case j:return"Fragment";case A:return"Profiler";case b:return"StrictMode";case L:return"Suspense";case F:return"SuspenseList";case U:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case x:return"Portal";case E:return(o.displayName||"Context")+".Provider";case T:return(o._context.displayName||"Context")+".Consumer";case D:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case z:return c=o.displayName||null,c!==null?c:J(o.type)||"Memo";case M:c=o._payload,o=o._init;try{return J(o(c))}catch{}}return null}var Q=Array.isArray,ae=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},_e=[],Y=-1;function ye(o){return{current:o}}function P(o){0>Y||(o.current=_e[Y],_e[Y]=null,Y--)}function Z(o,c){Y++,_e[Y]=o.current,o.current=c}var ce=ye(null),je=ye(null),ke=ye(null),De=ye(null);function Ee(o,c){switch(Z(ke,c),Z(je,o),Z(ce,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?N5(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=N5(c),o=S5(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}P(ce),Z(ce,o)}function ne(){P(ce),P(je),P(ke)}function Ne(o){o.memoizedState!==null&&Z(De,o);var c=ce.current,h=S5(c,o.type);c!==h&&(Z(je,o),Z(ce,h))}function le(o){je.current===o&&(P(ce),P(je)),De.current===o&&(P(De),Qm._currentValue=de)}var xe=Object.prototype.hasOwnProperty,H=e.unstable_scheduleCallback,W=e.unstable_cancelCallback,B=e.unstable_shouldYield,ee=e.unstable_requestPaint,X=e.unstable_now,ge=e.unstable_getCurrentPriorityLevel,be=e.unstable_ImmediatePriority,$e=e.unstable_UserBlockingPriority,Ze=e.unstable_NormalPriority,pe=e.unstable_LowPriority,V=e.unstable_IdlePriority,Le=e.log,ft=e.unstable_setDisableYieldValue,kt=null,Mt=null;function Lt(o){if(typeof Le=="function"&&ft(o),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(kt,o)}catch{}}var at=Math.clz32?Math.clz32:Tt,Nt=Math.log,Ie=Math.LN2;function Tt(o){return o>>>=0,o===0?32:31-(Nt(o)/Ie|0)|0}var mt=256,Et=4194304;function zt(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function ur(o,c,h){var p=o.pendingLanes;if(p===0)return 0;var w=0,C=o.suspendedLanes,K=o.pingedLanes;o=o.warmLanes;var fe=p&134217727;return fe!==0?(p=fe&~C,p!==0?w=zt(p):(K&=fe,K!==0?w=zt(K):h||(h=fe&~o,h!==0&&(w=zt(h))))):(fe=p&~C,fe!==0?w=zt(fe):K!==0?w=zt(K):h||(h=p&~o,h!==0&&(w=zt(h)))),w===0?0:c!==0&&c!==w&&(c&C)===0&&(C=w&-w,h=c&-c,C>=h||C===32&&(h&4194048)!==0)?c:w}function Rt(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function Vt(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qt(){var o=mt;return mt<<=1,(mt&4194048)===0&&(mt=256),o}function hr(){var o=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),o}function pr(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function Be(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function We(o,c,h,p,w,C){var K=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var fe=o.entanglements,Re=o.expirationTimes,Qe=o.hiddenUpdates;for(h=K&~h;0<h;){var gt=31-at(h),wt=1<<gt;fe[gt]=0,Re[gt]=-1;var rt=Qe[gt];if(rt!==null)for(Qe[gt]=null,gt=0;gt<rt.length;gt++){var st=rt[gt];st!==null&&(st.lane&=-536870913)}h&=~wt}p!==0&&vt(o,p,0),C!==0&&w===0&&o.tag!==0&&(o.suspendedLanes|=C&~(K&~c))}function vt(o,c,h){o.pendingLanes|=c,o.suspendedLanes&=~c;var p=31-at(c);o.entangledLanes|=c,o.entanglements[p]=o.entanglements[p]|1073741824|h&4194090}function Fe(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var p=31-at(h),w=1<<p;w&c|o[p]&c&&(o[p]|=c),h&=~w}}function Te(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function nt(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function we(){var o=he.p;return o!==0?o:(o=window.event,o===void 0?32:V5(o.type))}function Ve(o,c){var h=he.p;try{return he.p=o,c()}finally{he.p=h}}var Ct=Math.random().toString(36).slice(2),Dt="__reactFiber$"+Ct,Wt="__reactProps$"+Ct,cr="__reactContainer$"+Ct,Ot="__reactEvents$"+Ct,$t="__reactListeners$"+Ct,rr="__reactHandles$"+Ct,qt="__reactResources$"+Ct,Sr="__reactMarker$"+Ct;function Na(o){delete o[Dt],delete o[Wt],delete o[Ot],delete o[$t],delete o[rr]}function Tr(o){var c=o[Dt];if(c)return c;for(var h=o.parentNode;h;){if(c=h[cr]||h[Dt]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=E5(o);o!==null;){if(h=o[Dt])return h;o=E5(o)}return c}o=h,h=o.parentNode}return null}function on(o){if(o=o[Dt]||o[cr]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function $a(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(a(33))}function Pa(o){var c=o[qt];return c||(c=o[qt]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function ea(o){o[Sr]=!0}var hn=new Set,ta={};function gr(o,c){ra(o,c),ra(o+"Capture",c)}function ra(o,c){for(ta[o]=c,o=0;o<c.length;o++)hn.add(c[o])}var ci=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wn={},_l={};function qo(o){return xe.call(_l,o)?!0:xe.call(wn,o)?!1:ci.test(o)?_l[o]=!0:(wn[o]=!0,!1)}function Ts(o,c,h){if(qo(c))if(h===null)o.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var p=c.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+h)}}function zn(o,c,h){if(h===null)o.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+h)}}function Vn(o,c,h,p){if(p===null)o.removeAttribute(h);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(c,h,""+p)}}var to,ro;function Ys(o){if(to===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);to=c&&c[1]||"",ro=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+to+o+ro}var Os=!1;function Nl(o,c){if(!o||Os)return"";Os=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(c){var wt=function(){throw Error()};if(Object.defineProperty(wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wt,[])}catch(st){var rt=st}Reflect.construct(o,[],wt)}else{try{wt.call()}catch(st){rt=st}o.call(wt.prototype)}}else{try{throw Error()}catch(st){rt=st}(wt=o())&&typeof wt.catch=="function"&&wt.catch(function(){})}}catch(st){if(st&&rt&&typeof st.stack=="string")return[st.stack,rt.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=p.DetermineComponentFrameRoot(),K=C[0],fe=C[1];if(K&&fe){var Re=K.split(`
`),Qe=fe.split(`
`);for(w=p=0;p<Re.length&&!Re[p].includes("DetermineComponentFrameRoot");)p++;for(;w<Qe.length&&!Qe[w].includes("DetermineComponentFrameRoot");)w++;if(p===Re.length||w===Qe.length)for(p=Re.length-1,w=Qe.length-1;1<=p&&0<=w&&Re[p]!==Qe[w];)w--;for(;1<=p&&0<=w;p--,w--)if(Re[p]!==Qe[w]){if(p!==1||w!==1)do if(p--,w--,0>w||Re[p]!==Qe[w]){var gt=`
`+Re[p].replace(" at new "," at ");return o.displayName&&gt.includes("<anonymous>")&&(gt=gt.replace("<anonymous>",o.displayName)),gt}while(1<=p&&0<=w);break}}}finally{Os=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?Ys(h):""}function Sl(o){switch(o.tag){case 26:case 27:case 5:return Ys(o.type);case 16:return Ys("Lazy");case 13:return Ys("Suspense");case 19:return Ys("SuspenseList");case 0:case 15:return Nl(o.type,!1);case 11:return Nl(o.type.render,!1);case 1:return Nl(o.type,!0);case 31:return Ys("Activity");default:return""}}function Fo(o){try{var c="";do c+=Sl(o),o=o.return;while(o);return c}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function Kr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function uc(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function hu(o){var c=uc(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),p=""+o[c];if(!o.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var w=h.get,C=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return w.call(this)},set:function(K){p=""+K,C.call(this,K)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return p},setValue:function(K){p=""+K},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Ds(o){o._valueTracker||(o._valueTracker=hu(o))}function ao(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),p="";return o&&(p=uc(o)?o.checked?"true":"false":o.value),o=p,o!==h?(c.setValue(o),!0):!1}function es(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Bo=/[\n"\\]/g;function Vr(o){return o.replace(Bo,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Uo(o,c,h,p,w,C,K,fe){o.name="",K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?o.type=K:o.removeAttribute("type"),c!=null?K==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+Kr(c)):o.value!==""+Kr(c)&&(o.value=""+Kr(c)):K!=="submit"&&K!=="reset"||o.removeAttribute("value"),c!=null?dc(o,K,Kr(c)):h!=null?dc(o,K,Kr(h)):p!=null&&o.removeAttribute("value"),w==null&&C!=null&&(o.defaultChecked=!!C),w!=null&&(o.checked=w&&typeof w!="function"&&typeof w!="symbol"),fe!=null&&typeof fe!="function"&&typeof fe!="symbol"&&typeof fe!="boolean"?o.name=""+Kr(fe):o.removeAttribute("name")}function mu(o,c,h,p,w,C,K,fe){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.type=C),c!=null||h!=null){if(!(C!=="submit"&&C!=="reset"||c!=null))return;h=h!=null?""+Kr(h):"",c=c!=null?""+Kr(c):h,fe||c===o.value||(o.value=c),o.defaultValue=c}p=p??w,p=typeof p!="function"&&typeof p!="symbol"&&!!p,o.checked=fe?o.checked:!!p,o.defaultChecked=!!p,K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(o.name=K)}function dc(o,c,h){c==="number"&&es(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function no(o,c,h,p){if(o=o.options,c){c={};for(var w=0;w<h.length;w++)c["$"+h[w]]=!0;for(h=0;h<o.length;h++)w=c.hasOwnProperty("$"+o[h].value),o[h].selected!==w&&(o[h].selected=w),w&&p&&(o[h].defaultSelected=!0)}else{for(h=""+Kr(h),c=null,w=0;w<o.length;w++){if(o[w].value===h){o[w].selected=!0,p&&(o[w].defaultSelected=!0);return}c!==null||o[w].disabled||(c=o[w])}c!==null&&(c.selected=!0)}}function Xs(o,c,h){if(c!=null&&(c=""+Kr(c),c!==o.value&&(o.value=c),h==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=h!=null?""+Kr(h):""}function fc(o,c,h,p){if(c==null){if(p!=null){if(h!=null)throw Error(a(92));if(Q(p)){if(1<p.length)throw Error(a(93));p=p[0]}h=p}h==null&&(h=""),c=h}h=Kr(c),o.defaultValue=h,p=o.textContent,p===h&&p!==""&&p!==null&&(o.value=p)}function ki(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var so=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Al(o,c,h){var p=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?p?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":p?o.setProperty(c,h):typeof h!="number"||h===0||so.has(c)?c==="float"?o.cssFloat=h:o[c]=(""+h).trim():o[c]=h+"px"}function Cl(o,c,h){if(c!=null&&typeof c!="object")throw Error(a(62));if(o=o.style,h!=null){for(var p in h)!h.hasOwnProperty(p)||c!=null&&c.hasOwnProperty(p)||(p.indexOf("--")===0?o.setProperty(p,""):p==="float"?o.cssFloat="":o[p]="");for(var w in c)p=c[w],c.hasOwnProperty(w)&&h[w]!==p&&Al(o,w,p)}else for(var C in c)c.hasOwnProperty(C)&&Al(o,C,c[C])}function hc(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$o=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mn(o){return $o.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var ui=null;function kl(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Rs=null,di=null;function $(o){var c=on(o);if(c&&(o=c.stateNode)){var h=o[Wt]||null;e:switch(o=c.stateNode,c.type){case"input":if(Uo(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Vr(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var p=h[c];if(p!==o&&p.form===o.form){var w=p[Wt]||null;if(!w)throw Error(a(90));Uo(p,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(c=0;c<h.length;c++)p=h[c],p.form===o.form&&ao(p)}break e;case"textarea":Xs(o,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&no(o,!!h.multiple,c,!1)}}}var Pe=!1;function it(o,c,h){if(Pe)return o(c,h);Pe=!0;try{var p=o(c);return p}finally{if(Pe=!1,(Rs!==null||di!==null)&&(Gg(),Rs&&(c=Rs,o=di,di=Rs=null,$(c),o)))for(c=0;c<o.length;c++)$(o[c])}}function ht(o,c){var h=o.stateNode;if(h===null)return null;var p=h[Wt]||null;if(p===null)return null;h=p[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(a(231,c,typeof h));return h}var ct=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),et=!1;if(ct)try{var Pt={};Object.defineProperty(Pt,"passive",{get:function(){et=!0}}),window.addEventListener("test",Pt,Pt),window.removeEventListener("test",Pt,Pt)}catch{et=!1}var Ft=null,yt=null,or=null;function wr(){if(or)return or;var o,c=yt,h=c.length,p,w="value"in Ft?Ft.value:Ft.textContent,C=w.length;for(o=0;o<h&&c[o]===w[o];o++);var K=h-o;for(p=1;p<=K&&c[h-p]===w[C-p];p++);return or=w.slice(o,1<p?1-p:void 0)}function Wr(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function ga(){return!0}function Fr(){return!1}function kr(o){function c(h,p,w,C,K){this._reactName=h,this._targetInst=w,this.type=p,this.nativeEvent=C,this.target=K,this.currentTarget=null;for(var fe in o)o.hasOwnProperty(fe)&&(h=o[fe],this[fe]=h?h(C):C[fe]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?ga:Fr,this.isPropagationStopped=Fr,this}return m(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ga)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ga)},persist:function(){},isPersistent:ga}),c}var ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Or=kr(ha),Bt=m({},ha,{view:0,detail:0}),xa=kr(Bt),ma,Ls,pa,jn=m({},Bt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gt,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==pa&&(pa&&o.type==="mousemove"?(ma=o.screenX-pa.screenX,Ls=o.screenY-pa.screenY):Ls=ma=0,pa=o),ma)},movementY:function(o){return"movementY"in o?o.movementY:Ls}}),Ms=kr(jn),Rf=m({},jn,{dataTransfer:0}),zo=kr(Rf),Vo=m({},Bt,{relatedTarget:0}),gu=kr(Vo),Lf=m({},ha,{animationName:0,elapsedTime:0,pseudoElement:0}),mc=kr(Lf),Mf=m({},ha,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),k=kr(Mf),te=m({},ha,{data:0}),Ce=kr(te),Me={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jt(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=pt[o])?!!c[o]:!1}function Gt(){return jt}var sr=m({},Bt,{key:function(o){if(o.key){var c=Me[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Wr(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Ge[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gt,charCode:function(o){return o.type==="keypress"?Wr(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Wr(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),xr=kr(sr),Ar=m({},jn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xr=kr(Ar),za=m({},Bt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gt}),mn=kr(za),Sa=m({},ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),_n=kr(Sa),pn=m({},jn,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Hn=kr(pn),fi=m({},ha,{newState:0,oldState:0}),Is=kr(fi),If=[9,13,27,32],El=ct&&"CompositionEvent"in window,Ei=null;ct&&"documentMode"in document&&(Ei=document.documentMode);var Pl=ct&&"TextEvent"in window&&!Ei,Tl=ct&&(!El||Ei&&8<Ei&&11>=Ei),Ol=" ",Dl=!1;function Gn(o,c){switch(o){case"keyup":return If.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rl(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var hi=!1;function Sd(o,c){switch(o){case"compositionend":return Rl(c);case"keypress":return c.which!==32?null:(Dl=!0,Ol);case"textInput":return o=c.data,o===Ol&&Dl?null:o;default:return null}}function Ad(o,c){if(hi)return o==="compositionend"||!El&&Gn(o,c)?(o=wr(),or=yt=Ft=null,hi=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Tl&&c.locale!=="ko"?null:c.data;default:return null}}var Wa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function io(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!Wa[o.type]:c==="textarea"}function pc(o,c,h,p){Rs?di?di.push(p):di=[p]:Rs=p,c=Jg(c,"onChange"),0<c.length&&(h=new Or("onChange","change",null,h,p),o.push({event:h,listeners:c}))}var Ll=null,ts=null;function gc(o){y5(o,0)}function Ml(o){var c=$a(o);if(ao(c))return o}function xu(o,c){if(o==="change")return c}var Ho=!1;if(ct){var Go;if(ct){var vs="oninput"in document;if(!vs){var qs=document.createElement("div");qs.setAttribute("oninput","return;"),vs=typeof qs.oninput=="function"}Go=vs}else Go=!1;Ho=Go&&(!document.documentMode||9<document.documentMode)}function Ko(){Ll&&(Ll.detachEvent("onpropertychange",oo),ts=Ll=null)}function oo(o){if(o.propertyName==="value"&&Ml(ts)){var c=[];pc(c,ts,o,kl(o)),it(gc,c)}}function Il(o,c,h){o==="focusin"?(Ko(),Ll=c,ts=h,Ll.attachEvent("onpropertychange",oo)):o==="focusout"&&Ko()}function Cd(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Ml(ts)}function vu(o,c){if(o==="click")return Ml(c)}function ln(o,c){if(o==="input"||o==="change")return Ml(c)}function qf(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Ya=typeof Object.is=="function"?Object.is:qf;function Fs(o,c){if(Ya(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),p=Object.keys(c);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var w=h[p];if(!xe.call(c,w)||!Ya(o[w],c[w]))return!1}return!0}function yu(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function bu(o,c){var h=yu(o);o=0;for(var p;h;){if(h.nodeType===3){if(p=o+h.textContent.length,o<=c&&p>=c)return{node:h,offset:c-o};o=p}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=yu(h)}}function wu(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?wu(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function ju(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=es(o.document);c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=es(o.document)}return c}function lo(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var ql=ct&&"documentMode"in document&&11>=document.documentMode,Zs=null,Wo=null,mi=null,Yo=!1;function Js(o,c,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Yo||Zs==null||Zs!==es(p)||(p=Zs,"selectionStart"in p&&lo(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),mi&&Fs(mi,p)||(mi=p,p=Jg(Wo,"onSelect"),0<p.length&&(c=new Or("onSelect","select",null,c,h),o.push({event:c,listeners:p}),c.target=Zs)))}function rs(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var Br={animationend:rs("Animation","AnimationEnd"),animationiteration:rs("Animation","AnimationIteration"),animationstart:rs("Animation","AnimationStart"),transitionrun:rs("Transition","TransitionRun"),transitionstart:rs("Transition","TransitionStart"),transitioncancel:rs("Transition","TransitionCancel"),transitionend:rs("Transition","TransitionEnd")},ca={},Xa={};ct&&(Xa=document.createElement("div").style,"AnimationEvent"in window||(delete Br.animationend.animation,delete Br.animationiteration.animation,delete Br.animationstart.animation),"TransitionEvent"in window||delete Br.transitionend.transition);function Ta(o){if(ca[o])return ca[o];if(!Br[o])return o;var c=Br[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in Xa)return ca[o]=c[h];return o}var co=Ta("animationend"),_u=Ta("animationiteration"),xc=Ta("animationstart"),Ff=Ta("transitionrun"),mg=Ta("transitionstart"),pg=Ta("transitioncancel"),ym=Ta("transitionend"),bm=new Map,Bf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bf.push("scrollEnd");function pi(o,c){bm.set(o,c),gr(c,[o])}var Nu=new WeakMap;function Qs(o,c){if(typeof o=="object"&&o!==null){var h=Nu.get(o);return h!==void 0?h:(c={value:o,source:c,stack:Fo(c)},Nu.set(o,c),c)}return{value:o,source:c,stack:Fo(c)}}var ei=[],vc=0,Uf=0;function kd(){for(var o=vc,c=Uf=vc=0;c<o;){var h=ei[c];ei[c++]=null;var p=ei[c];ei[c++]=null;var w=ei[c];ei[c++]=null;var C=ei[c];if(ei[c++]=null,p!==null&&w!==null){var K=p.pending;K===null?w.next=w:(w.next=K.next,K.next=w),p.pending=w}C!==0&&zf(h,w,C)}}function Ed(o,c,h,p){ei[vc++]=o,ei[vc++]=c,ei[vc++]=h,ei[vc++]=p,Uf|=p,o.lanes|=p,o=o.alternate,o!==null&&(o.lanes|=p)}function $f(o,c,h,p){return Ed(o,c,h,p),bc(o)}function yc(o,c){return Ed(o,null,null,c),bc(o)}function zf(o,c,h){o.lanes|=h;var p=o.alternate;p!==null&&(p.lanes|=h);for(var w=!1,C=o.return;C!==null;)C.childLanes|=h,p=C.alternate,p!==null&&(p.childLanes|=h),C.tag===22&&(o=C.stateNode,o===null||o._visibility&1||(w=!0)),o=C,C=C.return;return o.tag===3?(C=o.stateNode,w&&c!==null&&(w=31-at(h),o=C.hiddenUpdates,p=o[w],p===null?o[w]=[c]:p.push(c),c.lane=h|536870912),C):null}function bc(o){if(50<Hm)throw Hm=0,gy=null,Error(a(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var In={};function gi(o,c,h,p){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function as(o,c,h,p){return new gi(o,c,h,p)}function Su(o){return o=o.prototype,!(!o||!o.isReactComponent)}function uo(o,c){var h=o.alternate;return h===null?(h=as(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function Pd(o,c){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,c=h.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function wc(o,c,h,p,w,C){var K=0;if(p=o,typeof o=="function")Su(o)&&(K=1);else if(typeof o=="string")K=xR(o,h,ce.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case U:return o=as(31,h,c,w),o.elementType=U,o.lanes=C,o;case j:return Xo(h.children,w,C,c);case b:K=8,w|=24;break;case A:return o=as(12,h,c,w|2),o.elementType=A,o.lanes=C,o;case L:return o=as(13,h,c,w),o.elementType=L,o.lanes=C,o;case F:return o=as(19,h,c,w),o.elementType=F,o.lanes=C,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case S:case E:K=10;break e;case T:K=9;break e;case D:K=11;break e;case z:K=14;break e;case M:K=16,p=null;break e}K=29,h=Error(a(130,o===null?"null":typeof o,"")),p=null}return c=as(K,h,c,w),c.elementType=o,c.type=p,c.lanes=C,c}function Xo(o,c,h,p){return o=as(7,o,p,c),o.lanes=h,o}function Vf(o,c,h){return o=as(6,o,null,c),o.lanes=h,o}function Td(o,c,h){return c=as(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var Fl=[],Zo=0,Au=null,Hf=0,xi=[],ti=0,jc=null,Jo=1,Qo="";function _c(o,c){Fl[Zo++]=Hf,Fl[Zo++]=Au,Au=o,Hf=c}function gg(o,c,h){xi[ti++]=Jo,xi[ti++]=Qo,xi[ti++]=jc,jc=o;var p=Jo;o=Qo;var w=32-at(p)-1;p&=~(1<<w),h+=1;var C=32-at(c)+w;if(30<C){var K=w-w%5;C=(p&(1<<K)-1).toString(32),p>>=K,w-=K,Jo=1<<32-at(c)+w|h<<w|p,Qo=C+o}else Jo=1<<C|h<<w|p,Qo=o}function Od(o){o.return!==null&&(_c(o,1),gg(o,1,0))}function Dd(o){for(;o===Au;)Au=Fl[--Zo],Fl[Zo]=null,Hf=Fl[--Zo],Fl[Zo]=null;for(;o===jc;)jc=xi[--ti],xi[ti]=null,Qo=xi[--ti],xi[ti]=null,Jo=xi[--ti],xi[ti]=null}var Nn=null,Za=null,aa=!1,Bl=null,fo=!1,wm=Error(a(519));function Nc(o){var c=Error(a(418,""));throw Cu(Qs(c,o)),wm}function xg(o){var c=o.stateNode,h=o.type,p=o.memoizedProps;switch(c[Dt]=o,c[Wt]=p,h){case"dialog":$r("cancel",c),$r("close",c);break;case"iframe":case"object":case"embed":$r("load",c);break;case"video":case"audio":for(h=0;h<Km.length;h++)$r(Km[h],c);break;case"source":$r("error",c);break;case"img":case"image":case"link":$r("error",c),$r("load",c);break;case"details":$r("toggle",c);break;case"input":$r("invalid",c),mu(c,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),Ds(c);break;case"select":$r("invalid",c);break;case"textarea":$r("invalid",c),fc(c,p.value,p.defaultValue,p.children),Ds(c)}h=p.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||p.suppressHydrationWarning===!0||_5(c.textContent,h)?(p.popover!=null&&($r("beforetoggle",c),$r("toggle",c)),p.onScroll!=null&&$r("scroll",c),p.onScrollEnd!=null&&$r("scrollend",c),p.onClick!=null&&(c.onclick=Qg),c=!0):c=!1,c||Nc(o)}function el(o){for(Nn=o.return;Nn;)switch(Nn.tag){case 5:case 13:fo=!1;return;case 27:case 3:fo=!0;return;default:Nn=Nn.return}}function ys(o){if(o!==Nn)return!1;if(!aa)return el(o),aa=!0,!1;var c=o.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||Oy(o.type,o.memoizedProps)),h=!h),h&&Za&&Nc(o),el(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(a(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(h=o.data,h==="/$"){if(c===0){Za=ll(o.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++;o=o.nextSibling}Za=null}}else c===27?(c=Za,zu(o.type)?(o=My,My=null,Za=o):Za=c):Za=Nn?ll(o.stateNode.nextSibling):null;return!0}function ri(){Za=Nn=null,aa=!1}function vg(){var o=Bl;return o!==null&&(yi===null?yi=o:yi.push.apply(yi,o),Bl=null),o}function Cu(o){Bl===null?Bl=[o]:Bl.push(o)}var ho=ye(null),qn=null,tl=null;function Ul(o,c,h){Z(ho,c._currentValue),c._currentValue=h}function mo(o){o._currentValue=ho.current,P(ho)}function Gf(o,c,h){for(;o!==null;){var p=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,p!==null&&(p.childLanes|=c)):p!==null&&(p.childLanes&c)!==c&&(p.childLanes|=c),o===h)break;o=o.return}}function Kf(o,c,h,p){var w=o.child;for(w!==null&&(w.return=o);w!==null;){var C=w.dependencies;if(C!==null){var K=w.child;C=C.firstContext;e:for(;C!==null;){var fe=C;C=w;for(var Re=0;Re<c.length;Re++)if(fe.context===c[Re]){C.lanes|=h,fe=C.alternate,fe!==null&&(fe.lanes|=h),Gf(C.return,h,o),p||(K=null);break e}C=fe.next}}else if(w.tag===18){if(K=w.return,K===null)throw Error(a(341));K.lanes|=h,C=K.alternate,C!==null&&(C.lanes|=h),Gf(K,h,o),K=null}else K=w.child;if(K!==null)K.return=w;else for(K=w;K!==null;){if(K===o){K=null;break}if(w=K.sibling,w!==null){w.return=K.return,K=w;break}K=K.return}w=K}}function ku(o,c,h,p){o=null;for(var w=c,C=!1;w!==null;){if(!C){if((w.flags&524288)!==0)C=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var K=w.alternate;if(K===null)throw Error(a(387));if(K=K.memoizedProps,K!==null){var fe=w.type;Ya(w.pendingProps.value,K.value)||(o!==null?o.push(fe):o=[fe])}}else if(w===De.current){if(K=w.alternate,K===null)throw Error(a(387));K.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(o!==null?o.push(Qm):o=[Qm])}w=w.return}o!==null&&Kf(c,o,h,p),c.flags|=262144}function Wf(o){for(o=o.firstContext;o!==null;){if(!Ya(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function po(o){qn=o,tl=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Sn(o){return Yf(qn,o)}function $l(o,c){return qn===null&&po(o),Yf(o,c)}function Yf(o,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},tl===null){if(o===null)throw Error(a(308));tl=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else tl=tl.next=c;return h}var Uv=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(h,p){o.push(p)}};this.abort=function(){c.aborted=!0,o.forEach(function(h){return h()})}},yg=e.unstable_scheduleCallback,$v=e.unstable_NormalPriority,An={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jm(){return{controller:new Uv,data:new Map,refCount:0}}function Rd(o){o.refCount--,o.refCount===0&&yg($v,function(){o.controller.abort()})}var Ld=null,_m=0,Sc=0,rl=null;function zv(o,c){if(Ld===null){var h=Ld=[];_m=0,Sc=_y(),rl={status:"pending",value:void 0,then:function(p){h.push(p)}}}return _m++,c.then(bg,bg),c}function bg(){if(--_m===0&&Ld!==null){rl!==null&&(rl.status="fulfilled");var o=Ld;Ld=null,Sc=0,rl=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function wg(o,c){var h=[],p={status:"pending",value:null,reason:null,then:function(w){h.push(w)}};return o.then(function(){p.status="fulfilled",p.value=c;for(var w=0;w<h.length;w++)(0,h[w])(c)},function(w){for(p.status="rejected",p.reason=w,w=0;w<h.length;w++)(0,h[w])(void 0)}),p}var y=ae.S;ae.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&zv(o,c),y!==null&&y(o,c)};var N=ye(null);function O(){var o=N.current;return o!==null?o:Fa.pooledCache}function I(o,c){c===null?Z(N,N.current):Z(N,c.pool)}function re(){var o=O();return o===null?null:{parent:An._currentValue,pool:o}}var ie=Error(a(460)),ue=Error(a(474)),me=Error(a(542)),ve={then:function(){}};function Ae(o){return o=o.status,o==="fulfilled"||o==="rejected"}function qe(){}function Je(o,c,h){switch(h=o[h],h===void 0?o.push(c):h!==c&&(c.then(qe,qe),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,Ke(o),o;default:if(typeof c.status=="string")c.then(qe,qe);else{if(o=Fa,o!==null&&100<o.shellSuspendCounter)throw Error(a(482));o=c,o.status="pending",o.then(function(p){if(c.status==="pending"){var w=c;w.status="fulfilled",w.value=p}},function(p){if(c.status==="pending"){var w=c;w.status="rejected",w.reason=p}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,Ke(o),o}throw Se=c,ie}}var Se=null;function ze(){if(Se===null)throw Error(a(459));var o=Se;return Se=null,o}function Ke(o){if(o===ie||o===me)throw Error(a(483))}var lt=!1;function Xe(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dt(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function ut(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function St(o,c,h){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(ya&2)!==0){var w=p.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),p.pending=c,c=bc(o),zf(o,null,h),c}return Ed(o,p,c,h),bc(o)}function bt(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var p=c.lanes;p&=o.pendingLanes,h|=p,c.lanes=h,Fe(o,h)}}function ar(o,c){var h=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var w=null,C=null;if(h=h.firstBaseUpdate,h!==null){do{var K={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};C===null?w=C=K:C=C.next=K,h=h.next}while(h!==null);C===null?w=C=c:C=C.next=c}else w=C=c;h={baseState:p.baseState,firstBaseUpdate:w,lastBaseUpdate:C,shared:p.shared,callbacks:p.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}var Ht=!1;function jr(){if(Ht){var o=rl;if(o!==null)throw o}}function Kt(o,c,h,p){Ht=!1;var w=o.updateQueue;lt=!1;var C=w.firstBaseUpdate,K=w.lastBaseUpdate,fe=w.shared.pending;if(fe!==null){w.shared.pending=null;var Re=fe,Qe=Re.next;Re.next=null,K===null?C=Qe:K.next=Qe,K=Re;var gt=o.alternate;gt!==null&&(gt=gt.updateQueue,fe=gt.lastBaseUpdate,fe!==K&&(fe===null?gt.firstBaseUpdate=Qe:fe.next=Qe,gt.lastBaseUpdate=Re))}if(C!==null){var wt=w.baseState;K=0,gt=Qe=Re=null,fe=C;do{var rt=fe.lane&-536870913,st=rt!==fe.lane;if(st?(Jr&rt)===rt:(p&rt)===rt){rt!==0&&rt===Sc&&(Ht=!0),gt!==null&&(gt=gt.next={lane:0,tag:fe.tag,payload:fe.payload,callback:null,next:null});e:{var yr=o,fr=fe;rt=c;var ka=h;switch(fr.tag){case 1:if(yr=fr.payload,typeof yr=="function"){wt=yr.call(ka,wt,rt);break e}wt=yr;break e;case 3:yr.flags=yr.flags&-65537|128;case 0:if(yr=fr.payload,rt=typeof yr=="function"?yr.call(ka,wt,rt):yr,rt==null)break e;wt=m({},wt,rt);break e;case 2:lt=!0}}rt=fe.callback,rt!==null&&(o.flags|=64,st&&(o.flags|=8192),st=w.callbacks,st===null?w.callbacks=[rt]:st.push(rt))}else st={lane:rt,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},gt===null?(Qe=gt=st,Re=wt):gt=gt.next=st,K|=rt;if(fe=fe.next,fe===null){if(fe=w.shared.pending,fe===null)break;st=fe,fe=st.next,st.next=null,w.lastBaseUpdate=st,w.shared.pending=null}}while(!0);gt===null&&(Re=wt),w.baseState=Re,w.firstBaseUpdate=Qe,w.lastBaseUpdate=gt,C===null&&(w.shared.lanes=0),Fu|=K,o.lanes=K,o.memoizedState=wt}}function Ir(o,c){if(typeof o!="function")throw Error(a(191,o));o.call(c)}function gn(o,c){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)Ir(h[o],c)}var vr=ye(null),Yt=ye(0);function It(o,c){o=Dc,Z(Yt,o),Z(vr,c),Dc=o|c.baseLanes}function Va(){Z(Yt,Dc),Z(vr,vr.current)}function _r(){Dc=Yt.current,P(vr),P(Yt)}var Pr=0,Jt=null,Cr=null,Hr=null,Oa=!1,cn=!1,un=!1,Ja=0,Mr=0,Gr=null,Qa=0;function dr(){throw Error(a(321))}function Cn(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!Ya(o[h],c[h]))return!1;return!0}function ai(o,c,h,p,w,C){return Pr=C,Jt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,ae.H=o===null||o.memoizedState===null?aN:nN,un=!1,C=h(p,w),un=!1,cn&&(C=bs(c,h,p,w)),en(o),C}function en(o){ae.H=Dg;var c=Cr!==null&&Cr.next!==null;if(Pr=0,Hr=Cr=Jt=null,Oa=!1,Mr=0,Gr=null,c)throw Error(a(300));o===null||ss||(o=o.dependencies,o!==null&&Wf(o)&&(ss=!0))}function bs(o,c,h,p){Jt=o;var w=0;do{if(cn&&(Gr=null),Mr=0,cn=!1,25<=w)throw Error(a(301));if(w+=1,Hr=Cr=null,o.updateQueue!=null){var C=o.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}ae.H=kD,C=c(h,p)}while(cn);return C}function va(){var o=ae.H,c=o.useState()[0];return c=typeof c.then=="function"?Wn(c):c,o=o.useState()[0],(Cr!==null?Cr.memoizedState:null)!==o&&(Jt.flags|=1024),c}function dn(){var o=Ja!==0;return Ja=0,o}function ws(o,c,h){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~h}function Kn(o){if(Oa){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Oa=!1}Pr=0,Hr=Cr=Jt=null,cn=!1,Mr=Ja=0,Gr=null}function Aa(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hr===null?Jt.memoizedState=Hr=o:Hr=Hr.next=o,Hr}function Zr(){if(Cr===null){var o=Jt.alternate;o=o!==null?o.memoizedState:null}else o=Cr.next;var c=Hr===null?Jt.memoizedState:Hr.next;if(c!==null)Hr=c,Cr=o;else{if(o===null)throw Jt.alternate===null?Error(a(467)):Error(a(310));Cr=o,o={memoizedState:Cr.memoizedState,baseState:Cr.baseState,baseQueue:Cr.baseQueue,queue:Cr.queue,next:null},Hr===null?Jt.memoizedState=Hr=o:Hr=Hr.next=o}return Hr}function ns(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wn(o){var c=Mr;return Mr+=1,Gr===null&&(Gr=[]),o=Je(Gr,o,c),c=Jt,(Hr===null?c.memoizedState:Hr.next)===null&&(c=c.alternate,ae.H=c===null||c.memoizedState===null?aN:nN),o}function ua(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Wn(o);if(o.$$typeof===E)return Sn(o)}throw Error(a(438,String(o)))}function js(o){var c=null,h=Jt.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var p=Jt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(c={data:p.data.map(function(w){return w.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=ns(),Jt.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(o),p=0;p<o;p++)h[p]=oe;return c.index++,h}function kn(o,c){return typeof c=="function"?c(o):c}function go(o){var c=Zr();return Pi(c,Cr,o)}function Pi(o,c,h){var p=o.queue;if(p===null)throw Error(a(311));p.lastRenderedReducer=h;var w=o.baseQueue,C=p.pending;if(C!==null){if(w!==null){var K=w.next;w.next=C.next,C.next=K}c.baseQueue=w=C,p.pending=null}if(C=o.baseState,w===null)o.memoizedState=C;else{c=w.next;var fe=K=null,Re=null,Qe=c,gt=!1;do{var wt=Qe.lane&-536870913;if(wt!==Qe.lane?(Jr&wt)===wt:(Pr&wt)===wt){var rt=Qe.revertLane;if(rt===0)Re!==null&&(Re=Re.next={lane:0,revertLane:0,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null}),wt===Sc&&(gt=!0);else if((Pr&rt)===rt){Qe=Qe.next,rt===Sc&&(gt=!0);continue}else wt={lane:0,revertLane:Qe.revertLane,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null},Re===null?(fe=Re=wt,K=C):Re=Re.next=wt,Jt.lanes|=rt,Fu|=rt;wt=Qe.action,un&&h(C,wt),C=Qe.hasEagerState?Qe.eagerState:h(C,wt)}else rt={lane:wt,revertLane:Qe.revertLane,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null},Re===null?(fe=Re=rt,K=C):Re=Re.next=rt,Jt.lanes|=wt,Fu|=wt;Qe=Qe.next}while(Qe!==null&&Qe!==c);if(Re===null?K=C:Re.next=fe,!Ya(C,o.memoizedState)&&(ss=!0,gt&&(h=rl,h!==null)))throw h;o.memoizedState=C,o.baseState=K,o.baseQueue=Re,p.lastRenderedState=C}return w===null&&(p.lanes=0),[o.memoizedState,p.dispatch]}function En(o){var c=Zr(),h=c.queue;if(h===null)throw Error(a(311));h.lastRenderedReducer=o;var p=h.dispatch,w=h.pending,C=c.memoizedState;if(w!==null){h.pending=null;var K=w=w.next;do C=o(C,K.action),K=K.next;while(K!==w);Ya(C,c.memoizedState)||(ss=!0),c.memoizedState=C,c.baseQueue===null&&(c.baseState=C),h.lastRenderedState=C}return[C,p]}function Md(o,c,h){var p=Jt,w=Zr(),C=aa;if(C){if(h===void 0)throw Error(a(407));h=h()}else h=c();var K=!Ya((Cr||w).memoizedState,h);K&&(w.memoizedState=h,ss=!0),w=w.queue;var fe=Eu.bind(null,p,w,o);if(Ou(2048,8,fe,[o]),w.getSnapshot!==c||K||Hr!==null&&Hr.memoizedState.tag&1){if(p.flags|=2048,nl(9,Bd(),Id.bind(null,p,w,h,c),null),Fa===null)throw Error(a(349));C||(Pr&124)!==0||Xf(p,c,h)}return h}function Xf(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=Jt.updateQueue,c===null?(c=ns(),Jt.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function Id(o,c,h,p){c.value=h,c.getSnapshot=p,jg(c)&&_g(o)}function Eu(o,c,h){return h(function(){jg(c)&&_g(o)})}function jg(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!Ya(o,h)}catch{return!0}}function _g(o){var c=yc(o,2);c!==null&&Mi(c,o,2)}function qd(o){var c=Aa();if(typeof o=="function"){var h=o;if(o=h(),un){Lt(!0);try{h()}finally{Lt(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:o},c}function al(o,c,h,p){return o.baseState=h,Pi(o,Cr,typeof p=="function"?p:kn)}function Vv(o,c,h,p,w){if(Og(o))throw Error(a(485));if(o=c.action,o!==null){var C={payload:w,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){C.listeners.push(K)}};ae.T!==null?h(!0):C.isTransition=!1,p(C),h=c.pending,h===null?(C.next=c.pending=C,Ng(c,C)):(C.next=h.next,c.pending=h.next=C)}}function Ng(o,c){var h=c.action,p=c.payload,w=o.state;if(c.isTransition){var C=ae.T,K={};ae.T=K;try{var fe=h(w,p),Re=ae.S;Re!==null&&Re(K,fe),Sg(o,c,fe)}catch(Qe){Pu(o,c,Qe)}finally{ae.T=C}}else try{C=h(w,p),Sg(o,c,C)}catch(Qe){Pu(o,c,Qe)}}function Sg(o,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(p){Nm(o,c,p)},function(p){return Pu(o,c,p)}):Nm(o,c,h)}function Nm(o,c,h){c.status="fulfilled",c.value=h,Sm(c),o.state=h,c=o.pending,c!==null&&(h=c.next,h===c?o.pending=null:(h=h.next,c.next=h,Ng(o,h)))}function Pu(o,c,h){var p=o.pending;if(o.pending=null,p!==null){p=p.next;do c.status="rejected",c.reason=h,Sm(c),c=c.next;while(c!==p)}o.action=null}function Sm(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function Am(o,c){return c}function Fd(o,c){if(aa){var h=Fa.formState;if(h!==null){e:{var p=Jt;if(aa){if(Za){t:{for(var w=Za,C=fo;w.nodeType!==8;){if(!C){w=null;break t}if(w=ll(w.nextSibling),w===null){w=null;break t}}C=w.data,w=C==="F!"||C==="F"?w:null}if(w){Za=ll(w.nextSibling),p=w.data==="F!";break e}}Nc(p)}p=!1}p&&(c=h[0])}}return h=Aa(),h.memoizedState=h.baseState=c,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Am,lastRenderedState:c},h.queue=p,h=eN.bind(null,Jt,p),p.dispatch=h,p=qd(!1),C=Hv.bind(null,Jt,!1,p.queue),p=Aa(),w={state:c,dispatch:null,action:o,pending:null},p.queue=w,h=Vv.bind(null,Jt,w,C,h),w.dispatch=h,p.memoizedState=o,[c,h,!1]}function Zf(o){var c=Zr();return Tu(c,Cr,o)}function Tu(o,c,h){if(c=Pi(o,c,Am)[0],o=go(kn)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var p=Wn(c)}catch(K){throw K===ie?me:K}else p=c;c=Zr();var w=c.queue,C=w.dispatch;return h!==c.memoizedState&&(Jt.flags|=2048,nl(9,Bd(),Ag.bind(null,w,h),null)),[p,C,o]}function Ag(o,c){o.action=c}function Cg(o){var c=Zr(),h=Cr;if(h!==null)return Tu(c,h,o);Zr(),c=c.memoizedState,h=Zr();var p=h.queue.dispatch;return h.memoizedState=o,[c,p,!1]}function nl(o,c,h,p){return o={tag:o,create:h,deps:p,inst:c,next:null},c=Jt.updateQueue,c===null&&(c=ns(),Jt.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=o.next=o:(p=h.next,h.next=o,o.next=p,c.lastEffect=o),o}function Bd(){return{destroy:void 0,resource:void 0}}function Jf(){return Zr().memoizedState}function Ti(o,c,h,p){var w=Aa();p=p===void 0?null:p,Jt.flags|=o,w.memoizedState=nl(1|c,Bd(),h,p)}function Ou(o,c,h,p){var w=Zr();p=p===void 0?null:p;var C=w.memoizedState.inst;Cr!==null&&p!==null&&Cn(p,Cr.memoizedState.deps)?w.memoizedState=nl(c,C,h,p):(Jt.flags|=o,w.memoizedState=nl(1|c,C,h,p))}function Cm(o,c){Ti(8390656,8,o,c)}function kg(o,c){Ou(2048,8,o,c)}function km(o,c){return Ou(4,2,o,c)}function Ac(o,c){return Ou(4,4,o,c)}function Eg(o,c){if(typeof c=="function"){o=o();var h=c(o);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function Em(o,c,h){h=h!=null?h.concat([o]):null,Ou(4,4,Eg.bind(null,c,o),h)}function Pm(){}function Tm(o,c){var h=Zr();c=c===void 0?null:c;var p=h.memoizedState;return c!==null&&Cn(c,p[1])?p[0]:(h.memoizedState=[o,c],o)}function Pg(o,c){var h=Zr();c=c===void 0?null:c;var p=h.memoizedState;if(c!==null&&Cn(c,p[1]))return p[0];if(p=o(),un){Lt(!0);try{o()}finally{Lt(!1)}}return h.memoizedState=[p,c],p}function Cc(o,c,h){return h===void 0||(Pr&1073741824)!==0?o.memoizedState=c:(o.memoizedState=h,o=XN(),Jt.lanes|=o,Fu|=o,h)}function Qf(o,c,h,p){return Ya(h,c)?h:vr.current!==null?(o=Cc(o,h,p),Ya(o,c)||(ss=!0),o):(Pr&42)===0?(ss=!0,o.memoizedState=h):(o=XN(),Jt.lanes|=o,Fu|=o,c)}function Ud(o,c,h,p,w){var C=he.p;he.p=C!==0&&8>C?C:8;var K=ae.T,fe={};ae.T=fe,Hv(o,!1,c,h);try{var Re=w(),Qe=ae.S;if(Qe!==null&&Qe(fe,Re),Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var gt=wg(Re,p);Lm(o,c,gt,Li(o))}else Lm(o,c,p,Li(o))}catch(wt){Lm(o,c,{then:function(){},status:"rejected",reason:wt},Li())}finally{he.p=C,ae.T=K}}function sl(){}function xo(o,c,h,p){if(o.tag!==5)throw Error(a(476));var w=il(o).queue;Ud(o,w,c,de,h===null?sl:function(){return $d(o),h(p)})}function il(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:de},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:h},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function $d(o){var c=il(o).next.queue;Lm(o,c,{},Li())}function zd(){return Sn(Qm)}function Om(){return Zr().memoizedState}function Tg(){return Zr().memoizedState}function Dm(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var h=Li();o=ut(h);var p=St(c,o,h);p!==null&&(Mi(p,c,h),bt(p,c,h)),c={cache:jm()},o.payload=c;return}c=c.return}}function Rm(o,c,h){var p=Li();h={lane:p,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},Og(o)?tN(c,h):(h=$f(o,c,h,p),h!==null&&(Mi(h,o,p),rN(h,c,p)))}function eN(o,c,h){var p=Li();Lm(o,c,h,p)}function Lm(o,c,h,p){var w={lane:p,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(Og(o))tN(c,w);else{var C=o.alternate;if(o.lanes===0&&(C===null||C.lanes===0)&&(C=c.lastRenderedReducer,C!==null))try{var K=c.lastRenderedState,fe=C(K,h);if(w.hasEagerState=!0,w.eagerState=fe,Ya(fe,K))return Ed(o,c,w,0),Fa===null&&kd(),!1}catch{}finally{}if(h=$f(o,c,w,p),h!==null)return Mi(h,o,p),rN(h,c,p),!0}return!1}function Hv(o,c,h,p){if(p={lane:2,revertLane:_y(),action:p,hasEagerState:!1,eagerState:null,next:null},Og(o)){if(c)throw Error(a(479))}else c=$f(o,h,p,2),c!==null&&Mi(c,o,2)}function Og(o){var c=o.alternate;return o===Jt||c!==null&&c===Jt}function tN(o,c){cn=Oa=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function rN(o,c,h){if((h&4194048)!==0){var p=c.lanes;p&=o.pendingLanes,h|=p,c.lanes=h,Fe(o,h)}}var Dg={readContext:Sn,use:ua,useCallback:dr,useContext:dr,useEffect:dr,useImperativeHandle:dr,useLayoutEffect:dr,useInsertionEffect:dr,useMemo:dr,useReducer:dr,useRef:dr,useState:dr,useDebugValue:dr,useDeferredValue:dr,useTransition:dr,useSyncExternalStore:dr,useId:dr,useHostTransitionStatus:dr,useFormState:dr,useActionState:dr,useOptimistic:dr,useMemoCache:dr,useCacheRefresh:dr},aN={readContext:Sn,use:ua,useCallback:function(o,c){return Aa().memoizedState=[o,c===void 0?null:c],o},useContext:Sn,useEffect:Cm,useImperativeHandle:function(o,c,h){h=h!=null?h.concat([o]):null,Ti(4194308,4,Eg.bind(null,c,o),h)},useLayoutEffect:function(o,c){return Ti(4194308,4,o,c)},useInsertionEffect:function(o,c){Ti(4,2,o,c)},useMemo:function(o,c){var h=Aa();c=c===void 0?null:c;var p=o();if(un){Lt(!0);try{o()}finally{Lt(!1)}}return h.memoizedState=[p,c],p},useReducer:function(o,c,h){var p=Aa();if(h!==void 0){var w=h(c);if(un){Lt(!0);try{h(c)}finally{Lt(!1)}}}else w=c;return p.memoizedState=p.baseState=w,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:w},p.queue=o,o=o.dispatch=Rm.bind(null,Jt,o),[p.memoizedState,o]},useRef:function(o){var c=Aa();return o={current:o},c.memoizedState=o},useState:function(o){o=qd(o);var c=o.queue,h=eN.bind(null,Jt,c);return c.dispatch=h,[o.memoizedState,h]},useDebugValue:Pm,useDeferredValue:function(o,c){var h=Aa();return Cc(h,o,c)},useTransition:function(){var o=qd(!1);return o=Ud.bind(null,Jt,o.queue,!0,!1),Aa().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,h){var p=Jt,w=Aa();if(aa){if(h===void 0)throw Error(a(407));h=h()}else{if(h=c(),Fa===null)throw Error(a(349));(Jr&124)!==0||Xf(p,c,h)}w.memoizedState=h;var C={value:h,getSnapshot:c};return w.queue=C,Cm(Eu.bind(null,p,C,o),[o]),p.flags|=2048,nl(9,Bd(),Id.bind(null,p,C,h,c),null),h},useId:function(){var o=Aa(),c=Fa.identifierPrefix;if(aa){var h=Qo,p=Jo;h=(p&~(1<<32-at(p)-1)).toString(32)+h,c=""+c+"R"+h,h=Ja++,0<h&&(c+="H"+h.toString(32)),c+=""}else h=Qa++,c=""+c+"r"+h.toString(32)+"";return o.memoizedState=c},useHostTransitionStatus:zd,useFormState:Fd,useActionState:Fd,useOptimistic:function(o){var c=Aa();c.memoizedState=c.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=Hv.bind(null,Jt,!0,h),h.dispatch=c,[o,c]},useMemoCache:js,useCacheRefresh:function(){return Aa().memoizedState=Dm.bind(null,Jt)}},nN={readContext:Sn,use:ua,useCallback:Tm,useContext:Sn,useEffect:kg,useImperativeHandle:Em,useInsertionEffect:km,useLayoutEffect:Ac,useMemo:Pg,useReducer:go,useRef:Jf,useState:function(){return go(kn)},useDebugValue:Pm,useDeferredValue:function(o,c){var h=Zr();return Qf(h,Cr.memoizedState,o,c)},useTransition:function(){var o=go(kn)[0],c=Zr().memoizedState;return[typeof o=="boolean"?o:Wn(o),c]},useSyncExternalStore:Md,useId:Om,useHostTransitionStatus:zd,useFormState:Zf,useActionState:Zf,useOptimistic:function(o,c){var h=Zr();return al(h,Cr,o,c)},useMemoCache:js,useCacheRefresh:Tg},kD={readContext:Sn,use:ua,useCallback:Tm,useContext:Sn,useEffect:kg,useImperativeHandle:Em,useInsertionEffect:km,useLayoutEffect:Ac,useMemo:Pg,useReducer:En,useRef:Jf,useState:function(){return En(kn)},useDebugValue:Pm,useDeferredValue:function(o,c){var h=Zr();return Cr===null?Cc(h,o,c):Qf(h,Cr.memoizedState,o,c)},useTransition:function(){var o=En(kn)[0],c=Zr().memoizedState;return[typeof o=="boolean"?o:Wn(o),c]},useSyncExternalStore:Md,useId:Om,useHostTransitionStatus:zd,useFormState:Cg,useActionState:Cg,useOptimistic:function(o,c){var h=Zr();return Cr!==null?al(h,Cr,o,c):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:js,useCacheRefresh:Tg},eh=null,Mm=0;function Rg(o){var c=Mm;return Mm+=1,eh===null&&(eh=[]),Je(eh,o,c)}function Im(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function Lg(o,c){throw c.$$typeof===g?Error(a(525)):(o=Object.prototype.toString.call(c),Error(a(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function sN(o){var c=o._init;return c(o._payload)}function iN(o){function c(He,Ue){if(o){var Ye=He.deletions;Ye===null?(He.deletions=[Ue],He.flags|=16):Ye.push(Ue)}}function h(He,Ue){if(!o)return null;for(;Ue!==null;)c(He,Ue),Ue=Ue.sibling;return null}function p(He){for(var Ue=new Map;He!==null;)He.key!==null?Ue.set(He.key,He):Ue.set(He.index,He),He=He.sibling;return Ue}function w(He,Ue){return He=uo(He,Ue),He.index=0,He.sibling=null,He}function C(He,Ue,Ye){return He.index=Ye,o?(Ye=He.alternate,Ye!==null?(Ye=Ye.index,Ye<Ue?(He.flags|=67108866,Ue):Ye):(He.flags|=67108866,Ue)):(He.flags|=1048576,Ue)}function K(He){return o&&He.alternate===null&&(He.flags|=67108866),He}function fe(He,Ue,Ye,xt){return Ue===null||Ue.tag!==6?(Ue=Vf(Ye,He.mode,xt),Ue.return=He,Ue):(Ue=w(Ue,Ye),Ue.return=He,Ue)}function Re(He,Ue,Ye,xt){var er=Ye.type;return er===j?gt(He,Ue,Ye.props.children,xt,Ye.key):Ue!==null&&(Ue.elementType===er||typeof er=="object"&&er!==null&&er.$$typeof===M&&sN(er)===Ue.type)?(Ue=w(Ue,Ye.props),Im(Ue,Ye),Ue.return=He,Ue):(Ue=wc(Ye.type,Ye.key,Ye.props,null,He.mode,xt),Im(Ue,Ye),Ue.return=He,Ue)}function Qe(He,Ue,Ye,xt){return Ue===null||Ue.tag!==4||Ue.stateNode.containerInfo!==Ye.containerInfo||Ue.stateNode.implementation!==Ye.implementation?(Ue=Td(Ye,He.mode,xt),Ue.return=He,Ue):(Ue=w(Ue,Ye.children||[]),Ue.return=He,Ue)}function gt(He,Ue,Ye,xt,er){return Ue===null||Ue.tag!==7?(Ue=Xo(Ye,He.mode,xt,er),Ue.return=He,Ue):(Ue=w(Ue,Ye),Ue.return=He,Ue)}function wt(He,Ue,Ye){if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint")return Ue=Vf(""+Ue,He.mode,Ye),Ue.return=He,Ue;if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case v:return Ye=wc(Ue.type,Ue.key,Ue.props,null,He.mode,Ye),Im(Ye,Ue),Ye.return=He,Ye;case x:return Ue=Td(Ue,He.mode,Ye),Ue.return=He,Ue;case M:var xt=Ue._init;return Ue=xt(Ue._payload),wt(He,Ue,Ye)}if(Q(Ue)||q(Ue))return Ue=Xo(Ue,He.mode,Ye,null),Ue.return=He,Ue;if(typeof Ue.then=="function")return wt(He,Rg(Ue),Ye);if(Ue.$$typeof===E)return wt(He,$l(He,Ue),Ye);Lg(He,Ue)}return null}function rt(He,Ue,Ye,xt){var er=Ue!==null?Ue.key:null;if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return er!==null?null:fe(He,Ue,""+Ye,xt);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case v:return Ye.key===er?Re(He,Ue,Ye,xt):null;case x:return Ye.key===er?Qe(He,Ue,Ye,xt):null;case M:return er=Ye._init,Ye=er(Ye._payload),rt(He,Ue,Ye,xt)}if(Q(Ye)||q(Ye))return er!==null?null:gt(He,Ue,Ye,xt,null);if(typeof Ye.then=="function")return rt(He,Ue,Rg(Ye),xt);if(Ye.$$typeof===E)return rt(He,Ue,$l(He,Ye),xt);Lg(He,Ye)}return null}function st(He,Ue,Ye,xt,er){if(typeof xt=="string"&&xt!==""||typeof xt=="number"||typeof xt=="bigint")return He=He.get(Ye)||null,fe(Ue,He,""+xt,er);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case v:return He=He.get(xt.key===null?Ye:xt.key)||null,Re(Ue,He,xt,er);case x:return He=He.get(xt.key===null?Ye:xt.key)||null,Qe(Ue,He,xt,er);case M:var qr=xt._init;return xt=qr(xt._payload),st(He,Ue,Ye,xt,er)}if(Q(xt)||q(xt))return He=He.get(Ye)||null,gt(Ue,He,xt,er,null);if(typeof xt.then=="function")return st(He,Ue,Ye,Rg(xt),er);if(xt.$$typeof===E)return st(He,Ue,Ye,$l(Ue,xt),er);Lg(Ue,xt)}return null}function yr(He,Ue,Ye,xt){for(var er=null,qr=null,lr=Ue,mr=Ue=0,os=null;lr!==null&&mr<Ye.length;mr++){lr.index>mr?(os=lr,lr=null):os=lr.sibling;var ia=rt(He,lr,Ye[mr],xt);if(ia===null){lr===null&&(lr=os);break}o&&lr&&ia.alternate===null&&c(He,lr),Ue=C(ia,Ue,mr),qr===null?er=ia:qr.sibling=ia,qr=ia,lr=os}if(mr===Ye.length)return h(He,lr),aa&&_c(He,mr),er;if(lr===null){for(;mr<Ye.length;mr++)lr=wt(He,Ye[mr],xt),lr!==null&&(Ue=C(lr,Ue,mr),qr===null?er=lr:qr.sibling=lr,qr=lr);return aa&&_c(He,mr),er}for(lr=p(lr);mr<Ye.length;mr++)os=st(lr,He,mr,Ye[mr],xt),os!==null&&(o&&os.alternate!==null&&lr.delete(os.key===null?mr:os.key),Ue=C(os,Ue,mr),qr===null?er=os:qr.sibling=os,qr=os);return o&&lr.forEach(function(Wu){return c(He,Wu)}),aa&&_c(He,mr),er}function fr(He,Ue,Ye,xt){if(Ye==null)throw Error(a(151));for(var er=null,qr=null,lr=Ue,mr=Ue=0,os=null,ia=Ye.next();lr!==null&&!ia.done;mr++,ia=Ye.next()){lr.index>mr?(os=lr,lr=null):os=lr.sibling;var Wu=rt(He,lr,ia.value,xt);if(Wu===null){lr===null&&(lr=os);break}o&&lr&&Wu.alternate===null&&c(He,lr),Ue=C(Wu,Ue,mr),qr===null?er=Wu:qr.sibling=Wu,qr=Wu,lr=os}if(ia.done)return h(He,lr),aa&&_c(He,mr),er;if(lr===null){for(;!ia.done;mr++,ia=Ye.next())ia=wt(He,ia.value,xt),ia!==null&&(Ue=C(ia,Ue,mr),qr===null?er=ia:qr.sibling=ia,qr=ia);return aa&&_c(He,mr),er}for(lr=p(lr);!ia.done;mr++,ia=Ye.next())ia=st(lr,He,mr,ia.value,xt),ia!==null&&(o&&ia.alternate!==null&&lr.delete(ia.key===null?mr:ia.key),Ue=C(ia,Ue,mr),qr===null?er=ia:qr.sibling=ia,qr=ia);return o&&lr.forEach(function(ER){return c(He,ER)}),aa&&_c(He,mr),er}function ka(He,Ue,Ye,xt){if(typeof Ye=="object"&&Ye!==null&&Ye.type===j&&Ye.key===null&&(Ye=Ye.props.children),typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case v:e:{for(var er=Ye.key;Ue!==null;){if(Ue.key===er){if(er=Ye.type,er===j){if(Ue.tag===7){h(He,Ue.sibling),xt=w(Ue,Ye.props.children),xt.return=He,He=xt;break e}}else if(Ue.elementType===er||typeof er=="object"&&er!==null&&er.$$typeof===M&&sN(er)===Ue.type){h(He,Ue.sibling),xt=w(Ue,Ye.props),Im(xt,Ye),xt.return=He,He=xt;break e}h(He,Ue);break}else c(He,Ue);Ue=Ue.sibling}Ye.type===j?(xt=Xo(Ye.props.children,He.mode,xt,Ye.key),xt.return=He,He=xt):(xt=wc(Ye.type,Ye.key,Ye.props,null,He.mode,xt),Im(xt,Ye),xt.return=He,He=xt)}return K(He);case x:e:{for(er=Ye.key;Ue!==null;){if(Ue.key===er)if(Ue.tag===4&&Ue.stateNode.containerInfo===Ye.containerInfo&&Ue.stateNode.implementation===Ye.implementation){h(He,Ue.sibling),xt=w(Ue,Ye.children||[]),xt.return=He,He=xt;break e}else{h(He,Ue);break}else c(He,Ue);Ue=Ue.sibling}xt=Td(Ye,He.mode,xt),xt.return=He,He=xt}return K(He);case M:return er=Ye._init,Ye=er(Ye._payload),ka(He,Ue,Ye,xt)}if(Q(Ye))return yr(He,Ue,Ye,xt);if(q(Ye)){if(er=q(Ye),typeof er!="function")throw Error(a(150));return Ye=er.call(Ye),fr(He,Ue,Ye,xt)}if(typeof Ye.then=="function")return ka(He,Ue,Rg(Ye),xt);if(Ye.$$typeof===E)return ka(He,Ue,$l(He,Ye),xt);Lg(He,Ye)}return typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint"?(Ye=""+Ye,Ue!==null&&Ue.tag===6?(h(He,Ue.sibling),xt=w(Ue,Ye),xt.return=He,He=xt):(h(He,Ue),xt=Vf(Ye,He.mode,xt),xt.return=He,He=xt),K(He)):h(He,Ue)}return function(He,Ue,Ye,xt){try{Mm=0;var er=ka(He,Ue,Ye,xt);return eh=null,er}catch(lr){if(lr===ie||lr===me)throw lr;var qr=as(29,lr,null,He.mode);return qr.lanes=xt,qr.return=He,qr}finally{}}}var th=iN(!0),oN=iN(!1),vo=ye(null),zl=null;function Du(o){var c=o.alternate;Z(Yn,Yn.current&1),Z(vo,o),zl===null&&(c===null||vr.current!==null||c.memoizedState!==null)&&(zl=o)}function lN(o){if(o.tag===22){if(Z(Yn,Yn.current),Z(vo,o),zl===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(zl=o)}}else Ru()}function Ru(){Z(Yn,Yn.current),Z(vo,vo.current)}function kc(o){P(vo),zl===o&&(zl=null),P(Yn)}var Yn=ye(0);function Mg(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||Ly(h)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Gv(o,c,h,p){c=o.memoizedState,h=h(p,c),h=h==null?c:m({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Kv={enqueueSetState:function(o,c,h){o=o._reactInternals;var p=Li(),w=ut(p);w.payload=c,h!=null&&(w.callback=h),c=St(o,w,p),c!==null&&(Mi(c,o,p),bt(c,o,p))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var p=Li(),w=ut(p);w.tag=1,w.payload=c,h!=null&&(w.callback=h),c=St(o,w,p),c!==null&&(Mi(c,o,p),bt(c,o,p))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=Li(),p=ut(h);p.tag=2,c!=null&&(p.callback=c),c=St(o,p,h),c!==null&&(Mi(c,o,h),bt(c,o,h))}};function cN(o,c,h,p,w,C,K){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,C,K):c.prototype&&c.prototype.isPureReactComponent?!Fs(h,p)||!Fs(w,C):!0}function uN(o,c,h,p){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,p),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,p),c.state!==o&&Kv.enqueueReplaceState(c,c.state,null)}function Vd(o,c){var h=c;if("ref"in c){h={};for(var p in c)p!=="ref"&&(h[p]=c[p])}if(o=o.defaultProps){h===c&&(h=m({},h));for(var w in o)h[w]===void 0&&(h[w]=o[w])}return h}var Ig=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function dN(o){Ig(o)}function fN(o){console.error(o)}function hN(o){Ig(o)}function qg(o,c){try{var h=o.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(p){setTimeout(function(){throw p})}}function mN(o,c,h){try{var p=o.onCaughtError;p(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function Wv(o,c,h){return h=ut(h),h.tag=3,h.payload={element:null},h.callback=function(){qg(o,c)},h}function pN(o){return o=ut(o),o.tag=3,o}function gN(o,c,h,p){var w=h.type.getDerivedStateFromError;if(typeof w=="function"){var C=p.value;o.payload=function(){return w(C)},o.callback=function(){mN(c,h,p)}}var K=h.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(o.callback=function(){mN(c,h,p),typeof w!="function"&&(Bu===null?Bu=new Set([this]):Bu.add(this));var fe=p.stack;this.componentDidCatch(p.value,{componentStack:fe!==null?fe:""})})}function ED(o,c,h,p,w){if(h.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(c=h.alternate,c!==null&&ku(c,h,w,!0),h=vo.current,h!==null){switch(h.tag){case 13:return zl===null?vy():h.alternate===null&&xn===0&&(xn=3),h.flags&=-257,h.flags|=65536,h.lanes=w,p===ve?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([p]):c.add(p),by(o,p,w)),!1;case 22:return h.flags|=65536,p===ve?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([p])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([p]):h.add(p)),by(o,p,w)),!1}throw Error(a(435,h.tag))}return by(o,p,w),vy(),!1}if(aa)return c=vo.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=w,p!==wm&&(o=Error(a(422),{cause:p}),Cu(Qs(o,h)))):(p!==wm&&(c=Error(a(423),{cause:p}),Cu(Qs(c,h))),o=o.current.alternate,o.flags|=65536,w&=-w,o.lanes|=w,p=Qs(p,h),w=Wv(o.stateNode,p,w),ar(o,w),xn!==4&&(xn=2)),!1;var C=Error(a(520),{cause:p});if(C=Qs(C,h),Vm===null?Vm=[C]:Vm.push(C),xn!==4&&(xn=2),c===null)return!0;p=Qs(p,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,o=w&-w,h.lanes|=o,o=Wv(h.stateNode,p,o),ar(h,o),!1;case 1:if(c=h.type,C=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Bu===null||!Bu.has(C))))return h.flags|=65536,w&=-w,h.lanes|=w,w=pN(w),gN(w,o,h,p),ar(h,w),!1}h=h.return}while(h!==null);return!1}var xN=Error(a(461)),ss=!1;function _s(o,c,h,p){c.child=o===null?oN(c,null,h,p):th(c,o.child,h,p)}function vN(o,c,h,p,w){h=h.render;var C=c.ref;if("ref"in p){var K={};for(var fe in p)fe!=="ref"&&(K[fe]=p[fe])}else K=p;return po(c),p=ai(o,c,h,K,C,w),fe=dn(),o!==null&&!ss?(ws(o,c,w),Ec(o,c,w)):(aa&&fe&&Od(c),c.flags|=1,_s(o,c,p,w),c.child)}function yN(o,c,h,p,w){if(o===null){var C=h.type;return typeof C=="function"&&!Su(C)&&C.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=C,bN(o,c,C,p,w)):(o=wc(h.type,null,p,c,c.mode,w),o.ref=c.ref,o.return=c,c.child=o)}if(C=o.child,!ry(o,w)){var K=C.memoizedProps;if(h=h.compare,h=h!==null?h:Fs,h(K,p)&&o.ref===c.ref)return Ec(o,c,w)}return c.flags|=1,o=uo(C,p),o.ref=c.ref,o.return=c,c.child=o}function bN(o,c,h,p,w){if(o!==null){var C=o.memoizedProps;if(Fs(C,p)&&o.ref===c.ref)if(ss=!1,c.pendingProps=p=C,ry(o,w))(o.flags&131072)!==0&&(ss=!0);else return c.lanes=o.lanes,Ec(o,c,w)}return Yv(o,c,h,p,w)}function wN(o,c,h){var p=c.pendingProps,w=p.children,C=o!==null?o.memoizedState:null;if(p.mode==="hidden"){if((c.flags&128)!==0){if(p=C!==null?C.baseLanes|h:h,o!==null){for(w=c.child=o.child,C=0;w!==null;)C=C|w.lanes|w.childLanes,w=w.sibling;c.childLanes=C&~p}else c.childLanes=0,c.child=null;return jN(o,c,p,h)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&I(c,C!==null?C.cachePool:null),C!==null?It(c,C):Va(),lN(c);else return c.lanes=c.childLanes=536870912,jN(o,c,C!==null?C.baseLanes|h:h,h)}else C!==null?(I(c,C.cachePool),It(c,C),Ru(),c.memoizedState=null):(o!==null&&I(c,null),Va(),Ru());return _s(o,c,w,h),c.child}function jN(o,c,h,p){var w=O();return w=w===null?null:{parent:An._currentValue,pool:w},c.memoizedState={baseLanes:h,cachePool:w},o!==null&&I(c,null),Va(),lN(c),o!==null&&ku(o,c,p,!0),null}function Fg(o,c){var h=c.ref;if(h===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(a(284));(o===null||o.ref!==h)&&(c.flags|=4194816)}}function Yv(o,c,h,p,w){return po(c),h=ai(o,c,h,p,void 0,w),p=dn(),o!==null&&!ss?(ws(o,c,w),Ec(o,c,w)):(aa&&p&&Od(c),c.flags|=1,_s(o,c,h,w),c.child)}function _N(o,c,h,p,w,C){return po(c),c.updateQueue=null,h=bs(c,p,h,w),en(o),p=dn(),o!==null&&!ss?(ws(o,c,C),Ec(o,c,C)):(aa&&p&&Od(c),c.flags|=1,_s(o,c,h,C),c.child)}function NN(o,c,h,p,w){if(po(c),c.stateNode===null){var C=In,K=h.contextType;typeof K=="object"&&K!==null&&(C=Sn(K)),C=new h(p,C),c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Kv,c.stateNode=C,C._reactInternals=c,C=c.stateNode,C.props=p,C.state=c.memoizedState,C.refs={},Xe(c),K=h.contextType,C.context=typeof K=="object"&&K!==null?Sn(K):In,C.state=c.memoizedState,K=h.getDerivedStateFromProps,typeof K=="function"&&(Gv(c,h,K,p),C.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(K=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),K!==C.state&&Kv.enqueueReplaceState(C,C.state,null),Kt(c,p,C,w),jr(),C.state=c.memoizedState),typeof C.componentDidMount=="function"&&(c.flags|=4194308),p=!0}else if(o===null){C=c.stateNode;var fe=c.memoizedProps,Re=Vd(h,fe);C.props=Re;var Qe=C.context,gt=h.contextType;K=In,typeof gt=="object"&&gt!==null&&(K=Sn(gt));var wt=h.getDerivedStateFromProps;gt=typeof wt=="function"||typeof C.getSnapshotBeforeUpdate=="function",fe=c.pendingProps!==fe,gt||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(fe||Qe!==K)&&uN(c,C,p,K),lt=!1;var rt=c.memoizedState;C.state=rt,Kt(c,p,C,w),jr(),Qe=c.memoizedState,fe||rt!==Qe||lt?(typeof wt=="function"&&(Gv(c,h,wt,p),Qe=c.memoizedState),(Re=lt||cN(c,h,Re,p,rt,Qe,K))?(gt||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(c.flags|=4194308)):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=p,c.memoizedState=Qe),C.props=p,C.state=Qe,C.context=K,p=Re):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),p=!1)}else{C=c.stateNode,dt(o,c),K=c.memoizedProps,gt=Vd(h,K),C.props=gt,wt=c.pendingProps,rt=C.context,Qe=h.contextType,Re=In,typeof Qe=="object"&&Qe!==null&&(Re=Sn(Qe)),fe=h.getDerivedStateFromProps,(Qe=typeof fe=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(K!==wt||rt!==Re)&&uN(c,C,p,Re),lt=!1,rt=c.memoizedState,C.state=rt,Kt(c,p,C,w),jr();var st=c.memoizedState;K!==wt||rt!==st||lt||o!==null&&o.dependencies!==null&&Wf(o.dependencies)?(typeof fe=="function"&&(Gv(c,h,fe,p),st=c.memoizedState),(gt=lt||cN(c,h,gt,p,rt,st,Re)||o!==null&&o.dependencies!==null&&Wf(o.dependencies))?(Qe||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(p,st,Re),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(p,st,Re)),typeof C.componentDidUpdate=="function"&&(c.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof C.componentDidUpdate!="function"||K===o.memoizedProps&&rt===o.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||K===o.memoizedProps&&rt===o.memoizedState||(c.flags|=1024),c.memoizedProps=p,c.memoizedState=st),C.props=p,C.state=st,C.context=Re,p=gt):(typeof C.componentDidUpdate!="function"||K===o.memoizedProps&&rt===o.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||K===o.memoizedProps&&rt===o.memoizedState||(c.flags|=1024),p=!1)}return C=p,Fg(o,c),p=(c.flags&128)!==0,C||p?(C=c.stateNode,h=p&&typeof h.getDerivedStateFromError!="function"?null:C.render(),c.flags|=1,o!==null&&p?(c.child=th(c,o.child,null,w),c.child=th(c,null,h,w)):_s(o,c,h,w),c.memoizedState=C.state,o=c.child):o=Ec(o,c,w),o}function SN(o,c,h,p){return ri(),c.flags|=256,_s(o,c,h,p),c.child}var Xv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zv(o){return{baseLanes:o,cachePool:re()}}function Jv(o,c,h){return o=o!==null?o.childLanes&~h:0,c&&(o|=yo),o}function AN(o,c,h){var p=c.pendingProps,w=!1,C=(c.flags&128)!==0,K;if((K=C)||(K=o!==null&&o.memoizedState===null?!1:(Yn.current&2)!==0),K&&(w=!0,c.flags&=-129),K=(c.flags&32)!==0,c.flags&=-33,o===null){if(aa){if(w?Du(c):Ru(),aa){var fe=Za,Re;if(Re=fe){e:{for(Re=fe,fe=fo;Re.nodeType!==8;){if(!fe){fe=null;break e}if(Re=ll(Re.nextSibling),Re===null){fe=null;break e}}fe=Re}fe!==null?(c.memoizedState={dehydrated:fe,treeContext:jc!==null?{id:Jo,overflow:Qo}:null,retryLane:536870912,hydrationErrors:null},Re=as(18,null,null,0),Re.stateNode=fe,Re.return=c,c.child=Re,Nn=c,Za=null,Re=!0):Re=!1}Re||Nc(c)}if(fe=c.memoizedState,fe!==null&&(fe=fe.dehydrated,fe!==null))return Ly(fe)?c.lanes=32:c.lanes=536870912,null;kc(c)}return fe=p.children,p=p.fallback,w?(Ru(),w=c.mode,fe=Bg({mode:"hidden",children:fe},w),p=Xo(p,w,h,null),fe.return=c,p.return=c,fe.sibling=p,c.child=fe,w=c.child,w.memoizedState=Zv(h),w.childLanes=Jv(o,K,h),c.memoizedState=Xv,p):(Du(c),Qv(c,fe))}if(Re=o.memoizedState,Re!==null&&(fe=Re.dehydrated,fe!==null)){if(C)c.flags&256?(Du(c),c.flags&=-257,c=ey(o,c,h)):c.memoizedState!==null?(Ru(),c.child=o.child,c.flags|=128,c=null):(Ru(),w=p.fallback,fe=c.mode,p=Bg({mode:"visible",children:p.children},fe),w=Xo(w,fe,h,null),w.flags|=2,p.return=c,w.return=c,p.sibling=w,c.child=p,th(c,o.child,null,h),p=c.child,p.memoizedState=Zv(h),p.childLanes=Jv(o,K,h),c.memoizedState=Xv,c=w);else if(Du(c),Ly(fe)){if(K=fe.nextSibling&&fe.nextSibling.dataset,K)var Qe=K.dgst;K=Qe,p=Error(a(419)),p.stack="",p.digest=K,Cu({value:p,source:null,stack:null}),c=ey(o,c,h)}else if(ss||ku(o,c,h,!1),K=(h&o.childLanes)!==0,ss||K){if(K=Fa,K!==null&&(p=h&-h,p=(p&42)!==0?1:Te(p),p=(p&(K.suspendedLanes|h))!==0?0:p,p!==0&&p!==Re.retryLane))throw Re.retryLane=p,yc(o,p),Mi(K,o,p),xN;fe.data==="$?"||vy(),c=ey(o,c,h)}else fe.data==="$?"?(c.flags|=192,c.child=o.child,c=null):(o=Re.treeContext,Za=ll(fe.nextSibling),Nn=c,aa=!0,Bl=null,fo=!1,o!==null&&(xi[ti++]=Jo,xi[ti++]=Qo,xi[ti++]=jc,Jo=o.id,Qo=o.overflow,jc=c),c=Qv(c,p.children),c.flags|=4096);return c}return w?(Ru(),w=p.fallback,fe=c.mode,Re=o.child,Qe=Re.sibling,p=uo(Re,{mode:"hidden",children:p.children}),p.subtreeFlags=Re.subtreeFlags&65011712,Qe!==null?w=uo(Qe,w):(w=Xo(w,fe,h,null),w.flags|=2),w.return=c,p.return=c,p.sibling=w,c.child=p,p=w,w=c.child,fe=o.child.memoizedState,fe===null?fe=Zv(h):(Re=fe.cachePool,Re!==null?(Qe=An._currentValue,Re=Re.parent!==Qe?{parent:Qe,pool:Qe}:Re):Re=re(),fe={baseLanes:fe.baseLanes|h,cachePool:Re}),w.memoizedState=fe,w.childLanes=Jv(o,K,h),c.memoizedState=Xv,p):(Du(c),h=o.child,o=h.sibling,h=uo(h,{mode:"visible",children:p.children}),h.return=c,h.sibling=null,o!==null&&(K=c.deletions,K===null?(c.deletions=[o],c.flags|=16):K.push(o)),c.child=h,c.memoizedState=null,h)}function Qv(o,c){return c=Bg({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function Bg(o,c){return o=as(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function ey(o,c,h){return th(c,o.child,null,h),o=Qv(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function CN(o,c,h){o.lanes|=c;var p=o.alternate;p!==null&&(p.lanes|=c),Gf(o.return,c,h)}function ty(o,c,h,p,w){var C=o.memoizedState;C===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:w}:(C.isBackwards=c,C.rendering=null,C.renderingStartTime=0,C.last=p,C.tail=h,C.tailMode=w)}function kN(o,c,h){var p=c.pendingProps,w=p.revealOrder,C=p.tail;if(_s(o,c,p.children,h),p=Yn.current,(p&2)!==0)p=p&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&CN(o,h,c);else if(o.tag===19)CN(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}switch(Z(Yn,p),w){case"forwards":for(h=c.child,w=null;h!==null;)o=h.alternate,o!==null&&Mg(o)===null&&(w=h),h=h.sibling;h=w,h===null?(w=c.child,c.child=null):(w=h.sibling,h.sibling=null),ty(c,!1,w,h,C);break;case"backwards":for(h=null,w=c.child,c.child=null;w!==null;){if(o=w.alternate,o!==null&&Mg(o)===null){c.child=w;break}o=w.sibling,w.sibling=h,h=w,w=o}ty(c,!0,h,null,C);break;case"together":ty(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Ec(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),Fu|=c.lanes,(h&c.childLanes)===0)if(o!==null){if(ku(o,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(a(153));if(c.child!==null){for(o=c.child,h=uo(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=uo(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function ry(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Wf(o)))}function PD(o,c,h){switch(c.tag){case 3:Ee(c,c.stateNode.containerInfo),Ul(c,An,o.memoizedState.cache),ri();break;case 27:case 5:Ne(c);break;case 4:Ee(c,c.stateNode.containerInfo);break;case 10:Ul(c,c.type,c.memoizedProps.value);break;case 13:var p=c.memoizedState;if(p!==null)return p.dehydrated!==null?(Du(c),c.flags|=128,null):(h&c.child.childLanes)!==0?AN(o,c,h):(Du(c),o=Ec(o,c,h),o!==null?o.sibling:null);Du(c);break;case 19:var w=(o.flags&128)!==0;if(p=(h&c.childLanes)!==0,p||(ku(o,c,h,!1),p=(h&c.childLanes)!==0),w){if(p)return kN(o,c,h);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Z(Yn,Yn.current),p)break;return null;case 22:case 23:return c.lanes=0,wN(o,c,h);case 24:Ul(c,An,o.memoizedState.cache)}return Ec(o,c,h)}function EN(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps)ss=!0;else{if(!ry(o,h)&&(c.flags&128)===0)return ss=!1,PD(o,c,h);ss=(o.flags&131072)!==0}else ss=!1,aa&&(c.flags&1048576)!==0&&gg(c,Hf,c.index);switch(c.lanes=0,c.tag){case 16:e:{o=c.pendingProps;var p=c.elementType,w=p._init;if(p=w(p._payload),c.type=p,typeof p=="function")Su(p)?(o=Vd(p,o),c.tag=1,c=NN(null,c,p,o,h)):(c.tag=0,c=Yv(null,c,p,o,h));else{if(p!=null){if(w=p.$$typeof,w===D){c.tag=11,c=vN(null,c,p,o,h);break e}else if(w===z){c.tag=14,c=yN(null,c,p,o,h);break e}}throw c=J(p)||p,Error(a(306,c,""))}}return c;case 0:return Yv(o,c,c.type,c.pendingProps,h);case 1:return p=c.type,w=Vd(p,c.pendingProps),NN(o,c,p,w,h);case 3:e:{if(Ee(c,c.stateNode.containerInfo),o===null)throw Error(a(387));p=c.pendingProps;var C=c.memoizedState;w=C.element,dt(o,c),Kt(c,p,null,h);var K=c.memoizedState;if(p=K.cache,Ul(c,An,p),p!==C.cache&&Kf(c,[An],h,!0),jr(),p=K.element,C.isDehydrated)if(C={element:p,isDehydrated:!1,cache:K.cache},c.updateQueue.baseState=C,c.memoizedState=C,c.flags&256){c=SN(o,c,p,h);break e}else if(p!==w){w=Qs(Error(a(424)),c),Cu(w),c=SN(o,c,p,h);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Za=ll(o.firstChild),Nn=c,aa=!0,Bl=null,fo=!0,h=oN(c,null,p,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(ri(),p===w){c=Ec(o,c,h);break e}_s(o,c,p,h)}c=c.child}return c;case 26:return Fg(o,c),o===null?(h=D5(c.type,null,c.pendingProps,null))?c.memoizedState=h:aa||(h=c.type,o=c.pendingProps,p=e0(ke.current).createElement(h),p[Dt]=c,p[Wt]=o,Ss(p,h,o),ea(p),c.stateNode=p):c.memoizedState=D5(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return Ne(c),o===null&&aa&&(p=c.stateNode=P5(c.type,c.pendingProps,ke.current),Nn=c,fo=!0,w=Za,zu(c.type)?(My=w,Za=ll(p.firstChild)):Za=w),_s(o,c,c.pendingProps.children,h),Fg(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&aa&&((w=p=Za)&&(p=nR(p,c.type,c.pendingProps,fo),p!==null?(c.stateNode=p,Nn=c,Za=ll(p.firstChild),fo=!1,w=!0):w=!1),w||Nc(c)),Ne(c),w=c.type,C=c.pendingProps,K=o!==null?o.memoizedProps:null,p=C.children,Oy(w,C)?p=null:K!==null&&Oy(w,K)&&(c.flags|=32),c.memoizedState!==null&&(w=ai(o,c,va,null,null,h),Qm._currentValue=w),Fg(o,c),_s(o,c,p,h),c.child;case 6:return o===null&&aa&&((o=h=Za)&&(h=sR(h,c.pendingProps,fo),h!==null?(c.stateNode=h,Nn=c,Za=null,o=!0):o=!1),o||Nc(c)),null;case 13:return AN(o,c,h);case 4:return Ee(c,c.stateNode.containerInfo),p=c.pendingProps,o===null?c.child=th(c,null,p,h):_s(o,c,p,h),c.child;case 11:return vN(o,c,c.type,c.pendingProps,h);case 7:return _s(o,c,c.pendingProps,h),c.child;case 8:return _s(o,c,c.pendingProps.children,h),c.child;case 12:return _s(o,c,c.pendingProps.children,h),c.child;case 10:return p=c.pendingProps,Ul(c,c.type,p.value),_s(o,c,p.children,h),c.child;case 9:return w=c.type._context,p=c.pendingProps.children,po(c),w=Sn(w),p=p(w),c.flags|=1,_s(o,c,p,h),c.child;case 14:return yN(o,c,c.type,c.pendingProps,h);case 15:return bN(o,c,c.type,c.pendingProps,h);case 19:return kN(o,c,h);case 31:return p=c.pendingProps,h=c.mode,p={mode:p.mode,children:p.children},o===null?(h=Bg(p,h),h.ref=c.ref,c.child=h,h.return=c,c=h):(h=uo(o.child,p),h.ref=c.ref,c.child=h,h.return=c,c=h),c;case 22:return wN(o,c,h);case 24:return po(c),p=Sn(An),o===null?(w=O(),w===null&&(w=Fa,C=jm(),w.pooledCache=C,C.refCount++,C!==null&&(w.pooledCacheLanes|=h),w=C),c.memoizedState={parent:p,cache:w},Xe(c),Ul(c,An,w)):((o.lanes&h)!==0&&(dt(o,c),Kt(c,null,null,h),jr()),w=o.memoizedState,C=c.memoizedState,w.parent!==p?(w={parent:p,cache:p},c.memoizedState=w,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=w),Ul(c,An,p)):(p=C.cache,Ul(c,An,p),p!==w.cache&&Kf(c,[An],h,!0))),_s(o,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(a(156,c.tag))}function Pc(o){o.flags|=4}function PN(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!q5(c)){if(c=vo.current,c!==null&&((Jr&4194048)===Jr?zl!==null:(Jr&62914560)!==Jr&&(Jr&536870912)===0||c!==zl))throw Se=ve,ue;o.flags|=8192}}function Ug(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?hr():536870912,o.lanes|=c,sh|=c)}function qm(o,c){if(!aa)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function fn(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,p=0;if(c)for(var w=o.child;w!==null;)h|=w.lanes|w.childLanes,p|=w.subtreeFlags&65011712,p|=w.flags&65011712,w.return=o,w=w.sibling;else for(w=o.child;w!==null;)h|=w.lanes|w.childLanes,p|=w.subtreeFlags,p|=w.flags,w.return=o,w=w.sibling;return o.subtreeFlags|=p,o.childLanes=h,c}function TD(o,c,h){var p=c.pendingProps;switch(Dd(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(c),null;case 1:return fn(c),null;case 3:return h=c.stateNode,p=null,o!==null&&(p=o.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),mo(An),ne(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(ys(c)?Pc(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,vg())),fn(c),null;case 26:return h=c.memoizedState,o===null?(Pc(c),h!==null?(fn(c),PN(c,h)):(fn(c),c.flags&=-16777217)):h?h!==o.memoizedState?(Pc(c),fn(c),PN(c,h)):(fn(c),c.flags&=-16777217):(o.memoizedProps!==p&&Pc(c),fn(c),c.flags&=-16777217),null;case 27:le(c),h=ke.current;var w=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==p&&Pc(c);else{if(!p){if(c.stateNode===null)throw Error(a(166));return fn(c),null}o=ce.current,ys(c)?xg(c):(o=P5(w,p,h),c.stateNode=o,Pc(c))}return fn(c),null;case 5:if(le(c),h=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==p&&Pc(c);else{if(!p){if(c.stateNode===null)throw Error(a(166));return fn(c),null}if(o=ce.current,ys(c))xg(c);else{switch(w=e0(ke.current),o){case 1:o=w.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:o=w.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":o=w.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":o=w.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":o=w.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof p.is=="string"?w.createElement("select",{is:p.is}):w.createElement("select"),p.multiple?o.multiple=!0:p.size&&(o.size=p.size);break;default:o=typeof p.is=="string"?w.createElement(h,{is:p.is}):w.createElement(h)}}o[Dt]=c,o[Wt]=p;e:for(w=c.child;w!==null;){if(w.tag===5||w.tag===6)o.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===c)break e;for(;w.sibling===null;){if(w.return===null||w.return===c)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}c.stateNode=o;e:switch(Ss(o,h,p),h){case"button":case"input":case"select":case"textarea":o=!!p.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Pc(c)}}return fn(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==p&&Pc(c);else{if(typeof p!="string"&&c.stateNode===null)throw Error(a(166));if(o=ke.current,ys(c)){if(o=c.stateNode,h=c.memoizedProps,p=null,w=Nn,w!==null)switch(w.tag){case 27:case 5:p=w.memoizedProps}o[Dt]=c,o=!!(o.nodeValue===h||p!==null&&p.suppressHydrationWarning===!0||_5(o.nodeValue,h)),o||Nc(c)}else o=e0(o).createTextNode(p),o[Dt]=c,c.stateNode=o}return fn(c),null;case 13:if(p=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(w=ys(c),p!==null&&p.dehydrated!==null){if(o===null){if(!w)throw Error(a(318));if(w=c.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(a(317));w[Dt]=c}else ri(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;fn(c),w=!1}else w=vg(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=w),w=!0;if(!w)return c.flags&256?(kc(c),c):(kc(c),null)}if(kc(c),(c.flags&128)!==0)return c.lanes=h,c;if(h=p!==null,o=o!==null&&o.memoizedState!==null,h){p=c.child,w=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(w=p.alternate.memoizedState.cachePool.pool);var C=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),C!==w&&(p.flags|=2048)}return h!==o&&h&&(c.child.flags|=8192),Ug(c,c.updateQueue),fn(c),null;case 4:return ne(),o===null&&Cy(c.stateNode.containerInfo),fn(c),null;case 10:return mo(c.type),fn(c),null;case 19:if(P(Yn),w=c.memoizedState,w===null)return fn(c),null;if(p=(c.flags&128)!==0,C=w.rendering,C===null)if(p)qm(w,!1);else{if(xn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(C=Mg(o),C!==null){for(c.flags|=128,qm(w,!1),o=C.updateQueue,c.updateQueue=o,Ug(c,o),c.subtreeFlags=0,o=h,h=c.child;h!==null;)Pd(h,o),h=h.sibling;return Z(Yn,Yn.current&1|2),c.child}o=o.sibling}w.tail!==null&&X()>Vg&&(c.flags|=128,p=!0,qm(w,!1),c.lanes=4194304)}else{if(!p)if(o=Mg(C),o!==null){if(c.flags|=128,p=!0,o=o.updateQueue,c.updateQueue=o,Ug(c,o),qm(w,!0),w.tail===null&&w.tailMode==="hidden"&&!C.alternate&&!aa)return fn(c),null}else 2*X()-w.renderingStartTime>Vg&&h!==536870912&&(c.flags|=128,p=!0,qm(w,!1),c.lanes=4194304);w.isBackwards?(C.sibling=c.child,c.child=C):(o=w.last,o!==null?o.sibling=C:c.child=C,w.last=C)}return w.tail!==null?(c=w.tail,w.rendering=c,w.tail=c.sibling,w.renderingStartTime=X(),c.sibling=null,o=Yn.current,Z(Yn,p?o&1|2:o&1),c):(fn(c),null);case 22:case 23:return kc(c),_r(),p=c.memoizedState!==null,o!==null?o.memoizedState!==null!==p&&(c.flags|=8192):p&&(c.flags|=8192),p?(h&536870912)!==0&&(c.flags&128)===0&&(fn(c),c.subtreeFlags&6&&(c.flags|=8192)):fn(c),h=c.updateQueue,h!==null&&Ug(c,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==h&&(c.flags|=2048),o!==null&&P(N),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),mo(An),fn(c),null;case 25:return null;case 30:return null}throw Error(a(156,c.tag))}function OD(o,c){switch(Dd(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return mo(An),ne(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return le(c),null;case 13:if(kc(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(a(340));ri()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return P(Yn),null;case 4:return ne(),null;case 10:return mo(c.type),null;case 22:case 23:return kc(c),_r(),o!==null&&P(N),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return mo(An),null;case 25:return null;default:return null}}function TN(o,c){switch(Dd(c),c.tag){case 3:mo(An),ne();break;case 26:case 27:case 5:le(c);break;case 4:ne();break;case 13:kc(c);break;case 19:P(Yn);break;case 10:mo(c.type);break;case 22:case 23:kc(c),_r(),o!==null&&P(N);break;case 24:mo(An)}}function Fm(o,c){try{var h=c.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var w=p.next;h=w;do{if((h.tag&o)===o){p=void 0;var C=h.create,K=h.inst;p=C(),K.destroy=p}h=h.next}while(h!==w)}}catch(fe){Da(c,c.return,fe)}}function Lu(o,c,h){try{var p=c.updateQueue,w=p!==null?p.lastEffect:null;if(w!==null){var C=w.next;p=C;do{if((p.tag&o)===o){var K=p.inst,fe=K.destroy;if(fe!==void 0){K.destroy=void 0,w=c;var Re=h,Qe=fe;try{Qe()}catch(gt){Da(w,Re,gt)}}}p=p.next}while(p!==C)}}catch(gt){Da(c,c.return,gt)}}function ON(o){var c=o.updateQueue;if(c!==null){var h=o.stateNode;try{gn(c,h)}catch(p){Da(o,o.return,p)}}}function DN(o,c,h){h.props=Vd(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(p){Da(o,c,p)}}function Bm(o,c){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var p=o.stateNode;break;case 30:p=o.stateNode;break;default:p=o.stateNode}typeof h=="function"?o.refCleanup=h(p):h.current=p}}catch(w){Da(o,c,w)}}function Vl(o,c){var h=o.ref,p=o.refCleanup;if(h!==null)if(typeof p=="function")try{p()}catch(w){Da(o,c,w)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(w){Da(o,c,w)}else h.current=null}function RN(o){var c=o.type,h=o.memoizedProps,p=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&p.focus();break e;case"img":h.src?p.src=h.src:h.srcSet&&(p.srcset=h.srcSet)}}catch(w){Da(o,o.return,w)}}function ay(o,c,h){try{var p=o.stateNode;QD(p,o.type,h,c),p[Wt]=c}catch(w){Da(o,o.return,w)}}function LN(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&zu(o.type)||o.tag===4}function ny(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||LN(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&zu(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function sy(o,c,h){var p=o.tag;if(p===5||p===6)o=o.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(o),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=Qg));else if(p!==4&&(p===27&&zu(o.type)&&(h=o.stateNode,c=null),o=o.child,o!==null))for(sy(o,c,h),o=o.sibling;o!==null;)sy(o,c,h),o=o.sibling}function $g(o,c,h){var p=o.tag;if(p===5||p===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(p!==4&&(p===27&&zu(o.type)&&(h=o.stateNode),o=o.child,o!==null))for($g(o,c,h),o=o.sibling;o!==null;)$g(o,c,h),o=o.sibling}function MN(o){var c=o.stateNode,h=o.memoizedProps;try{for(var p=o.type,w=c.attributes;w.length;)c.removeAttributeNode(w[0]);Ss(c,p,h),c[Dt]=o,c[Wt]=h}catch(C){Da(o,o.return,C)}}var Tc=!1,Pn=!1,iy=!1,IN=typeof WeakSet=="function"?WeakSet:Set,is=null;function DD(o,c){if(o=o.containerInfo,Py=i0,o=ju(o),lo(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var w=p.anchorOffset,C=p.focusNode;p=p.focusOffset;try{h.nodeType,C.nodeType}catch{h=null;break e}var K=0,fe=-1,Re=-1,Qe=0,gt=0,wt=o,rt=null;t:for(;;){for(var st;wt!==h||w!==0&&wt.nodeType!==3||(fe=K+w),wt!==C||p!==0&&wt.nodeType!==3||(Re=K+p),wt.nodeType===3&&(K+=wt.nodeValue.length),(st=wt.firstChild)!==null;)rt=wt,wt=st;for(;;){if(wt===o)break t;if(rt===h&&++Qe===w&&(fe=K),rt===C&&++gt===p&&(Re=K),(st=wt.nextSibling)!==null)break;wt=rt,rt=wt.parentNode}wt=st}h=fe===-1||Re===-1?null:{start:fe,end:Re}}else h=null}h=h||{start:0,end:0}}else h=null;for(Ty={focusedElem:o,selectionRange:h},i0=!1,is=c;is!==null;)if(c=is,o=c.child,(c.subtreeFlags&1024)!==0&&o!==null)o.return=c,is=o;else for(;is!==null;){switch(c=is,C=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&C!==null){o=void 0,h=c,w=C.memoizedProps,C=C.memoizedState,p=h.stateNode;try{var yr=Vd(h.type,w,h.elementType===h.type);o=p.getSnapshotBeforeUpdate(yr,C),p.__reactInternalSnapshotBeforeUpdate=o}catch(fr){Da(h,h.return,fr)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,h=o.nodeType,h===9)Ry(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Ry(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(a(163))}if(o=c.sibling,o!==null){o.return=c.return,is=o;break}is=c.return}}function qN(o,c,h){var p=h.flags;switch(h.tag){case 0:case 11:case 15:Mu(o,h),p&4&&Fm(5,h);break;case 1:if(Mu(o,h),p&4)if(o=h.stateNode,c===null)try{o.componentDidMount()}catch(K){Da(h,h.return,K)}else{var w=Vd(h.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(w,c,o.__reactInternalSnapshotBeforeUpdate)}catch(K){Da(h,h.return,K)}}p&64&&ON(h),p&512&&Bm(h,h.return);break;case 3:if(Mu(o,h),p&64&&(o=h.updateQueue,o!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{gn(o,c)}catch(K){Da(h,h.return,K)}}break;case 27:c===null&&p&4&&MN(h);case 26:case 5:Mu(o,h),c===null&&p&4&&RN(h),p&512&&Bm(h,h.return);break;case 12:Mu(o,h);break;case 13:Mu(o,h),p&4&&UN(o,h),p&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=$D.bind(null,h),iR(o,h))));break;case 22:if(p=h.memoizedState!==null||Tc,!p){c=c!==null&&c.memoizedState!==null||Pn,w=Tc;var C=Pn;Tc=p,(Pn=c)&&!C?Iu(o,h,(h.subtreeFlags&8772)!==0):Mu(o,h),Tc=w,Pn=C}break;case 30:break;default:Mu(o,h)}}function FN(o){var c=o.alternate;c!==null&&(o.alternate=null,FN(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&Na(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var tn=null,vi=!1;function Oc(o,c,h){for(h=h.child;h!==null;)BN(o,c,h),h=h.sibling}function BN(o,c,h){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(kt,h)}catch{}switch(h.tag){case 26:Pn||Vl(h,c),Oc(o,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Pn||Vl(h,c);var p=tn,w=vi;zu(h.type)&&(tn=h.stateNode,vi=!1),Oc(o,c,h),Ym(h.stateNode),tn=p,vi=w;break;case 5:Pn||Vl(h,c);case 6:if(p=tn,w=vi,tn=null,Oc(o,c,h),tn=p,vi=w,tn!==null)if(vi)try{(tn.nodeType===9?tn.body:tn.nodeName==="HTML"?tn.ownerDocument.body:tn).removeChild(h.stateNode)}catch(C){Da(h,c,C)}else try{tn.removeChild(h.stateNode)}catch(C){Da(h,c,C)}break;case 18:tn!==null&&(vi?(o=tn,k5(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),ap(o)):k5(tn,h.stateNode));break;case 4:p=tn,w=vi,tn=h.stateNode.containerInfo,vi=!0,Oc(o,c,h),tn=p,vi=w;break;case 0:case 11:case 14:case 15:Pn||Lu(2,h,c),Pn||Lu(4,h,c),Oc(o,c,h);break;case 1:Pn||(Vl(h,c),p=h.stateNode,typeof p.componentWillUnmount=="function"&&DN(h,c,p)),Oc(o,c,h);break;case 21:Oc(o,c,h);break;case 22:Pn=(p=Pn)||h.memoizedState!==null,Oc(o,c,h),Pn=p;break;default:Oc(o,c,h)}}function UN(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{ap(o)}catch(h){Da(c,c.return,h)}}function RD(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new IN),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new IN),c;default:throw Error(a(435,o.tag))}}function oy(o,c){var h=RD(o);c.forEach(function(p){var w=zD.bind(null,o,p);h.has(p)||(h.add(p),p.then(w,w))})}function Oi(o,c){var h=c.deletions;if(h!==null)for(var p=0;p<h.length;p++){var w=h[p],C=o,K=c,fe=K;e:for(;fe!==null;){switch(fe.tag){case 27:if(zu(fe.type)){tn=fe.stateNode,vi=!1;break e}break;case 5:tn=fe.stateNode,vi=!1;break e;case 3:case 4:tn=fe.stateNode.containerInfo,vi=!0;break e}fe=fe.return}if(tn===null)throw Error(a(160));BN(C,K,w),tn=null,vi=!1,C=w.alternate,C!==null&&(C.return=null),w.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)$N(c,o),c=c.sibling}var ol=null;function $N(o,c){var h=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Oi(c,o),Di(o),p&4&&(Lu(3,o,o.return),Fm(3,o),Lu(5,o,o.return));break;case 1:Oi(c,o),Di(o),p&512&&(Pn||h===null||Vl(h,h.return)),p&64&&Tc&&(o=o.updateQueue,o!==null&&(p=o.callbacks,p!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?p:h.concat(p))));break;case 26:var w=ol;if(Oi(c,o),Di(o),p&512&&(Pn||h===null||Vl(h,h.return)),p&4){var C=h!==null?h.memoizedState:null;if(p=o.memoizedState,h===null)if(p===null)if(o.stateNode===null){e:{p=o.type,h=o.memoizedProps,w=w.ownerDocument||w;t:switch(p){case"title":C=w.getElementsByTagName("title")[0],(!C||C[Sr]||C[Dt]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=w.createElement(p),w.head.insertBefore(C,w.querySelector("head > title"))),Ss(C,p,h),C[Dt]=o,ea(C),p=C;break e;case"link":var K=M5("link","href",w).get(p+(h.href||""));if(K){for(var fe=0;fe<K.length;fe++)if(C=K[fe],C.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&C.getAttribute("rel")===(h.rel==null?null:h.rel)&&C.getAttribute("title")===(h.title==null?null:h.title)&&C.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){K.splice(fe,1);break t}}C=w.createElement(p),Ss(C,p,h),w.head.appendChild(C);break;case"meta":if(K=M5("meta","content",w).get(p+(h.content||""))){for(fe=0;fe<K.length;fe++)if(C=K[fe],C.getAttribute("content")===(h.content==null?null:""+h.content)&&C.getAttribute("name")===(h.name==null?null:h.name)&&C.getAttribute("property")===(h.property==null?null:h.property)&&C.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&C.getAttribute("charset")===(h.charSet==null?null:h.charSet)){K.splice(fe,1);break t}}C=w.createElement(p),Ss(C,p,h),w.head.appendChild(C);break;default:throw Error(a(468,p))}C[Dt]=o,ea(C),p=C}o.stateNode=p}else I5(w,o.type,o.stateNode);else o.stateNode=L5(w,p,o.memoizedProps);else C!==p?(C===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):C.count--,p===null?I5(w,o.type,o.stateNode):L5(w,p,o.memoizedProps)):p===null&&o.stateNode!==null&&ay(o,o.memoizedProps,h.memoizedProps)}break;case 27:Oi(c,o),Di(o),p&512&&(Pn||h===null||Vl(h,h.return)),h!==null&&p&4&&ay(o,o.memoizedProps,h.memoizedProps);break;case 5:if(Oi(c,o),Di(o),p&512&&(Pn||h===null||Vl(h,h.return)),o.flags&32){w=o.stateNode;try{ki(w,"")}catch(st){Da(o,o.return,st)}}p&4&&o.stateNode!=null&&(w=o.memoizedProps,ay(o,w,h!==null?h.memoizedProps:w)),p&1024&&(iy=!0);break;case 6:if(Oi(c,o),Di(o),p&4){if(o.stateNode===null)throw Error(a(162));p=o.memoizedProps,h=o.stateNode;try{h.nodeValue=p}catch(st){Da(o,o.return,st)}}break;case 3:if(a0=null,w=ol,ol=t0(c.containerInfo),Oi(c,o),ol=w,Di(o),p&4&&h!==null&&h.memoizedState.isDehydrated)try{ap(c.containerInfo)}catch(st){Da(o,o.return,st)}iy&&(iy=!1,zN(o));break;case 4:p=ol,ol=t0(o.stateNode.containerInfo),Oi(c,o),Di(o),ol=p;break;case 12:Oi(c,o),Di(o);break;case 13:Oi(c,o),Di(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(hy=X()),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,oy(o,p)));break;case 22:w=o.memoizedState!==null;var Re=h!==null&&h.memoizedState!==null,Qe=Tc,gt=Pn;if(Tc=Qe||w,Pn=gt||Re,Oi(c,o),Pn=gt,Tc=Qe,Di(o),p&8192)e:for(c=o.stateNode,c._visibility=w?c._visibility&-2:c._visibility|1,w&&(h===null||Re||Tc||Pn||Hd(o)),h=null,c=o;;){if(c.tag===5||c.tag===26){if(h===null){Re=h=c;try{if(C=Re.stateNode,w)K=C.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none";else{fe=Re.stateNode;var wt=Re.memoizedProps.style,rt=wt!=null&&wt.hasOwnProperty("display")?wt.display:null;fe.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(st){Da(Re,Re.return,st)}}}else if(c.tag===6){if(h===null){Re=c;try{Re.stateNode.nodeValue=w?"":Re.memoizedProps}catch(st){Da(Re,Re.return,st)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}p&4&&(p=o.updateQueue,p!==null&&(h=p.retryQueue,h!==null&&(p.retryQueue=null,oy(o,h))));break;case 19:Oi(c,o),Di(o),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,oy(o,p)));break;case 30:break;case 21:break;default:Oi(c,o),Di(o)}}function Di(o){var c=o.flags;if(c&2){try{for(var h,p=o.return;p!==null;){if(LN(p)){h=p;break}p=p.return}if(h==null)throw Error(a(160));switch(h.tag){case 27:var w=h.stateNode,C=ny(o);$g(o,C,w);break;case 5:var K=h.stateNode;h.flags&32&&(ki(K,""),h.flags&=-33);var fe=ny(o);$g(o,fe,K);break;case 3:case 4:var Re=h.stateNode.containerInfo,Qe=ny(o);sy(o,Qe,Re);break;default:throw Error(a(161))}}catch(gt){Da(o,o.return,gt)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function zN(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;zN(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function Mu(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)qN(o,c.alternate,c),c=c.sibling}function Hd(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:Lu(4,c,c.return),Hd(c);break;case 1:Vl(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&DN(c,c.return,h),Hd(c);break;case 27:Ym(c.stateNode);case 26:case 5:Vl(c,c.return),Hd(c);break;case 22:c.memoizedState===null&&Hd(c);break;case 30:Hd(c);break;default:Hd(c)}o=o.sibling}}function Iu(o,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var p=c.alternate,w=o,C=c,K=C.flags;switch(C.tag){case 0:case 11:case 15:Iu(w,C,h),Fm(4,C);break;case 1:if(Iu(w,C,h),p=C,w=p.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(Qe){Da(p,p.return,Qe)}if(p=C,w=p.updateQueue,w!==null){var fe=p.stateNode;try{var Re=w.shared.hiddenCallbacks;if(Re!==null)for(w.shared.hiddenCallbacks=null,w=0;w<Re.length;w++)Ir(Re[w],fe)}catch(Qe){Da(p,p.return,Qe)}}h&&K&64&&ON(C),Bm(C,C.return);break;case 27:MN(C);case 26:case 5:Iu(w,C,h),h&&p===null&&K&4&&RN(C),Bm(C,C.return);break;case 12:Iu(w,C,h);break;case 13:Iu(w,C,h),h&&K&4&&UN(w,C);break;case 22:C.memoizedState===null&&Iu(w,C,h),Bm(C,C.return);break;case 30:break;default:Iu(w,C,h)}c=c.sibling}}function ly(o,c){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&Rd(h))}function cy(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Rd(o))}function Hl(o,c,h,p){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)VN(o,c,h,p),c=c.sibling}function VN(o,c,h,p){var w=c.flags;switch(c.tag){case 0:case 11:case 15:Hl(o,c,h,p),w&2048&&Fm(9,c);break;case 1:Hl(o,c,h,p);break;case 3:Hl(o,c,h,p),w&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Rd(o)));break;case 12:if(w&2048){Hl(o,c,h,p),o=c.stateNode;try{var C=c.memoizedProps,K=C.id,fe=C.onPostCommit;typeof fe=="function"&&fe(K,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Re){Da(c,c.return,Re)}}else Hl(o,c,h,p);break;case 13:Hl(o,c,h,p);break;case 23:break;case 22:C=c.stateNode,K=c.alternate,c.memoizedState!==null?C._visibility&2?Hl(o,c,h,p):Um(o,c):C._visibility&2?Hl(o,c,h,p):(C._visibility|=2,rh(o,c,h,p,(c.subtreeFlags&10256)!==0)),w&2048&&ly(K,c);break;case 24:Hl(o,c,h,p),w&2048&&cy(c.alternate,c);break;default:Hl(o,c,h,p)}}function rh(o,c,h,p,w){for(w=w&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var C=o,K=c,fe=h,Re=p,Qe=K.flags;switch(K.tag){case 0:case 11:case 15:rh(C,K,fe,Re,w),Fm(8,K);break;case 23:break;case 22:var gt=K.stateNode;K.memoizedState!==null?gt._visibility&2?rh(C,K,fe,Re,w):Um(C,K):(gt._visibility|=2,rh(C,K,fe,Re,w)),w&&Qe&2048&&ly(K.alternate,K);break;case 24:rh(C,K,fe,Re,w),w&&Qe&2048&&cy(K.alternate,K);break;default:rh(C,K,fe,Re,w)}c=c.sibling}}function Um(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=o,p=c,w=p.flags;switch(p.tag){case 22:Um(h,p),w&2048&&ly(p.alternate,p);break;case 24:Um(h,p),w&2048&&cy(p.alternate,p);break;default:Um(h,p)}c=c.sibling}}var $m=8192;function ah(o){if(o.subtreeFlags&$m)for(o=o.child;o!==null;)HN(o),o=o.sibling}function HN(o){switch(o.tag){case 26:ah(o),o.flags&$m&&o.memoizedState!==null&&yR(ol,o.memoizedState,o.memoizedProps);break;case 5:ah(o);break;case 3:case 4:var c=ol;ol=t0(o.stateNode.containerInfo),ah(o),ol=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=$m,$m=16777216,ah(o),$m=c):ah(o));break;default:ah(o)}}function GN(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function zm(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var p=c[h];is=p,WN(p,o)}GN(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)KN(o),o=o.sibling}function KN(o){switch(o.tag){case 0:case 11:case 15:zm(o),o.flags&2048&&Lu(9,o,o.return);break;case 3:zm(o);break;case 12:zm(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,zg(o)):zm(o);break;default:zm(o)}}function zg(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var p=c[h];is=p,WN(p,o)}GN(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:Lu(8,c,c.return),zg(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,zg(c));break;default:zg(c)}o=o.sibling}}function WN(o,c){for(;is!==null;){var h=is;switch(h.tag){case 0:case 11:case 15:Lu(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var p=h.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Rd(h.memoizedState.cache)}if(p=h.child,p!==null)p.return=h,is=p;else e:for(h=o;is!==null;){p=is;var w=p.sibling,C=p.return;if(FN(p),p===h){is=null;break e}if(w!==null){w.return=C,is=w;break e}is=C}}}var LD={getCacheForType:function(o){var c=Sn(An),h=c.data.get(o);return h===void 0&&(h=o(),c.data.set(o,h)),h}},MD=typeof WeakMap=="function"?WeakMap:Map,ya=0,Fa=null,Ur=null,Jr=0,ba=0,Ri=null,qu=!1,nh=!1,uy=!1,Dc=0,xn=0,Fu=0,Gd=0,dy=0,yo=0,sh=0,Vm=null,yi=null,fy=!1,hy=0,Vg=1/0,Hg=null,Bu=null,Ns=0,Uu=null,ih=null,oh=0,my=0,py=null,YN=null,Hm=0,gy=null;function Li(){if((ya&2)!==0&&Jr!==0)return Jr&-Jr;if(ae.T!==null){var o=Sc;return o!==0?o:_y()}return we()}function XN(){yo===0&&(yo=(Jr&536870912)===0||aa?Qt():536870912);var o=vo.current;return o!==null&&(o.flags|=32),yo}function Mi(o,c,h){(o===Fa&&(ba===2||ba===9)||o.cancelPendingCommit!==null)&&(lh(o,0),$u(o,Jr,yo,!1)),Be(o,h),((ya&2)===0||o!==Fa)&&(o===Fa&&((ya&2)===0&&(Gd|=h),xn===4&&$u(o,Jr,yo,!1)),Gl(o))}function ZN(o,c,h){if((ya&6)!==0)throw Error(a(327));var p=!h&&(c&124)===0&&(c&o.expiredLanes)===0||Rt(o,c),w=p?FD(o,c):yy(o,c,!0),C=p;do{if(w===0){nh&&!p&&$u(o,c,0,!1);break}else{if(h=o.current.alternate,C&&!ID(h)){w=yy(o,c,!1),C=!1;continue}if(w===2){if(C=c,o.errorRecoveryDisabledLanes&C)var K=0;else K=o.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){c=K;e:{var fe=o;w=Vm;var Re=fe.current.memoizedState.isDehydrated;if(Re&&(lh(fe,K).flags|=256),K=yy(fe,K,!1),K!==2){if(uy&&!Re){fe.errorRecoveryDisabledLanes|=C,Gd|=C,w=4;break e}C=yi,yi=w,C!==null&&(yi===null?yi=C:yi.push.apply(yi,C))}w=K}if(C=!1,w!==2)continue}}if(w===1){lh(o,0),$u(o,c,0,!0);break}e:{switch(p=o,C=w,C){case 0:case 1:throw Error(a(345));case 4:if((c&4194048)!==c)break;case 6:$u(p,c,yo,!qu);break e;case 2:yi=null;break;case 3:case 5:break;default:throw Error(a(329))}if((c&62914560)===c&&(w=hy+300-X(),10<w)){if($u(p,c,yo,!qu),ur(p,0,!0)!==0)break e;p.timeoutHandle=A5(JN.bind(null,p,h,yi,Hg,fy,c,yo,Gd,sh,qu,C,2,-0,0),w);break e}JN(p,h,yi,Hg,fy,c,yo,Gd,sh,qu,C,0,-0,0)}}break}while(!0);Gl(o)}function JN(o,c,h,p,w,C,K,fe,Re,Qe,gt,wt,rt,st){if(o.timeoutHandle=-1,wt=c.subtreeFlags,(wt&8192||(wt&16785408)===16785408)&&(Jm={stylesheets:null,count:0,unsuspend:vR},HN(c),wt=bR(),wt!==null)){o.cancelPendingCommit=wt(s5.bind(null,o,c,C,h,p,w,K,fe,Re,gt,1,rt,st)),$u(o,C,K,!Qe);return}s5(o,c,C,h,p,w,K,fe,Re)}function ID(o){for(var c=o;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var p=0;p<h.length;p++){var w=h[p],C=w.getSnapshot;w=w.value;try{if(!Ya(C(),w))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function $u(o,c,h,p){c&=~dy,c&=~Gd,o.suspendedLanes|=c,o.pingedLanes&=~c,p&&(o.warmLanes|=c),p=o.expirationTimes;for(var w=c;0<w;){var C=31-at(w),K=1<<C;p[C]=-1,w&=~K}h!==0&&vt(o,h,c)}function Gg(){return(ya&6)===0?(Gm(0),!1):!0}function xy(){if(Ur!==null){if(ba===0)var o=Ur.return;else o=Ur,tl=qn=null,Kn(o),eh=null,Mm=0,o=Ur;for(;o!==null;)TN(o.alternate,o),o=o.return;Ur=null}}function lh(o,c){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,tR(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),xy(),Fa=o,Ur=h=uo(o.current,null),Jr=c,ba=0,Ri=null,qu=!1,nh=Rt(o,c),uy=!1,sh=yo=dy=Gd=Fu=xn=0,yi=Vm=null,fy=!1,(c&8)!==0&&(c|=c&32);var p=o.entangledLanes;if(p!==0)for(o=o.entanglements,p&=c;0<p;){var w=31-at(p),C=1<<w;c|=o[w],p&=~C}return Dc=c,kd(),h}function QN(o,c){Jt=null,ae.H=Dg,c===ie||c===me?(c=ze(),ba=3):c===ue?(c=ze(),ba=4):ba=c===xN?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Ri=c,Ur===null&&(xn=1,qg(o,Qs(c,o.current)))}function e5(){var o=ae.H;return ae.H=Dg,o===null?Dg:o}function t5(){var o=ae.A;return ae.A=LD,o}function vy(){xn=4,qu||(Jr&4194048)!==Jr&&vo.current!==null||(nh=!0),(Fu&134217727)===0&&(Gd&134217727)===0||Fa===null||$u(Fa,Jr,yo,!1)}function yy(o,c,h){var p=ya;ya|=2;var w=e5(),C=t5();(Fa!==o||Jr!==c)&&(Hg=null,lh(o,c)),c=!1;var K=xn;e:do try{if(ba!==0&&Ur!==null){var fe=Ur,Re=Ri;switch(ba){case 8:xy(),K=6;break e;case 3:case 2:case 9:case 6:vo.current===null&&(c=!0);var Qe=ba;if(ba=0,Ri=null,ch(o,fe,Re,Qe),h&&nh){K=0;break e}break;default:Qe=ba,ba=0,Ri=null,ch(o,fe,Re,Qe)}}qD(),K=xn;break}catch(gt){QN(o,gt)}while(!0);return c&&o.shellSuspendCounter++,tl=qn=null,ya=p,ae.H=w,ae.A=C,Ur===null&&(Fa=null,Jr=0,kd()),K}function qD(){for(;Ur!==null;)r5(Ur)}function FD(o,c){var h=ya;ya|=2;var p=e5(),w=t5();Fa!==o||Jr!==c?(Hg=null,Vg=X()+500,lh(o,c)):nh=Rt(o,c);e:do try{if(ba!==0&&Ur!==null){c=Ur;var C=Ri;t:switch(ba){case 1:ba=0,Ri=null,ch(o,c,C,1);break;case 2:case 9:if(Ae(C)){ba=0,Ri=null,a5(c);break}c=function(){ba!==2&&ba!==9||Fa!==o||(ba=7),Gl(o)},C.then(c,c);break e;case 3:ba=7;break e;case 4:ba=5;break e;case 7:Ae(C)?(ba=0,Ri=null,a5(c)):(ba=0,Ri=null,ch(o,c,C,7));break;case 5:var K=null;switch(Ur.tag){case 26:K=Ur.memoizedState;case 5:case 27:var fe=Ur;if(!K||q5(K)){ba=0,Ri=null;var Re=fe.sibling;if(Re!==null)Ur=Re;else{var Qe=fe.return;Qe!==null?(Ur=Qe,Kg(Qe)):Ur=null}break t}}ba=0,Ri=null,ch(o,c,C,5);break;case 6:ba=0,Ri=null,ch(o,c,C,6);break;case 8:xy(),xn=6;break e;default:throw Error(a(462))}}BD();break}catch(gt){QN(o,gt)}while(!0);return tl=qn=null,ae.H=p,ae.A=w,ya=h,Ur!==null?0:(Fa=null,Jr=0,kd(),xn)}function BD(){for(;Ur!==null&&!B();)r5(Ur)}function r5(o){var c=EN(o.alternate,o,Dc);o.memoizedProps=o.pendingProps,c===null?Kg(o):Ur=c}function a5(o){var c=o,h=c.alternate;switch(c.tag){case 15:case 0:c=_N(h,c,c.pendingProps,c.type,void 0,Jr);break;case 11:c=_N(h,c,c.pendingProps,c.type.render,c.ref,Jr);break;case 5:Kn(c);default:TN(h,c),c=Ur=Pd(c,Dc),c=EN(h,c,Dc)}o.memoizedProps=o.pendingProps,c===null?Kg(o):Ur=c}function ch(o,c,h,p){tl=qn=null,Kn(c),eh=null,Mm=0;var w=c.return;try{if(ED(o,w,c,h,Jr)){xn=1,qg(o,Qs(h,o.current)),Ur=null;return}}catch(C){if(w!==null)throw Ur=w,C;xn=1,qg(o,Qs(h,o.current)),Ur=null;return}c.flags&32768?(aa||p===1?o=!0:nh||(Jr&536870912)!==0?o=!1:(qu=o=!0,(p===2||p===9||p===3||p===6)&&(p=vo.current,p!==null&&p.tag===13&&(p.flags|=16384))),n5(c,o)):Kg(c)}function Kg(o){var c=o;do{if((c.flags&32768)!==0){n5(c,qu);return}o=c.return;var h=TD(c.alternate,c,Dc);if(h!==null){Ur=h;return}if(c=c.sibling,c!==null){Ur=c;return}Ur=c=o}while(c!==null);xn===0&&(xn=5)}function n5(o,c){do{var h=OD(o.alternate,o);if(h!==null){h.flags&=32767,Ur=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(o=o.sibling,o!==null)){Ur=o;return}Ur=o=h}while(o!==null);xn=6,Ur=null}function s5(o,c,h,p,w,C,K,fe,Re){o.cancelPendingCommit=null;do Wg();while(Ns!==0);if((ya&6)!==0)throw Error(a(327));if(c!==null){if(c===o.current)throw Error(a(177));if(C=c.lanes|c.childLanes,C|=Uf,We(o,h,C,K,fe,Re),o===Fa&&(Ur=Fa=null,Jr=0),ih=c,Uu=o,oh=h,my=C,py=w,YN=p,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,VD(Ze,function(){return u5(),null})):(o.callbackNode=null,o.callbackPriority=0),p=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||p){p=ae.T,ae.T=null,w=he.p,he.p=2,K=ya,ya|=4;try{DD(o,c,h)}finally{ya=K,he.p=w,ae.T=p}}Ns=1,i5(),o5(),l5()}}function i5(){if(Ns===1){Ns=0;var o=Uu,c=ih,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=ae.T,ae.T=null;var p=he.p;he.p=2;var w=ya;ya|=4;try{$N(c,o);var C=Ty,K=ju(o.containerInfo),fe=C.focusedElem,Re=C.selectionRange;if(K!==fe&&fe&&fe.ownerDocument&&wu(fe.ownerDocument.documentElement,fe)){if(Re!==null&&lo(fe)){var Qe=Re.start,gt=Re.end;if(gt===void 0&&(gt=Qe),"selectionStart"in fe)fe.selectionStart=Qe,fe.selectionEnd=Math.min(gt,fe.value.length);else{var wt=fe.ownerDocument||document,rt=wt&&wt.defaultView||window;if(rt.getSelection){var st=rt.getSelection(),yr=fe.textContent.length,fr=Math.min(Re.start,yr),ka=Re.end===void 0?fr:Math.min(Re.end,yr);!st.extend&&fr>ka&&(K=ka,ka=fr,fr=K);var He=bu(fe,fr),Ue=bu(fe,ka);if(He&&Ue&&(st.rangeCount!==1||st.anchorNode!==He.node||st.anchorOffset!==He.offset||st.focusNode!==Ue.node||st.focusOffset!==Ue.offset)){var Ye=wt.createRange();Ye.setStart(He.node,He.offset),st.removeAllRanges(),fr>ka?(st.addRange(Ye),st.extend(Ue.node,Ue.offset)):(Ye.setEnd(Ue.node,Ue.offset),st.addRange(Ye))}}}}for(wt=[],st=fe;st=st.parentNode;)st.nodeType===1&&wt.push({element:st,left:st.scrollLeft,top:st.scrollTop});for(typeof fe.focus=="function"&&fe.focus(),fe=0;fe<wt.length;fe++){var xt=wt[fe];xt.element.scrollLeft=xt.left,xt.element.scrollTop=xt.top}}i0=!!Py,Ty=Py=null}finally{ya=w,he.p=p,ae.T=h}}o.current=c,Ns=2}}function o5(){if(Ns===2){Ns=0;var o=Uu,c=ih,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=ae.T,ae.T=null;var p=he.p;he.p=2;var w=ya;ya|=4;try{qN(o,c.alternate,c)}finally{ya=w,he.p=p,ae.T=h}}Ns=3}}function l5(){if(Ns===4||Ns===3){Ns=0,ee();var o=Uu,c=ih,h=oh,p=YN;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Ns=5:(Ns=0,ih=Uu=null,c5(o,o.pendingLanes));var w=o.pendingLanes;if(w===0&&(Bu=null),nt(h),c=c.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(kt,c,void 0,(c.current.flags&128)===128)}catch{}if(p!==null){c=ae.T,w=he.p,he.p=2,ae.T=null;try{for(var C=o.onRecoverableError,K=0;K<p.length;K++){var fe=p[K];C(fe.value,{componentStack:fe.stack})}}finally{ae.T=c,he.p=w}}(oh&3)!==0&&Wg(),Gl(o),w=o.pendingLanes,(h&4194090)!==0&&(w&42)!==0?o===gy?Hm++:(Hm=0,gy=o):Hm=0,Gm(0)}}function c5(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Rd(c)))}function Wg(o){return i5(),o5(),l5(),u5()}function u5(){if(Ns!==5)return!1;var o=Uu,c=my;my=0;var h=nt(oh),p=ae.T,w=he.p;try{he.p=32>h?32:h,ae.T=null,h=py,py=null;var C=Uu,K=oh;if(Ns=0,ih=Uu=null,oh=0,(ya&6)!==0)throw Error(a(331));var fe=ya;if(ya|=4,KN(C.current),VN(C,C.current,K,h),ya=fe,Gm(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(kt,C)}catch{}return!0}finally{he.p=w,ae.T=p,c5(o,c)}}function d5(o,c,h){c=Qs(h,c),c=Wv(o.stateNode,c,2),o=St(o,c,2),o!==null&&(Be(o,2),Gl(o))}function Da(o,c,h){if(o.tag===3)d5(o,o,h);else for(;c!==null;){if(c.tag===3){d5(c,o,h);break}else if(c.tag===1){var p=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Bu===null||!Bu.has(p))){o=Qs(h,o),h=pN(2),p=St(c,h,2),p!==null&&(gN(h,p,c,o),Be(p,2),Gl(p));break}}c=c.return}}function by(o,c,h){var p=o.pingCache;if(p===null){p=o.pingCache=new MD;var w=new Set;p.set(c,w)}else w=p.get(c),w===void 0&&(w=new Set,p.set(c,w));w.has(h)||(uy=!0,w.add(h),o=UD.bind(null,o,c,h),c.then(o,o))}function UD(o,c,h){var p=o.pingCache;p!==null&&p.delete(c),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,Fa===o&&(Jr&h)===h&&(xn===4||xn===3&&(Jr&62914560)===Jr&&300>X()-hy?(ya&2)===0&&lh(o,0):dy|=h,sh===Jr&&(sh=0)),Gl(o)}function f5(o,c){c===0&&(c=hr()),o=yc(o,c),o!==null&&(Be(o,c),Gl(o))}function $D(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),f5(o,h)}function zD(o,c){var h=0;switch(o.tag){case 13:var p=o.stateNode,w=o.memoizedState;w!==null&&(h=w.retryLane);break;case 19:p=o.stateNode;break;case 22:p=o.stateNode._retryCache;break;default:throw Error(a(314))}p!==null&&p.delete(c),f5(o,h)}function VD(o,c){return H(o,c)}var Yg=null,uh=null,wy=!1,Xg=!1,jy=!1,Kd=0;function Gl(o){o!==uh&&o.next===null&&(uh===null?Yg=uh=o:uh=uh.next=o),Xg=!0,wy||(wy=!0,GD())}function Gm(o,c){if(!jy&&Xg){jy=!0;do for(var h=!1,p=Yg;p!==null;){if(o!==0){var w=p.pendingLanes;if(w===0)var C=0;else{var K=p.suspendedLanes,fe=p.pingedLanes;C=(1<<31-at(42|o)+1)-1,C&=w&~(K&~fe),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(h=!0,g5(p,C))}else C=Jr,C=ur(p,p===Fa?C:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(C&3)===0||Rt(p,C)||(h=!0,g5(p,C));p=p.next}while(h);jy=!1}}function HD(){h5()}function h5(){Xg=wy=!1;var o=0;Kd!==0&&(eR()&&(o=Kd),Kd=0);for(var c=X(),h=null,p=Yg;p!==null;){var w=p.next,C=m5(p,c);C===0?(p.next=null,h===null?Yg=w:h.next=w,w===null&&(uh=h)):(h=p,(o!==0||(C&3)!==0)&&(Xg=!0)),p=w}Gm(o)}function m5(o,c){for(var h=o.suspendedLanes,p=o.pingedLanes,w=o.expirationTimes,C=o.pendingLanes&-62914561;0<C;){var K=31-at(C),fe=1<<K,Re=w[K];Re===-1?((fe&h)===0||(fe&p)!==0)&&(w[K]=Vt(fe,c)):Re<=c&&(o.expiredLanes|=fe),C&=~fe}if(c=Fa,h=Jr,h=ur(o,o===c?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p=o.callbackNode,h===0||o===c&&(ba===2||ba===9)||o.cancelPendingCommit!==null)return p!==null&&p!==null&&W(p),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||Rt(o,h)){if(c=h&-h,c===o.callbackPriority)return c;switch(p!==null&&W(p),nt(h)){case 2:case 8:h=$e;break;case 32:h=Ze;break;case 268435456:h=V;break;default:h=Ze}return p=p5.bind(null,o),h=H(h,p),o.callbackPriority=c,o.callbackNode=h,c}return p!==null&&p!==null&&W(p),o.callbackPriority=2,o.callbackNode=null,2}function p5(o,c){if(Ns!==0&&Ns!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(Wg()&&o.callbackNode!==h)return null;var p=Jr;return p=ur(o,o===Fa?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p===0?null:(ZN(o,p,c),m5(o,X()),o.callbackNode!=null&&o.callbackNode===h?p5.bind(null,o):null)}function g5(o,c){if(Wg())return null;ZN(o,c,!0)}function GD(){rR(function(){(ya&6)!==0?H(be,HD):h5()})}function _y(){return Kd===0&&(Kd=Qt()),Kd}function x5(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Mn(""+o)}function v5(o,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,o.id&&h.setAttribute("form",o.id),c.parentNode.insertBefore(h,c),o=new FormData(o),h.parentNode.removeChild(h),o}function KD(o,c,h,p,w){if(c==="submit"&&h&&h.stateNode===w){var C=x5((w[Wt]||null).action),K=p.submitter;K&&(c=(c=K[Wt]||null)?x5(c.formAction):K.getAttribute("formAction"),c!==null&&(C=c,K=null));var fe=new Or("action","action",null,p,w);o.push({event:fe,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Kd!==0){var Re=K?v5(w,K):new FormData(w);xo(h,{pending:!0,data:Re,method:w.method,action:C},null,Re)}}else typeof C=="function"&&(fe.preventDefault(),Re=K?v5(w,K):new FormData(w),xo(h,{pending:!0,data:Re,method:w.method,action:C},C,Re))},currentTarget:w}]})}}for(var Ny=0;Ny<Bf.length;Ny++){var Sy=Bf[Ny],WD=Sy.toLowerCase(),YD=Sy[0].toUpperCase()+Sy.slice(1);pi(WD,"on"+YD)}pi(co,"onAnimationEnd"),pi(_u,"onAnimationIteration"),pi(xc,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(Ff,"onTransitionRun"),pi(mg,"onTransitionStart"),pi(pg,"onTransitionCancel"),pi(ym,"onTransitionEnd"),ra("onMouseEnter",["mouseout","mouseover"]),ra("onMouseLeave",["mouseout","mouseover"]),ra("onPointerEnter",["pointerout","pointerover"]),ra("onPointerLeave",["pointerout","pointerover"]),gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gr("onBeforeInput",["compositionend","keypress","textInput","paste"]),gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Km="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Km));function y5(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var p=o[h],w=p.event;p=p.listeners;e:{var C=void 0;if(c)for(var K=p.length-1;0<=K;K--){var fe=p[K],Re=fe.instance,Qe=fe.currentTarget;if(fe=fe.listener,Re!==C&&w.isPropagationStopped())break e;C=fe,w.currentTarget=Qe;try{C(w)}catch(gt){Ig(gt)}w.currentTarget=null,C=Re}else for(K=0;K<p.length;K++){if(fe=p[K],Re=fe.instance,Qe=fe.currentTarget,fe=fe.listener,Re!==C&&w.isPropagationStopped())break e;C=fe,w.currentTarget=Qe;try{C(w)}catch(gt){Ig(gt)}w.currentTarget=null,C=Re}}}}function $r(o,c){var h=c[Ot];h===void 0&&(h=c[Ot]=new Set);var p=o+"__bubble";h.has(p)||(b5(c,o,2,!1),h.add(p))}function Ay(o,c,h){var p=0;c&&(p|=4),b5(h,o,p,c)}var Zg="_reactListening"+Math.random().toString(36).slice(2);function Cy(o){if(!o[Zg]){o[Zg]=!0,hn.forEach(function(h){h!=="selectionchange"&&(XD.has(h)||Ay(h,!1,o),Ay(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Zg]||(c[Zg]=!0,Ay("selectionchange",!1,c))}}function b5(o,c,h,p){switch(V5(c)){case 2:var w=_R;break;case 8:w=NR;break;default:w=Uy}h=w.bind(null,c,h,o),w=void 0,!et||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),p?w!==void 0?o.addEventListener(c,h,{capture:!0,passive:w}):o.addEventListener(c,h,!0):w!==void 0?o.addEventListener(c,h,{passive:w}):o.addEventListener(c,h,!1)}function ky(o,c,h,p,w){var C=p;if((c&1)===0&&(c&2)===0&&p!==null)e:for(;;){if(p===null)return;var K=p.tag;if(K===3||K===4){var fe=p.stateNode.containerInfo;if(fe===w)break;if(K===4)for(K=p.return;K!==null;){var Re=K.tag;if((Re===3||Re===4)&&K.stateNode.containerInfo===w)return;K=K.return}for(;fe!==null;){if(K=Tr(fe),K===null)return;if(Re=K.tag,Re===5||Re===6||Re===26||Re===27){p=C=K;continue e}fe=fe.parentNode}}p=p.return}it(function(){var Qe=C,gt=kl(h),wt=[];e:{var rt=bm.get(o);if(rt!==void 0){var st=Or,yr=o;switch(o){case"keypress":if(Wr(h)===0)break e;case"keydown":case"keyup":st=xr;break;case"focusin":yr="focus",st=gu;break;case"focusout":yr="blur",st=gu;break;case"beforeblur":case"afterblur":st=gu;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=Ms;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=zo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=mn;break;case co:case _u:case xc:st=mc;break;case ym:st=_n;break;case"scroll":case"scrollend":st=xa;break;case"wheel":st=Hn;break;case"copy":case"cut":case"paste":st=k;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=Xr;break;case"toggle":case"beforetoggle":st=Is}var fr=(c&4)!==0,ka=!fr&&(o==="scroll"||o==="scrollend"),He=fr?rt!==null?rt+"Capture":null:rt;fr=[];for(var Ue=Qe,Ye;Ue!==null;){var xt=Ue;if(Ye=xt.stateNode,xt=xt.tag,xt!==5&&xt!==26&&xt!==27||Ye===null||He===null||(xt=ht(Ue,He),xt!=null&&fr.push(Wm(Ue,xt,Ye))),ka)break;Ue=Ue.return}0<fr.length&&(rt=new st(rt,yr,null,h,gt),wt.push({event:rt,listeners:fr}))}}if((c&7)===0){e:{if(rt=o==="mouseover"||o==="pointerover",st=o==="mouseout"||o==="pointerout",rt&&h!==ui&&(yr=h.relatedTarget||h.fromElement)&&(Tr(yr)||yr[cr]))break e;if((st||rt)&&(rt=gt.window===gt?gt:(rt=gt.ownerDocument)?rt.defaultView||rt.parentWindow:window,st?(yr=h.relatedTarget||h.toElement,st=Qe,yr=yr?Tr(yr):null,yr!==null&&(ka=i(yr),fr=yr.tag,yr!==ka||fr!==5&&fr!==27&&fr!==6)&&(yr=null)):(st=null,yr=Qe),st!==yr)){if(fr=Ms,xt="onMouseLeave",He="onMouseEnter",Ue="mouse",(o==="pointerout"||o==="pointerover")&&(fr=Xr,xt="onPointerLeave",He="onPointerEnter",Ue="pointer"),ka=st==null?rt:$a(st),Ye=yr==null?rt:$a(yr),rt=new fr(xt,Ue+"leave",st,h,gt),rt.target=ka,rt.relatedTarget=Ye,xt=null,Tr(gt)===Qe&&(fr=new fr(He,Ue+"enter",yr,h,gt),fr.target=Ye,fr.relatedTarget=ka,xt=fr),ka=xt,st&&yr)t:{for(fr=st,He=yr,Ue=0,Ye=fr;Ye;Ye=dh(Ye))Ue++;for(Ye=0,xt=He;xt;xt=dh(xt))Ye++;for(;0<Ue-Ye;)fr=dh(fr),Ue--;for(;0<Ye-Ue;)He=dh(He),Ye--;for(;Ue--;){if(fr===He||He!==null&&fr===He.alternate)break t;fr=dh(fr),He=dh(He)}fr=null}else fr=null;st!==null&&w5(wt,rt,st,fr,!1),yr!==null&&ka!==null&&w5(wt,ka,yr,fr,!0)}}e:{if(rt=Qe?$a(Qe):window,st=rt.nodeName&&rt.nodeName.toLowerCase(),st==="select"||st==="input"&&rt.type==="file")var er=xu;else if(io(rt))if(Ho)er=ln;else{er=Cd;var qr=Il}else st=rt.nodeName,!st||st.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?Qe&&hc(Qe.elementType)&&(er=xu):er=vu;if(er&&(er=er(o,Qe))){pc(wt,er,h,gt);break e}qr&&qr(o,rt,Qe),o==="focusout"&&Qe&&rt.type==="number"&&Qe.memoizedProps.value!=null&&dc(rt,"number",rt.value)}switch(qr=Qe?$a(Qe):window,o){case"focusin":(io(qr)||qr.contentEditable==="true")&&(Zs=qr,Wo=Qe,mi=null);break;case"focusout":mi=Wo=Zs=null;break;case"mousedown":Yo=!0;break;case"contextmenu":case"mouseup":case"dragend":Yo=!1,Js(wt,h,gt);break;case"selectionchange":if(ql)break;case"keydown":case"keyup":Js(wt,h,gt)}var lr;if(El)e:{switch(o){case"compositionstart":var mr="onCompositionStart";break e;case"compositionend":mr="onCompositionEnd";break e;case"compositionupdate":mr="onCompositionUpdate";break e}mr=void 0}else hi?Gn(o,h)&&(mr="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(mr="onCompositionStart");mr&&(Tl&&h.locale!=="ko"&&(hi||mr!=="onCompositionStart"?mr==="onCompositionEnd"&&hi&&(lr=wr()):(Ft=gt,yt="value"in Ft?Ft.value:Ft.textContent,hi=!0)),qr=Jg(Qe,mr),0<qr.length&&(mr=new Ce(mr,o,null,h,gt),wt.push({event:mr,listeners:qr}),lr?mr.data=lr:(lr=Rl(h),lr!==null&&(mr.data=lr)))),(lr=Pl?Sd(o,h):Ad(o,h))&&(mr=Jg(Qe,"onBeforeInput"),0<mr.length&&(qr=new Ce("onBeforeInput","beforeinput",null,h,gt),wt.push({event:qr,listeners:mr}),qr.data=lr)),KD(wt,o,Qe,h,gt)}y5(wt,c)})}function Wm(o,c,h){return{instance:o,listener:c,currentTarget:h}}function Jg(o,c){for(var h=c+"Capture",p=[];o!==null;){var w=o,C=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||C===null||(w=ht(o,h),w!=null&&p.unshift(Wm(o,w,C)),w=ht(o,c),w!=null&&p.push(Wm(o,w,C))),o.tag===3)return p;o=o.return}return[]}function dh(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function w5(o,c,h,p,w){for(var C=c._reactName,K=[];h!==null&&h!==p;){var fe=h,Re=fe.alternate,Qe=fe.stateNode;if(fe=fe.tag,Re!==null&&Re===p)break;fe!==5&&fe!==26&&fe!==27||Qe===null||(Re=Qe,w?(Qe=ht(h,C),Qe!=null&&K.unshift(Wm(h,Qe,Re))):w||(Qe=ht(h,C),Qe!=null&&K.push(Wm(h,Qe,Re)))),h=h.return}K.length!==0&&o.push({event:c,listeners:K})}var ZD=/\r\n?/g,JD=/\u0000|\uFFFD/g;function j5(o){return(typeof o=="string"?o:""+o).replace(ZD,`
`).replace(JD,"")}function _5(o,c){return c=j5(c),j5(o)===c}function Qg(){}function Ca(o,c,h,p,w,C){switch(h){case"children":typeof p=="string"?c==="body"||c==="textarea"&&p===""||ki(o,p):(typeof p=="number"||typeof p=="bigint")&&c!=="body"&&ki(o,""+p);break;case"className":zn(o,"class",p);break;case"tabIndex":zn(o,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":zn(o,h,p);break;case"style":Cl(o,p,C);break;case"data":if(c!=="object"){zn(o,"data",p);break}case"src":case"href":if(p===""&&(c!=="a"||h!=="href")){o.removeAttribute(h);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(h);break}p=Mn(""+p),o.setAttribute(h,p);break;case"action":case"formAction":if(typeof p=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(h==="formAction"?(c!=="input"&&Ca(o,c,"name",w.name,w,null),Ca(o,c,"formEncType",w.formEncType,w,null),Ca(o,c,"formMethod",w.formMethod,w,null),Ca(o,c,"formTarget",w.formTarget,w,null)):(Ca(o,c,"encType",w.encType,w,null),Ca(o,c,"method",w.method,w,null),Ca(o,c,"target",w.target,w,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(h);break}p=Mn(""+p),o.setAttribute(h,p);break;case"onClick":p!=null&&(o.onclick=Qg);break;case"onScroll":p!=null&&$r("scroll",o);break;case"onScrollEnd":p!=null&&$r("scrollend",o);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(a(61));if(h=p.__html,h!=null){if(w.children!=null)throw Error(a(60));o.innerHTML=h}}break;case"multiple":o.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":o.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){o.removeAttribute("xlink:href");break}h=Mn(""+p),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,""+p):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":p===!0?o.setAttribute(h,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,p):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?o.setAttribute(h,p):o.removeAttribute(h);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?o.removeAttribute(h):o.setAttribute(h,p);break;case"popover":$r("beforetoggle",o),$r("toggle",o),Ts(o,"popover",p);break;case"xlinkActuate":Vn(o,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Vn(o,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Vn(o,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Vn(o,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Vn(o,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Vn(o,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Vn(o,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Vn(o,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Vn(o,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Ts(o,"is",p);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=pu.get(h)||h,Ts(o,h,p))}}function Ey(o,c,h,p,w,C){switch(h){case"style":Cl(o,p,C);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(a(61));if(h=p.__html,h!=null){if(w.children!=null)throw Error(a(60));o.innerHTML=h}}break;case"children":typeof p=="string"?ki(o,p):(typeof p=="number"||typeof p=="bigint")&&ki(o,""+p);break;case"onScroll":p!=null&&$r("scroll",o);break;case"onScrollEnd":p!=null&&$r("scrollend",o);break;case"onClick":p!=null&&(o.onclick=Qg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ta.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(w=h.endsWith("Capture"),c=h.slice(2,w?h.length-7:void 0),C=o[Wt]||null,C=C!=null?C[h]:null,typeof C=="function"&&o.removeEventListener(c,C,w),typeof p=="function")){typeof C!="function"&&C!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(c,p,w);break e}h in o?o[h]=p:p===!0?o.setAttribute(h,""):Ts(o,h,p)}}}function Ss(o,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$r("error",o),$r("load",o);var p=!1,w=!1,C;for(C in h)if(h.hasOwnProperty(C)){var K=h[C];if(K!=null)switch(C){case"src":p=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,c));default:Ca(o,c,C,K,h,null)}}w&&Ca(o,c,"srcSet",h.srcSet,h,null),p&&Ca(o,c,"src",h.src,h,null);return;case"input":$r("invalid",o);var fe=C=K=w=null,Re=null,Qe=null;for(p in h)if(h.hasOwnProperty(p)){var gt=h[p];if(gt!=null)switch(p){case"name":w=gt;break;case"type":K=gt;break;case"checked":Re=gt;break;case"defaultChecked":Qe=gt;break;case"value":C=gt;break;case"defaultValue":fe=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(a(137,c));break;default:Ca(o,c,p,gt,h,null)}}mu(o,C,fe,Re,Qe,K,w,!1),Ds(o);return;case"select":$r("invalid",o),p=K=C=null;for(w in h)if(h.hasOwnProperty(w)&&(fe=h[w],fe!=null))switch(w){case"value":C=fe;break;case"defaultValue":K=fe;break;case"multiple":p=fe;default:Ca(o,c,w,fe,h,null)}c=C,h=K,o.multiple=!!p,c!=null?no(o,!!p,c,!1):h!=null&&no(o,!!p,h,!0);return;case"textarea":$r("invalid",o),C=w=p=null;for(K in h)if(h.hasOwnProperty(K)&&(fe=h[K],fe!=null))switch(K){case"value":p=fe;break;case"defaultValue":w=fe;break;case"children":C=fe;break;case"dangerouslySetInnerHTML":if(fe!=null)throw Error(a(91));break;default:Ca(o,c,K,fe,h,null)}fc(o,p,w,C),Ds(o);return;case"option":for(Re in h)if(h.hasOwnProperty(Re)&&(p=h[Re],p!=null))switch(Re){case"selected":o.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Ca(o,c,Re,p,h,null)}return;case"dialog":$r("beforetoggle",o),$r("toggle",o),$r("cancel",o),$r("close",o);break;case"iframe":case"object":$r("load",o);break;case"video":case"audio":for(p=0;p<Km.length;p++)$r(Km[p],o);break;case"image":$r("error",o),$r("load",o);break;case"details":$r("toggle",o);break;case"embed":case"source":case"link":$r("error",o),$r("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Qe in h)if(h.hasOwnProperty(Qe)&&(p=h[Qe],p!=null))switch(Qe){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,c));default:Ca(o,c,Qe,p,h,null)}return;default:if(hc(c)){for(gt in h)h.hasOwnProperty(gt)&&(p=h[gt],p!==void 0&&Ey(o,c,gt,p,h,void 0));return}}for(fe in h)h.hasOwnProperty(fe)&&(p=h[fe],p!=null&&Ca(o,c,fe,p,h,null))}function QD(o,c,h,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,C=null,K=null,fe=null,Re=null,Qe=null,gt=null;for(st in h){var wt=h[st];if(h.hasOwnProperty(st)&&wt!=null)switch(st){case"checked":break;case"value":break;case"defaultValue":Re=wt;default:p.hasOwnProperty(st)||Ca(o,c,st,null,p,wt)}}for(var rt in p){var st=p[rt];if(wt=h[rt],p.hasOwnProperty(rt)&&(st!=null||wt!=null))switch(rt){case"type":C=st;break;case"name":w=st;break;case"checked":Qe=st;break;case"defaultChecked":gt=st;break;case"value":K=st;break;case"defaultValue":fe=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(a(137,c));break;default:st!==wt&&Ca(o,c,rt,st,p,wt)}}Uo(o,K,fe,Re,Qe,gt,C,w);return;case"select":st=K=fe=rt=null;for(C in h)if(Re=h[C],h.hasOwnProperty(C)&&Re!=null)switch(C){case"value":break;case"multiple":st=Re;default:p.hasOwnProperty(C)||Ca(o,c,C,null,p,Re)}for(w in p)if(C=p[w],Re=h[w],p.hasOwnProperty(w)&&(C!=null||Re!=null))switch(w){case"value":rt=C;break;case"defaultValue":fe=C;break;case"multiple":K=C;default:C!==Re&&Ca(o,c,w,C,p,Re)}c=fe,h=K,p=st,rt!=null?no(o,!!h,rt,!1):!!p!=!!h&&(c!=null?no(o,!!h,c,!0):no(o,!!h,h?[]:"",!1));return;case"textarea":st=rt=null;for(fe in h)if(w=h[fe],h.hasOwnProperty(fe)&&w!=null&&!p.hasOwnProperty(fe))switch(fe){case"value":break;case"children":break;default:Ca(o,c,fe,null,p,w)}for(K in p)if(w=p[K],C=h[K],p.hasOwnProperty(K)&&(w!=null||C!=null))switch(K){case"value":rt=w;break;case"defaultValue":st=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(a(91));break;default:w!==C&&Ca(o,c,K,w,p,C)}Xs(o,rt,st);return;case"option":for(var yr in h)if(rt=h[yr],h.hasOwnProperty(yr)&&rt!=null&&!p.hasOwnProperty(yr))switch(yr){case"selected":o.selected=!1;break;default:Ca(o,c,yr,null,p,rt)}for(Re in p)if(rt=p[Re],st=h[Re],p.hasOwnProperty(Re)&&rt!==st&&(rt!=null||st!=null))switch(Re){case"selected":o.selected=rt&&typeof rt!="function"&&typeof rt!="symbol";break;default:Ca(o,c,Re,rt,p,st)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fr in h)rt=h[fr],h.hasOwnProperty(fr)&&rt!=null&&!p.hasOwnProperty(fr)&&Ca(o,c,fr,null,p,rt);for(Qe in p)if(rt=p[Qe],st=h[Qe],p.hasOwnProperty(Qe)&&rt!==st&&(rt!=null||st!=null))switch(Qe){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(a(137,c));break;default:Ca(o,c,Qe,rt,p,st)}return;default:if(hc(c)){for(var ka in h)rt=h[ka],h.hasOwnProperty(ka)&&rt!==void 0&&!p.hasOwnProperty(ka)&&Ey(o,c,ka,void 0,p,rt);for(gt in p)rt=p[gt],st=h[gt],!p.hasOwnProperty(gt)||rt===st||rt===void 0&&st===void 0||Ey(o,c,gt,rt,p,st);return}}for(var He in h)rt=h[He],h.hasOwnProperty(He)&&rt!=null&&!p.hasOwnProperty(He)&&Ca(o,c,He,null,p,rt);for(wt in p)rt=p[wt],st=h[wt],!p.hasOwnProperty(wt)||rt===st||rt==null&&st==null||Ca(o,c,wt,rt,p,st)}var Py=null,Ty=null;function e0(o){return o.nodeType===9?o:o.ownerDocument}function N5(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function S5(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function Oy(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Dy=null;function eR(){var o=window.event;return o&&o.type==="popstate"?o===Dy?!1:(Dy=o,!0):(Dy=null,!1)}var A5=typeof setTimeout=="function"?setTimeout:void 0,tR=typeof clearTimeout=="function"?clearTimeout:void 0,C5=typeof Promise=="function"?Promise:void 0,rR=typeof queueMicrotask=="function"?queueMicrotask:typeof C5<"u"?function(o){return C5.resolve(null).then(o).catch(aR)}:A5;function aR(o){setTimeout(function(){throw o})}function zu(o){return o==="head"}function k5(o,c){var h=c,p=0,w=0;do{var C=h.nextSibling;if(o.removeChild(h),C&&C.nodeType===8)if(h=C.data,h==="/$"){if(0<p&&8>p){h=p;var K=o.ownerDocument;if(h&1&&Ym(K.documentElement),h&2&&Ym(K.body),h&4)for(h=K.head,Ym(h),K=h.firstChild;K;){var fe=K.nextSibling,Re=K.nodeName;K[Sr]||Re==="SCRIPT"||Re==="STYLE"||Re==="LINK"&&K.rel.toLowerCase()==="stylesheet"||h.removeChild(K),K=fe}}if(w===0){o.removeChild(C),ap(c);return}w--}else h==="$"||h==="$?"||h==="$!"?w++:p=h.charCodeAt(0)-48;else p=0;h=C}while(h);ap(c)}function Ry(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Ry(h),Na(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function nR(o,c,h,p){for(;o.nodeType===1;){var w=h;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!p&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(p){if(!o[Sr])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(C=o.getAttribute("rel"),C==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(C!==w.rel||o.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||o.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||o.getAttribute("title")!==(w.title==null?null:w.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(C=o.getAttribute("src"),(C!==(w.src==null?null:w.src)||o.getAttribute("type")!==(w.type==null?null:w.type)||o.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&C&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var C=w.name==null?null:""+w.name;if(w.type==="hidden"&&o.getAttribute("name")===C)return o}else return o;if(o=ll(o.nextSibling),o===null)break}return null}function sR(o,c,h){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=ll(o.nextSibling),o===null))return null;return o}function Ly(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function iR(o,c){var h=o.ownerDocument;if(o.data!=="$?"||h.readyState==="complete")c();else{var p=function(){c(),h.removeEventListener("DOMContentLoaded",p)};h.addEventListener("DOMContentLoaded",p),o._reactRetry=p}}function ll(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}var My=null;function E5(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}function P5(o,c,h){switch(c=e0(h),o){case"html":if(o=c.documentElement,!o)throw Error(a(452));return o;case"head":if(o=c.head,!o)throw Error(a(453));return o;case"body":if(o=c.body,!o)throw Error(a(454));return o;default:throw Error(a(451))}}function Ym(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);Na(o)}var bo=new Map,T5=new Set;function t0(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Rc=he.d;he.d={f:oR,r:lR,D:cR,C:uR,L:dR,m:fR,X:mR,S:hR,M:pR};function oR(){var o=Rc.f(),c=Gg();return o||c}function lR(o){var c=on(o);c!==null&&c.tag===5&&c.type==="form"?$d(c):Rc.r(o)}var fh=typeof document>"u"?null:document;function O5(o,c,h){var p=fh;if(p&&typeof c=="string"&&c){var w=Vr(c);w='link[rel="'+o+'"][href="'+w+'"]',typeof h=="string"&&(w+='[crossorigin="'+h+'"]'),T5.has(w)||(T5.add(w),o={rel:o,crossOrigin:h,href:c},p.querySelector(w)===null&&(c=p.createElement("link"),Ss(c,"link",o),ea(c),p.head.appendChild(c)))}}function cR(o){Rc.D(o),O5("dns-prefetch",o,null)}function uR(o,c){Rc.C(o,c),O5("preconnect",o,c)}function dR(o,c,h){Rc.L(o,c,h);var p=fh;if(p&&o&&c){var w='link[rel="preload"][as="'+Vr(c)+'"]';c==="image"&&h&&h.imageSrcSet?(w+='[imagesrcset="'+Vr(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(w+='[imagesizes="'+Vr(h.imageSizes)+'"]')):w+='[href="'+Vr(o)+'"]';var C=w;switch(c){case"style":C=hh(o);break;case"script":C=mh(o)}bo.has(C)||(o=m({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:o,as:c},h),bo.set(C,o),p.querySelector(w)!==null||c==="style"&&p.querySelector(Xm(C))||c==="script"&&p.querySelector(Zm(C))||(c=p.createElement("link"),Ss(c,"link",o),ea(c),p.head.appendChild(c)))}}function fR(o,c){Rc.m(o,c);var h=fh;if(h&&o){var p=c&&typeof c.as=="string"?c.as:"script",w='link[rel="modulepreload"][as="'+Vr(p)+'"][href="'+Vr(o)+'"]',C=w;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=mh(o)}if(!bo.has(C)&&(o=m({rel:"modulepreload",href:o},c),bo.set(C,o),h.querySelector(w)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Zm(C)))return}p=h.createElement("link"),Ss(p,"link",o),ea(p),h.head.appendChild(p)}}}function hR(o,c,h){Rc.S(o,c,h);var p=fh;if(p&&o){var w=Pa(p).hoistableStyles,C=hh(o);c=c||"default";var K=w.get(C);if(!K){var fe={loading:0,preload:null};if(K=p.querySelector(Xm(C)))fe.loading=5;else{o=m({rel:"stylesheet",href:o,"data-precedence":c},h),(h=bo.get(C))&&Iy(o,h);var Re=K=p.createElement("link");ea(Re),Ss(Re,"link",o),Re._p=new Promise(function(Qe,gt){Re.onload=Qe,Re.onerror=gt}),Re.addEventListener("load",function(){fe.loading|=1}),Re.addEventListener("error",function(){fe.loading|=2}),fe.loading|=4,r0(K,c,p)}K={type:"stylesheet",instance:K,count:1,state:fe},w.set(C,K)}}}function mR(o,c){Rc.X(o,c);var h=fh;if(h&&o){var p=Pa(h).hoistableScripts,w=mh(o),C=p.get(w);C||(C=h.querySelector(Zm(w)),C||(o=m({src:o,async:!0},c),(c=bo.get(w))&&qy(o,c),C=h.createElement("script"),ea(C),Ss(C,"link",o),h.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},p.set(w,C))}}function pR(o,c){Rc.M(o,c);var h=fh;if(h&&o){var p=Pa(h).hoistableScripts,w=mh(o),C=p.get(w);C||(C=h.querySelector(Zm(w)),C||(o=m({src:o,async:!0,type:"module"},c),(c=bo.get(w))&&qy(o,c),C=h.createElement("script"),ea(C),Ss(C,"link",o),h.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},p.set(w,C))}}function D5(o,c,h,p){var w=(w=ke.current)?t0(w):null;if(!w)throw Error(a(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=hh(h.href),h=Pa(w).hoistableStyles,p=h.get(c),p||(p={type:"style",instance:null,count:0,state:null},h.set(c,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=hh(h.href);var C=Pa(w).hoistableStyles,K=C.get(o);if(K||(w=w.ownerDocument||w,K={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(o,K),(C=w.querySelector(Xm(o)))&&!C._p&&(K.instance=C,K.state.loading=5),bo.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},bo.set(o,h),C||gR(w,o,h,K.state))),c&&p===null)throw Error(a(528,""));return K}if(c&&p!==null)throw Error(a(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=mh(h),h=Pa(w).hoistableScripts,p=h.get(c),p||(p={type:"script",instance:null,count:0,state:null},h.set(c,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,o))}}function hh(o){return'href="'+Vr(o)+'"'}function Xm(o){return'link[rel="stylesheet"]['+o+"]"}function R5(o){return m({},o,{"data-precedence":o.precedence,precedence:null})}function gR(o,c,h,p){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?p.loading=1:(c=o.createElement("link"),p.preload=c,c.addEventListener("load",function(){return p.loading|=1}),c.addEventListener("error",function(){return p.loading|=2}),Ss(c,"link",h),ea(c),o.head.appendChild(c))}function mh(o){return'[src="'+Vr(o)+'"]'}function Zm(o){return"script[async]"+o}function L5(o,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var p=o.querySelector('style[data-href~="'+Vr(h.href)+'"]');if(p)return c.instance=p,ea(p),p;var w=m({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return p=(o.ownerDocument||o).createElement("style"),ea(p),Ss(p,"style",w),r0(p,h.precedence,o),c.instance=p;case"stylesheet":w=hh(h.href);var C=o.querySelector(Xm(w));if(C)return c.state.loading|=4,c.instance=C,ea(C),C;p=R5(h),(w=bo.get(w))&&Iy(p,w),C=(o.ownerDocument||o).createElement("link"),ea(C);var K=C;return K._p=new Promise(function(fe,Re){K.onload=fe,K.onerror=Re}),Ss(C,"link",p),c.state.loading|=4,r0(C,h.precedence,o),c.instance=C;case"script":return C=mh(h.src),(w=o.querySelector(Zm(C)))?(c.instance=w,ea(w),w):(p=h,(w=bo.get(C))&&(p=m({},h),qy(p,w)),o=o.ownerDocument||o,w=o.createElement("script"),ea(w),Ss(w,"link",p),o.head.appendChild(w),c.instance=w);case"void":return null;default:throw Error(a(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(p=c.instance,c.state.loading|=4,r0(p,h.precedence,o));return c.instance}function r0(o,c,h){for(var p=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=p.length?p[p.length-1]:null,C=w,K=0;K<p.length;K++){var fe=p[K];if(fe.dataset.precedence===c)C=fe;else if(C!==w)break}C?C.parentNode.insertBefore(o,C.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(o,c.firstChild))}function Iy(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function qy(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var a0=null;function M5(o,c,h){if(a0===null){var p=new Map,w=a0=new Map;w.set(h,p)}else w=a0,p=w.get(h),p||(p=new Map,w.set(h,p));if(p.has(o))return p;for(p.set(o,null),h=h.getElementsByTagName(o),w=0;w<h.length;w++){var C=h[w];if(!(C[Sr]||C[Dt]||o==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var K=C.getAttribute(c)||"";K=o+K;var fe=p.get(K);fe?fe.push(C):p.set(K,[C])}}return p}function I5(o,c,h){o=o.ownerDocument||o,o.head.insertBefore(h,c==="title"?o.querySelector("head > title"):null)}function xR(o,c,h){if(h===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function q5(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Jm=null;function vR(){}function yR(o,c,h){if(Jm===null)throw Error(a(475));var p=Jm;if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var w=hh(h.href),C=o.querySelector(Xm(w));if(C){o=C._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(p.count++,p=n0.bind(p),o.then(p,p)),c.state.loading|=4,c.instance=C,ea(C);return}C=o.ownerDocument||o,h=R5(h),(w=bo.get(w))&&Iy(h,w),C=C.createElement("link"),ea(C);var K=C;K._p=new Promise(function(fe,Re){K.onload=fe,K.onerror=Re}),Ss(C,"link",h),c.instance=C}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(p.count++,c=n0.bind(p),o.addEventListener("load",c),o.addEventListener("error",c))}}function bR(){if(Jm===null)throw Error(a(475));var o=Jm;return o.stylesheets&&o.count===0&&Fy(o,o.stylesheets),0<o.count?function(c){var h=setTimeout(function(){if(o.stylesheets&&Fy(o,o.stylesheets),o.unsuspend){var p=o.unsuspend;o.unsuspend=null,p()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(h)}}:null}function n0(){if(this.count--,this.count===0){if(this.stylesheets)Fy(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var s0=null;function Fy(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,s0=new Map,c.forEach(wR,o),s0=null,n0.call(o))}function wR(o,c){if(!(c.state.loading&4)){var h=s0.get(o);if(h)var p=h.get(null);else{h=new Map,s0.set(o,h);for(var w=o.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<w.length;C++){var K=w[C];(K.nodeName==="LINK"||K.getAttribute("media")!=="not all")&&(h.set(K.dataset.precedence,K),p=K)}p&&h.set(null,p)}w=c.instance,K=w.getAttribute("data-precedence"),C=h.get(K)||p,C===p&&h.set(null,w),h.set(K,w),this.count++,p=n0.bind(this),w.addEventListener("load",p),w.addEventListener("error",p),C?C.parentNode.insertBefore(w,C.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(w,o.firstChild)),c.state.loading|=4}}var Qm={$$typeof:E,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function jR(o,c,h,p,w,C,K,fe){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pr(0),this.hiddenUpdates=pr(null),this.identifierPrefix=p,this.onUncaughtError=w,this.onCaughtError=C,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=fe,this.incompleteTransitions=new Map}function F5(o,c,h,p,w,C,K,fe,Re,Qe,gt,wt){return o=new jR(o,c,h,K,fe,Re,Qe,wt),c=1,C===!0&&(c|=24),C=as(3,null,null,c),o.current=C,C.stateNode=o,c=jm(),c.refCount++,o.pooledCache=c,c.refCount++,C.memoizedState={element:p,isDehydrated:h,cache:c},Xe(C),o}function B5(o){return o?(o=In,o):In}function U5(o,c,h,p,w,C){w=B5(w),p.context===null?p.context=w:p.pendingContext=w,p=ut(c),p.payload={element:h},C=C===void 0?null:C,C!==null&&(p.callback=C),h=St(o,p,c),h!==null&&(Mi(h,o,c),bt(h,o,c))}function $5(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function By(o,c){$5(o,c),(o=o.alternate)&&$5(o,c)}function z5(o){if(o.tag===13){var c=yc(o,67108864);c!==null&&Mi(c,o,67108864),By(o,67108864)}}var i0=!0;function _R(o,c,h,p){var w=ae.T;ae.T=null;var C=he.p;try{he.p=2,Uy(o,c,h,p)}finally{he.p=C,ae.T=w}}function NR(o,c,h,p){var w=ae.T;ae.T=null;var C=he.p;try{he.p=8,Uy(o,c,h,p)}finally{he.p=C,ae.T=w}}function Uy(o,c,h,p){if(i0){var w=$y(p);if(w===null)ky(o,c,p,o0,h),H5(o,p);else if(AR(w,o,c,h,p))p.stopPropagation();else if(H5(o,p),c&4&&-1<SR.indexOf(o)){for(;w!==null;){var C=on(w);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var K=zt(C.pendingLanes);if(K!==0){var fe=C;for(fe.pendingLanes|=2,fe.entangledLanes|=2;K;){var Re=1<<31-at(K);fe.entanglements[1]|=Re,K&=~Re}Gl(C),(ya&6)===0&&(Vg=X()+500,Gm(0))}}break;case 13:fe=yc(C,2),fe!==null&&Mi(fe,C,2),Gg(),By(C,2)}if(C=$y(p),C===null&&ky(o,c,p,o0,h),C===w)break;w=C}w!==null&&p.stopPropagation()}else ky(o,c,p,null,h)}}function $y(o){return o=kl(o),zy(o)}var o0=null;function zy(o){if(o0=null,o=Tr(o),o!==null){var c=i(o);if(c===null)o=null;else{var h=c.tag;if(h===13){if(o=l(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return o0=o,null}function V5(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ge()){case be:return 2;case $e:return 8;case Ze:case pe:return 32;case V:return 268435456;default:return 32}default:return 32}}var Vy=!1,Vu=null,Hu=null,Gu=null,ep=new Map,tp=new Map,Ku=[],SR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function H5(o,c){switch(o){case"focusin":case"focusout":Vu=null;break;case"dragenter":case"dragleave":Hu=null;break;case"mouseover":case"mouseout":Gu=null;break;case"pointerover":case"pointerout":ep.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":tp.delete(c.pointerId)}}function rp(o,c,h,p,w,C){return o===null||o.nativeEvent!==C?(o={blockedOn:c,domEventName:h,eventSystemFlags:p,nativeEvent:C,targetContainers:[w]},c!==null&&(c=on(c),c!==null&&z5(c)),o):(o.eventSystemFlags|=p,c=o.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),o)}function AR(o,c,h,p,w){switch(c){case"focusin":return Vu=rp(Vu,o,c,h,p,w),!0;case"dragenter":return Hu=rp(Hu,o,c,h,p,w),!0;case"mouseover":return Gu=rp(Gu,o,c,h,p,w),!0;case"pointerover":var C=w.pointerId;return ep.set(C,rp(ep.get(C)||null,o,c,h,p,w)),!0;case"gotpointercapture":return C=w.pointerId,tp.set(C,rp(tp.get(C)||null,o,c,h,p,w)),!0}return!1}function G5(o){var c=Tr(o.target);if(c!==null){var h=i(c);if(h!==null){if(c=h.tag,c===13){if(c=l(h),c!==null){o.blockedOn=c,Ve(o.priority,function(){if(h.tag===13){var p=Li();p=Te(p);var w=yc(h,p);w!==null&&Mi(w,h,p),By(h,p)}});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function l0(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=$y(o.nativeEvent);if(h===null){h=o.nativeEvent;var p=new h.constructor(h.type,h);ui=p,h.target.dispatchEvent(p),ui=null}else return c=on(h),c!==null&&z5(c),o.blockedOn=h,!1;c.shift()}return!0}function K5(o,c,h){l0(o)&&h.delete(c)}function CR(){Vy=!1,Vu!==null&&l0(Vu)&&(Vu=null),Hu!==null&&l0(Hu)&&(Hu=null),Gu!==null&&l0(Gu)&&(Gu=null),ep.forEach(K5),tp.forEach(K5)}function c0(o,c){o.blockedOn===c&&(o.blockedOn=null,Vy||(Vy=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,CR)))}var u0=null;function W5(o){u0!==o&&(u0=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){u0===o&&(u0=null);for(var c=0;c<o.length;c+=3){var h=o[c],p=o[c+1],w=o[c+2];if(typeof p!="function"){if(zy(p||h)===null)continue;break}var C=on(h);C!==null&&(o.splice(c,3),c-=3,xo(C,{pending:!0,data:w,method:h.method,action:p},p,w))}}))}function ap(o){function c(Re){return c0(Re,o)}Vu!==null&&c0(Vu,o),Hu!==null&&c0(Hu,o),Gu!==null&&c0(Gu,o),ep.forEach(c),tp.forEach(c);for(var h=0;h<Ku.length;h++){var p=Ku[h];p.blockedOn===o&&(p.blockedOn=null)}for(;0<Ku.length&&(h=Ku[0],h.blockedOn===null);)G5(h),h.blockedOn===null&&Ku.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(p=0;p<h.length;p+=3){var w=h[p],C=h[p+1],K=w[Wt]||null;if(typeof C=="function")K||W5(h);else if(K){var fe=null;if(C&&C.hasAttribute("formAction")){if(w=C,K=C[Wt]||null)fe=K.formAction;else if(zy(w)!==null)continue}else fe=K.action;typeof fe=="function"?h[p+1]=fe:(h.splice(p,3),p-=3),W5(h)}}}function Hy(o){this._internalRoot=o}d0.prototype.render=Hy.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(a(409));var h=c.current,p=Li();U5(h,p,o,c,null,null)},d0.prototype.unmount=Hy.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;U5(o.current,2,null,o,null,null),Gg(),c[cr]=null}};function d0(o){this._internalRoot=o}d0.prototype.unstable_scheduleHydration=function(o){if(o){var c=we();o={blockedOn:null,target:o,priority:c};for(var h=0;h<Ku.length&&c!==0&&c<Ku[h].priority;h++);Ku.splice(h,0,o),h===0&&G5(o)}};var Y5=t.version;if(Y5!=="19.1.1")throw Error(a(527,Y5,"19.1.1"));he.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(a(188)):(o=Object.keys(o).join(","),Error(a(268,o)));return o=d(c),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var kR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var f0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!f0.isDisabled&&f0.supportsFiber)try{kt=f0.inject(kR),Mt=f0}catch{}}return sp.createRoot=function(o,c){if(!s(o))throw Error(a(299));var h=!1,p="",w=dN,C=fN,K=hN,fe=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(K=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(fe=c.unstable_transitionCallbacks)),c=F5(o,1,!1,null,null,h,p,w,C,K,fe,null),o[cr]=c.current,Cy(o),new Hy(c)},sp.hydrateRoot=function(o,c,h){if(!s(o))throw Error(a(299));var p=!1,w="",C=dN,K=fN,fe=hN,Re=null,Qe=null;return h!=null&&(h.unstable_strictMode===!0&&(p=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onUncaughtError!==void 0&&(C=h.onUncaughtError),h.onCaughtError!==void 0&&(K=h.onCaughtError),h.onRecoverableError!==void 0&&(fe=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(Re=h.unstable_transitionCallbacks),h.formState!==void 0&&(Qe=h.formState)),c=F5(o,1,!0,c,h??null,p,w,C,K,fe,Re,Qe),c.context=B5(null),h=c.current,p=Li(),p=Te(p),w=ut(p),w.callback=null,St(h,w,p),h=p,c.current.lanes=h,Be(c,h),Gl(c),o[cr]=c.current,Cy(o),new d0(c)},sp.version="19.1.1",sp}var sS;function BR(){if(sS)return Wy.exports;sS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Wy.exports=FR(),Wy.exports}var UR=BR();const $R=Ro(UR);var _t=(e=>(e.Compliant="Compliant",e.Pending="Pending",e.NonCompliant="Non-Compliant",e.Verified="Verified",e.Rejected="Rejected",e.NotRequired="Not Required",e))(_t||{}),wa=(e=>(e.PreSeed="Pre-Seed",e.Seed="Seed",e.SeriesA="Series A",e.SeriesB="Series B",e.Bridge="Bridge",e))(wa||{}),p2=(e=>(e.IncubationCenter="Incubation Center",e.Accelerator="Accelerator",e.InnovationHub="Innovation Hub",e.TechnologyPark="Technology Park",e.ResearchInstitute="Research Institute",e))(p2||{}),Fc=(e=>(e.Free="Free",e.Fees="Fees",e.Equity="Equity",e.Hybrid="Hybrid",e))(Fc||{}),ax=(e=>(e.Angel="Angel",e.VC="VC Firm",e.Corporate="Corporate",e.Government="Government",e))(ax||{}),$i=(e=>(e.Equity="Equity",e.Debt="Debt",e.Grant="Grant",e))($i||{}),Wl=(e=>(e.Trademark="Trademark",e.Patent="Patent",e.Copyright="Copyright",e.TradeSecret="Trade Secret",e.DomainName="Domain Name",e.Other="Other",e))(Wl||{}),dl=(e=>(e.Active="Active",e.Pending="Pending",e.Expired="Expired",e.Abandoned="Abandoned",e.Cancelled="Cancelled",e))(dl||{}),g2=(e=>(e.RegistrationCertificate="Registration Certificate",e.ApplicationForm="Application Form",e.RenewalDocument="Renewal Document",e.AssignmentAgreement="Assignment Agreement",e.LicenseAgreement="License Agreement",e.Other="Other",e))(g2||{});const zR="modulepreload",VR=function(e){return"/"+e},iS={},Ai=function(t,r,a){let s=Promise.resolve();if(r&&r.length>0){let l=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=l(r.map(f=>{if(f=VR(f),f in iS)return;iS[f]=!0;const m=f.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":zR,m||(v.as="script"),v.crossOrigin="",v.href=f,d&&v.setAttribute("nonce",d),document.head.appendChild(v),m)return new Promise((x,j)=>{v.addEventListener("load",x),v.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&i(u.reason);return t().catch(i)})},HR=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ai(async()=>{const{default:a}=await Promise.resolve().then(()=>om);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)};class Bw extends Error{constructor(t,r="FunctionsError",a){super(t),this.name=r,this.context=a}}class GR extends Bw{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class oS extends Bw{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class lS extends Bw{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var x2;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(x2||(x2={}));var KR=function(e,t,r,a){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(m){try{f(a.next(m))}catch(g){l(g)}}function d(m){try{f(a.throw(m))}catch(g){l(g)}}function f(m){m.done?i(m.value):s(m.value).then(u,d)}f((a=a.apply(e,t||[])).next())})};class WR{constructor(t,{headers:r={},customFetch:a,region:s=x2.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=HR(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var a;return KR(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:l}=r;let u={},{region:d}=r;d||(d=this.region);const f=new URL(`${this.url}/${t}`);d&&d!=="any"&&(u["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let m;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",m=l):typeof l=="string"?(u["Content-Type"]="text/plain",m=l):typeof FormData<"u"&&l instanceof FormData?m=l:(u["Content-Type"]="application/json",m=JSON.stringify(l)));const g=yield this.fetch(f.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:m}).catch(b=>{throw new GR(b)}),v=g.headers.get("x-relay-error");if(v&&v==="true")throw new oS(g);if(!g.ok)throw new lS(g);let x=((a=g.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),j;return x==="application/json"?j=yield g.json():x==="application/octet-stream"?j=yield g.blob():x==="text/event-stream"?j=g:x==="multipart/form-data"?j=yield g.formData():j=yield g.text(),{data:j,error:null,response:g}}catch(s){return{data:null,error:s,response:s instanceof lS||s instanceof oS?s.context:void 0}}})}}var ls={},ph={},gh={},xh={},vh={},yh={},YR=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Gh=YR();const XR=Gh.fetch,yk=Gh.fetch.bind(Gh),bk=Gh.Headers,ZR=Gh.Request,JR=Gh.Response,om=Object.freeze(Object.defineProperty({__proto__:null,Headers:bk,Request:ZR,Response:JR,default:yk,fetch:XR},Symbol.toStringTag,{value:"Module"})),QR=OR(om);var h0={},cS;function wk(){if(cS)return h0;cS=1,Object.defineProperty(h0,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return h0.default=e,h0}var uS;function jk(){if(uS)return yh;uS=1;var e=yh&&yh.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(yh,"__esModule",{value:!0});const t=e(QR),r=e(wk());class a{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,l){return this.headers=Object.assign({},this.headers),this.headers[i]=l,this}then(i,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var m,g,v;let x=null,j=null,b=null,A=f.status,S=f.statusText;if(f.ok){if(this.method!=="HEAD"){const L=await f.text();L===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?j=L:j=JSON.parse(L))}const E=(m=this.headers.Prefer)===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),D=(g=f.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");E&&D&&D.length>1&&(b=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(x={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,b=null,A=406,S="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const E=await f.text();try{x=JSON.parse(E),Array.isArray(x)&&f.status===404&&(j=[],x=null,A=200,S="OK")}catch{f.status===404&&E===""?(A=204,S="No Content"):x={message:E}}if(x&&this.isMaybeSingle&&(!((v=x==null?void 0:x.details)===null||v===void 0)&&v.includes("0 rows"))&&(x=null,A=200,S="OK"),x&&this.shouldThrowOnError)throw new r.default(x)}return{error:x,data:j,count:b,status:A,statusText:S}});return this.shouldThrowOnError||(d=d.catch(f=>{var m,g,v;return{error:{message:`${(m=f==null?void 0:f.name)!==null&&m!==void 0?m:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(g=f==null?void 0:f.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(v=f==null?void 0:f.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),d.then(i,l)}returns(){return this}overrideTypes(){return this}}return yh.default=a,yh}var dS;function _k(){if(dS)return vh;dS=1;var e=vh&&vh.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(vh,"__esModule",{value:!0});const t=e(jk());class r extends t.default{select(s){let i=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:i=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const f=d?`${d}.order`:"order",m=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${m?`${m},`:""}${s}.${i?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:l=i}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,i,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(f,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:i=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:f="text"}={}){var m;const g=[s?"analyze":null,i?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(m=this.headers.Accept)!==null&&m!==void 0?m:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${f}; for="${v}"; options=${g};`,f==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return vh.default=r,vh}var fS;function Uw(){if(fS)return xh;fS=1;var e=xh&&xh.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(xh,"__esModule",{value:!0});const t=e(_k());class r extends t.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const l=Array.from(new Set(i)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${d}fts${f}.${i}`),this}match(s){return Object.entries(s).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(s,i,l){return this.url.searchParams.append(s,`not.${i}.${l}`),this}or(s,{foreignTable:i,referencedTable:l=i}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,i,l){return this.url.searchParams.append(s,`${i}.${l}`),this}}return xh.default=r,xh}var hS;function Nk(){if(hS)return gh;hS=1;var e=gh&&gh.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(gh,"__esModule",{value:!0});const t=e(Uw());class r{constructor(s,{headers:i={},schema:l,fetch:u}){this.url=s,this.headers=i,this.schema=l,this.fetch=u}select(s,{head:i=!1,count:l}={}){const u=i?"HEAD":"GET";let d=!1;const f=(s??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",f),l&&(this.headers.Prefer=`count=${l}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:i,defaultToNull:l=!0}={}){const u="POST",d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),i&&d.push(`count=${i}`),l||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(s)){const f=s.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(f.length>0){const m=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:i,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){const f="POST",m=[`resolution=${l?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&m.push(this.headers.Prefer),u&&m.push(`count=${u}`),d||m.push("missing=default"),this.headers.Prefer=m.join(","),Array.isArray(s)){const g=s.reduce((v,x)=>v.concat(Object.keys(x)),[]);if(g.length>0){const v=[...new Set(g)].map(x=>`"${x}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:i}={}){const l="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),i&&u.push(`count=${i}`),this.headers.Prefer=u.join(","),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const i="DELETE",l=[];return s&&l.push(`count=${s}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return gh.default=r,gh}var ip={},op={},mS;function e7(){return mS||(mS=1,Object.defineProperty(op,"__esModule",{value:!0}),op.version=void 0,op.version="0.0.0-automated"),op}var pS;function t7(){if(pS)return ip;pS=1,Object.defineProperty(ip,"__esModule",{value:!0}),ip.DEFAULT_HEADERS=void 0;const e=e7();return ip.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},ip}var gS;function r7(){if(gS)return ph;gS=1;var e=ph&&ph.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ph,"__esModule",{value:!0});const t=e(Nk()),r=e(Uw()),a=t7();class s{constructor(l,{headers:u={},schema:d,fetch:f}={}){this.url=l,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),u),this.schemaName=d,this.fetch=f}from(l){const u=new URL(`${this.url}/${l}`);return new t.default(u,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:d=!1,get:f=!1,count:m}={}){let g;const v=new URL(`${this.url}/rpc/${l}`);let x;d||f?(g=d?"HEAD":"GET",Object.entries(u).filter(([b,A])=>A!==void 0).map(([b,A])=>[b,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([b,A])=>{v.searchParams.append(b,A)})):(g="POST",x=u);const j=Object.assign({},this.headers);return m&&(j.Prefer=`count=${m}`),new r.default({method:g,url:v,headers:j,schema:this.schemaName,body:x,fetch:this.fetch,allowEmpty:!1})}}return ph.default=s,ph}var xS;function a7(){if(xS)return ls;xS=1;var e=ls&&ls.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(ls,"__esModule",{value:!0}),ls.PostgrestError=ls.PostgrestBuilder=ls.PostgrestTransformBuilder=ls.PostgrestFilterBuilder=ls.PostgrestQueryBuilder=ls.PostgrestClient=void 0;const t=e(r7());ls.PostgrestClient=t.default;const r=e(Nk());ls.PostgrestQueryBuilder=r.default;const a=e(Uw());ls.PostgrestFilterBuilder=a.default;const s=e(_k());ls.PostgrestTransformBuilder=s.default;const i=e(jk());ls.PostgrestBuilder=i.default;const l=e(wk());return ls.PostgrestError=l.default,ls.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:l.default},ls}var n7=a7();const s7=Ro(n7),{PostgrestClient:i7,PostgrestQueryBuilder:vne,PostgrestFilterBuilder:yne,PostgrestTransformBuilder:bne,PostgrestBuilder:wne,PostgrestError:jne}=s7;function o7(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const l7=o7(),c7="2.11.15",u7=`realtime-js/${c7}`,d7="1.0.0",Sk=1e4,f7=1e3;var jp;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(jp||(jp={}));var Hs;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Hs||(Hs={}));var fl;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(fl||(fl={}));var v2;(function(e){e.websocket="websocket"})(v2||(v2={}));var rf;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(rf||(rf={}));class h7{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,r,a)}_decodeBroadcast(t,r,a){const s=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const u=a.decode(t.slice(l,l+s));l=l+s;const d=a.decode(t.slice(l,l+i));l=l+i;const f=JSON.parse(a.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:d,payload:f}}}class Ak{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ba;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ba||(Ba={}));const vS=(e,t,r={})=>{var a;const s=(a=r.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(t).reduce((i,l)=>(i[l]=m7(l,e,t,s),i),{})},m7=(e,t,r,a)=>{const s=t.find(u=>u.name===e),i=s==null?void 0:s.type,l=r[e];return i&&!a.includes(i)?Ck(i,l):y2(l)},Ck=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return v7(t,r)}switch(e){case Ba.bool:return p7(t);case Ba.float4:case Ba.float8:case Ba.int2:case Ba.int4:case Ba.int8:case Ba.numeric:case Ba.oid:return g7(t);case Ba.json:case Ba.jsonb:return x7(t);case Ba.timestamp:return y7(t);case Ba.abstime:case Ba.date:case Ba.daterange:case Ba.int4range:case Ba.int8range:case Ba.money:case Ba.reltime:case Ba.text:case Ba.time:case Ba.timestamptz:case Ba.timetz:case Ba.tsrange:case Ba.tstzrange:return y2(t);default:return y2(t)}},y2=e=>e,p7=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},g7=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},x7=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},v7=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,a=e[r];if(e[0]==="{"&&a==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(u=>Ck(t,u))}return e},y7=e=>typeof e=="string"?e.replace(" ","T"):e,kk=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Jy{constructor(t,r,a={},s=Sk){this.channel=t,this.event=r,this.payload=a,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var a;return this._hasReceived(t)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var yS;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(yS||(yS={}));class _p{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_p.syncState(this.state,s,i,l),this.pendingDiffs.forEach(d=>{this.state=_p.syncDiff(this.state,d,i,l)}),this.pendingDiffs=[],u()}),this.channel._on(a.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=_p.syncDiff(this.state,s,i,l),u())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,a,s){const i=this.cloneDeep(t),l=this.transformState(r),u={},d={};return this.map(i,(f,m)=>{l[f]||(d[f]=m)}),this.map(l,(f,m)=>{const g=i[f];if(g){const v=m.map(A=>A.presence_ref),x=g.map(A=>A.presence_ref),j=m.filter(A=>x.indexOf(A.presence_ref)<0),b=g.filter(A=>v.indexOf(A.presence_ref)<0);j.length>0&&(u[f]=j),b.length>0&&(d[f]=b)}else u[f]=m}),this.syncDiff(i,{joins:u,leaves:d},a,s)}static syncDiff(t,r,a,s){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),s||(s=()=>{}),this.map(i,(u,d)=>{var f;const m=(f=t[u])!==null&&f!==void 0?f:[];if(t[u]=this.cloneDeep(d),m.length>0){const g=t[u].map(x=>x.presence_ref),v=m.filter(x=>g.indexOf(x.presence_ref)<0);t[u].unshift(...v)}a(u,m,d)}),this.map(l,(u,d)=>{let f=t[u];if(!f)return;const m=d.map(g=>g.presence_ref);f=f.filter(g=>m.indexOf(g.presence_ref)<0),t[u]=f,s(u,f,d),f.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(a=>r(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,a)=>{const s=t[a];return"metas"in s?r[a]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[a]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bS;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(bS||(bS={}));var wS;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(wS||(wS={}));var $c;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})($c||($c={}));class $w{constructor(t,r={config:{}},a){this.topic=t,this.params=r,this.socket=a,this.bindings={},this.state=Hs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Jy(this,fl.join,this.params,this.timeout),this.rejoinTimer=new Ak(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Hs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Hs.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Hs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Hs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fl.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new _p(this),this.broadcastEndpointURL=kk(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var a,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Hs.closed){const{config:{broadcast:i,presence:l,private:u}}=this.params;this._onError(m=>t==null?void 0:t($c.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t($c.CLOSED));const d={},f={broadcast:i,presence:l,postgres_changes:(s=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(m=>m.filter))!==null&&s!==void 0?s:[],private:u};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket.setAuth(),m===void 0){t==null||t($c.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,x=(g=v==null?void 0:v.length)!==null&&g!==void 0?g:0,j=[];for(let b=0;b<x;b++){const A=v[b],{filter:{event:S,schema:T,table:E,filter:D}}=A,L=m&&m[b];if(L&&L.event===S&&L.schema===T&&L.table===E&&L.filter===D)j.push(Object.assign(Object.assign({},A),{id:L.id}));else{this.unsubscribe(),this.state=Hs.errored,t==null||t($c.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,t&&t($c.SUBSCRIBED);return}}).receive("error",m=>{this.state=Hs.errored,t==null||t($c.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t($c.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,a){return this._on(t,r,a)}async send(t,r={}){var a,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,u,d;const f=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),f.receive("ok",()=>i("ok")),f.receive("error",()=>i("error")),f.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Hs.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fl.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(s=>{a=new Jy(this,fl.leave,{},t),a.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,a){const s=new AbortController,i=setTimeout(()=>s.abort(),a),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),l}_push(t,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Jy(this,t,r,a);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,a){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,a){var s,i;const l=t.toLocaleLowerCase(),{close:u,error:d,leave:f,join:m}=fl;if(a&&[u,d,f,m].indexOf(l)>=0&&a!==this._joinRef())return;let v=this._onMessage(l,r,a);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var j,b,A;return((j=x.filter)===null||j===void 0?void 0:j.event)==="*"||((A=(b=x.filter)===null||b===void 0?void 0:b.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===l}).map(x=>x.callback(v,a)):(i=this.bindings[l])===null||i===void 0||i.filter(x=>{var j,b,A,S,T,E;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const D=x.id,L=(j=x.filter)===null||j===void 0?void 0:j.event;return D&&((b=r.ids)===null||b===void 0?void 0:b.includes(D))&&(L==="*"||(L==null?void 0:L.toLocaleLowerCase())===((A=r.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const D=(T=(S=x==null?void 0:x.filter)===null||S===void 0?void 0:S.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return D==="*"||D===((E=r==null?void 0:r.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof v=="object"&&"ids"in v){const j=v.data,{schema:b,table:A,commit_timestamp:S,type:T,errors:E}=j;v=Object.assign(Object.assign({},{schema:b,table:A,commit_timestamp:S,eventType:T,new:{},old:{},errors:E}),this._getPayloadRecords(j))}x.callback(v,a)})}_isClosed(){return this.state===Hs.closed}_isJoined(){return this.state===Hs.joined}_isJoining(){return this.state===Hs.joining}_isLeaving(){return this.state===Hs.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,a){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:a};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const a=t.toLocaleLowerCase();return this.bindings[a]=this.bindings[a].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===a&&$w.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const a in t)if(t[a]!==r[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(fl.close,{},t)}_onError(t){this._on(fl.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Hs.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=vS(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=vS(t.columns,t.old_record)),r}}const jS=()=>{},b7=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class w7{constructor(t,r){var a;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Sk,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=jS,this.ref=0,this.logger=jS,this.conn=null,this.sendBuffer=[],this.serializer=new h7,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let l;return i?l=i:typeof fetch>"u"?l=(...u)=>Ai(async()=>{const{default:d}=await Promise.resolve().then(()=>om);return{default:d}},void 0).then(({default:d})=>d(...u)):l=fetch,(...u)=>l(...u)},this.endPoint=`${t}/${v2.websocket}`,this.httpEndpoint=kk(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(a=r==null?void 0:r.params)===null||a===void 0?void 0:a.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,l)=>l(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ak(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=l7),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:d7}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(a=>a.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,a){this.logger(t,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case jp.connecting:return rf.Connecting;case jp.open:return rf.Open;case jp.closing:return rf.Closing;default:return rf.Closed}}isConnected(){return this.connectionState()===rf.Open}channel(t,r={config:{}}){const a=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===a);if(s)return s;{const i=new $w(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:a,payload:s,ref:i}=t,l=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${r} ${a} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const s={access_token:r,version:u7};r&&a.updateJoinPayload(s),a.joinedOnce&&a._isJoined()&&a._push(fl.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(f7,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:a,event:s,payload:i,ref:l}=r;a==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${a} ${s} ${l&&"("+l+")"||""}`,i),Array.from(this.channels).filter(u=>u._isMember(a)).forEach(u=>u._trigger(s,i,l)),this.stateChangeCallbacks.message.forEach(u=>u(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(fl.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const a=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${a}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const a=new Blob([b7],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}}class zw extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function us(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class j7 extends zw{constructor(t,r,a){super(t),this.name="StorageApiError",this.status=r,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class b2 extends zw{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var _7=function(e,t,r,a){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(m){try{f(a.next(m))}catch(g){l(g)}}function d(m){try{f(a.throw(m))}catch(g){l(g)}}function f(m){m.done?i(m.value):s(m.value).then(u,d)}f((a=a.apply(e,t||[])).next())})};const Ek=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ai(async()=>{const{default:a}=await Promise.resolve().then(()=>om);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},N7=()=>_7(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ai(()=>Promise.resolve().then(()=>om),void 0)).Response:Response}),w2=e=>{if(Array.isArray(e))return e.map(r=>w2(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,a])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=w2(a)}),t},S7=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Sf=function(e,t,r,a){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(m){try{f(a.next(m))}catch(g){l(g)}}function d(m){try{f(a.throw(m))}catch(g){l(g)}}function f(m){m.done?i(m.value):s(m.value).then(u,d)}f((a=a.apply(e,t||[])).next())})};const Qy=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),A7=(e,t,r)=>Sf(void 0,void 0,void 0,function*(){const a=yield N7();e instanceof a&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,l=(s==null?void 0:s.statusCode)||i+"";t(new j7(Qy(s),i,l))}).catch(s=>{t(new b2(Qy(s),s))}):t(new b2(Qy(e),e))}),C7=(e,t,r,a)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!a?s:(S7(a)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(a)):s.body=a,Object.assign(Object.assign({},s),r))};function Zp(e,t,r,a,s,i){return Sf(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(r,C7(t,a,s,i)).then(d=>{if(!d.ok)throw d;return a!=null&&a.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>A7(d,u,a))})})}function nx(e,t,r,a){return Sf(this,void 0,void 0,function*(){return Zp(e,"GET",t,r,a)})}function zc(e,t,r,a,s){return Sf(this,void 0,void 0,function*(){return Zp(e,"POST",t,a,s,r)})}function j2(e,t,r,a,s){return Sf(this,void 0,void 0,function*(){return Zp(e,"PUT",t,a,s,r)})}function k7(e,t,r,a){return Sf(this,void 0,void 0,function*(){return Zp(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),a)})}function Pk(e,t,r,a,s){return Sf(this,void 0,void 0,function*(){return Zp(e,"DELETE",t,a,s,r)})}var bi=function(e,t,r,a){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(m){try{f(a.next(m))}catch(g){l(g)}}function d(m){try{f(a.throw(m))}catch(g){l(g)}}function f(m){m.done?i(m.value):s(m.value).then(u,d)}f((a=a.apply(e,t||[])).next())})};const E7={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_S={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class P7{constructor(t,r={},a,s){this.url=t,this.headers=r,this.bucketId=a,this.fetch=Ek(s)}uploadOrUpdate(t,r,a,s){return bi(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},_S),s);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&a instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",a)):typeof FormData<"u"&&a instanceof FormData?(i=a,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=a,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const f=this._removeEmptyFolders(r),m=this._getFinalPath(f),g=yield(t=="PUT"?j2:zc)(this.fetch,`${this.url}/object/${m}`,i,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:g.Id,fullPath:g.Key},error:null}}catch(i){if(us(i))return{data:null,error:i};throw i}})}upload(t,r,a){return bi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,a)})}uploadToSignedUrl(t,r,a,s){return bi(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",r);try{let d;const f=Object.assign({upsert:_S.upsert},s),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&a instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",a)):typeof FormData<"u"&&a instanceof FormData?(d=a,d.append("cacheControl",f.cacheControl)):(d=a,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType);const g=yield j2(this.fetch,u.toString(),d,{headers:m});return{data:{path:i,fullPath:g.Key},error:null}}catch(d){if(us(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return bi(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield zc(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:s}),l=new URL(this.url+i.url),u=l.searchParams.get("token");if(!u)throw new zw("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(a){if(us(a))return{data:null,error:a};throw a}})}update(t,r,a){return bi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,a)})}move(t,r,a){return bi(this,void 0,void 0,function*(){try{return{data:yield zc(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(us(s))return{data:null,error:s};throw s}})}copy(t,r,a){return bi(this,void 0,void 0,function*(){try{return{data:{path:(yield zc(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(us(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,a){return bi(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield zc(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const l=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(us(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,a){return bi(this,void 0,void 0,function*(){try{const s=yield zc(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(us(s))return{data:null,error:s};throw s}})}download(t,r){return bi(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"";try{const u=this._getFinalPath(t);return{data:yield(yield nx(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(us(u))return{data:null,error:u};throw u}})}info(t){return bi(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const a=yield nx(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:w2(a),error:null}}catch(a){if(us(a))return{data:null,error:a};throw a}})}exists(t){return bi(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield k7(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(us(a)&&a instanceof b2){const s=a.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,r){const a=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&s.push(d);let f=s.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${a}${f}`)}}}remove(t){return bi(this,void 0,void 0,function*(){try{return{data:yield Pk(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(us(r))return{data:null,error:r};throw r}})}list(t,r,a){return bi(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},E7),r),{prefix:t||""});return{data:yield zc(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},a),error:null}}catch(s){if(us(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const T7="2.10.4",O7={"X-Client-Info":`storage-js/${T7}`};var bh=function(e,t,r,a){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(m){try{f(a.next(m))}catch(g){l(g)}}function d(m){try{f(a.throw(m))}catch(g){l(g)}}function f(m){m.done?i(m.value):s(m.value).then(u,d)}f((a=a.apply(e,t||[])).next())})};class D7{constructor(t,r={},a,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},O7),r),this.fetch=Ek(a)}listBuckets(){return bh(this,void 0,void 0,function*(){try{return{data:yield nx(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(us(t))return{data:null,error:t};throw t}})}getBucket(t){return bh(this,void 0,void 0,function*(){try{return{data:yield nx(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(us(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return bh(this,void 0,void 0,function*(){try{return{data:yield zc(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(us(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return bh(this,void 0,void 0,function*(){try{return{data:yield j2(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(us(a))return{data:null,error:a};throw a}})}emptyBucket(t){return bh(this,void 0,void 0,function*(){try{return{data:yield zc(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(us(r))return{data:null,error:r};throw r}})}deleteBucket(t){return bh(this,void 0,void 0,function*(){try{return{data:yield Pk(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(us(r))return{data:null,error:r};throw r}})}}class R7 extends D7{constructor(t,r={},a,s){super(t,r,a,s)}from(t){return new P7(this.url,this.headers,t,this.fetch)}}const L7="2.53.0";let vp="";typeof Deno<"u"?vp="deno":typeof document<"u"?vp="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vp="react-native":vp="node";const M7={"X-Client-Info":`supabase-js-${vp}/${L7}`},I7={headers:M7},q7={schema:"public"},F7={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},B7={};var U7=function(e,t,r,a){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(m){try{f(a.next(m))}catch(g){l(g)}}function d(m){try{f(a.throw(m))}catch(g){l(g)}}function f(m){m.done?i(m.value):s(m.value).then(u,d)}f((a=a.apply(e,t||[])).next())})};const $7=e=>{let t;return e?t=e:typeof fetch>"u"?t=yk:t=fetch,(...r)=>t(...r)},z7=()=>typeof Headers>"u"?bk:Headers,V7=(e,t,r)=>{const a=$7(r),s=z7();return(i,l)=>U7(void 0,void 0,void 0,function*(){var u;const d=(u=yield t())!==null&&u!==void 0?u:e;let f=new s(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),a(i,Object.assign(Object.assign({},l),{headers:f}))})};var H7=function(e,t,r,a){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(m){try{f(a.next(m))}catch(g){l(g)}}function d(m){try{f(a.throw(m))}catch(g){l(g)}}function f(m){m.done?i(m.value):s(m.value).then(u,d)}f((a=a.apply(e,t||[])).next())})};function G7(e){return e.endsWith("/")?e:e+"/"}function K7(e,t){var r,a;const{db:s,auth:i,realtime:l,global:u}=e,{db:d,auth:f,realtime:m,global:g}=t,v={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},f),i),realtime:Object.assign(Object.assign({},m),l),storage:{},global:Object.assign(Object.assign(Object.assign({},g),u),{headers:Object.assign(Object.assign({},(r=g==null?void 0:g.headers)!==null&&r!==void 0?r:{}),(a=u==null?void 0:u.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>H7(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}const Tk="2.71.1",Th=30*1e3,_2=3,eb=_2*Th,W7="http://localhost:9999",Y7="supabase.auth.token",X7={"X-Client-Info":`gotrue-js/${Tk}`},N2="X-Supabase-Api-Version",Ok={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Z7=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,J7=600*1e3;class Vw extends Error{constructor(t,r,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function Dr(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Q7 extends Vw{constructor(t,r,a){super(t,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function eL(e){return Dr(e)&&e.name==="AuthApiError"}class Dk extends Vw{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class yd extends Vw{constructor(t,r,a,s){super(t,a,s),this.name=r,this.status=a}}class rd extends yd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function tL(e){return Dr(e)&&e.name==="AuthSessionMissingError"}class m0 extends yd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class p0 extends yd{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class g0 extends yd{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function rL(e){return Dr(e)&&e.name==="AuthImplicitGrantRedirectError"}class NS extends yd{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class S2 extends yd{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function tb(e){return Dr(e)&&e.name==="AuthRetryableFetchError"}class SS extends yd{constructor(t,r,a){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class A2 extends yd{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const sx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),AS=` 	
\r=`.split(""),aL=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<AS.length;t+=1)e[AS[t].charCodeAt(0)]=-2;for(let t=0;t<sx.length;t+=1)e[sx[t].charCodeAt(0)]=t;return e})();function CS(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(sx[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(sx[a]),t.queuedBits-=6}}function Rk(e,t,r){const a=aL[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function kS(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},a={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=l=>{iL(l,a,r)};for(let l=0;l<e.length;l+=1)Rk(e.charCodeAt(l),s,i);return t.join("")}function nL(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function sL(e,t){for(let r=0;r<e.length;r+=1){let a=e.charCodeAt(r);if(a>55295&&a<=56319){const s=(a-55296)*1024&65535;a=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}nL(a,t)}}function iL(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let a=1;a<6;a+=1)if((e>>7-a&1)===0){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function oL(e){const t=[],r={queue:0,queuedBits:0},a=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Rk(e.charCodeAt(s),r,a);return new Uint8Array(t)}function lL(e){const t=[];return sL(e,r=>t.push(r)),new Uint8Array(t)}function cL(e){const t=[],r={queue:0,queuedBits:0},a=s=>{t.push(s)};return e.forEach(s=>CS(s,r,a)),CS(null,r,a),t.join("")}function uL(e){return Math.round(Date.now()/1e3)+e}function dL(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ul=()=>typeof window<"u"&&typeof document<"u",Wd={tested:!1,writable:!1},Lk=()=>{if(!ul())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wd.tested)return Wd.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Wd.tested=!0,Wd.writable=!0}catch{Wd.tested=!0,Wd.writable=!1}return Wd.writable};function fL(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((a,s)=>{t[s]=a}),t}const Mk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ai(async()=>{const{default:a}=await Promise.resolve().then(()=>om);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},hL=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Oh=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Yd=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Yu=async(e,t)=>{await e.removeItem(t)};class Zx{constructor(){this.promise=new Zx.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Zx.promiseConstructor=Promise;function rb(e){const t=e.split(".");if(t.length!==3)throw new A2("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!Z7.test(t[a]))throw new A2("JWT not in base64url format");return{header:JSON.parse(kS(t[0])),payload:JSON.parse(kS(t[1])),signature:oL(t[2]),raw:{header:t[0],payload:t[1]}}}async function mL(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function pL(e,t){return new Promise((a,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){a(l);return}}catch(l){if(!t(i,l)){s(l);return}}})()})}function gL(e){return("0"+e.toString(16)).substr(-2)}function xL(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*a));return s}return crypto.getRandomValues(t),Array.from(t,gL).join("")}async function vL(e){const r=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(a);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function yL(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await vL(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wh(e,t,r=!1){const a=xL();let s=a;r&&(s+="/PASSWORD_RECOVERY"),await Oh(e,`${t}-code-verifier`,s);const i=await yL(a);return[i,a===i?"plain":"s256"]}const bL=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function wL(e){const t=e.headers.get(N2);if(!t||!t.match(bL))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function jL(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function _L(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const NL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function jh(e){if(!NL.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ab(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ES(e){return JSON.parse(JSON.stringify(e))}var SL=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r};const Zd=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),AL=[502,503,504];async function PS(e){var t;if(!hL(e))throw new S2(Zd(e),0);if(AL.includes(e.status))throw new S2(Zd(e),e.status);let r;try{r=await e.json()}catch(i){throw new Dk(Zd(i),i)}let a;const s=wL(e);if(s&&s.getTime()>=Ok["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new SS(Zd(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new rd}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new SS(Zd(r),e.status,r.weak_password.reasons);throw new Q7(Zd(r),e.status||500,a)}const CL=(e,t,r,a)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(a),Object.assign(Object.assign({},s),r))};async function zr(e,t,r,a){var s;const i=Object.assign({},a==null?void 0:a.headers);i[N2]||(i[N2]=Ok["2024-01-01"].name),a!=null&&a.jwt&&(i.Authorization=`Bearer ${a.jwt}`);const l=(s=a==null?void 0:a.query)!==null&&s!==void 0?s:{};a!=null&&a.redirectTo&&(l.redirect_to=a.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await kL(e,t,r+u,{headers:i,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(d):{data:Object.assign({},d),error:null}}async function kL(e,t,r,a,s,i){const l=CL(t,a,s,i);let u;try{u=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new S2(Zd(d),0)}if(u.ok||await PS(u),a!=null&&a.noResolveJson)return u;try{return await u.json()}catch(d){await PS(d)}}function Bc(e){var t;let r=null;OL(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=uL(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:a},error:null}}function TS(e){const t=Bc(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function nd(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function EL(e){return{data:e,error:null}}function PL(e){const{action_link:t,email_otp:r,hashed_token:a,redirect_to:s,verification_type:i}=e,l=SL(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:a,redirect_to:s,verification_type:i},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function TL(e){return e}function OL(e){return e.access_token&&e.refresh_token&&e.expires_in}const nb=["global","local","others"];var DL=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r};class RL{constructor({url:t="",headers:r={},fetch:a}){this.url=t,this.headers=r,this.fetch=Mk(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=nb[0]){if(nb.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${nb.join(", ")}`);try{return await zr(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(Dr(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,r={}){try{return await zr(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:nd})}catch(a){if(Dr(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:r}=t,a=DL(t,["options"]),s=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(s.new_email=a==null?void 0:a.newEmail,delete s.newEmail),await zr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:PL,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Dr(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await zr(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:nd})}catch(r){if(Dr(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,a,s,i,l,u,d;try{const f={nextPage:null,lastPage:0,total:0},m=await zr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:TL});if(m.error)throw m.error;const g=await m.json(),v=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(j=>{const b=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(j.split(";")[1].split("=")[1]);f[`${A}Page`]=b}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(Dr(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){jh(t);try{return await zr(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:nd})}catch(r){if(Dr(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){jh(t);try{return await zr(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:nd})}catch(a){if(Dr(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,r=!1){jh(t);try{return await zr(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:nd})}catch(a){if(Dr(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){jh(t.userId);try{const{data:r,error:a}=await zr(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:a}}catch(r){if(Dr(r))return{data:null,error:r};throw r}}async _deleteFactor(t){jh(t.userId),jh(t.id);try{return{data:await zr(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Dr(r))return{data:null,error:r};throw r}}}function OS(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function LL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const _h={debug:!!(globalThis&&Lk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ik extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class ML extends Ik{}async function IL(e,t,r){_h.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),_h.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async s=>{if(s){_h.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{_h.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw _h.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ML(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(_h.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}LL();const qL={url:W7,storageKey:Y7,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:X7,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function DS(e,t,r){return await r()}const Nh={};class Ep{constructor(t){var r,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ep.nextInstanceID,Ep.nextInstanceID+=1,this.instanceID>0&&ul()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},qL),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new RL({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Mk(s.fetch),this.lock=s.lock||DS,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ul()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=IL:this.lock=DS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Lk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=OS(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=OS(this.memoryStorage)),ul()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Nh[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Nh[this.storageKey]=Object.assign(Object.assign({},Nh[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Nh[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Nh[this.storageKey]=Object.assign(Object.assign({},Nh[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Tk}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=fL(window.location.href);let a="none";if(this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce"),ul()&&this.detectSessionInUrl&&a!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,a);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),rL(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Dr(r)?{error:r}:{error:new Dk("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,a,s;try{const i=await zr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Bc}),{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(i){if(Dr(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,a,s;try{let i;if("email"in t){const{email:m,password:g,options:v}=t;let x=null,j=null;this.flowType==="pkce"&&([x,j]=await wh(this.storage,this.storageKey)),i=await zr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:m,password:g,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:x,code_challenge_method:j},xform:Bc})}else if("phone"in t){const{phone:m,password:g,options:v}=t;i=await zr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:g,data:(a=v==null?void 0:v.data)!==null&&a!==void 0?a:{},channel:(s=v==null?void 0:v.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Bc})}else throw new p0("You must provide either an email or phone number and a password");const{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(i){if(Dr(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:u}=t;r=await zr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:TS})}else if("phone"in t){const{phone:i,password:l,options:u}=t;r=await zr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:TS})}else throw new p0("You must provide either an email or phone number and a password");const{data:a,error:s}=r;return s?{data:{user:null,session:null},error:s}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new m0}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:s})}catch(r){if(Dr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,a,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,a,s,i,l,u,d,f,m,g,v,x;let j,b;if("message"in t)j=t.message,b=t.signature;else{const{chain:A,wallet:S,statement:T,options:E}=t;let D;if(ul())if(typeof S=="object")D=S;else{const F=window;if("solana"in F&&typeof F.solana=="object"&&("signIn"in F.solana&&typeof F.solana.signIn=="function"||"signMessage"in F.solana&&typeof F.solana.signMessage=="function"))D=F.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=S}const L=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in D&&D.signIn){const F=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E==null?void 0:E.signInWithSolana),{version:"1",domain:L.host,uri:L.href}),T?{statement:T}:null));let z;if(Array.isArray(F)&&F[0]&&typeof F[0]=="object")z=F[0];else if(F&&typeof F=="object"&&"signedMessage"in F&&"signature"in F)z=F;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)j=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),b=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${L.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${L.href}`,`Issued At: ${(s=(a=E==null?void 0:E.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=E==null?void 0:E.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((l=E==null?void 0:E.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((u=E==null?void 0:E.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((d=E==null?void 0:E.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((f=E==null?void 0:E.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((g=(m=E==null?void 0:E.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||g===void 0)&&g.length?["Resources",...E.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const F=await D.signMessage(new TextEncoder().encode(j),"utf8");if(!F||!(F instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=F}}try{const{data:A,error:S}=await zr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:cL(b)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Bc});if(S)throw S;return!A||!A.session||!A.user?{data:{user:null,session:null},error:new m0}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:Object.assign({},A),error:S})}catch(A){if(Dr(A))return{data:{user:null,session:null},error:A};throw A}}async _exchangeCodeForSession(t){const r=await Yd(this.storage,`${this.storageKey}-code-verifier`),[a,s]=(r??"").split("/");try{const{data:i,error:l}=await zr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:Bc});if(await Yu(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new m0}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(Dr(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:a,token:s,access_token:i,nonce:l}=t,u=await zr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Bc}),{data:d,error:f}=u;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new m0}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:f})}catch(r){if(Dr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,a,s,i,l;try{if("email"in t){const{email:u,options:d}=t;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await wh(this.storage,this.storageKey));const{error:g}=await zr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:m},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in t){const{phone:u,options:d}=t,{data:f,error:m}=await zr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m}}throw new p0("You must provide either an email or phone number.")}catch(u){if(Dr(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var r,a;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:l,error:u}=await zr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Bc});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,f=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(s){if(Dr(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,a,s;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await wh(this.storage,this.storageKey)),await zr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:EL})}catch(i){if(Dr(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;if(a)throw a;if(!r)throw new rd;const{error:s}=await zr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Dr(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:a,type:s,options:i}=t,{error:l}=await zr(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:a,type:s,options:i}=t,{data:l,error:u}=await zr(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new p0("You must provide either an email or phone number and a type")}catch(r){if(Dr(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Yd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<eb:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.userStorage){const l=await Yd(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=ab()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,f,m)=>(!l&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,f,m))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await zr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:nd}):await this._useSession(async r=>{var a,s,i;const{data:l,error:u}=r;if(u)throw u;return!(!((a=l.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rd}:await zr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:nd})})}catch(r){if(Dr(r))return tL(r)&&(await this._removeSession(),await Yu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async a=>{const{data:s,error:i}=a;if(i)throw i;if(!s.session)throw new rd;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await wh(this.storage,this.storageKey));const{data:f,error:m}=await zr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:nd});if(m)throw m;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(a){if(Dr(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new rd;const r=Date.now()/1e3;let a=r,s=!0,i=null;const{payload:l}=rb(t.access_token);if(l.exp&&(a=l.exp,s=a<=r),s){const{session:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Dr(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var a;if(!t){const{data:l,error:u}=r;if(u)throw u;t=(a=l.session)!==null&&a!==void 0?a:void 0}if(!(t!=null&&t.refresh_token))throw new rd;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Dr(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ul())throw new g0("No browser detected.");if(t.error||t.error_description||t.error_code)throw new g0(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new NS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new g0("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new NS("No code detected.");const{data:T,error:E}=await this._exchangeCodeForSession(t.code);if(E)throw E;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:u,expires_at:d,token_type:f}=t;if(!i||!u||!l||!f)throw new g0("No session defined in URL");const m=Math.round(Date.now()/1e3),g=parseInt(u);let v=m+g;d&&(v=parseInt(d));const x=v-m;x*1e3<=Th&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${g}s`);const j=v-g;m-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,v,m):m-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,v,m);const{data:b,error:A}=await this._getUser(i);if(A)throw A;const S={provider_token:a,provider_refresh_token:s,access_token:i,expires_in:g,expires_at:v,refresh_token:l,token_type:f,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:t.type},error:null}}catch(a){if(Dr(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Yd(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:s,error:i}=r;if(i)return{error:i};const l=(a=s.session)===null||a===void 0?void 0:a.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(eL(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await Yu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=dL(),a={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async r=>{var a,s;try{const{data:{session:i},error:l}=r;if(l)throw l;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let a=null,s=null;this.flowType==="pkce"&&([a,s]=await wh(this.storage,this.storageKey,!0));try{return await zr(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Dr(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Dr(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:a,error:s}=await this._useSession(async i=>{var l,u,d,f,m;const{data:g,error:v}=i;if(v)throw v;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await zr(this.fetch,"GET",x,{headers:this.headers,jwt:(m=(f=g.session)===null||f===void 0?void 0:f.access_token)!==null&&m!==void 0?m:void 0})});if(s)throw s;return ul()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:t.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(Dr(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var a,s;const{data:i,error:l}=r;if(l)throw l;return await zr(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Dr(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await pL(async s=>(s>0&&await mL(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await zr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Bc})),(s,i)=>{const l=200*Math.pow(2,s);return i&&tb(i)&&Date.now()+l-a<Th})}catch(a){if(this._debug(r,"error",a),Dr(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",a),ul()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t,r;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const s=await Yd(this.storage,this.storageKey);if(s&&this.userStorage){let l=await Yd(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Oh(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:ab()}else if(s&&!s.user&&!s.user){const l=await Yd(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Yu(this.storage,this.storageKey+"-user"),await Oh(this.storage,this.storageKey,s)):s.user=ab()}if(this._debug(a,"session from storage",s),!this._isValidSession(s)){this._debug(a,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<eb;if(this._debug(a,`session has${i?"":" not"} expired with margin of ${eb}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),tb(l)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(a,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(a,"error",s),console.error(s);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var r,a;if(!t)throw new rd;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Zx;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new rd;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={session:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(s,"error",i),Dr(i)){const l={session:null,error:i};return tb(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,a=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(l),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),a=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&r.user&&await Oh(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=ES(s);await Oh(this.storage,this.storageKey,i)}else{const s=ES(r);await Oh(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Yu(this.storage,this.storageKey),await Yu(this.storage,this.storageKey+"-code-verifier"),await Yu(this.storage,this.storageKey+"-user"),this.userStorage&&await Yu(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ul()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Th);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((a.expires_at*1e3-t)/Th);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Th}ms, refresh threshold is ${_2} ticks`),s<=_2&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Ik)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ul()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,a){const s=[`provider=${encodeURIComponent(r)}`];if(a!=null&&a.redirectTo&&s.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&s.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[i,l]=await wh(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(a!=null&&a.queryParams){const i=new URLSearchParams(a.queryParams);s.push(i.toString())}return a!=null&&a.skipBrowserRedirect&&s.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var a;const{data:s,error:i}=r;return i?{data:null,error:i}:await zr(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=s==null?void 0:s.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(Dr(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var a,s;const{data:i,error:l}=r;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:d,error:f}=await zr(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});return f?{data:null,error:f}:(t.factorType==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(Dr(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:l,error:u}=await zr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(a=s==null?void 0:s.session)===null||a===void 0?void 0:a.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(r){if(Dr(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:s,error:i}=r;return i?{data:null,error:i}:await zr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(a=s==null?void 0:s.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(Dr(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const a=(t==null?void 0:t.factors)||[],s=a.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=a.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:a,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,a;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=rb(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((a=(r=s.user.factors)===null||r===void 0?void 0:r.filter(g=>g.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(d="aal2");const m=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:m},error:null}}))}async fetchJwk(t,r={keys:[]}){let a=r.keys.find(u=>u.kid===t);if(a)return a;const s=Date.now();if(a=this.jwks.keys.find(u=>u.kid===t),a&&this.jwks_cached_at+J7>s)return a;const{data:i,error:l}=await zr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,a=i.keys.find(u=>u.kid===t),!a)?null:a}async getClaims(t,r={}){try{let a=t;if(!a){const{data:x,error:j}=await this.getSession();if(j||!x.session)return{data:null,error:j};a=x.session.access_token}const{header:s,payload:i,signature:l,raw:{header:u,payload:d}}=rb(a);r!=null&&r.allowExpired||jL(i.exp);const f=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!f){const{error:x}=await this.getUser(a);if(x)throw x;return{data:{claims:i,header:s,signature:l},error:null}}const m=_L(s.alg),g=await crypto.subtle.importKey("jwk",f,m,!0,["verify"]);if(!await crypto.subtle.verify(m,g,l,lL(`${u}.${d}`)))throw new A2("Invalid JWT signature");return{data:{claims:i,header:s,signature:l},error:null}}catch(a){if(Dr(a))return{data:null,error:a};throw a}}}Ep.nextInstanceID=0;const FL=Ep;class BL extends FL{constructor(t){super(t)}}var UL=function(e,t,r,a){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(m){try{f(a.next(m))}catch(g){l(g)}}function d(m){try{f(a.throw(m))}catch(g){l(g)}}function f(m){m.done?i(m.value):s(m.value).then(u,d)}f((a=a.apply(e,t||[])).next())})};class $L{constructor(t,r,a){var s,i,l;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const u=G7(t),d=new URL(u);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:q7,realtime:B7,auth:Object.assign(Object.assign({},F7),{storageKey:f}),global:I7},g=K7(a??{},m);this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=g.global.headers)!==null&&i!==void 0?i:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(v,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,g.global.fetch),this.fetch=V7(r,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new i7(new URL("rest/v1",d).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new R7(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new WR(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},a={}){return this.rest.rpc(t,r,a)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return UL(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(r=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:s,storageKey:i,flowType:l,lock:u,debug:d},f,m){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new BL({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),f),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:s,flowType:l,lock:u,debug:d,fetch:m,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new w7(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,a)=>{this._handleTokenChanged(r,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(t,r,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const zL=(e,t,r)=>new $L(e,t,r);function VL(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const e=process.version.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}VL()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const HL={development:{siteUrl:"http://localhost:5173",emailRedirectUrl:"http://localhost:5173/complete-registration",passwordResetUrl:"http://localhost:5173/reset-password",supabaseUrl:"https://dlesebbmlrewsbmqvuza.supabase.co",supabaseAnonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsZXNlYmJtbHJld3NibXF2dXphIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1NTMxMTcsImV4cCI6MjA3MDEyOTExN30.zFTVSgL5QpVqEDc-nQuKbaG_3egHZEm-V17UvkOpFCQ"},production:{siteUrl:"https://trackmystartup.com",emailRedirectUrl:"https://trackmystartup.com/complete-registration",passwordResetUrl:"https://trackmystartup.com/reset-password",supabaseUrl:"https://dlesebbmlrewsbmqvuza.supabase.co",supabaseAnonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsZXNlYmJtbHJld3NibXF2dXphIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1NTMxMTcsImV4cCI6MjA3MDEyOTExN30.zFTVSgL5QpVqEDc-nQuKbaG_3egHZEm-V17UvkOpFCQ"}},GL=()=>{if(typeof window<"u"){const e=window.location.hostname;return e==="localhost"||e==="127.0.0.1"?"development":"production"}return"development"},qk=()=>{const e=GL();return HL[e]},ix=qk();console.log("Current environment config:",ix);const KL={getItem:e=>{try{return localStorage.getItem(e)}catch(t){return console.warn("Error reading from localStorage:",t),null}},setItem:(e,t)=>{try{localStorage.setItem(e,t)}catch(r){console.warn("Error writing to localStorage:",r)}},removeItem:e=>{try{localStorage.removeItem(e)}catch(t){console.warn("Error removing from localStorage:",t)}}},G=zL(ix.supabaseUrl,ix.supabaseAnonKey,{auth:{persistSession:!0,storageKey:"supabase-auth",autoRefreshToken:!1,detectSessionInUrl:!0,flowType:"pkce",storage:KL,debug:!1},global:{headers:{"X-Client-Info":"supabase-js/2.38.0"}},db:{schema:"public"}});console.log("Supabase client initialized successfully");console.log("Email redirect URL:",ix.emailRedirectUrl);function WL(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="INV-";for(let r=0;r<6;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function YL(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="IA-";for(let r=0;r<6;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function Lr(e,t="USD",r={}){const{notation:a="standard",minimumFractionDigits:s,maximumFractionDigits:i}=r,l=f=>({USD:"en-US",EUR:"en-EU",GBP:"en-GB",INR:"en-IN",CAD:"en-CA",AUD:"en-AU",JPY:"ja-JP",CHF:"de-CH",SGD:"en-SG",CNY:"zh-CN",BRL:"pt-BR",MXN:"es-MX",KRW:"ko-KR",HKD:"en-HK",NZD:"en-NZ",SEK:"sv-SE",NOK:"nb-NO",DKK:"da-DK",PLN:"pl-PL",CZK:"cs-CZ",HUF:"hu-HU",RUB:"ru-RU",TRY:"tr-TR",ZAR:"en-ZA",ILS:"he-IL",AED:"ar-AE",SAR:"ar-SA",QAR:"ar-QA",KWD:"ar-KW",BHD:"ar-BH",OMR:"ar-OM",JOD:"ar-JO",LBP:"ar-LB",EGP:"ar-EG",MAD:"ar-MA",TND:"ar-TN",DZD:"ar-DZ",LYD:"ar-LY",SDG:"ar-SD",ETB:"am-ET",KES:"sw-KE",UGX:"sw-UG",TZS:"sw-TZ",RWF:"rw-RW",BIF:"rn-BI",DJF:"so-DJ",SOS:"so-SO",ERN:"ti-ER",SSP:"en-SS",CDF:"fr-CD",AOA:"pt-AO",BWP:"en-BW",LSL:"st-LS",SZL:"en-SZ",MZN:"pt-MZ",MWK:"ny-MW",ZMW:"en-ZM",ZWL:"en-ZW",NAD:"en-NA",MGA:"mg-MG",MUR:"en-MU",SCR:"en-SC",KMF:"ar-KM",MVR:"dv-MV",LKR:"si-LK",BDT:"bn-BD",NPR:"ne-NP",BTN:"dz-BT",PKR:"ur-PK",AFN:"fa-AF",IRR:"fa-IR",IQD:"ar-IQ",SYP:"ar-SY",YER:"ar-YE",AMD:"hy-AM",AZN:"az-AZ",GEL:"ka-GE",KZT:"kk-KZ",KGS:"ky-KG",TJS:"tg-TJ",TMT:"tk-TM",UZS:"uz-UZ",MNT:"mn-MN",LAK:"lo-LA",KHR:"km-KH",VND:"vi-VN",THB:"th-TH",MYR:"ms-MY",IDR:"id-ID",PHP:"en-PH",MMK:"my-MM",BND:"ms-BN",FJD:"en-FJ",PGK:"en-PG",SBD:"en-SB",VUV:"bi-VU",WST:"sm-WS",TOP:"to-TO",XPF:"fr-PF",ISK:"is-IS"})[f]||"en-US",u={style:"currency",currency:t,notation:a};s!==void 0&&(u.minimumFractionDigits=s),i!==void 0&&(u.maximumFractionDigits=i);const d=l(t);return new Intl.NumberFormat(d,u).format(e)}function ld(e,t="USD"){return Lr(e,t,{notation:"compact"})}function nf(e){return{"United States":"USD",India:"INR",Bhutan:"BTN",Armenia:"AMD",Belarus:"BYN",Georgia:"GEL",Israel:"ILS",Jordan:"JOD",Nigeria:"NGN",Philippines:"PHP",Russia:"RUB",Singapore:"SGD","Sri Lanka":"LKR","United Kingdom":"GBP",Austria:"EUR",Germany:"EUR","Hong Kong":"HKD",Serbia:"RSD",Brazil:"BRL",Greece:"EUR",Vietnam:"VND",Myanmar:"MMK",Azerbaijan:"AZN",Finland:"EUR",Netherlands:"EUR",Monaco:"EUR",Pakistan:"PKR"}[e]||"USD"}function XL(e){return{US:"USD",IN:"INR",BT:"BTN",AM:"AMD",BY:"BYN",GE:"GEL",IL:"ILS",JO:"JOD",NG:"NGN",PH:"PHP",RU:"RUB",SG:"SGD",LK:"LKR",GB:"GBP",AT:"EUR",DE:"EUR",HK:"HKD",RS:"RSD",BR:"BRL",GR:"EUR",VN:"VND",MM:"MMK",AZ:"AZN",FI:"EUR",NL:"EUR",MC:"EUR",PK:"PKR"}[e]||"USD"}function Fk(e){return{AT:{caTitle:"Tax Advisor",csTitle:"Management"},IN:{caTitle:"Chartered Accountant",csTitle:"Company Secretary"},US:{caTitle:"CPA",csTitle:"Corporate Secretary"},GB:{caTitle:"Chartered Accountant",csTitle:"Company Secretary"},DE:{caTitle:"Tax Advisor",csTitle:"Management"},SG:{caTitle:"Chartered Accountant",csTitle:"Company Secretary"},HK:{caTitle:"CPA",csTitle:"Company Secretary"},NL:{caTitle:"Tax Advisor",csTitle:"Management"},FI:{caTitle:"Tax Advisor",csTitle:"Management"},GR:{caTitle:"Tax Advisor",csTitle:"Management"},BR:{caTitle:"CPA",csTitle:"Corporate Secretary"},VN:{caTitle:"CPA",csTitle:"Corporate Secretary"},MM:{caTitle:"CPA",csTitle:"Corporate Secretary"},AZ:{caTitle:"Tax Advisor",csTitle:"Management"},RS:{caTitle:"Tax Advisor",csTitle:"Management"},MC:{caTitle:"Tax Advisor",csTitle:"Management"},PK:{caTitle:"Chartered Accountant",csTitle:"Company Secretary"},PH:{caTitle:"CPA",csTitle:"Corporate Secretary"},NG:{caTitle:"Chartered Accountant",csTitle:"Company Secretary"},JO:{caTitle:"Tax Advisor",csTitle:"Management"},IL:{caTitle:"CPA",csTitle:"Corporate Secretary"},GE:{caTitle:"Tax Advisor",csTitle:"Management"},BY:{caTitle:"Tax Advisor",csTitle:"Management"},AM:{caTitle:"Tax Advisor",csTitle:"Management"},BT:{caTitle:"Chartered Accountant",csTitle:"Company Secretary"},LK:{caTitle:"Chartered Accountant",csTitle:"Company Secretary"},RU:{caTitle:"Tax Advisor",csTitle:"Management"},CA:{caTitle:"CPA",csTitle:"Corporate Secretary"},AU:{caTitle:"CPA",csTitle:"Company Secretary"},FR:{caTitle:"Expert-Comptable",csTitle:"Secrtaire Gnral"},JP:{caTitle:"CPA",csTitle:"Corporate Secretary"},CN:{caTitle:"CPA",csTitle:"Corporate Secretary"},MX:{caTitle:"CPA",csTitle:"Corporate Secretary"},ZA:{caTitle:"Chartered Accountant",csTitle:"Company Secretary"},KE:{caTitle:"CPA",csTitle:"Corporate Secretary"},EG:{caTitle:"CPA",csTitle:"Corporate Secretary"},AE:{caTitle:"CPA",csTitle:"Corporate Secretary"},SA:{caTitle:"CPA",csTitle:"Corporate Secretary"},IT:{caTitle:"Dottore Commercialista",csTitle:"Segretario Generale"},ES:{caTitle:"CPA",csTitle:"Secretario General"},PT:{caTitle:"CPA",csTitle:"Secretrio Geral"},BE:{caTitle:"Expert-Comptable",csTitle:"Secrtaire Gnral"},CH:{caTitle:"Expert-Comptable",csTitle:"Secrtaire Gnral"},SE:{caTitle:"CPA",csTitle:"Corporate Secretary"},NO:{caTitle:"CPA",csTitle:"Corporate Secretary"},DK:{caTitle:"CPA",csTitle:"Corporate Secretary"},IE:{caTitle:"CPA",csTitle:"Corporate Secretary"},NZ:{caTitle:"CPA",csTitle:"Company Secretary"},KR:{caTitle:"CPA",csTitle:"Corporate Secretary"},TH:{caTitle:"CPA",csTitle:"Corporate Secretary"},MY:{caTitle:"CPA",csTitle:"Company Secretary"},ID:{caTitle:"CPA",csTitle:"Corporate Secretary"},BD:{caTitle:"Chartered Accountant",csTitle:"Company Secretary"},NP:{caTitle:"Chartered Accountant",csTitle:"Company Secretary"}}[e]||{caTitle:"CA",csTitle:"CS"}}const br={supabase:G,async testAuthConnection(){try{console.log("Testing basic Supabase auth connection...");const{data:e,error:t}=await G.auth.getUser();return t?(console.error("Auth test failed:",t),{success:!1,error:t.message}):(console.log("Auth test successful"),{success:!0})}catch(e){return console.error("Auth test error:",e),{success:!1,error:"Auth connection failed"}}},async sendPasswordResetEmail(e){try{console.log("Sending password reset email to:",e);const r=qk().passwordResetUrl||`${window.location.origin}/reset-password`;console.log("Using password reset redirect URL:",r);const{error:a}=await G.auth.resetPasswordForEmail(e,{redirectTo:r});return a?(console.error("Password reset error:",a),{success:!1,error:a.message}):(console.log("Password reset email sent successfully"),{success:!0})}catch(t){return console.error("Password reset error:",t),{success:!1,error:"Failed to send password reset email. Please try again."}}},async resetPassword(e){try{console.log("Resetting password...");const{data:{user:t},error:r}=await G.auth.getUser();if(r||!t){console.error("User not authenticated for password reset:",r),console.log("Trying alternative authentication check...");const{data:{session:s},error:i}=await G.auth.getSession();if(i||!(s!=null&&s.user))return console.error("No valid session found:",i),{success:!1,error:"Invalid session. Please request a new password reset link."};console.log("Session found for password reset:",s.user.email)}else console.log("User authenticated for password reset:",t.email);const{error:a}=await G.auth.updateUser({password:e});return a?(console.error("Password update error:",a),{success:!1,error:a.message}):(console.log("Password updated successfully"),{success:!0})}catch(t){return console.error("Password update error:",t),{success:!1,error:"Failed to update password. Please try again."}}},async isProfileComplete(e){try{const{data:t,error:r}=await G.from("users").select("government_id, ca_license, verification_documents").eq("id",e),a=t&&t.length>0?t[0]:null;return r||!a?!1:!!(a.government_id||a.ca_license||a.verification_documents&&a.verification_documents.length>0)}catch(t){return console.error("Error checking profile completion:",t),!1}},async getCurrentUser(){try{const{data:{user:e},error:t}=await G.auth.getUser();if(t||!e)return console.log("No authenticated user found in Supabase auth"),null;console.log("Found user in Supabase auth:",e.email);const r=G.from("users").select("*").eq("id",e.id).single(),a=new Promise((d,f)=>{setTimeout(()=>f(new Error("Profile check timeout after 5 seconds")),5e3)}),{data:s,error:i}=await Promise.race([r,a]);if(i||!s)return console.log("No profile found for user:",e.email),null;console.log("Found user profile:",s.email),console.log("Profile data:",s),console.log("Profile role:",s.role),console.log("Profile role type:",typeof s.role),console.log("Startup name from profile:",s.startup_name),console.log("Profile keys:",Object.keys(s)),console.log("Profile startup_name type:",typeof s.startup_name);const l=await this.isProfileComplete(e.id);console.log("Profile completion status:",l);const u={id:s.id,email:s.email,name:s.name,role:s.role,startup_name:s.startup_name,investor_code:s.investor_code,investment_advisor_code:s.investment_advisor_code,investment_advisor_code_entered:s.investment_advisor_code_entered,ca_code:s.ca_code,cs_code:s.cs_code,registration_date:s.registration_date,phone:s.phone,address:s.address,city:s.city,state:s.state,country:s.country,company:s.company,company_type:s.company_type,government_id:s.government_id,ca_license:s.ca_license,cs_license:s.cs_license,verification_documents:s.verification_documents,profile_photo_url:s.profile_photo_url,logo_url:s.logo_url,proof_of_business_url:s.proof_of_business_url,financial_advisor_license_url:s.financial_advisor_license_url,is_profile_complete:l};return console.log(" Returning user data:",u),console.log(" User role in return data:",u.role),u}catch(e){return console.error("Error getting current user:",e),null}},async signUp(e){var t,r;try{if(console.log("=== SIGNUP START ==="),console.log("Signing up user:",e.email),(await this.checkEmailExists(e.email)).exists)return console.log("Email already exists, preventing signup:",e.email),{user:null,error:"User with this email already exists. Please sign in instead.",confirmationRequired:!1};console.log("Creating Supabase auth user...");const{data:s,error:i}=await G.auth.signUp({email:e.email,password:e.password,options:{data:{name:e.name,role:e.role,startupName:e.startupName,fileUrls:e.fileUrls||{}}}});if(console.log("Auth response received:",{authData:!!s,authError:!!i}),i)return console.error("Auth error:",i),i.message.includes("already registered")||i.message.includes("already exists")||i.message.includes("User already registered")?{user:null,error:"User with this email already exists. Please sign in instead.",confirmationRequired:!1}:{user:null,error:i.message,confirmationRequired:!1};if(console.log("Auth user created successfully, session:",!!s.session),console.log("=== SIGNUP END ==="),s.user&&!s.user.email_confirmed_at)return console.log("Email confirmation required, user not fully authenticated"),{user:null,error:null,confirmationRequired:!0};if(s.user&&s.user.email_confirmed_at){console.log("Creating user profile in database...");const l=e.role==="Investor"?WL():null,u=e.role==="Investment Advisor"?YL():null,{data:d,error:f}=await G.from("users").insert({id:s.user.id,email:s.user.email,name:e.name,role:e.role,startup_name:e.role==="Startup"?e.startupName:null,investor_code:l,investment_advisor_code:u,investment_advisor_code_entered:e.investmentAdvisorCode||null,ca_code:null,registration_date:new Date().toISOString().split("T")[0],government_id:((t=e.fileUrls)==null?void 0:t.governmentId)||null,ca_license:((r=e.fileUrls)==null?void 0:r.roleSpecific)||null,verification_documents:(()=>{var g,v;const m=[];return(g=e.fileUrls)!=null&&g.governmentId&&m.push(e.fileUrls.governmentId),(v=e.fileUrls)!=null&&v.roleSpecific&&m.push(e.fileUrls.roleSpecific),m.length>0?m:null})(),phone:null,address:null,city:null,state:null,country:null,company:null,profile_photo_url:null}).select().single();if(f)return console.error("Profile creation error:",f),{user:null,error:"Failed to create user profile",confirmationRequired:!1};if(console.log("User profile created successfully"),e.role==="Startup"){console.log("Creating startup and founders...");try{let m=null;const{data:g}=await G.from("startups").select("id").eq("name",e.startupName||`${e.name}'s Startup`).single();if(g?m=g:m=(await G.from("startups").insert({name:e.startupName||`${e.name}'s Startup`,investment_type:"Seed",investment_value:0,equity_allocation:0,current_valuation:0,compliance_status:"Pending",sector:"Technology",total_funding:0,total_revenue:0,registration_date:new Date().toISOString().split("T")[0],user_id:s.user.id}).select().single()).data,m&&e.founders&&e.founders.length>0){const v=e.founders.map(j=>({startup_id:m.id,name:j.name,email:j.email})),{error:x}=await G.from("founders").insert(v);x&&console.error("Error adding founders:",x)}}catch(m){console.error("Error creating startup:",m)}}return{user:{id:d.id,email:d.email,name:d.name,role:d.role,startup_name:d.startup_name,investor_code:d.investor_code,ca_code:d.ca_code,cs_code:d.cs_code,registration_date:d.registration_date,phone:d.phone,address:d.address,city:d.city,state:d.state,country:d.country,company:d.company,government_id:d.government_id,ca_license:d.ca_license,verification_documents:d.verification_documents,profile_photo_url:d.profile_photo_url},error:null,confirmationRequired:!1}}return{user:null,error:null,confirmationRequired:!0}}catch(a){return console.error("Error in signUp:",a),{user:null,error:"An unexpected error occurred",confirmationRequired:!1}}},async signInMinimal(e){var t,r;try{console.log("=== MINIMAL SIGNIN START ==="),console.log("Signing in user:",e.email);const{data:a,error:s}=await G.auth.signInWithPassword({email:e.email,password:e.password});return console.log("Minimal auth call completed:",{authData:!!a,error:!!s}),s?(console.error("Sign in error:",s),{user:null,error:s.message}):a.user?(console.log("Minimal auth successful for:",a.user.email),console.log("=== MINIMAL SIGNIN END ==="),{user:{id:a.user.id,email:a.user.email,name:((t=a.user.user_metadata)==null?void 0:t.name)||"Unknown",role:((r=a.user.user_metadata)==null?void 0:r.role)||"Investor",registration_date:new Date().toISOString().split("T")[0]},error:null}):{user:null,error:"No user found"}}catch(a){return console.error("Error in minimal sign in:",a),{user:null,error:"An unexpected error occurred. Please try again."}}},async createProfile(e,t){try{const{data:{user:r},error:a}=await G.auth.getUser();if(a||!r)return{user:null,error:"User not authenticated"};const{data:s,error:i}=await G.from("users").insert({id:r.id,email:r.email,name:e,role:t,registration_date:new Date().toISOString().split("T")[0]}).select().single();return i?(console.error("Profile creation error:",i),{user:null,error:"Failed to create profile"}):{user:{id:s.id,email:s.email,name:s.name,role:s.role,registration_date:s.registration_date},error:null}}catch(r){return console.error("Error creating profile:",r),{user:null,error:"An unexpected error occurred"}}},async signOut(){try{const{error:e}=await G.auth.signOut();return{error:(e==null?void 0:e.message)||null}}catch(e){return console.error("Error signing out:",e),{error:"An unexpected error occurred"}}},async updateProfile(e,t){try{console.log(" Updating user profile:",{userId:e,updates:t});const{data:r,error:a}=await G.from("users").update(t).eq("id",e).select().single();return a?(console.error(" Profile update error:",a),{user:null,error:a.message}):(console.log(" Profile updated successfully:",r),{user:{id:r.id,email:r.email,name:r.name,role:r.role,registration_date:r.registration_date,phone:r.phone,address:r.address,city:r.city,state:r.state,country:r.country,company:r.company,company_type:r.company_type,profile_photo_url:r.profile_photo_url,government_id:r.government_id,ca_license:r.ca_license,cs_license:r.cs_license,investment_advisor_code:r.investment_advisor_code,investment_advisor_code_entered:r.investment_advisor_code_entered,logo_url:r.logo_url,financial_advisor_license_url:r.financial_advisor_license_url,ca_code:r.ca_code,cs_code:r.cs_code,startup_count:r.startup_count,verification_documents:r.verification_documents},error:null})}catch(r){return console.error("Error updating profile:",r),{user:null,error:"An unexpected error occurred"}}},onAuthStateChange(e){return G.auth.onAuthStateChange(e)},async handleEmailConfirmation(){try{console.log("=== EMAIL CONFIRMATION START ===");const{data:{user:e},error:t}=await G.auth.getUser();if(t||!e)return console.error("User not authenticated:",t),{user:null,error:"User not authenticated"};console.log("User authenticated:",e.email),console.log("User metadata:",e.user_metadata),console.log("Checking if profile exists in database...");const{data:r,error:a}=await G.from("users").select("*").eq("id",e.id).single();if(a){console.log("Profile not found, creating from metadata...");const s=e.user_metadata;if(s!=null&&s.name&&(s!=null&&s.role)){console.log("Creating profile with metadata:",{name:s.name,role:s.role});const{data:i,error:l}=await G.from("users").insert({id:e.id,email:e.email,name:s.name,role:s.role,startup_name:s.startupName||null,registration_date:new Date().toISOString().split("T")[0]}).select().single();if(l)return console.error("Error creating profile from metadata:",l),{user:null,error:"Failed to create profile from metadata"};console.log("Profile created successfully:",i);try{if(s.role==="Startup"&&s.startupName){const{data:u}=await G.from("startups").select("id").eq("name",s.startupName).single();u||await G.from("startups").insert({name:s.startupName,investment_type:"Seed",investment_value:0,equity_allocation:0,current_valuation:0,compliance_status:"Pending",sector:"Technology",total_funding:0,total_revenue:0,registration_date:new Date().toISOString().split("T")[0],user_id:e.id})}}catch(u){console.warn("Failed to ensure startup row during email confirmation (non-blocking):",u)}return console.log("=== EMAIL CONFIRMATION END ==="),{user:{id:i.id,email:i.email,name:i.name,role:i.role,registration_date:i.registration_date},error:null}}else return console.error("No metadata found:",s),{user:null,error:"No metadata found to create profile"}}return console.log("Profile found:",r),console.log("=== EMAIL CONFIRMATION END ==="),{user:{id:r.id,email:r.email,name:r.name,role:r.role,registration_date:r.registration_date},error:null}}catch(e){return console.error("Error handling email confirmation:",e),{user:null,error:"An unexpected error occurred"}}},async refreshSession(){try{const{data:{session:e},error:t}=await G.auth.refreshSession();if(t||!(e!=null&&e.user))return{user:null,error:(t==null?void 0:t.message)||"No session found"};const{data:r,error:a}=await G.from("users").select("*").eq("id",e.user.id).single();return a||!r?{user:null,error:"Profile not found"}:{user:{id:r.id,email:r.email,name:r.name,role:r.role,registration_date:r.registration_date},error:null}}catch(e){return console.error("Error refreshing session:",e),{user:null,error:"An unexpected error occurred"}}},async checkEmailExists(e){try{console.log("Checking if email exists:",e);const{data:t,error:r}=await G.from("users").select("id").eq("email",e);return r?(console.error("Error checking users table:",r),{exists:!1,error:"Unable to check email availability"}):t&&t.length>0?(console.log("Email already exists:",e),{exists:!0}):(console.log("Email is available:",e),{exists:!1})}catch(t){return console.error("Error checking email existence:",t),{exists:!1,error:"Unable to check email availability"}}}},ox={async getCurrentUser(){const{data:{user:e}}=await G.auth.getUser();if(!e)return null;const{data:t,error:r}=await G.from("users").select("*").eq("id",e.id).single();if(r)throw r;return t},async updateUser(e,t){console.log(" userService.updateUser called with:",{userId:e,updates:t});try{const{data:r,error:a}=await G.from("users").update(t).eq("id",e).select().single();if(a)throw console.error(" Supabase update error:",a),console.error("Error details:",{message:a.message,code:a.code,details:a.details,hint:a.hint}),a;return console.log(" User updated successfully:",r),r}catch(r){throw console.error(" userService.updateUser error:",r),r}},async getAllUsers(){console.log("Fetching all users...");try{const{data:e,error:t}=await G.from("users").select("*").order("created_at",{ascending:!1});return t?(console.error("Error fetching users:",t),[]):(console.log("Users fetched successfully:",(e==null?void 0:e.length)||0),e||[])}catch(e){return console.error("Error in getAllUsers:",e),[]}},async getStartupAdditionRequests(){console.log("Fetching startup addition requests...");try{const{data:e,error:t}=await G.from("startup_addition_requests").select("*").order("created_at",{ascending:!1});return t?(console.error("Error fetching startup addition requests:",t),[]):(console.log("Startup addition requests fetched successfully:",(e==null?void 0:e.length)||0),e||[])}catch(e){return console.error("Error in getStartupAdditionRequests:",e),[]}},async acceptInvestmentAdvisorRequest(e,t){console.log("Accepting investment advisor request for user:",e);try{const{data:r,error:a}=await G.from("users").update({advisor_accepted:!0,minimum_investment:t.minimumInvestment,maximum_investment:t.maximumInvestment,success_fee:t.successFee,success_fee_type:t.successFeeType,scouting_fee:t.scoutingFee,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw console.error("Error accepting investment advisor request:",a),a;return console.log("Investment advisor request accepted successfully:",r),r}catch(r){throw console.error("Error in acceptInvestmentAdvisorRequest:",r),r}},async acceptStartupAdvisorRequest(e,t,r){var a;console.log("Accepting startup advisor request for startup:",e,"user:",t),console.log(" Original financial matrix:",r);try{const s={minimum_investment:r.minimumInvestment?parseFloat(r.minimumInvestment):null,maximum_investment:r.maximumInvestment?parseFloat(r.maximumInvestment):null,success_fee:r.successFee?parseFloat(r.successFee):null,success_fee_type:r.successFeeType||null,scouting_fee:r.scoutingFee?parseFloat(r.scoutingFee):null};console.log(" Cleaned financial matrix:",s),console.log(" User ID to update:",t);const i={advisor_accepted:!0,advisor_accepted_date:new Date().toISOString(),minimum_investment:s.minimum_investment,maximum_investment:s.maximum_investment,success_fee:s.success_fee,success_fee_type:s.success_fee_type,scouting_fee:s.scouting_fee,updated_at:new Date().toISOString()};console.log(" Update data being sent:",i);const{data:l,error:u}=await G.from("users").update(i).eq("id",t).select().single();if(u)throw console.error("Error updating user advisor acceptance:",u),u;const{data:d,error:f}=await G.from("investment_advisor_relationships").upsert({investment_advisor_id:(a=(await G.auth.getUser()).data.user)==null?void 0:a.id,startup_id:e,relationship_type:"advisor_startup"},{onConflict:"investment_advisor_id,startup_id,relationship_type"}).select();return f&&console.error("Error creating advisor relationship:",f),console.log("Startup advisor request accepted successfully:",l),l}catch(s){throw console.error("Error in acceptStartupAdvisorRequest:",s),s}}},x0={async getAllStartups(){var e,t;console.log("Fetching startups for current user...");try{const{data:{user:r}}=await G.auth.getUser();if(!r)return console.log("No authenticated user found"),[];const{data:a,error:s}=await G.from("startups").select(`
          *,
          founders (*),
          startup_shares (*)
        `).eq("user_id",r.id).order("created_at",{ascending:!1});if(s)return console.error("Error fetching startups:",s),[];console.log(" DATABASE DEBUGGING - STARTUP DATA "),console.log("Startups fetched successfully:",(a==null?void 0:a.length)||0),console.log(" Raw startup data with shares:",a),console.log(" First startup founders:",(e=a==null?void 0:a[0])==null?void 0:e.founders),console.log(" First startup startup_shares:",(t=a==null?void 0:a[0])==null?void 0:t.startup_shares),console.log(" END DATABASE DEBUGGING ");const i=(a||[]).map(l=>{var u,d,f,m,g,v;return{id:l.id,name:l.name,investmentType:l.investment_type||"Unknown",investmentValue:Number(l.investment_value)||0,equityAllocation:Number(l.equity_allocation)||0,currentValuation:Number(l.current_valuation)||0,complianceStatus:l.compliance_status||"Pending",sector:l.sector||"Unknown",totalFunding:Number(l.total_funding)||0,totalRevenue:Number(l.total_revenue)||0,registrationDate:l.registration_date||"",currency:l.currency||"USD",founders:l.founders||[],esopReservedShares:((d=(u=l.startup_shares)==null?void 0:u[0])==null?void 0:d.esop_reserved_shares)||0,totalShares:((m=(f=l.startup_shares)==null?void 0:f[0])==null?void 0:m.total_shares)||0,pricePerShare:((v=(g=l.startup_shares)==null?void 0:g[0])==null?void 0:v.price_per_share)||0}});return console.log(" Mapped startup data with ESOP:",i),i}catch(r){return console.error("Error in getAllStartups:",r),[]}},async getAllStartupsForAdmin(){console.log("Fetching all startups for admin...");try{const{data:e,error:t}=await G.from("startups").select(`
          *,
          founders (*),
          startup_shares (*)
        `).order("created_at",{ascending:!1});return t?(console.error("Error fetching all startups:",t),console.error("Error details:",JSON.stringify(t,null,2)),[]):(console.log("All startups fetched successfully:",(e==null?void 0:e.length)||0),console.log("Raw startup data:",e),(e||[]).map(a=>{var s,i,l,u,d,f;return{id:a.id,name:a.name,investmentType:a.investment_type,investmentValue:a.investment_value,equityAllocation:a.equity_allocation,currentValuation:a.current_valuation,complianceStatus:a.compliance_status,sector:a.sector,totalFunding:a.total_funding,totalRevenue:a.total_revenue,registrationDate:a.registration_date,currency:a.currency||"USD",founders:a.founders||[],esopReservedShares:((i=(s=a.startup_shares)==null?void 0:s[0])==null?void 0:i.esop_reserved_shares)||0,totalShares:((u=(l=a.startup_shares)==null?void 0:l[0])==null?void 0:u.total_shares)||0,pricePerShare:((f=(d=a.startup_shares)==null?void 0:d[0])==null?void 0:f.price_per_share)||0}}))}catch(e){return console.error("Error in getAllStartupsForAdmin:",e),[]}},async getAllStartupsForInvestmentAdvisor(){console.log("Fetching all startups for Investment Advisor...");try{const{data:e,error:t}=await G.from("startups").select(`
          *,
          founders (*)
        `).order("created_at",{ascending:!1});return t?(console.error("Error fetching startups for Investment Advisor:",t),console.error("Error details:",JSON.stringify(t,null,2)),[]):(console.log("Startups fetched successfully for Investment Advisor:",(e==null?void 0:e.length)||0),console.log("Raw startup data:",e),(e||[]).map(a=>({id:a.id,name:a.name,user_id:a.user_id,investmentType:a.investment_type,investmentValue:a.investment_value,equityAllocation:a.equity_allocation,currentValuation:a.current_valuation,complianceStatus:a.compliance_status,sector:a.sector,totalFunding:a.total_funding,totalRevenue:a.total_revenue,registrationDate:a.registration_date,founders:a.founders||[]})))}catch(e){return console.error("Error in getAllStartupsForInvestmentAdvisor:",e),[]}},async getStartupsByNames(e){if(!e||e.length===0)return[];try{const{data:t,error:r}=await G.from("startups").select(`
          *,
          founders (*)
        `).in("name",e);return r?(console.error("Error fetching startups by names:",r),[]):(t||[]).map(s=>({id:s.id,name:s.name,investmentType:s.investment_type||"Unknown",investmentValue:Number(s.investment_value)||0,equityAllocation:Number(s.equity_allocation)||0,currentValuation:Number(s.current_valuation)||0,complianceStatus:s.compliance_status||"Pending",sector:s.sector||"Unknown",totalFunding:Number(s.total_funding)||0,totalRevenue:Number(s.total_revenue)||0,registrationDate:s.registration_date||"",founders:s.founders||[]}))}catch(t){return console.error("Error in getStartupsByNames:",t),[]}},async getStartupById(e){const{data:t,error:r}=await G.from("startups").select(`
        *,
        founders (*)
      `).eq("id",e).single();if(r)throw r;return t},async updateCompliance(e,t){console.log(`Updating compliance for startup ${e} to ${t}`);try{const{data:r,error:a}=await G.from("startups").update({compliance_status:t}).eq("id",e).select().single();if(a)throw console.error("Error updating compliance:",a),a;return console.log("Compliance updated successfully"),r}catch(r){throw console.error("Error in updateCompliance:",r),r}},async createStartup(e){const{data:{user:t}}=await G.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:r,error:a}=await G.from("startups").insert({name:e.name,investment_type:e.investment_type,investment_value:e.investment_value,equity_allocation:e.equity_allocation,current_valuation:e.current_valuation,compliance_status:"Pending",sector:e.sector,total_funding:e.total_funding,total_revenue:e.total_revenue,registration_date:e.registration_date,user_id:t.id}).select().single();if(a)throw a;if(e.founders&&e.founders.length>0){const s=e.founders.map(l=>({startup_id:r.id,name:l.name,email:l.email})),{error:i}=await G.from("founders").insert(s);i&&console.error("Error adding founders:",i)}return r},async updateStartup(e,t){const{data:r,error:a}=await G.from("startups").update(t).eq("id",e).select().single();if(a)throw a;return r},async updateStartupFounders(e,t){if(await G.from("founders").delete().eq("startup_id",e),t.length>0){const r=t.map(s=>({startup_id:e,name:s.name,email:s.email})),{error:a}=await G.from("founders").insert(r);if(a)throw a}}},Zn={async getNewInvestments(){console.log("Fetching new investments...");try{let{data:e,error:t}=await G.from("new_investments").select("*").order("created_at",{ascending:!1});if(t)return console.error("Error fetching new investments:",t),[];if(console.log("New investments fetched successfully:",(e==null?void 0:e.length)||0),(!e||e.length===0)&&(console.log("No investments found in database, populating with mock data..."),await this.populateNewInvestments())){const{data:s,error:i}=await G.from("new_investments").select("*").order("created_at",{ascending:!1});if(i)return console.error("Error fetching new investments after population:",i),[];e=s,console.log("New investments fetched after population:",(e==null?void 0:e.length)||0)}return(e||[]).map(a=>({id:a.id,name:a.name,investmentType:a.investment_type,investmentValue:a.investment_value,equityAllocation:a.equity_allocation,sector:a.sector,totalFunding:a.total_funding,totalRevenue:a.total_revenue,registrationDate:a.registration_date,pitchDeckUrl:a.pitch_deck_url,pitchVideoUrl:a.pitch_video_url,complianceStatus:a.compliance_status}))}catch(e){return console.error("Error in getNewInvestments:",e),[]}},async createInvestmentOffer(e){console.log("Creating investment offer with data:",e),console.log("Trying to reference startup_id:",e.startup_id);const{data:t,error:r}=await G.from("startups").select("id").eq("id",e.startup_id).single();if(r||!t)throw console.error("Startup not found in startups table:",e.startup_id),new Error(`Startup with ID ${e.startup_id} not found in startups table`);const{data:a,error:s}=await G.from("investment_offers").select("id, status").eq("investor_email",e.investor_email).eq("startup_id",e.startup_id);if(console.log("Existing offers for this user and investment:",a),a&&a.length>0&&a.find(m=>m.status==="pending"))throw console.error("User already has a pending offer for this startup"),new Error("You already have a pending offer for this startup");const{data:i,error:l}=await G.rpc("create_investment_offer_with_fee",{p_investor_email:e.investor_email,p_startup_name:e.startup_name,p_startup_id:e.startup_id,p_offer_amount:e.offer_amount,p_equity_percentage:e.equity_percentage,p_country:e.country||"United States",p_startup_amount_raised:e.startup_amount_raised||0});if(l)throw console.error("Error creating investment offer:",l),console.error("Error details:",{message:l.message,details:l.details,hint:l.hint,code:l.code}),l;const{data:u,error:d}=await G.from("investment_offers").select("*").eq("id",i).single();if(d)throw console.error("Error fetching created offer:",d),d;return console.log("Investment offer created successfully with scouting fee:",u),u},async getUserOffers(e){const{data:t,error:r}=await G.from("investment_offers").select(`
        *,
        investment:new_investments(*)
      `).eq("investor_email",e).order("created_at",{ascending:!1});if(r)throw r;return t},async updateOfferStatus(e,t){const{error:r}=await G.from("investment_offers").update({status:t}).eq("id",e);if(r)throw r;return!0},async updateInvestmentOffer(e,t,r){const{data:a,error:s}=await G.from("investment_offers").update({offer_amount:t,equity_percentage:r}).eq("id",e).select().single();if(s)throw s;return a},async deleteInvestmentOffer(e){const{error:t}=await G.from("investment_offers").delete().eq("id",e);if(t)throw t;return!0},async getAllInvestmentOffers(){console.log("Fetching all investment offers...");try{const{data:e,error:t}=await G.from("investment_offers").select(`
          *,
          startup:startups(*)
        `).order("created_at",{ascending:!1});if(t)return console.error("Error fetching investment offers:",t),[];console.log("Investment offers fetched successfully:",(e==null?void 0:e.length)||0);const r=[...new Set((e||[]).map(i=>i.investor_email))];let a={};if(r.length>0){const{data:i,error:l}=await G.from("users").select("email, name").in("email",r);!l&&i&&(a=i.reduce((u,d)=>(u[d.email]=d.name,u),{}))}return(e||[]).map(i=>({id:i.id,investorEmail:i.investor_email,investorName:i.investor_name||a[i.investor_email]||void 0,startupName:i.startup_name,startupId:i.startup_id,startup:i.startup?{id:i.startup.id,name:i.startup.name,sector:i.startup.sector,complianceStatus:i.startup.compliance_status,startupNationValidated:i.startup.startup_nation_validated,validationDate:i.startup.validation_date,createdAt:i.startup.created_at}:null,offerAmount:i.offer_amount,equityPercentage:i.equity_percentage,status:i.status,createdAt:i.created_at,startup_scouting_fee_amount:i.startup_scouting_fee_amount||0,investor_scouting_fee_amount:i.investor_scouting_fee_amount||0,startup_scouting_fee_paid:i.startup_scouting_fee_paid||!1,investor_scouting_fee_paid:i.investor_scouting_fee_paid||!1,contact_details_revealed:i.contact_details_revealed||!1,contact_details_revealed_at:i.contact_details_revealed_at,investor_advisor_approval_status:i.investor_advisor_approval_status||"not_required",investor_advisor_approval_at:i.investor_advisor_approval_at,startup_advisor_approval_status:i.startup_advisor_approval_status||"not_required",startup_advisor_approval_at:i.startup_advisor_approval_at}))}catch(e){return console.error("Error in getAllInvestmentOffers:",e),[]}},async approveInvestorAdvisorOffer(e,t){const{data:r,error:a}=await G.rpc("approve_investor_advisor_offer",{p_offer_id:e,p_approval_action:t});if(a)throw a;return r},async approveStartupAdvisorOffer(e,t){const{data:r,error:a}=await G.rpc("approve_startup_advisor_offer",{p_offer_id:e,p_approval_action:t});if(a)throw a;return r},async recommendCoInvestmentOpportunity(e,t,r){const{data:a,error:s}=await G.rpc("recommend_co_investment_opportunity",{p_opportunity_id:e,p_advisor_id:t,p_investor_ids:r});if(s)throw s;return a},async getRecommendedCoInvestmentOpportunities(e){const{data:t,error:r}=await G.rpc("get_recommended_co_investment_opportunities",{p_investor_id:e});if(r)throw r;return t||[]},async updateCoInvestmentRecommendationStatus(e,t){const{data:r,error:a}=await G.rpc("update_co_investment_recommendation_status",{p_recommendation_id:e,p_status:t});if(a)throw a;return r},async getInvestmentAdvisorByCode(e){try{console.log(" Database: Looking for advisor with code:",e);const{data:t,error:r}=await G.from("users").select("id, email, name, role, investment_advisor_code, logo_url").eq("investment_advisor_code",e).eq("role","Investment Advisor").single();return r?(console.error(" Database: Error fetching investment advisor:",r),null):(console.log(" Database: Found advisor:",t),t)}catch(t){return console.error(" Database: Error in getInvestmentAdvisorByCode:",t),null}},async getOffersForStartup(e){try{const{data:t,error:r}=await G.from("investment_offers").select(`
          *,
          startup:startups(*)
        `).eq("startup_id",e).order("created_at",{ascending:!1});if(r)return console.error("Error fetching startup offers:",r),[];const a=[...new Set((t||[]).map(l=>l.investor_email))];let s={};if(a.length>0){const{data:l,error:u}=await G.from("users").select("email, name").in("email",a);!u&&l&&(s=l.reduce((d,f)=>(d[f.email]=f.name,d),{}))}return(t||[]).map(l=>({id:l.id,investorEmail:l.investor_email,investorName:l.investor_name||s[l.investor_email]||void 0,startupName:l.startup_name,startupId:l.startup_id,startup:l.startup?{id:l.startup.id,name:l.startup.name}:null,offerAmount:l.offer_amount,equityPercentage:l.equity_percentage,status:l.status,createdAt:l.created_at}))}catch(t){return console.error("Error in getOffersForStartup:",t),[]}},async acceptOfferWithFee(e,t,r){try{const{data:a,error:s}=await G.rpc("accept_investment_offer_with_fee",{p_offer_id:e,p_country:t,p_startup_amount_raised:r});if(s)throw console.error("Error accepting offer with fee:",s),s;return a}catch(a){throw console.error("Error in acceptOfferWithFee:",a),a}},async acceptOfferSimple(e){try{const{data:t,error:r}=await G.rpc("accept_investment_offer_simple",{p_offer_id:e});if(r)throw console.error("Error accepting offer (simple):",r),r;return t}catch(t){throw console.error("Error in acceptOfferSimple:",t),t}},async rejectOffer(e){try{const{data:t,error:r}=await G.from("investment_offers").update({status:"rejected"}).eq("id",e).select().single();if(r)throw console.error("Error rejecting offer:",r),r;return await G.from("investment_ledger").insert({offer_id:e,activity_type:"offer_rejected",description:"Investment offer rejected by startup"}),t}catch(t){throw console.error("Error in rejectOffer:",t),t}},async revealContactDetails(e){try{const{data:t,error:r}=await G.rpc("reveal_contact_details",{p_offer_id:e});if(r)throw console.error("Error revealing contact details:",r),r;return t}catch(t){throw console.error("Error in revealContactDetails:",t),t}},async getInvestmentLedger(e){try{const{data:t,error:r}=await G.from("investment_ledger").select("*").eq("offer_id",e).order("created_at",{ascending:!0});return r?(console.error("Error getting investment ledger:",r),[]):t||[]}catch(t){return console.error("Error in getInvestmentLedger:",t),[]}},async getAllActiveOffers(){try{const{data:e,error:t}=await G.from("investment_offers").select(`
          *,
          startup:startups(*)
        `).in("status",["pending","accepted"]).order("created_at",{ascending:!1});return t?(console.error("Error getting all active offers:",t),[]):e||[]}catch(e){return console.error("Error in getAllActiveOffers:",e),[]}},async getAllInvestmentLedger(){try{const{data:e,error:t}=await G.from("investment_ledger").select(`
          *,
          offer:investment_offers(*)
        `).order("created_at",{ascending:!1});return t?(console.error("Error getting all investment ledger:",t),[]):e||[]}catch(e){return console.error("Error in getAllInvestmentLedger:",e),[]}},async populateNewInvestments(){console.log("=== POPULATING new_investments table ===");const e=[{id:101,name:"QuantumLeap",investment_type:"Seed",investment_value:15e4,equity_allocation:7,sector:"DeepTech",total_funding:15e4,total_revenue:0,registration_date:"2024-02-01",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=QJ21TaeN9K0",compliance_status:"Compliant"},{id:102,name:"AgroFuture",investment_type:"SeriesA",investment_value:12e5,equity_allocation:18,sector:"AgriTech",total_funding:25e5,total_revenue:4e5,registration_date:"2023-08-15",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=gt_l_4TfG4k",compliance_status:"Pending"},{id:103,name:"CyberGuard",investment_type:"SeriesB",investment_value:3e6,equity_allocation:10,sector:"Cybersecurity",total_funding:5e6,total_revenue:1e6,registration_date:"2022-07-22",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=rok_p26_Z5o",compliance_status:"Compliant"},{id:104,name:"BioSynth",investment_type:"Seed",investment_value:5e5,equity_allocation:15,sector:"BioTech",total_funding:5e5,total_revenue:5e4,registration_date:"2024-01-05",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=8aGhZQkoFbQ",compliance_status:"Compliant"},{id:105,name:"RetailNext",investment_type:"SeriesA",investment_value:25e5,equity_allocation:12,sector:"RetailTech",total_funding:4e6,total_revenue:8e5,registration_date:"2023-05-18",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=Y_N1_Jj9-KA",compliance_status:"Pending"},{id:106,name:"GameOn",investment_type:"Seed",investment_value:75e4,equity_allocation:20,sector:"Gaming",total_funding:75e4,total_revenue:15e4,registration_date:"2023-11-30",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=d_HlPboL_sA",compliance_status:"Compliant"},{id:107,name:"PropTech Pro",investment_type:"PreSeed",investment_value:1e5,equity_allocation:5,sector:"Real Estate",total_funding:1e5,total_revenue:1e4,registration_date:"2024-03-01",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=uK67H2PAmn8",compliance_status:"Pending"},{id:108,name:"LogiChain",investment_type:"SeriesA",investment_value:18e5,equity_allocation:9,sector:"Logistics",total_funding:3e6,total_revenue:6e5,registration_date:"2022-09-10",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=uJg4B5a-a28",compliance_status:"Compliant"},{id:109,name:"EduKids",investment_type:"Seed",investment_value:3e5,equity_allocation:10,sector:"EdTech",total_funding:3e5,total_revenue:6e4,registration_date:"2023-10-25",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=GGlY3g_2Q_E",compliance_status:"NonCompliant"},{id:110,name:"QuantumLeap 2",investment_type:"Seed",investment_value:15e4,equity_allocation:7,sector:"DeepTech",total_funding:15e4,total_revenue:0,registration_date:"2024-02-01",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=P1ww1X2-S1U",compliance_status:"Compliant"},{id:111,name:"SpaceHaul",investment_type:"SeriesB",investment_value:1e7,equity_allocation:15,sector:"Aerospace",total_funding:25e6,total_revenue:5e5,registration_date:"2021-12-01",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=sO-tjb4Edb8",compliance_status:"Compliant"},{id:112,name:"MindWell",investment_type:"Seed",investment_value:4e5,equity_allocation:12,sector:"HealthTech",total_funding:4e5,total_revenue:8e4,registration_date:"2024-04-10",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=4x7_v-2-a3I",compliance_status:"Compliant"},{id:113,name:"CleanPlate",investment_type:"Seed",investment_value:2e5,equity_allocation:8,sector:"FoodTech",total_funding:2e5,total_revenue:4e4,registration_date:"2023-09-05",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=ysz5S6PUM-U",compliance_status:"Pending"},{id:114,name:"Solaris",investment_type:"SeriesA",investment_value:22e5,equity_allocation:11,sector:"GreenTech",total_funding:35e5,total_revenue:7e5,registration_date:"2022-11-20",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=o0u4M6vppCI",compliance_status:"Compliant"},{id:115,name:"LegalEase",investment_type:"PreSeed",investment_value:12e4,equity_allocation:6,sector:"LegalTech",total_funding:12e4,total_revenue:25e3,registration_date:"2024-05-15",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=J132shgI_Ns",compliance_status:"Pending"},{id:116,name:"TravelBug",investment_type:"Seed",investment_value:6e5,equity_allocation:14,sector:"TravelTech",total_funding:6e5,total_revenue:12e4,registration_date:"2023-03-12",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=T_i-T58-S2E",compliance_status:"Compliant"},{id:117,name:"DataWeave",investment_type:"SeriesB",investment_value:45e5,equity_allocation:10,sector:"Data Analytics",total_funding:8e6,total_revenue:15e5,registration_date:"2021-10-01",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=R2vXbFp5C9o",compliance_status:"Compliant"},{id:118,name:"AutoDrive",investment_type:"SeriesA",investment_value:5e6,equity_allocation:18,sector:"Automotive",total_funding:1e7,total_revenue:8e5,registration_date:"2022-06-01",pitch_deck_url:"#",pitch_video_url:"https://www.youtube.com/watch?v=uA8X54c_w18",compliance_status:"NonCompliant"}];try{const{error:t}=await G.from("new_investments").delete().neq("id",0);if(t)return console.error("Error clearing new_investments:",t),!1;const{data:r,error:a}=await G.from("new_investments").insert(e);return a?(console.error("Error populating new_investments:",a),!1):(console.log("Successfully populated new_investments with",(r==null?void 0:r.length)||0,"records"),!0)}catch(t){return console.error("Error in populateNewInvestments:",t),!1}},async debugInvestmentOffers(){console.log("=== DEBUG: Checking investment_offers table ===");const{data:e,error:t}=await G.from("investment_offers").select("*").limit(1);console.log("Table structure check:",{structure:e,structureError:t});const{data:r,error:a}=await G.from("investment_offers").select("*");console.log("Existing offers:",{existingOffers:r,offersError:a});const{data:s,error:i}=await G.from("new_investments").select("id, name");console.log("Available investments:",{investments:s,investmentsError:i}),(!s||s.length===0)&&console.warn("WARNING: new_investments table is empty! This will cause foreign key constraint violations.")},async getUserInvestmentOffers(e){console.log("Fetching investment offers for user:",e);try{const{data:t,error:r}=await G.from("investment_offers").select(`
          *,
          startup:startups(*)
        `).eq("investor_email",e).order("created_at",{ascending:!1});return r?(console.error("Error fetching user investment offers:",r),[]):(console.log("User investment offers fetched successfully:",(t==null?void 0:t.length)||0),(t||[]).map(s=>({id:s.id,investorEmail:s.investor_email,investorName:s.investor_name||void 0,startupName:s.startup_name,startupId:s.startup_id,startup:s.startup?{id:s.startup.id,name:s.startup.name,sector:s.startup.sector,complianceStatus:s.startup.compliance_status,startupNationValidated:s.startup.startup_nation_validated,validationDate:s.startup.validation_date,createdAt:s.startup.created_at}:null,offerAmount:s.offer_amount,equityPercentage:s.equity_percentage,status:s.status,createdAt:s.created_at,startup_scouting_fee_amount:s.startup_scouting_fee_amount||0,investor_scouting_fee_amount:s.investor_scouting_fee_amount||0,startup_scouting_fee_paid:s.startup_scouting_fee_paid||!1,investor_scouting_fee_paid:s.investor_scouting_fee_paid||!1,contact_details_revealed:s.contact_details_revealed||!1,contact_details_revealed_at:s.contact_details_revealed_at,investor_advisor_approval_status:s.investor_advisor_approval_status||"not_required",investor_advisor_approval_at:s.investor_advisor_approval_at,startup_advisor_approval_status:s.startup_advisor_approval_status||"not_required",startup_advisor_approval_at:s.startup_advisor_approval_at})))}catch(t){return console.error("Error in getUserInvestmentOffers:",t),[]}}},RS={async getVerificationRequests(){console.log("Fetching verification requests...");try{const{data:e,error:t}=await G.from("verification_requests").select("*").order("created_at",{ascending:!1});return t?(console.error("Error fetching verification requests:",t),[]):(console.log("Verification requests fetched successfully:",(e==null?void 0:e.length)||0),e||[])}catch(e){return console.error("Error in getVerificationRequests:",e),[]}},async processVerification(e,t){console.log(`Processing verification request ${e} with status ${t}`);try{const{data:r,error:a}=await G.from("verification_requests").select("*").eq("id",e).single();if(a)throw console.error("Error fetching verification request:",a),a;const s=t==="approved"?"Compliant":"Non-Compliant",{error:i}=await G.from("startups").update({compliance_status:s}).eq("id",r.startup_id);if(i)throw console.error("Error updating startup compliance:",i),i;const{error:l}=await G.from("verification_requests").delete().eq("id",e);if(l)throw console.error("Error deleting verification request:",l),l;return console.log("Verification processed successfully"),{success:!0,status:t}}catch(r){throw console.error("Error in processVerification:",r),r}},async createVerificationRequest(e){const{data:t,error:r}=await G.from("verification_requests").insert({startup_id:e.startup_id,startup_name:e.startup_name,request_date:new Date().toISOString().split("T")[0]}).select().single();if(r)throw r;return t},async deleteVerificationRequest(e){const{error:t}=await G.from("verification_requests").delete().eq("id",e);if(t)throw t},async verifyDatabaseConnections(){console.log("Verifying database connections...");const e={users:!1,startups:!1,founders:!1,new_investments:!1,investment_offers:!1,verification_requests:!1,startup_addition_requests:!1,financial_records:!1,employees:!1};try{const{data:t,error:r}=await G.from("users").select("count").limit(1);e.users=!r,console.log("Users table:",r?"":"");const{data:a,error:s}=await G.from("startups").select("count").limit(1);e.startups=!s,console.log("Startups table:",s?"":"");const{data:i,error:l}=await G.from("founders").select("count").limit(1);e.founders=!l,console.log("Founders table:",l?"":"");const{data:u,error:d}=await G.from("new_investments").select("count").limit(1);e.new_investments=!d,console.log("New investments table:",d?"":"");const{data:f,error:m}=await G.from("investment_offers").select("count").limit(1);e.investment_offers=!m,console.log("Investment offers table:",m?"":"");const{data:g,error:v}=await G.from("verification_requests").select("count").limit(1);e.verification_requests=!v,console.log("Verification requests table:",v?"":"");const{data:x,error:j}=await G.from("startup_addition_requests").select("count").limit(1);e.startup_addition_requests=!j,console.log("Startup addition requests table:",j?"":"");const{data:b,error:A}=await G.from("financial_records").select("count").limit(1);e.financial_records=!A,console.log("Financial records table:",A?"":"");const{data:S,error:T}=await G.from("employees").select("count").limit(1);e.employees=!T,console.log("Employees table:",T?"":"");const E=Object.values(e).every(D=>D);return console.log(`Database verification complete: ${E?" All tables connected":" Some tables failed"}`),{success:E,results:e}}catch(t){return console.error("Error verifying database connections:",t),{success:!1,error:t.message}}}},C2={async cleanupOrphanedRequests(){var e;console.log(" Cleaning up orphaned startup addition requests...");try{const{data:t,error:r}=await G.from("startup_addition_requests").select("*");if(r)throw r;let a=0;for(const s of t||[]){const{data:i,error:l}=await G.from("investment_records").select("id").eq("investor_code",s.investor_code).eq("startup_id",(e=(await G.from("startups").select("id").eq("name",s.name).single()).data)==null?void 0:e.id).single();if(l&&l.code!=="PGRST116"){console.warn("Error checking investment for request:",l);continue}if(!i){const{error:u}=await G.from("startup_addition_requests").delete().eq("id",s.id);u?console.warn("Could not delete orphaned request:",u):a++}}return console.log(` Cleaned up ${a} orphaned startup addition requests`),a}catch(t){throw console.error("Error cleaning up orphaned requests:",t),t}},async createStartupAdditionRequest(e){console.log("Creating startup addition request:",e);try{const{data:t,error:r}=await G.from("startup_addition_requests").insert({name:e.name,investment_type:e.investment_type,investment_value:e.investment_value,equity_allocation:e.equity_allocation,sector:e.sector,total_funding:e.total_funding,total_revenue:e.total_revenue,registration_date:e.registration_date,investor_code:e.investor_code,status:e.status||"pending"}).select().single();if(r)throw console.error("Error creating startup addition request:",r),r;return console.log("Startup addition request created successfully:",t),t}catch(t){throw console.error("Error in createStartupAdditionRequest:",t),t}},async acceptStartupRequest(e){console.log(`Accepting startup addition request ${e}`);try{const{data:t,error:r}=await G.from("startup_addition_requests").select("*").eq("id",e).single();if(r)throw console.error("Error fetching startup addition request:",r),r;const{data:a,error:s}=await G.from("startups").select("*").eq("name",t.name).single();if(s)throw console.error("Error finding existing startup:",s),new Error(`Startup "${t.name}" not found. Cannot accept request.`);if(!a)throw new Error(`Startup "${t.name}" not found. Cannot accept request.`);console.log("Found existing startup:",a);const{error:i}=await G.from("startup_addition_requests").update({status:"approved"}).eq("id",e);return i&&console.error("Error updating request status:",i),console.log("Startup addition request accepted successfully - linked to existing startup"),a}catch(t){throw console.error("Error in acceptStartupRequest:",t),t}}},qi={async getCACode(){try{const{data:{user:e}}=await G.auth.getUser();if(!e)return null;const{data:t,error:r}=await G.from("users").select("ca_code").eq("id",e.id).single();if(r)throw r;return(t==null?void 0:t.ca_code)||null}catch(e){return console.error("Error fetching CA code:",e),null}},async getAssignedStartups(){try{const e=await this.getCACode();if(!e)return[];const{data:t,error:r}=await G.rpc("get_ca_startups",{ca_code_param:e});if(r)throw r;const a=t.map(u=>u.startup_id);if(a.length===0)return[];const{data:s,error:i}=await G.from("startups").select("*").in("id",a);if(i)throw i;return t.map(u=>{const d=s.find(f=>f.id===u.startup_id);return{id:u.startup_id,name:u.startup_name,sector:(d==null?void 0:d.sector)||"Unknown",complianceStatus:(d==null?void 0:d.compliance_status)||_t.Pending,totalFunding:(d==null?void 0:d.total_funding)||0,totalRevenue:(d==null?void 0:d.total_revenue)||0,registrationDate:(d==null?void 0:d.registration_date)||"",assignmentDate:u.assignment_date,assignmentStatus:u.status}})}catch(e){return console.error("Error fetching assigned startups:",e),[]}},async getCAStats(){try{const[e,t]=await Promise.all([this.getAssignedStartups(),this.getAssignmentRequests()]);return{totalStartups:e.length,pendingReview:e.filter(r=>r.complianceStatus===_t.Pending).length,compliant:e.filter(r=>r.complianceStatus===_t.Compliant).length,nonCompliant:e.filter(r=>r.complianceStatus===_t.NonCompliant).length,activeAssignments:e.filter(r=>r.assignmentStatus==="active").length,pendingRequests:t.filter(r=>r.status==="pending").length}}catch(e){return console.error("Error fetching CA stats:",e),{totalStartups:0,pendingReview:0,compliant:0,nonCompliant:0,activeAssignments:0,pendingRequests:0}}},async updateComplianceStatus(e,t){try{const{error:r}=await G.from("startups").update({compliance_status:t}).eq("id",e);if(r)throw r;return!0}catch(r){return console.error("Error updating compliance status:",r),!1}},async assignToStartup(e,t){try{const r=await this.getCACode();if(!r)return!1;const{data:a,error:s}=await G.rpc("assign_ca_to_startup",{ca_code_param:r,startup_id_param:e,notes_param:t});if(s)throw s;return a}catch(r){return console.error("Error assigning CA to startup:",r),!1}},async removeAssignment(e){try{const t=await this.getCACode();if(!t)return!1;const{data:r,error:a}=await G.rpc("remove_ca_assignment",{ca_code_param:t,startup_id_param:e});if(a)throw a;return r}catch(t){return console.error("Error removing CA assignment:",t),!1}},async getAllStartups(){try{const{data:e,error:t}=await G.from("startups").select("*").order("name");if(t)throw t;return e||[]}catch(e){return console.error("Error fetching all startups:",e),[]}},async isAssignedToStartup(e){try{const t=await this.getCACode();if(!t)return!1;const{data:r,error:a}=await G.from("ca_assignments").select("id").eq("ca_code",t).eq("startup_id",e).eq("status","active").single();if(a&&a.code!=="PGRST116")throw a;return!!r}catch(t){return console.error("Error checking CA assignment:",t),!1}},async getAssignmentDetails(e){try{const t=await this.getCACode();if(!t)return null;const{data:r,error:a}=await G.from("ca_assignments").select("*").eq("ca_code",t).eq("startup_id",e).single();if(a&&a.code!=="PGRST116")throw a;return r}catch(t){return console.error("Error fetching assignment details:",t),null}},async getAssignmentRequests(){try{const e=await this.getCACode();if(!e)return[];const{data:t,error:r}=await G.rpc("get_ca_assignment_requests",{ca_code_param:e});if(r)throw r;return(t||[]).map(a=>({id:a.id,startupId:a.startup_id,startupName:a.startup_name,requestDate:a.request_date,status:a.status,notes:a.notes}))}catch(e){return console.error("Error fetching CA assignment requests:",e),[]}},async approveAssignmentRequest(e){try{const t=await this.getCACode();if(!t)return!1;const{data:r,error:a}=await G.rpc("approve_ca_assignment_request",{request_id_param:e,ca_code_param:t});if(a)throw a;return r}catch(t){return console.error("Error approving CA assignment request:",t),!1}},async rejectAssignmentRequest(e,t){try{const r=await this.getCACode();if(!r)return!1;const{data:a,error:s}=await G.rpc("reject_ca_assignment_request",{request_id_param:e,ca_code_param:r,rejection_notes:t});if(s)throw s;return a}catch(r){return console.error("Error rejecting CA assignment request:",r),!1}}};let v0=null,LS=0;const ZL=300*1e3,Fi={async getCSCode(){try{const e=Date.now();if(v0&&e<LS)return v0;const{data:{user:t}}=await G.auth.getUser();if(!t)return console.log("No authenticated user found"),null;console.log("Getting CS code for user ID:",t.id);const{data:r,error:a}=await G.from("users").select("cs_code, role, name").eq("id",t.id).single();if(a)throw console.error("Database error fetching CS code:",a),a;console.log("User data from database:",r);const s=r==null?void 0:r.cs_code;return console.log("CS code found:",s),v0=s||null,LS=Date.now()+ZL,v0}catch(e){return console.error("Error fetching CS code:",e),null}},async getAssignedStartups(){try{const e=await this.getCSCode();if(!e)return console.log("No CS code found for current user"),[];console.log("Fetching assigned startups for CS code:",e);const{data:t,error:r}=await G.rpc("get_cs_startups",{cs_code_param:e});if(r)throw console.error("RPC error:",r),r;console.log("RPC response data:",t);const a=(t||[]).map(d=>d.startup_id);if(a.length===0)return console.log("No assigned startups found"),[];const{data:s,error:i}=await G.from("startups").select("*").in("id",a);if(i)throw i;const u=(t||[]).map(d=>{const f=(s||[]).find(m=>m.id===d.startup_id);return{id:d.startup_id,name:d.startup_name,sector:(f==null?void 0:f.sector)||"Unknown",complianceStatus:(f==null?void 0:f.compliance_status)||_t.Pending,totalFunding:(f==null?void 0:f.total_funding)||0,totalRevenue:(f==null?void 0:f.total_revenue)||0,registrationDate:(f==null?void 0:f.registration_date)||"",assignmentDate:d.assignment_date,assignmentStatus:d.status}}).filter(d=>d.assignmentStatus==="active");return console.log("Processed assigned startups:",u),u}catch(e){return console.error("Error fetching assigned CS startups:",e),[]}},async requestAssignment(e,t,r){try{const a=await this.getCSCode();if(!a)return{success:!1,error:"CS code not found"};const{error:s}=await G.from("cs_assignments").insert({cs_code:a,startup_id:e,status:"pending",notes:r||`Assignment request from CS ${a}`});if(s)throw s;return{success:!0}}catch(a){return console.error("Error requesting assignment:",a),{success:!1,error:"Failed to request assignment"}}},async getAvailableStartups(){try{const e=await this.getCSCode();if(!e)return console.log("No CS code found for current user"),[];console.log("Fetching startups that requested CS code:",e);const{data:t,error:r}=await G.rpc("get_cs_assignment_requests",{cs_code_param:e});if(r)throw r;if(console.log("CS assignment requests found:",t),!t||t.length===0)return console.log("No pending requests found for this CS"),[];const a=t.map(l=>l.startup_id),{data:s,error:i}=await G.from("startups").select("*").in("id",a);if(i)throw i;return console.log("Startup details found:",s),s||[]}catch(e){return console.error("Error fetching available startups:",e),[]}},async updateComplianceStatus(e,t,r){try{const a=await this.getCSCode();if(!a)return{success:!1,error:"CS code not found"};const{data:s,error:i}=await G.from("cs_assignments").select("*").eq("cs_code",a).eq("startup_id",e).eq("status","active").single();if(i||!s)return{success:!1,error:"Not assigned to this startup"};const{error:l}=await G.from("startups").update({compliance_status:t,cs_verification_date:new Date().toISOString(),cs_verification_notes:r}).eq("id",e);if(l)throw l;return{success:!0}}catch(a){return console.error("Error updating compliance status:",a),{success:!1,error:"Failed to update compliance status"}}},async getCSStats(){try{const[e,t]=await Promise.all([this.getAssignedStartups(),this.getAssignmentRequests()]);return{totalStartups:e.length,pendingReview:e.filter(r=>r.complianceStatus===_t.Pending).length,compliant:e.filter(r=>r.complianceStatus===_t.Compliant).length,nonCompliant:e.filter(r=>r.complianceStatus===_t.NonCompliant).length,activeAssignments:e.filter(r=>r.assignmentStatus==="active").length,pendingRequests:t.filter(r=>r.status==="pending").length}}catch(e){return console.error("Error fetching CS stats:",e),{totalStartups:0,pendingReview:0,compliant:0,nonCompliant:0,activeAssignments:0,pendingRequests:0}}},async assignToStartup(e,t){try{const r=await this.getCSCode();if(!r)return!1;const{data:a,error:s}=await G.rpc("assign_cs_to_startup",{cs_code_param:r,startup_id_param:e,notes_param:t});if(s)throw s;return a}catch(r){return console.error("Error assigning CS to startup:",r),!1}},async getAssignmentRequests(){try{const e=await this.getCSCode();if(!e)return[];const{data:t,error:r}=await G.rpc("get_cs_assignment_requests",{cs_code_param:e});if(r)throw r;return(t||[]).map(a=>({id:a.id,startupId:a.startup_id,startupName:a.startup_name,requestDate:a.request_date,status:a.status,notes:a.notes}))}catch(e){return console.error("Error fetching assignment requests:",e),[]}},async approveAssignmentRequest(e){try{const t=await this.getCSCode();if(console.log(" Approving request:",{requestId:e,csCode:t}),!t)return console.error(" No CS code found for current user"),!1;const{data:r,error:a}=await G.rpc("approve_cs_assignment_request",{request_id_param:e,cs_code_param:t,response_notes_param:"Approved via CS dashboard"});if(console.log(" RPC response:",{data:r,error:a}),a)throw console.error(" RPC error:",a),a;return console.log(" Approval successful:",r),r}catch(t){return console.error(" Error approving assignment request:",t),!1}},async rejectAssignmentRequest(e,t){try{const r=await this.getCSCode();if(!r)return!1;const{data:a,error:s}=await G.rpc("reject_cs_assignment_request",{request_id_param:e,cs_code_param:r,response_notes_param:t||"Rejected via CS dashboard"});if(s)throw s;return a}catch(r){return console.error("Error rejecting assignment request:",r),!1}},async removeAssignment(e){try{const t=await this.getCSCode();if(!t)return!1;const{data:r,error:a}=await G.rpc("remove_cs_assignment",{cs_code_param:t,startup_id_param:e});if(a)throw console.error("RPC error:",a),a;return r}catch(t){return console.error("Error removing assignment:",t),!1}},async getAllStartups(){try{const{data:e,error:t}=await G.from("startups").select("*").order("name");if(t)throw t;return e||[]}catch(e){return console.error("Error fetching all startups:",e),[]}},async isAssignedToStartup(e){try{const t=await this.getCSCode();if(!t)return!1;const{data:r,error:a}=await G.from("cs_assignments").select("id").eq("cs_code",t).eq("startup_id",e).eq("status","active").single();if(a&&a.code!=="PGRST116")throw a;return!!r}catch(t){return console.error("Error checking CS assignment:",t),!1}},async getAssignmentDetails(e){try{const t=await this.getCSCode();if(!t)return null;const{data:r,error:a}=await G.from("cs_assignments").select("*").eq("cs_code",t).eq("startup_id",e).single();if(a&&a.code!=="PGRST116")throw a;return r}catch(t){return console.error("Error fetching assignment details:",t),null}}};class JL{async createValidationRequest(t,r){try{console.log("Creating/updating validation request for startup:",{startupId:t,startupName:r});const{data:a,error:s}=await G.from("validation_requests").select("*").eq("startup_id",t).single();if(s&&s.code!=="PGRST116")throw console.error("Error checking existing validation request:",s),s;let i;if(a){console.log("Updating existing validation request:",a.id);const{data:l,error:u}=await G.from("validation_requests").update({startup_name:r,status:"pending",admin_notes:null,updated_at:new Date().toISOString()}).eq("id",a.id).select().single();if(u)throw console.error("Error updating validation request:",u),u;i=l,console.log("Validation request updated successfully:",i)}else{console.log("Creating new validation request");const{data:l,error:u}=await G.from("validation_requests").insert({startup_id:t,startup_name:r,status:"pending"}).select().single();if(u)throw console.error("Error creating validation request:",u),u;i=l,console.log("Validation request created successfully:",i)}return{id:i.id,startupId:i.startup_id,startupName:i.startup_name,requestDate:i.created_at,status:i.status,adminNotes:i.admin_notes,createdAt:i.created_at}}catch(a){throw console.error("Error in createValidationRequest:",a),a}}async getAllValidationRequests(){try{console.log("Fetching all validation requests...");const{data:t,error:r}=await G.from("validation_requests").select("*").order("created_at",{ascending:!1});return r?(console.error("Error fetching validation requests:",r),[]):(console.log("Validation requests fetched successfully:",(t==null?void 0:t.length)||0),(t||[]).map(a=>({id:a.id,startupId:a.startup_id,startupName:a.startup_name,requestDate:a.created_at,status:a.status,adminNotes:a.admin_notes,createdAt:a.created_at})))}catch(t){return console.error("Error in getAllValidationRequests:",t),[]}}async processValidationRequest(t,r,a){try{console.log(`Processing validation request ${t} with status ${r}`);const{data:s,error:i}=await G.from("validation_requests").update({status:r,admin_notes:a}).eq("id",t).select().single();if(i)throw console.error("Error updating validation request:",i),i;if(r==="approved"){const{error:l}=await G.from("startups").update({startup_nation_validated:!0,validation_date:new Date().toISOString()}).eq("id",s.startup_id);if(l)throw console.error("Error updating startup validation status:",l),l}return console.log("Validation request processed successfully"),{id:s.id,startupId:s.startup_id,startupName:s.startup_name,requestDate:s.created_at,status:s.status,adminNotes:s.admin_notes,createdAt:s.created_at}}catch(s){throw console.error("Error in processValidationRequest:",s),s}}async getStartupValidationStatus(t){try{const{data:r,error:a}=await G.from("validation_requests").select("*").eq("startup_id",t).order("created_at",{ascending:!1}).limit(1).single();if(a){if(a.code==="PGRST116")return null;throw console.error("Error fetching startup validation status:",a),a}return{id:r.id,startupId:r.startup_id,startupName:r.startup_name,requestDate:r.created_at,status:r.status,adminNotes:r.admin_notes,createdAt:r.created_at}}catch(r){throw console.error("Error in getStartupValidationStatus:",r),r}}async removeValidationRequest(t){try{console.log("Removing validation request for startup:",t);const{error:r}=await G.from("validation_requests").delete().eq("startup_id",t);if(r)throw console.error("Error removing validation request:",r),r;console.log("Validation request removed successfully")}catch(r){throw console.error("Error in removeValidationRequest:",r),r}}}const lx=new JL,tt=({children:e,className:t="",padding:r="md"})=>{const a={none:"",sm:"p-3",md:"p-4 sm:p-6",lg:"p-6 sm:p-8"};return n.jsx("div",{className:`bg-white rounded-xl shadow-md ${a[r]} ${t}`,children:e})},Oe=({children:e,variant:t="primary",size:r="md",className:a="",...s})=>{const i="inline-flex items-center justify-center rounded-md font-semibold focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors duration-200",l={primary:"bg-brand-primary text-white hover:bg-brand-secondary focus:ring-brand-primary",secondary:"bg-slate-200 text-slate-800 hover:bg-slate-300 focus:ring-slate-400",outline:"bg-transparent border border-brand-primary text-brand-primary hover:bg-brand-light focus:ring-brand-primary"},u={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return n.jsx("button",{className:`${i} ${l[t]} ${u[r]} ${a}`,...s,children:e})},Jx=({status:e})=>{const t={[_t.Compliant]:"bg-green-100 text-status-compliant",[_t.Pending]:"bg-orange-100 text-status-pending",[_t.NonCompliant]:"bg-red-100 text-status-noncompliant"};return n.jsx("span",{className:`px-2.5 py-0.5 text-xs font-medium rounded-full inline-block ${t[e]}`,children:e})};function Bk(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Bk(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function oa(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Bk(e))&&(a&&(a+=" "),a+=t);return a}var sb={},ib={},MS;function QL(){return MS||(MS=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(ib)),ib}var ob={},IS;function Uk(){return IS||(IS=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(ob)),ob}var lb={},qS;function $k(){return qS||(qS=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;return typeof r=="string"||typeof r=="symbol"?r:Object.is((a=r==null?void 0:r.valueOf)==null?void 0:a.call(r),-0)?"-0":String(r)}e.toKey=t}(lb)),lb}var cb={},FS;function Hw(){return FS||(FS=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const a=[],s=r.length;if(s===0)return a;let i=0,l="",u="",d=!1;for(r.charCodeAt(0)===46&&(a.push(""),i++);i<s;){const f=r[i];u?f==="\\"&&i+1<s?(i++,l+=r[i]):f===u?u="":l+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,a.push(l),l=""):l+=f:f==="["?(d=!0,l&&(a.push(l),l="")):f==="."?l&&(a.push(l),l=""):l+=f,i++}return l&&a.push(l),a}e.toPath=t}(cb)),cb}var BS;function Gw(){return BS||(BS=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QL(),r=Uk(),a=$k(),s=Hw();function i(u,d,f){if(u==null)return f;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return f;const m=u[d];return m===void 0?r.isDeepKey(d)?i(u,s.toPath(d),f):f:m}case"number":case"symbol":{typeof d=="number"&&(d=a.toKey(d));const m=u[d];return m===void 0?f:m}default:{if(Array.isArray(d))return l(u,d,f);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return f;const m=u[d];return m===void 0?f:m}}}function l(u,d,f){if(d.length===0)return f;let m=u;for(let g=0;g<d.length;g++){if(m==null||t.isUnsafeProperty(d[g]))return f;m=m[d[g]]}return m===void 0?f:m}e.get=i}(sb)),sb}var ub,US;function eM(){return US||(US=1,ub=Gw().get),ub}var tM=eM();const dd=Ro(tM);var db={exports:{}},Ea={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $S;function rM(){if($S)return Ea;$S=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function j(b){if(typeof b=="object"&&b!==null){var A=b.$$typeof;switch(A){case e:switch(b=b.type,b){case r:case s:case a:case d:case f:case v:return b;default:switch(b=b&&b.$$typeof,b){case l:case u:case g:case m:return b;case i:return b;default:return A}}case t:return A}}}return Ea.ContextConsumer=i,Ea.ContextProvider=l,Ea.Element=e,Ea.ForwardRef=u,Ea.Fragment=r,Ea.Lazy=g,Ea.Memo=m,Ea.Portal=t,Ea.Profiler=s,Ea.StrictMode=a,Ea.Suspense=d,Ea.SuspenseList=f,Ea.isContextConsumer=function(b){return j(b)===i},Ea.isContextProvider=function(b){return j(b)===l},Ea.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},Ea.isForwardRef=function(b){return j(b)===u},Ea.isFragment=function(b){return j(b)===r},Ea.isLazy=function(b){return j(b)===g},Ea.isMemo=function(b){return j(b)===m},Ea.isPortal=function(b){return j(b)===t},Ea.isProfiler=function(b){return j(b)===s},Ea.isStrictMode=function(b){return j(b)===a},Ea.isSuspense=function(b){return j(b)===d},Ea.isSuspenseList=function(b){return j(b)===f},Ea.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===r||b===s||b===a||b===d||b===f||typeof b=="object"&&b!==null&&(b.$$typeof===g||b.$$typeof===m||b.$$typeof===l||b.$$typeof===i||b.$$typeof===u||b.$$typeof===x||b.getModuleId!==void 0)},Ea.typeOf=j,Ea}var zS;function aM(){return zS||(zS=1,db.exports=rM()),db.exports}var nM=aM(),ms=e=>e===0?0:e>0?1:-1,Zi=e=>typeof e=="number"&&e!=+e,sf=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Xt=e=>(typeof e=="number"||e instanceof Number)&&!Zi(e),nc=e=>Xt(e)||typeof e=="string",sM=0,xf=e=>{var t=++sM;return"".concat(e||"").concat(t)},oi=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Xt(t)&&typeof t!="string")return a;var i;if(sf(t)){if(r==null)return a;var l=t.indexOf("%");i=r*parseFloat(t.slice(0,l))/100}else i=+t;return Zi(i)&&(i=a),s&&r!=null&&i>r&&(i=r),i},zk=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},a=0;a<t;a++)if(!r[e[a]])r[e[a]]=!0;else return!0;return!1},Vi=(e,t)=>Xt(e)&&Xt(t)?r=>e+r*(t-e):()=>t;function Vk(e,t,r){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):dd(a,t))===r)}var qa=e=>e===null||typeof e>"u",Jp=e=>qa(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),iM=["viewBox","children"],oM=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],VS=["points","pathLength"],fb={svg:iM,polygon:VS,polyline:VS},Kw=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ww=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(_.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var a={};return Object.keys(r).forEach(s=>{Kw.includes(s)&&(a[s]=i=>r[s](r,i))}),a},lM=(e,t,r)=>a=>(e(t,r,a),null),Qp=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(s=>{var i=e[s];Kw.includes(s)&&typeof i=="function"&&(a||(a={}),a[s]=lM(i,t,r))}),a},HS=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",GS=null,hb=null,Hk=e=>{if(e===GS&&Array.isArray(hb))return hb;var t=[];return _.Children.forEach(e,r=>{qa(r)||(nM.isFragment(r)?t=t.concat(Hk(r.props.children)):t.push(r))}),hb=t,GS=e,t};function eg(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(s=>HS(s)):a=[HS(t)],Hk(e).forEach(s=>{var i=dd(s,"type.displayName")||dd(s,"type.name");a.indexOf(i)!==-1&&r.push(s)}),r}var Gk=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,cM=(e,t,r,a)=>{var s,i=(s=a&&(fb==null?void 0:fb[a]))!==null&&s!==void 0?s:[];return t.startsWith("data-")||typeof e!="function"&&(a&&i.includes(t)||oM.includes(t))||r&&Kw.includes(t)},Yr=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(_.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var s={};return Object.keys(a).forEach(i=>{var l;cM((l=a)===null||l===void 0?void 0:l[i],i,t,r)&&(s[i]=a[i])}),s},uM=["children","width","height","viewBox","className","style","title","desc"];function k2(){return k2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},k2.apply(null,arguments)}function dM(e,t){if(e==null)return{};var r,a,s=fM(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function fM(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Yw=_.forwardRef((e,t)=>{var{children:r,width:a,height:s,viewBox:i,className:l,style:u,title:d,desc:f}=e,m=dM(e,uM),g=i||{width:a,height:s,x:0,y:0},v=oa("recharts-surface",l);return _.createElement("svg",k2({},Yr(m,!0,"svg"),{className:v,width:a,height:s,style:u,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:t}),_.createElement("title",null,d),_.createElement("desc",null,f),r)}),hM=["children","className"];function E2(){return E2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},E2.apply(null,arguments)}function mM(e,t){if(e==null)return{};var r,a,s=pM(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function pM(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var ps=_.forwardRef((e,t)=>{var{children:r,className:a}=e,s=mM(e,hM),i=oa("recharts-layer",a);return _.createElement("g",E2({className:i},Yr(s,!0),{ref:t}),r)}),Kk=vk(),Wk=_.createContext(null),gM=()=>_.useContext(Wk);function Ua(e){return function(){return e}}const Yk=Math.cos,cx=Math.sin,bl=Math.sqrt,ux=Math.PI,Qx=2*ux,P2=Math.PI,T2=2*P2,Jd=1e-6,xM=T2-Jd;function Xk(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function vM(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Xk;const r=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+a[s]}}class yM{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Xk:vM(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,s){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,r,a,s,i,l){this._append`C${+t},${+r},${+a},${+s},${this._x1=+i},${this._y1=+l}`}arcTo(t,r,a,s,i){if(t=+t,r=+r,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,u=this._y1,d=a-t,f=s-r,m=l-t,g=u-r,v=m*m+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(v>Jd)if(!(Math.abs(g*d-f*m)>Jd)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=a-l,j=s-u,b=d*d+f*f,A=x*x+j*j,S=Math.sqrt(b),T=Math.sqrt(v),E=i*Math.tan((P2-Math.acos((b+v-A)/(2*S*T)))/2),D=E/T,L=E/S;Math.abs(D-1)>Jd&&this._append`L${t+D*m},${r+D*g}`,this._append`A${i},${i},0,0,${+(g*x>m*j)},${this._x1=t+L*d},${this._y1=r+L*f}`}}arc(t,r,a,s,i,l){if(t=+t,r=+r,a=+a,l=!!l,a<0)throw new Error(`negative radius: ${a}`);let u=a*Math.cos(s),d=a*Math.sin(s),f=t+u,m=r+d,g=1^l,v=l?s-i:i-s;this._x1===null?this._append`M${f},${m}`:(Math.abs(this._x1-f)>Jd||Math.abs(this._y1-m)>Jd)&&this._append`L${f},${m}`,a&&(v<0&&(v=v%T2+T2),v>xM?this._append`A${a},${a},0,1,${g},${t-u},${r-d}A${a},${a},0,1,${g},${this._x1=f},${this._y1=m}`:v>Jd&&this._append`A${a},${a},0,${+(v>=P2)},${g},${this._x1=t+a*Math.cos(i)},${this._y1=r+a*Math.sin(i)}`)}rect(t,r,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function Xw(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new yM(t)}function Zw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Zk(e){this._context=e}Zk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ev(e){return new Zk(e)}function Jk(e){return e[0]}function Qk(e){return e[1]}function eE(e,t){var r=Ua(!0),a=null,s=ev,i=null,l=Xw(u);e=typeof e=="function"?e:e===void 0?Jk:Ua(e),t=typeof t=="function"?t:t===void 0?Qk:Ua(t);function u(d){var f,m=(d=Zw(d)).length,g,v=!1,x;for(a==null&&(i=s(x=l())),f=0;f<=m;++f)!(f<m&&r(g=d[f],f,d))===v&&((v=!v)?i.lineStart():i.lineEnd()),v&&i.point(+e(g,f,d),+t(g,f,d));if(x)return i=null,x+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Ua(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Ua(+d),u):t},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Ua(!!d),u):r},u.curve=function(d){return arguments.length?(s=d,a!=null&&(i=s(a)),u):s},u.context=function(d){return arguments.length?(d==null?a=i=null:i=s(a=d),u):a},u}function y0(e,t,r){var a=null,s=Ua(!0),i=null,l=ev,u=null,d=Xw(f);e=typeof e=="function"?e:e===void 0?Jk:Ua(+e),t=typeof t=="function"?t:Ua(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Qk:Ua(+r);function f(g){var v,x,j,b=(g=Zw(g)).length,A,S=!1,T,E=new Array(b),D=new Array(b);for(i==null&&(u=l(T=d())),v=0;v<=b;++v){if(!(v<b&&s(A=g[v],v,g))===S)if(S=!S)x=v,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),j=v-1;j>=x;--j)u.point(E[j],D[j]);u.lineEnd(),u.areaEnd()}S&&(E[v]=+e(A,v,g),D[v]=+t(A,v,g),u.point(a?+a(A,v,g):E[v],r?+r(A,v,g):D[v]))}if(T)return u=null,T+""||null}function m(){return eE().defined(s).curve(l).context(i)}return f.x=function(g){return arguments.length?(e=typeof g=="function"?g:Ua(+g),a=null,f):e},f.x0=function(g){return arguments.length?(e=typeof g=="function"?g:Ua(+g),f):e},f.x1=function(g){return arguments.length?(a=g==null?null:typeof g=="function"?g:Ua(+g),f):a},f.y=function(g){return arguments.length?(t=typeof g=="function"?g:Ua(+g),r=null,f):t},f.y0=function(g){return arguments.length?(t=typeof g=="function"?g:Ua(+g),f):t},f.y1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:Ua(+g),f):r},f.lineX0=f.lineY0=function(){return m().x(e).y(t)},f.lineY1=function(){return m().x(e).y(r)},f.lineX1=function(){return m().x(a).y(t)},f.defined=function(g){return arguments.length?(s=typeof g=="function"?g:Ua(!!g),f):s},f.curve=function(g){return arguments.length?(l=g,i!=null&&(u=l(i)),f):l},f.context=function(g){return arguments.length?(g==null?i=u=null:u=l(i=g),f):i},f}class tE{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function bM(e){return new tE(e,!0)}function wM(e){return new tE(e,!1)}const Jw={draw(e,t){const r=bl(t/ux);e.moveTo(r,0),e.arc(0,0,r,0,Qx)}},jM={draw(e,t){const r=bl(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},rE=bl(1/3),_M=rE*2,NM={draw(e,t){const r=bl(t/_M),a=r*rE;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},SM={draw(e,t){const r=bl(t),a=-r/2;e.rect(a,a,r,r)}},AM=.8908130915292852,aE=cx(ux/10)/cx(7*ux/10),CM=cx(Qx/10)*aE,kM=-Yk(Qx/10)*aE,EM={draw(e,t){const r=bl(t*AM),a=CM*r,s=kM*r;e.moveTo(0,-r),e.lineTo(a,s);for(let i=1;i<5;++i){const l=Qx*i/5,u=Yk(l),d=cx(l);e.lineTo(d*r,-u*r),e.lineTo(u*a-d*s,d*a+u*s)}e.closePath()}},mb=bl(3),PM={draw(e,t){const r=-bl(t/(mb*3));e.moveTo(0,r*2),e.lineTo(-mb*r,-r),e.lineTo(mb*r,-r),e.closePath()}},wo=-.5,jo=bl(3)/2,O2=1/bl(12),TM=(O2/2+1)*3,OM={draw(e,t){const r=bl(t/TM),a=r/2,s=r*O2,i=a,l=r*O2+r,u=-i,d=l;e.moveTo(a,s),e.lineTo(i,l),e.lineTo(u,d),e.lineTo(wo*a-jo*s,jo*a+wo*s),e.lineTo(wo*i-jo*l,jo*i+wo*l),e.lineTo(wo*u-jo*d,jo*u+wo*d),e.lineTo(wo*a+jo*s,wo*s-jo*a),e.lineTo(wo*i+jo*l,wo*l-jo*i),e.lineTo(wo*u+jo*d,wo*d-jo*u),e.closePath()}};function DM(e,t){let r=null,a=Xw(s);e=typeof e=="function"?e:Ua(e||Jw),t=typeof t=="function"?t:Ua(t===void 0?64:+t);function s(){let i;if(r||(r=i=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Ua(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Ua(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function dx(){}function fx(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function nE(e){this._context=e}nE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:fx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:fx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function RM(e){return new nE(e)}function sE(e){this._context=e}sE.prototype={areaStart:dx,areaEnd:dx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:fx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function LM(e){return new sE(e)}function iE(e){this._context=e}iE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:fx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function MM(e){return new iE(e)}function oE(e){this._context=e}oE.prototype={areaStart:dx,areaEnd:dx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function IM(e){return new oE(e)}function KS(e){return e<0?-1:1}function WS(e,t,r){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),l=(r-e._y1)/(s||a<0&&-0),u=(i*s+l*a)/(a+s);return(KS(i)+KS(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(u))||0}function YS(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function pb(e,t,r){var a=e._x0,s=e._y0,i=e._x1,l=e._y1,u=(i-a)/3;e._context.bezierCurveTo(a+u,s+u*t,i-u,l-u*r,i,l)}function hx(e){this._context=e}hx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pb(this,this._t0,YS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,pb(this,YS(this,r=WS(this,e,t)),r);break;default:pb(this,this._t0,r=WS(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function lE(e){this._context=new cE(e)}(lE.prototype=Object.create(hx.prototype)).point=function(e,t){hx.prototype.point.call(this,t,e)};function cE(e){this._context=e}cE.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,s,i){this._context.bezierCurveTo(t,e,a,r,i,s)}};function qM(e){return new hx(e)}function FM(e){return new lE(e)}function uE(e){this._context=e}uE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=XS(e),s=XS(t),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function XS(e){var t,r=e.length-1,a,s=new Array(r),i=new Array(r),l=new Array(r);for(s[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=s[t]/i[t-1],i[t]-=a,l[t]-=a*l[t-1];for(s[r-1]=l[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(l[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function BM(e){return new uE(e)}function tv(e,t){this._context=e,this._t=t}tv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function UM(e){return new tv(e,.5)}function $M(e){return new tv(e,0)}function zM(e){return new tv(e,1)}function Kh(e,t){if((l=e.length)>1)for(var r=1,a,s,i=e[t[0]],l,u=i.length;r<l;++r)for(s=i,i=e[t[r]],a=0;a<u;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function D2(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function VM(e,t){return e[t]}function HM(e){const t=[];return t.key=e,t}function GM(){var e=Ua([]),t=D2,r=Kh,a=VM;function s(i){var l=Array.from(e.apply(this,arguments),HM),u,d=l.length,f=-1,m;for(const g of i)for(u=0,++f;u<d;++u)(l[u][f]=[0,+a(g,l[u].key,f,i)]).data=g;for(u=0,m=Zw(t(l));u<d;++u)l[m[u]].index=u;return r(l,m),l}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Ua(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:Ua(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?D2:typeof i=="function"?i:Ua(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Kh,s):r},s}function KM(e,t){if((a=e.length)>0){for(var r,a,s=0,i=e[0].length,l;s<i;++s){for(l=r=0;r<a;++r)l+=e[r][s][1]||0;if(l)for(r=0;r<a;++r)e[r][s][1]/=l}Kh(e,t)}}function WM(e,t){if((s=e.length)>0){for(var r=0,a=e[t[0]],s,i=a.length;r<i;++r){for(var l=0,u=0;l<s;++l)u+=e[l][r][1]||0;a[r][1]+=a[r][0]=-u/2}Kh(e,t)}}function YM(e,t){if(!(!((l=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,a=1,s,i,l;a<i;++a){for(var u=0,d=0,f=0;u<l;++u){for(var m=e[t[u]],g=m[a][1]||0,v=m[a-1][1]||0,x=(g-v)/2,j=0;j<u;++j){var b=e[t[j]],A=b[a][1]||0,S=b[a-1][1]||0;x+=A-S}d+=g,f+=x*g}s[a-1][1]+=s[a-1][0]=r,d&&(r-=f/d)}s[a-1][1]+=s[a-1][0]=r,Kh(e,t)}}var XM=["type","size","sizeType"];function R2(){return R2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},R2.apply(null,arguments)}function ZS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function JS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZS(Object(r),!0).forEach(function(a){ZM(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ZM(e,t,r){return(t=JM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JM(e){var t=QM(e,"string");return typeof t=="symbol"?t:t+""}function QM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eI(e,t){if(e==null)return{};var r,a,s=tI(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function tI(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var dE={symbolCircle:Jw,symbolCross:jM,symbolDiamond:NM,symbolSquare:SM,symbolStar:EM,symbolTriangle:PM,symbolWye:OM},rI=Math.PI/180,aI=e=>{var t="symbol".concat(Jp(e));return dE[t]||Jw},nI=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*rI;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},sI=(e,t)=>{dE["symbol".concat(Jp(e))]=t},Qw=e=>{var{type:t="circle",size:r=64,sizeType:a="area"}=e,s=eI(e,XM),i=JS(JS({},s),{},{type:t,size:r,sizeType:a}),l=()=>{var g=aI(t),v=DM().type(g).size(nI(r,a,t));return v()},{className:u,cx:d,cy:f}=i,m=Yr(i,!0);return d===+d&&f===+f&&r===+r?_.createElement("path",R2({},m,{className:oa("recharts-symbols",u),transform:"translate(".concat(d,", ").concat(f,")"),d:l()})):null};Qw.registerSymbol=sI;function L2(){return L2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},L2.apply(null,arguments)}function QS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function iI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QS(Object(r),!0).forEach(function(a){ej(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ej(e,t,r){return(t=oI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oI(e){var t=lI(e,"string");return typeof t=="symbol"?t:t+""}function lI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _o=32;class tj extends _.PureComponent{renderIcon(t,r){var{inactiveColor:a}=this.props,s=_o/2,i=_o/6,l=_o/3,u=t.inactive?a:t.color,d=r??t.type;if(d==="none")return null;if(d==="plainline")return _.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:s,x2:_o,y2:s,className:"recharts-legend-icon"});if(d==="line")return _.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(_o,"M").concat(2*l,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(d==="rect")return _.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(_o/8,"h").concat(_o,"v").concat(_o*3/4,"h").concat(-_o,"z"),className:"recharts-legend-icon"});if(_.isValidElement(t.legendIcon)){var f=iI({},t);return delete f.legendIcon,_.cloneElement(t.legendIcon,f)}return _.createElement(Qw,{fill:u,cx:s,cy:s,size:_o,sizeType:"diameter",type:d})}renderItems(){var{payload:t,iconSize:r,layout:a,formatter:s,inactiveColor:i,iconType:l}=this.props,u={x:0,y:0,width:_o,height:_o},d={display:a==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((m,g)=>{var v=m.formatter||s,x=oa({"recharts-legend-item":!0,["legend-item-".concat(g)]:!0,inactive:m.inactive});if(m.type==="none")return null;var j=m.inactive?i:m.color,b=v?v(m.value,m,g):m.value;return _.createElement("li",L2({className:x,style:d,key:"legend-item-".concat(g)},Qp(this.props,m,g)),_.createElement(Yw,{width:r,height:r,viewBox:u,style:f,"aria-label":"".concat(b," legend icon")},this.renderIcon(m,l)),_.createElement("span",{className:"recharts-legend-item-text",style:{color:j}},b))})}render(){var{payload:t,layout:r,align:a}=this.props;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?a:"left"};return _.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}ej(tj,"displayName","Legend");ej(tj,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var gb={},xb={},e4;function cI(){return e4||(e4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){const s=new Map;for(let i=0;i<r.length;i++){const l=r[i],u=a(l);s.has(u)||s.set(u,l)}return Array.from(s.values())}e.uniqBy=t}(xb)),xb}var vb={},t4;function fE(){return t4||(t4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(vb)),vb}var yb={},bb={},wb={},r4;function uI(){return r4||(r4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(wb)),wb}var a4;function rj(){return a4||(a4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uI();function r(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=r}(bb)),bb}var jb={},n4;function dI(){return n4||(n4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(jb)),jb}var s4;function fI(){return s4||(s4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rj(),r=dI();function a(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=a}(yb)),yb}var _b={},Nb={},i4;function hI(){return i4||(i4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gw();function r(a){return function(s){return t.get(s,a)}}e.property=r}(Nb)),Nb}var Sb={},Ab={},Cb={},kb={},o4;function hE(){return o4||(o4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(kb)),kb}var Eb={},l4;function mE(){return l4||(l4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(Eb)),Eb}var Pb={},c4;function aj(){return c4||(c4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){return r===a||Number.isNaN(r)&&Number.isNaN(a)}e.eq=t}(Pb)),Pb}var u4;function mI(){return u4||(u4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nj(),r=hE(),a=mE(),s=aj();function i(g,v,x){return typeof x!="function"?t.isMatch(g,v):l(g,v,function j(b,A,S,T,E,D){const L=x(b,A,S,T,E,D);return L!==void 0?!!L:l(b,A,j,D)},new Map)}function l(g,v,x,j){if(v===g)return!0;switch(typeof v){case"object":return u(g,v,x,j);case"function":return Object.keys(v).length>0?l(g,{...v},x,j):s.eq(g,v);default:return r.isObject(g)?typeof v=="string"?v==="":!0:s.eq(g,v)}}function u(g,v,x,j){if(v==null)return!0;if(Array.isArray(v))return f(g,v,x,j);if(v instanceof Map)return d(g,v,x,j);if(v instanceof Set)return m(g,v,x,j);const b=Object.keys(v);if(g==null)return b.length===0;if(b.length===0)return!0;if(j&&j.has(v))return j.get(v)===g;j&&j.set(v,g);try{for(let A=0;A<b.length;A++){const S=b[A];if(!a.isPrimitive(g)&&!(S in g)||v[S]===void 0&&g[S]!==void 0||v[S]===null&&g[S]!==null||!x(g[S],v[S],S,g,v,j))return!1}return!0}finally{j&&j.delete(v)}}function d(g,v,x,j){if(v.size===0)return!0;if(!(g instanceof Map))return!1;for(const[b,A]of v.entries()){const S=g.get(b);if(x(S,A,b,g,v,j)===!1)return!1}return!0}function f(g,v,x,j){if(v.length===0)return!0;if(!Array.isArray(g))return!1;const b=new Set;for(let A=0;A<v.length;A++){const S=v[A];let T=!1;for(let E=0;E<g.length;E++){if(b.has(E))continue;const D=g[E];let L=!1;if(x(D,S,A,g,v,j)&&(L=!0),L){b.add(E),T=!0;break}}if(!T)return!1}return!0}function m(g,v,x,j){return v.size===0?!0:g instanceof Set?f([...g],[...v],x,j):!1}e.isMatchWith=i,e.isSetMatch=m}(Cb)),Cb}var d4;function nj(){return d4||(d4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mI();function r(a,s){return t.isMatchWith(a,s,()=>{})}e.isMatch=r}(Ab)),Ab}var Tb={},Ob={},Db={},f4;function pE(){return f4||(f4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(a=>Object.prototype.propertyIsEnumerable.call(r,a))}e.getSymbols=t}(Db)),Db}var Rb={},h4;function sj(){return h4||(h4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(Rb)),Rb}var Lb={},m4;function ij(){return m4||(m4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",a="[object Number]",s="[object Boolean]",i="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",f="[object Set]",m="[object Array]",g="[object Function]",v="[object ArrayBuffer]",x="[object Object]",j="[object Error]",b="[object DataView]",A="[object Uint8Array]",S="[object Uint8ClampedArray]",T="[object Uint16Array]",E="[object Uint32Array]",D="[object BigUint64Array]",L="[object Int8Array]",F="[object Int16Array]",z="[object Int32Array]",M="[object BigInt64Array]",U="[object Float32Array]",oe="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=v,e.arrayTag=m,e.bigInt64ArrayTag=M,e.bigUint64ArrayTag=D,e.booleanTag=s,e.dataViewTag=b,e.dateTag=u,e.errorTag=j,e.float32ArrayTag=U,e.float64ArrayTag=oe,e.functionTag=g,e.int16ArrayTag=F,e.int32ArrayTag=z,e.int8ArrayTag=L,e.mapTag=d,e.numberTag=a,e.objectTag=x,e.regexpTag=t,e.setTag=f,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=T,e.uint32ArrayTag=E,e.uint8ArrayTag=A,e.uint8ClampedArrayTag=S}(Lb)),Lb}var Mb={},p4;function pI(){return p4||(p4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(Mb)),Mb}var g4;function gE(){return g4||(g4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pE(),r=sj(),a=ij(),s=mE(),i=pI();function l(m,g){return u(m,void 0,m,new Map,g)}function u(m,g,v,x=new Map,j=void 0){const b=j==null?void 0:j(m,g,v,x);if(b!=null)return b;if(s.isPrimitive(m))return m;if(x.has(m))return x.get(m);if(Array.isArray(m)){const A=new Array(m.length);x.set(m,A);for(let S=0;S<m.length;S++)A[S]=u(m[S],S,v,x,j);return Object.hasOwn(m,"index")&&(A.index=m.index),Object.hasOwn(m,"input")&&(A.input=m.input),A}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const A=new RegExp(m.source,m.flags);return A.lastIndex=m.lastIndex,A}if(m instanceof Map){const A=new Map;x.set(m,A);for(const[S,T]of m)A.set(S,u(T,S,v,x,j));return A}if(m instanceof Set){const A=new Set;x.set(m,A);for(const S of m)A.add(u(S,void 0,v,x,j));return A}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(i.isTypedArray(m)){const A=new(Object.getPrototypeOf(m)).constructor(m.length);x.set(m,A);for(let S=0;S<m.length;S++)A[S]=u(m[S],S,v,x,j);return A}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const A=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return x.set(m,A),d(A,m,v,x,j),A}if(typeof File<"u"&&m instanceof File){const A=new File([m],m.name,{type:m.type});return x.set(m,A),d(A,m,v,x,j),A}if(m instanceof Blob){const A=new Blob([m],{type:m.type});return x.set(m,A),d(A,m,v,x,j),A}if(m instanceof Error){const A=new m.constructor;return x.set(m,A),A.message=m.message,A.name=m.name,A.stack=m.stack,A.cause=m.cause,d(A,m,v,x,j),A}if(typeof m=="object"&&f(m)){const A=Object.create(Object.getPrototypeOf(m));return x.set(m,A),d(A,m,v,x,j),A}return m}function d(m,g,v=m,x,j){const b=[...Object.keys(g),...t.getSymbols(g)];for(let A=0;A<b.length;A++){const S=b[A],T=Object.getOwnPropertyDescriptor(m,S);(T==null||T.writable)&&(m[S]=u(g[S],S,v,x,j))}}function f(m){switch(r.getTag(m)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d}(Ob)),Ob}var x4;function gI(){return x4||(x4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gE();function r(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=r}(Tb)),Tb}var v4;function xI(){return v4||(v4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nj(),r=gI();function a(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=a}(Sb)),Sb}var Ib={},qb={},Fb={},y4;function vI(){return y4||(y4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gE(),r=ij();function a(s,i){return t.cloneDeepWith(s,(l,u,d,f)=>{const m=i==null?void 0:i(l,u,d,f);if(m!=null)return m;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const g=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(g,s),g}case r.argumentsTag:{const g={};return t.copyProperties(g,s),g.length=s.length,g[Symbol.iterator]=s[Symbol.iterator],g}default:return}})}e.cloneDeepWith=a}(Fb)),Fb}var b4;function yI(){return b4||(b4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vI();function r(a){return t.cloneDeepWith(a)}e.cloneDeep=r}(qb)),qb}var Bb={},Ub={},w4;function xE(){return w4||(w4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(a,s=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<s;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=r}(Ub)),Ub}var $b={},j4;function bI(){return j4||(j4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sj();function r(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=r}($b)),$b}var _4;function wI(){return _4||(_4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Uk(),r=xE(),a=bI(),s=Hw();function i(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&(l==null?void 0:l[u])==null?d=s.toPath(u):d=[u],d.length===0)return!1;let f=l;for(let m=0;m<d.length;m++){const g=d[m];if((f==null||!Object.hasOwn(f,g))&&!((Array.isArray(f)||a.isArguments(f))&&r.isIndex(g)&&g<f.length))return!1;f=f[g]}return!0}e.has=i}(Bb)),Bb}var N4;function jI(){return N4||(N4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nj(),r=$k(),a=yI(),s=Gw(),i=wI();function l(u,d){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return d=a.cloneDeep(d),function(f){const m=s.get(f,u);return m===void 0?i.has(f,u):d===void 0?m===void 0:t.isMatch(m,d)}}e.matchesProperty=l}(Ib)),Ib}var S4;function _I(){return S4||(S4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fE(),r=hI(),a=xI(),s=jI();function i(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?s.matchesProperty(l[0],l[1]):a.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=i}(_b)),_b}var A4;function NI(){return A4||(A4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cI(),r=fE(),a=fI(),s=_I();function i(l,u=r.identity){return a.isArrayLikeObject(l)?t.uniqBy(Array.from(l),s.iteratee(u)):[]}e.uniqBy=i}(gb)),gb}var zb,C4;function SI(){return C4||(C4=1,zb=NI().uniqBy),zb}var AI=SI();const k4=Ro(AI);function vE(e,t,r){return t===!0?k4(e,r):typeof t=="function"?k4(e,t):e}var Vb={exports:{}},Hb={},Gb={exports:{}},Kb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E4;function CI(){if(E4)return Kb;E4=1;var e=im();function t(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var r=typeof Object.is=="function"?Object.is:t,a=e.useState,s=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function u(g,v){var x=v(),j=a({inst:{value:x,getSnapshot:v}}),b=j[0].inst,A=j[1];return i(function(){b.value=x,b.getSnapshot=v,d(b)&&A({inst:b})},[g,x,v]),s(function(){return d(b)&&A({inst:b}),g(function(){d(b)&&A({inst:b})})},[g]),l(x),x}function d(g){var v=g.getSnapshot;g=g.value;try{var x=v();return!r(g,x)}catch{return!0}}function f(g,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return Kb.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,Kb}var P4;function kI(){return P4||(P4=1,Gb.exports=CI()),Gb.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T4;function EI(){if(T4)return Hb;T4=1;var e=im(),t=kI();function r(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var a=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return Hb.useSyncExternalStoreWithSelector=function(f,m,g,v,x){var j=i(null);if(j.current===null){var b={hasValue:!1,value:null};j.current=b}else b=j.current;j=u(function(){function S(F){if(!T){if(T=!0,E=F,F=v(F),x!==void 0&&b.hasValue){var z=b.value;if(x(z,F))return D=z}return D=F}if(z=D,a(E,F))return z;var M=v(F);return x!==void 0&&x(z,M)?(E=F,z):(E=F,D=M)}var T=!1,E,D,L=g===void 0?null:g;return[function(){return S(m())},L===null?void 0:function(){return S(L())}]},[m,g,v,x]);var A=s(f,j[0],j[1]);return l(function(){b.hasValue=!0,b.value=A},[A]),d(A),A},Hb}var O4;function PI(){return O4||(O4=1,Vb.exports=EI()),Vb.exports}var TI=PI(),oj=_.createContext(null),OI=e=>e,sn=()=>{var e=_.useContext(oj);return e?e.store.dispatch:OI},Y0=()=>{},DI=()=>Y0,RI=(e,t)=>e===t;function nr(e){var t=_.useContext(oj);return TI.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:DI,t?t.store.getState:Y0,t?t.store.getState:Y0,t?e:Y0,RI)}function LI(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function MI(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function II(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${r}]`)}}var D4=e=>Array.isArray(e)?e:[e];function qI(e){const t=Array.isArray(e[0])?e[0]:e;return II(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function FI(e,t){const r=[],{length:a}=e;for(let s=0;s<a;s++)r.push(e[s].apply(null,t));return r}var BI=class{constructor(e){this.value=e}deref(){return this.value}},UI=typeof WeakRef<"u"?WeakRef:BI,$I=0,R4=1;function b0(){return{s:$I,v:void 0,o:null,p:null}}function yE(e,t={}){let r=b0();const{resultEqualityCheck:a}=t;let s,i=0;function l(){var g;let u=r;const{length:d}=arguments;for(let v=0,x=d;v<x;v++){const j=arguments[v];if(typeof j=="function"||typeof j=="object"&&j!==null){let b=u.o;b===null&&(u.o=b=new WeakMap);const A=b.get(j);A===void 0?(u=b0(),b.set(j,u)):u=A}else{let b=u.p;b===null&&(u.p=b=new Map);const A=b.get(j);A===void 0?(u=b0(),b.set(j,u)):u=A}}const f=u;let m;if(u.s===R4)m=u.v;else if(m=e.apply(null,arguments),i++,a){const v=((g=s==null?void 0:s.deref)==null?void 0:g.call(s))??s;v!=null&&a(v,m)&&(m=v,i!==0&&i--),s=typeof m=="object"&&m!==null||typeof m=="function"?new UI(m):m}return f.s=R4,f.v=m,m}return l.clearCache=()=>{r=b0(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function zI(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...s)=>{let i=0,l=0,u,d={},f=s.pop();typeof f=="object"&&(d=f,f=s.pop()),LI(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const m={...r,...d},{memoize:g,memoizeOptions:v=[],argsMemoize:x=yE,argsMemoizeOptions:j=[]}=m,b=D4(v),A=D4(j),S=qI(s),T=g(function(){return i++,f.apply(null,arguments)},...b),E=x(function(){l++;const L=FI(S,arguments);return u=T.apply(null,L),u},...A);return Object.assign(E,{resultFunc:f,memoizedResultFunc:T,dependencies:S,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:g,argsMemoize:x})};return Object.assign(a,{withTypes:()=>a}),a}var ot=zI(yE),VI=Object.assign((e,t=ot)=>{MI(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),a=r.map(i=>e[i]);return t(a,(...i)=>i.reduce((l,u,d)=>(l[r[d]]=u,l),{}))},{withTypes:()=>VI}),Wb={},Yb={},Xb={},L4;function HI(){return L4||(L4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const r=(a,s,i)=>{if(a!==s){const l=t(a),u=t(s);if(l===u&&l===0){if(a<s)return i==="desc"?1:-1;if(a>s)return i==="desc"?-1:1}return i==="desc"?u-l:l-u}return 0};e.compareValues=r}(Xb)),Xb}var Zb={},Jb={},M4;function bE(){return M4||(M4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(Jb)),Jb}var I4;function GI(){return I4||(I4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bE(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,l){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(a.test(i)||!r.test(i))||l!=null&&Object.hasOwn(l,i)}e.isKey=s}(Zb)),Zb}var q4;function KI(){return q4||(q4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HI(),r=GI(),a=Hw();function s(i,l,u,d){if(i==null)return[];u=d?void 0:u,Array.isArray(i)||(i=Object.values(i)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const f=(x,j)=>{let b=x;for(let A=0;A<j.length&&b!=null;++A)b=b[j[A]];return b},m=(x,j)=>j==null||x==null?j:typeof x=="object"&&"key"in x?Object.hasOwn(j,x.key)?j[x.key]:f(j,x.path):typeof x=="function"?x(j):Array.isArray(x)?f(j,x):typeof j=="object"?j[x]:j,g=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:a.toPath(x)}));return i.map(x=>({original:x,criteria:g.map(j=>m(j,x))})).slice().sort((x,j)=>{for(let b=0;b<g.length;b++){const A=t.compareValues(x.criteria[b],j.criteria[b],u[b]);if(A!==0)return A}return 0}).map(x=>x.original)}e.orderBy=s}(Yb)),Yb}var Qb={},F4;function WI(){return F4||(F4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a=1){const s=[],i=Math.floor(a),l=(u,d)=>{for(let f=0;f<u.length;f++){const m=u[f];Array.isArray(m)&&d<i?l(m,d+1):s.push(m)}};return l(r,0),s}e.flatten=t}(Qb)),Qb}var e1={},B4;function wE(){return B4||(B4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xE(),r=rj(),a=hE(),s=aj();function i(l,u,d){return a.isObject(d)&&(typeof u=="number"&&r.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?s.eq(d[u],l):!1}e.isIterateeCall=i}(e1)),e1}var U4;function YI(){return U4||(U4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KI(),r=WI(),a=wE();function s(i,...l){const u=l.length;return u>1&&a.isIterateeCall(i,l[0],l[1])?l=[]:u>2&&a.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(i,r.flatten(l),["asc"])}e.sortBy=s}(Wb)),Wb}var t1,$4;function XI(){return $4||($4=1,t1=YI().sortBy),t1}var ZI=XI();const rv=Ro(ZI);var jE=e=>e.legend.settings,JI=e=>e.legend.size,QI=e=>e.legend.payload,eq=ot([QI,jE],(e,t)=>{var{itemSorter:r}=t,a=e.flat(1);return r?rv(a,r):a});function tq(){return nr(eq)}var w0=1;function _E(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=_.useState({height:0,left:0,top:0,width:0}),a=_.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),l={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(l.height-t.height)>w0||Math.abs(l.left-t.left)>w0||Math.abs(l.top-t.top)>w0||Math.abs(l.width-t.width)>w0)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function As(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var rq=typeof Symbol=="function"&&Symbol.observable||"@@observable",z4=rq,r1=()=>Math.random().toString(36).substring(7).split("").join("."),aq={INIT:`@@redux/INIT${r1()}`,REPLACE:`@@redux/REPLACE${r1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${r1()}`},mx=aq;function lj(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function NE(e,t,r){if(typeof e!="function")throw new Error(As(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(As(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(As(1));return r(NE)(e,t)}let a=e,s=t,i=new Map,l=i,u=0,d=!1;function f(){l===i&&(l=new Map,i.forEach((A,S)=>{l.set(S,A)}))}function m(){if(d)throw new Error(As(3));return s}function g(A){if(typeof A!="function")throw new Error(As(4));if(d)throw new Error(As(5));let S=!0;f();const T=u++;return l.set(T,A),function(){if(S){if(d)throw new Error(As(6));S=!1,f(),l.delete(T),i=null}}}function v(A){if(!lj(A))throw new Error(As(7));if(typeof A.type>"u")throw new Error(As(8));if(typeof A.type!="string")throw new Error(As(17));if(d)throw new Error(As(9));try{d=!0,s=a(s,A)}finally{d=!1}return(i=l).forEach(T=>{T()}),A}function x(A){if(typeof A!="function")throw new Error(As(10));a=A,v({type:mx.REPLACE})}function j(){const A=g;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(As(11));function T(){const D=S;D.next&&D.next(m())}return T(),{unsubscribe:A(T)}},[z4](){return this}}}return v({type:mx.INIT}),{dispatch:v,subscribe:g,getState:m,replaceReducer:x,[z4]:j}}function nq(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:mx.INIT})>"u")throw new Error(As(12));if(typeof r(void 0,{type:mx.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(As(13))})}function SE(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(r[l]=e[l])}const a=Object.keys(r);let s;try{nq(r)}catch(i){s=i}return function(l={},u){if(s)throw s;let d=!1;const f={};for(let m=0;m<a.length;m++){const g=a[m],v=r[g],x=l[g],j=v(x,u);if(typeof j>"u")throw u&&u.type,new Error(As(14));f[g]=j,d=d||j!==x}return d=d||a.length!==Object.keys(l).length,d?f:l}}function px(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...a)=>t(r(...a)))}function sq(...e){return t=>(r,a)=>{const s=t(r,a);let i=()=>{throw new Error(As(15))};const l={getState:s.getState,dispatch:(d,...f)=>i(d,...f)},u=e.map(d=>d(l));return i=px(...u)(s.dispatch),{...s,dispatch:i}}}function AE(e){return lj(e)&&"type"in e&&typeof e.type=="string"}var CE=Symbol.for("immer-nothing"),V4=Symbol.for("immer-draftable"),Ji=Symbol.for("immer-state");function ml(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Wh=Object.getPrototypeOf;function vf(e){return!!e&&!!e[Ji]}function eu(e){var t;return e?kE(e)||Array.isArray(e)||!!e[V4]||!!((t=e.constructor)!=null&&t[V4])||nv(e)||sv(e):!1}var iq=Object.prototype.constructor.toString();function kE(e){if(!e||typeof e!="object")return!1;const t=Wh(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===iq}function gx(e,t){av(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,a)=>t(a,r,e))}function av(e){const t=e[Ji];return t?t.type_:Array.isArray(e)?1:nv(e)?2:sv(e)?3:0}function M2(e,t){return av(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function EE(e,t,r){const a=av(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function oq(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function nv(e){return e instanceof Map}function sv(e){return e instanceof Set}function Qd(e){return e.copy_||e.base_}function I2(e,t){if(nv(e))return new Map(e);if(sv(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=kE(e);if(t===!0||t==="class_only"&&!r){const a=Object.getOwnPropertyDescriptors(e);delete a[Ji];let s=Reflect.ownKeys(a);for(let i=0;i<s.length;i++){const l=s[i],u=a[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(a[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Wh(e),a)}else{const a=Wh(e);if(a!==null&&r)return{...e};const s=Object.create(a);return Object.assign(s,e)}}function cj(e,t=!1){return iv(e)||vf(e)||!eu(e)||(av(e)>1&&(e.set=e.add=e.clear=e.delete=lq),Object.freeze(e),t&&Object.entries(e).forEach(([r,a])=>cj(a,!0))),e}function lq(){ml(2)}function iv(e){return Object.isFrozen(e)}var cq={};function yf(e){const t=cq[e];return t||ml(0,e),t}var Pp;function PE(){return Pp}function uq(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function H4(e,t){t&&(yf("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function q2(e){F2(e),e.drafts_.forEach(dq),e.drafts_=null}function F2(e){e===Pp&&(Pp=e.parent_)}function G4(e){return Pp=uq(Pp,e)}function dq(e){const t=e[Ji];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function K4(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Ji].modified_&&(q2(t),ml(4)),eu(e)&&(e=xx(t,e),t.parent_||vx(t,e)),t.patches_&&yf("Patches").generateReplacementPatches_(r[Ji].base_,e,t.patches_,t.inversePatches_)):e=xx(t,r,[]),q2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==CE?e:void 0}function xx(e,t,r){if(iv(t))return t;const a=t[Ji];if(!a)return gx(t,(s,i)=>W4(e,a,t,s,i,r)),t;if(a.scope_!==e)return t;if(!a.modified_)return vx(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let i=s,l=!1;a.type_===3&&(i=new Set(s),s.clear(),l=!0),gx(i,(u,d)=>W4(e,a,s,u,d,r,l)),vx(e,s,!1),r&&e.patches_&&yf("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function W4(e,t,r,a,s,i,l){if(vf(s)){const u=i&&t&&t.type_!==3&&!M2(t.assigned_,a)?i.concat(a):void 0,d=xx(e,s,u);if(EE(r,a,d),vf(d))e.canAutoFreeze_=!1;else return}else l&&r.add(s);if(eu(s)&&!iv(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;xx(e,s),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,a)&&vx(e,s)}}function vx(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&cj(t,r)}function fq(e,t){const r=Array.isArray(e),a={type_:r?1:0,scope_:t?t.scope_:PE(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=a,i=uj;r&&(s=[a],i=Tp);const{revoke:l,proxy:u}=Proxy.revocable(s,i);return a.draft_=u,a.revoke_=l,u}var uj={get(e,t){if(t===Ji)return e;const r=Qd(e);if(!M2(r,t))return hq(e,r,t);const a=r[t];return e.finalized_||!eu(a)?a:a===a1(e.base_,t)?(n1(e),e.copy_[t]=U2(a,e)):a},has(e,t){return t in Qd(e)},ownKeys(e){return Reflect.ownKeys(Qd(e))},set(e,t,r){const a=TE(Qd(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const s=a1(Qd(e),t),i=s==null?void 0:s[Ji];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(oq(r,s)&&(r!==void 0||M2(e.base_,t)))return!0;n1(e),B2(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return a1(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,n1(e),B2(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Qd(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty(){ml(11)},getPrototypeOf(e){return Wh(e.base_)},setPrototypeOf(){ml(12)}},Tp={};gx(uj,(e,t)=>{Tp[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Tp.deleteProperty=function(e,t){return Tp.set.call(this,e,t,void 0)};Tp.set=function(e,t,r){return uj.set.call(this,e[0],t,r,e[0])};function a1(e,t){const r=e[Ji];return(r?Qd(r):e)[t]}function hq(e,t,r){var s;const a=TE(t,r);return a?"value"in a?a.value:(s=a.get)==null?void 0:s.call(e.draft_):void 0}function TE(e,t){if(!(t in e))return;let r=Wh(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=Wh(r)}}function B2(e){e.modified_||(e.modified_=!0,e.parent_&&B2(e.parent_))}function n1(e){e.copy_||(e.copy_=I2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var mq=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,a)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const l=this;return function(d=i,...f){return l.produce(d,m=>r.call(this,m,...f))}}typeof r!="function"&&ml(6),a!==void 0&&typeof a!="function"&&ml(7);let s;if(eu(t)){const i=G4(this),l=U2(t,void 0);let u=!0;try{s=r(l),u=!1}finally{u?q2(i):F2(i)}return H4(i,a),K4(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===CE&&(s=void 0),this.autoFreeze_&&cj(s,!0),a){const i=[],l=[];yf("Patches").generateReplacementPatches_(t,s,i,l),a(i,l)}return s}else ml(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let a,s;return[this.produce(t,r,(l,u)=>{a=l,s=u}),a,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){eu(e)||ml(8),vf(e)&&(e=Jc(e));const t=G4(this),r=U2(e,void 0);return r[Ji].isManual_=!0,F2(t),r}finishDraft(e,t){const r=e&&e[Ji];(!r||!r.isManual_)&&ml(9);const{scope_:a}=r;return H4(a,t),K4(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const a=yf("Patches").applyPatches_;return vf(e)?a(e,t):this.produce(e,s=>a(s,t))}};function U2(e,t){const r=nv(e)?yf("MapSet").proxyMap_(e,t):sv(e)?yf("MapSet").proxySet_(e,t):fq(e,t);return(t?t.scope_:PE()).drafts_.push(r),r}function Jc(e){return vf(e)||ml(10,e),OE(e)}function OE(e){if(!eu(e)||iv(e))return e;const t=e[Ji];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=I2(e,t.scope_.immer_.useStrictShallowCopy_)}else r=I2(e,!0);return gx(r,(a,s)=>{EE(r,a,OE(s))}),t&&(t.finalized_=!1),r}var Qi=new mq,DE=Qi.produce;Qi.produceWithPatches.bind(Qi);Qi.setAutoFreeze.bind(Qi);Qi.setUseStrictShallowCopy.bind(Qi);Qi.applyPatches.bind(Qi);Qi.createDraft.bind(Qi);Qi.finishDraft.bind(Qi);function RE(e){return({dispatch:r,getState:a})=>s=>i=>typeof i=="function"?i(r,a,e):s(i)}var pq=RE(),gq=RE,xq=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?px:px.apply(null,arguments)};function To(e,t){function r(...a){if(t){let s=t(...a);if(!s)throw new Error(Xi(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:a[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=a=>AE(a)&&a.type===e,r}var LE=class yp extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,yp.prototype)}static get[Symbol.species](){return yp}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new yp(...t[0].concat(this)):new yp(...t.concat(this))}};function Y4(e){return eu(e)?DE(e,()=>{}):e}function j0(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function vq(e){return typeof e=="boolean"}var yq=()=>function(t){const{thunk:r=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let l=new LE;return r&&(vq(r)?l.push(pq):l.push(gq(r.extraArgument))),l},bq="RTK_autoBatch",X4=e=>t=>{setTimeout(t,e)},wq=(e={type:"raf"})=>t=>(...r)=>{const a=t(...r);let s=!0,i=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:X4(10):e.type==="callback"?e.queueNotification:X4(e.timeout),f=()=>{l=!1,i&&(i=!1,u.forEach(m=>m()))};return Object.assign({},a,{subscribe(m){const g=()=>s&&m(),v=a.subscribe(g);return u.add(m),()=>{v(),u.delete(m)}},dispatch(m){var g;try{return s=!((g=m==null?void 0:m.meta)!=null&&g[bq]),i=!s,i&&(l||(l=!0,d(f))),a.dispatch(m)}finally{s=!0}}})},jq=e=>function(r){const{autoBatch:a=!0}=r??{};let s=new LE(e);return a&&s.push(wq(typeof a=="object"?a:void 0)),s};function _q(e){const t=yq(),{reducer:r=void 0,middleware:a,devTools:s=!0,preloadedState:i=void 0,enhancers:l=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(lj(r))u=SE(r);else throw new Error(Xi(1));let d;typeof a=="function"?d=a(t):d=t();let f=px;s&&(f=xq({trace:!1,...typeof s=="object"&&s}));const m=sq(...d),g=jq(m);let v=typeof l=="function"?l(g):g();const x=f(...v);return NE(u,i,x)}function ME(e){const t={},r=[];let a;const s={addCase(i,l){const u=typeof i=="string"?i:i.type;if(!u)throw new Error(Xi(28));if(u in t)throw new Error(Xi(29));return t[u]=l,s},addMatcher(i,l){return r.push({matcher:i,reducer:l}),s},addDefaultCase(i){return a=i,s}};return e(s),[t,r,a]}function Nq(e){return typeof e=="function"}function Sq(e,t){let[r,a,s]=ME(t),i;if(Nq(e))i=()=>Y4(e());else{const u=Y4(e);i=()=>u}function l(u=i(),d){let f=[r[d.type],...a.filter(({matcher:m})=>m(d)).map(({reducer:m})=>m)];return f.filter(m=>!!m).length===0&&(f=[s]),f.reduce((m,g)=>{if(g)if(vf(m)){const x=g(m,d);return x===void 0?m:x}else{if(eu(m))return DE(m,v=>g(v,d));{const v=g(m,d);if(v===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return m},u)}return l.getInitialState=i,l}var Aq="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Cq=(e=21)=>{let t="",r=e;for(;r--;)t+=Aq[Math.random()*64|0];return t},kq=Symbol.for("rtk-slice-createasyncthunk");function Eq(e,t){return`${e}/${t}`}function Pq({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[kq];return function(s){const{name:i,reducerPath:l=i}=s;if(!i)throw new Error(Xi(11));const u=(typeof s.reducers=="function"?s.reducers(Oq()):s.reducers)||{},d=Object.keys(u),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(D,L){const F=typeof D=="string"?D:D.type;if(!F)throw new Error(Xi(12));if(F in f.sliceCaseReducersByType)throw new Error(Xi(13));return f.sliceCaseReducersByType[F]=L,m},addMatcher(D,L){return f.sliceMatchers.push({matcher:D,reducer:L}),m},exposeAction(D,L){return f.actionCreators[D]=L,m},exposeCaseReducer(D,L){return f.sliceCaseReducersByName[D]=L,m}};d.forEach(D=>{const L=u[D],F={reducerName:D,type:Eq(i,D),createNotation:typeof s.reducers=="function"};Rq(L)?Mq(F,L,m,t):Dq(F,L,m)});function g(){const[D={},L=[],F=void 0]=typeof s.extraReducers=="function"?ME(s.extraReducers):[s.extraReducers],z={...D,...f.sliceCaseReducersByType};return Sq(s.initialState,M=>{for(let U in z)M.addCase(U,z[U]);for(let U of f.sliceMatchers)M.addMatcher(U.matcher,U.reducer);for(let U of L)M.addMatcher(U.matcher,U.reducer);F&&M.addDefaultCase(F)})}const v=D=>D,x=new Map,j=new WeakMap;let b;function A(D,L){return b||(b=g()),b(D,L)}function S(){return b||(b=g()),b.getInitialState()}function T(D,L=!1){function F(M){let U=M[D];return typeof U>"u"&&L&&(U=j0(j,F,S)),U}function z(M=v){const U=j0(x,L,()=>new WeakMap);return j0(U,M,()=>{const oe={};for(const[R,q]of Object.entries(s.selectors??{}))oe[R]=Tq(q,M,()=>j0(j,M,S),L);return oe})}return{reducerPath:D,getSelectors:z,get selectors(){return z(F)},selectSlice:F}}const E={name:i,reducer:A,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:S,...T(l),injectInto(D,{reducerPath:L,...F}={}){const z=L??l;return D.inject({reducerPath:z,reducer:A},F),{...E,...T(z,!0)}}};return E}}function Tq(e,t,r,a){function s(i,...l){let u=t(i);return typeof u>"u"&&a&&(u=r()),e(u,...l)}return s.unwrapped=e,s}var Lo=Pq();function Oq(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Dq({type:e,reducerName:t,createNotation:r},a,s){let i,l;if("reducer"in a){if(r&&!Lq(a))throw new Error(Xi(17));i=a.reducer,l=a.prepare}else i=a;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?To(e,l):To(e))}function Rq(e){return e._reducerDefinitionType==="asyncThunk"}function Lq(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Mq({type:e,reducerName:t},r,a,s){if(!s)throw new Error(Xi(18));const{payloadCreator:i,fulfilled:l,pending:u,rejected:d,settled:f,options:m}=r,g=s(e,i,m);a.exposeAction(t,g),l&&a.addCase(g.fulfilled,l),u&&a.addCase(g.pending,u),d&&a.addCase(g.rejected,d),f&&a.addMatcher(g.settled,f),a.exposeCaseReducer(t,{fulfilled:l||_0,pending:u||_0,rejected:d||_0,settled:f||_0})}function _0(){}var Iq="task",IE="listener",qE="completed",dj="cancelled",qq=`task-${dj}`,Fq=`task-${qE}`,$2=`${IE}-${dj}`,Bq=`${IE}-${qE}`,ov=class{constructor(e){da(this,"name","TaskAbortError");da(this,"message");this.code=e,this.message=`${Iq} ${dj} (reason: ${e})`}},fj=(e,t)=>{if(typeof e!="function")throw new TypeError(Xi(32))},yx=()=>{},FE=(e,t=yx)=>(e.catch(t),e),BE=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ff=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},hf=e=>{if(e.aborted){const{reason:t}=e;throw new ov(t)}};function UE(e,t){let r=yx;return new Promise((a,s)=>{const i=()=>s(new ov(e.reason));if(e.aborted){i();return}r=BE(e,i),t.finally(()=>r()).then(a,s)}).finally(()=>{r=yx})}var Uq=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof ov?"cancelled":"rejected",error:r}}finally{t==null||t()}},bx=e=>t=>FE(UE(e,t).then(r=>(hf(e),r))),$E=e=>{const t=bx(e);return r=>t(new Promise(a=>setTimeout(a,r)))},{assign:Fh}=Object,Z4={},lv="listenerMiddleware",$q=(e,t)=>{const r=a=>BE(e,()=>ff(a,e.reason));return(a,s)=>{fj(a);const i=new AbortController;r(i);const l=Uq(async()=>{hf(e),hf(i.signal);const u=await a({pause:bx(i.signal),delay:$E(i.signal),signal:i.signal});return hf(i.signal),u},()=>ff(i,Fq));return s!=null&&s.autoJoin&&t.push(l.catch(yx)),{result:bx(e)(l),cancel(){ff(i,qq)}}}},zq=(e,t)=>{const r=async(a,s)=>{hf(t);let i=()=>{};const u=[new Promise((d,f)=>{let m=e({predicate:a,effect:(g,v)=>{v.unsubscribe(),d([g,v.getState(),v.getOriginalState()])}});i=()=>{m(),f()}})];s!=null&&u.push(new Promise(d=>setTimeout(d,s,null)));try{const d=await UE(t,Promise.race(u));return hf(t),d}finally{i()}};return(a,s)=>FE(r(a,s))},zE=e=>{let{type:t,actionCreator:r,matcher:a,predicate:s,effect:i}=e;if(t)s=To(t).match;else if(r)t=r.type,s=r.match;else if(a)s=a;else if(!s)throw new Error(Xi(21));return fj(i),{predicate:s,type:t,effect:i}},VE=Fh(e=>{const{type:t,predicate:r,effect:a}=zE(e);return{id:Cq(),effect:a,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Xi(22))}}},{withTypes:()=>VE}),J4=(e,t)=>{const{type:r,effect:a,predicate:s}=zE(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===a)},z2=e=>{e.pending.forEach(t=>{ff(t,$2)})},Vq=e=>()=>{e.forEach(z2),e.clear()},Q4=(e,t,r)=>{try{e(t,r)}catch(a){setTimeout(()=>{throw a},0)}},HE=Fh(To(`${lv}/add`),{withTypes:()=>HE}),Hq=To(`${lv}/removeAll`),GE=Fh(To(`${lv}/remove`),{withTypes:()=>GE}),Gq=(...e)=>{console.error(`${lv}/error`,...e)},tg=(e={})=>{const t=new Map,{extra:r,onError:a=Gq}=e;fj(a);const s=m=>(m.unsubscribe=()=>t.delete(m.id),t.set(m.id,m),g=>{m.unsubscribe(),g!=null&&g.cancelActive&&z2(m)}),i=m=>{const g=J4(t,m)??VE(m);return s(g)};Fh(i,{withTypes:()=>i});const l=m=>{const g=J4(t,m);return g&&(g.unsubscribe(),m.cancelActive&&z2(g)),!!g};Fh(l,{withTypes:()=>l});const u=async(m,g,v,x)=>{const j=new AbortController,b=zq(i,j.signal),A=[];try{m.pending.add(j),await Promise.resolve(m.effect(g,Fh({},v,{getOriginalState:x,condition:(S,T)=>b(S,T).then(Boolean),take:b,delay:$E(j.signal),pause:bx(j.signal),extra:r,signal:j.signal,fork:$q(j.signal,A),unsubscribe:m.unsubscribe,subscribe:()=>{t.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((S,T,E)=>{S!==j&&(ff(S,$2),E.delete(S))})},cancel:()=>{ff(j,$2),m.pending.delete(j)},throwIfCancelled:()=>{hf(j.signal)}})))}catch(S){S instanceof ov||Q4(a,S,{raisedBy:"effect"})}finally{await Promise.all(A),ff(j,Bq),m.pending.delete(j)}},d=Vq(t);return{middleware:m=>g=>v=>{if(!AE(v))return g(v);if(HE.match(v))return i(v.payload);if(Hq.match(v)){d();return}if(GE.match(v))return l(v.payload);let x=m.getState();const j=()=>{if(x===Z4)throw new Error(Xi(23));return x};let b;try{if(b=g(v),t.size>0){const A=m.getState(),S=Array.from(t.values());for(const T of S){let E=!1;try{E=T.predicate(v,A,x)}catch(D){E=!1,Q4(a,D,{raisedBy:"predicate"})}E&&u(T,v,m,j)}}}finally{x=Z4}return b},startListening:i,stopListening:l,clearListeners:d}};function Xi(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Kq={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},KE=Lo({name:"chartLayout",initialState:Kq,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:Wq,setLayout:Yq,setChartSize:Xq,setScale:Zq}=KE.actions,Jq=KE.reducer;function e3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function t3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e3(Object(r),!0).forEach(function(a){Qq(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Qq(e,t,r){return(t=eF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eF(e){var t=tF(e,"string");return typeof t=="symbol"?t:t+""}function tF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wx=Math.PI/180,rF=e=>e*180/Math.PI,Un=(e,t,r,a)=>({x:e+Math.cos(-wx*a)*r,y:t+Math.sin(-wx*a)*r}),WE=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(r-(a.top||0)-(a.bottom||0)))/2},aF=(e,t)=>{var{x:r,y:a}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(a-i)**2)},nF=(e,t)=>{var{x:r,y:a}=e,{cx:s,cy:i}=t,l=aF({x:r,y:a},{x:s,y:i});if(l<=0)return{radius:l,angle:0};var u=(r-s)/l,d=Math.acos(u);return a>i&&(d=2*Math.PI-d),{radius:l,angle:rF(d),angleInRadian:d}},sF=e=>{var{startAngle:t,endAngle:r}=e,a=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(a,s);return{startAngle:t-i*360,endAngle:r-i*360}},iF=(e,t)=>{var{startAngle:r,endAngle:a}=t,s=Math.floor(r/360),i=Math.floor(a/360),l=Math.min(s,i);return e+l*360},oF=(e,t)=>{var{x:r,y:a}=e,{radius:s,angle:i}=nF({x:r,y:a},t),{innerRadius:l,outerRadius:u}=t;if(s<l||s>u||s===0)return null;var{startAngle:d,endAngle:f}=sF(t),m=i,g;if(d<=f){for(;m>f;)m-=360;for(;m<d;)m+=360;g=m>=d&&m<=f}else{for(;m>d;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=d}return g?t3(t3({},t),{},{radius:s,angle:iF(m,t)}):null};function r3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ao(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r3(Object(r),!0).forEach(function(a){lF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function lF(e,t,r){return(t=cF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cF(e){var t=uF(e,"string");return typeof t=="symbol"?t:t+""}function uF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ga(e,t,r){return qa(e)||qa(t)?r:nc(t)?dd(e,t,r):typeof t=="function"?t(e):r}var dF=(e,t,r,a,s)=>{var i,l=-1,u=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(u<=1||e==null)return 0;if(a==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var d=0;d<u;d++){var f=d>0?r[d-1].coordinate:r[u-1].coordinate,m=r[d].coordinate,g=d>=u-1?r[0].coordinate:r[d+1].coordinate,v=void 0;if(ms(m-f)!==ms(g-m)){var x=[];if(ms(g-m)===ms(s[1]-s[0])){v=g;var j=m+s[1]-s[0];x[0]=Math.min(j,(j+f)/2),x[1]=Math.max(j,(j+f)/2)}else{v=f;var b=g+s[1]-s[0];x[0]=Math.min(m,(b+m)/2),x[1]=Math.max(m,(b+m)/2)}var A=[Math.min(m,(v+m)/2),Math.max(m,(v+m)/2)];if(e>A[0]&&e<=A[1]||e>=x[0]&&e<=x[1]){({index:l}=r[d]);break}}else{var S=Math.min(f,g),T=Math.max(f,g);if(e>(S+m)/2&&e<=(T+m)/2){({index:l}=r[d]);break}}}else if(t){for(var E=0;E<u;E++)if(E===0&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E>0&&E<u-1&&e>(t[E].coordinate+t[E-1].coordinate)/2&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E===u-1&&e>(t[E].coordinate+t[E-1].coordinate)/2){({index:l}=t[E]);break}}return l},fF=(e,t,r)=>{if(t&&r){var{width:a,height:s}=r,{align:i,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&i!=="center"&&Xt(e[i]))return Ao(Ao({},e),{},{[i]:e[i]+(a||0)});if((u==="horizontal"||u==="vertical"&&i==="center")&&l!=="middle"&&Xt(e[l]))return Ao(Ao({},e),{},{[l]:e[l]+(s||0)})}return e},bd=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",YE=(e,t,r,a)=>{if(a)return e.map(u=>u.coordinate);var s,i,l=e.map(u=>(u.coordinate===t&&(s=!0),u.coordinate===r&&(i=!0),u.coordinate));return s||l.push(t),i||l.push(r),l},XE=(e,t,r)=>{if(!e)return null;var{duplicateDomain:a,type:s,range:i,scale:l,realScaleType:u,isCategorical:d,categoricalDomain:f,tickCount:m,ticks:g,niceTicks:v,axisType:x}=e;if(!l)return null;var j=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,b=s==="category"&&l.bandwidth?l.bandwidth()/j:0;if(b=x==="angleAxis"&&i&&i.length>=2?ms(i[0]-i[1])*2*b:b,g||v){var A=(g||v||[]).map((S,T)=>{var E=a?a.indexOf(S):S;return{coordinate:l(E)+b,value:S,offset:b,index:T}});return A.filter(S=>!Zi(S.coordinate))}return d&&f?f.map((S,T)=>({coordinate:l(S)+b,value:S,index:T,offset:b})):l.ticks&&m!=null?l.ticks(m).map((S,T)=>({coordinate:l(S)+b,value:S,offset:b,index:T})):l.domain().map((S,T)=>({coordinate:l(S)+b,value:a?a[S]:S,index:T,offset:b}))},a3=1e-4,hF=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,a=e.range(),s=Math.min(a[0],a[1])-a3,i=Math.max(a[0],a[1])+a3,l=e(t[0]),u=e(t[r-1]);(l<s||l>i||u<s||u>i)&&e.domain([t[0],t[r-1]])}},mF=(e,t)=>{if(!t||t.length!==2||!Xt(t[0])||!Xt(t[1]))return e;var r=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!Xt(e[0])||e[0]<r)&&(s[0]=r),(!Xt(e[1])||e[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<r&&(s[1]=r),s},pF=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var s=0,i=0,l=0;l<t;++l){var u=Zi(e[l][r][1])?e[l][r][0]:e[l][r][1];u>=0?(e[l][r][0]=s,e[l][r][1]=s+u,s=e[l][r][1]):(e[l][r][0]=i,e[l][r][1]=i+u,i=e[l][r][1])}},gF=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var s=0,i=0;i<t;++i){var l=Zi(e[i][r][1])?e[i][r][0]:e[i][r][1];l>=0?(e[i][r][0]=s,e[i][r][1]=s+l,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},xF={sign:pF,expand:KM,none:Kh,silhouette:WM,wiggle:YM,positive:gF},vF=(e,t,r)=>{var a=xF[r],s=GM().keys(t).value((i,l)=>+Ga(i,l,0)).order(D2).offset(a);return s(e)};function ZE(e){return e==null?void 0:String(e)}function n3(e){var{axis:t,ticks:r,bandSize:a,entry:s,index:i,dataKey:l}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!qa(s[t.dataKey])){var u=Vk(r,"value",s[t.dataKey]);if(u)return u.coordinate+a/2}return r[i]?r[i].coordinate+a/2:null}var d=Ga(s,qa(l)?t.dataKey:l);return qa(d)?null:t.scale(d)}var s3=e=>{var{axis:t,ticks:r,offset:a,bandSize:s,entry:i,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+a:null;var u=Ga(i,t.dataKey,t.scale.domain()[l]);return qa(u)?null:t.scale(u)-s/2+a},yF=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return a<=0&&s>=0?0:s<0?s:a}return r[0]},bF=e=>{var t=e.flat(2).filter(Xt);return[Math.min(...t),Math.max(...t)]},wF=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],jF=(e,t,r)=>{if(e!=null)return wF(Object.keys(e).reduce((a,s)=>{var i=e[s],{stackedData:l}=i,u=l.reduce((d,f)=>{var m=bF(f.slice(t,r+1));return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],a[0]),Math.max(u[1],a[1])]},[1/0,-1/0]))},i3=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,o3=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Op=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!r||a>0)return a}if(e&&t&&t.length>=2){for(var s=rv(t,m=>m.coordinate),i=1/0,l=1,u=s.length;l<u;l++){var d=s[l],f=s[l-1];i=Math.min((d.coordinate||0)-(f.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function l3(e){var{tooltipEntrySettings:t,dataKey:r,payload:a,value:s,name:i}=e;return Ao(Ao({},t),{},{dataKey:r,payload:a,value:s,name:i})}function lm(e,t){if(e)return String(e);if(typeof t=="string")return t}function _F(e,t,r,a,s){if(r==="horizontal"||r==="vertical"){var i=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return i?{x:e,y:t}:null}return a?oF({x:e,y:t},a):null}var NF=(e,t,r,a)=>{var s=t.find(f=>f&&f.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,{radius:l}=a;return Ao(Ao(Ao({},a),Un(a.cx,a.cy,l,i)),{},{angle:i,radius:l})}var u=s.coordinate,{angle:d}=a;return Ao(Ao(Ao({},a),Un(a.cx,a.cy,u,d)),{},{angle:d,radius:u})}return{x:0,y:0}},SF=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,lu=e=>e.layout.width,cu=e=>e.layout.height,AF=e=>e.layout.scale,JE=e=>e.layout.margin,hj=ot(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),mj=ot(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),QE="data-recharts-item-index",eP="data-recharts-item-data-key",cv=60;function c3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Xu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c3(Object(r),!0).forEach(function(a){CF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function CF(e,t,r){return(t=kF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kF(e){var t=EF(e,"string");return typeof t=="symbol"?t:t+""}function EF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PF=e=>e.brush.height,Jn=ot([lu,cu,JE,PF,hj,mj,jE,JI],(e,t,r,a,s,i,l,u)=>{var d=i.reduce((j,b)=>{var{orientation:A}=b;if(!b.mirror&&!b.hide){var S=typeof b.width=="number"?b.width:cv;return Xu(Xu({},j),{},{[A]:j[A]+S})}return j},{left:r.left||0,right:r.right||0}),f=s.reduce((j,b)=>{var{orientation:A}=b;return!b.mirror&&!b.hide?Xu(Xu({},j),{},{[A]:dd(j,"".concat(A))+b.height}):j},{top:r.top||0,bottom:r.bottom||0}),m=Xu(Xu({},f),d),g=m.bottom;m.bottom+=a,m=fF(m,l,u);var v=e-m.left-m.right,x=t-m.top-m.bottom;return Xu(Xu({brushBottom:g},m),{},{width:Math.max(v,0),height:Math.max(x,0)})}),TF=ot(Jn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),tP=ot(lu,cu,(e,t)=>({x:0,y:0,width:e,height:t})),OF=_.createContext(null),li=()=>_.useContext(OF)!=null,uv=e=>e.brush,dv=ot([uv,Jn,JE],(e,t,r)=>({height:e.height,x:Xt(e.x)?e.x:t.left,y:Xt(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Xt(e.width)?e.width:t.width})),pj=()=>{var e,t=li(),r=nr(TF),a=nr(dv),s=(e=nr(uv))===null||e===void 0?void 0:e.padding;return!t||!a||!s?r:{width:a.width-s.left-s.right,height:a.height-s.top-s.bottom,x:s.left,y:s.top}},DF={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},rP=()=>{var e;return(e=nr(Jn))!==null&&e!==void 0?e:DF},gj=()=>nr(lu),xj=()=>nr(cu),RF={top:0,right:0,bottom:0,left:0},LF=()=>{var e;return(e=nr(t=>t.layout.margin))!==null&&e!==void 0?e:RF},fa=e=>e.layout.layoutType,fv=()=>nr(fa),MF={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},aP=Lo({name:"legend",initialState:MF,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=Jc(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:u3,setLegendSettings:IF,addLegendPayload:nP,removeLegendPayload:sP}=aP.actions,qF=aP.reducer,FF=["contextPayload"];function V2(){return V2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},V2.apply(null,arguments)}function d3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Yh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d3(Object(r),!0).forEach(function(a){vj(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function vj(e,t,r){return(t=BF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BF(e){var t=UF(e,"string");return typeof t=="symbol"?t:t+""}function UF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $F(e,t){if(e==null)return{};var r,a,s=zF(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function zF(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function VF(e){return e.value}function HF(e){var{contextPayload:t}=e,r=$F(e,FF),a=vE(t,e.payloadUniqBy,VF),s=Yh(Yh({},r),{},{payload:a});return _.isValidElement(e.content)?_.cloneElement(e.content,s):typeof e.content=="function"?_.createElement(e.content,s):_.createElement(tj,s)}function GF(e,t,r,a,s,i){var{layout:l,align:u,verticalAlign:d}=t,f,m;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&l==="vertical"?f={left:((a||0)-i.width)/2}:f=u==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(d==="middle"?m={top:((s||0)-i.height)/2}:m=d==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Yh(Yh({},f),m)}function KF(e){var t=sn();return _.useEffect(()=>{t(IF(e))},[t,e]),null}function WF(e){var t=sn();return _.useEffect(()=>(t(u3(e)),()=>{t(u3({width:0,height:0}))}),[t,e]),null}function YF(e){var t=tq(),r=gM(),a=LF(),{width:s,height:i,wrapperStyle:l,portal:u}=e,[d,f]=_E([t]),m=gj(),g=xj(),v=m-(a.left||0)-(a.right||0),x=Es.getWidthOrHeight(e.layout,i,s,v),j=u?l:Yh(Yh({position:"absolute",width:(x==null?void 0:x.width)||s||"auto",height:(x==null?void 0:x.height)||i||"auto"},GF(l,e,a,m,g,d)),l),b=u??r;if(b==null)return null;var A=_.createElement("div",{className:"recharts-legend-wrapper",style:j,ref:f},_.createElement(KF,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),_.createElement(WF,{width:d.width,height:d.height}),_.createElement(HF,V2({},e,x,{margin:a,chartWidth:m,chartHeight:g,contextPayload:t})));return Kk.createPortal(A,b)}class Es extends _.PureComponent{static getWidthOrHeight(t,r,a,s){return t==="vertical"&&Xt(r)?{height:r}:t==="horizontal"?{width:a||s}:null}render(){return _.createElement(YF,this.props)}}vj(Es,"displayName","Legend");vj(Es,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function H2(){return H2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},H2.apply(null,arguments)}function f3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function s1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f3(Object(r),!0).forEach(function(a){XF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function XF(e,t,r){return(t=ZF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZF(e){var t=JF(e,"string");return typeof t=="symbol"?t:t+""}function JF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QF(e){return Array.isArray(e)&&nc(e[0])&&nc(e[1])?e.join(" ~ "):e}var e9=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:a={},labelStyle:s={},payload:i,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:f,label:m,labelFormatter:g,accessibilityLayer:v=!1}=e,x=()=>{if(i&&i.length){var L={padding:0,margin:0},F=(u?rv(i,u):i).map((z,M)=>{if(z.type==="none")return null;var U=z.formatter||l||QF,{value:oe,name:R}=z,q=oe,se=R;if(U){var J=U(oe,R,z,M,i);if(Array.isArray(J))[q,se]=J;else if(J!=null)q=J;else return null}var Q=s1({display:"block",paddingTop:4,paddingBottom:4,color:z.color||"#000"},a);return _.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(M),style:Q},nc(se)?_.createElement("span",{className:"recharts-tooltip-item-name"},se):null,nc(se)?_.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,_.createElement("span",{className:"recharts-tooltip-item-value"},q),_.createElement("span",{className:"recharts-tooltip-item-unit"},z.unit||""))});return _.createElement("ul",{className:"recharts-tooltip-item-list",style:L},F)}return null},j=s1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),b=s1({margin:0},s),A=!qa(m),S=A?m:"",T=oa("recharts-default-tooltip",d),E=oa("recharts-tooltip-label",f);A&&g&&i!==void 0&&i!==null&&(S=g(m,i));var D=v?{role:"status","aria-live":"assertive"}:{};return _.createElement("div",H2({className:T,style:j},D),_.createElement("p",{className:E,style:b},_.isValidElement(S)?S:"".concat(S)),x())},lp="recharts-tooltip-wrapper",t9={visibility:"hidden"};function r9(e){var{coordinate:t,translateX:r,translateY:a}=e;return oa(lp,{["".concat(lp,"-right")]:Xt(r)&&t&&Xt(t.x)&&r>=t.x,["".concat(lp,"-left")]:Xt(r)&&t&&Xt(t.x)&&r<t.x,["".concat(lp,"-bottom")]:Xt(a)&&t&&Xt(t.y)&&a>=t.y,["".concat(lp,"-top")]:Xt(a)&&t&&Xt(t.y)&&a<t.y})}function h3(e){var{allowEscapeViewBox:t,coordinate:r,key:a,offsetTopLeft:s,position:i,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:f}=e;if(i&&Xt(i[a]))return i[a];var m=r[a]-u-(s>0?s:0),g=r[a]+s;if(t[a])return l[a]?m:g;var v=d[a];if(v==null)return 0;if(l[a]){var x=m,j=v;return x<j?Math.max(g,v):Math.max(m,v)}if(f==null)return 0;var b=g+u,A=v+f;return b>A?Math.max(m,v):Math.max(g,v)}function a9(e){var{translateX:t,translateY:r,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function n9(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:a,position:s,reverseDirection:i,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,f,m,g;return l.height>0&&l.width>0&&r?(m=h3({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),g=h3({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),f=a9({translateX:m,translateY:g,useTranslate3d:u})):f=t9,{cssProperties:f,cssClasses:r9({translateX:m,translateY:g,coordinate:r})}}function m3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function N0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m3(Object(r),!0).forEach(function(a){G2(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function G2(e,t,r){return(t=s9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s9(e){var t=i9(e,"string");return typeof t=="symbol"?t:t+""}function i9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class o9 extends _.PureComponent{constructor(){super(...arguments),G2(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),G2(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,a,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:a,animationEasing:s,children:i,coordinate:l,hasPayload:u,isAnimationActive:d,offset:f,position:m,reverseDirection:g,useTranslate3d:v,viewBox:x,wrapperStyle:j,lastBoundingBox:b,innerRef:A,hasPortalFromProps:S}=this.props,{cssClasses:T,cssProperties:E}=n9({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:f,position:m,reverseDirection:g,tooltipBox:{height:b.height,width:b.width},useTranslate3d:v,viewBox:x}),D=S?{}:N0(N0({transition:d&&t?"transform ".concat(a,"ms ").concat(s):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),L=N0(N0({},D),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},j);return _.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:T,style:L,ref:A},i)}}var l9=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Af={isSsr:l9()},iP=()=>nr(e=>e.rootProps.accessibilityLayer);function eo(e){return Number.isFinite(e)}function Xh(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function K2(){return K2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},K2.apply(null,arguments)}function p3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function g3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p3(Object(r),!0).forEach(function(a){c9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function c9(e,t,r){return(t=u9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u9(e){var t=d9(e,"string");return typeof t=="symbol"?t:t+""}function d9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var x3={curveBasisClosed:LM,curveBasisOpen:MM,curveBasis:RM,curveBumpX:bM,curveBumpY:wM,curveLinearClosed:IM,curveLinear:ev,curveMonotoneX:qM,curveMonotoneY:FM,curveNatural:BM,curveStep:UM,curveStepAfter:zM,curveStepBefore:$M},S0=e=>eo(e.x)&&eo(e.y),cp=e=>e.x,up=e=>e.y,f9=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Jp(e));return(r==="curveMonotone"||r==="curveBump")&&t?x3["".concat(r).concat(t==="vertical"?"Y":"X")]:x3[r]||ev},h9=e=>{var{type:t="linear",points:r=[],baseLine:a,layout:s,connectNulls:i=!1}=e,l=f9(t,s),u=i?r.filter(S0):r,d;if(Array.isArray(a)){var f=i?a.filter(g=>S0(g)):a,m=u.map((g,v)=>g3(g3({},g),{},{base:f[v]}));return s==="vertical"?d=y0().y(up).x1(cp).x0(g=>g.base.x):d=y0().x(cp).y1(up).y0(g=>g.base.y),d.defined(S0).curve(l),d(m)}return s==="vertical"&&Xt(a)?d=y0().y(up).x1(cp).x0(a):Xt(a)?d=y0().x(cp).y1(up).y0(a):d=eE().x(cp).y(up),d.defined(S0).curve(l),d(u)},yj=e=>{var{className:t,points:r,path:a,pathRef:s}=e;if((!r||!r.length)&&!a)return null;var i=r&&r.length?h9(e):a;return _.createElement("path",K2({},Yr(e,!1),Ww(e),{className:oa("recharts-curve",t),d:i===null?void 0:i,ref:s}))},m9=["x","y","top","left","width","height","className"];function W2(){return W2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},W2.apply(null,arguments)}function v3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function p9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v3(Object(r),!0).forEach(function(a){g9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function g9(e,t,r){return(t=x9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x9(e){var t=v9(e,"string");return typeof t=="symbol"?t:t+""}function v9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y9(e,t){if(e==null)return{};var r,a,s=b9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function b9(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var w9=(e,t,r,a,s,i)=>"M".concat(e,",").concat(s,"v").concat(a,"M").concat(i,",").concat(t,"h").concat(r),j9=e=>{var{x:t=0,y:r=0,top:a=0,left:s=0,width:i=0,height:l=0,className:u}=e,d=y9(e,m9),f=p9({x:t,y:r,top:a,left:s,width:i,height:l},d);return!Xt(t)||!Xt(r)||!Xt(i)||!Xt(l)||!Xt(a)||!Xt(s)?null:_.createElement("path",W2({},Yr(f,!0),{className:oa("recharts-cross",u),d:w9(t,r,i,l,a,s)}))};function _9(e,t,r,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function y3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function N9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y3(Object(r),!0).forEach(function(a){S9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function S9(e,t,r){return(t=A9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A9(e){var t=C9(e,"string");return typeof t=="symbol"?t:t+""}function C9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mo(e,t){var r=N9({},e),a=t,s=Object.keys(t),i=s.reduce((l,u)=>(l[u]===void 0&&a[u]!==void 0&&(l[u]=a[u]),l),r);return i}var i1={},o1={},l1={},b3;function k9(){return b3||(b3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const a=Object.getPrototypeOf(r);return a===null||a===Object.prototype||Object.getPrototypeOf(a)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(l1)),l1}var w3;function E9(){return w3||(w3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k9(),r=pE(),a=sj(),s=ij(),i=aj();function l(f,m,g){return u(f,m,void 0,void 0,void 0,void 0,g)}function u(f,m,g,v,x,j,b){const A=b(f,m,g,v,x,j);if(A!==void 0)return A;if(typeof f==typeof m)switch(typeof f){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return f===m;case"number":return f===m||Object.is(f,m);case"function":return f===m;case"object":return d(f,m,j,b)}return d(f,m,j,b)}function d(f,m,g,v){if(Object.is(f,m))return!0;let x=a.getTag(f),j=a.getTag(m);if(x===s.argumentsTag&&(x=s.objectTag),j===s.argumentsTag&&(j=s.objectTag),x!==j)return!1;switch(x){case s.stringTag:return f.toString()===m.toString();case s.numberTag:{const S=f.valueOf(),T=m.valueOf();return i.eq(S,T)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(f.valueOf(),m.valueOf());case s.regexpTag:return f.source===m.source&&f.flags===m.flags;case s.functionTag:return f===m}g=g??new Map;const b=g.get(f),A=g.get(m);if(b!=null&&A!=null)return b===m;g.set(f,m),g.set(m,f);try{switch(x){case s.mapTag:{if(f.size!==m.size)return!1;for(const[S,T]of f.entries())if(!m.has(S)||!u(T,m.get(S),S,f,m,g,v))return!1;return!0}case s.setTag:{if(f.size!==m.size)return!1;const S=Array.from(f.values()),T=Array.from(m.values());for(let E=0;E<S.length;E++){const D=S[E],L=T.findIndex(F=>u(D,F,void 0,f,m,g,v));if(L===-1)return!1;T.splice(L,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(f)!==Buffer.isBuffer(m)||f.length!==m.length)return!1;for(let S=0;S<f.length;S++)if(!u(f[S],m[S],S,f,m,g,v))return!1;return!0}case s.arrayBufferTag:return f.byteLength!==m.byteLength?!1:d(new Uint8Array(f),new Uint8Array(m),g,v);case s.dataViewTag:return f.byteLength!==m.byteLength||f.byteOffset!==m.byteOffset?!1:d(new Uint8Array(f),new Uint8Array(m),g,v);case s.errorTag:return f.name===m.name&&f.message===m.message;case s.objectTag:{if(!(d(f.constructor,m.constructor,g,v)||t.isPlainObject(f)&&t.isPlainObject(m)))return!1;const T=[...Object.keys(f),...r.getSymbols(f)],E=[...Object.keys(m),...r.getSymbols(m)];if(T.length!==E.length)return!1;for(let D=0;D<T.length;D++){const L=T[D],F=f[L];if(!Object.hasOwn(m,L))return!1;const z=m[L];if(!u(F,z,L,f,m,g,v))return!1}return!0}default:return!1}}finally{g.delete(f),g.delete(m)}}e.isEqualWith=l}(o1)),o1}var c1={},j3;function P9(){return j3||(j3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(c1)),c1}var _3;function T9(){return _3||(_3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E9(),r=P9();function a(s,i){return t.isEqualWith(s,i,r.noop)}e.isEqual=a}(i1)),i1}var u1,N3;function O9(){return N3||(N3=1,u1=T9().isEqual),u1}var D9=O9();const R9=Ro(D9);function L9(e){var t={},r=()=>null,a=!1,s=null,i=l=>{if(!a){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...f]=u;if(typeof d=="number"){s=e.setTimeout(i.bind(null,f),d);return}i(d),s=e.setTimeout(i.bind(null,f));return}typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{a=!0},start:l=>{a=!1,s&&(s(),s=null),i(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}var jx=1e-4,oP=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],lP=(e,t)=>e.map((r,a)=>r*t**a).reduce((r,a)=>r+a),S3=(e,t)=>r=>{var a=oP(e,t);return lP(a,r)},M9=(e,t)=>r=>{var a=oP(e,t),s=[...a.map((i,l)=>i*l).slice(1),0];return lP(s,r)},A3=function(){for(var t,r,a,s,i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];if(l.length===1)switch(l[0]){case"linear":[t,a,r,s]=[0,0,1,1];break;case"ease":[t,a,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,a,r,s]=[.42,0,1,1];break;case"ease-out":[t,a,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,a,r,s]=[0,0,.58,1];break;default:{var d=l[0].split("(");d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4&&([t,a,r,s]=d[1].split(")")[0].split(",").map(j=>parseFloat(j)))}}else l.length===4&&([t,a,r,s]=l);var f=S3(t,r),m=S3(a,s),g=M9(t,r),v=j=>j>1?1:j<0?0:j,x=j=>{for(var b=j>1?1:j,A=b,S=0;S<8;++S){var T=f(A)-b,E=g(A);if(Math.abs(T-b)<jx||E<jx)return m(A);A=v(A-T/E)}return m(A)};return x.isStepper=!1,x},I9=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:a=8,dt:s=17}=t,i=(l,u,d)=>{var f=-(l-u)*r,m=d*a,g=d+(f-m)*s/1e3,v=d*s/1e3+l;return Math.abs(v-u)<jx&&Math.abs(g)<jx?[u,0]:[v,g]};return i.isStepper=!0,i.dt=s,i},q9=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return A3(e);case"spring":return I9();default:if(e.split("(")[0]==="cubic-bezier")return A3(e)}return typeof e=="function"?e:null};function C3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function k3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C3(Object(r),!0).forEach(function(a){F9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function F9(e,t,r){return(t=B9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B9(e){var t=U9(e,"string");return typeof t=="symbol"?t:t+""}function U9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $9=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),z9=(e,t,r)=>e.map(a=>"".concat($9(a)," ").concat(t,"ms ").concat(r)).join(","),V9=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,a)=>r.filter(s=>a.includes(s))),Dp=(e,t)=>Object.keys(t).reduce((r,a)=>k3(k3({},r),{},{[a]:e(a,t[a])}),{});function E3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ks(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E3(Object(r),!0).forEach(function(a){H9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function H9(e,t,r){return(t=G9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G9(e){var t=K9(e,"string");return typeof t=="symbol"?t:t+""}function K9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _x=(e,t,r)=>e+(t-e)*r,Y2=e=>{var{from:t,to:r}=e;return t!==r},cP=(e,t,r)=>{var a=Dp((s,i)=>{if(Y2(i)){var[l,u]=e(i.from,i.to,i.velocity);return ks(ks({},i),{},{from:l,velocity:u})}return i},t);return r<1?Dp((s,i)=>Y2(i)?ks(ks({},i),{},{velocity:_x(i.velocity,a[s].velocity,r),from:_x(i.from,a[s].from,r)}):i,t):cP(e,a,r-1)};function W9(e,t,r,a,s,i){var l,u=a.reduce((v,x)=>ks(ks({},v),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>Dp((v,x)=>x.from,u),f=()=>!Object.values(u).filter(Y2).length,m=null,g=v=>{l||(l=v);var x=v-l,j=x/r.dt;u=cP(r,u,j),s(ks(ks(ks({},e),t),d())),l=v,f()||(m=i.setTimeout(g))};return()=>(m=i.setTimeout(g),()=>{m()})}function Y9(e,t,r,a,s,i,l){var u=null,d=s.reduce((g,v)=>ks(ks({},g),{},{[v]:[e[v],t[v]]}),{}),f,m=g=>{f||(f=g);var v=(g-f)/a,x=Dp((b,A)=>_x(...A,r(v)),d);if(i(ks(ks(ks({},e),t),x)),v<1)u=l.setTimeout(m);else{var j=Dp((b,A)=>_x(...A,r(1)),d);i(ks(ks(ks({},e),t),j))}};return()=>(u=l.setTimeout(m),()=>{u()})}const X9=(e,t,r,a,s,i)=>{var l=V9(e,t);return r.isStepper===!0?W9(e,t,r,l,s,i):Y9(e,t,r,a,l,s,i)};class Z9{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),s=null,i=l=>{l-a>=r?t(l):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}var J9=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function X2(){return X2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},X2.apply(null,arguments)}function Q9(e,t){if(e==null)return{};var r,a,s=eB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function eB(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function P3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Zu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P3(Object(r),!0).forEach(function(a){of(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function of(e,t,r){return(t=tB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tB(e){var t=rB(e,"string");return typeof t=="symbol"?t:t+""}function rB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aB(){return L9(new Z9)}class bj extends _.PureComponent{constructor(t,r){super(t,r),of(this,"mounted",!1),of(this,"manager",null),of(this,"stopJSAnimation",null),of(this,"unSubscribe",null);var{isActive:a,attributeName:s,from:i,to:l,children:u,duration:d,animationManager:f}=this.props;if(this.manager=f,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!a||d<=0){this.state={style:{}},typeof u=="function"&&(this.state={style:l});return}if(i){if(typeof u=="function"){this.state={style:i};return}this.state={style:s?{[s]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:a,attributeName:s,shouldReAnimate:i,to:l,from:u}=this.props,{style:d}=this.state;if(a){if(!r){var f={style:s?{[s]:l}:l};this.state&&d&&(s&&d[s]!==l||!s&&d!==l)&&this.setState(f);return}if(!(R9(t.to,l)&&t.canBegin&&t.isActive)){var m=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=m||i?u:t.to;if(this.state&&d){var v={style:s?{[s]:g}:g};(s&&d[s]!==g||!s&&d!==g)&&this.setState(v)}this.runAnimation(Zu(Zu({},this.props),{},{from:g,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:a,duration:s,easing:i,begin:l,onAnimationEnd:u,onAnimationStart:d}=t,f=X9(r,a,q9(i),s,this.changeStyle,this.manager.getTimeoutController()),m=()=>{this.stopJSAnimation=f()};this.manager.start([d,l,m,s,u])}runAnimation(t){var{begin:r,duration:a,attributeName:s,to:i,easing:l,onAnimationStart:u,onAnimationEnd:d,children:f}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof l=="function"||typeof f=="function"||l==="spring"){this.runJSAnimation(t);return}var m=s?{[s]:i}:i,g=z9(Object.keys(m),a,l);this.manager.start([u,r,Zu(Zu({},m),{},{transition:g}),a,d])}render(){var t=this.props,{children:r,begin:a,duration:s,attributeName:i,easing:l,isActive:u,from:d,to:f,canBegin:m,onAnimationEnd:g,shouldReAnimate:v,onAnimationReStart:x,animationManager:j}=t,b=Q9(t,J9),A=_.Children.count(r),S=this.state.style;if(typeof r=="function")return r(S);if(!u||A===0||s<=0)return r;var T=E=>{var{style:D={},className:L}=E.props,F=_.cloneElement(E,Zu(Zu({},b),{},{style:Zu(Zu({},D),S),className:L}));return F};return A===1?T(_.Children.only(r)):_.createElement("div",null,_.Children.map(r,E=>T(E)))}}of(bj,"displayName","Animate");of(bj,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var nB=_.createContext(null);function fd(e){var t,r,a=_.useContext(nB);return _.createElement(bj,X2({},e,{animationManager:(t=(r=e.animationManager)!==null&&r!==void 0?r:a)!==null&&t!==void 0?t:aB()}))}function Nx(){return Nx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Nx.apply(null,arguments)}var T3=(e,t,r,a,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(a)/2),l=a>=0?1:-1,u=r>=0?1:-1,d=a>=0&&r>=0||a<0&&r<0?1:0,f;if(i>0&&s instanceof Array){for(var m=[0,0,0,0],g=0,v=4;g<v;g++)m[g]=s[g]>i?i:s[g];f="M".concat(e,",").concat(t+l*m[0]),m[0]>0&&(f+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(d,",").concat(e+u*m[0],",").concat(t)),f+="L ".concat(e+r-u*m[1],",").concat(t),m[1]>0&&(f+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+l*m[1])),f+="L ".concat(e+r,",").concat(t+a-l*m[2]),m[2]>0&&(f+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(d,`,
        `).concat(e+r-u*m[2],",").concat(t+a)),f+="L ".concat(e+u*m[3],",").concat(t+a),m[3]>0&&(f+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+a-l*m[3])),f+="Z"}else if(i>0&&s===+s&&s>0){var x=Math.min(i,s);f="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+r-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r,",").concat(t+l*x,`
            L `).concat(e+r,",").concat(t+a-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r-u*x,",").concat(t+a,`
            L `).concat(e+u*x,",").concat(t+a,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+a-l*x," Z")}else f="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return f},sB={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},uP=e=>{var t=Mo(e,sB),r=_.useRef(null),[a,s]=_.useState(-1);_.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var S=r.current.getTotalLength();S&&s(S)}catch{}},[]);var{x:i,y:l,width:u,height:d,radius:f,className:m}=t,{animationEasing:g,animationDuration:v,animationBegin:x,isAnimationActive:j,isUpdateAnimationActive:b}=t;if(i!==+i||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var A=oa("recharts-rectangle",m);return b?_.createElement(fd,{canBegin:a>0,from:{width:u,height:d,x:i,y:l},to:{width:u,height:d,x:i,y:l},duration:v,animationEasing:g,isActive:b},S=>{var{width:T,height:E,x:D,y:L}=S;return _.createElement(fd,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,isActive:j,easing:g},_.createElement("path",Nx({},Yr(t,!0),{className:A,d:T3(D,L,T,E,f),ref:r})))}):_.createElement("path",Nx({},Yr(t,!0),{className:A,d:T3(i,l,u,d,f)}))};function dP(e){var{cx:t,cy:r,radius:a,startAngle:s,endAngle:i}=e,l=Un(t,r,a,s),u=Un(t,r,a,i);return{points:[l,u],cx:t,cy:r,radius:a,startAngle:s,endAngle:i}}function Z2(){return Z2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Z2.apply(null,arguments)}var iB=(e,t)=>{var r=ms(t-e),a=Math.min(Math.abs(t-e),359.999);return r*a},A0=e=>{var{cx:t,cy:r,radius:a,angle:s,sign:i,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,f=u*(l?1:-1)+a,m=Math.asin(u/f)/wx,g=d?s:s+i*m,v=Un(t,r,f,g),x=Un(t,r,a,g),j=d?s-i*m:s,b=Un(t,r,f*Math.cos(m*wx),j);return{center:v,circleTangency:x,lineTangency:b,theta:m}},fP=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:s,startAngle:i,endAngle:l}=e,u=iB(i,l),d=i+u,f=Un(t,r,s,i),m=Un(t,r,s,d),g="M ".concat(f.x,",").concat(f.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(i>d),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(a>0){var v=Un(t,r,a,i),x=Un(t,r,a,d);g+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(i<=d),`,
            `).concat(v.x,",").concat(v.y," Z")}else g+="L ".concat(t,",").concat(r," Z");return g},oB=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:f}=e,m=ms(f-d),{circleTangency:g,lineTangency:v,theta:x}=A0({cx:t,cy:r,radius:s,angle:d,sign:m,cornerRadius:i,cornerIsExternal:u}),{circleTangency:j,lineTangency:b,theta:A}=A0({cx:t,cy:r,radius:s,angle:f,sign:-m,cornerRadius:i,cornerIsExternal:u}),S=u?Math.abs(d-f):Math.abs(d-f)-x-A;if(S<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):fP({cx:t,cy:r,innerRadius:a,outerRadius:s,startAngle:d,endAngle:f});var T="M ".concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(S>180),",").concat(+(m<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var{circleTangency:E,lineTangency:D,theta:L}=A0({cx:t,cy:r,radius:a,angle:d,sign:m,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),{circleTangency:F,lineTangency:z,theta:M}=A0({cx:t,cy:r,radius:a,angle:f,sign:-m,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),U=u?Math.abs(d-f):Math.abs(d-f)-L-M;if(U<0&&i===0)return"".concat(T,"L").concat(t,",").concat(r,"Z");T+="L".concat(z.x,",").concat(z.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(U>180),",").concat(+(m>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(D.x,",").concat(D.y,"Z")}else T+="L".concat(t,",").concat(r,"Z");return T},lB={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},hP=e=>{var t=Mo(e,lB),{cx:r,cy:a,innerRadius:s,outerRadius:i,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:f,endAngle:m,className:g}=t;if(i<s||f===m)return null;var v=oa("recharts-sector",g),x=i-s,j=oi(l,x,0,!0),b;return j>0&&Math.abs(f-m)<360?b=oB({cx:r,cy:a,innerRadius:s,outerRadius:i,cornerRadius:Math.min(j,x/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:f,endAngle:m}):b=fP({cx:r,cy:a,innerRadius:s,outerRadius:i,startAngle:f,endAngle:m}),_.createElement("path",Z2({},Yr(t,!0),{className:v,d:b}))};function cB(e,t,r){var a,s,i,l;if(e==="horizontal")a=t.x,i=a,s=r.top,l=r.top+r.height;else if(e==="vertical")s=t.y,l=s,a=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:d,innerRadius:f,outerRadius:m,angle:g}=t,v=Un(u,d,f,g),x=Un(u,d,m,g);a=v.x,s=v.y,i=x.x,l=x.y}else return dP(t);return[{x:a,y:s},{x:i,y:l}]}var d1={},f1={},h1={},O3;function uB(){return O3||(O3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bE();function r(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=r}(h1)),h1}var D3;function dB(){return D3||(D3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uB();function r(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=r}(f1)),f1}var R3;function fB(){return R3||(R3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wE(),r=dB();function a(s,i,l){l&&typeof l!="number"&&t.isIterateeCall(s,i,l)&&(i=l=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),l=l===void 0?s<i?1:-1:r.toFinite(l);const u=Math.max(Math.ceil((i-s)/(l||1)),0),d=new Array(u);for(let f=0;f<u;f++)d[f]=s,s+=l;return d}e.range=a}(d1)),d1}var m1,L3;function hB(){return L3||(L3=1,m1=fB().range),m1}var mB=hB();const mP=Ro(mB);function cd(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function pB(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wj(e){let t,r,a;e.length!==2?(t=cd,r=(u,d)=>cd(e(u),d),a=(u,d)=>e(u)-d):(t=e===cd||e===pB?e:gB,r=e,a=e);function s(u,d,f=0,m=u.length){if(f<m){if(t(d,d)!==0)return m;do{const g=f+m>>>1;r(u[g],d)<0?f=g+1:m=g}while(f<m)}return f}function i(u,d,f=0,m=u.length){if(f<m){if(t(d,d)!==0)return m;do{const g=f+m>>>1;r(u[g],d)<=0?f=g+1:m=g}while(f<m)}return f}function l(u,d,f=0,m=u.length){const g=s(u,d,f,m-1);return g>f&&a(u[g-1],d)>-a(u[g],d)?g-1:g}return{left:s,center:l,right:i}}function gB(){return 0}function pP(e){return e===null?NaN:+e}function*xB(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const vB=wj(cd),rg=vB.right;wj(pP).center;class M3 extends Map{constructor(t,r=wB){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(I3(this,t))}has(t){return super.has(I3(this,t))}set(t,r){return super.set(yB(this,t),r)}delete(t){return super.delete(bB(this,t))}}function I3({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function yB({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function bB({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function wB(e){return e!==null&&typeof e=="object"?e.valueOf():e}function jB(e=cd){if(e===cd)return gP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function gP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const _B=Math.sqrt(50),NB=Math.sqrt(10),SB=Math.sqrt(2);function Sx(e,t,r){const a=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),l=i>=_B?10:i>=NB?5:i>=SB?2:1;let u,d,f;return s<0?(f=Math.pow(10,-s)/l,u=Math.round(e*f),d=Math.round(t*f),u/f<e&&++u,d/f>t&&--d,f=-f):(f=Math.pow(10,s)*l,u=Math.round(e/f),d=Math.round(t/f),u*f<e&&++u,d*f>t&&--d),d<u&&.5<=r&&r<2?Sx(e,t,r*2):[u,d,f]}function J2(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[s,i,l]=a?Sx(t,e,r):Sx(e,t,r);if(!(i>=s))return[];const u=i-s+1,d=new Array(u);if(a)if(l<0)for(let f=0;f<u;++f)d[f]=(i-f)/-l;else for(let f=0;f<u;++f)d[f]=(i-f)*l;else if(l<0)for(let f=0;f<u;++f)d[f]=(s+f)/-l;else for(let f=0;f<u;++f)d[f]=(s+f)*l;return d}function Q2(e,t,r){return t=+t,e=+e,r=+r,Sx(e,t,r)[2]}function ew(e,t,r){t=+t,e=+e,r=+r;const a=t<e,s=a?Q2(t,e,r):Q2(e,t,r);return(a?-1:1)*(s<0?1/-s:s)}function q3(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function F3(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function xP(e,t,r=0,a=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(s=s===void 0?gP:jB(s);a>r;){if(a-r>600){const d=a-r+1,f=t-r+1,m=Math.log(d),g=.5*Math.exp(2*m/3),v=.5*Math.sqrt(m*g*(d-g)/d)*(f-d/2<0?-1:1),x=Math.max(r,Math.floor(t-f*g/d+v)),j=Math.min(a,Math.floor(t+(d-f)*g/d+v));xP(e,t,x,j,s)}const i=e[t];let l=r,u=a;for(dp(e,r,t),s(e[a],i)>0&&dp(e,r,a);l<u;){for(dp(e,l,u),++l,--u;s(e[l],i)<0;)++l;for(;s(e[u],i)>0;)--u}s(e[r],i)===0?dp(e,r,u):(++u,dp(e,u,a)),u<=t&&(r=u+1),t<=u&&(a=u-1)}return e}function dp(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function AB(e,t,r){if(e=Float64Array.from(xB(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return F3(e);if(t>=1)return q3(e);var a,s=(a-1)*t,i=Math.floor(s),l=q3(xP(e,i).subarray(0,i+1)),u=F3(e.subarray(i+1));return l+(u-l)*(s-i)}}function CB(e,t,r=pP){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),l=+r(e[i],i,e),u=+r(e[i+1],i+1,e);return l+(u-l)*(s-i)}}function kB(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++a<s;)i[a]=e+a*r;return i}function Io(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function uu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const tw=Symbol("implicit");function jj(){var e=new M3,t=[],r=[],a=tw;function s(i){let l=e.get(i);if(l===void 0){if(a!==tw)return a;e.set(i,l=t.push(i)-1)}return r[l%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new M3;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return jj(t,r).unknown(a)},Io.apply(s,arguments),s}function _j(){var e=jj().unknown(void 0),t=e.domain,r=e.range,a=0,s=1,i,l,u=!1,d=0,f=0,m=.5;delete e.unknown;function g(){var v=t().length,x=s<a,j=x?s:a,b=x?a:s;i=(b-j)/Math.max(1,v-d+f*2),u&&(i=Math.floor(i)),j+=(b-j-i*(v-d))*m,l=i*(1-d),u&&(j=Math.round(j),l=Math.round(l));var A=kB(v).map(function(S){return j+i*S});return r(x?A.reverse():A)}return e.domain=function(v){return arguments.length?(t(v),g()):t()},e.range=function(v){return arguments.length?([a,s]=v,a=+a,s=+s,g()):[a,s]},e.rangeRound=function(v){return[a,s]=v,a=+a,s=+s,u=!0,g()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(v){return arguments.length?(u=!!v,g()):u},e.padding=function(v){return arguments.length?(d=Math.min(1,f=+v),g()):d},e.paddingInner=function(v){return arguments.length?(d=Math.min(1,v),g()):d},e.paddingOuter=function(v){return arguments.length?(f=+v,g()):f},e.align=function(v){return arguments.length?(m=Math.max(0,Math.min(1,v)),g()):m},e.copy=function(){return _j(t(),[a,s]).round(u).paddingInner(d).paddingOuter(f).align(m)},Io.apply(g(),arguments)}function vP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return vP(t())},e}function EB(){return vP(_j.apply(null,arguments).paddingInner(1))}function Nj(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function yP(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function ag(){}var Rp=.7,Ax=1/Rp,Bh="\\s*([+-]?\\d+)\\s*",Lp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",PB=/^#([0-9a-f]{3,8})$/,TB=new RegExp(`^rgb\\(${Bh},${Bh},${Bh}\\)$`),OB=new RegExp(`^rgb\\(${tc},${tc},${tc}\\)$`),DB=new RegExp(`^rgba\\(${Bh},${Bh},${Bh},${Lp}\\)$`),RB=new RegExp(`^rgba\\(${tc},${tc},${tc},${Lp}\\)$`),LB=new RegExp(`^hsl\\(${Lp},${tc},${tc}\\)$`),MB=new RegExp(`^hsla\\(${Lp},${tc},${tc},${Lp}\\)$`),B3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nj(ag,Mp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:U3,formatHex:U3,formatHex8:IB,formatHsl:qB,formatRgb:$3,toString:$3});function U3(){return this.rgb().formatHex()}function IB(){return this.rgb().formatHex8()}function qB(){return bP(this).formatHsl()}function $3(){return this.rgb().formatRgb()}function Mp(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=PB.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?z3(t):r===3?new Si(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?C0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?C0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=TB.exec(e))?new Si(t[1],t[2],t[3],1):(t=OB.exec(e))?new Si(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=DB.exec(e))?C0(t[1],t[2],t[3],t[4]):(t=RB.exec(e))?C0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=LB.exec(e))?G3(t[1],t[2]/100,t[3]/100,1):(t=MB.exec(e))?G3(t[1],t[2]/100,t[3]/100,t[4]):B3.hasOwnProperty(e)?z3(B3[e]):e==="transparent"?new Si(NaN,NaN,NaN,0):null}function z3(e){return new Si(e>>16&255,e>>8&255,e&255,1)}function C0(e,t,r,a){return a<=0&&(e=t=r=NaN),new Si(e,t,r,a)}function FB(e){return e instanceof ag||(e=Mp(e)),e?(e=e.rgb(),new Si(e.r,e.g,e.b,e.opacity)):new Si}function rw(e,t,r,a){return arguments.length===1?FB(e):new Si(e,t,r,a??1)}function Si(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}Nj(Si,rw,yP(ag,{brighter(e){return e=e==null?Ax:Math.pow(Ax,e),new Si(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Rp:Math.pow(Rp,e),new Si(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Si(mf(this.r),mf(this.g),mf(this.b),Cx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:V3,formatHex:V3,formatHex8:BB,formatRgb:H3,toString:H3}));function V3(){return`#${lf(this.r)}${lf(this.g)}${lf(this.b)}`}function BB(){return`#${lf(this.r)}${lf(this.g)}${lf(this.b)}${lf((isNaN(this.opacity)?1:this.opacity)*255)}`}function H3(){const e=Cx(this.opacity);return`${e===1?"rgb(":"rgba("}${mf(this.r)}, ${mf(this.g)}, ${mf(this.b)}${e===1?")":`, ${e})`}`}function Cx(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function mf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function lf(e){return e=mf(e),(e<16?"0":"")+e.toString(16)}function G3(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new pl(e,t,r,a)}function bP(e){if(e instanceof pl)return new pl(e.h,e.s,e.l,e.opacity);if(e instanceof ag||(e=Mp(e)),!e)return new pl;if(e instanceof pl)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,s=Math.min(t,r,a),i=Math.max(t,r,a),l=NaN,u=i-s,d=(i+s)/2;return u?(t===i?l=(r-a)/u+(r<a)*6:r===i?l=(a-t)/u+2:l=(t-r)/u+4,u/=d<.5?i+s:2-i-s,l*=60):u=d>0&&d<1?0:l,new pl(l,u,d,e.opacity)}function UB(e,t,r,a){return arguments.length===1?bP(e):new pl(e,t,r,a??1)}function pl(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}Nj(pl,UB,yP(ag,{brighter(e){return e=e==null?Ax:Math.pow(Ax,e),new pl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Rp:Math.pow(Rp,e),new pl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,s=2*r-a;return new Si(p1(e>=240?e-240:e+120,s,a),p1(e,s,a),p1(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new pl(K3(this.h),k0(this.s),k0(this.l),Cx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Cx(this.opacity);return`${e===1?"hsl(":"hsla("}${K3(this.h)}, ${k0(this.s)*100}%, ${k0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function K3(e){return e=(e||0)%360,e<0?e+360:e}function k0(e){return Math.max(0,Math.min(1,e||0))}function p1(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Sj=e=>()=>e;function $B(e,t){return function(r){return e+r*t}}function zB(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function VB(e){return(e=+e)==1?wP:function(t,r){return r-t?zB(t,r,e):Sj(isNaN(t)?r:t)}}function wP(e,t){var r=t-e;return r?$B(e,r):Sj(isNaN(e)?t:e)}const W3=function e(t){var r=VB(t);function a(s,i){var l=r((s=rw(s)).r,(i=rw(i)).r),u=r(s.g,i.g),d=r(s.b,i.b),f=wP(s.opacity,i.opacity);return function(m){return s.r=l(m),s.g=u(m),s.b=d(m),s.opacity=f(m),s+""}}return a.gamma=e,a}(1);function HB(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<r;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function GB(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function KB(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,s=new Array(a),i=new Array(r),l;for(l=0;l<a;++l)s[l]=cm(e[l],t[l]);for(;l<r;++l)i[l]=t[l];return function(u){for(l=0;l<a;++l)i[l]=s[l](u);return i}}function WB(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function kx(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function YB(e,t){var r={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=cm(e[s],t[s]):a[s]=t[s];return function(i){for(s in r)a[s]=r[s](i);return a}}var aw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,g1=new RegExp(aw.source,"g");function XB(e){return function(){return e}}function ZB(e){return function(t){return e(t)+""}}function JB(e,t){var r=aw.lastIndex=g1.lastIndex=0,a,s,i,l=-1,u=[],d=[];for(e=e+"",t=t+"";(a=aw.exec(e))&&(s=g1.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),u[l]?u[l]+=i:u[++l]=i),(a=a[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,d.push({i:l,x:kx(a,s)})),r=g1.lastIndex;return r<t.length&&(i=t.slice(r),u[l]?u[l]+=i:u[++l]=i),u.length<2?d[0]?ZB(d[0].x):XB(t):(t=d.length,function(f){for(var m=0,g;m<t;++m)u[(g=d[m]).i]=g.x(f);return u.join("")})}function cm(e,t){var r=typeof t,a;return t==null||r==="boolean"?Sj(t):(r==="number"?kx:r==="string"?(a=Mp(t))?(t=a,W3):JB:t instanceof Mp?W3:t instanceof Date?WB:GB(t)?HB:Array.isArray(t)?KB:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?YB:kx)(e,t)}function Aj(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function QB(e,t){t===void 0&&(t=e,e=cm);for(var r=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);r<a;)i[r]=e(s,s=t[++r]);return function(l){var u=Math.max(0,Math.min(a-1,Math.floor(l*=a)));return i[u](l-u)}}function eU(e){return function(){return e}}function Ex(e){return+e}var Y3=[0,1];function ni(e){return e}function nw(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:eU(isNaN(t)?NaN:.5)}function tU(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function rU(e,t,r){var a=e[0],s=e[1],i=t[0],l=t[1];return s<a?(a=nw(s,a),i=r(l,i)):(a=nw(a,s),i=r(i,l)),function(u){return i(a(u))}}function aU(e,t,r){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),l=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<a;)s[l]=nw(e[l],e[l+1]),i[l]=r(t[l],t[l+1]);return function(u){var d=rg(e,u,1,a)-1;return i[d](s[d](u))}}function ng(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function hv(){var e=Y3,t=Y3,r=cm,a,s,i,l=ni,u,d,f;function m(){var v=Math.min(e.length,t.length);return l!==ni&&(l=tU(e[0],e[v-1])),u=v>2?aU:rU,d=f=null,g}function g(v){return v==null||isNaN(v=+v)?i:(d||(d=u(e.map(a),t,r)))(a(l(v)))}return g.invert=function(v){return l(s((f||(f=u(t,e.map(a),kx)))(v)))},g.domain=function(v){return arguments.length?(e=Array.from(v,Ex),m()):e.slice()},g.range=function(v){return arguments.length?(t=Array.from(v),m()):t.slice()},g.rangeRound=function(v){return t=Array.from(v),r=Aj,m()},g.clamp=function(v){return arguments.length?(l=v?!0:ni,m()):l!==ni},g.interpolate=function(v){return arguments.length?(r=v,m()):r},g.unknown=function(v){return arguments.length?(i=v,g):i},function(v,x){return a=v,s=x,m()}}function Cj(){return hv()(ni,ni)}function nU(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Px(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function Zh(e){return e=Px(Math.abs(e)),e?e[1]:NaN}function sU(e,t){return function(r,a){for(var s=r.length,i=[],l=0,u=e[0],d=0;s>0&&u>0&&(d+u+1>a&&(u=Math.max(1,a-d)),i.push(r.substring(s-=u,s+u)),!((d+=u+1)>a));)u=e[l=(l+1)%e.length];return i.reverse().join(t)}}function iU(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var oU=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ip(e){if(!(t=oU.exec(e)))throw new Error("invalid format: "+e);var t;return new kj({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ip.prototype=kj.prototype;function kj(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}kj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lU(e){e:for(var t=e.length,r=1,a=-1,s;r<t;++r)switch(e[r]){case".":a=s=r;break;case"0":a===0&&(a=r),s=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var jP;function cU(e,t){var r=Px(e,t);if(!r)return e+"";var a=r[0],s=r[1],i=s-(jP=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=a.length;return i===l?a:i>l?a+new Array(i-l+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+Px(e,Math.max(0,t+i-1))[0]}function X3(e,t){var r=Px(e,t);if(!r)return e+"";var a=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const Z3={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:nU,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>X3(e*100,t),r:X3,s:cU,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function J3(e){return e}var Q3=Array.prototype.map,eA=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function uU(e){var t=e.grouping===void 0||e.thousands===void 0?J3:sU(Q3.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?J3:iU(Q3.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function f(g){g=Ip(g);var v=g.fill,x=g.align,j=g.sign,b=g.symbol,A=g.zero,S=g.width,T=g.comma,E=g.precision,D=g.trim,L=g.type;L==="n"?(T=!0,L="g"):Z3[L]||(E===void 0&&(E=12),D=!0,L="g"),(A||v==="0"&&x==="=")&&(A=!0,v="0",x="=");var F=b==="$"?r:b==="#"&&/[boxX]/.test(L)?"0"+L.toLowerCase():"",z=b==="$"?a:/[%p]/.test(L)?l:"",M=Z3[L],U=/[defgprs%]/.test(L);E=E===void 0?6:/[gprs]/.test(L)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function oe(R){var q=F,se=z,J,Q,ae;if(L==="c")se=M(R)+se,R="";else{R=+R;var he=R<0||1/R<0;if(R=isNaN(R)?d:M(Math.abs(R),E),D&&(R=lU(R)),he&&+R==0&&j!=="+"&&(he=!1),q=(he?j==="("?j:u:j==="-"||j==="("?"":j)+q,se=(L==="s"?eA[8+jP/3]:"")+se+(he&&j==="("?")":""),U){for(J=-1,Q=R.length;++J<Q;)if(ae=R.charCodeAt(J),48>ae||ae>57){se=(ae===46?s+R.slice(J+1):R.slice(J))+se,R=R.slice(0,J);break}}}T&&!A&&(R=t(R,1/0));var de=q.length+R.length+se.length,_e=de<S?new Array(S-de+1).join(v):"";switch(T&&A&&(R=t(_e+R,_e.length?S-se.length:1/0),_e=""),x){case"<":R=q+R+se+_e;break;case"=":R=q+_e+R+se;break;case"^":R=_e.slice(0,de=_e.length>>1)+q+R+se+_e.slice(de);break;default:R=_e+q+R+se;break}return i(R)}return oe.toString=function(){return g+""},oe}function m(g,v){var x=f((g=Ip(g),g.type="f",g)),j=Math.max(-8,Math.min(8,Math.floor(Zh(v)/3)))*3,b=Math.pow(10,-j),A=eA[8+j/3];return function(S){return x(b*S)+A}}return{format:f,formatPrefix:m}}var E0,Ej,_P;dU({thousands:",",grouping:[3],currency:["$",""]});function dU(e){return E0=uU(e),Ej=E0.format,_P=E0.formatPrefix,E0}function fU(e){return Math.max(0,-Zh(Math.abs(e)))}function hU(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zh(t)/3)))*3-Zh(Math.abs(e)))}function mU(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zh(t)-Zh(e))+1}function NP(e,t,r,a){var s=ew(e,t,r),i;switch(a=Ip(a??",f"),a.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=hU(s,l))&&(a.precision=i),_P(a,l)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=mU(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=fU(s))&&(a.precision=i-(a.type==="%")*2);break}}return Ej(a)}function wd(e){var t=e.domain;return e.ticks=function(r){var a=t();return J2(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var s=t();return NP(s[0],s[s.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),s=0,i=a.length-1,l=a[s],u=a[i],d,f,m=10;for(u<l&&(f=l,l=u,u=f,f=s,s=i,i=f);m-- >0;){if(f=Q2(l,u,r),f===d)return a[s]=l,a[i]=u,t(a);if(f>0)l=Math.floor(l/f)*f,u=Math.ceil(u/f)*f;else if(f<0)l=Math.ceil(l*f)/f,u=Math.floor(u*f)/f;else break;d=f}return e},e}function SP(){var e=Cj();return e.copy=function(){return ng(e,SP())},Io.apply(e,arguments),wd(e)}function AP(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,Ex),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return AP(e).unknown(t)},e=arguments.length?Array.from(e,Ex):[0,1],wd(r)}function CP(e,t){e=e.slice();var r=0,a=e.length-1,s=e[r],i=e[a],l;return i<s&&(l=r,r=a,a=l,l=s,s=i,i=l),e[r]=t.floor(s),e[a]=t.ceil(i),e}function tA(e){return Math.log(e)}function rA(e){return Math.exp(e)}function pU(e){return-Math.log(-e)}function gU(e){return-Math.exp(-e)}function xU(e){return isFinite(e)?+("1e"+e):e<0?0:e}function vU(e){return e===10?xU:e===Math.E?Math.exp:t=>Math.pow(e,t)}function yU(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function aA(e){return(t,r)=>-e(-t,r)}function Pj(e){const t=e(tA,rA),r=t.domain;let a=10,s,i;function l(){return s=yU(a),i=vU(a),r()[0]<0?(s=aA(s),i=aA(i),e(pU,gU)):e(tA,rA),t}return t.base=function(u){return arguments.length?(a=+u,l()):a},t.domain=function(u){return arguments.length?(r(u),l()):r()},t.ticks=u=>{const d=r();let f=d[0],m=d[d.length-1];const g=m<f;g&&([f,m]=[m,f]);let v=s(f),x=s(m),j,b;const A=u==null?10:+u;let S=[];if(!(a%1)&&x-v<A){if(v=Math.floor(v),x=Math.ceil(x),f>0){for(;v<=x;++v)for(j=1;j<a;++j)if(b=v<0?j/i(-v):j*i(v),!(b<f)){if(b>m)break;S.push(b)}}else for(;v<=x;++v)for(j=a-1;j>=1;--j)if(b=v>0?j/i(-v):j*i(v),!(b<f)){if(b>m)break;S.push(b)}S.length*2<A&&(S=J2(f,m,A))}else S=J2(v,x,Math.min(x-v,A)).map(i);return g?S.reverse():S},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=a===10?"s":","),typeof d!="function"&&(!(a%1)&&(d=Ip(d)).precision==null&&(d.trim=!0),d=Ej(d)),u===1/0)return d;const f=Math.max(1,a*u/t.ticks().length);return m=>{let g=m/i(Math.round(s(m)));return g*a<a-.5&&(g*=a),g<=f?d(m):""}},t.nice=()=>r(CP(r(),{floor:u=>i(Math.floor(s(u))),ceil:u=>i(Math.ceil(s(u)))})),t}function kP(){const e=Pj(hv()).domain([1,10]);return e.copy=()=>ng(e,kP()).base(e.base()),Io.apply(e,arguments),e}function nA(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function sA(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Tj(e){var t=1,r=e(nA(t),sA(t));return r.constant=function(a){return arguments.length?e(nA(t=+a),sA(t)):t},wd(r)}function EP(){var e=Tj(hv());return e.copy=function(){return ng(e,EP()).constant(e.constant())},Io.apply(e,arguments)}function iA(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function bU(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function wU(e){return e<0?-e*e:e*e}function Oj(e){var t=e(ni,ni),r=1;function a(){return r===1?e(ni,ni):r===.5?e(bU,wU):e(iA(r),iA(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,a()):r},wd(t)}function Dj(){var e=Oj(hv());return e.copy=function(){return ng(e,Dj()).exponent(e.exponent())},Io.apply(e,arguments),e}function jU(){return Dj.apply(null,arguments).exponent(.5)}function oA(e){return Math.sign(e)*e*e}function _U(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function PP(){var e=Cj(),t=[0,1],r=!1,a;function s(i){var l=_U(e(i));return isNaN(l)?a:r?Math.round(l):l}return s.invert=function(i){return e.invert(oA(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,Ex)).map(oA)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return PP(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},Io.apply(s,arguments),wd(s)}function TP(){var e=[],t=[],r=[],a;function s(){var l=0,u=Math.max(1,t.length);for(r=new Array(u-1);++l<u;)r[l-1]=CB(e,l/u);return i}function i(l){return l==null||isNaN(l=+l)?a:t[rg(r,l)]}return i.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(cd),s()},i.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},i.unknown=function(l){return arguments.length?(a=l,i):a},i.quantiles=function(){return r.slice()},i.copy=function(){return TP().domain(e).range(t).unknown(a)},Io.apply(i,arguments)}function OP(){var e=0,t=1,r=1,a=[.5],s=[0,1],i;function l(d){return d!=null&&d<=d?s[rg(a,d,0,r)]:i}function u(){var d=-1;for(a=new Array(r);++d<r;)a[d]=((d+1)*t-(d-r)*e)/(r+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,u()):s.slice()},l.invertExtent=function(d){var f=s.indexOf(d);return f<0?[NaN,NaN]:f<1?[e,a[0]]:f>=r?[a[r-1],t]:[a[f-1],a[f]]},l.unknown=function(d){return arguments.length&&(i=d),l},l.thresholds=function(){return a.slice()},l.copy=function(){return OP().domain([e,t]).range(s).unknown(i)},Io.apply(wd(l),arguments)}function DP(){var e=[.5],t=[0,1],r,a=1;function s(i){return i!=null&&i<=i?t[rg(e,i,0,a)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return DP().domain(e).range(t).unknown(r)},Io.apply(s,arguments)}const x1=new Date,v1=new Date;function Qn(e,t,r,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const l=s(i),u=s.ceil(i);return i-l<u-i?l:u},s.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),s.range=(i,l,u)=>{const d=[];if(i=s.ceil(i),u=u==null?1:Math.floor(u),!(i<l)||!(u>0))return d;let f;do d.push(f=new Date(+i)),t(i,u),e(i);while(f<i&&i<l);return d},s.filter=i=>Qn(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!i(l););else for(;--u>=0;)for(;t(l,1),!i(l););}),r&&(s.count=(i,l)=>(x1.setTime(+i),v1.setTime(+l),e(x1),e(v1),Math.floor(r(x1,v1))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?l=>a(l)%i===0:l=>s.count(0,l)%i===0):s)),s}const Tx=Qn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Tx.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Qn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Tx);Tx.range;const Yc=1e3,Eo=Yc*60,Xc=Eo*60,tu=Xc*24,Rj=tu*7,lA=tu*30,y1=tu*365,cf=Qn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Yc)},(e,t)=>(t-e)/Yc,e=>e.getUTCSeconds());cf.range;const Lj=Qn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yc)},(e,t)=>{e.setTime(+e+t*Eo)},(e,t)=>(t-e)/Eo,e=>e.getMinutes());Lj.range;const Mj=Qn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Eo)},(e,t)=>(t-e)/Eo,e=>e.getUTCMinutes());Mj.range;const Ij=Qn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yc-e.getMinutes()*Eo)},(e,t)=>{e.setTime(+e+t*Xc)},(e,t)=>(t-e)/Xc,e=>e.getHours());Ij.range;const qj=Qn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Xc)},(e,t)=>(t-e)/Xc,e=>e.getUTCHours());qj.range;const sg=Qn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Eo)/tu,e=>e.getDate()-1);sg.range;const mv=Qn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/tu,e=>e.getUTCDate()-1);mv.range;const RP=Qn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/tu,e=>Math.floor(e/tu));RP.range;function Cf(e){return Qn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Eo)/Rj)}const pv=Cf(0),Ox=Cf(1),NU=Cf(2),SU=Cf(3),Jh=Cf(4),AU=Cf(5),CU=Cf(6);pv.range;Ox.range;NU.range;SU.range;Jh.range;AU.range;CU.range;function kf(e){return Qn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Rj)}const gv=kf(0),Dx=kf(1),kU=kf(2),EU=kf(3),Qh=kf(4),PU=kf(5),TU=kf(6);gv.range;Dx.range;kU.range;EU.range;Qh.range;PU.range;TU.range;const Fj=Qn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Fj.range;const Bj=Qn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Bj.range;const ru=Qn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ru.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Qn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ru.range;const au=Qn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());au.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Qn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});au.range;function LP(e,t,r,a,s,i){const l=[[cf,1,Yc],[cf,5,5*Yc],[cf,15,15*Yc],[cf,30,30*Yc],[i,1,Eo],[i,5,5*Eo],[i,15,15*Eo],[i,30,30*Eo],[s,1,Xc],[s,3,3*Xc],[s,6,6*Xc],[s,12,12*Xc],[a,1,tu],[a,2,2*tu],[r,1,Rj],[t,1,lA],[t,3,3*lA],[e,1,y1]];function u(f,m,g){const v=m<f;v&&([f,m]=[m,f]);const x=g&&typeof g.range=="function"?g:d(f,m,g),j=x?x.range(f,+m+1):[];return v?j.reverse():j}function d(f,m,g){const v=Math.abs(m-f)/g,x=wj(([,,A])=>A).right(l,v);if(x===l.length)return e.every(ew(f/y1,m/y1,g));if(x===0)return Tx.every(Math.max(ew(f,m,g),1));const[j,b]=l[v/l[x-1][2]<l[x][2]/v?x-1:x];return j.every(b)}return[u,d]}const[OU,DU]=LP(au,Bj,gv,RP,qj,Mj),[RU,LU]=LP(ru,Fj,pv,sg,Ij,Lj);function b1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function w1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function fp(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function MU(e){var t=e.dateTime,r=e.date,a=e.time,s=e.periods,i=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,f=hp(s),m=mp(s),g=hp(i),v=mp(i),x=hp(l),j=mp(l),b=hp(u),A=mp(u),S=hp(d),T=mp(d),E={a:he,A:de,b:_e,B:Y,c:null,d:mA,e:mA,f:s$,g:p$,G:x$,H:r$,I:a$,j:n$,L:MP,m:i$,M:o$,p:ye,q:P,Q:xA,s:vA,S:l$,u:c$,U:u$,V:d$,w:f$,W:h$,x:null,X:null,y:m$,Y:g$,Z:v$,"%":gA},D={a:Z,A:ce,b:je,B:ke,c:null,d:pA,e:pA,f:j$,g:O$,G:R$,H:y$,I:b$,j:w$,L:qP,m:_$,M:N$,p:De,q:Ee,Q:xA,s:vA,S:S$,u:A$,U:C$,V:k$,w:E$,W:P$,x:null,X:null,y:T$,Y:D$,Z:L$,"%":gA},L={a:oe,A:R,b:q,B:se,c:J,d:fA,e:fA,f:JU,g:dA,G:uA,H:hA,I:hA,j:WU,L:ZU,m:KU,M:YU,p:U,q:GU,Q:e$,s:t$,S:XU,u:UU,U:$U,V:zU,w:BU,W:VU,x:Q,X:ae,y:dA,Y:uA,Z:HU,"%":QU};E.x=F(r,E),E.X=F(a,E),E.c=F(t,E),D.x=F(r,D),D.X=F(a,D),D.c=F(t,D);function F(ne,Ne){return function(le){var xe=[],H=-1,W=0,B=ne.length,ee,X,ge;for(le instanceof Date||(le=new Date(+le));++H<B;)ne.charCodeAt(H)===37&&(xe.push(ne.slice(W,H)),(X=cA[ee=ne.charAt(++H)])!=null?ee=ne.charAt(++H):X=ee==="e"?" ":"0",(ge=Ne[ee])&&(ee=ge(le,X)),xe.push(ee),W=H+1);return xe.push(ne.slice(W,H)),xe.join("")}}function z(ne,Ne){return function(le){var xe=fp(1900,void 0,1),H=M(xe,ne,le+="",0),W,B;if(H!=le.length)return null;if("Q"in xe)return new Date(xe.Q);if("s"in xe)return new Date(xe.s*1e3+("L"in xe?xe.L:0));if(Ne&&!("Z"in xe)&&(xe.Z=0),"p"in xe&&(xe.H=xe.H%12+xe.p*12),xe.m===void 0&&(xe.m="q"in xe?xe.q:0),"V"in xe){if(xe.V<1||xe.V>53)return null;"w"in xe||(xe.w=1),"Z"in xe?(W=w1(fp(xe.y,0,1)),B=W.getUTCDay(),W=B>4||B===0?Dx.ceil(W):Dx(W),W=mv.offset(W,(xe.V-1)*7),xe.y=W.getUTCFullYear(),xe.m=W.getUTCMonth(),xe.d=W.getUTCDate()+(xe.w+6)%7):(W=b1(fp(xe.y,0,1)),B=W.getDay(),W=B>4||B===0?Ox.ceil(W):Ox(W),W=sg.offset(W,(xe.V-1)*7),xe.y=W.getFullYear(),xe.m=W.getMonth(),xe.d=W.getDate()+(xe.w+6)%7)}else("W"in xe||"U"in xe)&&("w"in xe||(xe.w="u"in xe?xe.u%7:"W"in xe?1:0),B="Z"in xe?w1(fp(xe.y,0,1)).getUTCDay():b1(fp(xe.y,0,1)).getDay(),xe.m=0,xe.d="W"in xe?(xe.w+6)%7+xe.W*7-(B+5)%7:xe.w+xe.U*7-(B+6)%7);return"Z"in xe?(xe.H+=xe.Z/100|0,xe.M+=xe.Z%100,w1(xe)):b1(xe)}}function M(ne,Ne,le,xe){for(var H=0,W=Ne.length,B=le.length,ee,X;H<W;){if(xe>=B)return-1;if(ee=Ne.charCodeAt(H++),ee===37){if(ee=Ne.charAt(H++),X=L[ee in cA?Ne.charAt(H++):ee],!X||(xe=X(ne,le,xe))<0)return-1}else if(ee!=le.charCodeAt(xe++))return-1}return xe}function U(ne,Ne,le){var xe=f.exec(Ne.slice(le));return xe?(ne.p=m.get(xe[0].toLowerCase()),le+xe[0].length):-1}function oe(ne,Ne,le){var xe=x.exec(Ne.slice(le));return xe?(ne.w=j.get(xe[0].toLowerCase()),le+xe[0].length):-1}function R(ne,Ne,le){var xe=g.exec(Ne.slice(le));return xe?(ne.w=v.get(xe[0].toLowerCase()),le+xe[0].length):-1}function q(ne,Ne,le){var xe=S.exec(Ne.slice(le));return xe?(ne.m=T.get(xe[0].toLowerCase()),le+xe[0].length):-1}function se(ne,Ne,le){var xe=b.exec(Ne.slice(le));return xe?(ne.m=A.get(xe[0].toLowerCase()),le+xe[0].length):-1}function J(ne,Ne,le){return M(ne,t,Ne,le)}function Q(ne,Ne,le){return M(ne,r,Ne,le)}function ae(ne,Ne,le){return M(ne,a,Ne,le)}function he(ne){return l[ne.getDay()]}function de(ne){return i[ne.getDay()]}function _e(ne){return d[ne.getMonth()]}function Y(ne){return u[ne.getMonth()]}function ye(ne){return s[+(ne.getHours()>=12)]}function P(ne){return 1+~~(ne.getMonth()/3)}function Z(ne){return l[ne.getUTCDay()]}function ce(ne){return i[ne.getUTCDay()]}function je(ne){return d[ne.getUTCMonth()]}function ke(ne){return u[ne.getUTCMonth()]}function De(ne){return s[+(ne.getUTCHours()>=12)]}function Ee(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var Ne=F(ne+="",E);return Ne.toString=function(){return ne},Ne},parse:function(ne){var Ne=z(ne+="",!1);return Ne.toString=function(){return ne},Ne},utcFormat:function(ne){var Ne=F(ne+="",D);return Ne.toString=function(){return ne},Ne},utcParse:function(ne){var Ne=z(ne+="",!0);return Ne.toString=function(){return ne},Ne}}}var cA={"-":"",_:" ",0:"0"},gs=/^\s*\d+/,IU=/^%/,qU=/[\\^$*+?|[\]().{}]/g;function la(e,t,r){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<r?new Array(r-i+1).join(t)+s:s)}function FU(e){return e.replace(qU,"\\$&")}function hp(e){return new RegExp("^(?:"+e.map(FU).join("|")+")","i")}function mp(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function BU(e,t,r){var a=gs.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function UU(e,t,r){var a=gs.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function $U(e,t,r){var a=gs.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function zU(e,t,r){var a=gs.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function VU(e,t,r){var a=gs.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function uA(e,t,r){var a=gs.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function dA(e,t,r){var a=gs.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function HU(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function GU(e,t,r){var a=gs.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function KU(e,t,r){var a=gs.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function fA(e,t,r){var a=gs.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function WU(e,t,r){var a=gs.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function hA(e,t,r){var a=gs.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function YU(e,t,r){var a=gs.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function XU(e,t,r){var a=gs.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function ZU(e,t,r){var a=gs.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function JU(e,t,r){var a=gs.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function QU(e,t,r){var a=IU.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function e$(e,t,r){var a=gs.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function t$(e,t,r){var a=gs.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function mA(e,t){return la(e.getDate(),t,2)}function r$(e,t){return la(e.getHours(),t,2)}function a$(e,t){return la(e.getHours()%12||12,t,2)}function n$(e,t){return la(1+sg.count(ru(e),e),t,3)}function MP(e,t){return la(e.getMilliseconds(),t,3)}function s$(e,t){return MP(e,t)+"000"}function i$(e,t){return la(e.getMonth()+1,t,2)}function o$(e,t){return la(e.getMinutes(),t,2)}function l$(e,t){return la(e.getSeconds(),t,2)}function c$(e){var t=e.getDay();return t===0?7:t}function u$(e,t){return la(pv.count(ru(e)-1,e),t,2)}function IP(e){var t=e.getDay();return t>=4||t===0?Jh(e):Jh.ceil(e)}function d$(e,t){return e=IP(e),la(Jh.count(ru(e),e)+(ru(e).getDay()===4),t,2)}function f$(e){return e.getDay()}function h$(e,t){return la(Ox.count(ru(e)-1,e),t,2)}function m$(e,t){return la(e.getFullYear()%100,t,2)}function p$(e,t){return e=IP(e),la(e.getFullYear()%100,t,2)}function g$(e,t){return la(e.getFullYear()%1e4,t,4)}function x$(e,t){var r=e.getDay();return e=r>=4||r===0?Jh(e):Jh.ceil(e),la(e.getFullYear()%1e4,t,4)}function v$(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+la(t/60|0,"0",2)+la(t%60,"0",2)}function pA(e,t){return la(e.getUTCDate(),t,2)}function y$(e,t){return la(e.getUTCHours(),t,2)}function b$(e,t){return la(e.getUTCHours()%12||12,t,2)}function w$(e,t){return la(1+mv.count(au(e),e),t,3)}function qP(e,t){return la(e.getUTCMilliseconds(),t,3)}function j$(e,t){return qP(e,t)+"000"}function _$(e,t){return la(e.getUTCMonth()+1,t,2)}function N$(e,t){return la(e.getUTCMinutes(),t,2)}function S$(e,t){return la(e.getUTCSeconds(),t,2)}function A$(e){var t=e.getUTCDay();return t===0?7:t}function C$(e,t){return la(gv.count(au(e)-1,e),t,2)}function FP(e){var t=e.getUTCDay();return t>=4||t===0?Qh(e):Qh.ceil(e)}function k$(e,t){return e=FP(e),la(Qh.count(au(e),e)+(au(e).getUTCDay()===4),t,2)}function E$(e){return e.getUTCDay()}function P$(e,t){return la(Dx.count(au(e)-1,e),t,2)}function T$(e,t){return la(e.getUTCFullYear()%100,t,2)}function O$(e,t){return e=FP(e),la(e.getUTCFullYear()%100,t,2)}function D$(e,t){return la(e.getUTCFullYear()%1e4,t,4)}function R$(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Qh(e):Qh.ceil(e),la(e.getUTCFullYear()%1e4,t,4)}function L$(){return"+0000"}function gA(){return"%"}function xA(e){return+e}function vA(e){return Math.floor(+e/1e3)}var Sh,BP,UP;M$({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function M$(e){return Sh=MU(e),BP=Sh.format,Sh.parse,UP=Sh.utcFormat,Sh.utcParse,Sh}function I$(e){return new Date(e)}function q$(e){return e instanceof Date?+e:+new Date(+e)}function Uj(e,t,r,a,s,i,l,u,d,f){var m=Cj(),g=m.invert,v=m.domain,x=f(".%L"),j=f(":%S"),b=f("%I:%M"),A=f("%I %p"),S=f("%a %d"),T=f("%b %d"),E=f("%B"),D=f("%Y");function L(F){return(d(F)<F?x:u(F)<F?j:l(F)<F?b:i(F)<F?A:a(F)<F?s(F)<F?S:T:r(F)<F?E:D)(F)}return m.invert=function(F){return new Date(g(F))},m.domain=function(F){return arguments.length?v(Array.from(F,q$)):v().map(I$)},m.ticks=function(F){var z=v();return e(z[0],z[z.length-1],F??10)},m.tickFormat=function(F,z){return z==null?L:f(z)},m.nice=function(F){var z=v();return(!F||typeof F.range!="function")&&(F=t(z[0],z[z.length-1],F??10)),F?v(CP(z,F)):m},m.copy=function(){return ng(m,Uj(e,t,r,a,s,i,l,u,d,f))},m}function F$(){return Io.apply(Uj(RU,LU,ru,Fj,pv,sg,Ij,Lj,cf,BP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function B$(){return Io.apply(Uj(OU,DU,au,Bj,gv,mv,qj,Mj,cf,UP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xv(){var e=0,t=1,r,a,s,i,l=ni,u=!1,d;function f(g){return g==null||isNaN(g=+g)?d:l(s===0?.5:(g=(i(g)-r)*s,u?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([e,t]=g,r=i(e=+e),a=i(t=+t),s=r===a?0:1/(a-r),f):[e,t]},f.clamp=function(g){return arguments.length?(u=!!g,f):u},f.interpolator=function(g){return arguments.length?(l=g,f):l};function m(g){return function(v){var x,j;return arguments.length?([x,j]=v,l=g(x,j),f):[l(0),l(1)]}}return f.range=m(cm),f.rangeRound=m(Aj),f.unknown=function(g){return arguments.length?(d=g,f):d},function(g){return i=g,r=g(e),a=g(t),s=r===a?0:1/(a-r),f}}function jd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function $P(){var e=wd(xv()(ni));return e.copy=function(){return jd(e,$P())},uu.apply(e,arguments)}function zP(){var e=Pj(xv()).domain([1,10]);return e.copy=function(){return jd(e,zP()).base(e.base())},uu.apply(e,arguments)}function VP(){var e=Tj(xv());return e.copy=function(){return jd(e,VP()).constant(e.constant())},uu.apply(e,arguments)}function $j(){var e=Oj(xv());return e.copy=function(){return jd(e,$j()).exponent(e.exponent())},uu.apply(e,arguments)}function U$(){return $j.apply(null,arguments).exponent(.5)}function HP(){var e=[],t=ni;function r(a){if(a!=null&&!isNaN(a=+a))return t((rg(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(cd),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(s,i)=>AB(e,i/a))},r.copy=function(){return HP(t).domain(e)},uu.apply(r,arguments)}function vv(){var e=0,t=.5,r=1,a=1,s,i,l,u,d,f=ni,m,g=!1,v;function x(b){return isNaN(b=+b)?v:(b=.5+((b=+m(b))-i)*(a*b<a*i?u:d),f(g?Math.max(0,Math.min(1,b)):b))}x.domain=function(b){return arguments.length?([e,t,r]=b,s=m(e=+e),i=m(t=+t),l=m(r=+r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),a=i<s?-1:1,x):[e,t,r]},x.clamp=function(b){return arguments.length?(g=!!b,x):g},x.interpolator=function(b){return arguments.length?(f=b,x):f};function j(b){return function(A){var S,T,E;return arguments.length?([S,T,E]=A,f=QB(b,[S,T,E]),x):[f(0),f(.5),f(1)]}}return x.range=j(cm),x.rangeRound=j(Aj),x.unknown=function(b){return arguments.length?(v=b,x):v},function(b){return m=b,s=b(e),i=b(t),l=b(r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),a=i<s?-1:1,x}}function GP(){var e=wd(vv()(ni));return e.copy=function(){return jd(e,GP())},uu.apply(e,arguments)}function KP(){var e=Pj(vv()).domain([.1,1,10]);return e.copy=function(){return jd(e,KP()).base(e.base())},uu.apply(e,arguments)}function WP(){var e=Tj(vv());return e.copy=function(){return jd(e,WP()).constant(e.constant())},uu.apply(e,arguments)}function zj(){var e=Oj(vv());return e.copy=function(){return jd(e,zj()).exponent(e.exponent())},uu.apply(e,arguments)}function $$(){return zj.apply(null,arguments).exponent(.5)}const bp=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:_j,scaleDiverging:GP,scaleDivergingLog:KP,scaleDivergingPow:zj,scaleDivergingSqrt:$$,scaleDivergingSymlog:WP,scaleIdentity:AP,scaleImplicit:tw,scaleLinear:SP,scaleLog:kP,scaleOrdinal:jj,scalePoint:EB,scalePow:Dj,scaleQuantile:TP,scaleQuantize:OP,scaleRadial:PP,scaleSequential:$P,scaleSequentialLog:zP,scaleSequentialPow:$j,scaleSequentialQuantile:HP,scaleSequentialSqrt:U$,scaleSequentialSymlog:VP,scaleSqrt:jU,scaleSymlog:EP,scaleThreshold:DP,scaleTime:F$,scaleUtc:B$,tickFormat:NP},Symbol.toStringTag,{value:"Module"}));var Ef=e=>e.chartData,Vj=ot([Ef],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Hj=(e,t,r,a)=>a?Vj(e):Ef(e);function em(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(eo(t)&&eo(r))return!0}return!1}function yA(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function z$(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,a]=e,s,i;if(eo(r))s=r;else if(typeof r=="function")return;if(eo(a))i=a;else if(typeof a=="function")return;var l=[s,i];if(em(l))return l}}function V$(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,r);if(em(a))return yA(a,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,l,u;if(s==="auto")t!=null&&(l=Math.min(...t));else if(Xt(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&i3.test(s)){var d=i3.exec(s);if(d==null||t==null)l=void 0;else{var f=+d[1];l=t[0]-f}}else l=t==null?void 0:t[0];if(i==="auto")t!=null&&(u=Math.max(...t));else if(Xt(i))u=i;else if(typeof i=="function")try{t!=null&&(u=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&o3.test(i)){var m=o3.exec(i);if(m==null||t==null)u=void 0;else{var g=+m[1];u=t[1]+g}}else u=t==null?void 0:t[1];var v=[l,u];if(em(v))return t==null?v:yA(v,t,r)}}}var um=1e9,H$={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Kj,nn=!0,Oo="[DecimalError] ",pf=Oo+"Invalid argument: ",Gj=Oo+"Exponent out of range: ",dm=Math.floor,ef=Math.pow,G$=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Gi,ds=1e7,Ha=7,YP=9007199254740991,Rx=dm(YP/Ha),Zt={};Zt.absoluteValue=Zt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Zt.comparedTo=Zt.cmp=function(e){var t,r,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,r=a<s?a:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};Zt.decimalPlaces=Zt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ha;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Zt.dividedBy=Zt.div=function(e){return Qc(this,new this.constructor(e))};Zt.dividedToIntegerBy=Zt.idiv=function(e){var t=this,r=t.constructor;return Ia(Qc(t,new r(e),0,1),r.precision)};Zt.equals=Zt.eq=function(e){return!this.cmp(e)};Zt.exponent=function(){return $n(this)};Zt.greaterThan=Zt.gt=function(e){return this.cmp(e)>0};Zt.greaterThanOrEqualTo=Zt.gte=function(e){return this.cmp(e)>=0};Zt.isInteger=Zt.isint=function(){return this.e>this.d.length-2};Zt.isNegative=Zt.isneg=function(){return this.s<0};Zt.isPositive=Zt.ispos=function(){return this.s>0};Zt.isZero=function(){return this.s===0};Zt.lessThan=Zt.lt=function(e){return this.cmp(e)<0};Zt.lessThanOrEqualTo=Zt.lte=function(e){return this.cmp(e)<1};Zt.logarithm=Zt.log=function(e){var t,r=this,a=r.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Gi))throw Error(Oo+"NaN");if(r.s<1)throw Error(Oo+(r.s?"NaN":"-Infinity"));return r.eq(Gi)?new a(0):(nn=!1,t=Qc(qp(r,i),qp(e,i),i),nn=!0,Ia(t,s))};Zt.minus=Zt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?JP(t,e):XP(t,(e.s=-e.s,e))};Zt.modulo=Zt.mod=function(e){var t,r=this,a=r.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(Oo+"NaN");return r.s?(nn=!1,t=Qc(r,e,0,1).times(e),nn=!0,r.minus(t)):Ia(new a(r),s)};Zt.naturalExponential=Zt.exp=function(){return ZP(this)};Zt.naturalLogarithm=Zt.ln=function(){return qp(this)};Zt.negated=Zt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Zt.plus=Zt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?XP(t,e):JP(t,(e.s=-e.s,e))};Zt.precision=Zt.sd=function(e){var t,r,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(pf+e);if(t=$n(s)+1,a=s.d.length-1,r=a*Ha+1,a=s.d[a],a){for(;a%10==0;a/=10)r--;for(a=s.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};Zt.squareRoot=Zt.sqrt=function(){var e,t,r,a,s,i,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(Oo+"NaN")}for(e=$n(u),nn=!1,s=Math.sqrt(+u),s==0||s==1/0?(t=Zl(u.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=dm((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new d(t)):a=new d(s.toString()),r=d.precision,s=l=r+3;;)if(i=a,a=i.plus(Qc(u,i,l+2)).times(.5),Zl(i.d).slice(0,l)===(t=Zl(a.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(Ia(i,r+1,0),i.times(i).eq(u)){a=i;break}}else if(t!="9999")break;l+=4}return nn=!0,Ia(a,r)};Zt.times=Zt.mul=function(e){var t,r,a,s,i,l,u,d,f,m=this,g=m.constructor,v=m.d,x=(e=new g(e)).d;if(!m.s||!e.s)return new g(0);for(e.s*=m.s,r=m.e+e.e,d=v.length,f=x.length,d<f&&(i=v,v=x,x=i,l=d,d=f,f=l),i=[],l=d+f,a=l;a--;)i.push(0);for(a=f;--a>=0;){for(t=0,s=d+a;s>a;)u=i[s]+x[a]*v[s-a-1]+t,i[s--]=u%ds|0,t=u/ds|0;i[s]=(i[s]+t)%ds|0}for(;!i[--l];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,nn?Ia(e,g.precision):e};Zt.toDecimalPlaces=Zt.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(sc(e,0,um),t===void 0?t=a.rounding:sc(t,0,8),Ia(r,e+$n(r)+1,t))};Zt.toExponential=function(e,t){var r,a=this,s=a.constructor;return e===void 0?r=bf(a,!0):(sc(e,0,um),t===void 0?t=s.rounding:sc(t,0,8),a=Ia(new s(a),e+1,t),r=bf(a,!0,e+1)),r};Zt.toFixed=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?bf(s):(sc(e,0,um),t===void 0?t=i.rounding:sc(t,0,8),a=Ia(new i(s),e+$n(s)+1,t),r=bf(a.abs(),!1,e+$n(a)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Zt.toInteger=Zt.toint=function(){var e=this,t=e.constructor;return Ia(new t(e),$n(e)+1,t.rounding)};Zt.toNumber=function(){return+this};Zt.toPower=Zt.pow=function(e){var t,r,a,s,i,l,u=this,d=u.constructor,f=12,m=+(e=new d(e));if(!e.s)return new d(Gi);if(u=new d(u),!u.s){if(e.s<1)throw Error(Oo+"Infinity");return u}if(u.eq(Gi))return u;if(a=d.precision,e.eq(Gi))return Ia(u,a);if(t=e.e,r=e.d.length-1,l=t>=r,i=u.s,l){if((r=m<0?-m:m)<=YP){for(s=new d(Gi),t=Math.ceil(a/Ha+4),nn=!1;r%2&&(s=s.times(u),wA(s.d,t)),r=dm(r/2),r!==0;)u=u.times(u),wA(u.d,t);return nn=!0,e.s<0?new d(Gi).div(s):Ia(s,a)}}else if(i<0)throw Error(Oo+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,nn=!1,s=e.times(qp(u,a+f)),nn=!0,s=ZP(s),s.s=i,s};Zt.toPrecision=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?(r=$n(s),a=bf(s,r<=i.toExpNeg||r>=i.toExpPos)):(sc(e,1,um),t===void 0?t=i.rounding:sc(t,0,8),s=Ia(new i(s),e,t),r=$n(s),a=bf(s,e<=r||r<=i.toExpNeg,e)),a};Zt.toSignificantDigits=Zt.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(sc(e,1,um),t===void 0?t=a.rounding:sc(t,0,8)),Ia(new a(r),e,t)};Zt.toString=Zt.valueOf=Zt.val=Zt.toJSON=Zt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=$n(e),r=e.constructor;return bf(e,t<=r.toExpNeg||t>=r.toExpPos)};function XP(e,t){var r,a,s,i,l,u,d,f,m=e.constructor,g=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),nn?Ia(t,g):t;if(d=e.d,f=t.d,l=e.e,s=t.e,d=d.slice(),i=l-s,i){for(i<0?(a=d,i=-i,u=f.length):(a=f,s=l,u=d.length),l=Math.ceil(g/Ha),u=l>u?l+1:u+1,i>u&&(i=u,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(u=d.length,i=f.length,u-i<0&&(i=u,a=f,f=d,d=a),r=0;i;)r=(d[--i]=d[i]+f[i]+r)/ds|0,d[i]%=ds;for(r&&(d.unshift(r),++s),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=s,nn?Ia(t,g):t}function sc(e,t,r){if(e!==~~e||e<t||e>r)throw Error(pf+e)}function Zl(e){var t,r,a,s=e.length-1,i="",l=e[0];if(s>0){for(i+=l,t=1;t<s;t++)a=e[t]+"",r=Ha-a.length,r&&(i+=ad(r)),i+=a;l=e[t],a=l+"",r=Ha-a.length,r&&(i+=ad(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var Qc=function(){function e(a,s){var i,l=0,u=a.length;for(a=a.slice();u--;)i=a[u]*s+l,a[u]=i%ds|0,l=i/ds|0;return l&&a.unshift(l),a}function t(a,s,i,l){var u,d;if(i!=l)d=i>l?1:-1;else for(u=d=0;u<i;u++)if(a[u]!=s[u]){d=a[u]>s[u]?1:-1;break}return d}function r(a,s,i){for(var l=0;i--;)a[i]-=l,l=a[i]<s[i]?1:0,a[i]=l*ds+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,l){var u,d,f,m,g,v,x,j,b,A,S,T,E,D,L,F,z,M,U=a.constructor,oe=a.s==s.s?1:-1,R=a.d,q=s.d;if(!a.s)return new U(a);if(!s.s)throw Error(Oo+"Division by zero");for(d=a.e-s.e,z=q.length,L=R.length,x=new U(oe),j=x.d=[],f=0;q[f]==(R[f]||0);)++f;if(q[f]>(R[f]||0)&&--d,i==null?T=i=U.precision:l?T=i+($n(a)-$n(s))+1:T=i,T<0)return new U(0);if(T=T/Ha+2|0,f=0,z==1)for(m=0,q=q[0],T++;(f<L||m)&&T--;f++)E=m*ds+(R[f]||0),j[f]=E/q|0,m=E%q|0;else{for(m=ds/(q[0]+1)|0,m>1&&(q=e(q,m),R=e(R,m),z=q.length,L=R.length),D=z,b=R.slice(0,z),A=b.length;A<z;)b[A++]=0;M=q.slice(),M.unshift(0),F=q[0],q[1]>=ds/2&&++F;do m=0,u=t(q,b,z,A),u<0?(S=b[0],z!=A&&(S=S*ds+(b[1]||0)),m=S/F|0,m>1?(m>=ds&&(m=ds-1),g=e(q,m),v=g.length,A=b.length,u=t(g,b,v,A),u==1&&(m--,r(g,z<v?M:q,v))):(m==0&&(u=m=1),g=q.slice()),v=g.length,v<A&&g.unshift(0),r(b,g,A),u==-1&&(A=b.length,u=t(q,b,z,A),u<1&&(m++,r(b,z<A?M:q,A))),A=b.length):u===0&&(m++,b=[0]),j[f++]=m,u&&b[0]?b[A++]=R[D]||0:(b=[R[D]],A=1);while((D++<L||b[0]!==void 0)&&T--)}return j[0]||j.shift(),x.e=d,Ia(x,l?i+$n(x)+1:i)}}();function ZP(e,t){var r,a,s,i,l,u,d=0,f=0,m=e.constructor,g=m.precision;if($n(e)>16)throw Error(Gj+$n(e));if(!e.s)return new m(Gi);for(nn=!1,u=g,l=new m(.03125);e.abs().gte(.1);)e=e.times(l),f+=5;for(a=Math.log(ef(2,f))/Math.LN10*2+5|0,u+=a,r=s=i=new m(Gi),m.precision=u;;){if(s=Ia(s.times(e),u),r=r.times(++d),l=i.plus(Qc(s,r,u)),Zl(l.d).slice(0,u)===Zl(i.d).slice(0,u)){for(;f--;)i=Ia(i.times(i),u);return m.precision=g,t==null?(nn=!0,Ia(i,g)):i}i=l}}function $n(e){for(var t=e.e*Ha,r=e.d[0];r>=10;r/=10)t++;return t}function j1(e,t,r){if(t>e.LN10.sd())throw nn=!0,r&&(e.precision=r),Error(Oo+"LN10 precision limit exceeded");return Ia(new e(e.LN10),t)}function ad(e){for(var t="";e--;)t+="0";return t}function qp(e,t){var r,a,s,i,l,u,d,f,m,g=1,v=10,x=e,j=x.d,b=x.constructor,A=b.precision;if(x.s<1)throw Error(Oo+(x.s?"NaN":"-Infinity"));if(x.eq(Gi))return new b(0);if(t==null?(nn=!1,f=A):f=t,x.eq(10))return t==null&&(nn=!0),j1(b,f);if(f+=v,b.precision=f,r=Zl(j),a=r.charAt(0),i=$n(x),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)x=x.times(e),r=Zl(x.d),a=r.charAt(0),g++;i=$n(x),a>1?(x=new b("0."+r),i++):x=new b(a+"."+r.slice(1))}else return d=j1(b,f+2,A).times(i+""),x=qp(new b(a+"."+r.slice(1)),f-v).plus(d),b.precision=A,t==null?(nn=!0,Ia(x,A)):x;for(u=l=x=Qc(x.minus(Gi),x.plus(Gi),f),m=Ia(x.times(x),f),s=3;;){if(l=Ia(l.times(m),f),d=u.plus(Qc(l,new b(s),f)),Zl(d.d).slice(0,f)===Zl(u.d).slice(0,f))return u=u.times(2),i!==0&&(u=u.plus(j1(b,f+2,A).times(i+""))),u=Qc(u,new b(g),f),b.precision=A,t==null?(nn=!0,Ia(u,A)):u;u=d,s+=2}}function bA(e,t){var r,a,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,r=r-a-1,e.e=dm(r/Ha),e.d=[],a=(r+1)%Ha,r<0&&(a+=Ha),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=Ha;a<s;)e.d.push(+t.slice(a,a+=Ha));t=t.slice(a),a=Ha-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),nn&&(e.e>Rx||e.e<-Rx))throw Error(Gj+r)}else e.s=0,e.e=0,e.d=[0];return e}function Ia(e,t,r){var a,s,i,l,u,d,f,m,g=e.d;for(l=1,i=g[0];i>=10;i/=10)l++;if(a=t-l,a<0)a+=Ha,s=t,f=g[m=0];else{if(m=Math.ceil((a+1)/Ha),i=g.length,m>=i)return e;for(f=i=g[m],l=1;i>=10;i/=10)l++;a%=Ha,s=a-Ha+l}if(r!==void 0&&(i=ef(10,l-s-1),u=f/i%10|0,d=t<0||g[m+1]!==void 0||f%i,d=r<4?(u||d)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||d||r==6&&(a>0?s>0?f/ef(10,l-s):0:g[m-1])%10&1||r==(e.s<0?8:7))),t<1||!g[0])return d?(i=$n(e),g.length=1,t=t-i-1,g[0]=ef(10,(Ha-t%Ha)%Ha),e.e=dm(-t/Ha)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(a==0?(g.length=m,i=1,m--):(g.length=m+1,i=ef(10,Ha-a),g[m]=s>0?(f/ef(10,l-s)%ef(10,s)|0)*i:0),d)for(;;)if(m==0){(g[0]+=i)==ds&&(g[0]=1,++e.e);break}else{if(g[m]+=i,g[m]!=ds)break;g[m--]=0,i=1}for(a=g.length;g[--a]===0;)g.pop();if(nn&&(e.e>Rx||e.e<-Rx))throw Error(Gj+$n(e));return e}function JP(e,t){var r,a,s,i,l,u,d,f,m,g,v=e.constructor,x=v.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new v(e),nn?Ia(t,x):t;if(d=e.d,g=t.d,a=t.e,f=e.e,d=d.slice(),l=f-a,l){for(m=l<0,m?(r=d,l=-l,u=g.length):(r=g,a=f,u=d.length),s=Math.max(Math.ceil(x/Ha),u)+2,l>s&&(l=s,r.length=1),r.reverse(),s=l;s--;)r.push(0);r.reverse()}else{for(s=d.length,u=g.length,m=s<u,m&&(u=s),s=0;s<u;s++)if(d[s]!=g[s]){m=d[s]<g[s];break}l=0}for(m&&(r=d,d=g,g=r,t.s=-t.s),u=d.length,s=g.length-u;s>0;--s)d[u++]=0;for(s=g.length;s>l;){if(d[--s]<g[s]){for(i=s;i&&d[--i]===0;)d[i]=ds-1;--d[i],d[s]+=ds}d[s]-=g[s]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--a;return d[0]?(t.d=d,t.e=a,nn?Ia(t,x):t):new v(0)}function bf(e,t,r){var a,s=$n(e),i=Zl(e.d),l=i.length;return t?(r&&(a=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+ad(a):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+ad(-s-1)+i,r&&(a=r-l)>0&&(i+=ad(a))):s>=l?(i+=ad(s+1-l),r&&(a=r-s-1)>0&&(i=i+"."+ad(a))):((a=s+1)<l&&(i=i.slice(0,a)+"."+i.slice(a)),r&&(a=r-l)>0&&(s+1===l&&(i+="."),i+=ad(a))),e.s<0?"-"+i:i}function wA(e,t){if(e.length>t)return e.length=t,!0}function QP(e){var t,r,a;function s(i){var l=this;if(!(l instanceof s))return new s(i);if(l.constructor=s,i instanceof s){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(pf+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return bA(l,i.toString())}else if(typeof i!="string")throw Error(pf+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,G$.test(i))bA(l,i);else throw Error(pf+i)}if(s.prototype=Zt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=QP,s.config=s.set=K$,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return s.config(e),s}function K$(e){if(!e||typeof e!="object")throw Error(Oo+"Object expected");var t,r,a,s=["precision",1,um,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[r=s[t]])!==void 0)if(dm(a)===a&&a>=s[t+1]&&a<=s[t+2])this[r]=a;else throw Error(pf+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(pf+r+": "+a);return this}var Kj=QP(H$);Gi=new Kj(1);const ja=Kj;var W$=e=>e,eT={},tT=e=>e===eT,jA=e=>function t(){return arguments.length===0||arguments.length===1&&tT(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},rT=(e,t)=>e===1?t:jA(function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var i=a.filter(l=>l!==eT).length;return i>=e?t(...a):rT(e-i,jA(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var f=a.map(m=>tT(m)?u.shift():m);return t(...f,...u)}))}),yv=e=>rT(e.length,e),sw=(e,t)=>{for(var r=[],a=e;a<t;++a)r[a-e]=a;return r},Y$=yv((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),X$=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return W$;var s=r.reverse(),i=s[0],l=s.slice(1);return function(){return l.reduce((u,d)=>d(u),i(...arguments))}},iw=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),aT=e=>{var t=null,r=null;return function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return t&&s.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=s,r=e(...s)),r}};function nT(e){var t;return e===0?t=1:t=Math.floor(new ja(e).abs().log(10).toNumber())+1,t}function sT(e,t,r){for(var a=new ja(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(r),s++;return i}yv((e,t,r)=>{var a=+e,s=+t;return a+r*(s-a)});yv((e,t,r)=>{var a=t-+e;return a=a||1/0,(r-e)/a});yv((e,t,r)=>{var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});var iT=e=>{var[t,r]=e,[a,s]=[t,r];return t>r&&([a,s]=[r,t]),[a,s]},oT=(e,t,r)=>{if(e.lte(0))return new ja(0);var a=nT(e.toNumber()),s=new ja(10).pow(a),i=e.div(s),l=a!==1?.05:.1,u=new ja(Math.ceil(i.div(l).toNumber())).add(r).mul(l),d=u.mul(s);return t?new ja(d.toNumber()):new ja(Math.ceil(d.toNumber()))},Z$=(e,t,r)=>{var a=new ja(1),s=new ja(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(a=new ja(10).pow(nT(e)-1),s=new ja(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new ja(Math.floor(e)))}else e===0?s=new ja(Math.floor((t-1)/2)):r||(s=new ja(Math.floor(e)));var l=Math.floor((t-1)/2),u=X$(Y$(d=>s.add(new ja(d-l).mul(a)).toNumber()),sw);return u(0,t)},lT=function(t,r,a,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(a-1)))return{step:new ja(0),tickMin:new ja(0),tickMax:new ja(0)};var l=oT(new ja(r).sub(t).div(a-1),s,i),u;t<=0&&r>=0?u=new ja(0):(u=new ja(t).add(r).div(2),u=u.sub(new ja(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),f=Math.ceil(new ja(r).sub(u).div(l).toNumber()),m=d+f+1;return m>a?lT(t,r,a,s,i+1):(m<a&&(f=r>0?f+(a-m):f,d=r>0?d:d+(a-m)),{step:l,tickMin:u.sub(new ja(d).mul(l)),tickMax:u.add(new ja(f).mul(l))})};function J$(e){var[t,r]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(a,2),[l,u]=iT([t,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...sw(0,a-1).map(()=>1/0)]:[...sw(0,a-1).map(()=>-1/0),u];return t>r?iw(d):d}if(l===u)return Z$(l,a,s);var{step:f,tickMin:m,tickMax:g}=lT(l,u,i,s,0),v=sT(m,g.add(new ja(.1).mul(f)),f);return t>r?iw(v):v}function Q$(e,t){var[r,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=iT([r,a]);if(i===-1/0||l===1/0)return[r,a];if(i===l)return[i];var u=Math.max(t,2),d=oT(new ja(l).sub(i).div(u-1),s,0),f=[...sT(new ja(i),new ja(l),d),l];return s===!1&&(f=f.map(m=>Math.round(m))),r>a?iw(f):f}var ez=aT(J$),tz=aT(Q$),cT=e=>e.rootProps.maxBarSize,rz=e=>e.rootProps.barGap,uT=e=>e.rootProps.barCategoryGap,az=e=>e.rootProps.barSize,ig=e=>e.rootProps.stackOffset,Wj=e=>e.options.chartName,Yj=e=>e.rootProps.syncId,dT=e=>e.rootProps.syncMethod,Xj=e=>e.options.eventEmitter,Hc={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},zi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},bv=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},nz={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Hc.angleAxisId,includeHidden:!1,name:void 0,reversed:Hc.reversed,scale:Hc.scale,tick:Hc.tick,tickCount:void 0,ticks:void 0,type:Hc.type,unit:void 0},sz={allowDataOverflow:zi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:zi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:zi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:zi.scale,tick:zi.tick,tickCount:zi.tickCount,ticks:void 0,type:zi.type,unit:void 0},iz={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Hc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Hc.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Hc.scale,tick:Hc.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},oz={allowDataOverflow:zi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:zi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:zi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:zi.scale,tick:zi.tick,tickCount:zi.tickCount,ticks:void 0,type:"category",unit:void 0},Zj=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?iz:nz,Jj=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?oz:sz,wv=e=>e.polarOptions,Qj=ot([lu,cu,Jn],WE),fT=ot([wv,Qj],(e,t)=>{if(e!=null)return oi(e.innerRadius,t,0)}),hT=ot([wv,Qj],(e,t)=>{if(e!=null)return oi(e.outerRadius,t,t*.8)}),lz=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},mT=ot([wv],lz);ot([Zj,mT],bv);var pT=ot([Qj,fT,hT],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});ot([Jj,pT],bv);var cz=ot([fa,wv,fT,hT,lu,cu],(e,t,r,a,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||a==null)){var{cx:l,cy:u,startAngle:d,endAngle:f}=t;return{cx:oi(l,s,s/2),cy:oi(u,i,i/2),innerRadius:r,outerRadius:a,startAngle:d,endAngle:f,clockWise:!1}}}),Rn=(e,t)=>t,og=(e,t,r)=>r;function _A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Lx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_A(Object(r),!0).forEach(function(a){uz(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_A(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function uz(e,t,r){return(t=dz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dz(e){var t=fz(e,"string");return typeof t=="symbol"?t:t+""}function fz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ow=[0,"auto"],Bi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},du=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Bi},Ui={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ow,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:cv},_d=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Ui},hz={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},e_=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??hz},Ln=(e,t,r)=>{switch(t){case"xAxis":return du(e,r);case"yAxis":return _d(e,r);case"zAxis":return e_(e,r);case"angleAxis":return Zj(e,r);case"radiusAxis":return Jj(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},mz=(e,t,r)=>{switch(t){case"xAxis":return du(e,r);case"yAxis":return _d(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},lg=(e,t,r)=>{switch(t){case"xAxis":return du(e,r);case"yAxis":return _d(e,r);case"angleAxis":return Zj(e,r);case"radiusAxis":return Jj(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},gT=e=>e.graphicalItems.countOfBars>0;function t_(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var jv=e=>e.graphicalItems.cartesianItems,pz=ot([Rn,og],t_),r_=(e,t,r)=>e.filter(r).filter(a=>(t==null?void 0:t.includeHidden)===!0?!0:!a.hide),cg=ot([jv,Ln,pz],r_),xT=e=>e.filter(t=>t.stackId===void 0),gz=ot([cg],xT),a_=e=>e.map(t=>t.data).filter(Boolean).flat(1),xz=ot([cg],a_),n_=(e,t)=>{var{chartData:r=[],dataStartIndex:a,dataEndIndex:s}=t;return e.length>0?e:r.slice(a,s+1)},_v=ot([xz,Hj],n_),s_=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:Ga(a,t.dataKey)})):r.length>0?r.map(a=>a.dataKey).flatMap(a=>e.map(s=>({value:Ga(s,a)}))):e.map(a=>({value:a})),Nv=ot([_v,Ln,cg],s_);function vT(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Pf(e){return e.filter(t=>nc(t)||t instanceof Date).map(Number).filter(t=>Zi(t)===!1)}function vz(e,t,r){return!r||typeof t!="number"||Zi(t)?[]:r.length?Pf(r.flatMap(a=>{var s=Ga(e,a.dataKey),i,l;if(Array.isArray(s)?[i,l]=s:i=l=s,!(!eo(i)||!eo(l)))return[t-i,t+l]})):[]}var yT=(e,t,r)=>{var a={},s=t.reduce((i,l)=>(l.stackId==null||(i[l.stackId]==null&&(i[l.stackId]=[]),i[l.stackId].push(l)),i),a);return Object.fromEntries(Object.entries(s).map(i=>{var[l,u]=i,d=u.map(f=>f.dataKey);return[l,{stackedData:vF(e,d,r),graphicalItems:u}]}))},lw=ot([_v,cg,ig],yT),bT=(e,t,r)=>{var{dataStartIndex:a,dataEndIndex:s}=t;if(r!=="zAxis"){var i=jF(e,a,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},yz=ot([lw,Ef,Rn],bT),wT=(e,t,r,a)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var l,u,d=(l=i.errorBars)===null||l===void 0?void 0:l.filter(m=>vT(a,m)),f=Ga(s,(u=t.dataKey)!==null&&u!==void 0?u:i.dataKey);return{value:f,errorDomain:vz(s,f,d)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Ga(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),bz=ot(_v,Ln,gz,Rn,wT);function wz(e){var{value:t}=e;if(nc(t)||t instanceof Date)return t}var jz=e=>{var t=e.flatMap(a=>[a.value,a.errorDomain]).flat(1),r=Pf(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},_z=(e,t,r)=>{var a=e.map(wz).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&zk(a))?mP(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},i_=e=>{var t;if(e==null||!("domain"in e))return ow;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Pf(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:ow},o_=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),l=Math.min(...i),u=Math.max(...i);return[l,u]}},jT=e=>e.referenceElements.dots,fm=(e,t,r)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===r:a.yAxisId===r),Nz=ot([jT,Rn,og],fm),_T=e=>e.referenceElements.areas,Sz=ot([_T,Rn,og],fm),NT=e=>e.referenceElements.lines,Az=ot([NT,Rn,og],fm),ST=(e,t)=>{var r=Pf(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Cz=ot(Nz,Rn,ST),AT=(e,t)=>{var r=Pf(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},kz=ot([Sz,Rn],AT),CT=(e,t)=>{var r=Pf(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Ez=ot(Az,Rn,CT),Pz=ot(Cz,Ez,kz,(e,t,r)=>o_(e,r,t)),kT=ot([Ln],i_),l_=(e,t,r,a,s)=>{var i=z$(t,e.allowDataOverflow);return i??V$(t,o_(r,s,jz(a)),e.allowDataOverflow)},Tz=ot([Ln,kT,yz,bz,Pz],l_),Oz=[0,1],c_=(e,t,r,a,s,i,l)=>{if(!(e==null||r==null||r.length===0)){var{dataKey:u,type:d}=e,f=bd(t,i);return f&&u==null?mP(0,r.length):d==="category"?_z(a,e,f):s==="expand"?Oz:l}},u_=ot([Ln,fa,_v,Nv,ig,Rn,Tz],c_),ET=(e,t,r,a,s)=>{if(e!=null){var{scale:i,type:l}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":l==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof i=="string"){var u="scale".concat(Jp(i));return u in bp?u:"point"}}},hm=ot([Ln,fa,gT,Wj,Rn],ET);function Dz(e){if(e!=null){if(e in bp)return bp[e]();var t="scale".concat(Jp(e));if(t in bp)return bp[t]()}}function d_(e,t,r,a){if(!(r==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(a);var s=Dz(t);if(s!=null){var i=s.domain(r).range(a);return hF(i),i}}}var f_=(e,t,r)=>{var a=i_(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&em(e))return ez(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&em(e))return tz(e,t.tickCount,t.allowDecimals)}},h_=ot([u_,lg,hm],f_),m_=(e,t,r,a)=>{if(a!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&em(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],l=t[1],u=r[r.length-1];return[Math.min(s,i),Math.max(l,u)]}return t},Rz=ot([Ln,u_,h_,Rn],m_),Lz=ot(Nv,Ln,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,a=Array.from(Pf(e.map(u=>u.value))).sort((u,d)=>u-d);if(a.length<2)return 1/0;var s=a[a.length-1]-a[0];if(s===0)return 1/0;for(var i=0;i<a.length-1;i++){var l=a[i+1]-a[i];r=Math.min(r,l)}return r/s}}),PT=ot(Lz,fa,uT,Jn,(e,t,r,a)=>a,(e,t,r,a,s)=>{if(!eo(e))return 0;var i=t==="vertical"?a.height:a.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var l=oi(r,e*i),u=e*i/2;return u-l-(u-l)/i*l}return 0}),Mz=(e,t)=>{var r=du(e,t);return r==null||typeof r.padding!="string"?0:PT(e,"xAxis",t,r.padding)},Iz=(e,t)=>{var r=_d(e,t);return r==null||typeof r.padding!="string"?0:PT(e,"yAxis",t,r.padding)},qz=ot(du,Mz,(e,t)=>{var r,a;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((a=s.right)!==null&&a!==void 0?a:0)+t}}),Fz=ot(_d,Iz,(e,t)=>{var r,a;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((a=s.bottom)!==null&&a!==void 0?a:0)+t}}),Bz=ot([Jn,qz,dv,uv,(e,t,r)=>r],(e,t,r,a,s)=>{var{padding:i}=a;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),Uz=ot([Jn,fa,Fz,dv,uv,(e,t,r)=>r],(e,t,r,a,s,i)=>{var{padding:l}=s;return i?[a.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),ug=(e,t,r,a)=>{var s;switch(t){case"xAxis":return Bz(e,r,a);case"yAxis":return Uz(e,r,a);case"zAxis":return(s=e_(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return mT(e);case"radiusAxis":return pT(e,r);default:return}},TT=ot([Ln,ug],bv),mm=ot([Ln,hm,Rz,TT],d_);ot(cg,Rn,(e,t)=>e.flatMap(r=>{var a;return(a=r.errorBars)!==null&&a!==void 0?a:[]}).filter(r=>vT(t,r)));function OT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Sv=(e,t)=>t,Av=(e,t,r)=>r,$z=ot(hj,Sv,Av,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(OT)),zz=ot(mj,Sv,Av,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(OT)),DT=(e,t)=>({width:e.width,height:t.height}),Vz=(e,t)=>{var r=typeof t.width=="number"?t.width:cv;return{width:r,height:e.height}},RT=ot(Jn,du,DT),Hz=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},Gz=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Kz=ot(cu,Jn,$z,Sv,Av,(e,t,r,a,s)=>{var i={},l;return r.forEach(u=>{var d=DT(t,u);l==null&&(l=Hz(t,a,e));var f=a==="top"&&!s||a==="bottom"&&s;i[u.id]=l-Number(f)*d.height,l+=(f?-1:1)*d.height}),i}),Wz=ot(lu,Jn,zz,Sv,Av,(e,t,r,a,s)=>{var i={},l;return r.forEach(u=>{var d=Vz(t,u);l==null&&(l=Gz(t,a,e));var f=a==="left"&&!s||a==="right"&&s;i[u.id]=l-Number(f)*d.width,l+=(f?-1:1)*d.width}),i}),Yz=(e,t)=>{var r=Jn(e),a=du(e,t);if(a!=null){var s=Kz(e,a.orientation,a.mirror),i=s[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},Xz=(e,t)=>{var r=Jn(e),a=_d(e,t);if(a!=null){var s=Wz(e,a.orientation,a.mirror),i=s[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},LT=ot(Jn,_d,(e,t)=>{var r=typeof t.width=="number"?t.width:cv;return{width:r,height:e.height}}),NA=(e,t,r)=>{switch(t){case"xAxis":return RT(e,r).width;case"yAxis":return LT(e,r).height;default:return}},MT=(e,t,r,a)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:l}=r,u=bd(e,a),d=t.map(f=>f.value);if(l&&u&&i==="category"&&s&&zk(d))return d}},p_=ot([fa,Nv,Ln,Rn],MT),IT=(e,t,r,a)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,l=bd(e,a);if(l&&(s==="number"||i!=="auto"))return t.map(u=>u.value)}},g_=ot([fa,Nv,lg,Rn],IT),SA=ot([fa,mz,hm,mm,p_,g_,ug,h_,Rn],(e,t,r,a,s,i,l,u,d)=>{if(t==null)return null;var f=bd(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:i,duplicateDomain:s,isCategorical:f,niceTicks:u,range:l,realScaleType:r,scale:a}}),Zz=(e,t,r,a,s,i,l,u,d)=>{if(!(t==null||a==null)){var f=bd(e,d),{type:m,ticks:g,tickCount:v}=t,x=r==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,j=m==="category"&&a.bandwidth?a.bandwidth()/x:0;j=d==="angleAxis"&&i!=null&&i.length>=2?ms(i[0]-i[1])*2*j:j;var b=g||s;if(b){var A=b.map((S,T)=>{var E=l?l.indexOf(S):S;return{index:T,coordinate:a(E)+j,value:S,offset:j}});return A.filter(S=>!Zi(S.coordinate))}return f&&u?u.map((S,T)=>({coordinate:a(S)+j,value:S,index:T,offset:j})):a.ticks?a.ticks(v).map(S=>({coordinate:a(S)+j,value:S,offset:j})):a.domain().map((S,T)=>({coordinate:a(S)+j,value:l?l[S]:S,index:T,offset:j}))}},qT=ot([fa,lg,hm,mm,h_,ug,p_,g_,Rn],Zz),Jz=(e,t,r,a,s,i,l)=>{if(!(t==null||r==null||a==null||a[0]===a[1])){var u=bd(e,l),{tickCount:d}=t,f=0;return f=l==="angleAxis"&&(a==null?void 0:a.length)>=2?ms(a[0]-a[1])*2*f:f,u&&i?i.map((m,g)=>({coordinate:r(m)+f,value:m,index:g,offset:f})):r.ticks?r.ticks(d).map(m=>({coordinate:r(m)+f,value:m,offset:f})):r.domain().map((m,g)=>({coordinate:r(m)+f,value:s?s[m]:m,index:g,offset:f}))}},hd=ot([fa,lg,mm,ug,p_,g_,Rn],Jz),ic=ot(Ln,mm,(e,t)=>{if(!(e==null||t==null))return Lx(Lx({},e),{},{scale:t})}),Qz=ot([Ln,hm,u_,TT],d_);ot((e,t,r)=>e_(e,r),Qz,(e,t)=>{if(!(e==null||t==null))return Lx(Lx({},e),{},{scale:t})});var eV=ot([fa,hj,mj],(e,t,r)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),FT=e=>e.options.defaultTooltipEventType,BT=e=>e.options.validateTooltipEventTypes;function UT(e,t,r){if(e==null)return t;var a=e?"axis":"item";return r==null?t:r.includes(a)?a:t}function x_(e,t){var r=FT(e),a=BT(e);return UT(t,r,a)}function tV(e){return nr(t=>x_(t,e))}var $T=(e,t)=>{var r,a=Number(t);if(!(Zi(a)||t==null))return a>=0?e==null||(r=e[a])===null||r===void 0?void 0:r.value:void 0},rV=e=>e.tooltip.settings,sd={active:!1,index:null,dataKey:void 0,coordinate:void 0},aV={itemInteraction:{click:sd,hover:sd},axisInteraction:{click:sd,hover:sd},keyboardInteraction:sd,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},zT=Lo({name:"tooltip",initialState:aV,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=Jc(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:nV,removeTooltipEntrySettings:sV,setTooltipSettingsState:iV,setActiveMouseOverItemIndex:VT,mouseLeaveItem:oV,mouseLeaveChart:HT,setActiveClickItemIndex:lV,setMouseOverAxisIndex:GT,setMouseClickAxisIndex:cV,setSyncInteraction:cw,setKeyboardInteraction:uw}=zT.actions,uV=zT.reducer;function AA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function P0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AA(Object(r),!0).forEach(function(a){dV(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function dV(e,t,r){return(t=fV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fV(e){var t=hV(e,"string");return typeof t=="symbol"?t:t+""}function hV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mV(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function pV(e){return e.index!=null}var KT=(e,t,r,a)=>{if(t==null)return sd;var s=mV(e,t,r);if(s==null)return sd;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(pV(s)){if(i)return P0(P0({},s),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a};return P0(P0({},sd),{},{coordinate:s.coordinate})},v_=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var a=Number(r);if(!eo(a))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(a,i)))},WT=(e,t,r,a,s,i,l,u)=>{if(!(i==null||u==null)){var d=l[0],f=d==null?void 0:u(d.positions,i);if(f!=null)return f;var m=s==null?void 0:s[Number(i)];if(m)switch(r){case"horizontal":return{x:m.coordinate,y:(a.top+t)/2};default:return{x:(a.left+e)/2,y:m.coordinate}}}},YT=(e,t,r,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&a!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.dataKey)===s})},dg=e=>e.options.tooltipPayloadSearcher,pm=e=>e.tooltip;function CA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function kA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CA(Object(r),!0).forEach(function(a){gV(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function gV(e,t,r){return(t=xV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xV(e){var t=vV(e,"string");return typeof t=="symbol"?t:t+""}function vV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yV(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function bV(e,t){return e??t}var XT=(e,t,r,a,s,i,l)=>{if(!(t==null||i==null)){var{chartData:u,computedData:d,dataStartIndex:f,dataEndIndex:m}=r,g=[];return e.reduce((v,x)=>{var j,{dataDefinedOnItem:b,settings:A}=x,S=bV(b,u),T=yV(S,f,m),E=(j=A==null?void 0:A.dataKey)!==null&&j!==void 0?j:a==null?void 0:a.dataKey,D=A==null?void 0:A.nameKey,L;if(a!=null&&a.dataKey&&Array.isArray(T)&&!Array.isArray(T[0])&&l==="axis"?L=Vk(T,a.dataKey,s):L=i(T,t,d,D),Array.isArray(L))L.forEach(z=>{var M=kA(kA({},A),{},{name:z.name,unit:z.unit,color:void 0,fill:void 0});v.push(l3({tooltipEntrySettings:M,dataKey:z.dataKey,payload:z.payload,value:Ga(z.payload,z.dataKey),name:z.name}))});else{var F;v.push(l3({tooltipEntrySettings:A,dataKey:E,payload:L,value:Ga(L,E),name:(F=Ga(L,D))!==null&&F!==void 0?F:A==null?void 0:A.name}))}return v},g)}},xs=e=>{var t=fa(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},gm=e=>e.tooltip.settings.axisId,Ps=e=>{var t=xs(e),r=gm(e);return lg(e,t,r)},y_=ot([Ps,fa,gT,Wj,xs],ET),wV=ot([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),jV=ot([xs,gm],t_),Cv=ot([wV,Ps,jV],r_),_V=ot([Cv],a_),Tf=ot([_V,Ef],n_),b_=ot([Tf,Ps,Cv],s_),NV=ot([Ps],i_),SV=ot([Tf,Cv,ig],yT),AV=ot([SV,Ef,xs],bT),CV=ot([Cv],xT),kV=ot([Tf,Ps,CV,xs],wT),EV=ot([jT,xs,gm],fm),PV=ot([EV,xs],ST),TV=ot([_T,xs,gm],fm),OV=ot([TV,xs],AT),DV=ot([NT,xs,gm],fm),RV=ot([DV,xs],CT),LV=ot([PV,RV,OV],o_),MV=ot([Ps,NV,AV,kV,LV],l_),ZT=ot([Ps,fa,Tf,b_,ig,xs,MV],c_),IV=ot([ZT,Ps,y_],f_),qV=ot([Ps,ZT,IV,xs],m_),JT=e=>{var t=xs(e),r=gm(e),a=!1;return ug(e,t,r,a)},QT=ot([Ps,JT],bv),eO=ot([Ps,y_,qV,QT],d_),FV=ot([fa,b_,Ps,xs],MT),BV=ot([fa,b_,Ps,xs],IT),UV=(e,t,r,a,s,i,l,u)=>{if(t){var{type:d}=t,f=bd(e,u);if(a){var m=r==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,g=d==="category"&&a.bandwidth?a.bandwidth()/m:0;return g=u==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?ms(s[0]-s[1])*2*g:g,f&&l?l.map((v,x)=>({coordinate:a(v)+g,value:v,index:x,offset:g})):a.domain().map((v,x)=>({coordinate:a(v)+g,value:i?i[v]:v,index:x,offset:g}))}}},fu=ot([fa,Ps,y_,eO,JT,FV,BV,xs],UV),w_=ot([FT,BT,rV],(e,t,r)=>UT(r.shared,e,t)),tO=e=>e.tooltip.settings.trigger,j_=e=>e.tooltip.settings.defaultIndex,kv=ot([pm,w_,tO,j_],KT),md=ot([kv,Tf],v_),rO=ot([fu,md],$T),aO=ot([kv],e=>{if(e)return e.dataKey}),nO=ot([pm,w_,tO,j_],YT),$V=ot([lu,cu,fa,Jn,fu,j_,nO,dg],WT),zV=ot([kv,$V],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),VV=ot([kv],e=>e.active),HV=ot([nO,md,Ef,Ps,rO,dg,w_],XT),GV=ot([HV],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function EA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function PA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EA(Object(r),!0).forEach(function(a){KV(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function KV(e,t,r){return(t=WV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WV(e){var t=YV(e,"string");return typeof t=="symbol"?t:t+""}function YV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XV=()=>nr(Ps),ZV=()=>{var e=XV(),t=nr(fu),r=nr(eO);return Op(PA(PA({},e),{},{scale:r}),t)},JV=()=>nr(Wj),__=(e,t)=>t,sO=(e,t,r)=>r,N_=(e,t,r,a)=>a,QV=ot(fu,e=>rv(e,t=>t.coordinate)),S_=ot([pm,__,sO,N_],KT),iO=ot([S_,Tf],v_),eH=(e,t,r)=>{if(t!=null){var a=pm(e);return t==="axis"?r==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:r==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},oO=ot([pm,__,sO,N_],YT),Mx=ot([lu,cu,fa,Jn,fu,N_,oO,dg],WT),tH=ot([S_,Mx],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),lO=ot(fu,iO,$T),rH=ot([oO,iO,Ef,Ps,lO,dg,__],XT),aH=ot([S_],e=>({isActive:e.active,activeIndex:e.index})),nH=(e,t,r,a,s,i,l,u)=>{if(!(!e||!t||!a||!s||!i)){var d=_F(e.chartX,e.chartY,t,r,u);if(d){var f=SF(d,t),m=dF(f,l,i,a,s),g=NF(t,i,m,d);return{activeIndex:String(m),activeCoordinate:g}}}};function dw(){return dw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},dw.apply(null,arguments)}function TA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function T0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TA(Object(r),!0).forEach(function(a){sH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function sH(e,t,r){return(t=iH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iH(e){var t=oH(e,"string");return typeof t=="symbol"?t:t+""}function oH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lH(e){var{coordinate:t,payload:r,index:a,offset:s,tooltipAxisBandSize:i,layout:l,cursor:u,tooltipEventType:d,chartName:f}=e,m=t,g=r,v=a;if(!u||!m||f!=="ScatterChart"&&d!=="axis")return null;var x,j;if(f==="ScatterChart")x=m,j=j9;else if(f==="BarChart")x=_9(l,m,s,i),j=uP;else if(l==="radial"){var{cx:b,cy:A,radius:S,startAngle:T,endAngle:E}=dP(m);x={cx:b,cy:A,startAngle:T,endAngle:E,innerRadius:S,outerRadius:S},j=hP}else x={points:cB(l,m,s)},j=yj;var D=typeof u=="object"&&"className"in u?u.className:void 0,L=T0(T0(T0(T0({stroke:"#ccc",pointerEvents:"none"},s),x),Yr(u,!1)),{},{payload:g,payloadIndex:v,className:oa("recharts-tooltip-cursor",D)});return _.isValidElement(u)?_.cloneElement(u,L):_.createElement(j,L)}function cH(e){var t=ZV(),r=rP(),a=fv(),s=JV();return _.createElement(lH,dw({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:a,tooltipAxisBandSize:t,chartName:s}))}var cO=_.createContext(null),uH=()=>_.useContext(cO),_1={exports:{}},OA;function dH(){return OA||(OA=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function s(d,f,m){this.fn=d,this.context=f,this.once=m||!1}function i(d,f,m,g,v){if(typeof m!="function")throw new TypeError("The listener must be a function");var x=new s(m,g||d,v),j=r?r+f:f;return d._events[j]?d._events[j].fn?d._events[j]=[d._events[j],x]:d._events[j].push(x):(d._events[j]=x,d._eventsCount++),d}function l(d,f){--d._eventsCount===0?d._events=new a:delete d._events[f]}function u(){this._events=new a,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],m,g;if(this._eventsCount===0)return f;for(g in m=this._events)t.call(m,g)&&f.push(r?g.slice(1):g);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(m)):f},u.prototype.listeners=function(f){var m=r?r+f:f,g=this._events[m];if(!g)return[];if(g.fn)return[g.fn];for(var v=0,x=g.length,j=new Array(x);v<x;v++)j[v]=g[v].fn;return j},u.prototype.listenerCount=function(f){var m=r?r+f:f,g=this._events[m];return g?g.fn?1:g.length:0},u.prototype.emit=function(f,m,g,v,x,j){var b=r?r+f:f;if(!this._events[b])return!1;var A=this._events[b],S=arguments.length,T,E;if(A.fn){switch(A.once&&this.removeListener(f,A.fn,void 0,!0),S){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,m),!0;case 3:return A.fn.call(A.context,m,g),!0;case 4:return A.fn.call(A.context,m,g,v),!0;case 5:return A.fn.call(A.context,m,g,v,x),!0;case 6:return A.fn.call(A.context,m,g,v,x,j),!0}for(E=1,T=new Array(S-1);E<S;E++)T[E-1]=arguments[E];A.fn.apply(A.context,T)}else{var D=A.length,L;for(E=0;E<D;E++)switch(A[E].once&&this.removeListener(f,A[E].fn,void 0,!0),S){case 1:A[E].fn.call(A[E].context);break;case 2:A[E].fn.call(A[E].context,m);break;case 3:A[E].fn.call(A[E].context,m,g);break;case 4:A[E].fn.call(A[E].context,m,g,v);break;default:if(!T)for(L=1,T=new Array(S-1);L<S;L++)T[L-1]=arguments[L];A[E].fn.apply(A[E].context,T)}}return!0},u.prototype.on=function(f,m,g){return i(this,f,m,g,!1)},u.prototype.once=function(f,m,g){return i(this,f,m,g,!0)},u.prototype.removeListener=function(f,m,g,v){var x=r?r+f:f;if(!this._events[x])return this;if(!m)return l(this,x),this;var j=this._events[x];if(j.fn)j.fn===m&&(!v||j.once)&&(!g||j.context===g)&&l(this,x);else{for(var b=0,A=[],S=j.length;b<S;b++)(j[b].fn!==m||v&&!j[b].once||g&&j[b].context!==g)&&A.push(j[b]);A.length?this._events[x]=A.length===1?A[0]:A:l(this,x)}return this},u.prototype.removeAllListeners=function(f){var m;return f?(m=r?r+f:f,this._events[m]&&l(this,m)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u}(_1)),_1.exports}var fH=dH();const hH=Ro(fH);var Fp=new hH,fw="recharts.syncEvent.tooltip",DA="recharts.syncEvent.brush";function A_(e,t){if(t){var r=Number.parseInt(t,10);if(!Zi(r))return e==null?void 0:e[r]}}var mH={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},uO=Lo({name:"options",initialState:mH,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),pH=uO.reducer,{createEventEmitter:gH}=uO.actions;function xH(e){return e.tooltip.syncInteraction}var vH={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},dO=Lo({name:"chartData",initialState:vH,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:a}=t.payload;r!=null&&(e.dataStartIndex=r),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:RA,setDataStartEndIndexes:yH,setComputedData:_ne}=dO.actions,bH=dO.reducer,fO=()=>{};function wH(){var e=nr(Yj),t=nr(Xj),r=sn(),a=nr(dT),s=nr(fu),i=fv(),l=pj(),u=nr(d=>d.rootProps.className);_.useEffect(()=>{if(e==null)return fO;var d=(f,m,g)=>{if(t!==g&&e===f){if(a==="index"){r(m);return}if(s!=null){var v;if(typeof a=="function"){var x={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},j=a(s,x);v=s[j]}else a==="value"&&(v=s.find(F=>String(F.value)===m.payload.label));var{coordinate:b}=m.payload;if(v==null||m.payload.active===!1||b==null||l==null){r(cw({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:A,y:S}=b,T=Math.min(A,l.x+l.width),E=Math.min(S,l.y+l.height),D={x:i==="horizontal"?v.coordinate:T,y:i==="horizontal"?E:v.coordinate},L=cw({active:m.payload.active,coordinate:D,dataKey:m.payload.dataKey,index:String(v.index),label:m.payload.label});r(L)}}};return Fp.on(fw,d),()=>{Fp.off(fw,d)}},[u,r,t,e,a,s,i,l])}function jH(){var e=nr(Yj),t=nr(Xj),r=sn();_.useEffect(()=>{if(e==null)return fO;var a=(s,i,l)=>{t!==l&&e===s&&r(yH(i))};return Fp.on(DA,a),()=>{Fp.off(DA,a)}},[r,t,e])}function _H(){var e=sn();_.useEffect(()=>{e(gH())},[e]),wH(),jH()}function NH(e,t,r,a,s,i){var l=nr(v=>eH(v,e,t)),u=nr(Xj),d=nr(Yj),f=nr(dT),m=nr(xH),g=m==null?void 0:m.active;_.useEffect(()=>{if(!g&&d!=null&&u!=null){var v=cw({active:i,coordinate:r,dataKey:l,index:s,label:typeof a=="number"?String(a):a});Fp.emit(fw,d,v,u)}},[g,r,l,s,a,u,d,f,i])}function LA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function MA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LA(Object(r),!0).forEach(function(a){SH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function SH(e,t,r){return(t=AH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AH(e){var t=CH(e,"string");return typeof t=="symbol"?t:t+""}function CH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kH(e){return e.dataKey}function EH(e,t){return _.isValidElement(e)?_.cloneElement(e,t):typeof e=="function"?_.createElement(e,t):_.createElement(e9,t)}var IA=[],PH={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Af.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function si(e){var t=Mo(e,PH),{active:r,allowEscapeViewBox:a,animationDuration:s,animationEasing:i,content:l,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:m,position:g,reverseDirection:v,useTranslate3d:x,wrapperStyle:j,cursor:b,shared:A,trigger:S,defaultIndex:T,portal:E,axisId:D}=t,L=sn(),F=typeof T=="number"?String(T):T;_.useEffect(()=>{L(iV({shared:A,trigger:S,axisId:D,active:r,defaultIndex:F}))},[L,A,S,D,r,F]);var z=pj(),M=iP(),U=tV(A),{activeIndex:oe,isActive:R}=nr(je=>aH(je,U,S,F)),q=nr(je=>rH(je,U,S,F)),se=nr(je=>lO(je,U,S,F)),J=nr(je=>tH(je,U,S,F)),Q=q,ae=uH(),he=r??R,[de,_e]=_E([Q,he]),Y=U==="axis"?se:void 0;NH(U,S,J,Y,oe,he);var ye=E??ae;if(ye==null)return null;var P=Q??IA;he||(P=IA),u&&P.length&&(P=vE(Q.filter(je=>je.value!=null&&(je.hide!==!0||t.includeHidden)),m,kH));var Z=P.length>0,ce=_.createElement(o9,{allowEscapeViewBox:a,animationDuration:s,animationEasing:i,isAnimationActive:d,active:he,coordinate:J,hasPayload:Z,offset:f,position:g,reverseDirection:v,useTranslate3d:x,viewBox:z,wrapperStyle:j,lastBoundingBox:de,innerRef:_e,hasPortalFromProps:!!E},EH(l,MA(MA({},t),{},{payload:P,label:Y,active:he,coordinate:J,accessibilityLayer:M})));return _.createElement(_.Fragment,null,Kk.createPortal(ce,ye),he&&_.createElement(cH,{cursor:b,tooltipEventType:U,coordinate:J,payload:Q,index:oe}))}var N1={},S1={},A1={},qA;function TH(){return qA||(qA=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a,{signal:s,edges:i}={}){let l,u=null;const d=i!=null&&i.includes("leading"),f=i==null||i.includes("trailing"),m=()=>{u!==null&&(r.apply(l,u),l=void 0,u=null)},g=()=>{f&&m(),b()};let v=null;const x=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,g()},a)},j=()=>{v!==null&&(clearTimeout(v),v=null)},b=()=>{j(),l=void 0,u=null},A=()=>{m()},S=function(...T){if(s!=null&&s.aborted)return;l=this,u=T;const E=v==null;x(),d&&E&&m()};return S.schedule=x,S.cancel=b,S.flush=A,s==null||s.addEventListener("abort",b,{once:!0}),S}e.debounce=t}(A1)),A1}var FA;function OH(){return FA||(FA=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TH();function r(a,s=0,i={}){typeof i!="object"&&(i={});const{leading:l=!1,trailing:u=!0,maxWait:d}=i,f=Array(2);l&&(f[0]="leading"),u&&(f[1]="trailing");let m,g=null;const v=t.debounce(function(...b){m=a.apply(this,b),g=null},s,{edges:f}),x=function(...b){return d!=null&&(g===null&&(g=Date.now()),Date.now()-g>=d)?(m=a.apply(this,b),g=Date.now(),v.cancel(),v.schedule(),m):(v.apply(this,b),m)},j=()=>(v.flush(),m);return x.cancel=v.cancel,x.flush=j,x}e.debounce=r}(S1)),S1}var BA;function DH(){return BA||(BA=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OH();function r(a,s=0,i={}){const{leading:l=!0,trailing:u=!0}=i;return t.debounce(a,s,{leading:l,maxWait:s,trailing:u})}e.throttle=r}(N1)),N1}var C1,UA;function RH(){return UA||(UA=1,C1=DH().throttle),C1}var LH=RH();const MH=Ro(LH);var Np=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]};function $A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function k1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$A(Object(r),!0).forEach(function(a){IH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$A(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function IH(e,t,r){return(t=qH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qH(e){var t=FH(e,"string");return typeof t=="symbol"?t:t+""}function FH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ii=_.forwardRef((e,t)=>{var{aspect:r,initialDimension:a={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:l=0,minHeight:u,maxHeight:d,children:f,debounce:m=0,id:g,className:v,onResize:x,style:j={}}=e,b=_.useRef(null),A=_.useRef();A.current=x,_.useImperativeHandle(t,()=>b.current);var[S,T]=_.useState({containerWidth:a.width,containerHeight:a.height}),E=_.useCallback((L,F)=>{T(z=>{var M=Math.round(L),U=Math.round(F);return z.containerWidth===M&&z.containerHeight===U?z:{containerWidth:M,containerHeight:U}})},[]);_.useEffect(()=>{var L=U=>{var oe,{width:R,height:q}=U[0].contentRect;E(R,q),(oe=A.current)===null||oe===void 0||oe.call(A,R,q)};m>0&&(L=MH(L,m,{trailing:!0,leading:!1}));var F=new ResizeObserver(L),{width:z,height:M}=b.current.getBoundingClientRect();return E(z,M),F.observe(b.current),()=>{F.disconnect()}},[E,m]);var D=_.useMemo(()=>{var{containerWidth:L,containerHeight:F}=S;if(L<0||F<0)return null;Np(sf(s)||sf(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),Np(!r||r>0,"The aspect(%s) must be greater than zero.",r);var z=sf(s)?L:s,M=sf(i)?F:i;return r&&r>0&&(z?M=z/r:M&&(z=M*r),d&&M>d&&(M=d)),Np(z>0||M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,M,s,i,l,u,r),_.Children.map(f,U=>_.cloneElement(U,{width:z,height:M,style:k1({width:z,height:M},U.props.style)}))},[r,f,i,d,u,l,S,s]);return _.createElement("div",{id:g?"".concat(g):void 0,className:oa("recharts-responsive-container",v),style:k1(k1({},j),{},{width:s,height:i,minWidth:l,minHeight:u,maxHeight:d}),ref:b},_.createElement("div",{style:{width:0,height:0,overflow:"visible"}},D))}),xl=e=>null;xl.displayName="Cell";function zA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function hw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zA(Object(r),!0).forEach(function(a){BH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function BH(e,t,r){return(t=UH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UH(e){var t=$H(e,"string");return typeof t=="symbol"?t:t+""}function $H(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ah={widthCache:{},cacheCount:0},zH=2e3,VH={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},VA="recharts_measurement_span";function HH(e){var t=hw({},e);return Object.keys(t).forEach(r=>{t[r]||delete t[r]}),t}var Sp=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Af.isSsr)return{width:0,height:0};var a=HH(r),s=JSON.stringify({text:t,copyStyle:a});if(Ah.widthCache[s])return Ah.widthCache[s];try{var i=document.getElementById(VA);i||(i=document.createElement("span"),i.setAttribute("id",VA),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var l=hw(hw({},VH),a);Object.assign(i.style,l),i.textContent="".concat(t);var u=i.getBoundingClientRect(),d={width:u.width,height:u.height};return Ah.widthCache[s]=d,++Ah.cacheCount>zH&&(Ah.cacheCount=0,Ah.widthCache={}),d}catch{return{width:0,height:0}}},HA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,GA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,GH=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,KH=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,hO={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},WH=Object.keys(hO),Mh="NaN";function YH(e,t){return e*hO[t]}class wi{static parse(t){var r,[,a,s]=(r=KH.exec(t))!==null&&r!==void 0?r:[];return new wi(parseFloat(a),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Zi(t)&&(this.unit=""),r!==""&&!GH.test(r)&&(this.num=NaN,this.unit=""),WH.includes(r)&&(this.num=YH(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new wi(NaN,""):new wi(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new wi(NaN,""):new wi(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new wi(NaN,""):new wi(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new wi(NaN,""):new wi(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Zi(this.num)}}function mO(e){if(e.includes(Mh))return Mh;for(var t=e;t.includes("*")||t.includes("/");){var r,[,a,s,i]=(r=HA.exec(t))!==null&&r!==void 0?r:[],l=wi.parse(a??""),u=wi.parse(i??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Mh;t=t.replace(HA,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,[,m,g,v]=(f=GA.exec(t))!==null&&f!==void 0?f:[],x=wi.parse(m??""),j=wi.parse(v??""),b=g==="+"?x.add(j):x.subtract(j);if(b.isNaN())return Mh;t=t.replace(GA,b.toString())}return t}var KA=/\(([^()]*)\)/;function XH(e){for(var t=e,r;(r=KA.exec(t))!=null;){var[,a]=r;t=t.replace(KA,mO(a))}return t}function ZH(e){var t=e.replace(/\s+/g,"");return t=XH(t),t=mO(t),t}function JH(e){try{return ZH(e)}catch{return Mh}}function E1(e){var t=JH(e.slice(5,-1));return t===Mh?"":t}var QH=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],eG=["dx","dy","angle","className","breakAll"];function mw(){return mw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},mw.apply(null,arguments)}function WA(e,t){if(e==null)return{};var r,a,s=tG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function tG(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var pO=/[ \f\n\r\t\v\u2028\u2029]+/,gO=e=>{var{children:t,breakAll:r,style:a}=e;try{var s=[];qa(t)||(r?s=t.toString().split(""):s=t.toString().split(pO));var i=s.map(u=>({word:u,width:Sp(u,a).width})),l=r?0:Sp("",a).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}},rG=(e,t,r,a,s)=>{var{maxLines:i,children:l,style:u,breakAll:d}=e,f=Xt(i),m=l,g=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return R.reduce((q,se)=>{var{word:J,width:Q}=se,ae=q[q.length-1];if(ae&&(a==null||s||ae.width+Q+r<Number(a)))ae.words.push(J),ae.width+=Q+r;else{var he={words:[J],width:Q};q.push(he)}return q},[])},v=g(t),x=oe=>oe.reduce((R,q)=>R.width>q.width?R:q);if(!f||s)return v;var j=v.length>i||x(v).width>Number(a);if(!j)return v;for(var b="",A=oe=>{var R=m.slice(0,oe),q=gO({breakAll:d,style:u,children:R+b}).wordsWithComputedWidth,se=g(q),J=se.length>i||x(se).width>Number(a);return[J,se]},S=0,T=m.length-1,E=0,D;S<=T&&E<=m.length-1;){var L=Math.floor((S+T)/2),F=L-1,[z,M]=A(F),[U]=A(L);if(!z&&!U&&(S=L+1),z&&U&&(T=L-1),!z&&U){D=M;break}E++}return D||v},YA=e=>{var t=qa(e)?[]:e.toString().split(pO);return[{words:t}]},aG=e=>{var{width:t,scaleToFit:r,children:a,style:s,breakAll:i,maxLines:l}=e;if((t||r)&&!Af.isSsr){var u,d,f=gO({breakAll:i,children:a,style:s});if(f){var{wordsWithComputedWidth:m,spaceWidth:g}=f;u=m,d=g}else return YA(a);return rG({breakAll:i,children:a,maxLines:l,style:s},u,d,t,r)}return YA(a)},XA="#808080",Ev=_.forwardRef((e,t)=>{var{x:r=0,y:a=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:l=!1,textAnchor:u="start",verticalAnchor:d="end",fill:f=XA}=e,m=WA(e,QH),g=_.useMemo(()=>aG({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:l,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,l,m.style,m.width]),{dx:v,dy:x,angle:j,className:b,breakAll:A}=m,S=WA(m,eG);if(!nc(r)||!nc(a))return null;var T=r+(Xt(v)?v:0),E=a+(Xt(x)?x:0),D;switch(d){case"start":D=E1("calc(".concat(i,")"));break;case"middle":D=E1("calc(".concat((g.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:D=E1("calc(".concat(g.length-1," * -").concat(s,")"));break}var L=[];if(l){var F=g[0].width,{width:z}=m;L.push("scale(".concat(Xt(z)?z/F:1,")"))}return j&&L.push("rotate(".concat(j,", ").concat(T,", ").concat(E,")")),L.length&&(S.transform=L.join(" ")),_.createElement("text",mw({},Yr(S,!0),{ref:t,x:T,y:E,className:oa("recharts-text",b),textAnchor:u,fill:f.includes("url")?XA:f}),g.map((M,U)=>{var oe=M.words.join(A?"":" ");return _.createElement("tspan",{x:T,dy:U===0?D:s,key:"".concat(oe,"-").concat(U)},oe)}))});Ev.displayName="Text";var nG=["offset"],sG=["labelRef"];function ZA(e,t){if(e==null)return{};var r,a,s=iG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function iG(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function JA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Fn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JA(Object(r),!0).forEach(function(a){oG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function oG(e,t,r){return(t=lG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lG(e){var t=cG(e,"string");return typeof t=="symbol"?t:t+""}function cG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gc(){return Gc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Gc.apply(null,arguments)}var uG=e=>{var{value:t,formatter:r}=e,a=qa(e.children)?t:e.children;return typeof r=="function"?r(a):a},C_=e=>e!=null&&typeof e=="function",dG=(e,t)=>{var r=ms(t-e),a=Math.min(Math.abs(t-e),360);return r*a},fG=(e,t,r)=>{var{position:a,viewBox:s,offset:i,className:l}=e,{cx:u,cy:d,innerRadius:f,outerRadius:m,startAngle:g,endAngle:v,clockWise:x}=s,j=(f+m)/2,b=dG(g,v),A=b>=0?1:-1,S,T;a==="insideStart"?(S=g+A*i,T=x):a==="insideEnd"?(S=v-A*i,T=!x):a==="end"&&(S=v+A*i,T=x),T=b<=0?T:!T;var E=Un(u,d,j,S),D=Un(u,d,j,S+(T?1:-1)*359),L="M".concat(E.x,",").concat(E.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(T?0:1,`,
    `).concat(D.x,",").concat(D.y),F=qa(e.id)?xf("recharts-radial-line-"):e.id;return _.createElement("text",Gc({},r,{dominantBaseline:"central",className:oa("recharts-radial-bar-label",l)}),_.createElement("defs",null,_.createElement("path",{id:F,d:L})),_.createElement("textPath",{xlinkHref:"#".concat(F)},t))},hG=e=>{var{viewBox:t,offset:r,position:a}=e,{cx:s,cy:i,innerRadius:l,outerRadius:u,startAngle:d,endAngle:f}=t,m=(d+f)/2;if(a==="outside"){var{x:g,y:v}=Un(s,i,u+r,m);return{x:g,y:v,textAnchor:g>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"end"};var x=(l+u)/2,{x:j,y:b}=Un(s,i,x,m);return{x:j,y:b,textAnchor:"middle",verticalAnchor:"middle"}},mG=(e,t)=>{var{parentViewBox:r,offset:a,position:s}=e,{x:i,y:l,width:u,height:d}=t,f=d>=0?1:-1,m=f*a,g=f>0?"end":"start",v=f>0?"start":"end",x=u>=0?1:-1,j=x*a,b=x>0?"end":"start",A=x>0?"start":"end";if(s==="top"){var S={x:i+u/2,y:l-f*a,textAnchor:"middle",verticalAnchor:g};return Fn(Fn({},S),r?{height:Math.max(l-r.y,0),width:u}:{})}if(s==="bottom"){var T={x:i+u/2,y:l+d+m,textAnchor:"middle",verticalAnchor:v};return Fn(Fn({},T),r?{height:Math.max(r.y+r.height-(l+d),0),width:u}:{})}if(s==="left"){var E={x:i-j,y:l+d/2,textAnchor:b,verticalAnchor:"middle"};return Fn(Fn({},E),r?{width:Math.max(E.x-r.x,0),height:d}:{})}if(s==="right"){var D={x:i+u+j,y:l+d/2,textAnchor:A,verticalAnchor:"middle"};return Fn(Fn({},D),r?{width:Math.max(r.x+r.width-D.x,0),height:d}:{})}var L=r?{width:u,height:d}:{};return s==="insideLeft"?Fn({x:i+j,y:l+d/2,textAnchor:A,verticalAnchor:"middle"},L):s==="insideRight"?Fn({x:i+u-j,y:l+d/2,textAnchor:b,verticalAnchor:"middle"},L):s==="insideTop"?Fn({x:i+u/2,y:l+m,textAnchor:"middle",verticalAnchor:v},L):s==="insideBottom"?Fn({x:i+u/2,y:l+d-m,textAnchor:"middle",verticalAnchor:g},L):s==="insideTopLeft"?Fn({x:i+j,y:l+m,textAnchor:A,verticalAnchor:v},L):s==="insideTopRight"?Fn({x:i+u-j,y:l+m,textAnchor:b,verticalAnchor:v},L):s==="insideBottomLeft"?Fn({x:i+j,y:l+d-m,textAnchor:A,verticalAnchor:g},L):s==="insideBottomRight"?Fn({x:i+u-j,y:l+d-m,textAnchor:b,verticalAnchor:g},L):s&&typeof s=="object"&&(Xt(s.x)||sf(s.x))&&(Xt(s.y)||sf(s.y))?Fn({x:i+oi(s.x,u),y:l+oi(s.y,d),textAnchor:"end",verticalAnchor:"end"},L):Fn({x:i+u/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},L)},pG=e=>"cx"in e&&Xt(e.cx);function Hi(e){var{offset:t=5}=e,r=ZA(e,nG),a=Fn({offset:t},r),{viewBox:s,position:i,value:l,children:u,content:d,className:f="",textBreakAll:m,labelRef:g}=a,v=pj(),x=s||v;if(!x||qa(l)&&qa(u)&&!_.isValidElement(d)&&typeof d!="function")return null;if(_.isValidElement(d)){var{labelRef:j}=a,b=ZA(a,sG);return _.cloneElement(d,b)}var A;if(typeof d=="function"){if(A=_.createElement(d,a),_.isValidElement(A))return A}else A=uG(a);var S=pG(x),T=Yr(a,!0);if(S&&(i==="insideStart"||i==="insideEnd"||i==="end"))return fG(a,A,T);var E=S?hG(a):mG(a,x);return _.createElement(Ev,Gc({ref:g,className:oa("recharts-label",f)},T,E,{breakAll:m}),A)}Hi.displayName="Label";var xO=e=>{var{cx:t,cy:r,angle:a,startAngle:s,endAngle:i,r:l,radius:u,innerRadius:d,outerRadius:f,x:m,y:g,top:v,left:x,width:j,height:b,clockWise:A,labelViewBox:S}=e;if(S)return S;if(Xt(j)&&Xt(b)){if(Xt(m)&&Xt(g))return{x:m,y:g,width:j,height:b};if(Xt(v)&&Xt(x))return{x:v,y:x,width:j,height:b}}if(Xt(m)&&Xt(g))return{x:m,y:g,width:0,height:0};if(Xt(t)&&Xt(r))return{cx:t,cy:r,startAngle:s||a||0,endAngle:i||a||0,innerRadius:d||0,outerRadius:f||u||l||0,clockWise:A};if(e.viewBox)return e.viewBox},gG=(e,t,r)=>{if(!e)return null;var a={viewBox:t,labelRef:r};return e===!0?_.createElement(Hi,Gc({key:"label-implicit"},a)):nc(e)?_.createElement(Hi,Gc({key:"label-implicit",value:e},a)):_.isValidElement(e)?e.type===Hi?_.cloneElement(e,Fn({key:"label-implicit"},a)):_.createElement(Hi,Gc({key:"label-implicit",content:e},a)):C_(e)?_.createElement(Hi,Gc({key:"label-implicit",content:e},a)):e&&typeof e=="object"?_.createElement(Hi,Gc({},e,{key:"label-implicit"},a)):null},xG=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var{children:s,labelRef:i}=t,l=xO(t),u=eg(s,Hi).map((f,m)=>_.cloneElement(f,{viewBox:r||l,key:"label-".concat(m)}));if(!a)return u;var d=gG(t.label,r||l,i);return[d,...u]};Hi.parseViewBox=xO;Hi.renderCallByParent=xG;var P1={},T1={},QA;function vG(){return QA||(QA=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(T1)),T1}var O1={},e6;function yG(){return e6||(e6=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(O1)),O1}var t6;function bG(){return t6||(t6=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vG(),r=yG(),a=rj();function s(i){if(a.isArrayLike(i))return t.last(r.toArray(i))}e.last=s}(P1)),P1}var D1,r6;function wG(){return r6||(r6=1,D1=bG().last),D1}var jG=wG();const _G=Ro(jG);var NG=["valueAccessor"],SG=["data","dataKey","clockWise","id","textBreakAll"];function Ix(){return Ix=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ix.apply(null,arguments)}function a6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function n6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a6(Object(r),!0).forEach(function(a){AG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function AG(e,t,r){return(t=CG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CG(e){var t=kG(e,"string");return typeof t=="symbol"?t:t+""}function kG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s6(e,t){if(e==null)return{};var r,a,s=EG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function EG(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var PG=e=>Array.isArray(e.value)?_G(e.value):e.value;function ud(e){var{valueAccessor:t=PG}=e,r=s6(e,NG),{data:a,dataKey:s,clockWise:i,id:l,textBreakAll:u}=r,d=s6(r,SG);return!a||!a.length?null:_.createElement(ps,{className:"recharts-label-list"},a.map((f,m)=>{var g=qa(s)?t(f,m):Ga(f&&f.payload,s),v=qa(l)?{}:{id:"".concat(l,"-").concat(m)};return _.createElement(Hi,Ix({},Yr(f,!0),d,v,{parentViewBox:f.parentViewBox,value:g,textBreakAll:u,viewBox:Hi.parseViewBox(qa(i)?f:n6(n6({},f),{},{clockWise:i})),key:"label-".concat(m),index:m}))}))}ud.displayName="LabelList";function TG(e,t){return e?e===!0?_.createElement(ud,{key:"labelList-implicit",data:t}):_.isValidElement(e)||C_(e)?_.createElement(ud,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?_.createElement(ud,Ix({data:t},e,{key:"labelList-implicit"})):null:null}function OG(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:a}=e,s=eg(a,ud).map((l,u)=>_.cloneElement(l,{data:t,key:"labelList-".concat(u)}));if(!r)return s;var i=TG(e.label,t);return[i,...s]}ud.renderCallByParent=OG;function pw(){return pw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},pw.apply(null,arguments)}var vO=e=>{var{cx:t,cy:r,r:a,className:s}=e,i=oa("recharts-dot",s);return t===+t&&r===+r&&a===+a?_.createElement("circle",pw({},Yr(e,!1),Ww(e),{className:i,cx:t,cy:r,r:a})):null},yO=e=>e.graphicalItems.polarItems,DG=ot([Rn,og],t_),k_=ot([yO,Ln,DG],r_),RG=ot([k_],a_),E_=ot([RG,Vj],n_),LG=ot([E_,Ln,k_],s_),MG=ot([E_,Ln,k_],(e,t,r)=>r.length>0?e.flatMap(a=>r.flatMap(s=>{var i,l=Ga(a,(i=t.dataKey)!==null&&i!==void 0?i:s.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:Ga(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]}))),i6=()=>{},IG=ot([Ln,kT,i6,MG,i6],l_),bO=ot([Ln,fa,E_,LG,ig,Rn,IG],c_),qG=ot([bO,Ln,hm],f_);ot([Ln,bO,qG,Rn],m_);var FG={radiusAxis:{},angleAxis:{}},wO=Lo({name:"polarAxis",initialState:FG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Nne,removeRadiusAxis:Sne,addAngleAxis:Ane,removeAngleAxis:Cne}=wO.actions,BG=wO.reducer;function o6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function l6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o6(Object(r),!0).forEach(function(a){UG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function UG(e,t,r){return(t=$G(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $G(e){var t=zG(e,"string");return typeof t=="symbol"?t:t+""}function zG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var P_=(e,t)=>t,VG=[],T_=(e,t,r)=>(r==null?void 0:r.length)===0?VG:r,jO=ot([Vj,P_,T_],(e,t,r)=>{var{chartData:a}=e,s;if((t==null?void 0:t.data)!=null&&t.data.length>0?s=t.data:s=a,(!s||!s.length)&&r!=null&&(s=r.map(i=>l6(l6({},t.presentationProps),i.props))),s!=null)return s}),HG=ot([jO,P_,T_],(e,t,r)=>{if(e!=null)return e.map((a,s)=>{var i,l=Ga(a,t.nameKey,t.name),u;return r!=null&&(i=r[s])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?u=r[s].props.fill:typeof a=="object"&&a!=null&&"fill"in a?u=a.fill:u=t.fill,{value:lm(l,t.dataKey),color:u,payload:a,type:t.legendType}})}),GG=ot([yO,P_],(e,t)=>{if(e.some(r=>r.type==="pie"&&t.dataKey===r.dataKey&&t.data===r.data))return t}),KG=ot([jO,GG,T_,Jn],(e,t,r,a)=>{if(!(t==null||e==null))return qK({offset:a,pieSettings:t,displayedData:e,cells:r})}),WG={countOfBars:0,cartesianItems:[],polarItems:[]},_O=Lo({name:"graphicalItems",initialState:WG,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:a}=t.payload,s=Jc(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=a)},removeCartesianGraphicalItem(e,t){var r=Jc(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=Jc(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addBar:YG,removeBar:XG,addCartesianGraphicalItem:ZG,replaceCartesianGraphicalItem:JG,removeCartesianGraphicalItem:QG,addPolarGraphicalItem:eK,removePolarGraphicalItem:tK}=_O.actions,rK=_O.reducer;function c6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function u6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c6(Object(r),!0).forEach(function(a){aK(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function aK(e,t,r){return(t=nK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nK(e){var t=sK(e,"string");return typeof t=="symbol"?t:t+""}function sK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iK(e){var t=sn(),r=_.useRef(null);return _.useEffect(()=>{var a=u6(u6({},e),{},{stackId:ZE(e.stackId)});r.current===null?t(ZG(a)):r.current!==a&&t(JG({prev:r.current,next:a})),r.current=a},[t,e]),_.useEffect(()=>()=>{r.current&&(t(QG(r.current)),r.current=null)},[t]),null}function oK(e){var t=sn();return _.useEffect(()=>(t(eK(e)),()=>{t(tK(e))}),[t,e]),null}var R1={},d6;function lK(){return d6||(d6=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let a=r;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(r)===a}e.isPlainObject=t}(R1)),R1}var L1,f6;function cK(){return f6||(f6=1,L1=lK().isPlainObject),L1}var uK=cK();const dK=Ro(uK);function qx(){return qx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},qx.apply(null,arguments)}var h6=(e,t,r,a,s)=>{var i=r-a,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-i/2,",").concat(t+s),l+="L ".concat(e+r-i/2-a,",").concat(t+s),l+="L ".concat(e,",").concat(t," Z"),l},fK={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},hK=e=>{var t=Mo(e,fK),r=_.useRef(),[a,s]=_.useState(-1);_.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&s(A)}catch{}},[]);var{x:i,y:l,upperWidth:u,lowerWidth:d,height:f,className:m}=t,{animationEasing:g,animationDuration:v,animationBegin:x,isUpdateAnimationActive:j}=t;if(i!==+i||l!==+l||u!==+u||d!==+d||f!==+f||u===0&&d===0||f===0)return null;var b=oa("recharts-trapezoid",m);return j?_.createElement(fd,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:f,x:i,y:l},to:{upperWidth:u,lowerWidth:d,height:f,x:i,y:l},duration:v,animationEasing:g,isActive:j},A=>{var{upperWidth:S,lowerWidth:T,height:E,x:D,y:L}=A;return _.createElement(fd,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,easing:g},_.createElement("path",qx({},Yr(t,!0),{className:b,d:h6(D,L,S,T,E),ref:r})))}):_.createElement("g",null,_.createElement("path",qx({},Yr(t,!0),{className:b,d:h6(i,l,u,d,f)})))},mK=["option","shapeType","propTransformer","activeClassName","isActive"];function pK(e,t){if(e==null)return{};var r,a,s=gK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function gK(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function m6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Fx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m6(Object(r),!0).forEach(function(a){xK(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function xK(e,t,r){return(t=vK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vK(e){var t=yK(e,"string");return typeof t=="symbol"?t:t+""}function yK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bK(e,t){return Fx(Fx({},t),e)}function wK(e,t){return e==="symbols"}function p6(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return _.createElement(uP,r);case"trapezoid":return _.createElement(hK,r);case"sector":return _.createElement(hP,r);case"symbols":if(wK(t))return _.createElement(Qw,r);break;default:return null}}function jK(e){return _.isValidElement(e)?e.props:e}function NO(e){var{option:t,shapeType:r,propTransformer:a=bK,activeClassName:s="recharts-active-shape",isActive:i}=e,l=pK(e,mK),u;if(_.isValidElement(t))u=_.cloneElement(t,Fx(Fx({},l),jK(t)));else if(typeof t=="function")u=t(l);else if(dK(t)&&typeof t!="boolean"){var d=a(t,l);u=_.createElement(p6,{shapeType:r,elementProps:d})}else{var f=l;u=_.createElement(p6,{shapeType:r,elementProps:f})}return i?_.createElement(ps,{className:s},u):u}var O_=(e,t)=>{var r=sn();return(a,s)=>i=>{e==null||e(a,s,i),r(VT({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}},D_=e=>{var t=sn();return(r,a)=>s=>{e==null||e(r,a,s),t(oV())}},R_=(e,t)=>{var r=sn();return(a,s)=>i=>{e==null||e(a,s,i),r(lV({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}};function L_(e){var{fn:t,args:r}=e,a=sn(),s=li();return _.useEffect(()=>{if(!s){var i=t(r);return a(nV(i)),()=>{a(sV(i))}}},[t,r,a,s]),null}var SO=()=>{};function AO(e){var{legendPayload:t}=e,r=sn(),a=li();return _.useEffect(()=>a?SO:(r(nP(t)),()=>{r(sP(t))}),[r,a,t]),null}function _K(e){var{legendPayload:t}=e,r=sn(),a=nr(fa);return _.useEffect(()=>a!=="centric"&&a!=="radial"?SO:(r(nP(t)),()=>{r(sP(t))}),[r,a,t]),null}function M_(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=_.useRef(xf(t)),a=_.useRef(e);return a.current!==e&&(r.current=xf(t),a.current=e),r.current}var NK=["onMouseEnter","onClick","onMouseLeave"];function SK(e,t){if(e==null)return{};var r,a,s=AK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function AK(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function g6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function yn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g6(Object(r),!0).forEach(function(a){Pv(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Pv(e,t,r){return(t=CK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CK(e){var t=kK(e,"string");return typeof t=="symbol"?t:t+""}function kK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wf(){return wf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},wf.apply(null,arguments)}function EK(e){var t=_.useMemo(()=>Yr(e,!1),[e]),r=_.useMemo(()=>eg(e.children,xl),[e.children]),a=_.useMemo(()=>({name:e.name,nameKey:e.nameKey,tooltipType:e.tooltipType,data:e.data,dataKey:e.dataKey,cx:e.cx,cy:e.cy,startAngle:e.startAngle,endAngle:e.endAngle,minAngle:e.minAngle,paddingAngle:e.paddingAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,cornerRadius:e.cornerRadius,legendType:e.legendType,fill:e.fill,presentationProps:t}),[e.cornerRadius,e.cx,e.cy,e.data,e.dataKey,e.endAngle,e.innerRadius,e.minAngle,e.name,e.nameKey,e.outerRadius,e.paddingAngle,e.startAngle,e.tooltipType,e.legendType,e.fill,t]),s=nr(i=>HG(i,a,r));return _.createElement(_K,{legendPayload:s})}function PK(e){var{dataKey:t,nameKey:r,sectors:a,stroke:s,strokeWidth:i,fill:l,name:u,hide:d,tooltipType:f}=e;return{dataDefinedOnItem:a==null?void 0:a.map(m=>m.tooltipPayload),positions:a==null?void 0:a.map(m=>m.tooltipPosition),settings:{stroke:s,strokeWidth:i,fill:l,dataKey:t,nameKey:r,name:lm(u,t),hide:d,type:f,color:l,unit:""}}}var TK=(e,t)=>e>t?"start":e<t?"end":"middle",OK=(e,t,r)=>typeof t=="function"?t(e):oi(t,r,r*.8),DK=(e,t,r)=>{var{top:a,left:s,width:i,height:l}=t,u=WE(i,l),d=s+oi(e.cx,i,i/2),f=a+oi(e.cy,l,l/2),m=oi(e.innerRadius,u,0),g=OK(r,e.outerRadius,u),v=e.maxRadius||Math.sqrt(i*i+l*l)/2;return{cx:d,cy:f,innerRadius:m,outerRadius:g,maxRadius:v}},RK=(e,t)=>{var r=ms(t-e),a=Math.min(Math.abs(t-e),360);return r*a},LK=(e,t)=>{if(_.isValidElement(e))return _.cloneElement(e,t);if(typeof e=="function")return e(t);var r=oa("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return _.createElement(yj,wf({},t,{type:"linear",className:r}))},MK=(e,t,r)=>{if(_.isValidElement(e))return _.cloneElement(e,t);var a=r;if(typeof e=="function"&&(a=e(t),_.isValidElement(a)))return a;var s=oa("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return _.createElement(Ev,wf({},t,{alignmentBaseline:"middle",className:s}),a)};function IK(e){var{sectors:t,props:r,showLabels:a}=e,{label:s,labelLine:i,dataKey:l}=r;if(!a||!s||!t)return null;var u=Yr(r,!1),d=Yr(s,!1),f=Yr(i,!1),m=typeof s=="object"&&"offsetRadius"in s&&s.offsetRadius||20,g=t.map((v,x)=>{var j=(v.startAngle+v.endAngle)/2,b=Un(v.cx,v.cy,v.outerRadius+m,j),A=yn(yn(yn(yn({},u),v),{},{stroke:"none"},d),{},{index:x,textAnchor:TK(b.x,v.cx)},b),S=yn(yn(yn(yn({},u),v),{},{fill:"none",stroke:v.fill},f),{},{index:x,points:[Un(v.cx,v.cy,v.outerRadius,j),b],key:"line"});return _.createElement(ps,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(x)},i&&LK(i,S),MK(s,A,Ga(v,l)))});return _.createElement(ps,{className:"recharts-pie-labels"},g)}function CO(e){var{sectors:t,activeShape:r,inactiveShape:a,allOtherPieProps:s,showLabels:i}=e,l=nr(md),{onMouseEnter:u,onClick:d,onMouseLeave:f}=s,m=SK(s,NK),g=O_(u,s.dataKey),v=D_(f),x=R_(d,s.dataKey);return t==null?null:_.createElement(_.Fragment,null,t.map((j,b)=>{if((j==null?void 0:j.startAngle)===0&&(j==null?void 0:j.endAngle)===0&&t.length!==1)return null;var A=r&&String(b)===l,S=l?a:null,T=A?r:S,E=yn(yn({},j),{},{stroke:j.stroke,tabIndex:-1,[QE]:b,[eP]:s.dataKey});return _.createElement(ps,wf({tabIndex:-1,className:"recharts-pie-sector"},Qp(m,j,b),{onMouseEnter:g(j,b),onMouseLeave:v(j,b),onClick:x(j,b),key:"sector-".concat(j==null?void 0:j.startAngle,"-").concat(j==null?void 0:j.endAngle,"-").concat(j.midAngle,"-").concat(b)}),_.createElement(NO,wf({option:T,isActive:A,shapeType:"sector"},E)))}),_.createElement(IK,{sectors:t,props:s,showLabels:i}))}function qK(e){var t,{pieSettings:r,displayedData:a,cells:s,offset:i}=e,{cornerRadius:l,startAngle:u,endAngle:d,dataKey:f,nameKey:m,tooltipType:g}=r,v=Math.abs(r.minAngle),x=RK(u,d),j=Math.abs(x),b=a.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,A=a.filter(F=>Ga(F,f,0)!==0).length,S=(j>=360?A:A-1)*b,T=j-A*v-S,E=a.reduce((F,z)=>{var M=Ga(z,f,0);return F+(Xt(M)?M:0)},0),D;if(E>0){var L;D=a.map((F,z)=>{var M=Ga(F,f,0),U=Ga(F,m,z),oe=DK(r,i,F),R=(Xt(M)?M:0)/E,q,se=yn(yn({},F),s&&s[z]&&s[z].props);z?q=L.endAngle+ms(x)*b*(M!==0?1:0):q=u;var J=q+ms(x)*((M!==0?v:0)+R*T),Q=(q+J)/2,ae=(oe.innerRadius+oe.outerRadius)/2,he=[{name:U,value:M,payload:se,dataKey:f,type:g}],de=Un(oe.cx,oe.cy,ae,Q);return L=yn(yn(yn(yn({},r.presentationProps),{},{percent:R,cornerRadius:l,name:U,tooltipPayload:he,midAngle:Q,middleRadius:ae,tooltipPosition:de},se),oe),{},{value:Ga(F,f),startAngle:q,endAngle:J,payload:se,paddingAngle:ms(x)*b}),L})}return D}function FK(e){var{props:t,previousSectorsRef:r}=e,{sectors:a,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:u,activeShape:d,inactiveShape:f,onAnimationStart:m,onAnimationEnd:g}=t,v=M_(t,"recharts-pie-"),x=r.current,[j,b]=_.useState(!0),A=_.useCallback(()=>{typeof g=="function"&&g(),b(!1)},[g]),S=_.useCallback(()=>{typeof m=="function"&&m(),b(!0)},[m]);return _.createElement(fd,{begin:i,duration:l,isActive:s,easing:u,from:{t:0},to:{t:1},onAnimationStart:S,onAnimationEnd:A,key:v},T=>{var{t:E}=T,D=[],L=a&&a[0],F=L.startAngle;return a.forEach((z,M)=>{var U=x&&x[M],oe=M>0?dd(z,"paddingAngle",0):0;if(U){var R=Vi(U.endAngle-U.startAngle,z.endAngle-z.startAngle),q=yn(yn({},z),{},{startAngle:F+oe,endAngle:F+R(E)+oe});D.push(q),F=q.endAngle}else{var{endAngle:se,startAngle:J}=z,Q=Vi(0,se-J),ae=Q(E),he=yn(yn({},z),{},{startAngle:F+oe,endAngle:F+ae+oe});D.push(he),F=he.endAngle}}),r.current=D,_.createElement(ps,null,_.createElement(CO,{sectors:D,activeShape:d,inactiveShape:f,allOtherPieProps:t,showLabels:!j}))})}function BK(e){var{sectors:t,isAnimationActive:r,activeShape:a,inactiveShape:s}=e,i=_.useRef(null),l=i.current;return r&&t&&t.length&&(!l||l!==t)?_.createElement(FK,{props:e,previousSectorsRef:i}):_.createElement(CO,{sectors:t,activeShape:a,inactiveShape:s,allOtherPieProps:e,showLabels:!0})}function UK(e){var{hide:t,className:r,rootTabIndex:a}=e,s=oa("recharts-pie",r);return t?null:_.createElement(ps,{tabIndex:a,className:s},_.createElement(BK,e))}var kO={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Af.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function $K(e){var t=Mo(e,kO),r=_.useMemo(()=>eg(e.children,xl),[e.children]),a=Yr(t,!1),s=_.useMemo(()=>({name:t.name,nameKey:t.nameKey,tooltipType:t.tooltipType,data:t.data,dataKey:t.dataKey,cx:t.cx,cy:t.cy,startAngle:t.startAngle,endAngle:t.endAngle,minAngle:t.minAngle,paddingAngle:t.paddingAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,cornerRadius:t.cornerRadius,legendType:t.legendType,fill:t.fill,presentationProps:a}),[t.cornerRadius,t.cx,t.cy,t.data,t.dataKey,t.endAngle,t.innerRadius,t.minAngle,t.name,t.nameKey,t.outerRadius,t.paddingAngle,t.startAngle,t.tooltipType,t.legendType,t.fill,a]),i=nr(l=>KG(l,s,r));return _.createElement(_.Fragment,null,_.createElement(L_,{fn:PK,args:yn(yn({},t),{},{sectors:i})}),_.createElement(UK,wf({},t,{sectors:i})))}class nu extends _.PureComponent{constructor(){super(...arguments),Pv(this,"id",xf("recharts-pie-"))}render(){return _.createElement(_.Fragment,null,_.createElement(oK,{data:this.props.data,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:0,radiusAxisId:0,stackId:void 0,barSize:void 0,type:"pie"}),_.createElement(EK,this.props),_.createElement($K,this.props),this.props.children)}}Pv(nu,"displayName","Pie");Pv(nu,"defaultProps",kO);var zK=ot([Jn],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),VK=ot([zK,lu,cu],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),HK=e=>{var t=li();return nr(r=>ic(r,"xAxis",e,t))},GK=e=>{var t=li();return nr(r=>ic(r,"yAxis",e,t))},I_=()=>nr(VK),KK=()=>nr(GV);function x6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function v6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x6(Object(r),!0).forEach(function(a){WK(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function WK(e,t,r){return(t=YK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YK(e){var t=XK(e,"string");return typeof t=="symbol"?t:t+""}function XK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZK=e=>{var{point:t,childIndex:r,mainColor:a,activeDot:s,dataKey:i}=e;if(s===!1||t.x==null||t.y==null)return null;var l=v6(v6({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Yr(s,!1)),Ww(s)),u;return _.isValidElement(s)?u=_.cloneElement(s,l):typeof s=="function"?u=s(l):u=_.createElement(vO,l),_.createElement(ps,{className:"recharts-active-dot"},u)};function JK(e){var{points:t,mainColor:r,activeDot:a,itemDataKey:s}=e,i=nr(md),l=KK();if(t==null||l==null)return null;var u=t.find(d=>l.includes(d.payload));return qa(u)?null:ZK({point:u,childIndex:Number(i),mainColor:r,dataKey:s,activeDot:a})}var QK=()=>{var e=sn();return _.useEffect(()=>(e(YG()),()=>{e(XG())})),null},eW=["children"];function tW(e,t){if(e==null)return{};var r,a,s=rW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function rW(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var y6=()=>{},EO=_.createContext({addErrorBar:y6,removeErrorBar:y6}),aW={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},PO=_.createContext(aW);function TO(e){var{children:t}=e,r=tW(e,eW);return _.createElement(PO.Provider,{value:r},t)}var nW=()=>_.useContext(PO),OO=e=>{var{children:t,xAxisId:r,yAxisId:a,zAxisId:s,dataKey:i,data:l,stackId:u,hide:d,type:f,barSize:m}=e,[g,v]=_.useState([]),x=_.useCallback(A=>{v(S=>[...S,A])},[v]),j=_.useCallback(A=>{v(S=>S.filter(T=>T!==A))},[v]),b=li();return _.createElement(EO.Provider,{value:{addErrorBar:x,removeErrorBar:j}},_.createElement(iK,{type:f,data:l,xAxisId:r,yAxisId:a,zAxisId:s,dataKey:i,errorBars:g,stackId:u,hide:d,barSize:m,isPanorama:b}),t)};function sW(e){var{addErrorBar:t,removeErrorBar:r}=_.useContext(EO);return _.useEffect(()=>(t(e),()=>{r(e)}),[t,r,e]),null}var iW=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function DO(e,t,r){return(t=oW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oW(e){var t=lW(e,"string");return typeof t=="symbol"?t:t+""}function lW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bp(){return Bp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Bp.apply(null,arguments)}function cW(e,t){if(e==null)return{};var r,a,s=uW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function uW(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function dW(e){var{direction:t,width:r,dataKey:a,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:u}=e,d=cW(e,iW),f=Yr(d,!1),{data:m,dataPointFormatter:g,xAxisId:v,yAxisId:x,errorBarOffset:j}=nW(),b=HK(v),A=GK(x);if((b==null?void 0:b.scale)==null||(A==null?void 0:A.scale)==null||m==null||t==="x"&&b.type!=="number")return null;var S=m.map(T=>{var{x:E,y:D,value:L,errorVal:F}=g(T,a,t);if(!F)return null;var z=[],M,U;if(Array.isArray(F)?[M,U]=F:M=U=F,t==="x"){var{scale:oe}=b,R=D+j,q=R+r,se=R-r,J=oe(L-M),Q=oe(L+U);z.push({x1:Q,y1:q,x2:Q,y2:se}),z.push({x1:J,y1:R,x2:Q,y2:R}),z.push({x1:J,y1:q,x2:J,y2:se})}else if(t==="y"){var{scale:ae}=A,he=E+j,de=he-r,_e=he+r,Y=ae(L-M),ye=ae(L+U);z.push({x1:de,y1:ye,x2:_e,y2:ye}),z.push({x1:he,y1:Y,x2:he,y2:ye}),z.push({x1:de,y1:Y,x2:_e,y2:Y})}var P="".concat(E+j,"px ").concat(D+j,"px");return _.createElement(ps,Bp({className:"recharts-errorBar",key:"bar-".concat(z.map(Z=>"".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)))},f),z.map(Z=>{var ce=s?{transformOrigin:"".concat(Z.x1-5,"px")}:void 0;return _.createElement(fd,{from:{transform:"scaleY(0)",transformOrigin:P},to:{transform:"scaleY(1)",transformOrigin:P},begin:i,easing:u,isActive:s,duration:l,key:"line-".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2),style:{transformOrigin:P}},_.createElement("line",Bp({},Z,{style:ce})))}))});return _.createElement(ps,{className:"recharts-errorBars"},S)}var RO=_.createContext(void 0);function fW(e){var t=_.useContext(RO);return e??t??"x"}function LO(e){var{direction:t,children:r}=e;return _.createElement(RO.Provider,{value:t},r)}var MO={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function hW(e){var t=fW(e.direction),{width:r,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:l}=Mo(e,MO);return _.createElement(_.Fragment,null,_.createElement(sW,{dataKey:e.dataKey,direction:t}),_.createElement(dW,Bp({},e,{direction:t,width:r,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:l})))}class IO extends _.Component{render(){return _.createElement(hW,this.props)}}DO(IO,"defaultProps",MO);DO(IO,"displayName","ErrorBar");var mW="Invariant failed";function pW(e,t){throw new Error(mW)}var gW=["x","y"];function gw(){return gw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},gw.apply(null,arguments)}function b6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function pp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b6(Object(r),!0).forEach(function(a){xW(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function xW(e,t,r){return(t=vW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vW(e){var t=yW(e,"string");return typeof t=="symbol"?t:t+""}function yW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bW(e,t){if(e==null)return{};var r,a,s=wW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function wW(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function jW(e,t){var{x:r,y:a}=e,s=bW(e,gW),i="".concat(r),l=parseInt(i,10),u="".concat(a),d=parseInt(u,10),f="".concat(t.height||s.height),m=parseInt(f,10),g="".concat(t.width||s.width),v=parseInt(g,10);return pp(pp(pp(pp(pp({},t),s),l?{x:l}:{}),d?{y:d}:{}),{},{height:m,width:v,name:t.name,radius:t.radius})}function qO(e){return _.createElement(NO,gw({shapeType:"rectangle",propTransformer:jW,activeClassName:"recharts-active-bar"},e))}var _W=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,s)=>{if(Xt(t))return t;var i=Xt(a)||qa(a);return i?t(a,s):(i||pW(),r)}};function q_(e,t){var r,a,s=nr(f=>du(f,e)),i=nr(f=>_d(f,t)),l=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Bi.allowDataOverflow,u=(a=i==null?void 0:i.allowDataOverflow)!==null&&a!==void 0?a:Ui.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function FO(e){var{xAxisId:t,yAxisId:r,clipPathId:a}=e,s=I_(),{needClipX:i,needClipY:l,needClip:u}=q_(t,r);if(!u)return null;var{x:d,y:f,width:m,height:g}=s;return _.createElement("clipPath",{id:"clipPath-".concat(a)},_.createElement("rect",{x:i?d:d-m/2,y:l?f:f-g/2,width:i?m:m*2,height:l?g:g*2}))}var NW=["onMouseEnter","onMouseLeave","onClick"],SW=["value","background","tooltipPosition"],AW=["onMouseEnter","onClick","onMouseLeave"];function Up(){return Up=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Up.apply(null,arguments)}function w6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ks(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w6(Object(r),!0).forEach(function(a){Tv(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Tv(e,t,r){return(t=CW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CW(e){var t=kW(e,"string");return typeof t=="symbol"?t:t+""}function kW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xw(e,t){if(e==null)return{};var r,a,s=EW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function EW(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var PW=e=>{var{dataKey:t,name:r,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:a,value:lm(r,t),payload:e}]};function TW(e){var{dataKey:t,stroke:r,strokeWidth:a,fill:s,name:i,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:s,dataKey:t,nameKey:void 0,name:lm(i,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function OW(e){var t=nr(md),{data:r,dataKey:a,background:s,allOtherBarProps:i}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=i,f=xw(i,NW),m=O_(l,a),g=D_(u),v=R_(d,a);if(!s||r==null)return null;var x=Yr(s,!1);return _.createElement(_.Fragment,null,r.map((j,b)=>{var{value:A,background:S,tooltipPosition:T}=j,E=xw(j,SW);if(!S)return null;var D=m(j,b),L=g(j,b),F=v(j,b),z=Ks(Ks(Ks(Ks(Ks({option:s,isActive:String(b)===t},E),{},{fill:"#eee"},S),x),Qp(f,j,b)),{},{onMouseEnter:D,onMouseLeave:L,onClick:F,dataKey:a,index:b,className:"recharts-bar-background-rectangle"});return _.createElement(qO,Up({key:"background-bar-".concat(b)},z))}))}function BO(e){var{data:t,props:r,showLabels:a}=e,s=Yr(r,!1),{shape:i,dataKey:l,activeBar:u}=r,d=nr(md),f=nr(aO),{onMouseEnter:m,onClick:g,onMouseLeave:v}=r,x=xw(r,AW),j=O_(m,l),b=D_(v),A=R_(g,l);return t?_.createElement(_.Fragment,null,t.map((S,T)=>{var E=u&&String(T)===d&&(f==null||l===f),D=E?u:i,L=Ks(Ks(Ks({},s),S),{},{isActive:E,option:D,index:T,dataKey:l});return _.createElement(ps,Up({className:"recharts-bar-rectangle"},Qp(x,S,T),{onMouseEnter:j(S,T),onMouseLeave:b(S,T),onClick:A(S,T),key:"rectangle-".concat(S==null?void 0:S.x,"-").concat(S==null?void 0:S.y,"-").concat(S==null?void 0:S.value,"-").concat(T)}),_.createElement(qO,L))}),a&&ud.renderCallByParent(r,t)):null}function DW(e){var{props:t,previousRectanglesRef:r}=e,{data:a,layout:s,isAnimationActive:i,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:f,onAnimationStart:m}=t,g=r.current,v=M_(t,"recharts-bar-"),[x,j]=_.useState(!1),b=_.useCallback(()=>{typeof f=="function"&&f(),j(!1)},[f]),A=_.useCallback(()=>{typeof m=="function"&&m(),j(!0)},[m]);return _.createElement(fd,{begin:l,duration:u,isActive:i,easing:d,from:{t:0},to:{t:1},onAnimationEnd:b,onAnimationStart:A,key:v},S=>{var{t:T}=S,E=T===1?a:a.map((D,L)=>{var F=g&&g[L];if(F){var z=Vi(F.x,D.x),M=Vi(F.y,D.y),U=Vi(F.width,D.width),oe=Vi(F.height,D.height);return Ks(Ks({},D),{},{x:z(T),y:M(T),width:U(T),height:oe(T)})}if(s==="horizontal"){var R=Vi(0,D.height),q=R(T);return Ks(Ks({},D),{},{y:D.y+D.height-q,height:q})}var se=Vi(0,D.width),J=se(T);return Ks(Ks({},D),{},{width:J})});return T>0&&(r.current=E),_.createElement(ps,null,_.createElement(BO,{props:t,data:E,showLabels:!x}))})}function RW(e){var{data:t,isAnimationActive:r}=e,a=_.useRef(null);return r&&t&&t.length&&(a.current==null||a.current!==t)?_.createElement(DW,{previousRectanglesRef:a,props:e}):_.createElement(BO,{props:e,data:t,showLabels:!0})}var UO=0,LW=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ga(e,t)}};class MW extends _.PureComponent{constructor(){super(...arguments),Tv(this,"id",xf("recharts-bar-"))}render(){var{hide:t,data:r,dataKey:a,className:s,xAxisId:i,yAxisId:l,needClip:u,background:d,id:f,layout:m}=this.props;if(t)return null;var g=oa("recharts-bar",s),v=qa(f)?this.id:f;return _.createElement(ps,{className:g},u&&_.createElement("defs",null,_.createElement(FO,{clipPathId:v,xAxisId:i,yAxisId:l})),_.createElement(ps,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(v,")"):null},_.createElement(OW,{data:r,dataKey:a,background:d,allOtherBarProps:this.props}),_.createElement(RW,this.props)),_.createElement(LO,{direction:m==="horizontal"?"y":"x"},this.props.children))}}var $O={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Af.isSsr,legendType:"rect",minPointSize:UO,xAxisId:0,yAxisId:0};function IW(e){var{xAxisId:t,yAxisId:r,hide:a,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:f,isAnimationActive:m}=Mo(e,$O),{needClip:g}=q_(t,r),v=fv(),x=li(),j=_.useMemo(()=>({barSize:e.barSize,data:void 0,dataKey:e.dataKey,maxBarSize:e.maxBarSize,minPointSize:i,stackId:ZE(e.stackId)}),[e.barSize,e.dataKey,e.maxBarSize,i,e.stackId]),b=eg(e.children,xl),A=nr(E=>dY(E,t,r,x,j,b));if(v!=="vertical"&&v!=="horizontal")return null;var S,T=A==null?void 0:A[0];return T==null||T.height==null||T.width==null?S=0:S=v==="vertical"?T.height/2:T.width/2,_.createElement(TO,{xAxisId:t,yAxisId:r,data:A,dataPointFormatter:LW,errorBarOffset:S},_.createElement(MW,Up({},e,{layout:v,needClip:g,data:A,xAxisId:t,yAxisId:r,hide:a,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:f,isAnimationActive:m})))}function qW(e){var{layout:t,barSettings:{dataKey:r,minPointSize:a},pos:s,bandSize:i,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:f,stackedData:m,displayedData:g,offset:v,cells:x}=e,j=t==="horizontal"?u:l,b=m?j.scale.domain():null,A=yF({numericAxis:j});return g.map((S,T)=>{var E,D,L,F,z,M;m?E=mF(m[T],b):(E=Ga(S,r),Array.isArray(E)||(E=[A,E]));var U=_W(a,UO)(E[1],T);if(t==="horizontal"){var oe,[R,q]=[u.scale(E[0]),u.scale(E[1])];D=s3({axis:l,ticks:d,bandSize:i,offset:s.offset,entry:S,index:T}),L=(oe=q??R)!==null&&oe!==void 0?oe:void 0,F=s.size;var se=R-q;if(z=Zi(se)?0:se,M={x:D,y:v.top,width:F,height:v.height},Math.abs(U)>0&&Math.abs(z)<Math.abs(U)){var J=ms(z||U)*(Math.abs(U)-Math.abs(z));L-=J,z+=J}}else{var[Q,ae]=[l.scale(E[0]),l.scale(E[1])];if(D=Q,L=s3({axis:u,ticks:f,bandSize:i,offset:s.offset,entry:S,index:T}),F=ae-Q,z=s.size,M={x:v.left,y:L,width:v.width,height:z},Math.abs(U)>0&&Math.abs(F)<Math.abs(U)){var he=ms(F||U)*(Math.abs(U)-Math.abs(F));F+=he}}var de=Ks(Ks({},S),{},{x:D,y:L,width:F,height:z,value:m?E:E[1],payload:S,background:M,tooltipPosition:{x:D+F/2,y:L+z/2}},x&&x[T]&&x[T].props);return de})}class pd extends _.PureComponent{render(){return _.createElement(OO,{type:"bar",data:null,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:this.props.stackId,hide:this.props.hide,barSize:this.props.barSize},_.createElement(QK,null),_.createElement(AO,{legendPayload:PW(this.props)}),_.createElement(L_,{fn:TW,args:this.props}),_.createElement(IW,this.props))}}Tv(pd,"displayName","Bar");Tv(pd,"defaultProps",$O);function j6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function O0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j6(Object(r),!0).forEach(function(a){FW(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function FW(e,t,r){return(t=BW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BW(e){var t=UW(e,"string");return typeof t=="symbol"?t:t+""}function UW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $W=(e,t)=>t,zW=(e,t,r)=>r,VW=(e,t,r,a)=>a,F_=(e,t,r,a,s)=>s,HW=(e,t,r,a,s)=>s.maxBarSize,GW=(e,t,r,a,s,i)=>i,_6=(e,t,r)=>{var a=r??e;if(!qa(a))return oi(a,t,0)},KW=ot([fa,jv,$W,zW,VW],(e,t,r,a,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===a).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),WW=(e,t,r,a)=>{var s=fa(e);return s==="horizontal"?lw(e,"yAxis",r,a):lw(e,"xAxis",t,a)},YW=(e,t,r)=>{var a=fa(e);return a==="horizontal"?NA(e,"xAxis",t):NA(e,"yAxis",r)};function XW(e){return e.stackId!=null&&e.dataKey!=null}var ZW=(e,t,r)=>{var a={},s=e.filter(XW),i=e.filter(f=>f.stackId==null),l=s.reduce((f,m)=>(f[m.stackId]||(f[m.stackId]=[]),f[m.stackId].push(m),f),a),u=Object.entries(l).map(f=>{var[m,g]=f,v=g.map(j=>j.dataKey),x=_6(t,r,g[0].barSize);return{stackId:m,dataKeys:v,barSize:x}}),d=i.map(f=>{var m=[f.dataKey].filter(v=>v!=null),g=_6(t,r,f.barSize);return{stackId:void 0,dataKeys:m,barSize:g}});return[...u,...d]},JW=ot([KW,az,YW],ZW),QW=(e,t,r,a,s)=>{var i,l,u=fa(e),d=cT(e),{maxBarSize:f}=s,m=qa(f)?d:f,g,v;return u==="horizontal"?(g=ic(e,"xAxis",t,a),v=hd(e,"xAxis",t,a)):(g=ic(e,"yAxis",r,a),v=hd(e,"yAxis",r,a)),(i=(l=Op(g,v,!0))!==null&&l!==void 0?l:m)!==null&&i!==void 0?i:0},zO=(e,t,r,a)=>{var s=fa(e),i,l;return s==="horizontal"?(i=ic(e,"xAxis",t,a),l=hd(e,"xAxis",t,a)):(i=ic(e,"yAxis",r,a),l=hd(e,"yAxis",r,a)),Op(i,l)};function eY(e,t,r,a,s){var i=a.length;if(!(i<1)){var l=oi(e,r,0,!0),u,d=[];if(eo(a[0].barSize)){var f=!1,m=r/i,g=a.reduce((S,T)=>S+(T.barSize||0),0);g+=(i-1)*l,g>=r&&(g-=(i-1)*l,l=0),g>=r&&m>0&&(f=!0,m*=.9,g=i*m);var v=(r-g)/2>>0,x={offset:v-l,size:0};u=a.reduce((S,T)=>{var E,D={stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:x.offset+x.size+l,size:f?m:(E=T.barSize)!==null&&E!==void 0?E:0}},L=[...S,D];return x=L[L.length-1].position,L},d)}else{var j=oi(t,r,0,!0);r-2*j-(i-1)*l<=0&&(l=0);var b=(r-2*j-(i-1)*l)/i;b>1&&(b>>=0);var A=eo(s)?Math.min(b,s):b;u=a.reduce((S,T,E)=>[...S,{stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:j+(b+l)*E+(b-A)/2,size:A}}],d)}return u}}var tY=(e,t,r,a,s,i,l)=>{var u=qa(l)?t:l,d=eY(r,a,s!==i?s:i,e,u);return s!==i&&d!=null&&(d=d.map(f=>O0(O0({},f),{},{position:O0(O0({},f.position),{},{offset:f.position.offset-s/2})}))),d},rY=ot([JW,cT,rz,uT,QW,zO,HW],tY),aY=(e,t,r,a)=>ic(e,"xAxis",t,a),nY=(e,t,r,a)=>ic(e,"yAxis",r,a),sY=(e,t,r,a)=>hd(e,"xAxis",t,a),iY=(e,t,r,a)=>hd(e,"yAxis",r,a),oY=ot([rY,F_],(e,t)=>{if(e!=null){var r=e.find(a=>a.stackId===t.stackId&&a.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),lY=(e,t)=>{if(!(!e||(t==null?void 0:t.dataKey)==null)){var{stackId:r}=t;if(r!=null){var a=e[r];if(a){var{stackedData:s}=a;if(s){var i=s.find(l=>l.key===t.dataKey);return i}}}}},cY=ot([jv,F_],(e,t)=>{if(e.some(r=>r.type==="bar"&&t.dataKey===r.dataKey&&t.stackId===r.stackId&&t.stackId===r.stackId))return t}),uY=ot([WW,F_],lY),dY=ot([Jn,aY,nY,sY,iY,oY,fa,Hj,zO,uY,cY,GW],(e,t,r,a,s,i,l,u,d,f,m,g)=>{var{chartData:v,dataStartIndex:x,dataEndIndex:j}=u;if(!(m==null||i==null||l!=="horizontal"&&l!=="vertical"||t==null||r==null||a==null||s==null||d==null)){var{data:b}=m,A;if(b!=null&&b.length>0?A=b:A=v==null?void 0:v.slice(x,j+1),A!=null)return qW({layout:l,barSettings:m,pos:i,bandSize:d,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:s,stackedData:f,displayedData:A,offset:e,cells:g})}}),VO=e=>{var{chartData:t}=e,r=sn(),a=li();return _.useEffect(()=>a?()=>{}:(r(RA(t)),()=>{r(RA(void 0))}),[t,r,a]),null},N6={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},HO=Lo({name:"brush",initialState:N6,reducers:{setBrushSettings(e,t){return t.payload==null?N6:t.payload}}}),{setBrushSettings:kne}=HO.actions,fY=HO.reducer;function hY(e,t,r){return(t=mY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mY(e){var t=pY(e,"string");return typeof t=="symbol"?t:t+""}function pY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class B_{static create(t){return new B_(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var r=this.range(),a=r[0],s=r[r.length-1];return a<=s?t>=a&&t<=s:t>=s&&t<=a}}hY(B_,"EPS",1e-4);function gY(e){return(e%180+180)%180}var xY=function(t){var{width:r,height:a}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=gY(s),l=i*Math.PI/180,u=Math.atan(a/r),d=l>u&&l<Math.PI-u?a/Math.sin(l):r/Math.cos(l);return Math.abs(d)},vY={dots:[],areas:[],lines:[]},GO=Lo({name:"referenceElements",initialState:vY,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Jc(e).dots.findIndex(a=>a===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Jc(e).areas.findIndex(a=>a===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Jc(e).lines.findIndex(a=>a===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Ene,removeDot:Pne,addArea:Tne,removeArea:One,addLine:Dne,removeLine:Rne}=GO.actions,yY=GO.reducer,bY=_.createContext(void 0),wY=e=>{var{children:t}=e,[r]=_.useState("".concat(xf("recharts"),"-clip")),a=I_();if(a==null)return null;var{x:s,y:i,width:l,height:u}=a;return _.createElement(bY.Provider,{value:r},_.createElement("defs",null,_.createElement("clipPath",{id:r},_.createElement("rect",{x:s,y:i,height:u,width:l}))),t)};function M1(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function KO(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)a.push(e[s]);return a}function jY(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return xY(a,r)}function _Y(e,t,r){var a=r==="width",{x:s,y:i,width:l,height:u}=e;return t===1?{start:a?s:i,end:a?s+l:i+u}:{start:a?s+l:i+u,end:a?s:i}}function Bx(e,t,r,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function NY(e,t){return KO(e,t+1)}function SY(e,t,r,a,s){for(var i=(a||[]).slice(),{start:l,end:u}=t,d=0,f=1,m=l,g=function(){var j=a==null?void 0:a[d];if(j===void 0)return{v:KO(a,f)};var b=d,A,S=()=>(A===void 0&&(A=r(j,b)),A),T=j.coordinate,E=d===0||Bx(e,T,S,m,u);E||(d=0,m=l,f+=1),E&&(m=T+e*(S()/2+s),d+=f)},v;f<=i.length;)if(v=g(),v)return v.v;return[]}function S6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Gs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S6(Object(r),!0).forEach(function(a){AY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function AY(e,t,r){return(t=CY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CY(e){var t=kY(e,"string");return typeof t=="symbol"?t:t+""}function kY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EY(e,t,r,a,s){for(var i=(a||[]).slice(),l=i.length,{start:u}=t,{end:d}=t,f=function(v){var x=i[v],j,b=()=>(j===void 0&&(j=r(x,v)),j);if(v===l-1){var A=e*(x.coordinate+e*b()/2-d);i[v]=x=Gs(Gs({},x),{},{tickCoord:A>0?x.coordinate-A*e:x.coordinate})}else i[v]=x=Gs(Gs({},x),{},{tickCoord:x.coordinate});var S=Bx(e,x.tickCoord,b,u,d);S&&(d=x.tickCoord-e*(b()/2+s),i[v]=Gs(Gs({},x),{},{isShow:!0}))},m=l-1;m>=0;m--)f(m);return i}function PY(e,t,r,a,s,i){var l=(a||[]).slice(),u=l.length,{start:d,end:f}=t;if(i){var m=a[u-1],g=r(m,u-1),v=e*(m.coordinate+e*g/2-f);l[u-1]=m=Gs(Gs({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate});var x=Bx(e,m.tickCoord,()=>g,d,f);x&&(f=m.tickCoord-e*(g/2+s),l[u-1]=Gs(Gs({},m),{},{isShow:!0}))}for(var j=i?u-1:u,b=function(T){var E=l[T],D,L=()=>(D===void 0&&(D=r(E,T)),D);if(T===0){var F=e*(E.coordinate-e*L()/2-d);l[T]=E=Gs(Gs({},E),{},{tickCoord:F<0?E.coordinate-F*e:E.coordinate})}else l[T]=E=Gs(Gs({},E),{},{tickCoord:E.coordinate});var z=Bx(e,E.tickCoord,L,d,f);z&&(d=E.tickCoord+e*(L()/2+s),l[T]=Gs(Gs({},E),{},{isShow:!0}))},A=0;A<j;A++)b(A);return l}function U_(e,t,r){var{tick:a,ticks:s,viewBox:i,minTickGap:l,orientation:u,interval:d,tickFormatter:f,unit:m,angle:g}=e;if(!s||!s.length||!a)return[];if(Xt(d)||Af.isSsr){var v;return(v=NY(s,Xt(d)?d:0))!==null&&v!==void 0?v:[]}var x=[],j=u==="top"||u==="bottom"?"width":"height",b=m&&j==="width"?Sp(m,{fontSize:t,letterSpacing:r}):{width:0,height:0},A=(E,D)=>{var L=typeof f=="function"?f(E.value,D):E.value;return j==="width"?jY(Sp(L,{fontSize:t,letterSpacing:r}),b,g):Sp(L,{fontSize:t,letterSpacing:r})[j]},S=s.length>=2?ms(s[1].coordinate-s[0].coordinate):1,T=_Y(i,S,j);return d==="equidistantPreserveStart"?SY(S,T,A,s,l):(d==="preserveStart"||d==="preserveStartEnd"?x=PY(S,T,A,s,l,d==="preserveStartEnd"):x=EY(S,T,A,s,l),x.filter(E=>E.isShow))}var TY=["viewBox"],OY=["viewBox"];function Ih(){return Ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ih.apply(null,arguments)}function A6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Xn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A6(Object(r),!0).forEach(function(a){$_(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function C6(e,t){if(e==null)return{};var r,a,s=DY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function DY(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function $_(e,t,r){return(t=RY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RY(e){var t=LY(e,"string");return typeof t=="symbol"?t:t+""}function LY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Nd extends _.Component{constructor(t){super(t),this.tickRefs=_.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:a}=t,s=C6(t,TY),i=this.props,{viewBox:l}=i,u=C6(i,OY);return!M1(a,l)||!M1(s,u)||!M1(r,this.state)}getTickLineCoord(t){var{x:r,y:a,width:s,height:i,orientation:l,tickSize:u,mirror:d,tickMargin:f}=this.props,m,g,v,x,j,b,A=d?-1:1,S=t.tickSize||u,T=Xt(t.tickCoord)?t.tickCoord:t.coordinate;switch(l){case"top":m=g=t.coordinate,x=a+ +!d*i,v=x-A*S,b=v-A*f,j=T;break;case"left":v=x=t.coordinate,g=r+ +!d*s,m=g-A*S,j=m-A*f,b=T;break;case"right":v=x=t.coordinate,g=r+ +d*s,m=g+A*S,j=m+A*f,b=T;break;default:m=g=t.coordinate,x=a+ +d*i,v=x+A*S,b=v+A*f,j=T;break}return{line:{x1:m,y1:v,x2:g,y2:x},tick:{x:j,y:b}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,a;switch(t){case"left":a=r?"start":"end";break;case"right":a=r?"end":"start";break;default:a="middle";break}return a}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:a,height:s,orientation:i,mirror:l,axisLine:u}=this.props,d=Xn(Xn(Xn({},Yr(this.props,!1)),Yr(u,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var f=+(i==="top"&&!l||i==="bottom"&&l);d=Xn(Xn({},d),{},{x1:t,y1:r+f*s,x2:t+a,y2:r+f*s})}else{var m=+(i==="left"&&!l||i==="right"&&l);d=Xn(Xn({},d),{},{x1:t+m*a,y1:r,x2:t+m*a,y2:r+s})}return _.createElement("line",Ih({},d,{className:oa("recharts-cartesian-axis-line",dd(u,"className"))}))}static renderTickItem(t,r,a){var s,i=oa(r.className,"recharts-cartesian-axis-tick-value");if(_.isValidElement(t))s=_.cloneElement(t,Xn(Xn({},r),{},{className:i}));else if(typeof t=="function")s=t(Xn(Xn({},r),{},{className:i}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=oa(l,t.className)),s=_.createElement(Ev,Ih({},r,{className:l}),a)}return s}renderTicks(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:s,stroke:i,tick:l,tickFormatter:u,unit:d}=this.props,f=U_(Xn(Xn({},this.props),{},{ticks:a}),t,r),m=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),v=Yr(this.props,!1),x=Yr(l,!1),j=Xn(Xn({},v),{},{fill:"none"},Yr(s,!1)),b=f.map((A,S)=>{var{line:T,tick:E}=this.getTickLineCoord(A),D=Xn(Xn(Xn(Xn({textAnchor:m,verticalAnchor:g},v),{},{stroke:"none",fill:i},x),E),{},{index:S,payload:A,visibleTicksCount:f.length,tickFormatter:u});return _.createElement(ps,Ih({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},Qp(this.props,A,S)),s&&_.createElement("line",Ih({},j,T,{className:oa("recharts-cartesian-axis-tick-line",dd(s,"className"))})),l&&Nd.renderTickItem(l,D,"".concat(typeof u=="function"?u(A.value,S):A.value).concat(d||"")))});return b.length>0?_.createElement("g",{className:"recharts-cartesian-axis-ticks"},b):null}render(){var{axisLine:t,width:r,height:a,className:s,hide:i}=this.props;if(i)return null;var{ticks:l}=this.props;return r!=null&&r<=0||a!=null&&a<=0?null:_.createElement(ps,{className:oa("recharts-cartesian-axis",s),ref:u=>{if(u){var d=u.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(d);var f=d[0];if(f){var m=window.getComputedStyle(f).fontSize,g=window.getComputedStyle(f).letterSpacing;(m!==this.state.fontSize||g!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(f).fontSize,letterSpacing:window.getComputedStyle(f).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,l),Hi.renderCallByParent(this.props))}}$_(Nd,"displayName","CartesianAxis");$_(Nd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var MY=["x1","y1","x2","y2","key"],IY=["offset"],qY=["xAxisId","yAxisId"],FY=["xAxisId","yAxisId"];function k6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ws(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k6(Object(r),!0).forEach(function(a){BY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function BY(e,t,r){return(t=UY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UY(e){var t=$Y(e,"string");return typeof t=="symbol"?t:t+""}function $Y(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uf(){return uf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},uf.apply(null,arguments)}function Ux(e,t){if(e==null)return{};var r,a,s=zY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function zY(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var VY=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:a,y:s,width:i,height:l,ry:u}=e;return _.createElement("rect",{x:a,y:s,ry:u,width:i,height:l,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function WO(e,t){var r;if(_.isValidElement(e))r=_.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:a,y1:s,x2:i,y2:l,key:u}=t,d=Ux(t,MY),f=Yr(d,!1),{offset:m}=f,g=Ux(f,IY);r=_.createElement("line",uf({},g,{x1:a,y1:s,x2:i,y2:l,fill:"none",key:u}))}return r}function HY(e){var{x:t,width:r,horizontal:a=!0,horizontalPoints:s}=e;if(!a||!s||!s.length)return null;var{xAxisId:i,yAxisId:l}=e,u=Ux(e,qY),d=s.map((f,m)=>{var g=Ws(Ws({},u),{},{x1:t,y1:f,x2:t+r,y2:f,key:"line-".concat(m),index:m});return WO(a,g)});return _.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}function GY(e){var{y:t,height:r,vertical:a=!0,verticalPoints:s}=e;if(!a||!s||!s.length)return null;var{xAxisId:i,yAxisId:l}=e,u=Ux(e,FY),d=s.map((f,m)=>{var g=Ws(Ws({},u),{},{x1:f,y1:t,x2:f,y2:t+r,key:"line-".concat(m),index:m});return WO(a,g)});return _.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}function KY(e){var{horizontalFill:t,fillOpacity:r,x:a,y:s,width:i,height:l,horizontalPoints:u,horizontal:d=!0}=e;if(!d||!t||!t.length)return null;var f=u.map(g=>Math.round(g+s-s)).sort((g,v)=>g-v);s!==f[0]&&f.unshift(0);var m=f.map((g,v)=>{var x=!f[v+1],j=x?s+l-g:f[v+1]-g;if(j<=0)return null;var b=v%t.length;return _.createElement("rect",{key:"react-".concat(v),y:g,x:a,height:j,width:i,stroke:"none",fill:t[b],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function WY(e){var{vertical:t=!0,verticalFill:r,fillOpacity:a,x:s,y:i,width:l,height:u,verticalPoints:d}=e;if(!t||!r||!r.length)return null;var f=d.map(g=>Math.round(g+s-s)).sort((g,v)=>g-v);s!==f[0]&&f.unshift(0);var m=f.map((g,v)=>{var x=!f[v+1],j=x?s+l-g:f[v+1]-g;if(j<=0)return null;var b=v%r.length;return _.createElement("rect",{key:"react-".concat(v),x:g,y:i,width:j,height:u,stroke:"none",fill:r[b],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var YY=(e,t)=>{var{xAxis:r,width:a,height:s,offset:i}=e;return YE(U_(Ws(Ws(Ws({},Nd.defaultProps),r),{},{ticks:XE(r),viewBox:{x:0,y:0,width:a,height:s}})),i.left,i.left+i.width,t)},XY=(e,t)=>{var{yAxis:r,width:a,height:s,offset:i}=e;return YE(U_(Ws(Ws(Ws({},Nd.defaultProps),r),{},{ticks:XE(r),viewBox:{x:0,y:0,width:a,height:s}})),i.top,i.top+i.height,t)},ZY={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function su(e){var t=gj(),r=xj(),a=rP(),s=Ws(Ws({},Mo(e,ZY)),{},{x:Xt(e.x)?e.x:a.left,y:Xt(e.y)?e.y:a.top,width:Xt(e.width)?e.width:a.width,height:Xt(e.height)?e.height:a.height}),{xAxisId:i,yAxisId:l,x:u,y:d,width:f,height:m,syncWithTicks:g,horizontalValues:v,verticalValues:x}=s,j=li(),b=nr(U=>SA(U,"xAxis",i,j)),A=nr(U=>SA(U,"yAxis",l,j));if(!Xt(f)||f<=0||!Xt(m)||m<=0||!Xt(u)||u!==+u||!Xt(d)||d!==+d)return null;var S=s.verticalCoordinatesGenerator||YY,T=s.horizontalCoordinatesGenerator||XY,{horizontalPoints:E,verticalPoints:D}=s;if((!E||!E.length)&&typeof T=="function"){var L=v&&v.length,F=T({yAxis:A?Ws(Ws({},A),{},{ticks:L?v:A.ticks}):void 0,width:t,height:r,offset:a},L?!0:g);Np(Array.isArray(F),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof F,"]")),Array.isArray(F)&&(E=F)}if((!D||!D.length)&&typeof S=="function"){var z=x&&x.length,M=S({xAxis:b?Ws(Ws({},b),{},{ticks:z?x:b.ticks}):void 0,width:t,height:r,offset:a},z?!0:g);Np(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof M,"]")),Array.isArray(M)&&(D=M)}return _.createElement("g",{className:"recharts-cartesian-grid"},_.createElement(VY,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),_.createElement(KY,uf({},s,{horizontalPoints:E})),_.createElement(WY,uf({},s,{verticalPoints:D})),_.createElement(HY,uf({},s,{offset:a,horizontalPoints:E,xAxis:b,yAxis:A})),_.createElement(GY,uf({},s,{offset:a,verticalPoints:D,xAxis:b,yAxis:A})))}su.displayName="CartesianGrid";var YO=(e,t,r,a)=>ic(e,"xAxis",t,a),XO=(e,t,r,a)=>hd(e,"xAxis",t,a),ZO=(e,t,r,a)=>ic(e,"yAxis",r,a),JO=(e,t,r,a)=>hd(e,"yAxis",r,a),JY=ot([fa,YO,ZO,XO,JO],(e,t,r,a,s)=>bd(e,"xAxis")?Op(t,a,!1):Op(r,s,!1)),QY=(e,t,r,a,s)=>s,eX=ot([jv,QY],(e,t)=>{if(e.some(r=>r.type==="line"&&t.dataKey===r.dataKey&&t.data===r.data))return t}),tX=ot([fa,YO,ZO,XO,JO,eX,JY,Hj],(e,t,r,a,s,i,l,u)=>{var{chartData:d,dataStartIndex:f,dataEndIndex:m}=u;if(!(i==null||t==null||r==null||a==null||s==null||a.length===0||s.length===0||l==null)){var{dataKey:g,data:v}=i,x;if(v!=null&&v.length>0?x=v:x=d==null?void 0:d.slice(f,m+1),x!=null)return bX({layout:e,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:s,dataKey:g,bandSize:l,displayedData:x})}}),rX=["type","layout","connectNulls","needClip"],aX=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId"];function QO(e,t){if(e==null)return{};var r,a,s=nX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function nX(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function E6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function hl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E6(Object(r),!0).forEach(function(a){Ov(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ov(e,t,r){return(t=sX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sX(e){var t=iX(e,"string");return typeof t=="symbol"?t:t+""}function iX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tm(){return tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},tm.apply(null,arguments)}var oX=e=>{var{dataKey:t,name:r,stroke:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:a,value:lm(r,t),payload:e}]};function lX(e){var{dataKey:t,data:r,stroke:a,strokeWidth:s,fill:i,name:l,hide:u,unit:d}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:lm(l,t),hide:u,type:e.tooltipType,color:e.stroke,unit:d}}}var e8=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function cX(e,t){for(var r=e.length%2!==0?[...e,0]:e,a=[],s=0;s<t;++s)a=[...a,...r];return a}var uX=(e,t,r)=>{var a=r.reduce((g,v)=>g+v);if(!a)return e8(t,e);for(var s=Math.floor(e/a),i=e%a,l=t-e,u=[],d=0,f=0;d<r.length;f+=r[d],++d)if(f+r[d]>i){u=[...r.slice(0,d),i-f];break}var m=u.length%2===0?[0,l]:[l];return[...cX(r,s),...u,...m].map(g=>"".concat(g,"px")).join(", ")};function dX(e,t){var r;if(_.isValidElement(e))r=_.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var a=oa("recharts-line-dot",typeof e!="boolean"?e.className:"");r=_.createElement(vO,tm({},t,{className:a}))}return r}function fX(e,t){return e==null?!1:t?!0:e.length===1}function hX(e){var{clipPathId:t,points:r,props:a}=e,{dot:s,dataKey:i,needClip:l}=a;if(!fX(r,s))return null;var u=Gk(s),d=Yr(a,!1),f=Yr(s,!0),m=r.map((v,x)=>{var j=hl(hl(hl({key:"dot-".concat(x),r:3},d),f),{},{index:x,cx:v.x,cy:v.y,dataKey:i,value:v.value,payload:v.payload,points:r});return dX(s,j)}),g={clipPath:l?"url(#clipPath-".concat(u?"":"dots-").concat(t,")"):null};return _.createElement(ps,tm({className:"recharts-line-dots",key:"dots"},g),m)}function vw(e){var{clipPathId:t,pathRef:r,points:a,strokeDasharray:s,props:i,showLabels:l}=e,{type:u,layout:d,connectNulls:f,needClip:m}=i,g=QO(i,rX),v=hl(hl({},Yr(g,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:m?"url(#clipPath-".concat(t,")"):null,points:a,type:u,layout:d,connectNulls:f,strokeDasharray:s??i.strokeDasharray});return _.createElement(_.Fragment,null,(a==null?void 0:a.length)>1&&_.createElement(yj,tm({},v,{pathRef:r})),_.createElement(hX,{points:a,clipPathId:t,props:i}),l&&ud.renderCallByParent(i,a))}function mX(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function pX(e){var{clipPathId:t,props:r,pathRef:a,previousPointsRef:s,longestAnimatedLengthRef:i}=e,{points:l,strokeDasharray:u,isAnimationActive:d,animationBegin:f,animationDuration:m,animationEasing:g,animateNewValues:v,width:x,height:j,onAnimationEnd:b,onAnimationStart:A}=r,S=s.current,T=M_(r,"recharts-line-"),[E,D]=_.useState(!1),L=_.useCallback(()=>{typeof b=="function"&&b(),D(!1)},[b]),F=_.useCallback(()=>{typeof A=="function"&&A(),D(!0)},[A]),z=mX(a.current),M=i.current;return _.createElement(fd,{begin:f,duration:m,isActive:d,easing:g,from:{t:0},to:{t:1},onAnimationEnd:L,onAnimationStart:F,key:T},U=>{var{t:oe}=U,R=Vi(M,z+M),q=Math.min(R(oe),z),se;if(u){var J="".concat(u).split(/[,\s]+/gim).map(he=>parseFloat(he));se=uX(q,z,J)}else se=e8(z,q);if(S){var Q=S.length/l.length,ae=oe===1?l:l.map((he,de)=>{var _e=Math.floor(de*Q);if(S[_e]){var Y=S[_e],ye=Vi(Y.x,he.x),P=Vi(Y.y,he.y);return hl(hl({},he),{},{x:ye(oe),y:P(oe)})}if(v){var Z=Vi(x*2,he.x),ce=Vi(j/2,he.y);return hl(hl({},he),{},{x:Z(oe),y:ce(oe)})}return hl(hl({},he),{},{x:he.x,y:he.y})});return s.current=ae,_.createElement(vw,{props:r,points:ae,clipPathId:t,pathRef:a,showLabels:!E,strokeDasharray:se})}return oe>0&&z>0&&(s.current=l,i.current=q),_.createElement(vw,{props:r,points:l,clipPathId:t,pathRef:a,showLabels:!E,strokeDasharray:se})})}function gX(e){var{clipPathId:t,props:r}=e,{points:a,isAnimationActive:s}=r,i=_.useRef(null),l=_.useRef(0),u=_.useRef(null),d=i.current;return s&&a&&a.length&&d!==a?_.createElement(pX,{props:r,clipPathId:t,previousPointsRef:i,longestAnimatedLengthRef:l,pathRef:u}):_.createElement(vw,{props:r,points:a,clipPathId:t,pathRef:u,showLabels:!0})}var xX=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Ga(e.payload,t)});class vX extends _.Component{constructor(){super(...arguments),Ov(this,"id",xf("recharts-line-"))}render(){var t,{hide:r,dot:a,points:s,className:i,xAxisId:l,yAxisId:u,top:d,left:f,width:m,height:g,id:v,needClip:x,layout:j}=this.props;if(r)return null;var b=oa("recharts-line",i),A=qa(v)?this.id:v,{r:S=3,strokeWidth:T=2}=(t=Yr(a,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},E=Gk(a),D=S*2+T;return _.createElement(_.Fragment,null,_.createElement(ps,{className:b},x&&_.createElement("defs",null,_.createElement(FO,{clipPathId:A,xAxisId:l,yAxisId:u}),!E&&_.createElement("clipPath",{id:"clipPath-dots-".concat(A)},_.createElement("rect",{x:f-D/2,y:d-D/2,width:m+D,height:g+D}))),_.createElement(gX,{props:this.props,clipPathId:A}),_.createElement(LO,{direction:j==="horizontal"?"y":"x"},_.createElement(TO,{xAxisId:l,yAxisId:u,data:s,dataPointFormatter:xX,errorBarOffset:0},this.props.children))),_.createElement(JK,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var t8={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Af.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function yX(e){var t=Mo(e,t8),{activeDot:r,animateNewValues:a,animationBegin:s,animationDuration:i,animationEasing:l,connectNulls:u,dot:d,hide:f,isAnimationActive:m,label:g,legendType:v,xAxisId:x,yAxisId:j}=t,b=QO(t,aX),{needClip:A}=q_(x,j),{height:S,width:T,x:E,y:D}=I_(),L=fv(),F=li(),z=_.useMemo(()=>({dataKey:e.dataKey,data:e.data}),[e.dataKey,e.data]),M=nr(U=>tX(U,x,j,F,z));return L!=="horizontal"&&L!=="vertical"?null:_.createElement(vX,tm({},b,{connectNulls:u,dot:d,activeDot:r,animateNewValues:a,animationBegin:s,animationDuration:i,animationEasing:l,isAnimationActive:m,hide:f,label:g,legendType:v,xAxisId:x,yAxisId:j,points:M,layout:L,height:S,width:T,left:E,top:D,needClip:A}))}function bX(e){var{layout:t,xAxis:r,yAxis:a,xAxisTicks:s,yAxisTicks:i,dataKey:l,bandSize:u,displayedData:d}=e;return d.map((f,m)=>{var g=Ga(f,l);return t==="horizontal"?{x:n3({axis:r,ticks:s,bandSize:u,entry:f,index:m}),y:qa(g)?null:a.scale(g),value:g,payload:f}:{x:qa(g)?null:r.scale(g),y:n3({axis:a,ticks:i,bandSize:u,entry:f,index:m}),value:g,payload:f}})}class rm extends _.PureComponent{render(){return _.createElement(OO,{type:"line",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},_.createElement(AO,{legendPayload:oX(this.props)}),_.createElement(L_,{fn:lX,args:this.props}),_.createElement(yX,this.props))}}Ov(rm,"displayName","Line");Ov(rm,"defaultProps",t8);function P6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function T6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P6(Object(r),!0).forEach(function(a){wX(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function wX(e,t,r){return(t=jX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jX(e){var t=_X(e,"string");return typeof t=="symbol"?t:t+""}function _X(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NX={xAxis:{},yAxis:{},zAxis:{}},r8=Lo({name:"cartesianAxis",initialState:NX,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:a}=t.payload;e.yAxis[r]&&(e.yAxis[r]=T6(T6({},e.yAxis[r]),{},{width:a}))}}}),{addXAxis:SX,removeXAxis:AX,addYAxis:CX,removeYAxis:kX,addZAxis:Lne,removeZAxis:Mne,updateYAxisWidth:EX}=r8.actions,PX=r8.reducer,TX=["children"],OX=["dangerouslySetInnerHTML","ticks"];function a8(e,t,r){return(t=DX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DX(e){var t=RX(e,"string");return typeof t=="symbol"?t:t+""}function RX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yw(){return yw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},yw.apply(null,arguments)}function n8(e,t){if(e==null)return{};var r,a,s=LX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function LX(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function MX(e){var t=sn(),r=_.useMemo(()=>{var{children:i}=e,l=n8(e,TX);return l},[e]),a=nr(i=>du(i,r.id)),s=r===a;return _.useEffect(()=>(t(SX(r)),()=>{t(AX(r))}),[r,t]),s?e.children:null}var IX=e=>{var{xAxisId:t,className:r}=e,a=nr(tP),s=li(),i="xAxis",l=nr(x=>mm(x,i,t,s)),u=nr(x=>qT(x,i,t,s)),d=nr(x=>RT(x,t)),f=nr(x=>Yz(x,t));if(d==null||f==null)return null;var{dangerouslySetInnerHTML:m,ticks:g}=e,v=n8(e,OX);return _.createElement(Nd,yw({},v,{scale:l,x:f.x,y:f.y,width:d.width,height:d.height,className:oa("recharts-".concat(i," ").concat(i),r),viewBox:a,ticks:u}))},qX=e=>{var t,r,a,s,i;return _.createElement(MX,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},_.createElement(IX,e))};class oc extends _.Component{render(){return _.createElement(qX,this.props)}}a8(oc,"displayName","XAxis");a8(oc,"defaultProps",{allowDataOverflow:Bi.allowDataOverflow,allowDecimals:Bi.allowDecimals,allowDuplicatedCategory:Bi.allowDuplicatedCategory,height:Bi.height,hide:!1,mirror:Bi.mirror,orientation:Bi.orientation,padding:Bi.padding,reversed:Bi.reversed,scale:Bi.scale,tickCount:Bi.tickCount,type:Bi.type,xAxisId:0});var FX=e=>{var{ticks:t,label:r,labelGapWithTick:a=5,tickSize:s=0,tickMargin:i=0}=e,l=0;if(t){t.forEach(m=>{if(m){var g=m.getBoundingClientRect();g.width>l&&(l=g.width)}});var u=r?r.getBoundingClientRect().width:0,d=s+i,f=l+d+u+(r?a:0);return Math.round(f)}return 0},BX=["dangerouslySetInnerHTML","ticks"];function s8(e,t,r){return(t=UX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UX(e){var t=$X(e,"string");return typeof t=="symbol"?t:t+""}function $X(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bw(){return bw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},bw.apply(null,arguments)}function zX(e,t){if(e==null)return{};var r,a,s=VX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function VX(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function HX(e){var t=sn();return _.useEffect(()=>(t(CX(e)),()=>{t(kX(e))}),[e,t]),null}var GX=e=>{var t,{yAxisId:r,className:a,width:s,label:i}=e,l=_.useRef(null),u=_.useRef(null),d=nr(tP),f=li(),m=sn(),g="yAxis",v=nr(E=>mm(E,g,r,f)),x=nr(E=>LT(E,r)),j=nr(E=>Xz(E,r)),b=nr(E=>qT(E,g,r,f));if(_.useLayoutEffect(()=>{var E;if(!(s!=="auto"||!x||C_(i)||_.isValidElement(i))){var D=l.current,L=D==null||(E=D.tickRefs)===null||E===void 0?void 0:E.current,{tickSize:F,tickMargin:z}=D.props,M=FX({ticks:L,label:u.current,labelGapWithTick:5,tickSize:F,tickMargin:z});Math.round(x.width)!==Math.round(M)&&m(EX({id:r,width:M}))}},[l,l==null||(t=l.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,x==null?void 0:x.width,x,m,i,r,s]),x==null||j==null)return null;var{dangerouslySetInnerHTML:A,ticks:S}=e,T=zX(e,BX);return _.createElement(Nd,bw({},T,{ref:l,labelRef:u,scale:v,x:j.x,y:j.y,width:x.width,height:x.height,className:oa("recharts-".concat(g," ").concat(g),a),viewBox:d,ticks:b}))},KX=e=>{var t,r,a,s,i;return _.createElement(_.Fragment,null,_.createElement(HX,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),_.createElement(GX,e))},WX={allowDataOverflow:Ui.allowDataOverflow,allowDecimals:Ui.allowDecimals,allowDuplicatedCategory:Ui.allowDuplicatedCategory,hide:!1,mirror:Ui.mirror,orientation:Ui.orientation,padding:Ui.padding,reversed:Ui.reversed,scale:Ui.scale,tickCount:Ui.tickCount,type:Ui.type,width:Ui.width,yAxisId:0};class vl extends _.Component{render(){return _.createElement(KX,this.props)}}s8(vl,"displayName","YAxis");s8(vl,"defaultProps",WX);var I1={exports:{}},q1={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O6;function YX(){if(O6)return q1;O6=1;var e=im();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var r=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,l=e.useMemo,u=e.useDebugValue;return q1.useSyncExternalStoreWithSelector=function(d,f,m,g,v){var x=s(null);if(x.current===null){var j={hasValue:!1,value:null};x.current=j}else j=x.current;x=l(function(){function A(L){if(!S){if(S=!0,T=L,L=g(L),v!==void 0&&j.hasValue){var F=j.value;if(v(F,L))return E=F}return E=L}if(F=E,r(T,L))return F;var z=g(L);return v!==void 0&&v(F,z)?(T=L,F):(T=L,E=z)}var S=!1,T,E,D=m===void 0?null:m;return[function(){return A(f())},D===null?void 0:function(){return A(D())}]},[f,m,g,v]);var b=a(d,x[0],x[1]);return i(function(){j.hasValue=!0,j.value=b},[b]),u(b),b},q1}var D6;function XX(){return D6||(D6=1,I1.exports=YX()),I1.exports}XX();function ZX(e){e()}function JX(){let e=null,t=null;return{clear(){e=null,t=null},notify(){ZX(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let a=e;for(;a;)r.push(a),a=a.next;return r},subscribe(r){let a=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!a||e===null||(a=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var R6={notify(){},get:()=>[]};function QX(e,t){let r,a=R6,s=0,i=!1;function l(b){m();const A=a.subscribe(b);let S=!1;return()=>{S||(S=!0,A(),g())}}function u(){a.notify()}function d(){j.onStateChange&&j.onStateChange()}function f(){return i}function m(){s++,r||(r=e.subscribe(d),a=JX())}function g(){s--,r&&s===0&&(r(),r=void 0,a.clear(),a=R6)}function v(){i||(i=!0,m())}function x(){i&&(i=!1,g())}const j={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:f,trySubscribe:v,tryUnsubscribe:x,getListeners:()=>a};return j}var eZ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tZ=eZ(),rZ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",aZ=rZ(),nZ=()=>tZ||aZ?_.useLayoutEffect:_.useEffect,sZ=nZ(),F1=Symbol.for("react-redux-context"),B1=typeof globalThis<"u"?globalThis:{};function iZ(){if(!_.createContext)return{};const e=B1[F1]??(B1[F1]=new Map);let t=e.get(_.createContext);return t||(t=_.createContext(null),e.set(_.createContext,t)),t}var oZ=iZ();function lZ(e){const{children:t,context:r,serverState:a,store:s}=e,i=_.useMemo(()=>{const d=QX(s);return{store:s,subscription:d,getServerState:a?()=>a:void 0}},[s,a]),l=_.useMemo(()=>s.getState(),[s]);sZ(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,l]);const u=r||oZ;return _.createElement(u.Provider,{value:i},t)}var cZ=lZ,uZ=(e,t)=>t,z_=ot([uZ,fa,cz,xs,QT,fu,QV,Jn],nH),V_=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/a)}},i8=To("mouseClick"),o8=tg();o8.startListening({actionCreator:i8,effect:(e,t)=>{var r=e.payload,a=z_(t.getState(),V_(r));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(cV({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var ww=To("mouseMove"),l8=tg();l8.startListening({actionCreator:ww,effect:(e,t)=>{var r=e.payload,a=t.getState(),s=x_(a,a.tooltip.settings.shared),i=z_(a,V_(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(GT({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(HT()))}});function dZ(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var L6={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},c8=Lo({name:"rootProps",initialState:L6,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:L6.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),fZ=c8.reducer,{updateOptions:hZ}=c8.actions,u8=Lo({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:mZ}=u8.actions,pZ=u8.reducer,d8=To("keyDown"),f8=To("focus"),H_=tg();H_.startListening({actionCreator:d8,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var l=Number(v_(s,Tf(r))),u=fu(r);if(i==="Enter"){var d=Mx(r,"axis","hover",String(s.index));t.dispatch(uw({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:d}));return}var f=eV(r),m=f==="left-to-right"?1:-1,g=i==="ArrowRight"?1:-1,v=l+g*m;if(!(u==null||v>=u.length||v<0)){var x=Mx(r,"axis","hover",String(v));t.dispatch(uw({active:!0,activeIndex:v.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});H_.startListening({actionCreator:f8,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",l=Mx(r,"axis","hover",String(i));t.dispatch(uw({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:l}))}}}});var So=To("externalEvent"),h8=tg();h8.startListening({actionCreator:So,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),a={activeCoordinate:zV(r),activeDataKey:aO(r),activeIndex:md(r),activeLabel:rO(r),activeTooltipIndex:md(r),isTooltipActive:VV(r)};e.payload.handler(a,e.payload.reactEvent)}}});var gZ=ot([pm],e=>e.tooltipItemPayloads),xZ=ot([gZ,dg,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,a)=>{var s=e.find(u=>u.settings.dataKey===a);if(s!=null){var{positions:i}=s;if(i!=null){var l=t(i,r);return l}}}),m8=To("touchMove"),p8=tg();p8.startListening({actionCreator:m8,effect:(e,t)=>{var r=e.payload,a=t.getState(),s=x_(a,a.tooltip.settings.shared);if(s==="axis"){var i=z_(a,V_({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(GT({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var l,u=r.touches[0],d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var f=d.getAttribute(QE),m=(l=d.getAttribute(eP))!==null&&l!==void 0?l:void 0,g=xZ(t.getState(),f,m);t.dispatch(VT({activeDataKey:m,activeIndex:f,activeCoordinate:g}))}}});var vZ=SE({brush:fY,cartesianAxis:PX,chartData:bH,graphicalItems:rK,layout:Jq,legend:qF,options:pH,polarAxis:BG,polarOptions:pZ,referenceElements:yY,rootProps:fZ,tooltip:uV}),yZ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return _q({reducer:vZ,preloadedState:t,middleware:a=>a({serializableCheck:!1}).concat([o8.middleware,l8.middleware,H_.middleware,h8.middleware,p8.middleware]),devTools:{serialize:{replacer:dZ},name:"recharts-".concat(r)}})};function g8(e){var{preloadedState:t,children:r,reduxStoreName:a}=e,s=li(),i=_.useRef(null);if(s)return r;i.current==null&&(i.current=yZ(t,a));var l=oj;return _.createElement(cZ,{context:l,store:i.current},r)}function x8(e){var{layout:t,width:r,height:a,margin:s}=e,i=sn(),l=li();return _.useEffect(()=>{l||(i(Yq(t)),i(Xq({width:r,height:a})),i(Wq(s)))},[i,l,t,r,a,s]),null}function v8(e){var t=sn();return _.useEffect(()=>{t(hZ(e))},[t,e]),null}var bZ=["children"];function wZ(e,t){if(e==null)return{};var r,a,s=jZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function jZ(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function $x(){return $x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$x.apply(null,arguments)}var _Z={width:"100%",height:"100%"},NZ=_.forwardRef((e,t)=>{var r=gj(),a=xj(),s=iP();if(!Xh(r)||!Xh(a))return null;var{children:i,otherAttributes:l,title:u,desc:d}=e,f,m;return typeof l.tabIndex=="number"?f=l.tabIndex:f=s?0:void 0,typeof l.role=="string"?m=l.role:m=s?"application":void 0,_.createElement(Yw,$x({},l,{title:u,desc:d,role:m,tabIndex:f,width:r,height:a,style:_Z,ref:t}),i)}),SZ=e=>{var{children:t}=e,r=nr(dv);if(!r)return null;var{width:a,height:s,y:i,x:l}=r;return _.createElement(Yw,{width:a,height:s,x:l,y:i},t)},M6=_.forwardRef((e,t)=>{var{children:r}=e,a=wZ(e,bZ),s=li();return s?_.createElement(SZ,null,r):_.createElement(NZ,$x({ref:t},a),r)});function AZ(){var e=sn(),[t,r]=_.useState(null),a=nr(AF);return _.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;eo(i)&&i!==a&&e(Zq(i))}},[t,e,a]),r}function I6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function CZ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I6(Object(r),!0).forEach(function(a){kZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kZ(e,t,r){return(t=EZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EZ(e){var t=PZ(e,"string");return typeof t=="symbol"?t:t+""}function PZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TZ=_.forwardRef((e,t)=>{var{children:r,className:a,height:s,onClick:i,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:f,onMouseLeave:m,onMouseMove:g,onMouseUp:v,onTouchEnd:x,onTouchMove:j,onTouchStart:b,style:A,width:S}=e,T=sn(),[E,D]=_.useState(null),[L,F]=_.useState(null);_H();var z=AZ(),M=_.useCallback(P=>{z(P),typeof t=="function"&&t(P),D(P),F(P)},[z,t,D,F]),U=_.useCallback(P=>{T(i8(P)),T(So({handler:i,reactEvent:P}))},[T,i]),oe=_.useCallback(P=>{T(ww(P)),T(So({handler:f,reactEvent:P}))},[T,f]),R=_.useCallback(P=>{T(HT()),T(So({handler:m,reactEvent:P}))},[T,m]),q=_.useCallback(P=>{T(ww(P)),T(So({handler:g,reactEvent:P}))},[T,g]),se=_.useCallback(()=>{T(f8())},[T]),J=_.useCallback(P=>{T(d8(P.key))},[T]),Q=_.useCallback(P=>{T(So({handler:l,reactEvent:P}))},[T,l]),ae=_.useCallback(P=>{T(So({handler:u,reactEvent:P}))},[T,u]),he=_.useCallback(P=>{T(So({handler:d,reactEvent:P}))},[T,d]),de=_.useCallback(P=>{T(So({handler:v,reactEvent:P}))},[T,v]),_e=_.useCallback(P=>{T(So({handler:b,reactEvent:P}))},[T,b]),Y=_.useCallback(P=>{T(m8(P)),T(So({handler:j,reactEvent:P}))},[T,j]),ye=_.useCallback(P=>{T(So({handler:x,reactEvent:P}))},[T,x]);return _.createElement(cO.Provider,{value:E},_.createElement(Wk.Provider,{value:L},_.createElement("div",{className:oa("recharts-wrapper",a),style:CZ({position:"relative",cursor:"default",width:S,height:s},A),onClick:U,onContextMenu:Q,onDoubleClick:ae,onFocus:se,onKeyDown:J,onMouseDown:he,onMouseEnter:oe,onMouseLeave:R,onMouseMove:q,onMouseUp:de,onTouchEnd:ye,onTouchMove:Y,onTouchStart:_e,ref:M},r)))}),OZ=["children","className","width","height","style","compact","title","desc"];function DZ(e,t){if(e==null)return{};var r,a,s=RZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function RZ(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var y8=_.forwardRef((e,t)=>{var{children:r,className:a,width:s,height:i,style:l,compact:u,title:d,desc:f}=e,m=DZ(e,OZ),g=Yr(m,!1);return u?_.createElement(M6,{otherAttributes:g,title:d,desc:f},r):_.createElement(TZ,{className:a,style:l,width:s,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},_.createElement(M6,{otherAttributes:g,title:d,desc:f,ref:t},_.createElement(wY,null,r)))}),LZ=["width","height"];function jw(){return jw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},jw.apply(null,arguments)}function MZ(e,t){if(e==null)return{};var r,a,s=IZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function IZ(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var qZ={top:5,right:5,bottom:5,left:5},FZ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:qZ,reverseStackOrder:!1,syncMethod:"index"},b8=_.forwardRef(function(t,r){var a,s=Mo(t.categoricalChartProps,FZ),{width:i,height:l}=s,u=MZ(s,LZ);if(!Xh(i)||!Xh(l))return null;var{chartName:d,defaultTooltipEventType:f,validateTooltipEventTypes:m,tooltipPayloadSearcher:g,categoricalChartProps:v}=t,x={chartName:d,defaultTooltipEventType:f,validateTooltipEventTypes:m,tooltipPayloadSearcher:g,eventEmitter:void 0};return _.createElement(g8,{preloadedState:{options:x},reduxStoreName:(a=v.id)!==null&&a!==void 0?a:d},_.createElement(VO,{chartData:v.data}),_.createElement(x8,{width:i,height:l,layout:s.layout,margin:s.margin}),_.createElement(v8,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),_.createElement(y8,jw({},u,{width:i,height:l,ref:r})))}),BZ=["axis"],zx=_.forwardRef((e,t)=>_.createElement(b8,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:BZ,tooltipPayloadSearcher:A_,categoricalChartProps:e,ref:t})),UZ=["axis","item"],Dv=_.forwardRef((e,t)=>_.createElement(b8,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:UZ,tooltipPayloadSearcher:A_,categoricalChartProps:e,ref:t}));function $Z(e){var t=sn();return _.useEffect(()=>{t(mZ(e))},[t,e]),null}var zZ=["width","height","layout"];function _w(){return _w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},_w.apply(null,arguments)}function VZ(e,t){if(e==null)return{};var r,a,s=HZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function HZ(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var GZ={top:5,right:5,bottom:5,left:5},KZ={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:GZ,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},WZ=_.forwardRef(function(t,r){var a,s=Mo(t.categoricalChartProps,KZ),{width:i,height:l,layout:u}=s,d=VZ(s,zZ);if(!Xh(i)||!Xh(l))return null;var{chartName:f,defaultTooltipEventType:m,validateTooltipEventTypes:g,tooltipPayloadSearcher:v}=t,x={chartName:f,defaultTooltipEventType:m,validateTooltipEventTypes:g,tooltipPayloadSearcher:v,eventEmitter:void 0};return _.createElement(g8,{preloadedState:{options:x},reduxStoreName:(a=s.id)!==null&&a!==void 0?a:f},_.createElement(VO,{chartData:s.data}),_.createElement(x8,{width:i,height:l,layout:u,margin:s.margin}),_.createElement(v8,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),_.createElement($Z,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),_.createElement(y8,_w({width:i,height:l},d,{ref:r})))}),YZ=["item"],XZ={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},jf=_.forwardRef((e,t)=>{var r=Mo(e,XZ);return _.createElement(WZ,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:YZ,tooltipPayloadSearcher:A_,categoricalChartProps:r,ref:t})});const w8=({data:e})=>{const r=(()=>{const a={};return e.forEach(s=>{a[s.sector]=(a[s.sector]||0)+1}),Object.keys(a).map(s=>({name:s,count:a[s]}))})();return n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Portfolio Distribution by Sector"}),n.jsx("div",{style:{width:"100%",height:300},children:n.jsx(ii,{children:n.jsxs(Dv,{data:r,margin:{top:5,right:20,left:-10,bottom:5},children:[n.jsx(su,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),n.jsx(oc,{dataKey:"name",stroke:"#64748b",fontSize:12}),n.jsx(vl,{allowDecimals:!1,stroke:"#64748b",fontSize:12}),n.jsx(si,{cursor:{fill:"rgba(239, 246, 255, 0.5)"},contentStyle:{backgroundColor:"#fff",borderRadius:"0.5rem",borderColor:"#e2e8f0",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)"}}),n.jsx(Es,{wrapperStyle:{fontSize:"14px"}}),n.jsx(pd,{dataKey:"count",name:"Number of Startups",fill:"#3b82f6",radius:[4,4,0,0]})]})})})]})};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZZ=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JZ=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),q6=e=>{const t=JZ(e);return t.charAt(0).toUpperCase()+t.slice(1)},j8=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim(),QZ=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tJ=_.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:i,iconNode:l,...u},d)=>_.createElement("svg",{ref:d,...eJ,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:j8("lucide",s),...!i&&!QZ(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,m])=>_.createElement(f,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=(e,t)=>{const r=_.forwardRef(({className:a,...s},i)=>_.createElement(tJ,{ref:i,iconNode:t,className:j8(`lucide-${ZZ(q6(e))}`,`lucide-${e}`,a),...s}));return r.displayName=q6(e),r};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rJ=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],lc=Ut("arrow-left",rJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aJ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],F6=Ut("arrow-right",aJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nJ=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],sJ=Ut("award",nJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iJ=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],B6=Ut("banknote",iJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oJ=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],$p=Ut("bell",oJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lJ=[["path",{d:"M15 13a3 3 0 1 0-6 0",key:"10j68g"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}]],cJ=Ut("book-user",lJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uJ=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],dJ=Ut("briefcase",uJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fJ=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],rc=Ut("building-2",fJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hJ=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],X0=Ut("building",hJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mJ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],zp=Ut("calendar",mJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pJ=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],U6=Ut("camera",pJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gJ=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],G_=Ut("chart-column",gJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xJ=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Nw=Ut("chart-pie",xJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vJ=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Po=Ut("check",vJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],iu=Ut("circle-alert",yJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bJ=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],sa=Ut("circle-check-big",bJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],jJ=Ut("circle-check",wJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _J=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],_8=Ut("circle-plus",_J);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],am=Ut("circle-question-mark",NJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Vp=Ut("circle-x",SJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AJ=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Vx=Ut("clock",AJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CJ=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],U1=Ut("cloud-upload",CJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kJ=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],wp=Ut("credit-card",kJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EJ=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Hx=Ut("database",EJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PJ=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ki=Ut("dollar-sign",PJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],_i=Ut("download",TJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OJ=[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]],DJ=Ut("euro",OJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RJ=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Lc=Ut("external-link",RJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LJ=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],$6=Ut("eye-off",LJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gl=Ut("eye",MJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IJ=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]],qJ=Ut("file-check-2",IJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FJ=[["path",{d:"M11 21a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1",key:"likhh7"}],["path",{d:"M16 16a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1",key:"17ky3x"}],["path",{d:"M21 6a2 2 0 0 0-.586-1.414l-2-2A2 2 0 0 0 17 2h-3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1z",key:"1hyeo0"}]],BJ=Ut("file-stack",FJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UJ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],La=Ut("file-text",UJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $J=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],Jl=Ut("film",$J);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zJ=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],VJ=Ut("funnel",zJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HJ=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Xd=Ut("gift",HJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Sw=Ut("globe",GJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],nm=Ut("heart",KJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],YJ=Ut("indian-rupee",WJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],K_=Ut("layout-grid",XJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],z6=Ut("layout-dashboard",ZJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Hp=Ut("loader-circle",JJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],eQ=Ut("lock",QJ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tQ=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Rv=Ut("log-out",tQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rQ=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ko=Ut("mail",rQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aQ=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Gp=Ut("map-pin",aQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nQ=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Lv=Ut("menu",nQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sQ=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],iQ=Ut("notebook-pen",sQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oQ=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],lQ=Ut("package",oQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cQ=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],df=Ut("pen-line",cQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uQ=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],N8=Ut("percent",uQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dQ=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Gx=Ut("phone",dQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fQ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Wi=Ut("plus",fQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hQ=[["path",{d:"M18 7c0-5.333-8-5.333-8 0",key:"1prm2n"}],["path",{d:"M10 7v14",key:"18tmcs"}],["path",{d:"M6 21h12",key:"4dkmi1"}],["path",{d:"M6 13h10",key:"ybwr4a"}]],mQ=Ut("pound-sterling",hQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pQ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],sm=Ut("refresh-cw",pQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gQ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Mv=Ut("save",gQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xQ=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],vQ=Ut("scale",xQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yQ=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],gd=Ut("search",yQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bQ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],wQ=Ut("send",bQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jQ=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Kp=Ut("settings",jQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Q=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Iv=Ut("share-2",_Q);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NQ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ap=Ut("shield-check",NQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SQ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Cs=Ut("shield",SQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AQ=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CQ=Ut("square-check-big",AQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kQ=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Xl=Ut("square-pen",kQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EQ=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],$1=Ut("star",EQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PQ=[["path",{d:"M15 3v18",key:"14nvp0"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]],z1=Ut("table-properties",PQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],S8=Ut("target",TQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OQ=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ma=Ut("trash-2",OQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DQ=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],xd=Ut("trending-up",DQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RQ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ql=Ut("triangle-alert",RQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQ=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Aw=Ut("upload",LQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MQ=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Wp=Ut("user-check",MQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IQ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],qQ=Ut("user-plus",IQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FQ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],xm=Ut("user",FQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BQ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],bn=Ut("users",BQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UQ=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Zc=Ut("video",UQ);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Q=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ac=Ut("x",$Q);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zQ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Cw=Ut("zap",zQ),Bn=({isOpen:e,onClose:t,title:r,children:a})=>e?n.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[100] flex justify-center items-center p-4",onClick:t,children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-full max-w-lg relative animate-fade-in-up",onClick:s=>s.stopPropagation(),children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-3",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:r}),n.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 transition-colors","aria-label":"Close modal",children:n.jsx(ac,{className:"h-6 w-6"})})]}),a]}),n.jsx("style",{children:`
        @keyframes fade-in-up {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
          animation: fade-in-up 0.3s ease-out forwards;
        }
      `})]}):null,At=({label:e,id:t,containerClassName:r="",className:a="",helpText:s,...i})=>{const l="block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-brand-primary focus:border-brand-primary sm:text-sm disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 disabled:shadow-none",u=a?`${l} ${a}`:l;return n.jsxs("div",{className:r,children:[n.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-slate-700 mb-1",children:e}),n.jsx("input",{id:t,className:u,...i}),s&&n.jsx("p",{className:"mt-1 text-sm text-slate-500",children:s})]})};class VQ{async getActiveFundraisingStartups(){try{console.log(" investorService.getActiveFundraisingStartups() called");const{data:t,error:r}=await G.from("fundraising_details").select(`
          *,
          startups (
            id,
            name,
            sector,
            compliance_status,
            startup_nation_validated,
            validation_date,
            created_at
          )
        `).eq("active",!0).order("created_at",{ascending:!1});if(console.log(" Raw query result:",{data:t,error:r}),r)return console.error(" Error fetching active fundraising startups:",r),[];console.log(" Raw data length:",(t==null?void 0:t.length)||0),console.log(" Raw data sample:",t==null?void 0:t[0]);const a=(t||[]).filter(s=>{const i=s.startups!==null;return console.log(" Filtering item:",{fundraisingId:s.id,startupId:s.startup_id,hasStartup:i,startupData:s.startups}),i});return console.log(" Filtered data length:",a.length),a.map(s=>({id:s.startups.id,name:s.startups.name,sector:s.startups.sector||"Technology",investmentValue:s.value,equityAllocation:s.equity,complianceStatus:s.startups.compliance_status,pitchDeckUrl:s.pitch_deck_url,pitchVideoUrl:s.pitch_video_url,fundraisingType:s.type,description:s.startups.description||`${s.startups.name} - ${s.startups.sector||"Technology"} startup`,createdAt:s.startups.created_at,fundraisingId:s.id,isStartupNationValidated:s.startups.startup_nation_validated||!1,validationDate:s.startups.validation_date}))}catch(t){return console.error("Error in getActiveFundraisingStartups:",t),[]}}async getStartupDetails(t){try{const{data:r,error:a}=await G.from("fundraising_details").select(`
          *,
          startups (
            id,
            name,
            sector,
            compliance_status,
            created_at
          )
        `).eq("startup_id",t).eq("active",!0).single();return a||!r?(console.error("Error fetching startup details:",a),null):{id:r.startups.id,name:r.startups.name,sector:r.startups.sector||"Technology",investmentValue:r.value,equityAllocation:r.equity,complianceStatus:r.startups.compliance_status,pitchDeckUrl:r.pitch_deck_url,pitchVideoUrl:r.pitch_video_url,fundraisingType:r.type,description:r.startups.description||`${r.startups.name} - ${r.startups.sector||"Technology"} startup`,createdAt:r.startups.created_at,fundraisingId:r.id,isStartupNationValidated:r.startups.startup_nation_validated||!1,validationDate:r.startups.validation_date}}catch(r){return console.error("Error in getStartupDetails:",r),null}}getYoutubeEmbedUrl(t){if(!t)return null;const r=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]+)/,/youtube\.com\/watch\?.*v=([a-zA-Z0-9_-]+)/,/youtube\.com\/shorts\/([a-zA-Z0-9_-]+)/];for(const a of r){const s=t.match(a);if(s)return`https://www.youtube.com/embed/${s[1]}`}return null}formatCurrency(t,r="USD"){const a=this.getCurrencySymbol(r);return t>=1e6?`${a}${(t/1e6).toFixed(1)}M`:t>=1e3?`${a}${(t/1e3).toFixed(1)}K`:`${a}${t.toLocaleString()}`}getCurrencySymbol(t){return{USD:"$",EUR:"",GBP:"",INR:"",CAD:"C$",AUD:"A$",JPY:"",CHF:"CHF",SGD:"S$",CNY:"",BTN:"Nu.",AMD:"",BYN:"Br",GEL:"",ILS:"",JOD:".",NGN:"",PHP:"",RUB:"",LKR:"",BRL:"R$",VND:"",MMK:"K",AZN:"",RSD:".",HKD:"HK$",PKR:"",MCO:""}[t]||t}}const Ni=new VQ;class HQ{async getSubscriptionPlans(t,r){try{let{data:a,error:s}=await G.from("subscription_plans").select("*").eq("user_type",t).eq("country",r).eq("is_active",!0).order("price",{ascending:!0});if(!a||a.length===0){const{data:i,error:l}=await G.from("subscription_plans").select("*").eq("user_type",t).eq("country","Global").eq("is_active",!0).order("price",{ascending:!0});if(l)throw l;a=i}if(s)throw s;return a||[]}catch(a){throw console.error("Error fetching subscription plans:",a),a}}async getUserSubscription(t){try{const{data:r,error:a}=await G.from("user_subscriptions").select(`
          *,
          subscription_plans (price, interval)
        `).eq("user_id",t).eq("status","active").single();if(a&&a.code!=="PGRST116")throw a;return r&&r.subscription_plans&&(r.amount=r.subscription_plans.price*r.startup_count,r.interval=r.subscription_plans.interval),r}catch(r){throw console.error("Error fetching user subscription:",r),r}}async createPaymentIntent(t,r,a,s){try{const i=await fetch("/api/payment/create-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:Math.round(t*100),currency:r.toLowerCase(),userId:a,planId:s})});if(!i.ok)throw new Error("Failed to create payment intent");return await i.json()}catch(i){throw console.error("Error creating payment intent:",i),i}}async confirmPayment(t,r,a,s){try{const{data:i,error:l}=await G.from("subscription_plans").select("price, interval").eq("id",a).single();if(l)throw l;const u=i.price*s,d=i.interval,{data:f,error:m}=await G.from("user_subscriptions").insert({user_id:r,plan_id:a,status:"active",startup_count:s,amount:u,interval:d,current_period_start:new Date().toISOString(),current_period_end:new Date(Date.now()+(d==="yearly"?365:30)*24*60*60*1e3).toISOString()}).select().single();if(m)throw m;return f}catch(i){throw console.error("Error confirming payment:",i),i}}async updateSubscriptionStartupCount(t,r){try{const{error:a}=await G.from("user_subscriptions").update({startup_count:r,updated_at:new Date().toISOString()}).eq("user_id",t).eq("status","active");if(a)throw a}catch(a){throw console.error("Error updating subscription startup count:",a),a}}async validateDiscountCoupon(t){try{const{data:r,error:a}=await G.from("discount_coupons").select("*").eq("code",t.toUpperCase()).eq("is_active",!0).single();if(a&&a.code!=="PGRST116")throw a;if(!r)return null;const s=new Date,i=new Date(r.valid_from),l=new Date(r.valid_until);return s<i||s>l||r.used_count>=r.max_uses?null:r}catch(r){throw console.error("Error validating discount coupon:",r),r}}async applyDiscountCoupon(t,r){try{const a=await this.validateDiscountCoupon(t);if(!a)throw new Error("Invalid or expired coupon");const{error:s}=await G.from("discount_coupons").update({used_count:a.used_count+1}).eq("id",a.id);if(s)throw s;return{coupon:a,discountAmount:a.discount_value}}catch(a){throw console.error("Error applying discount coupon:",a),a}}calculateScoutingFee(t,r,a){return r&&a?0:r&&!a||!r&&a?t*.3:t}async recordScoutingFee(t,r,a,s,i){try{const{error:l}=await G.from("scouting_fees").insert({advisor_id:t,amount:r,investor_id:a,startup_id:s,advisory_fee:i,created_at:new Date().toISOString()});if(l)throw l}catch(l){throw console.error("Error recording scouting fee:",l),l}}async getSubscriptionSummary(t){try{const{data:r,error:a}=await G.from("user_subscriptions").select(`
          *,
          subscription_plans (*)
        `).eq("user_id",t).eq("status","active");if(a)throw a;const s=r||[];let i=0;const l=[];for(const u of s){const d=u.subscription_plans,f=d.price*u.startup_count;i+=f,l.push({plan:d,amount:f,dueDate:u.current_period_end})}return{totalDue:i,totalSubscriptions:s.length,activeSubscriptions:s,upcomingPayments:l}}catch(r){throw console.error("Error getting subscription summary:",r),r}}async createDueDiligenceRequest(t,r){try{const{data:s,error:i}=await G.from("due_diligence_requests").insert({user_id:t,startup_id:r,amount:150,currency:"EUR",status:"pending",created_at:new Date().toISOString()}).select().single();if(i)throw i;return s}catch(a){throw console.error("Error creating due diligence request:",a),a}}async processDueDiligencePayment(t,r){try{const{error:a}=await G.from("due_diligence_requests").update({status:"paid",payment_intent_id:r,completed_at:new Date().toISOString()}).eq("id",t);if(a)throw a}catch(a){throw console.error("Error processing due diligence payment:",a),a}}async getUserDueDiligenceRequests(t){try{const{data:r,error:a}=await G.from("due_diligence_requests").select("*").eq("user_id",t).order("created_at",{ascending:!1});if(a)throw a;return r||[]}catch(r){throw console.error("Error getting due diligence requests:",r),r}}}const Kc=new HQ,hs={async uploadFile(e,t,r){try{console.log(`Uploading file ${e.name} to ${t}/${r}`),console.log("File size:",e.size,"bytes"),console.log("File type:",e.type),console.log(`Attempting direct upload to ${t}...`);const a=G.storage.from(t).upload(r,e,{cacheControl:"3600",upsert:!0}),s=new Promise((d,f)=>{setTimeout(()=>f(new Error("Upload timeout after 15 seconds")),15e3)}),{data:i,error:l}=await Promise.race([a,s]);if(l)return console.error("Upload error:",l),l.message.includes("bucket")||l.message.includes("not found")?{success:!1,error:`Storage bucket '${t}' does not exist. Please create it in Supabase Dashboard.`}:l.message.includes("permission")||l.message.includes("unauthorized")||l.message.includes("policy")?{success:!1,error:"Permission denied. Please create storage policies in Supabase Dashboard  Storage  Policies."}:l.message.includes("timeout")?{success:!1,error:"Upload timed out. Please try again."}:{success:!1,error:l.message};console.log("File uploaded successfully, getting public URL...");const{data:u}=G.storage.from(t).getPublicUrl(r);return console.log("File uploaded successfully:",u.publicUrl),{success:!0,url:u.publicUrl}}catch(a){return console.error("Error uploading file:",a),a instanceof Error&&a.message.includes("timeout")?{success:!1,error:"Upload timed out. Please try again."}:{success:!1,error:"Failed to upload file"}}},async uploadVerificationDocument(e,t,r){const a=new Date().toISOString().replace(/[:.]/g,"-"),s=Math.random().toString(36).substring(2,15),i=`${t}/${r}_${a}_${s}_${e.name}`;return this.uploadFile(e,"verification-documents",i)},async uploadStartupDocument(e,t,r){const a=new Date().toISOString().replace(/[:.]/g,"-"),s=`${t}/${r}_${a}_${e.name}`;return this.uploadFile(e,"startup-documents",s)},async uploadPitchDeck(e,t){const r=new Date().toISOString().replace(/[:.]/g,"-"),a=`${t}/pitch-deck_${r}_${e.name}`;return this.uploadFile(e,"pitch-decks",a)},async uploadPitchVideo(e,t){const r=new Date().toISOString().replace(/[:.]/g,"-"),a=`${t}/pitch-video_${r}_${e.name}`;return this.uploadFile(e,"pitch-videos",a)},async uploadFinancialDocument(e,t,r){const a=new Date().toISOString().replace(/[:.]/g,"-"),s=`${t}/financial/${r}_${a}_${e.name}`;return this.uploadFile(e,"financial-documents",s)},async uploadEmployeeContract(e,t,r){const a=new Date().toISOString().replace(/[:.]/g,"-"),s=`${t}/employees/${r}_contract_${a}_${e.name}`;return this.uploadFile(e,"employee-contracts",s)},async deleteFile(e,t){try{const{error:r}=await G.storage.from(e).remove([t]);return r?(console.error("Delete error:",r),{success:!1,error:r.message}):(console.log("File deleted successfully:",t),{success:!0})}catch(r){return console.error("Error deleting file:",r),{success:!1,error:"Failed to delete file"}}},async testStoragePermissions(){try{console.log("Testing storage permissions...");const{data:e,error:t}=await G.storage.from("verification-documents").list("",{limit:1});return t?(console.error("Storage permission test failed:",t),{success:!1,error:t.message,details:t}):(console.log("Storage permissions test passed"),{success:!0,details:{filesCount:(e==null?void 0:e.length)||0}})}catch(e){return console.error("Storage test error:",e),{success:!1,error:"Failed to test storage permissions"}}},async testBucketExists(e){try{console.log(`Testing if bucket ${e} exists...`);const t=G.storage.from(e).list("",{limit:1}),r=new Promise((a,s)=>{setTimeout(()=>s(new Error("Bucket test timeout")),5e3)});return await Promise.race([t,r]),console.log(`Bucket ${e} exists and is accessible`),!0}catch(t){return console.error(`Bucket ${e} test failed:`,t),!1}},async testStorageConnection(){try{console.log("Testing storage connection...");const e=G.storage.listBuckets(),t=new Promise((i,l)=>{setTimeout(()=>l(new Error("Storage test timeout after 10 seconds")),1e4)}),{data:r,error:a}=await Promise.race([e,t]);if(a)return console.error("Storage connection error:",a),{success:!1,error:a.message};const s=(r==null?void 0:r.map(i=>i.name))||[];return console.log("Available buckets:",s),{success:!0,buckets:s}}catch(e){return console.error("Storage test error:",e),e instanceof Error&&e.message.includes("timeout")?{success:!1,error:"Storage test timed out"}:{success:!1,error:"Failed to test storage connection"}}},getFileUrl(e,t){const{data:r}=G.storage.from(e).getPublicUrl(t);return r.publicUrl},async replaceProfilePhoto(e,t,r){try{if(r)try{const l=r.split("/"),u=l.findIndex(d=>d==="storage");if(u!==-1&&l[u+1]==="v1"&&l[u+2]==="object"){const d=l[u+3],f=l.slice(u+4).join("/");await this.deleteFile(d,f)}}catch(l){console.warn("Could not delete old profile photo:",l)}const a=new Date().toISOString().replace(/[:.]/g,"-"),s=Math.random().toString(36).substring(2,15),i=`${t}/profile_photo_${a}_${s}_${e.name}`;return this.uploadFile(e,"verification-documents",i)}catch(a){return console.error("Error replacing profile photo:",a),{success:!1,error:"Failed to replace profile photo"}}},async replaceVerificationDocument(e,t,r,a){try{if(a)try{const s=a.split("/"),i=s.findIndex(l=>l==="storage");if(i!==-1&&s[i+1]==="v1"&&s[i+2]==="object"){const l=s[i+3],u=s.slice(i+4).join("/");await this.deleteFile(l,u)}}catch(s){console.warn("Could not delete old document:",s)}return this.uploadVerificationDocument(e,t,r)}catch(s){return console.error("Error replacing verification document:",s),{success:!1,error:"Failed to replace verification document"}}}},GQ=Object.freeze(Object.defineProperty({__proto__:null,storageService:hs},Symbol.toStringTag,{value:"Module"})),A8=({currentUser:e,isOpen:t,onClose:r,onSave:a})=>{var oe,R,q,se;const[s,i]=_.useState({name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",address:(e==null?void 0:e.address)||"",city:(e==null?void 0:e.city)||"",state:(e==null?void 0:e.state)||"",country:(e==null?void 0:e.country)||"",company:(e==null?void 0:e.company)||"",company_type:(e==null?void 0:e.company_type)||"",government_id:(e==null?void 0:e.government_id)||"",ca_license:(e==null?void 0:e.ca_license)||"",investor_code:(e==null?void 0:e.investor_code)||"",investment_advisor_code:(e==null?void 0:e.investment_advisor_code)||"",investment_advisor_code_entered:(e==null?void 0:e.investment_advisor_code_entered)||"",logo_url:(e==null?void 0:e.logo_url)||"",financial_advisor_license_url:(e==null?void 0:e.financial_advisor_license_url)||""});Wc.useEffect(()=>{console.log(" EditProfileModal - Form data initialized:",{currentUser:e,investment_advisor_code_entered:e==null?void 0:e.investment_advisor_code_entered,formData:s})},[e,s]);const[l,u]=_.useState((e==null?void 0:e.profile_photo_url)||null),[d,f]=_.useState({government_id:e==null?void 0:e.government_id,ca_license:e==null?void 0:e.ca_license,logo_url:e==null?void 0:e.logo_url,financial_advisor_license_url:e==null?void 0:e.financial_advisor_license_url}),[m,g]=_.useState(!1),v=_.useRef(null),x=_.useRef(null),j=_.useRef(null),b=_.useRef(null),A=_.useRef(null),S=_.useRef(null),T=(J,Q)=>{i(ae=>({...ae,[J]:Q}))},E=async J=>{var ae;const Q=(ae=J.target.files)==null?void 0:ae[0];if(Q&&(e!=null&&e.id))try{g(!0);const he=e==null?void 0:e.profile_photo_url,de=await hs.replaceProfilePhoto(Q,e.id,he);u(de.url),i(_e=>({..._e,profile_photo_url:de.url})),console.log(" Profile photo replaced successfully:",de.url),a({...e,profile_photo_url:de.url})}catch(he){console.error(" Error uploading profile photo:",he)}finally{g(!1)}},D=async J=>{var ae;const Q=(ae=J.target.files)==null?void 0:ae[0];if(Q&&(e!=null&&e.id))try{g(!0);const he=d.government_id,de=await hs.replaceVerificationDocument(Q,e.id,"government-id",he);i(_e=>({..._e,government_id:de.url})),f(_e=>({..._e,government_id:de.url})),console.log(" Government ID replaced successfully:",de.url)}catch(he){console.error(" Error uploading government ID:",he)}finally{g(!1)}},L=async J=>{var ae;const Q=(ae=J.target.files)==null?void 0:ae[0];if(Q&&(e!=null&&e.id))try{g(!0);const he=d.ca_license,de=await hs.replaceVerificationDocument(Q,e.id,"ca-license",he);i(_e=>({..._e,ca_license:de.url})),f(_e=>({..._e,ca_license:de.url})),console.log(" CA License replaced successfully:",de.url)}catch(he){console.error(" Error uploading CA license:",he)}finally{g(!1)}},F=async J=>{var ae;const Q=(ae=J.target.files)==null?void 0:ae[0];if(Q&&(e!=null&&e.id))try{g(!0);const he=d.ca_license,de=await hs.replaceVerificationDocument(Q,e.id,"cs-license",he);i(_e=>({..._e,ca_license:de.url})),f(_e=>({..._e,ca_license:de.url})),console.log(" CS License replaced successfully:",de.url)}catch(he){console.error(" Error uploading CS license:",he)}finally{g(!1)}},z=async J=>{var ae;const Q=(ae=J.target.files)==null?void 0:ae[0];if(Q&&(e!=null&&e.id))try{g(!0);const he=d.logo_url,de=await hs.replaceVerificationDocument(Q,e.id,"logo",he);i(_e=>({..._e,logo_url:de.url})),f(_e=>({..._e,logo_url:de.url})),console.log(" Logo replaced successfully:",de.url)}catch(he){console.error(" Error uploading logo:",he)}finally{g(!1)}},M=async J=>{var ae;const Q=(ae=J.target.files)==null?void 0:ae[0];if(Q&&(e!=null&&e.id))try{g(!0);const he=d.financial_advisor_license_url,de=await hs.replaceVerificationDocument(Q,e.id,"financial-license",he);i(_e=>({..._e,financial_advisor_license_url:de.url})),f(_e=>({..._e,financial_advisor_license_url:de.url})),console.log(" Financial Advisor License replaced successfully:",de.url)}catch(he){console.error(" Error uploading financial advisor license:",he)}finally{g(!1)}},U=async()=>{if(!(e!=null&&e.id)){console.error("No user ID available");return}g(!0);try{const J={name:s.name,phone:s.phone,address:s.address,city:s.city,state:s.state,country:s.country,company:s.company,company_type:s.company_type,government_id:s.government_id,ca_license:s.ca_license,profile_photo_url:l||s.profile_photo_url,investment_advisor_code_entered:s.investment_advisor_code_entered,logo_url:s.logo_url,financial_advisor_license_url:s.financial_advisor_license_url},Q=await br.updateProfile(e.id,J);if(Q.error)throw new Error(Q.error);if(e.role==="Startup")try{const{profileService:he}=await Ai(async()=>{const{profileService:Y}=await Promise.resolve().then(()=>P8);return{profileService:Y}},void 0),{data:de,error:_e}=await G.from("startups").select("id").eq("user_id",e.id).single();if(_e)console.error("Error finding startup for user:",_e);else if(de){const Y={};s.investment_advisor_code_entered&&(Y.investmentAdvisorCode=s.investment_advisor_code_entered),s.company_type&&(Y.companyType=s.company_type),Object.keys(Y).length>0&&(await he.updateStartupProfile(de.id,Y),console.log(" Startup profile updated with:",Y))}}catch(he){console.error("Error updating startup profile:",he)}const ae={...J,profilePhoto:l,profile_photo_url:s.profile_photo_url,name:s.name,phone:s.phone,address:s.address,city:s.city,state:s.state,country:s.country,company:s.company,investment_advisor_code_entered:s.investment_advisor_code_entered,logo_url:s.logo_url,financial_advisor_license_url:s.financial_advisor_license_url};await a(ae),r()}catch(J){console.error("Error saving profile:",J)}finally{g(!1)}};return t?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4 lg:p-6",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-xs sm:max-w-lg md:max-w-2xl lg:max-w-4xl xl:max-w-5xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 md:p-6 border-b border-slate-200",children:[n.jsx("h2",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-semibold text-slate-900",children:"Edit Profile"}),n.jsx("button",{onClick:r,className:"p-1.5 sm:p-2 rounded-full hover:bg-slate-100 transition-colors",children:n.jsx(ac,{className:"h-4 w-4 sm:h-5 sm:w-5 text-slate-600"})})]}),n.jsxs("div",{className:"p-3 sm:p-4 md:p-6 space-y-3 sm:space-y-4 md:space-y-6",children:[n.jsxs("div",{className:"flex flex-col items-center space-y-2 sm:space-y-3 md:space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 lg:w-32 lg:h-32 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-white text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold overflow-hidden",children:l?n.jsx("img",{src:l,alt:"Profile",className:"w-full h-full object-cover"}):((R=(oe=e==null?void 0:e.name)==null?void 0:oe.charAt(0))==null?void 0:R.toUpperCase())||((se=(q=e==null?void 0:e.email)==null?void 0:q.charAt(0))==null?void 0:se.toUpperCase())||"U"}),n.jsx("button",{onClick:()=>{var J;return(J=v.current)==null?void 0:J.click()},className:"absolute bottom-0 right-0 w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 lg:w-10 lg:h-10 bg-green-600 rounded-full flex items-center justify-center text-white hover:bg-green-700 transition-colors",children:n.jsx(U6,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 md:h-4 md:w-4 lg:h-5 lg:w-5"})})]}),n.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:E,className:"hidden"}),n.jsx("p",{className:"text-xs sm:text-sm text-slate-500 text-center px-2",children:"Click the camera icon to upload a new photo"})]}),n.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[n.jsx("h3",{className:"text-sm sm:text-base md:text-lg font-medium text-slate-900 border-b border-slate-200 pb-2",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3 md:gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Full Name *"}),n.jsxs("div",{className:"relative",children:[n.jsx(xm,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-slate-400"}),n.jsx("input",{type:"text",value:s.name,onChange:J=>T("name",J.target.value),className:"w-full pl-7 sm:pl-10 pr-2 sm:pr-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Enter your full name"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Email *"}),n.jsxs("div",{className:"relative",children:[n.jsx(ko,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-slate-400"}),n.jsx("input",{type:"email",value:s.email,disabled:!0,className:"w-full pl-7 sm:pl-10 pr-2 sm:pr-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md bg-slate-50 text-slate-500 cursor-not-allowed"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Email cannot be changed"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Phone Number"}),n.jsxs("div",{className:"relative",children:[n.jsx(Gx,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-slate-400"}),n.jsx("input",{type:"tel",value:s.phone,onChange:J=>T("phone",J.target.value),className:"w-full pl-7 sm:pl-10 pr-2 sm:pr-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Enter phone number"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Company/Organization"}),n.jsxs("div",{className:"relative",children:[n.jsx(X0,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-slate-400"}),n.jsx("input",{type:"text",value:s.company,onChange:J=>T("company",J.target.value),className:"w-full pl-7 sm:pl-10 pr-2 sm:pr-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Enter company name"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Company Type"}),n.jsxs("div",{className:"relative",children:[n.jsx(X0,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-slate-400"}),n.jsxs("select",{value:s.company_type,onChange:J=>T("company_type",J.target.value),className:"w-full pl-7 sm:pl-10 pr-2 sm:pr-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white",children:[n.jsx("option",{value:"",children:"Select Company Type"}),n.jsx("option",{value:"C-Corporation",children:"C-Corporation"}),n.jsx("option",{value:"S-Corporation",children:"S-Corporation"}),n.jsx("option",{value:"LLC",children:"LLC"}),n.jsx("option",{value:"Partnership",children:"Partnership"}),n.jsx("option",{value:"Sole Proprietorship",children:"Sole Proprietorship"}),n.jsx("option",{value:"Private Limited",children:"Private Limited"}),n.jsx("option",{value:"Public Limited",children:"Public Limited"}),n.jsx("option",{value:"Other",children:"Other"})]})]})]})]})]}),n.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[n.jsx("h3",{className:"text-sm sm:text-base md:text-lg font-medium text-slate-900 border-b border-slate-200 pb-2",children:"Address Information"}),n.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Street Address"}),n.jsxs("div",{className:"relative",children:[n.jsx(Gp,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-slate-400"}),n.jsx("input",{type:"text",value:s.address,onChange:J=>T("address",J.target.value),className:"w-full pl-7 sm:pl-10 pr-2 sm:pr-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Enter street address"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"City"}),n.jsx("input",{type:"text",value:s.city,onChange:J=>T("city",J.target.value),className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"City"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"State/Province"}),n.jsx("input",{type:"text",value:s.state,onChange:J=>T("state",J.target.value),className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"State"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Country"}),n.jsx("input",{type:"text",value:s.country,onChange:J=>T("country",J.target.value),className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Country"})]})]})]})]}),n.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[n.jsx("h3",{className:"text-sm sm:text-base md:text-lg font-medium text-slate-900 border-b border-slate-200 pb-2",children:"Professional Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3 md:gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Role"}),n.jsxs("div",{className:"relative",children:[n.jsx(Cs,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-slate-400"}),n.jsx("input",{type:"text",value:(e==null?void 0:e.role)==="CA"?"Chartered Accountant":(e==null?void 0:e.role)==="CS"?"Company Secretary":"User",disabled:!0,className:"w-full pl-7 sm:pl-10 pr-2 sm:pr-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md bg-slate-50 text-slate-500 cursor-not-allowed"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Role cannot be changed"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:(e==null?void 0:e.role)==="CA"?"CA Code":"CS Code"}),n.jsxs("div",{className:"relative",children:[n.jsx(X0,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-slate-400"}),n.jsx("input",{type:"text",value:(e==null?void 0:e.ca_code)||(e==null?void 0:e.cs_code)||"N/A",disabled:!0,className:"w-full pl-7 sm:pl-10 pr-2 sm:pr-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md bg-slate-50 text-slate-500 cursor-not-allowed"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Code cannot be changed"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Registration Date"}),n.jsxs("div",{className:"relative",children:[n.jsx(zp,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 sm:h-4 sm:w-4 text-slate-400"}),n.jsx("input",{type:"text",value:e!=null&&e.registration_date?new Date(e.registration_date).toLocaleDateString():"N/A",disabled:!0,className:"w-full pl-7 sm:pl-10 pr-2 sm:pr-3 py-1.5 sm:py-2 text-sm sm:text-base border border-slate-300 rounded-md bg-slate-50 text-slate-500 cursor-not-allowed"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Registration date cannot be changed"})]})]})]})]}),n.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[n.jsx("h3",{className:"text-sm sm:text-base md:text-lg font-medium text-slate-900 border-b border-slate-200 pb-2",children:"Verification Documents"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Government ID (Passport, Driver's License, etc.)"}),n.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.government_id&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-2 sm:p-3 bg-green-50 border border-green-200 rounded-md gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx(Cs,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600 flex-shrink-0"}),n.jsx("div",{className:"min-w-0 flex-1",children:n.jsxs("span",{className:"text-xs sm:text-sm text-green-800 font-medium block",children:["Current Document: ",d.government_id.split("/").pop()||d.government_id]})}),n.jsx("button",{onClick:()=>window.open(d.government_id,"_blank"),className:"text-green-600 hover:text-green-800 text-xs sm:text-sm underline flex-shrink-0",children:"View Document"})]}),n.jsx("button",{onClick:()=>{i(J=>({...J,government_id:""})),f(J=>({...J,government_id:""}))},className:"text-red-500 hover:text-red-700 text-xs sm:text-sm px-2 py-1 rounded hover:bg-red-50 self-end sm:self-center",title:"Remove Document",children:n.jsx(Ma,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx("input",{ref:x,type:"file",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:D,className:"hidden"}),n.jsxs("button",{onClick:()=>{var J;return(J=x.current)==null?void 0:J.click()},className:"px-3 sm:px-4 py-1.5 sm:py-2 border border-slate-300 rounded-md text-xs sm:text-sm text-slate-700 hover:bg-slate-50 transition-colors flex items-center gap-2",children:[n.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),d.government_id?"Replace Document":"Upload Document"]})]})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Accepted formats: PDF, JPG, PNG, DOC, DOCX"})]}),(e==null?void 0:e.role)==="CA"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Copy of CA License"}),n.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.ca_license&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-2 sm:p-3 bg-green-50 border border-green-200 rounded-md gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx(Cs,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600 flex-shrink-0"}),n.jsx("div",{className:"min-w-0 flex-1",children:n.jsxs("span",{className:"text-xs sm:text-sm text-green-800 font-medium block",children:["Current Document: ",d.ca_license.split("/").pop()||d.ca_license]})}),n.jsx("button",{onClick:()=>window.open(d.ca_license,"_blank"),className:"text-green-600 hover:text-green-800 text-xs sm:text-sm underline flex-shrink-0",children:"View Document"})]}),n.jsx("button",{onClick:()=>{i(J=>({...J,ca_license:""})),f(J=>({...J,ca_license:""}))},className:"text-red-500 hover:text-red-700 text-xs sm:text-sm px-2 py-1 rounded hover:bg-red-50 self-end sm:self-center",title:"Remove Document",children:n.jsx(Ma,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx("input",{ref:j,type:"file",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:L,className:"hidden"}),n.jsxs("button",{onClick:()=>{var J;return(J=j.current)==null?void 0:J.click()},className:"px-3 sm:px-4 py-1.5 sm:py-2 border border-slate-300 rounded-md text-xs sm:text-sm text-slate-700 hover:bg-slate-50 transition-colors flex items-center gap-2",children:[n.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),d.ca_license?"Replace Document":"Upload Document"]})]})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Accepted formats: PDF, JPG, PNG, DOC, DOCX"})]}),(e==null?void 0:e.role)==="CS"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Copy of CS License"}),n.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.ca_license&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-2 sm:p-3 bg-green-50 border border-green-200 rounded-md gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx(Cs,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600 flex-shrink-0"}),n.jsx("div",{className:"min-w-0 flex-1",children:n.jsxs("span",{className:"text-xs sm:text-sm text-green-800 font-medium block",children:["Current Document: ",d.ca_license.split("/").pop()||d.ca_license]})}),n.jsx("button",{onClick:()=>window.open(d.ca_license,"_blank"),className:"text-green-600 hover:text-green-800 text-xs sm:text-sm underline flex-shrink-0",children:"View Document"})]}),n.jsx("button",{onClick:()=>{i(J=>({...J,ca_license:""})),f(J=>({...J,ca_license:""}))},className:"text-red-500 hover:text-red-700 text-xs sm:text-sm px-2 py-1 rounded hover:bg-red-50 self-end sm:self-center",title:"Remove Document",children:n.jsx(Ma,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx("input",{ref:b,type:"file",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:F,className:"hidden"}),n.jsxs("button",{onClick:()=>{var J;return(J=b.current)==null?void 0:J.click()},className:"px-3 sm:px-4 py-1.5 sm:py-2 border border-slate-300 rounded-md text-xs sm:text-sm text-slate-700 hover:bg-slate-50 transition-colors flex items-center gap-2",children:[n.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),d.ca_license?"Replace Document":"Upload Document"]})]})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Accepted formats: PDF, JPG, PNG, DOC, DOCX"})]}),(e==null?void 0:e.role)==="Investment Advisor"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Investment Advisor Code"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"text",value:s.investment_advisor_code,onChange:J=>T("investment_advisor_code",J.target.value),className:"flex-1 px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"IA-XXXXXX",readOnly:!0}),n.jsx("span",{className:"text-xs text-slate-500",children:"Auto-generated"})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Your unique Investment Advisor code (read-only)"})]}),((e==null?void 0:e.role)==="Investor"||(e==null?void 0:e.role)==="Startup")&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Investment Advisor Code"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"text",value:s.investment_advisor_code_entered,onChange:J=>{console.log(" Investment Advisor Code changed:",J.target.value),T("investment_advisor_code_entered",J.target.value)},className:"flex-1 px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"IA-XXXXXX"}),n.jsx("span",{className:"text-xs text-slate-500",children:"Optional"})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Enter your Investment Advisor's code to connect with them"}),n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Current value: ",s.investment_advisor_code_entered||"None"]})]}),(e==null?void 0:e.role)==="Investment Advisor"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Company Logo"}),n.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.logo_url&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-2 sm:p-3 bg-green-50 border border-green-200 rounded-md gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx("img",{src:d.logo_url,alt:"Current Logo",className:"h-8 w-8 rounded object-cover"}),n.jsx("div",{className:"min-w-0 flex-1",children:n.jsxs("span",{className:"text-xs sm:text-sm text-green-800 font-medium block",children:["Current Logo: ",d.logo_url.split("/").pop()||"Company Logo"]})}),n.jsx("button",{onClick:()=>window.open(d.logo_url,"_blank"),className:"text-green-600 hover:text-green-800 text-xs sm:text-sm underline flex-shrink-0",children:"View Logo"})]}),n.jsx("button",{onClick:()=>{i(J=>({...J,logo_url:""})),f(J=>({...J,logo_url:""}))},className:"text-red-500 hover:text-red-700 text-xs sm:text-sm px-2 py-1 rounded hover:bg-red-50 self-end sm:self-center",title:"Remove Logo",children:n.jsx(Ma,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx("input",{ref:A,type:"file",accept:".jpg,.jpeg,.png,.svg",onChange:z,className:"hidden"}),n.jsxs("button",{onClick:()=>{var J;return(J=A.current)==null?void 0:J.click()},className:"px-3 sm:px-4 py-1.5 sm:py-2 border border-slate-300 rounded-md text-xs sm:text-sm text-slate-700 hover:bg-slate-50 transition-colors flex items-center gap-2",children:[n.jsx(U6,{className:"h-3 w-3 sm:h-4 sm:w-4"}),d.logo_url?"Replace Logo":"Upload Logo"]})]})]}),n.jsxs("div",{className:"text-xs text-slate-500 mt-1 space-y-1",children:[n.jsx("p",{children:"Accepted formats: JPG, PNG, SVG"}),n.jsxs("div",{className:"bg-blue-50 p-2 rounded border border-blue-200",children:[n.jsx("p",{className:"font-medium text-blue-800 mb-1",children:"Logo Specifications:"}),n.jsxs("ul",{className:"text-blue-700 space-y-0.5",children:[n.jsx("li",{children:" Recommended size: 64x64 pixels (square format)"}),n.jsx("li",{children:" Maximum file size: 2MB"}),n.jsx("li",{children:" Logo will be displayed as 64x64px with white background"})]})]})]})]}),(e==null?void 0:e.role)==="Investment Advisor"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 mb-1 sm:mb-2",children:"Financial Advisor License"}),n.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.financial_advisor_license_url&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-2 sm:p-3 bg-green-50 border border-green-200 rounded-md gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx(Cs,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600 flex-shrink-0"}),n.jsx("div",{className:"min-w-0 flex-1",children:n.jsxs("span",{className:"text-xs sm:text-sm text-green-800 font-medium block",children:["Current Document: ",d.financial_advisor_license_url.split("/").pop()||d.financial_advisor_license_url]})}),n.jsx("button",{onClick:()=>window.open(d.financial_advisor_license_url,"_blank"),className:"text-green-600 hover:text-green-800 text-xs sm:text-sm underline flex-shrink-0",children:"View Document"})]}),n.jsx("button",{onClick:()=>{i(J=>({...J,financial_advisor_license_url:""})),f(J=>({...J,financial_advisor_license_url:""}))},className:"text-red-500 hover:text-red-700 text-xs sm:text-sm px-2 py-1 rounded hover:bg-red-50 self-end sm:self-center",title:"Remove Document",children:n.jsx(Ma,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx("input",{ref:S,type:"file",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:M,className:"hidden"}),n.jsxs("button",{onClick:()=>{var J;return(J=S.current)==null?void 0:J.click()},className:"px-3 sm:px-4 py-1.5 sm:py-2 border border-slate-300 rounded-md text-xs sm:text-sm text-slate-700 hover:bg-slate-50 transition-colors flex items-center gap-2",children:[n.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),d.financial_advisor_license_url?"Replace Document":"Upload Document"]})]})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Upload your financial advisor license (if applicable)"})]})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-end gap-2 sm:gap-3 p-3 sm:p-4 md:p-6 border-t border-slate-200",children:[n.jsx(Oe,{variant:"outline",onClick:r,disabled:m,className:"w-full sm:w-auto text-sm sm:text-base px-3 sm:px-4 py-2 sm:py-2.5",children:"Cancel"}),n.jsx(Oe,{variant:"primary",onClick:U,disabled:m,className:"w-full sm:w-auto flex items-center gap-2 text-sm sm:text-base px-3 sm:px-4 py-2 sm:py-2.5",children:m?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-3 w-3 sm:h-4 sm:w-4 border-b-2 border-white"}),n.jsx("span",{className:"hidden sm:inline",children:"Saving..."}),n.jsx("span",{className:"sm:hidden",children:"Save"})]}):n.jsxs(n.Fragment,{children:[n.jsx(Mv,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Save Changes"}),n.jsx("span",{className:"sm:hidden",children:"Save"})]})})]})]})}):null},KQ={EUR:1,USD:1.08,INR:90,GBP:.85,CAD:1.47,AUD:1.65,SGD:1.45,JPY:160,CNY:7.8,BRL:5.4,MXN:18,ZAR:20,NGN:1600,KES:140,EGP:33,AED:3.97,SAR:4.05,ILS:4},WQ=(e,t)=>{const r=KQ[t]||1;return e*r},YQ=e=>({INR:"en-IN",USD:"en-US",GBP:"en-GB",CAD:"en-CA",AUD:"en-AU",SGD:"en-SG",JPY:"ja-JP",CNY:"zh-CN",BRL:"pt-BR",MXN:"es-MX",ZAR:"en-ZA",NGN:"en-NG",KES:"en-KE",EGP:"ar-EG",AED:"ar-AE",SAR:"ar-SA",ILS:"he-IL",EUR:"en-EU"})[e]||"en-EU",C8=(e,t)=>{const r=WQ(e,t),a=YQ(t);return new Intl.NumberFormat(a,{style:"currency",currency:t,minimumFractionDigits:2}).format(r)};function k8({userId:e,userType:t,country:r,startupCount:a}){const[s,i]=_.useState([]),[l,u]=_.useState(null),[d,f]=_.useState(null),[m,g]=_.useState(""),[v,x]=_.useState(null),[j,b]=_.useState(!1),[A,S]=_.useState(null),[T,E]=_.useState(null),D=nf(r),L=oe=>C8(oe,D);_.useEffect(()=>{F()},[e,t,r]);const F=async()=>{try{b(!0),S(null);const[oe,R]=await Promise.all([Kc.getSubscriptionPlans(t,r),Kc.getUserSubscription(e)]);i(oe||[]),u(R),(!oe||oe.length===0)&&S(`No subscription plans available for ${t} in ${r}. Please contact support.`)}catch(oe){console.error("Error loading subscription data:",oe),S("Failed to load subscription information. Please try again or contact support.")}finally{b(!1)}},z=async()=>{if(m.trim())try{const oe=await Kc.applyDiscountCoupon(m,e);x(oe.coupon),S(null),E(`Coupon applied! ${oe.coupon.discount_type==="percentage"?`${oe.coupon.discount_value}%`:L(oe.coupon.discount_value)} discount`)}catch{S("Invalid or expired coupon code"),x(null)}},M=oe=>{let R=oe.price*a;return v&&(v.discount_type==="percentage"?R=R*(1-v.discount_value/100):R=Math.max(0,R-v.discount_value)),R},U=async oe=>{try{b(!0),S(null);const R=M(oe),q=await Kc.createPaymentIntent(R,oe.currency,e,oe.id),se=await Kc.confirmPayment(q.id,e,oe.id,a);u(se),E("Subscription activated successfully!"),x(null),g("")}catch(R){console.error("Error processing subscription:",R),S("Failed to process subscription. Please try again.")}finally{b(!1)}};return j&&!l?n.jsx(tt,{children:n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):n.jsx(tt,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(wp,{className:"h-6 w-6 text-blue-600"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Subscription Management"})]}),l?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(sa,{className:"h-5 w-5 text-green-600"}),n.jsx("span",{className:"font-medium text-green-800",children:"Active Subscription"})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:l.status})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(rc,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Plan"})]}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:l.plan_id})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(bn,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Startups"})]}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:l.startup_count})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Ki,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Amount"})]}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:L(l.amount)})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(zp,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Started"})]}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:new Date(l.current_period_start).toLocaleDateString()})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Vx,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Next Billing"})]}),n.jsx("p",{className:"text-sm font-semibold text-slate-900",children:new Date(l.current_period_end).toLocaleDateString()})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(sm,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Interval"})]}),n.jsx("p",{className:"text-sm font-semibold text-slate-900 capitalize",children:l.interval})]})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[n.jsxs("h4",{className:"font-medium text-slate-900 mb-3 flex items-center gap-2",children:[n.jsx(Kp,{className:"h-4 w-4"}),"Subscription Management"]}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsxs(Oe,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(sm,{className:"h-4 w-4"}),"Update Plan"]}),n.jsxs(Oe,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(_i,{className:"h-4 w-4"}),"Download Invoice"]}),n.jsxs(Oe,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Kp,{className:"h-4 w-4"}),"Billing Settings"]}),n.jsx(Oe,{variant:"outline",size:"sm",className:"flex items-center gap-2 text-red-600 hover:text-red-700 hover:border-red-300",children:"Cancel Subscription"})]})]})]}):n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(iu,{className:"h-5 w-5 text-yellow-600"}),n.jsx("span",{className:"font-medium text-yellow-800",children:"No Active Subscription"})]}),n.jsxs("p",{className:"text-sm text-yellow-700 mb-3",children:["Subscribe to access premium features for your ",a," startup",a!==1?"s":"","."]}),n.jsx("div",{className:"bg-white rounded-lg p-3 border border-yellow-100",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Current Usage"}),n.jsxs("p",{className:"text-xs text-slate-600",children:[a," startup",a!==1?"s":""," requiring subscription"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[L(a*15),"/month"]}),n.jsxs("p",{className:"text-xs text-slate-600",children:["or ",L(a*120),"/year"]})]})]})})]}),!l&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Choose Your Plan"}),n.jsxs("div",{className:"text-sm text-slate-600",children:[s.length," plan",s.length!==1?"s":""," available"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(oe=>n.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition-all duration-200 ${(d==null?void 0:d.id)===oe.id?"border-blue-500 bg-blue-50 shadow-md":"border-slate-200 hover:border-slate-300 hover:shadow-sm"}`,onClick:()=>f(oe),children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h5",{className:"font-medium text-slate-900",children:oe.name}),oe.interval==="yearly"&&n.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Save 33%"})]}),n.jsx("p",{className:"text-sm text-slate-600",children:oe.description})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-lg font-semibold text-slate-900",children:[L(oe.price),"/",oe.interval==="monthly"?"mo":"yr"]}),n.jsx("div",{className:"text-sm text-slate-500",children:"per startup"})]})]}),n.jsxs("div",{className:"space-y-2 mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(sa,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{children:"Full platform access"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(sa,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{children:"Priority support"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(sa,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{children:"Advanced analytics"})]}),oe.interval==="yearly"&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[n.jsx(sa,{className:"h-4 w-4 text-green-500"}),n.jsxs("span",{children:["2 months free (",L(Math.round(oe.price*.5))," savings)"]})]})]}),a>0&&n.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{children:["Base price for ",a," startup",a!==1?"s":"",":"]}),n.jsx("span",{children:L(oe.price*a)})]}),v&&n.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[n.jsxs("span",{children:["Discount (",v.discount_type==="percentage"?`${v.discount_value}%`:L(v.discount_value),"):"]}),n.jsxs("span",{children:["-",L(oe.price*a-M(oe))]})]}),n.jsxs("div",{className:"flex justify-between text-sm font-semibold border-t border-slate-200 pt-2",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:L(M(oe))})]})]})}),(d==null?void 0:d.id)===oe.id&&n.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[n.jsx(sa,{className:"h-4 w-4"}),n.jsx("span",{children:"Selected plan"})]})})]},oe.id))})]}),!l&&d&&n.jsx("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(N8,{className:"h-4 w-4 text-slate-500"}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Discount Coupon"})]}),v&&n.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Applied"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"Enter coupon code (e.g., WELCOME20)",value:m,onChange:oe=>g(oe.target.value.toUpperCase()),className:"flex-1 px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:v!==null}),n.jsx(Oe,{onClick:z,disabled:!m.trim()||v!==null,size:"sm",variant:"outline",children:v?"Applied":"Apply"})]}),v&&n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-green-800",children:["Coupon applied: ",v.discount_type==="percentage"?`${v.discount_value}% off`:`${L(v.discount_value)} off`]}),n.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Code: ",v.code]})]}),n.jsx("button",{onClick:()=>{x(null),g("")},className:"text-green-600 hover:text-green-800 text-sm underline",children:"Remove"})]})}),n.jsxs("div",{className:"text-xs text-slate-500",children:[n.jsx("p",{children:" Coupon codes are case-insensitive"}),n.jsx("p",{children:" Some coupons may have usage limits or expiration dates"}),n.jsx("p",{children:" Discounts are applied to the total subscription amount"})]})]})}),!l&&d&&n.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[n.jsxs("h4",{className:"font-medium text-slate-900 mb-3 flex items-center gap-2",children:[n.jsx(wp,{className:"h-4 w-4"}),"Payment Summary"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"bg-slate-50 rounded-lg p-3",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Plan:"}),n.jsx("span",{className:"font-medium",children:d.name})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Billing:"}),n.jsx("span",{className:"font-medium capitalize",children:d.interval})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Startups:"}),n.jsx("span",{className:"font-medium",children:a})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Base amount:"}),n.jsx("span",{className:"font-medium",children:L(d.price*a)})]}),v&&n.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[n.jsxs("span",{children:["Discount (",v.discount_type==="percentage"?`${v.discount_value}%`:L(v.discount_value),"):"]}),n.jsxs("span",{children:["-",L(d.price*a-M(d))]})]}),n.jsx("div",{className:"border-t border-slate-200 pt-2",children:n.jsxs("div",{className:"flex justify-between text-base font-semibold",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:L(M(d))})]})})]})}),n.jsxs("div",{className:"text-sm text-slate-600",children:[n.jsx("p",{className:"font-medium mb-2",children:"Accepted payment methods:"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(wp,{className:"h-4 w-4"}),n.jsx("span",{children:"Credit/Debit Card"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(rc,{className:"h-4 w-4"}),n.jsx("span",{children:"Bank Transfer"})]})]})]}),n.jsx(Oe,{onClick:()=>U(d),disabled:j,className:"w-full",size:"lg",children:j?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Processing Payment..."]}):n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(wp,{className:"h-4 w-4"}),"Subscribe for ",L(M(d))]})}),n.jsx("div",{className:"text-xs text-slate-500 text-center",children:n.jsx("p",{children:" Secure payment processing  Cancel anytime  No setup fees"})})]})]}),A&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:n.jsx("p",{className:"text-sm text-red-800",children:A})}),T&&n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:n.jsx("p",{className:"text-sm text-green-800",children:T})}),n.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[n.jsxs("h5",{className:"font-medium text-slate-900 mb-3 flex items-center gap-2",children:[n.jsx(Ki,{className:"h-4 w-4"}),"Pricing Information"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h6",{className:"text-sm font-medium text-slate-800",children:"Subscription Details"}),n.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[n.jsxs("p",{children:[" ",L(15),"/month or ",L(120),"/year per invested startup"]}),n.jsx("p",{children:" Billing based on active startup investments"}),n.jsx("p",{children:" Update subscription anytime"}),n.jsx("p",{children:" Cancel anytime with no fees"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h6",{className:"text-sm font-medium text-slate-800",children:"What's Included"}),n.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[n.jsx("p",{children:" Full platform access"}),n.jsx("p",{children:" Priority customer support"}),n.jsx("p",{children:" Advanced analytics & reporting"}),n.jsx("p",{children:" Real-time notifications"})]})]})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200",children:n.jsxs("div",{className:"text-sm text-slate-600",children:[n.jsxs("p",{className:"font-medium text-slate-800 mb-1",children:[t==="Investor"&&"For Investors:",t==="Startup"&&"For Startups:",t==="Startup Facilitation Center"&&"For Facilitation Centers:",t==="Investment Advisor"&&"For Investment Advisors:"]}),n.jsxs("div",{children:[t==="Investor"&&n.jsx("p",{children:"Pay only for startups you actively invest in. No charges for browsing or due diligence."}),t==="Startup"&&n.jsx("p",{children:"Pay only when you receive investments. Free to use the platform for fundraising."}),t==="Startup Facilitation Center"&&n.jsx("p",{children:"Pay only when you take equity in startups. Limited incubation programs are free."}),t==="Investment Advisor"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"font-medium",children:"Smart Fee Structure - Pay Only When You Succeed:"}),n.jsxs("div",{className:"text-sm space-y-1 ml-2",children:[n.jsxs("p",{children:[" ",n.jsx("span",{className:"font-medium",children:"Both from your network:"})," No scouting fees"]}),n.jsxs("p",{children:[" ",n.jsx("span",{className:"font-medium",children:"Investor from network:"})," 30% from investor"]}),n.jsxs("p",{children:[" ",n.jsx("span",{className:"font-medium",children:"Startup from network:"})," 30% from startup"]})]}),n.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Plus standard subscription fees for platform access."})]})]})]})})]})]})})}function E8({userId:e,userType:t,userCountry:r}){const[a,s]=_.useState(null),[i,l]=_.useState(!0),[u,d]=_.useState(null);_.useEffect(()=>{f()},[e]);const f=async()=>{try{l(!0),d(null);const v=await Kc.getSubscriptionSummary(e);s(v)}catch(v){console.error("Error loading subscription summary:",v),d("Failed to load subscription summary. Please try again or contact support.")}finally{l(!1)}};if(i)return n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(tt,{children:n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}),n.jsx(tt,{children:n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})]});if(u)return n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.jsx(tt,{children:n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-red-600",children:u})})})});if(!a)return null;const m=v=>{const x=r?nf(r):"EUR";return C8(v,x)},g=v=>new Date(v).toLocaleDateString("en-EU",{year:"numeric",month:"short",day:"numeric"});return n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs(tt,{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Total Due"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:m(a.totalDue)}),n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[a.totalSubscriptions," active subscription",a.totalSubscriptions!==1?"s":""]})]}),n.jsx("div",{className:"h-12 w-12 bg-red-100 rounded-full flex items-center justify-center",children:r&&nf(r)==="INR"?n.jsx(YJ,{className:"h-6 w-6 text-red-600"}):r&&nf(r)==="USD"?n.jsx(Ki,{className:"h-6 w-6 text-red-600"}):r&&nf(r)==="GBP"?n.jsx(mQ,{className:"h-6 w-6 text-red-600"}):n.jsx(DJ,{className:"h-6 w-6 text-red-600"})})]}),a.totalDue>0&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Upcoming Payments:"}),n.jsxs("div",{className:"space-y-1",children:[a.upcomingPayments.slice(0,2).map((v,x)=>n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-slate-600",children:v.plan.name}),n.jsx("span",{className:"font-medium",children:m(v.amount)})]},x)),a.upcomingPayments.length>2&&n.jsxs("p",{className:"text-xs text-slate-500",children:["+",a.upcomingPayments.length-2," more payment",a.upcomingPayments.length-2!==1?"s":""]})]})]})]}),n.jsxs(tt,{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Active Subscriptions"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.totalSubscriptions}),n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[a.activeSubscriptions.reduce((v,x)=>v+x.startup_count,0)," total startup",a.activeSubscriptions.reduce((v,x)=>v+x.startup_count,0)!==1?"s":""]})]}),n.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(wp,{className:"h-6 w-6 text-green-600"})})]}),a.activeSubscriptions.length>0&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Subscription Details:"}),n.jsxs("div",{className:"space-y-1",children:[a.activeSubscriptions.slice(0,2).map((v,x)=>n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsxs("span",{className:"text-slate-600",children:[v.startup_count," startup",v.startup_count!==1?"s":""]}),n.jsxs("span",{className:"text-slate-500",children:["Due ",g(v.current_period_end)]})]},x)),a.activeSubscriptions.length>2&&n.jsxs("p",{className:"text-xs text-slate-500",children:["+",a.activeSubscriptions.length-2," more subscription",a.activeSubscriptions.length-2!==1?"s":""]})]})]})]})]})}const fg=({currentUser:e,onBack:t,onProfileUpdate:r,onLogout:a})=>{var T,E,D,L,F,z,M,U,oe;const[s,i]=_.useState(!1),[l,u]=_.useState(e),[d,f]=_.useState(!1);_.useEffect(()=>{e!=null&&e.id&&m()},[]);const m=async()=>{if(e!=null&&e.id)try{f(!0),console.log(" Refreshing profile data for user:",e.id);const R=await br.getCurrentUser();console.log(" Fresh profile data loaded:",R),u(R),r&&JSON.stringify(R)!==JSON.stringify(e)?(console.log(" Profile data changed, updating parent component"),r(R)):console.log(" Profile data unchanged, no parent update needed")}catch(R){console.error(" Error refreshing profile data:",R),u(e)}finally{f(!1)}},[g,v]=_.useState(!1),[x,j]=_.useState(!1),b=[{id:"account",icon:n.jsx(xm,{className:"h-5 w-5"}),title:"Account",description:"Manage your account settings",onClick:()=>i(!0)},{id:"notifications",icon:n.jsx($p,{className:"h-5 w-5"}),title:"Notifications",description:"Manage notification preferences",onClick:()=>v(!0)},{id:"help",icon:n.jsx(am,{className:"h-5 w-5"}),title:"Help & Support",description:"Get help and contact support",onClick:()=>j(!0)}],A=()=>{console.log("Logging out..."),a?a():window.location.href="/logout"},S=async R=>{if(!(e!=null&&e.id)){console.error("No user ID available");return}try{if(console.log("Saving profile:",R),r){const q={...e,...R,profile_photo_url:R.profile_photo_url||e.profile_photo_url,investment_advisor_code_entered:R.investment_advisor_code_entered||e.investment_advisor_code_entered,logo_url:R.logo_url||e.logo_url,name:R.name||e.name,phone:R.phone||e.phone,address:R.address||e.address,city:R.city||e.city,state:R.state||e.state,country:R.country||e.country,company:R.company||e.company,company_type:R.company_type||e.company_type};console.log(" Profile updated, calling onProfileUpdate with:",q),r(q)}console.log("Profile saved successfully!")}catch(q){console.error("Error in handleSaveProfile:",q)}};return n.jsxs("div",{className:"min-h-screen bg-slate-50",children:[n.jsxs("div",{className:"bg-green-600 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 py-3 sm:py-4",children:[n.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-green-700 transition-colors","aria-label":"Go back",children:n.jsx(lc,{className:"h-5 w-5 sm:h-6 sm:w-6"})}),n.jsx("h1",{className:"text-lg sm:text-xl font-semibold",children:"Profile"}),n.jsx("button",{onClick:m,disabled:d,className:"p-2 rounded-full hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Refresh profile data",title:d?"Refreshing...":"Refresh profile data",children:n.jsx(sm,{className:`h-5 w-5 sm:h-6 sm:w-6 ${d?"animate-spin":""}`})})]}),l&&n.jsxs("div",{className:"text-xs text-green-200 text-center pb-2",children:["Last updated: ",new Date().toLocaleTimeString()]}),!1]}),n.jsx("div",{className:"bg-white px-4 sm:px-6 py-6 sm:py-8",children:n.jsxs("div",{className:"flex flex-col items-center text-center",children:[n.jsxs("div",{className:"relative mb-4 sm:mb-6",children:[l!=null&&l.profile_photo_url?n.jsxs("div",{className:"w-20 h-20 sm:w-24 sm:h-24 lg:w-32 lg:h-32 rounded-full overflow-hidden border-4 border-green-600",children:[n.jsx("img",{src:l.profile_photo_url,alt:`${l.name||"User"}'s profile photo`,className:"w-full h-full object-cover",onError:R=>{var se;const q=R.target;q.style.display="none",(se=q.nextElementSibling)==null||se.classList.remove("hidden")}}),n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-white text-xl sm:text-2xl lg:text-3xl font-bold hidden",children:((E=(T=l==null?void 0:l.name)==null?void 0:T.charAt(0))==null?void 0:E.toUpperCase())||((L=(D=l==null?void 0:l.email)==null?void 0:D.charAt(0))==null?void 0:L.toUpperCase())||"U"})]}):n.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 lg:w-32 lg:h-32 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-white text-xl sm:text-2xl lg:text-3xl font-bold",children:((z=(F=l==null?void 0:l.name)==null?void 0:F.charAt(0))==null?void 0:z.toUpperCase())||((U=(M=l==null?void 0:l.email)==null?void 0:M.charAt(0))==null?void 0:U.toUpperCase())||"U"}),(l==null?void 0:l.profile_photo_url)&&n.jsx("div",{className:"text-xs text-gray-500 mt-2 text-center",children:"Debug: Photo URL exists"}),n.jsx("button",{className:"absolute bottom-0 right-0 w-6 h-6 sm:w-8 sm:h-8 lg:w-10 lg:h-10 bg-green-600 rounded-full flex items-center justify-center text-white hover:bg-green-700 transition-colors",onClick:()=>i(!0),children:n.jsx(df,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5"})})]}),n.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-slate-900 mb-2 sm:mb-3",children:(l==null?void 0:l.name)||((oe=l==null?void 0:l.email)==null?void 0:oe.split("@")[0])||"User"}),n.jsx("p",{className:"text-sm sm:text-base text-slate-600 mb-3 sm:mb-4 break-all px-2",children:l==null?void 0:l.email}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 mb-3 sm:mb-4",children:[n.jsx("span",{className:"text-xs sm:text-sm text-slate-500",children:"Role:"}),n.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 sm:px-3 sm:py-1 rounded-full text-xs sm:text-sm font-medium",children:(l==null?void 0:l.role)==="CA"?"Chartered Accountant":(l==null?void 0:l.role)==="CS"?"Company Secretary":"User"})]}),(l==null?void 0:l.company_type)&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 mb-3 sm:mb-4",children:[n.jsx("span",{className:"text-xs sm:text-sm text-slate-500",children:"Company Type:"}),n.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 sm:px-3 sm:py-1 rounded-full text-xs sm:text-sm font-medium",children:l.company_type})]}),((l==null?void 0:l.ca_code)||(l==null?void 0:l.cs_code))&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 mb-4 sm:mb-6",children:[n.jsx("span",{className:"text-xs sm:text-sm text-slate-500",children:(l==null?void 0:l.role)==="CA"?"CA Code:":"CS Code:"}),n.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 sm:px-3 sm:py-1 rounded-md text-xs sm:text-sm font-medium",children:(l==null?void 0:l.ca_code)||(l==null?void 0:l.cs_code)})]}),(l==null?void 0:l.role)==="Investment Advisor"&&(l==null?void 0:l.investment_advisor_code)&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 mb-4 sm:mb-6",children:[n.jsx("span",{className:"text-xs sm:text-sm text-slate-500",children:"Investment Advisor Code:"}),n.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 sm:px-3 sm:py-1 rounded-md text-xs sm:text-sm font-medium",children:l.investment_advisor_code})]}),n.jsx(Oe,{variant:"primary",className:"w-full max-w-xs sm:max-w-sm lg:max-w-md text-sm sm:text-base",onClick:()=>i(!0),children:"Edit Profile"})]})}),((l==null?void 0:l.government_id)||(l==null?void 0:l.ca_license)||(l==null?void 0:l.cs_license)||(l==null?void 0:l.role)==="CS"&&(l==null?void 0:l.ca_license)||(l==null?void 0:l.verification_documents)&&l.verification_documents.length>0)&&n.jsxs("div",{className:"bg-white mt-4 px-4 sm:px-6 py-6",children:[n.jsx("h3",{className:"text-base sm:text-lg font-medium text-slate-900 mb-4",children:"Verification Documents"}),n.jsxs("div",{className:"space-y-3",children:[(l==null?void 0:l.government_id)&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 p-3 bg-green-50 border border-green-200 rounded-md",children:[n.jsx(Cs,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-green-800",children:"Government ID"}),n.jsx("p",{className:"text-xs text-green-600 break-all",children:l.government_id})]}),n.jsx("button",{onClick:()=>window.open(l.government_id,"_blank"),className:"text-green-600 hover:text-green-800 text-sm underline flex-shrink-0",children:"View"})]}),(l==null?void 0:l.ca_license)&&(l==null?void 0:l.role)==="CA"&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[n.jsx(Cs,{className:"h-5 w-5 text-blue-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-blue-800",children:"CA License"}),n.jsx("p",{className:"text-xs text-blue-600 break-all",children:l.ca_license})]}),n.jsx("button",{onClick:()=>window.open(l.ca_license,"_blank"),className:"text-blue-600 hover:text-blue-800 text-sm underline flex-shrink-0",children:"View"})]}),(l==null?void 0:l.role)==="CS"&&((l==null?void 0:l.cs_license)||(l==null?void 0:l.ca_license))&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[n.jsx(Cs,{className:"h-5 w-5 text-blue-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-blue-800",children:"CS License"}),n.jsx("p",{className:"text-xs text-blue-600 break-all",children:l.cs_license||l.ca_license})]}),n.jsx("button",{onClick:()=>window.open(l.cs_license||l.ca_license,"_blank"),className:"text-blue-600 hover:text-blue-800 text-sm underline flex-shrink-0",children:"View"})]})]})]}),l&&["Investor","Startup","Startup Facilitation Center","Investment Advisor"].includes(l.role)&&n.jsx("div",{className:"mt-4",children:n.jsx(E8,{userId:l.id,userType:l.role,userCountry:l.country})}),l&&["Investor","Startup","Startup Facilitation Center","Investment Advisor"].includes(l.role)&&n.jsx("div",{className:"mt-4",children:n.jsx(k8,{userId:l.id,userType:l.role,country:l.country||"Global",startupCount:l.startup_count||0})}),n.jsx("div",{className:"bg-white mt-4",children:b.map((R,q)=>n.jsxs("div",{children:[n.jsxs("button",{onClick:R.onClick,className:"w-full px-4 sm:px-6 py-3 sm:py-4 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[n.jsx("div",{className:"text-slate-600 flex-shrink-0",children:R.icon}),n.jsxs("div",{className:"text-left min-w-0 flex-1",children:[n.jsx("p",{className:"text-sm sm:text-base font-medium text-slate-900",children:R.title}),n.jsx("p",{className:"text-xs sm:text-sm text-slate-500",children:R.description})]})]}),n.jsx("div",{className:"text-slate-400 flex-shrink-0",children:n.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),q<b.length-1&&n.jsx("div",{className:"border-b border-slate-100 mx-4 sm:mx-6"})]},R.id))}),n.jsx("div",{className:"bg-white mt-4",children:n.jsxs("button",{onClick:A,className:"w-full px-4 sm:px-6 py-3 sm:py-4 flex items-center gap-3 text-red-600 hover:bg-red-50 transition-colors",children:[n.jsx(Rv,{className:"h-4 w-4 sm:h-5 sm:w-5"}),n.jsx("span",{className:"text-sm sm:text-base font-medium",children:"Logout"})]})}),n.jsx(A8,{currentUser:l,isOpen:s,onClose:()=>i(!1),onSave:S}),g&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx($p,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Notifications"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"You're all caught up! No new notifications at this time."}),n.jsx(Oe,{variant:"primary",onClick:()=>v(!1),className:"w-full",children:"Got it"})]})})}),x&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx(am,{className:"h-12 w-12 text-blue-500 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Help & Support"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"Our detailed help documentation and support system is coming soon. We're working hard to provide you with the best assistance."}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[n.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Coming Soon Features:"}),n.jsxs("ul",{className:"text-sm text-blue-700 mt-2 space-y-1",children:[n.jsx("li",{children:" Comprehensive FAQ section"}),n.jsx("li",{children:" Live chat support"}),n.jsx("li",{children:" Video tutorials"}),n.jsx("li",{children:" Contact support team"})]})]}),n.jsx(Oe,{variant:"primary",onClick:()=>j(!1),className:"w-full",children:"Understood"})]})})})]})},ou="/assets/logoTMS-BRiW8pqM.svg",XQ=({currentUser:e,className:t="h-7 w-7 sm:h-8 sm:w-8 scale-[5] sm:scale-[5] origin-left cursor-pointer hover:opacity-80 transition-opacity",alt:r="TrackMyStartup",onClick:a,showText:s=!0,textClassName:i="text-2xl sm:text-3xl font-bold text-slate-900"})=>{const[l,u]=_.useState(null),[d,f]=_.useState(!1);return _.useEffect(()=>{(async()=>{if(console.log(" AdvisorAwareLogo: Checking user data:",{hasUser:!!e,role:e==null?void 0:e.role,advisorCodeEntered:e==null?void 0:e.investment_advisor_code_entered}),e!=null&&e.investment_advisor_code_entered&&((e==null?void 0:e.role)==="Investor"||(e==null?void 0:e.role)==="Startup")){f(!0);try{console.log(" AdvisorAwareLogo: Fetching advisor for code:",e.investment_advisor_code_entered);const g=await Zn.getInvestmentAdvisorByCode(e.investment_advisor_code_entered);console.log(" AdvisorAwareLogo: Advisor data received:",g),u(g)}catch(g){console.error("Error fetching advisor info:",g)}finally{f(!1)}}else console.log(" AdvisorAwareLogo: No advisor code or wrong role, using default logo")})()},[e==null?void 0:e.investment_advisor_code_entered,e==null?void 0:e.role]),l!=null&&l.logo_url?n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx("img",{src:l.logo_url,alt:l.name||"Advisor Logo",className:t,onClick:a,onError:m=>{m.currentTarget.style.display="none";const g=m.currentTarget.nextElementSibling;g&&(g.style.display="block")}}),n.jsx("img",{src:ou,alt:r,className:t,onClick:a,style:{display:"none"}}),s&&n.jsxs("div",{children:[n.jsx("h1",{className:i,children:l.name||"Advisor"}),n.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Supported by Track My Startup"})]})]}):n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx("img",{src:ou,alt:r,className:t,onClick:a}),s&&n.jsx("h1",{className:i,children:"TrackMyStartup"})]})},D0=({title:e,value:t,icon:r})=>n.jsx(tt,{className:"flex-1",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:e}),n.jsx("p",{className:"text-2xl font-bold text-slate-800",children:t})]}),n.jsx("div",{className:"p-3 bg-brand-light rounded-full",children:r})]})}),ZQ=({startups:e,newInvestments:t,startupAdditionRequests:r,investmentOffers:a,currentUser:s,onViewStartup:i,onAcceptRequest:l,onMakeOffer:u,onUpdateOffer:d,onCancelOffer:f})=>{const m=Ie=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact"}).format(Ie),g=async Ie=>{console.log("Share button clicked for startup:",Ie.name),console.log("Startup object:",Ie);const Tt=Ie.pitchVideoUrl||"Video not available",mt=`Startup: ${Ie.name||"N/A"}
Sector: ${Ie.sector||"N/A"}
Ask: $${(Ie.investmentValue||0).toLocaleString()} for ${Ie.equityAllocation||0}% equity
Valuation: $${(Ie.currentValuation||0).toLocaleString()}

Pitch Video: ${Tt}`;console.log("Share details:",mt);try{if(navigator.share){console.log("Using native share API");const Et={title:Ie.name||"Startup Pitch",text:mt,url:Tt!=="Video not available"?Tt:void 0};await navigator.share(Et)}else if(navigator.clipboard&&navigator.clipboard.writeText)console.log("Using clipboard API"),await navigator.clipboard.writeText(mt),alert("Startup details copied to clipboard");else{console.log("Using fallback copy method");const Et=document.createElement("textarea");Et.value=mt,document.body.appendChild(Et),Et.select(),document.execCommand("copy"),document.body.removeChild(Et),alert("Startup details copied to clipboard")}}catch(Et){console.error("Share failed",Et),alert("Unable to share. Try copying manually.")}},[v,x]=_.useState(!1),[j,b]=_.useState(null),[A,S]=_.useState("dashboard"),[T,E]=_.useState([]),[D,L]=_.useState([]),[F,z]=_.useState([]),[M,U]=_.useState(null),[oe,R]=_.useState(new Set),[q,se]=_.useState(!1),[J,Q]=_.useState(!1),[ae,he]=_.useState(!1),[de,_e]=_.useState(""),[Y,ye]=_.useState(!1),[P,Z]=_.useState(null),[ce,je]=_.useState(""),[ke,De]=_.useState(""),[Ee,ne]=_.useState(!1),[Ne,le]=_.useState(null),[xe,H]=_.useState(!1),[W,B]=_.useState(new Set),ee=()=>{window.location.href="/logout"},X=Ie=>{B(Tt=>{const mt=new Set(Tt);return mt.has(Ie)?mt.delete(Ie):mt.add(Ie),mt})};_.useEffect(()=>{(async()=>{he(!0);try{const Tt=await Ni.getActiveFundraisingStartups();E(Tt)}catch(Tt){console.error("Error fetching active fundraising startups:",Tt)}finally{he(!1)}})()},[]),_.useEffect(()=>{(async()=>{if(s!=null&&s.id)try{const Tt=await Zn.getRecommendedCoInvestmentOpportunities(s.id);L(Tt)}catch(Tt){console.error("Error loading recommended opportunities:",Tt)}})()},[s==null?void 0:s.id]),_.useEffect(()=>{if(A==="reels"&&T.length>0){const Ie=T.filter(Qt=>Qt.complianceStatus===_t.Compliant),Tt=T.filter(Qt=>Qt.complianceStatus!==_t.Compliant),mt=Qt=>{const hr=[...Qt];for(let pr=hr.length-1;pr>0;pr--){const Be=Math.floor(Math.random()*(pr+1));[hr[pr],hr[Be]]=[hr[Be],hr[pr]]}return hr},Et=mt(Ie),zt=mt(Tt),ur=[];let Rt=0,Vt=0;for(;Rt<Et.length||Vt<zt.length;)Rt<Et.length&&ur.push(Et[Rt++]),Rt<Et.length&&ur.push(Et[Rt++]),Vt<zt.length&&ur.push(zt[Vt++]);z(ur)}},[T,A]);const ge=e.reduce((Ie,Tt)=>Ie+Tt.totalFunding,0),be=e.reduce((Ie,Tt)=>Ie+Tt.totalRevenue,0),$e=e.filter(Ie=>Ie.complianceStatus===_t.Compliant).length,Ze=e.length>0?$e/e.length*100:0,pe=Ie=>{b(Ie),x(!0)},V=Ie=>{if(Ie.preventDefault(),!j)return;const Tt=Ie.currentTarget,mt=Tt.elements.namedItem("offer-amount"),Et=Tt.elements.namedItem("offer-equity"),zt=Tt.elements.namedItem("country"),ur=Number(mt.value),Rt=Number(Et.value),Vt=zt.value,Qt={id:j.id,name:j.name,investmentType:j.investmentType||"Seed",investmentValue:j.investmentValue,equityAllocation:j.equityAllocation,sector:j.sector,totalFunding:j.totalFunding||0,totalRevenue:j.totalRevenue||0,registrationDate:j.registrationDate||new Date().toISOString().split("T")[0],complianceStatus:j.complianceStatus,pitchDeckUrl:j.pitchDeckUrl,pitchVideoUrl:j.pitchVideoUrl};u(Qt,ur,Rt,Vt,j.totalFunding||0),S("offers"),x(!1),b(null)},Le=Ie=>{R(Tt=>{const mt=new Set(Tt);return mt.has(Ie)?mt.delete(Ie):mt.add(Ie),mt})},ft=async Ie=>{if(!(s!=null&&s.id)){alert("Please log in to conduct due diligence");return}try{const Tt=await Kc.createDueDiligenceRequest(s.id,Ie.id.toString()),mt=await Kc.createPaymentIntent(150,"EUR",s.id,"due-diligence");await Kc.processDueDiligencePayment(Tt.id,mt.id),alert("Due diligence payment successful! You now have access to detailed startup information.")}catch(Tt){console.error("Error processing due diligence payment:",Tt),alert("Failed to process due diligence payment. Please try again.")}},kt=Ie=>{Z(Ie),je(Ie.offerAmount.toString()),De(Ie.equityPercentage.toString()),ye(!0)},Mt=()=>{if(!P||!d)return;const Ie=Number(ce),Tt=Number(ke);if(isNaN(Ie)||isNaN(Tt)||Ie<=0||Tt<=0){alert("Please enter valid amounts");return}d(P.id,Ie,Tt),ye(!1),Z(null)},Lt=Ie=>{f&&confirm("Are you sure you want to cancel this offer?")&&f(Ie)},at=Ie=>{switch(Ie){case"pending":return n.jsx(Vx,{className:"h-4 w-4 text-yellow-500"});case"approved":return n.jsx(jJ,{className:"h-4 w-4 text-green-500"});case"rejected":return n.jsx(ac,{className:"h-4 w-4 text-red-500"});default:return n.jsx(Vx,{className:"h-4 w-4 text-gray-500"})}},Nt=Ie=>{switch(Ie){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"pending_investor_advisor_approval":return"bg-blue-100 text-blue-800";case"pending_startup_advisor_approval":return"bg-purple-100 text-purple-800";case"investor_advisor_approved":return"bg-green-100 text-green-800";case"startup_advisor_approved":return"bg-green-100 text-green-800";case"investor_advisor_rejected":return"bg-red-100 text-red-800";case"startup_advisor_rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return xe?(console.log(" InvestorView: Rendering ProfilePage, showProfilePage =",xe),n.jsx(fg,{currentUser:s,onBack:()=>{console.log(" InvestorView: Back button clicked, setting showProfilePage to false"),H(!1)},onProfileUpdate:Ie=>{console.log("Profile updated in InvestorView:",Ie)},onLogout:ee})):n.jsxs("div",{className:"space-y-6",children:[n.jsx(tt,{className:"bg-white border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between py-6 px-6",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"relative profile-menu",children:n.jsx("button",{onClick:()=>{console.log(" InvestorView: Menu button clicked, setting showProfilePage to true"),H(!0)},className:"p-2 rounded-full hover:bg-slate-100 transition-colors","aria-label":"Profile menu",children:n.jsx(Lv,{className:"h-6 w-6 text-slate-600"})})}),n.jsx("div",{children:n.jsx(XQ,{currentUser:s,showText:!0,textClassName:"text-xl font-semibold text-gray-800"})})]}),n.jsxs("div",{className:"flex items-center space-x-6",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Investor Code:"}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsx("span",{className:"px-3 py-2 bg-blue-100 text-blue-800 rounded-lg font-mono text-sm font-semibold",children:(s==null?void 0:s.investor_code)||(s==null?void 0:s.investorCode)||"INV-XXXXXX"})})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(bn,{className:"h-6 w-6 text-purple-600"}),n.jsx("span",{className:"text-gray-700 font-medium",children:"Investor"})]})]})]})}),n.jsx("div",{className:"border-b border-slate-200",children:n.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[n.jsxs("button",{onClick:()=>S("dashboard"),className:`${A==="dashboard"?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:[n.jsx(K_,{className:"h-5 w-5"}),"Dashboard"]}),n.jsxs("button",{onClick:()=>S("reels"),className:`${A==="reels"?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:[n.jsx(Jl,{className:"h-5 w-5"}),"Discover Pitches"]}),n.jsxs("button",{onClick:()=>S("offers"),className:`${A==="offers"?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:[n.jsx(Ki,{className:"h-5 w-5"}),"Offers"]}),n.jsxs("button",{onClick:()=>S("recommendations"),className:`${A==="recommendations"?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:[n.jsx($1,{className:"h-5 w-5"}),"Recommendations"]})]})}),A==="dashboard"&&n.jsxs("div",{className:"space-y-8 animate-fade-in",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx(D0,{title:"Total Funding",value:m(ge),icon:n.jsx(Ki,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(D0,{title:"Total Revenue",value:m(be),icon:n.jsx(xd,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(D0,{title:"Compliance Rate",value:`${Ze.toFixed(1)}%`,icon:n.jsx(CQ,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(D0,{title:"My Startups",value:`${e.length}`,icon:n.jsx(bn,{className:"h-6 w-6 text-brand-primary"})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Approve Startup Requests"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Startup Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Value"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Equity"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status / Action"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-slate-200",children:[r.filter(Ie=>{const Tt=Ie==null?void 0:Ie.investor_code,mt=(s==null?void 0:s.investorCode)||(s==null?void 0:s.investor_code);return(Ie.status||"pending")==="pending"&&Tt&&Tt===mt}).map(Ie=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:Ie.name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:m(Ie.investmentValue)}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:[Ie.equityAllocation,"%"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs(Oe,{size:"sm",onClick:()=>l(Ie.id),children:[n.jsx(_8,{className:"mr-2 h-4 w-4"})," Approve"]})})]},Ie.id)),r.filter(Ie=>{const Tt=Ie==null?void 0:Ie.investor_code,mt=(s==null?void 0:s.investorCode)||(s==null?void 0:s.investor_code);return(Ie.status||"pending")==="pending"&&Tt&&Tt===mt}).length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"text-center py-8 text-slate-500",children:"No pending startup requests."})})]})]})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"My Startups"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Startup Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Current Valuation"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Compliance Status"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:e.map(Ie=>n.jsxs("tr",{children:[n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsx("div",{className:"text-sm font-medium text-slate-900",children:Ie.name}),n.jsx("div",{className:"text-xs text-slate-500",children:Ie.sector})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:m(Ie.currentValuation)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx(Jx,{status:Ie.complianceStatus})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>i(Ie),children:[n.jsx(gl,{className:"mr-2 h-4 w-4"})," View"]}),n.jsx("button",{onClick:()=>X(Ie.id),className:`px-3 py-1 rounded-full text-xs font-medium transition-colors duration-200 ${W.has(Ie.id)?"bg-green-100 text-green-800 hover:bg-green-200":"bg-blue-100 text-blue-800 hover:bg-blue-200"}`,children:W.has(Ie.id)?"Co-investment Listed":"Seek Co-Investors"})]})})]},Ie.id))})]})})]})]}),n.jsx("div",{className:"space-y-8",children:n.jsx(w8,{data:e})})]})]}),A==="reels"&&n.jsxs("div",{className:"animate-fade-in max-w-4xl mx-auto w-full",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-slate-800 mb-2",children:"Discover Pitches"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Watch startup videos and explore opportunities"})]}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(gd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search startups by name or sector...",value:de,onChange:Ie=>_e(Ie.target.value),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary text-sm"})]})}),n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-100 gap-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("button",{onClick:()=>{Q(!1),se(!1)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${!J&&!q?"bg-blue-600 text-white shadow-blue-200":"bg-white text-slate-600 hover:bg-blue-50 hover:text-blue-600 border border-slate-200"}`,children:[n.jsx(Jl,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"All"})]}),n.jsxs("button",{onClick:()=>{Q(!0),se(!1)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${J&&!q?"bg-green-600 text-white shadow-green-200":"bg-white text-slate-600 hover:bg-green-50 hover:text-green-600 border border-slate-200"}`,children:[n.jsx(sa,{className:`h-3 w-3 sm:h-4 sm:w-4 ${J&&!q?"fill-current":""}`}),n.jsx("span",{className:"hidden sm:inline",children:"Verified"})]}),n.jsxs("button",{onClick:()=>{Q(!1),se(!0)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${q?"bg-red-600 text-white shadow-red-200":"bg-white text-slate-600 hover:bg-red-50 hover:text-red-600 border border-slate-200"}`,children:[n.jsx(nm,{className:`h-3 w-3 sm:h-4 sm:w-4 ${q?"fill-current":""}`}),n.jsx("span",{className:"hidden sm:inline",children:"Favorites"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:[T.length," active pitches"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[n.jsx(Jl,{className:"h-4 w-4 sm:h-5 sm:w-5"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Pitch Reels"})]})]})]}),n.jsx("div",{className:"space-y-8",children:ae?n.jsx(tt,{className:"text-center py-20",children:n.jsxs("div",{className:"max-w-sm mx-auto",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:"Loading Pitches..."}),n.jsx("p",{className:"text-slate-500",children:"Fetching active fundraising startups"})]})}):(()=>{let Tt=A==="reels"?F:T;if(de.trim()&&(Tt=Tt.filter(mt=>mt.name.toLowerCase().includes(de.toLowerCase())||mt.sector.toLowerCase().includes(de.toLowerCase()))),J&&(Tt=Tt.filter(mt=>mt.isStartupNationValidated)),q&&(Tt=Tt.filter(mt=>oe.has(mt.id))),Tt.length===0){const mt=F.every(Et=>a.some(zt=>zt.startupName===Et.name&&zt.status==="pending"));return n.jsx(tt,{className:"text-center py-20",children:n.jsxs("div",{className:"max-w-sm mx-auto",children:[n.jsx(Jl,{className:"h-16 w-16 text-slate-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:de.trim()?"No Matching Startups":J?"No Verified Startups":q?"No Favorited Pitches":mt?"All Offers Submitted!":"No Active Fundraising"}),n.jsx("p",{className:"text-slate-500",children:de.trim()?"No startups found matching your search. Try adjusting your search terms or filters.":J?"No Startup Nation verified startups are currently fundraising. Try removing the verification filter or check back later.":q?"Start favoriting pitches to see them here.":mt?"You've submitted offers for all available startups. Check your Dashboard  Recent Activity to manage your offers.":"No startups are currently fundraising. Check back later for new opportunities."}),mt&&n.jsx(Oe,{onClick:()=>S("dashboard"),className:"mt-4",children:"Go to Dashboard"})]})})}return Tt.map(mt=>{const Et=Ni.getYoutubeEmbedUrl(mt.pitchVideoUrl);return n.jsxs(tt,{className:"!p-0 overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border-0 bg-white",children:[n.jsx("div",{className:"relative w-full aspect-[16/9] bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:Et?M===mt.id?n.jsxs("div",{className:"relative w-full h-full",children:[n.jsx("iframe",{src:Et,title:`Pitch video for ${mt.name}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full"}),n.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 bg-black/70 text-white rounded-full p-2 hover:bg-black/90 transition-all duration-200 backdrop-blur-sm",children:""})]}):n.jsxs("div",{className:"relative w-full h-full group cursor-pointer",onClick:()=>U(mt.id),children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/40"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"w-20 h-20 bg-red-600 rounded-full flex items-center justify-center shadow-2xl transform group-hover:scale-110 transition-all duration-300 group-hover:shadow-red-500/50",children:n.jsx("svg",{className:"w-10 h-10 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M8 5v14l11-7z"})})})}),n.jsx("div",{className:"absolute bottom-4 left-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:n.jsx("p",{className:"text-sm font-medium",children:"Click to play"})})]}):n.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Zc,{className:"h-16 w-16 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No video available"})]})})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:mt.name}),n.jsx("p",{className:"text-slate-600 font-medium",children:mt.sector})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[mt.isStartupNationValidated&&n.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-3 py-1.5 rounded-full text-xs font-medium shadow-sm",children:[n.jsx(sa,{className:"h-3 w-3"}),"Verified"]}),a.find(ur=>ur.startupName===mt.name&&ur.status==="pending")?n.jsxs("div",{className:"flex items-center gap-1 bg-blue-100 text-blue-700 px-2 py-1 rounded-full text-xs font-medium",children:[n.jsx(sa,{className:"h-3 w-3"}),"Offer Submitted"]}):null]})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[n.jsx(Oe,{size:"sm",variant:"secondary",className:`!rounded-full !p-3 transition-all duration-200 ${oe.has(mt.id)?"bg-gradient-to-r from-red-500 to-pink-600 text-white shadow-lg shadow-red-200":"hover:bg-red-50 hover:text-red-600 border border-slate-200"}`,onClick:()=>Le(mt.id),children:n.jsx(nm,{className:`h-5 w-5 ${oe.has(mt.id)?"fill-current":""}`})}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>g(mt),className:"!rounded-full !p-3 hover:bg-blue-50 hover:text-blue-600 hover:border-blue-300 transition-all duration-200 border border-slate-200",children:n.jsx(Iv,{className:"h-5 w-5"})}),mt.pitchDeckUrl&&mt.pitchDeckUrl!=="#"&&n.jsx("a",{href:mt.pitchDeckUrl,target:"_blank",rel:"noopener noreferrer",className:"flex-1",children:n.jsxs(Oe,{size:"sm",variant:"secondary",className:"w-full hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 border border-slate-200",children:[n.jsx(La,{className:"h-4 w-4 mr-2"})," View Deck"]})}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>ft(mt),className:"flex-1 hover:bg-purple-50 hover:text-purple-600 hover:border-purple-300 transition-all duration-200 border border-slate-200",children:[n.jsx(gd,{className:"h-4 w-4 mr-2"})," Due Diligence (150)"]}),a.find(ur=>ur.startupName===mt.name&&ur.status==="pending")?n.jsxs("div",{className:"flex-1",children:[n.jsxs(Oe,{size:"sm",variant:"secondary",disabled:!0,className:"w-full bg-slate-100 text-slate-500 cursor-not-allowed border border-slate-200",title:"View and edit your offer in the Dashboard  Recent Activity",children:[n.jsx(sa,{className:"h-4 w-4 mr-2"})," Offer Submitted"]}),n.jsx("div",{className:"text-xs text-slate-400 mt-1 text-center",children:"Edit in Dashboard"})]}):n.jsxs(Oe,{size:"sm",variant:"primary",onClick:()=>pe(mt),className:"flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg shadow-blue-200",children:[n.jsx(Ki,{className:"h-4 w-4 mr-2"})," Make Offer"]})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 px-6 py-4 flex justify-between items-center border-t border-slate-200",children:[n.jsxs("div",{className:"text-base",children:[n.jsx("span",{className:"font-semibold text-slate-800",children:"Ask:"})," ",Ni.formatCurrency(mt.investmentValue)," for ",n.jsxs("span",{className:"font-semibold text-blue-600",children:[mt.equityAllocation,"%"]})," equity"]}),mt.complianceStatus===_t.Compliant&&n.jsxs("div",{className:"flex items-center gap-1 text-green-600",title:"This startup has been verified by Startup Nation",children:[n.jsx(sa,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs font-semibold",children:"Verified"})]})]})]},mt.id)})})()})]}),A==="offers"&&n.jsx("div",{className:"space-y-6 animate-fade-in",children:n.jsxs(tt,{children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-700 flex items-center gap-2",children:[n.jsx(Ki,{className:"h-5 w-5 text-blue-600"}),"Your Offers",n.jsxs("span",{className:"text-sm font-normal text-slate-500",children:["(",a.length," total)"]})]}),n.jsx("div",{className:"space-y-4",children:a.length>0?a.map(Ie=>n.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[at(Ie.status),n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium text-slate-900 truncate",children:["Offer for ",Ie.startupName]}),n.jsxs("div",{className:"text-sm text-slate-500",children:[m(Ie.offerAmount),"  ",Ie.equityPercentage,"% equity"]}),n.jsxs("div",{className:"text-xs text-slate-400",children:["Submitted on ",new Date(Ie.createdAt).toLocaleDateString()]}),Ie.status==="approved"&&n.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"Admin approved; awaiting startup approval"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Nt(Ie.status)}`,children:Ie.status.replace(/_/g," ").replace(/\b\w/g,Tt=>Tt.toUpperCase())}),Ie.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>kt(Ie),children:[n.jsx(Xl,{className:"h-3 w-3 mr-1"}),"Edit"]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>Lt(Ie.id),children:[n.jsx(ac,{className:"h-3 w-3 mr-1"}),"Cancel"]})]}),(Ie.status==="accepted"||Ie.status==="completed")&&n.jsxs("div",{className:"flex gap-2",children:[Ie.contact_details_revealed?n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>{alert("Contact details: [Startup contact information will be displayed here]")},children:"View Contact Details"}):n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>alert("Contact details will be revealed once the investment advisor approves or if no advisor is assigned."),children:"Contact Details Pending"}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>alert("Our team will contact you soon"),children:"Next Steps"})]})]})]}),(()=>{const Tt=T.find(zt=>Ie.startup&&zt.id===Ie.startup.id||zt.name===Ie.startupName),mt=Tt==null?void 0:Tt.pitchDeckUrl,Et=Ni.getYoutubeEmbedUrl(Tt==null?void 0:Tt.pitchVideoUrl);return!mt&&!Et?null:n.jsxs("div",{className:"mt-3 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[mt&&mt!=="#"&&n.jsx("a",{href:mt,target:"_blank",rel:"noopener noreferrer",children:n.jsxs(Oe,{size:"sm",variant:"secondary",children:[n.jsx(La,{className:"h-4 w-4 mr-2"})," View Deck"]})}),Et&&n.jsxs(Oe,{size:"sm",variant:"secondary",onClick:()=>le(Ne===Ie.id?null:Ie.id),children:[n.jsx(Zc,{className:"h-4 w-4 mr-2"})," ",Ne===Ie.id?"Hide Video":"Watch Video"]})]}),Et&&Ne===Ie.id&&n.jsx("div",{className:"relative w-full aspect-[16/9] rounded-lg overflow-hidden bg-black/5",children:n.jsx("iframe",{src:Et,title:`Pitch video for ${Ie.startupName}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full"})})]})})()]},Ie.id)):n.jsx("div",{className:"text-sm text-slate-500 text-center py-10",children:"You have not submitted any offers yet."})})]})}),A==="recommendations"&&n.jsxs("div",{className:"space-y-6 animate-fade-in",children:[n.jsxs(tt,{children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-700 flex items-center gap-2",children:[n.jsx($1,{className:"h-5 w-5 text-purple-600"}),"Recommended Startups",n.jsx("span",{className:"text-sm font-normal text-slate-500",children:"(Recommended by your Investment Advisor)"})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx($1,{className:"h-16 w-16 text-slate-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"No Recommendations Yet"}),n.jsx("p",{className:"text-slate-500",children:"When your Investment Advisor recommends startups to you, they will appear here."})]})})]}),n.jsxs(tt,{children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-700 flex items-center gap-2",children:[n.jsx("svg",{className:"h-5 w-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Co-Investment Opportunities",n.jsx("span",{className:"text-sm font-normal text-slate-500",children:s!=null&&s.investment_advisor_code?"(Approved by your Investment Advisor)":"(All available opportunities)"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Startup Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Sector"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Investment Amount"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Recommended By"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Date Recommended"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:D.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-slate-500",children:"No co-investment opportunities available yet"})}):D.map(Ie=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:Ie.startup_name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:Ie.sector}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:Ie.compliance_status}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:m(Ie.investment_amount)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:Ie.advisor_name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(Ie.recommended_at).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{alert("Due diligence request functionality coming soon!")},className:"px-3 py-1 text-xs bg-blue-100 text-blue-800 rounded-full hover:bg-blue-200",children:"Due Diligence"}),n.jsx("button",{onClick:()=>{b({id:Ie.opportunity_id,name:Ie.startup_name,investmentValue:Ie.investment_amount,equityAllocation:Ie.equity_percentage,totalFunding:Ie.investment_amount}),x(!0)},className:"px-3 py-1 text-xs bg-green-100 text-green-800 rounded-full hover:bg-green-200",children:"Make Offer"})]})})]},Ie.recommendation_id))})]})})]})]}),n.jsx(Bn,{isOpen:v,onClose:()=>x(!1),title:`Make an Offer for ${j==null?void 0:j.name}`,children:n.jsxs("form",{onSubmit:V,className:"space-y-4",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["You are making an offer for ",n.jsx("span",{className:"font-semibold",children:j==null?void 0:j.name}),". The current ask is ",n.jsx("span",{className:"font-semibold",children:Ni.formatCurrency((j==null?void 0:j.investmentValue)||0)})," for ",n.jsxs("span",{className:"font-semibold",children:[j==null?void 0:j.equityAllocation,"%"]})," equity."]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(At,{label:"Your Investment Offer (USD)",id:"offer-amount",name:"offer-amount",type:"number",required:!0}),n.jsx(At,{label:"Equity Requested (%)",id:"offer-equity",name:"offer-equity",type:"number",step:"0.1",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-slate-700 mb-1",children:"Country"}),n.jsxs("select",{id:"country",name:"country",required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"Select Country"}),n.jsx("option",{value:"United States",children:"United States"}),n.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),n.jsx("option",{value:"India",children:"India"}),n.jsx("option",{value:"Canada",children:"Canada"}),n.jsx("option",{value:"Australia",children:"Australia"}),n.jsx("option",{value:"Germany",children:"Germany"}),n.jsx("option",{value:"France",children:"France"}),n.jsx("option",{value:"Singapore",children:"Singapore"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Scouting Fee Information"}),n.jsx("p",{className:"text-xs text-blue-700",children:"When you submit this offer, you will be required to pay a startup scouting fee based on your country and the startup's funding amount. The fee will be calculated automatically and displayed before payment confirmation."})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[n.jsx(Oe,{type:"button",variant:"secondary",onClick:()=>x(!1),children:"Cancel"}),n.jsx(Oe,{type:"submit",children:"Submit Offer & Pay Scouting Fee"})]})]})}),n.jsx(Bn,{isOpen:Y,onClose:()=>ye(!1),title:`Edit Offer for ${P==null?void 0:P.startupName}`,children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["Update your offer for ",n.jsx("span",{className:"font-semibold",children:P==null?void 0:P.startupName}),"."]}),n.jsx(At,{label:"Your Investment Offer (USD)",id:"edit-offer-amount",name:"edit-offer-amount",type:"number",value:ce,onChange:Ie=>je(Ie.target.value),required:!0}),n.jsx(At,{label:"Equity Requested (%)",id:"edit-offer-equity",name:"edit-offer-equity",type:"number",step:"0.1",value:ke,onChange:Ie=>De(Ie.target.value),required:!0}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[n.jsx(Oe,{type:"button",variant:"secondary",onClick:()=>ye(!1),children:"Cancel"}),n.jsx(Oe,{onClick:Mt,children:"Update Offer"})]})]})}),n.jsx("style",{children:`
            @keyframes fade-in {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            .animate-fade-in {
                animation: fade-in 0.5s ease-in-out forwards;
            }
            /* Custom scrollbar for webkit browsers */
            .snap-y {
                scrollbar-width: none; /* For Firefox */
            }
            .snap-y::-webkit-scrollbar {
                display: none; /* For Chrome, Safari, and Opera */
            }
        `})]})};function V6(e){if(!e)return{isValid:!1,error:"Investment date is required"};const t=new Date(e),r=new Date;if(r.setHours(23,59,59,999),isNaN(t.getTime()))return{isValid:!1,error:"Invalid date format"};if(t>r)return{isValid:!1,error:"Investment date cannot be in the future"};const a=new Date;return a.setFullYear(r.getFullYear()-50),t<a?{isValid:!1,error:"Investment date cannot be more than 50 years in the past"}:{isValid:!0}}function H6(e){if(!e)return{isValid:!1,error:"Financial record date is required"};const t=new Date(e),r=new Date;if(r.setHours(23,59,59,999),isNaN(t.getTime()))return{isValid:!1,error:"Invalid date format"};if(t>r)return{isValid:!1,error:"Financial record date cannot be in the future"};const a=new Date;return a.setFullYear(r.getFullYear()-50),t<a?{isValid:!1,error:"Financial record date cannot be more than 50 years in the past"}:{isValid:!0}}function JQ(e){if(!e)return{isValid:!1,error:"Valuation date is required"};const t=new Date(e),r=new Date;if(r.setHours(23,59,59,999),isNaN(t.getTime()))return{isValid:!1,error:"Invalid date format"};if(t>r)return{isValid:!1,error:"Valuation date cannot be in the future"};const a=new Date;return a.setFullYear(r.getFullYear()-50),t<a?{isValid:!1,error:"Valuation date cannot be more than 50 years in the past"}:{isValid:!0}}function G6(e){if(!e)return{isValid:!1,error:"Joining date is required"};const t=new Date(e),r=new Date;if(r.setHours(23,59,59,999),isNaN(t.getTime()))return{isValid:!1,error:"Invalid date format"};if(t>r)return{isValid:!1,error:"Joining date cannot be in the future"};const a=new Date;return a.setFullYear(r.getFullYear()-50),t<a?{isValid:!1,error:"Joining date cannot be more than 50 years in the past"}:{isValid:!0}}function K6(){return new Date().toISOString().split("T")[0]}class QQ{async addFinancialRecord(t){const r=H6(t.date);if(!r.isValid)throw new Error(r.error);const{data:a,error:s}=await G.from("financial_records").insert({startup_id:t.startup_id,record_type:t.record_type,date:t.date,entity:t.entity,description:t.description,vertical:t.vertical,amount:t.amount,funding_source:t.funding_source,cogs:t.cogs,attachment_url:t.attachment_url}).select().single();if(s)throw s;return a}async updateFinancialRecord(t,r){if(r.date!==void 0){const i=H6(r.date);if(!i.isValid)throw new Error(i.error)}const{data:a,error:s}=await G.from("financial_records").update(r).eq("id",t).select().single();if(s)throw s;return a}async deleteFinancialRecord(t){try{const r=await this.getFinancialRecord(t);if(r&&r.attachment_url){const s=r.attachment_url.split("/"),i=s[s.length-1],u=`${r.startup_id.toString()}/${i}`,{storageService:d}=await Ai(async()=>{const{storageService:f}=await Promise.resolve().then(()=>GQ);return{storageService:f}},void 0);await d.deleteFile("financial-documents",u),console.log(" Deleted attachment file:",u)}const{error:a}=await G.from("financial_records").delete().eq("id",t);if(a)throw a;console.log(" Deleted financial record:",t)}catch(r){throw console.error("Error deleting financial record:",r),r}}async getFinancialRecord(t){const{data:r,error:a}=await G.from("financial_records").select("*").eq("id",t).single();if(a&&a.code!=="PGRST116")throw a;return r}async getFinancialRecords(t,r){let a=G.from("financial_records").select("*").eq("startup_id",t).order("date",{ascending:!1});r!=null&&r.entity&&r.entity!=="all"&&(a=a.eq("entity",r.entity)),r!=null&&r.year&&r.year!=="all"&&(a=a.gte("date",`${r.year}-01-01`).lt("date",`${r.year+1}-01-01`)),r!=null&&r.record_type&&(a=a.eq("record_type",r.record_type));const{data:s,error:i}=await a;if(i)throw i;return s||[]}async getExpenses(t,r){return(await this.getFinancialRecords(t,{...r,record_type:"expense"})).map(s=>({id:s.id,date:s.date,entity:s.entity,description:s.description||"",vertical:s.vertical,amount:s.amount,fundingSource:s.funding_source||"",attachmentUrl:s.attachment_url}))}async getRevenues(t,r){return(await this.getFinancialRecords(t,{...r,record_type:"revenue"})).map(s=>({id:s.id,date:s.date,entity:s.entity,vertical:s.vertical,earnings:s.amount,cogs:s.cogs||0,attachmentUrl:s.attachment_url}))}async getMonthlyFinancialData(t,r){try{const{data:a,error:s}=await G.rpc("get_monthly_financial_data",{p_startup_id:t,p_year:r});return s?(console.error("Error calling get_monthly_financial_data:",s),this.calculateMonthlyDataManually(t,r)):(a||[]).map(i=>({month_name:i.month_name,revenue:parseFloat(i.revenue||"0"),expenses:parseFloat(i.expenses||"0")}))}catch(a){return console.error("Error in getMonthlyFinancialData:",a),this.calculateMonthlyDataManually(t,r)}}async getRevenueByVertical(t,r){try{const{data:a,error:s}=await G.rpc("get_revenue_by_vertical",{p_startup_id:t,p_year:r});return s?(console.error("Error calling get_revenue_by_vertical:",s),this.calculateRevenueByVerticalManually(t,r)):(a||[]).map(i=>({name:i.vertical_name,value:parseFloat(i.total_revenue||"0")}))}catch(a){return console.error("Error in getRevenueByVertical:",a),this.calculateRevenueByVerticalManually(t,r)}}async getExpensesByVertical(t,r){try{const{data:a,error:s}=await G.rpc("get_expenses_by_vertical",{p_startup_id:t,p_year:r});return s?(console.error("Error calling get_expenses_by_vertical:",s),this.calculateExpensesByVerticalManually(t,r)):(a||[]).map(i=>({name:i.vertical_name,value:parseFloat(i.total_expenses||"0")}))}catch(a){return console.error("Error in getExpensesByVertical:",a),this.calculateExpensesByVerticalManually(t,r)}}async getFinancialSummary(t){try{const{data:r,error:a}=await G.rpc("get_startup_financial_summary",{p_startup_id:t});if(a)return console.error("Error calling get_startup_financial_summary:",a),this.calculateFinancialSummaryManually(t);const s=r==null?void 0:r[0];return{total_funding:parseFloat((s==null?void 0:s.total_funding)||"0"),total_revenue:parseFloat((s==null?void 0:s.total_revenue)||"0"),total_expenses:parseFloat((s==null?void 0:s.total_expenses)||"0"),available_funds:parseFloat((s==null?void 0:s.available_funds)||"0")}}catch(r){return console.error("Error in getFinancialSummary:",r),this.calculateFinancialSummaryManually(t)}}async calculateMonthlyDataManually(t,r){const a=await this.getFinancialRecords(t,{year:r}),s={};for(let i=1;i<=12;i++){const l=new Date(r,i-1,1).toLocaleDateString("en-US",{month:"short"});s[l]={revenue:0,expenses:0}}return a.forEach(i=>{const l=new Date(i.date).toLocaleDateString("en-US",{month:"short"});i.record_type==="revenue"?s[l].revenue+=i.amount:s[l].expenses+=i.amount}),Object.entries(s).map(([i,l])=>({month_name:i,revenue:l.revenue,expenses:l.expenses}))}async calculateRevenueByVerticalManually(t,r){const a=await this.getFinancialRecords(t,{year:r,record_type:"revenue"}),s={};return a.forEach(i=>{s[i.vertical]=(s[i.vertical]||0)+i.amount}),Object.entries(s).map(([i,l])=>({name:i,value:l})).sort((i,l)=>l.value-i.value)}async calculateExpensesByVerticalManually(t,r){const a=await this.getFinancialRecords(t,{year:r,record_type:"expense"}),s={};return a.forEach(i=>{s[i.vertical]=(s[i.vertical]||0)+i.amount}),Object.entries(s).map(([i,l])=>({name:i,value:l})).sort((i,l)=>l.value-i.value)}async calculateFinancialSummaryManually(t){try{const{data:r,error:a}=await G.rpc("get_financial_data",{startup_id_param:t});if(a)return console.error("Error getting financial data from database function:",a),await this.calculateFinancialSummaryFallback(t);const s=r==null?void 0:r[0];if(s)return{total_funding:s.total_funding||0,total_revenue:s.total_revenue||0,total_expenses:s.total_expenses||0,available_funds:s.available_funds||0}}catch(r){console.error("Error calling get_financial_data:",r)}return await this.calculateFinancialSummaryFallback(t)}async calculateFinancialSummaryFallback(t){const r=await this.getFinancialRecords(t);let a=0,s=0;r.forEach(d=>{d.record_type==="revenue"?a+=d.amount:s+=d.amount});const{data:i}=await G.from("startups").select("total_funding").eq("id",t).single(),l=(i==null?void 0:i.total_funding)||0,u=a-s;return{total_funding:l,total_revenue:a,total_expenses:s,available_funds:u}}async getEntities(t){const{data:r,error:a}=await G.from("financial_records").select("entity").eq("startup_id",t).order("entity");if(a)throw a;return[...new Set((r==null?void 0:r.map(s=>s.entity))||[])]}async getVerticals(t){const{data:r,error:a}=await G.from("financial_records").select("vertical").eq("startup_id",t).order("vertical");if(a)throw a;return[...new Set((r==null?void 0:r.map(s=>s.vertical))||[])]}async getAvailableYears(t){const{data:r,error:a}=await G.from("financial_records").select("date").eq("startup_id",t);if(a)throw a;const s=(r==null?void 0:r.map(l=>new Date(l.date).getFullYear()))||[],i=[...new Set(s)].sort((l,u)=>u-l);return i.length===0?["all",new Date().getFullYear()]:["all",...i]}async uploadAttachment(t,r){const a=`${r}/${Date.now()}_${t.name}`,{data:s,error:i}=await G.storage.from("financial-attachments").upload(a,t);if(i)throw i;const{data:l}=G.storage.from("financial-attachments").getPublicUrl(a);return l.publicUrl}async deleteAttachment(t){const r=t.split("/").slice(-2).join("/"),{error:a}=await G.storage.from("financial-attachments").remove([r]);if(a)throw a}async getAttachmentDownloadUrl(t){try{if(t&&t.startsWith("http"))return t;if(t&&!t.startsWith("http")){const{data:r}=G.storage.from("financial-attachments").getPublicUrl(t);return r.publicUrl}throw new Error("Invalid attachment URL")}catch(r){throw console.error("Error generating download URL:",r),r}}extractFilePathFromUrl(t){try{if(t.includes("supabase.co/storage/v1/object/public/")){const r=t.split("/"),a=r.findIndex(s=>s==="financial-attachments");if(a!==-1&&a+1<r.length)return r.slice(a+1).join("/")}return t.startsWith("http")?null:t}catch(r){return console.error("Error extracting file path:",r),null}}}const cs=new QQ;class eee{async getInvestmentRecords(t,r){let a=G.from("investment_records").select("*").eq("startup_id",t).order("date",{ascending:!1});r!=null&&r.investorType&&(a=a.eq("investor_type",r.investorType)),r!=null&&r.investmentType&&(a=a.eq("investment_type",r.investmentType)),r!=null&&r.dateFrom&&(a=a.gte("date",r.dateFrom)),r!=null&&r.dateTo&&(a=a.lte("date",r.dateTo));const{data:s,error:i}=await a;if(i)throw i;return(s||[]).map(l=>({id:l.id,date:l.date,investorType:l.investor_type,investmentType:l.investment_type,investorName:l.investor_name,investorCode:l.investor_code,amount:l.amount,equityAllocated:l.equity_allocated,shares:l.shares,pricePerShare:l.price_per_share,preMoneyValuation:l.pre_money_valuation,postMoneyValuation:l.post_money_valuation,proofUrl:l.proof_url}))}async getTotalShares(t){const{data:r,error:a}=await G.from("startup_shares").select("total_shares").eq("startup_id",t).single();if(a&&a.code!=="PGRST116")throw a;return(r==null?void 0:r.total_shares)??0}async getStartupSharesData(t){try{await this.recalculateShares(t)}catch(i){console.warn(" Could not recalculate shares (function may not exist):",i)}const{data:r,error:a}=await G.from("startup_shares").select("total_shares, esop_reserved_shares, price_per_share").eq("startup_id",t).single();if(a&&a.code!=="PGRST116")throw console.error(" Error loading startup shares data:",a),a;const s={totalShares:(r==null?void 0:r.total_shares)??0,esopReservedShares:(r==null?void 0:r.esop_reserved_shares)??0,pricePerShare:(r==null?void 0:r.price_per_share)??0};return console.log(" Shares data loaded from startup_shares table:",s),s}async recalculateShares(t){try{const{error:r}=await G.rpc("recalculate_all_startup_funding",{startup_id_param:t});if(r)throw console.error("Error recalculating shares:",r),r}catch(r){throw console.error("Error calling recalculate_all_startup_funding:",r),r}}async getCapTableData(t){try{const{data:r,error:a}=await G.rpc("get_cap_table_data",{startup_id_param:t});return a?(console.error("Error getting cap table data:",a),null):(r==null?void 0:r[0])||null}catch(r){return console.error("Error calling get_cap_table_data:",r),null}}async upsertTotalShares(t,r,a){if(r<0||!Number.isFinite(r))throw new Error("Total shares must be a non-negative number");const{data:s,error:i}=await G.from("startup_shares").upsert({startup_id:t,total_shares:r,price_per_share:a??null,updated_at:new Date().toISOString()},{onConflict:"startup_id"}).select("total_shares").single();if(i)throw i;return s.total_shares??r}async getPricePerShare(t){const{data:r,error:a}=await G.from("startup_shares").select("price_per_share").eq("startup_id",t).single();if(a&&a.code!=="PGRST116")throw a;return(r==null?void 0:r.price_per_share)??0}async upsertPricePerShare(t,r){if(r<0||!Number.isFinite(r))throw new Error("Price per share must be a non-negative number");const{data:a}=await G.from("startup_shares").select("total_shares, esop_reserved_shares").eq("startup_id",t).single(),s={startup_id:t,price_per_share:r,total_shares:(a==null?void 0:a.total_shares)??1e6,esop_reserved_shares:(a==null?void 0:a.esop_reserved_shares)??0,updated_at:new Date().toISOString()},{data:i,error:l}=await G.from("startup_shares").upsert(s,{onConflict:"startup_id"}).select("price_per_share, total_shares, esop_reserved_shares").single();if(l)throw console.error(" Upsert error:",l),l;return i.price_per_share??r}async initializeStartupShares(t,r=1e6,a=1){const s={startup_id:t,total_shares:r,price_per_share:a,esop_reserved_shares:0,updated_at:new Date().toISOString()},{error:i}=await G.from("startup_shares").upsert(s,{onConflict:"startup_id"});if(i)throw console.error(" Initialize error:",i),i}async getEsopReservedShares(t){const{data:r,error:a}=await G.from("startup_shares").select("esop_reserved_shares").eq("startup_id",t).single();if(a&&a.code!=="PGRST116")throw a;return(r==null?void 0:r.esop_reserved_shares)??0}async getTotalEsopEquity(t){const{data:r,error:a}=await G.from("employees").select("esop_allocation").eq("startup_id",t);if(a)throw a;const s=(r||[]).reduce((d,f)=>d+(f.esop_allocation||0),0),{data:i,error:l}=await G.from("startups").select("current_valuation").eq("id",t).single();if(l)throw l;const u=(i==null?void 0:i.current_valuation)||0;return u===0?0:s/u*100}async upsertEsopReservedShares(t,r){if(r<0||!Number.isFinite(r))throw new Error("ESOP reserved shares must be a non-negative number");const{data:a,error:s}=await G.from("startup_shares").upsert({startup_id:t,esop_reserved_shares:r,updated_at:new Date().toISOString()},{onConflict:"startup_id"}).select("esop_reserved_shares").single();if(s)throw s;return a.esop_reserved_shares??r}async addInvestmentRecord(t,r){if(console.log("Service: Adding investment record with data:",{startupId:t,investmentData:r}),!r.date)throw new Error("Date is required");const a=V6(r.date);if(!a.isValid)throw new Error(a.error);if(!r.investorType)throw new Error("Investor type is required");if(!r.investmentType)throw new Error("Investment type is required");if(!r.investorName)throw new Error("Investor name is required");if(!r.amount||r.amount<=0)throw new Error("Valid investment amount is required");if(!r.equityAllocated||r.equityAllocated<0)throw new Error("Valid equity allocation is required");if(r.shares!==void 0&&(!r.shares||r.shares<=0))throw new Error("Valid number of shares is required");if(r.pricePerShare!==void 0&&(!r.pricePerShare||r.pricePerShare<=0))throw new Error("Valid price per share is required");const{data:s,error:i}=await G.from("investment_records").insert({startup_id:t,date:r.date,investor_type:r.investorType,investment_type:r.investmentType,investor_name:r.investorName,investor_code:r.investorCode,amount:r.amount,equity_allocated:r.equityAllocated,shares:r.shares||null,price_per_share:r.pricePerShare||null,pre_money_valuation:r.preMoneyValuation,post_money_valuation:r.postMoneyValuation??null,proof_url:r.proofUrl}).select().single();if(i)throw console.error("Supabase error adding investment record:",i),i;const{data:l,error:u}=await G.from("startups").select("total_funding").eq("id",t).single();if(u)console.error("Error fetching current startup funding:",u);else{const d=((l==null?void 0:l.total_funding)||0)+r.amount,{error:f}=await G.from("startups").update({total_funding:d}).eq("id",t);f&&console.error("Error updating startup total funding:",f)}return{id:s.id,date:s.date,investorType:s.investor_type,investmentType:s.investment_type,investorName:s.investor_name,investorCode:s.investor_code,amount:s.amount,equityAllocated:s.equity_allocated,shares:s.shares,pricePerShare:s.price_per_share,preMoneyValuation:s.pre_money_valuation,postMoneyValuation:s.post_money_valuation,proofUrl:s.proof_url}}async updateInvestmentRecord(t,r){const{data:a,error:s}=await G.from("investment_records").select("startup_id, amount").eq("id",t).single();if(s)throw s;const i={};if(r.date!==void 0){const d=V6(r.date);if(!d.isValid)throw new Error(d.error);i.date=r.date}r.investorType!==void 0&&(i.investor_type=r.investorType),r.investmentType!==void 0&&(i.investment_type=r.investmentType),r.investorName!==void 0&&(i.investor_name=r.investorName),r.investorCode!==void 0&&(i.investor_code=r.investorCode),r.amount!==void 0&&(i.amount=r.amount),r.equityAllocated!==void 0&&(i.equity_allocated=r.equityAllocated),r.preMoneyValuation!==void 0&&(i.pre_money_valuation=r.preMoneyValuation),r.postMoneyValuation!==void 0&&(i.post_money_valuation=r.postMoneyValuation),r.proofUrl!==void 0&&(i.proof_url=r.proofUrl);const{data:l,error:u}=await G.from("investment_records").update(i).eq("id",t).select().single();if(u)throw u;if(r.amount!==void 0&&r.amount!==a.amount){const d=r.amount-a.amount,{data:f,error:m}=await G.from("startups").select("total_funding").eq("id",a.startup_id).single();if(m)console.error("Error fetching current startup funding:",m);else{const g=((f==null?void 0:f.total_funding)||0)+d,{error:v}=await G.from("startups").update({total_funding:g}).eq("id",a.startup_id);v&&console.error("Error updating startup total funding:",v)}}return{id:l.id,date:l.date,investorType:l.investor_type,investmentType:l.investment_type,investorName:l.investor_name,investorCode:l.investor_code,amount:l.amount,equityAllocated:l.equity_allocated,preMoneyValuation:l.pre_money_valuation,postMoneyValuation:l.post_money_valuation,proofUrl:l.proof_url}}async deleteInvestmentRecord(t){try{console.log(" Deleting investment record with ID:",t);const{data:r,error:a}=await G.from("investment_records").select("startup_id, amount").eq("id",t).single();if(a)throw console.error(" Error fetching investment record:",a),a;const{error:s}=await G.from("investment_records").delete().eq("id",t);if(s)throw console.error(" Error deleting investment record:",s),s;const{data:i,error:l}=await G.from("startups").select("total_funding").eq("id",r.startup_id).single();if(l)console.error("Error fetching current startup funding:",l);else{const u=Math.max(0,((i==null?void 0:i.total_funding)||0)-r.amount),{error:d}=await G.from("startups").update({total_funding:u}).eq("id",r.startup_id);d&&console.error("Error updating startup total funding:",d)}console.log(" Investment record deleted successfully")}catch(r){throw console.error(" Error deleting investment record:",r),r}}async recalculateStartupTotalFunding(t){try{console.log(" Recalculating total funding for startup:",t);const{data:r,error:a}=await G.from("investment_records").select("amount").eq("startup_id",t);if(a)throw console.error(" Error fetching investment records:",a),a;const s=r.reduce((l,u)=>l+(u.amount||0),0),{error:i}=await G.from("startups").update({total_funding:s}).eq("id",t);if(i)throw console.error(" Error updating startup total funding:",i),i;console.log(" Startup total funding recalculated:",s)}catch(r){throw console.error(" Error recalculating startup total funding:",r),r}}async updateStartupFundingAfterDeletion(t,r){try{console.log(" Updating startup funding after deletion:",{startupId:t,amountToSubtract:r});const{data:a,error:s}=await G.from("startups").select("total_funding").eq("id",t).single();if(s)throw console.error(" Error fetching startup funding:",s),s;if(!a)throw new Error("Startup not found");const i=Math.max(0,(a.total_funding||0)-r),{error:l}=await G.from("startups").update({total_funding:i}).eq("id",t);if(l)throw console.error(" Error updating startup funding:",l),l;console.log(" Startup funding updated successfully:",{oldFunding:a.total_funding,newFunding:i})}catch(a){throw console.error(" Error updating startup funding:",a),a}}async getFounders(t){console.log(" Loading founders for startup:",t);const{data:r,error:a}=await G.from("founders").select("*").eq("startup_id",t).order("created_at",{ascending:!0});if(a)throw console.error(" Error loading founders:",a),a;console.log(" Raw founders data from database:",r);const s=(r||[]).map(i=>({name:i.name,email:i.email,shares:i.shares||0,equityPercentage:i.equity_percentage?Number(i.equity_percentage):0}));return console.log(" Mapped founders data:",s),s}async updateFounders(t,r){const{error:a}=await G.from("founders").delete().eq("startup_id",t);if(a)throw a;if(r.length>0){const s=r.map(l=>({startup_id:t,name:l.name,email:l.email,shares:l.shares||0,equity_percentage:l.equityPercentage||0})),{error:i}=await G.from("founders").insert(s);if(i)throw i}}async deleteAllFounders(t){const{error:r}=await G.from("founders").delete().eq("startup_id",t);if(r)throw r}async addFounder(t,r){const{error:a}=await G.from("founders").insert({startup_id:t,name:r.name,email:r.email,equity_percentage:r.equityPercentage||null,shares:r.shares||null});if(a)throw a}async getFundraisingDetails(t){const{data:r,error:a}=await G.from("fundraising_details").select("*").eq("startup_id",t).order("created_at",{ascending:!1});return a?(console.error("Error fetching fundraising details:",a),[]):(r||[]).map(s=>({active:s.active,type:s.type,value:s.value,equity:s.equity,validationRequested:s.validation_requested,pitchDeckUrl:s.pitch_deck_url,pitchVideoUrl:s.pitch_video_url}))}async updateFundraisingDetails(t,r){console.log(" Updating fundraising details:",{startupId:t,fundraisingData:r});try{if(!t||t<=0)throw new Error("Invalid startup ID");if(!r.type)throw new Error("Fundraising type is required");if(!r.value||r.value<=0)throw new Error("Valid fundraising value is required");if(!r.equity||r.equity<=0||r.equity>100)throw new Error("Valid equity percentage (1-100%) is required");const a=await this.getFundraisingDetails(t);if(console.log(" Existing fundraising details:",a),a.length>0){console.log(" Deleting existing fundraising records");const{error:u}=await G.from("fundraising_details").delete().eq("startup_id",t);if(u)throw console.error(" Error deleting existing fundraising details:",u),new Error(`Delete failed: ${u.message}`);console.log(" Existing fundraising records deleted")}console.log(" Inserting new fundraising record");const s={startup_id:t,active:r.active,type:r.type,value:r.value,equity:r.equity,validation_requested:r.validationRequested,pitch_deck_url:r.pitchDeckUrl||null,pitch_video_url:r.pitchVideoUrl||null};console.log(" Insert data:",s);const{data:i,error:l}=await G.from("fundraising_details").insert(s).select().single();if(l)throw console.error(" Error inserting fundraising details:",l),new Error(`Insert failed: ${l.message}`);return console.log(" Fundraising details inserted successfully:",i),{active:i.active,type:i.type,value:i.value,equity:i.equity,validationRequested:i.validation_requested,pitchDeckUrl:i.pitch_deck_url,pitchVideoUrl:i.pitch_video_url}}catch(a){throw console.error(" Fundraising details operation failed:",a),a}}async getValuationHistory(t){const{data:r,error:a}=await G.from("valuation_history").select("*").eq("startup_id",t).order("date",{ascending:!0});if(a)throw a;return(r||[]).map(s=>({round_name:s.round_type,valuation:s.valuation,investment_amount:s.investment_amount,date:s.date}))}async addValuationRecord(t,r){const a=JQ(r.date);if(!a.isValid)throw new Error(a.error);const{error:s}=await G.from("valuation_history").insert({startup_id:t,date:r.date,valuation:r.valuation,round_type:r.roundType,investment_amount:r.investmentAmount||0,notes:r.notes});if(s)throw s}async getEquityHoldings(t){const{data:r,error:a}=await G.from("equity_holdings").select("*").eq("startup_id",t).order("equity_percentage",{ascending:!1});if(a)throw a;return(r||[]).map(s=>({holder_type:s.holder_type,equity_percentage:s.equity_percentage,total_amount:0}))}async updateEquityHoldings(t,r){const{error:a}=await G.from("equity_holdings").delete().eq("startup_id",t);if(a)throw a;if(r.length>0){const s=r.map(l=>({startup_id:t,holder_type:l.holderType,holder_name:l.holderName,equity_percentage:l.equityPercentage})),{error:i}=await G.from("equity_holdings").insert(s);if(i)throw i}}async getInvestmentSummary(t){try{const{data:r,error:a}=await G.rpc("get_investment_summary",{p_startup_id:t});return a?(console.log(" Error calling get_investment_summary RPC, using manual calculation"),this.calculateInvestmentSummaryManually(t)):r[0]||{total_equity_funding:0,total_debt_funding:0,total_grant_funding:0,total_investments:0,avg_equity_allocated:0}}catch{return console.log(" Falling back to manual calculation for investment summary"),this.calculateInvestmentSummaryManually(t)}}async getValuationHistoryData(t){try{const{data:r,error:a}=await G.rpc("get_valuation_history",{p_startup_id:t});return a?(console.log(" Error calling get_valuation_history RPC, using manual calculation"),this.calculateValuationHistoryManually(t)):r||[]}catch{return console.log(" Falling back to manual calculation for valuation history"),this.calculateValuationHistoryManually(t)}}async getEquityDistributionData(t){try{const{data:r,error:a}=await G.rpc("get_equity_distribution",{p_startup_id:t});return a?(console.log(" Error calling get_equity_distribution RPC, using manual calculation"),this.calculateEquityDistributionManually(t)):r||[]}catch{return console.log(" Falling back to manual calculation for equity distribution"),this.calculateEquityDistributionManually(t)}}async getFundraisingStatus(t){try{const{data:r,error:a}=await G.rpc("get_fundraising_status",{p_startup_id:t});if(a){console.log(" Error calling get_fundraising_status RPC, using direct query");const s=await this.getFundraisingDetails(t);if(s.length>0){const i=s[0];return{active:i.active,type:i.type,value:i.value,equity:i.equity,validation_requested:i.validationRequested,pitch_deck_url:i.pitchDeckUrl,pitch_video_url:i.pitchVideoUrl}}return null}return r[0]||null}catch{console.log(" Falling back to direct query for fundraising status");const a=await this.getFundraisingDetails(t);if(a.length>0){const s=a[0];return{active:s.active,type:s.type,value:s.value,equity:s.equity,validation_requested:s.validationRequested,pitch_deck_url:s.pitchDeckUrl,pitch_video_url:s.pitchVideoUrl}}return null}}async calculateInvestmentSummaryManually(t){const r=await this.getInvestmentRecords(t),a=r.filter(d=>d.investmentType===$i.Equity).reduce((d,f)=>d+f.amount,0),s=r.filter(d=>d.investmentType===$i.Debt).reduce((d,f)=>d+f.amount,0),i=r.filter(d=>d.investmentType===$i.Grant).reduce((d,f)=>d+f.amount,0),l=r.length,u=l>0?r.reduce((d,f)=>d+f.equityAllocated,0)/l:0;return{total_equity_funding:a,total_debt_funding:s,total_grant_funding:i,total_investments:l,avg_equity_allocated:u}}async calculateValuationHistoryManually(t){console.log(" Calculating valuation history manually for startup:",t);const r=await this.getInvestmentRecords(t);if(console.log(" Found investments:",r.length),r.length===0)return console.log(" No investments found, returning empty array"),[];const a=new Map;r.forEach(i=>{console.log(" Processing investment:",{date:i.date,amount:i.amount,preMoneyValuation:i.preMoneyValuation,investorName:i.investorName});const l=a.get(i.date)||{valuation:0,investment:0};a.set(i.date,{valuation:l.valuation+i.preMoneyValuation,investment:l.investment+i.amount})});const s=Array.from(a.entries()).map(([i,l])=>({round_name:"Investment Round",valuation:l.valuation,investment_amount:l.investment,date:i})).sort((i,l)=>new Date(i.date).getTime()-new Date(l.date).getTime());return console.log(" Manual valuation history result:",s),s}async calculateEquityDistributionManually(t){const r=await this.getInvestmentRecords(t),a=await this.getFounders(t),s=[];if(a.length>0){const l=(100-r.reduce((u,d)=>u+d.equityAllocated,0))/a.length;a.forEach(u=>{s.push({holder_type:"Founder",equity_percentage:l,total_amount:0})})}return r.forEach(i=>{s.push({holder_type:"Investor",equity_percentage:i.equityAllocated,total_amount:i.amount})}),s.sort((i,l)=>l.equity_percentage-i.equity_percentage)}async getInvestorTypes(){return Object.values(ax)}async getInvestmentTypes(){return Object.values($i)}async getInvestmentRounds(){return Object.values(wa)}async uploadProofDocument(t,r){const a=`${t}/investment-proofs/${Date.now()}_${r.name}`,{data:s,error:i}=await G.storage.from("cap-table-documents").upload(a,r);if(i)throw i;const{data:l}=G.storage.from("cap-table-documents").getPublicUrl(a);return l.publicUrl}async uploadPitchDeck(t,r){const a=`${r}/pitch-decks/${Date.now()}_${t.name}`,{data:s,error:i}=await G.storage.from("pitch-decks").upload(a,t);if(i)throw i;const{data:l}=G.storage.from("pitch-decks").getPublicUrl(a);return l.publicUrl}async getAttachmentDownloadUrl(t){if(t.startsWith("http"))return t;const r=this.extractFilePathFromUrl(t);if(!r)throw new Error("Invalid file URL");const{data:a}=G.storage.from("cap-table-documents").getPublicUrl(r);return a.publicUrl}extractFilePathFromUrl(t){return t.includes("/storage/v1/object/public/")?t.split("/storage/v1/object/public/")[1]:t.includes("/storage/v1/object/sign/")?t.split("/storage/v1/object/sign/")[1]:null}subscribeToInvestmentRecords(t,r){return G.channel("investment_records_changes").on("postgres_changes",{event:"*",schema:"public",table:"investment_records",filter:`startup_id=eq.${t}`},async()=>{try{const s=await this.getInvestmentRecords(t);r(s)}catch(s){console.warn("Failed to refresh investment records after realtime event:",s)}}).subscribe()}subscribeToFounders(t,r){return G.channel("founders_changes").on("postgres_changes",{event:"*",schema:"public",table:"founders",filter:`startup_id=eq.${t}`},async()=>{try{const s=await this.getFounders(t);r(s)}catch(s){console.warn("Failed to refresh founders after realtime event:",s)}}).subscribe()}subscribeToFundraisingDetails(t,r){return G.channel("fundraising_details_changes").on("postgres_changes",{event:"*",schema:"public",table:"fundraising_details",filter:`startup_id=eq.${t}`},async()=>{try{const s=await this.getFundraisingDetails(t);r(s)}catch(s){console.warn("Failed to refresh fundraising details after realtime event:",s)}}).subscribe()}async addFundraisingDetails(t,r){const{data:a,error:s}=await G.from("fundraising_details").insert({startup_id:t,active:r.active,type:r.type,value:r.value,equity:r.equity,validation_requested:r.validationRequested,pitch_deck_url:r.pitchDeckUrl,pitch_video_url:r.pitchVideoUrl}).select().single();if(s)throw s;return{active:a.active,type:a.type,value:a.value,equity:a.equity,validationRequested:a.validation_requested,pitchDeckUrl:a.pitch_deck_url,pitchVideoUrl:a.pitch_video_url}}get supabase(){return G}}const na=new eee;class tee{static async calculateMetrics(t){try{const r=new Date().getFullYear(),a=await cs.getFinancialRecords(t.id,{year:r}),s=new Date().getMonth(),i=a.filter(M=>new Date(M.date).getMonth()===s),l=i.filter(M=>M.record_type==="revenue").reduce((M,U)=>M+U.amount,0),u=l,f=i.filter(M=>M.record_type==="expense").reduce((M,U)=>M+U.amount,0)-l,m=i.filter(M=>{var U;return M.record_type==="expense"&&((U=M.vertical)==null?void 0:U.toLowerCase().includes("marketing"))}).reduce((M,U)=>M+U.amount,0),g=s===0?11:s-1,x=a.filter(M=>new Date(M.date).getMonth()===g).filter(M=>M.record_type==="revenue").reduce((M,U)=>M+U.amount,0),j=l-x,b=j>0?Math.max(1,Math.floor(j/1e4)):1,A=b>0?m/b:0;let S=100;try{const M=await na.getInvestmentSummary(t.id);M&&M.total_investments>0&&(S=Math.max(100,M.total_investments*10))}catch{console.log("Using default customer count for LTV calculation")}const D=(S>0?l/S:0)*12,L=a.filter(M=>M.record_type==="revenue").reduce((M,U)=>M+U.amount,0),F=a.filter(M=>M.record_type==="revenue").reduce((M,U)=>M+(U.cogs||0),0),z=L>0?(L-F)/L*100:0;return{mrr:u,burnRate:f,cac:A,ltv:D,grossMargin:z}}catch(r){return console.error("Error calculating dashboard metrics:",r),{mrr:0,burnRate:0,cac:0,ltv:0,grossMargin:0}}}}const qv=e=>{var t,r;return _.useMemo(()=>{var a,s;return e.currency?e.currency:(a=e.profile)!=null&&a.currency?e.profile.currency:(s=e.profile)!=null&&s.country?nf(e.profile.country):"USD"},[e.currency,(t=e.profile)==null?void 0:t.currency,(r=e.profile)==null?void 0:r.country])},W6=["#1e40af","#1d4ed8","#3b82f6","#60a5fa"],ree=({startup:e,isViewOnly:t=!1,offers:r=[],onProcessOffer:a,currentUser:s})=>{const i=qv(e),[l,u]=_.useState(null),[d,f]=_.useState(!0),[m,g]=_.useState([]),[v,x]=_.useState([]);_.useEffect(()=>{(async()=>{try{f(!0);const A=await tee.calculateMetrics(e);u(A);const S=new Date().getFullYear(),T=await cs.getFinancialRecords(e.id,{year:S}),E={},D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];D.forEach(M=>{E[M]={revenue:0,expenses:0}}),T.forEach(M=>{const U=new Date(M.date).getMonth(),oe=D[U];M.record_type==="revenue"?E[oe].revenue+=M.amount:E[oe].expenses+=M.amount});const L=D.map(M=>({name:M,revenue:E[M].revenue,expenses:E[M].expenses}));g(L);const F={};T.filter(M=>M.record_type==="expense").forEach(M=>{F[M.vertical]=(F[M.vertical]||0)+M.amount});const z=Object.entries(F).map(([M,U])=>({name:M,value:U})).sort((M,U)=>U.value-M.value).slice(0,4);x(z)}catch(A){console.error("Error loading dashboard data:",A)}finally{f(!1)}})()},[e]);const j=({title:b,value:A,icon:S,subtitle:T})=>n.jsx(tt,{padding:"sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-xs sm:text-sm font-medium text-slate-500 uppercase tracking-wider",children:b}),n.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-slate-900",children:A}),T&&n.jsx("p",{className:"text-xs text-slate-400 mt-1 truncate",children:T})]}),n.jsx("div",{className:"text-blue-600 flex-shrink-0 ml-2",children:S})]})});return n.jsxs("div",{className:"space-y-4 sm:space-y-6 px-2 sm:px-0",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3 sm:gap-4",children:[n.jsx(j,{title:"MRR",value:d?"Loading...":ld((l==null?void 0:l.mrr)||0,i),icon:n.jsx(Ki,{className:"h-5 w-5 sm:h-6 sm:w-6"}),subtitle:"Monthly Recurring Revenue"}),n.jsx(j,{title:"Burn Rate",value:d?"Loading...":ld((l==null?void 0:l.burnRate)||0,i),icon:n.jsx(Cw,{className:"h-5 w-5 sm:h-6 sm:w-6"}),subtitle:l!=null&&l.burnRate&&l.burnRate>0?"Monthly Net Loss":"Monthly Net Profit"}),n.jsx(j,{title:"Gross Margin",value:d?"Loading...":`${((l==null?void 0:l.grossMargin)||0).toFixed(1)}%`,icon:n.jsx(xd,{className:"h-5 w-5 sm:h-6 sm:w-6"}),subtitle:"Revenue - COGS"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[n.jsxs(tt,{padding:"md",children:[n.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 text-slate-700",children:"Revenue vs. Expenses (Monthly)"}),n.jsx("div",{className:"w-full h-56 sm:h-64",children:n.jsx(ii,{width:"100%",height:"100%",children:n.jsxs(Dv,{data:m,children:[n.jsx(su,{strokeDasharray:"3 3"}),n.jsx(oc,{dataKey:"name",fontSize:10}),n.jsx(vl,{fontSize:10,tickFormatter:b=>ld(b,i)}),n.jsx(si,{formatter:b=>Lr(b,i)}),n.jsx(Es,{wrapperStyle:{fontSize:"12px"}}),n.jsx(pd,{dataKey:"revenue",fill:"#16a34a",name:"Revenue"}),n.jsx(pd,{dataKey:"expenses",fill:"#dc2626",name:"Expenses"})]})})})]}),n.jsxs(tt,{padding:"md",children:[n.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 text-slate-700",children:"Expense Categories"}),n.jsx("div",{className:"w-full h-56 sm:h-64",children:n.jsx(ii,{width:"100%",height:"100%",children:n.jsxs(jf,{children:[n.jsx(nu,{data:v,cx:"50%",cy:"50%",labelLine:!1,label:({name:b,percent:A})=>`${b} ${(A*100).toFixed(0)}%`,outerRadius:60,fill:"#8884d8",dataKey:"value",children:v.map((b,A)=>n.jsx(xl,{fill:W6[A%W6.length]},`cell-${A}`))}),n.jsx(si,{formatter:b=>Lr(b,i)})]})})})]})]}),n.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[n.jsx("h3",{className:"text-base sm:text-lg font-semibold text-slate-700",children:"Investment Offers"}),!r||r.length===0?n.jsx(tt,{className:"p-6 sm:p-8 text-center text-slate-500",children:n.jsx("p",{className:"text-sm sm:text-base",children:"No offers yet."})}):n.jsxs("div",{className:"overflow-hidden",children:[n.jsx("div",{className:"block sm:hidden space-y-3",children:r.map(b=>n.jsx(tt,{padding:"sm",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:b.investorName||b.investorEmail}),n.jsxs("p",{className:"text-xs text-slate-600",children:["",b.offerAmount,"L  ",b.equityPercentage,"%"]})]}),n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ml-2 flex-shrink-0 ${b.status==="accepted"?"bg-green-100 text-green-800":b.status==="completed"?"bg-blue-100 text-blue-800":b.status==="approved"?"bg-orange-100 text-orange-800":b.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:b.status.charAt(0).toUpperCase()+b.status.slice(1)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[b.status==="approved"&&a&&n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"bg-green-600 hover:bg-green-700 w-full sm:w-auto",onClick:()=>{confirm("Accept this offer and finalize the deal?")&&a(b.id,"accepted")},size:"sm",children:"Accept"}),n.jsx(Oe,{className:"bg-red-600 hover:bg-red-700 w-full sm:w-auto",onClick:()=>{confirm("Decline this offer?")&&a(b.id,"rejected")},size:"sm",children:"Decline"})]}),b.status==="accepted"&&a&&n.jsx(Oe,{className:"bg-blue-600 hover:bg-blue-700 w-full sm:w-auto",onClick:()=>{confirm("Mark this investment as completed?")&&a(b.id,"completed")},size:"sm",children:"Mark Completed"}),(b.status==="pending"||b.status==="rejected"||b.status==="completed")&&n.jsxs("div",{className:"text-xs text-slate-500 text-center",children:[b.status==="pending"&&"Waiting for admin approval",b.status==="rejected"&&"Offer declined",b.status==="completed"&&"Investment completed"]})]})]})},b.id))}),n.jsx("div",{className:"hidden sm:block",children:n.jsx(tt,{className:"p-0 overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"From"}),n.jsx("th",{className:"px-3 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Amount"}),n.jsx("th",{className:"px-3 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Equity"}),n.jsx("th",{className:"px-3 sm:px-4 py-2 sm:py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-3 sm:px-4 py-2 sm:py-3 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-slate-200 bg-white",children:r.map(b=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-3 sm:px-4 py-2 sm:py-3 whitespace-nowrap text-slate-900",children:b.investorName||b.investorEmail}),n.jsxs("td",{className:"px-3 sm:px-4 py-2 sm:py-3 whitespace-nowrap text-slate-900",children:["",b.offerAmount,"L"]}),n.jsxs("td",{className:"px-3 sm:px-4 py-2 sm:py-3 whitespace-nowrap text-slate-900",children:[b.equityPercentage,"%"]}),n.jsx("td",{className:"px-3 sm:px-4 py-2 sm:py-3 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${b.status==="accepted"?"bg-green-100 text-green-800":b.status==="completed"?"bg-blue-100 text-blue-800":b.status==="approved"?"bg-orange-100 text-orange-800":b.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:b.status.charAt(0).toUpperCase()+b.status.slice(1)})}),n.jsx("td",{className:"px-3 sm:px-4 py-2 sm:py-3 whitespace-nowrap",children:n.jsxs("div",{className:"flex justify-end gap-2",children:[b.status==="approved"&&a&&n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"bg-green-600 hover:bg-green-700",onClick:()=>{confirm("Accept this offer and finalize the deal?")&&a(b.id,"accepted")},size:"sm",children:"Accept"}),n.jsx(Oe,{className:"bg-red-600 hover:bg-red-700",onClick:()=>{confirm("Decline this offer?")&&a(b.id,"rejected")},size:"sm",children:"Decline"})]}),b.status==="accepted"&&a&&n.jsx(Oe,{className:"bg-blue-600 hover:bg-blue-700",onClick:()=>{confirm("Mark this investment as completed?")&&a(b.id,"completed")},size:"sm",children:"Mark Completed"}),(b.status==="pending"||b.status==="rejected"||b.status==="completed")&&n.jsxs("span",{className:"text-xs text-slate-500 self-center",children:[b.status==="pending"&&"Waiting for admin approval",b.status==="rejected"&&"Offer declined",b.status==="completed"&&"Investment completed"]})]})})]},b.id))})]})})})]})]})]})},aee=["Agriculture","AI","Climate","Consumer Goods","Defence","E-commerce","Education","EV","Finance","Food & Beverage","Healthcare","Manufacturing","Media & Entertainment","Others","PaaS","Renewable Energy","Retail","SaaS","Social Impact","Space","Transportation and Logistics","Waste Management","Web 3.0"],nee=({startup:e})=>{const[t,r]=_.useState([]),[a,s]=_.useState([]),[i,l]=_.useState(null),[u,d]=_.useState(!1),[f,m]=_.useState(null),[g,v]=_.useState(""),[x,j]=_.useState(null),[b,A]=_.useState(""),[S,T]=_.useState(!1),[E,D]=_.useState(!1),[L,F]=_.useState(""),[z,M]=_.useState("");_.useEffect(()=>{let Q=!0;return(async()=>{const{data:ae,error:he}=await G.from("incubation_opportunities").select("*").order("created_at",{ascending:!1});if(!Q)return;if(!he&&Array.isArray(ae)){const _e=ae.map(Y=>({id:Y.id,programName:Y.program_name,description:Y.description||"",deadline:Y.deadline||"",posterUrl:Y.poster_url||void 0,videoUrl:Y.video_url||void 0,facilitatorName:"Program Facilitator"}));r(_e)}const{data:de}=await G.from("opportunity_applications").select("*").eq("startup_id",e.id);Array.isArray(de)&&s(de.map(_e=>({id:_e.id,startupId:_e.startup_id,opportunityId:_e.opportunity_id,status:_e.status||"pending",pitchDeckUrl:_e.pitch_deck_url||void 0,pitchVideoUrl:_e.pitch_video_url||void 0})))})(),()=>{Q=!1}},[e.id]);const U=_.useMemo(()=>new Set(a.map(Q=>Q.opportunityId)),[a]),oe=Q=>{if(!Q)return null;try{const ae=new URL(Q);if(ae.hostname.includes("youtube.com")){const he=ae.searchParams.get("v");return he?`https://www.youtube.com/embed/${he}`:null}if(ae.hostname==="youtu.be"){const he=ae.pathname.replace("/","");return he?`https://www.youtube.com/embed/${he}`:null}}catch{}return null},R=Q=>{U.has(Q)||(m(Q),j(null),v(""),A(""),d(!0))},q=(Q,ae)=>{F(Q),M(ae),D(!0)},se=Q=>{if(Q.target.files&&Q.target.files[0]){const ae=Q.target.files[0];if(ae.type!=="application/pdf"){alert("Please upload a PDF file for the pitch deck.");return}if(ae.size>10*1024*1024){alert("File size must be less than 10MB.");return}j(ae)}},J=async()=>{if(f){if(!x&&!g.trim()){alert("Please provide either a pitch deck file or a pitch video URL.");return}if(!b.trim()){alert("Please select a sector for your startup.");return}T(!0);try{let Q=null;const ae=g.trim()||null;if(x){const Y=x.name.replace(/[^a-zA-Z0-9.-]/g,"_"),ye=`pitch-decks/${e.id}/${f}/${Date.now()}-${Y}`,{error:P}=await G.storage.from("startup-documents").upload(ye,x);if(P)throw P;const{data:Z}=G.storage.from("startup-documents").getPublicUrl(ye);Q=Z.publicUrl}const{data:he,error:de}=await G.from("opportunity_applications").insert({startup_id:e.id,opportunity_id:f,status:"pending",pitch_deck_url:Q,pitch_video_url:ae,sector:b.trim()}).select().single();if(de)throw de;s(Y=>[...Y,{id:he.id,startupId:e.id,opportunityId:f,status:"pending",pitchDeckUrl:Q||void 0,pitchVideoUrl:ae||void 0}]),d(!1),m(null);const _e=document.createElement("div");_e.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",_e.innerHTML=`
                <div class="bg-white rounded-lg p-6 max-w-sm mx-4 text-center">
                    <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Application Submitted!</h3>
                    <p class="text-gray-600 mb-4">Your application has been sent to the facilitator.</p>
                    <button onclick="this.parentElement.parentElement.remove()" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
                        Continue
                    </button>
                </div>
            `,document.body.appendChild(_e)}catch(Q){console.error("Failed to submit application:",Q),alert("Failed to submit application. "+(Q.message||""))}finally{T(!1)}}};return n.jsxs("div",{className:"space-y-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Growth Opportunities"}),n.jsx("p",{className:"text-slate-600",children:"Explore accelerator programs and other opportunities posted by our network of facilitation centers."}),i?n.jsxs("div",{children:[n.jsx(Oe,{onClick:()=>l(null),variant:"secondary",className:"mb-4",children:"Back"}),n.jsxs(tt,{className:"!p-0 overflow-hidden",children:[(()=>{const Q=oe(i.videoUrl||void 0);return Q?n.jsx("div",{className:"relative w-full aspect-video bg-slate-800",children:n.jsx("iframe",{src:Q,title:`Video for ${i.programName}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full"})}):i.posterUrl?n.jsx("img",{src:i.posterUrl,alt:`${i.programName} poster`,className:"w-full h-64 object-contain bg-slate-100 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>q(i.posterUrl,`${i.programName} poster`)}):null})(),n.jsx("div",{className:"p-6 md:p-8",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[n.jsx("p",{className:"text-sm font-semibold text-brand-primary",children:i.facilitatorName||"Program Facilitator"}),n.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:i.programName}),n.jsx("p",{className:"text-slate-600 leading-relaxed whitespace-pre-wrap",children:i.description})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs(tt,{className:"bg-slate-50/70 !shadow-none border",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-700 mb-3",children:["About ",i.facilitatorName||"Program Facilitator"]}),n.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Opportunities from our facilitator network."})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsxs("p",{className:"text-sm text-slate-500",children:["Application Deadline: ",n.jsx("span",{className:"font-semibold text-slate-700",children:i.deadline})]}),U.has(i.id)?n.jsxs(Oe,{type:"button",className:"w-full mt-3",variant:"secondary",disabled:!0,children:[n.jsx(Po,{className:"h-4 w-4 mr-2"})," You have applied for this program"]}):n.jsxs(Oe,{type:"button",className:"w-full mt-3",onClick:()=>R(i.id),disabled:!1,children:[n.jsx(Cw,{className:"h-4 w-4 mr-2"})," Apply for Program"]})]})]})]})})]})]}):t.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(Q=>{const ae=oe(Q.videoUrl),he=U.has(Q.id);return n.jsxs(tt,{className:"flex flex-col !p-0 overflow-hidden",children:[ae?n.jsx("div",{className:"relative w-full aspect-video bg-slate-800",children:n.jsx("iframe",{src:ae,title:`Video for ${Q.programName}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full"})}):Q.posterUrl?n.jsx("img",{src:Q.posterUrl,alt:`${Q.programName} poster`,className:"w-full h-40 object-contain bg-slate-100 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>q(Q.posterUrl,`${Q.programName} poster`)}):n.jsx("div",{className:"w-full h-40 bg-slate-200 flex items-center justify-center text-slate-500",children:n.jsx(Zc,{className:"h-10 w-10"})}),n.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[n.jsxs("div",{className:"flex-grow",children:[n.jsx("p",{className:"text-sm font-medium text-brand-primary",children:Q.facilitatorName||"Program Facilitator"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-800 mt-1 cursor-pointer hover:text-brand-primary transition-colors",onClick:()=>l(Q),children:Q.programName}),n.jsxs("p",{className:"text-sm text-slate-500 mt-2 mb-4",children:[Q.description.substring(0,100),"..."]})]}),n.jsxs("div",{className:"border-t pt-4 mt-4",children:[n.jsxs("p",{className:"text-xs text-slate-500",children:["Deadline: ",n.jsx("span",{className:"font-semibold",children:Q.deadline})]}),he?n.jsxs(Oe,{type:"button",className:"w-full mt-3",variant:"secondary",disabled:!0,children:[n.jsx(Po,{className:"h-4 w-4 mr-2"})," You have applied for this program"]}):n.jsxs(Oe,{type:"button",className:"w-full mt-3",onClick:()=>R(Q.id),disabled:!1,children:[n.jsx(Cw,{className:"h-4 w-4 mr-2"})," Apply for Program"]})]})]})]},Q.id)})}):n.jsxs(tt,{className:"text-center py-12",children:[n.jsx("h3",{className:"text-xl font-semibold",children:"No Opportunities Available"}),n.jsx("p",{className:"text-slate-500 mt-2",children:"Please check back later for new programs and offerings."})]}),n.jsx(Bn,{isOpen:u,onClose:()=>{S||(d(!1),m(null))},title:"Submit Application",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Startup Sector *"}),n.jsxs("select",{value:b,onChange:Q=>A(Q.target.value),className:"block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-brand-primary",required:!0,children:[n.jsx("option",{value:"",children:"Select your startup sector"}),aee.map(Q=>n.jsx("option",{value:Q,children:Q},Q))]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Required field"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Pitch Deck (PDF)"}),n.jsx("input",{type:"file",accept:".pdf",onChange:se,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-slate-100 file:text-slate-700 hover:file:bg-slate-200"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Max 10MB"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Pitch Video URL"}),n.jsx(At,{type:"url",placeholder:"https://youtube.com/watch?v=...",value:g,onChange:Q=>v(Q.target.value),className:"w-full"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Provide either a deck or a video URL (or both)."})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[n.jsx(Oe,{variant:"secondary",type:"button",onClick:()=>{S||(d(!1),m(null))},disabled:S,children:"Cancel"}),n.jsx(Oe,{type:"button",onClick:J,disabled:S||!x&&!g.trim()||!b.trim(),children:S?"Submitting...":"Submit Application"})]})]})}),n.jsx(Bn,{isOpen:E,onClose:()=>D(!1),title:z,size:"4xl",children:n.jsx("div",{className:"flex justify-center items-center p-4",children:n.jsx("img",{src:L,alt:z,className:"max-w-full max-h-[80vh] object-contain"})})})]})},see=[{id:1,name:"InnovateAI",investmentType:wa.SeriesA,investmentValue:5e5,equityAllocation:10,currentValuation:1e7,complianceStatus:_t.Compliant,sector:"AI/ML",totalFunding:2e6,totalRevenue:5e5,registrationDate:"2022-01-15",founders:[{name:"Alex Chen",email:"alex@innovateai.com"},{name:"Brenda Lee",email:"brenda@innovateai.com"}]},{id:2,name:"HealthWell",investmentType:wa.SeriesB,investmentValue:1e6,equityAllocation:15,currentValuation:25e6,complianceStatus:_t.Compliant,sector:"HealthTech",totalFunding:5e6,totalRevenue:12e5,registrationDate:"2021-06-20",founders:[]},{id:3,name:"FinSecure",investmentType:wa.SeriesA,investmentValue:75e4,equityAllocation:8,currentValuation:15e6,complianceStatus:_t.Pending,sector:"FinTech",totalFunding:3e6,totalRevenue:8e5,registrationDate:"2023-03-10",founders:[]},{id:4,name:"EcoSolutions",investmentType:wa.Seed,investmentValue:25e4,equityAllocation:5,currentValuation:5e6,complianceStatus:_t.NonCompliant,sector:"GreenTech",totalFunding:1e6,totalRevenue:15e4,registrationDate:"2022-11-05",founders:[]},{id:5,name:"EduVerse",investmentType:wa.Seed,investmentValue:4e5,equityAllocation:12,currentValuation:8e6,complianceStatus:_t.Compliant,sector:"EdTech",totalFunding:15e5,totalRevenue:3e5,registrationDate:"2021-09-01",founders:[]}],kw=[{id:101,name:"QuantumLeap",investmentType:wa.Seed,investmentValue:15e4,equityAllocation:7,sector:"DeepTech",totalFunding:15e4,totalRevenue:0,registrationDate:"2024-02-01",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=QJ21TaeN9K0",complianceStatus:_t.Compliant},{id:102,name:"AgroFuture",investmentType:wa.SeriesA,investmentValue:12e5,equityAllocation:18,sector:"AgriTech",totalFunding:25e5,totalRevenue:4e5,registrationDate:"2023-08-15",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=gt_l_4TfG4k",complianceStatus:_t.Pending},{id:103,name:"CyberGuard",investmentType:wa.SeriesB,investmentValue:3e6,equityAllocation:10,sector:"Cybersecurity",totalFunding:5e6,totalRevenue:1e6,registrationDate:"2022-07-22",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=rok_p26_Z5o",complianceStatus:_t.Compliant},{id:104,name:"BioSynth",investmentType:wa.Seed,investmentValue:5e5,equityAllocation:15,sector:"BioTech",totalFunding:5e5,totalRevenue:5e4,registrationDate:"2024-01-05",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=8aGhZQkoFbQ",complianceStatus:_t.Compliant},{id:105,name:"RetailNext",investmentType:wa.SeriesA,investmentValue:25e5,equityAllocation:12,sector:"RetailTech",totalFunding:4e6,totalRevenue:8e5,registrationDate:"2023-05-18",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=Y_N1_Jj9-KA",complianceStatus:_t.Pending},{id:106,name:"GameOn",investmentType:wa.Seed,investmentValue:75e4,equityAllocation:20,sector:"Gaming",totalFunding:75e4,totalRevenue:15e4,registrationDate:"2023-11-30",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=d_HlPboL_sA",complianceStatus:_t.Compliant},{id:107,name:"PropTech Pro",investmentType:wa.PreSeed,investmentValue:1e5,equityAllocation:5,sector:"Real Estate",totalFunding:1e5,totalRevenue:1e4,registrationDate:"2024-03-01",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=uK67H2PAmn8",complianceStatus:_t.Pending},{id:108,name:"LogiChain",investmentType:wa.SeriesA,investmentValue:18e5,equityAllocation:9,sector:"Logistics",totalFunding:3e6,totalRevenue:6e5,registrationDate:"2022-09-10",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=uJg4B5a-a28",complianceStatus:_t.Compliant},{id:109,name:"EduKids",investmentType:wa.Seed,investmentValue:3e5,equityAllocation:10,sector:"EdTech",totalFunding:3e5,totalRevenue:6e4,registrationDate:"2023-10-25",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=GGlY3g_2Q_E",complianceStatus:_t.NonCompliant},{id:110,name:"QuantumLeap 2",investmentType:wa.Seed,investmentValue:15e4,equityAllocation:7,sector:"DeepTech",totalFunding:15e4,totalRevenue:0,registrationDate:"2024-02-01",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=P1ww1X2-S1U",complianceStatus:_t.Compliant},{id:111,name:"SpaceHaul",investmentType:wa.SeriesB,investmentValue:1e7,equityAllocation:15,sector:"Aerospace",totalFunding:25e6,totalRevenue:5e5,registrationDate:"2021-12-01",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=sO-tjb4Edb8",complianceStatus:_t.Compliant},{id:112,name:"MindWell",investmentType:wa.Seed,investmentValue:4e5,equityAllocation:12,sector:"HealthTech",totalFunding:4e5,totalRevenue:8e4,registrationDate:"2024-04-10",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=4x7_v-2-a3I",complianceStatus:_t.Compliant},{id:113,name:"CleanPlate",investmentType:wa.Seed,investmentValue:2e5,equityAllocation:8,sector:"FoodTech",totalFunding:2e5,totalRevenue:4e4,registrationDate:"2023-09-05",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=ysz5S6PUM-U",complianceStatus:_t.Pending},{id:114,name:"Solaris",investmentType:wa.SeriesA,investmentValue:22e5,equityAllocation:11,sector:"GreenTech",totalFunding:35e5,totalRevenue:7e5,registrationDate:"2022-11-20",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=o0u4M6vppCI",complianceStatus:_t.Compliant},{id:115,name:"LegalEase",investmentType:wa.PreSeed,investmentValue:12e4,equityAllocation:6,sector:"LegalTech",totalFunding:12e4,totalRevenue:25e3,registrationDate:"2024-05-15",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=J132shgI_Ns",complianceStatus:_t.Pending},{id:116,name:"TravelBug",investmentType:wa.Seed,investmentValue:6e5,equityAllocation:14,sector:"TravelTech",totalFunding:6e5,totalRevenue:12e4,registrationDate:"2023-03-12",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=T_i-T58-S2E",complianceStatus:_t.Compliant},{id:117,name:"DataWeave",investmentType:wa.SeriesB,investmentValue:45e5,equityAllocation:10,sector:"Data Analytics",totalFunding:8e6,totalRevenue:15e5,registrationDate:"2021-10-01",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=R2vXbFp5C9o",complianceStatus:_t.Compliant},{id:118,name:"AutoDrive",investmentType:wa.SeriesA,investmentValue:5e6,equityAllocation:18,sector:"Automotive",totalFunding:1e7,totalRevenue:8e5,registrationDate:"2022-06-01",pitchDeckUrl:"#",pitchVideoUrl:"https://www.youtube.com/watch?v=uA8X54c_w18",complianceStatus:_t.NonCompliant}],iee=[{id:201,name:"ConnectSphere",investmentType:wa.Seed,investmentValue:2e5,equityAllocation:8,sector:"Social Tech",totalFunding:2e5,totalRevenue:1e4,registrationDate:"2023-11-20"}],oee=[{id:"user-1",name:"Alice Investor",email:"investor@example.com",role:"Investor",registrationDate:"2023-01-10",investorCode:"INV-A7B3C9"},{id:"user-2",name:"Alex Chen",email:"alex@innovateai.com",role:"Startup",registrationDate:"2022-01-15"},{id:"user-3",name:"Bob CA",email:"ca@example.com",role:"CA",registrationDate:"2023-03-01"},{id:"user-4",name:"Charlie CS",email:"cs@example.com",role:"CS",registrationDate:"2023-04-01"},{id:"user-5",name:"Admin User",email:"admin@example.com",role:"Admin",registrationDate:"2022-01-01"},{id:"user-6",name:"Brenda Lee",email:"brenda@innovateai.com",role:"Startup",registrationDate:"2022-01-15"},{id:"user-7",name:"Facilitator One",email:"facilitator@example.com",role:"Startup Facilitation Center",registrationDate:"2024-01-20"}],lee=[{id:1,startupId:3,startupName:"FinSecure",requestDate:"2024-06-25"},{id:2,startupId:4,startupName:"EcoSolutions",requestDate:"2024-06-28"}],cee=[{id:1,investorEmail:"investor@example.com",startupName:"QuantumLeap",investment:kw[0],offerAmount:14e4,equityPercentage:6.5,status:"pending"},{id:2,investorEmail:"investor@example.com",startupName:"AgroFuture",investment:kw[1],offerAmount:11e5,equityPercentage:17,status:"pending"}],uee=["Canada","India","United States","United Kingdom","Australia","Germany","France","Japan","Singapore","Brazil"],Qr={supabase:G,async getStartupProfile(e){try{console.log(" getStartupProfile called with startupId:",e);const{data:t,error:r}=await G.from("startups").select("*").eq("id",e).single();if(r)throw console.error(" Error fetching startup data:",r),r;if(!t)return console.log(" No startup data found for ID:",e),null;console.log(" Raw startup data from database:",t),console.log(" All profile data is now stored in startups table");const{data:a,error:s}=await G.from("subsidiaries").select("*").eq("startup_id",e);s&&console.error(" Error fetching subsidiaries:",s);let i=null;try{const{data:m,error:g}=await G.from("international_operations").select("*").eq("startup_id",e);g?g.code!=="PGRST116"&&g.message!=='relation "public.international_operations" does not exist'&&console.log(" International operations table error:",g):i=m}catch{console.log(" International operations table not available, skipping")}const l=m=>{if(!m)return"";if(m instanceof Date)return m.toISOString().split("T")[0];const g=String(m);return g.includes("T")?g.split("T")[0]:g},u=(a||[]).map(m=>({id:m.id,country:m.country,companyType:m.company_type,registrationDate:l(m.registration_date),caCode:m.ca_service_code,csCode:m.cs_service_code})),d=(i||[]).map(m=>({id:m.id,country:m.country,companyType:m.company_type,startDate:l(m.start_date)})),f={country:t.country_of_registration||t.country,companyType:t.company_type,registrationDate:l(t.registration_date),currency:t.currency||"USD",subsidiaries:u,internationalOps:d,caServiceCode:t.ca_service_code,csServiceCode:t.cs_service_code,investmentAdvisorCode:t.investment_advisor_code};return console.log(" Processed profile data:",f),console.log(" company_type from database:",t.company_type),console.log(" companyType in profileData:",f.companyType),f}catch(t){return console.error(" Error fetching startup profile:",t),null}},async updateStartupProfile(e,t){try{console.log(" updateStartupProfile called with:",{startupId:e,profileData:t});const r={updated_at:new Date().toISOString()};t.country!==void 0&&t.country!==null&&(r.country_of_registration=t.country),t.companyType!==void 0&&t.companyType!==null?(r.company_type=t.companyType,console.log(" Adding company_type to update:",t.companyType,"type:",typeof t.companyType)):console.log(" Company type not being saved - value:",t.companyType,"type:",typeof t.companyType),t.registrationDate!==void 0&&t.registrationDate!==null&&(r.registration_date=t.registrationDate),t.currency!==void 0&&t.currency!==null&&(r.currency=t.currency,console.log(" Adding currency to update:",t.currency)),(t.caServiceCode!==void 0||t.caCode!==void 0)&&(r.ca_service_code=t.caServiceCode||t.caCode||null),(t.csServiceCode!==void 0||t.csCode!==void 0)&&(r.cs_service_code=t.csServiceCode||t.csCode||null),t.investmentAdvisorCode!==void 0&&t.investmentAdvisorCode!==null&&(r.investment_advisor_code=t.investmentAdvisorCode,console.log(" Adding investment_advisor_code to update:",t.investmentAdvisorCode)),console.log(" Update data:",r);const{error:a,data:s}=await G.from("startups").update(r).eq("id",e).select();if(console.log(" Database update result:",{error:a,data:s}),a){if(console.error(" Direct update failed:",a),a.message.includes("currency")&&r.currency){console.log(" Retrying without currency column..."),delete r.currency;const{error:i}=await G.from("startups").update(r).eq("id",e);if(i)throw console.error(" Retry without currency failed:",i),new Error(`Database update failed: ${i.message}`);return console.log(" Update succeeded without currency column"),!0}throw new Error(`Database update failed: ${a.message}`)}return console.log(" Profile update successful"),!0}catch(r){throw console.error(" Error updating startup profile:",r),r instanceof Error?(console.error(" Error details:",{message:r.message,stack:r.stack,startupId:e,profileData:t}),new Error(`Failed to update startup profile: ${r.message}`)):new Error("Failed to update startup profile: Unknown error")}},async addSubsidiary(e,t){try{console.log(" addSubsidiary called with:",{startupId:e,subsidiary:t});const{data:r,error:a}=await G.from("subsidiaries").insert({startup_id:e,country:t.country,company_type:t.companyType,registration_date:t.registrationDate,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select("id").single();if(console.log(" Direct add_subsidiary result:",{data:r,error:a}),a)throw a;return(r==null?void 0:r.id)||null}catch(r){return console.error(" Error adding subsidiary:",r),null}},async updateSubsidiary(e,t){try{console.log(" updateSubsidiary called with:",{subsidiaryId:e,subsidiary:t});let r=null;if(t.registrationDate)try{const s=new Date(t.registrationDate);if(!isNaN(s.getTime()))r=s.toISOString().split("T")[0];else return console.error(" Invalid date format:",t.registrationDate),!1}catch(s){return console.error(" Error processing date:",s),!1}console.log(" Processed registration date:",r);const{error:a}=await G.from("subsidiaries").update({country:t.country,company_type:t.companyType,registration_date:r,updated_at:new Date().toISOString()}).eq("id",e);if(console.log(" Direct subsidiary update result:",{error:a}),a)throw a;return!0}catch(r){return console.error(" Error updating subsidiary:",r),!1}},async deleteSubsidiary(e){try{console.log(" deleteSubsidiary called with ID:",e);const{error:t}=await G.from("subsidiaries").delete().eq("id",e);if(console.log(" Direct delete_subsidiary result:",{error:t}),t)throw t;return!0}catch(t){return console.error(" Error deleting subsidiary:",t),!1}},async addInternationalOp(e,t){try{const{data:r,error:a}=await G.rpc("add_international_op",{startup_id_param:e,country_param:t.country,company_type_param:t.companyType||"default",start_date_param:t.startDate});if(a)throw a;return r}catch(r){return console.error("Error adding international operation:",r),null}},async updateInternationalOp(e,t){try{console.log(" updateInternationalOp called with:",{opId:e,operation:t});let r=t.startDate||null;if(r&&typeof r=="string"){const i=new Date(r);if(!isNaN(i.getTime()))r=i.toISOString().split("T")[0];else return console.error(" Invalid date format:",r),!1}else r&&typeof r=="object"&&"toISOString"in r&&(r=r.toISOString().split("T")[0]);console.log(" Processed start date:",r);const{data:a,error:s}=await G.rpc("update_international_op",{op_id_param:e,country_param:t.country,company_type_param:t.companyType||"default",start_date_param:r});if(console.log(" update_international_op result:",{data:a,error:s}),s)throw s;return a}catch(r){return console.error(" Error updating international operation:",r),!1}},async deleteInternationalOp(e){try{const{data:t,error:r}=await G.rpc("delete_international_op",{op_id_param:e});if(r)throw r;return t}catch(t){return console.error("Error deleting international operation:",t),!1}},async getProfileNotifications(e){try{const{data:t,error:r}=await G.from("profile_notifications").select("*").eq("startup_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]}catch(t){return console.error("Error fetching profile notifications:",t),[]}},async markNotificationAsRead(e){try{const{error:t}=await G.from("profile_notifications").update({is_read:!0}).eq("id",e);if(t)throw t;return!0}catch(t){return console.error("Error marking notification as read:",t),!1}},async getProfileAuditLog(e){try{const{data:t,error:r}=await G.from("profile_audit_log").select("*").eq("startup_id",e).order("changed_at",{ascending:!1});if(r)throw r;return t||[]}catch(t){return console.error("Error fetching profile audit log:",t),[]}},async getProfileTemplates(e,t){try{let r=G.from("profile_templates").select("*").eq("is_active",!0);e&&(r=r.eq("country",e)),t&&(r=r.eq("sector",t));const{data:a,error:s}=await r;if(s)throw s;return a||[]}catch(r){return console.error("Error fetching profile templates:",r),[]}},subscribeToProfileChanges(e,t){return G.channel(`profile_changes_${e}`).on("postgres_changes",{event:"*",schema:"public",table:"profile_audit_log",filter:`startup_id=eq.${e}`},t).on("postgres_changes",{event:"*",schema:"public",table:"profile_notifications",filter:`startup_id=eq.${e}`},t).on("postgres_changes",{event:"*",schema:"public",table:"subsidiaries",filter:`startup_id=eq.${e}`},t).on("postgres_changes",{event:"*",schema:"public",table:"international_ops",filter:`startup_id=eq.${e}`},t).on("postgres_changes",{event:"UPDATE",schema:"public",table:"startups",filter:`id=eq.${e}`},t).subscribe()},subscribeToProfileNotifications(e,t){return G.channel(`profile_notifications_${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"profile_notifications",filter:`startup_id=eq.${e}`},t).subscribe()},getCompanyTypesByCountry(e,t){const a={USA:"United States",US:"United States",UK:"United Kingdom"}[e]||e;return{"United States":["C-Corporation","LLC","S-Corporation"],"United Kingdom":["Limited Company (Ltd)","Public Limited Company (PLC)"],India:["Private Limited Company","Public Limited Company","LLP"],Singapore:["Private Limited","Exempt Private Company"],Germany:["GmbH","AG","UG"],Canada:["Corporation","LLC","Partnership"],Australia:["Proprietary Limited","Public Company"],Japan:["Kabushiki Kaisha","Godo Kaisha"],Brazil:["Ltda","S.A."],France:["SARL","SA","SAS"]}[a]||["LLC"]},getAllCountries(){return uee},validateProfileData(e){const t=[];if(e.registrationDate){const s=new Date(e.registrationDate);isNaN(s.getTime())&&t.push("Invalid registration date")}const r=e.registrationDate?new Date(e.registrationDate):null,a=s=>s instanceof Date&&!isNaN(s.getTime());if(Array.isArray(e.subsidiaries)){for(const s of e.subsidiaries)if(s.registrationDate){const i=new Date(s.registrationDate);isNaN(i.getTime())&&t.push("Invalid subsidiary registration date"),r&&a(r)&&a(i)&&i<r&&t.push("Subsidiary registration date cannot be earlier than parent registration date")}}if(Array.isArray(e.internationalOps)){for(const s of e.internationalOps)if(s.startDate){const i=new Date(s.startDate);isNaN(i.getTime())&&t.push("Invalid international operation start date"),r&&a(r)&&a(i)&&i<r&&t.push("International operation start date cannot be earlier than parent registration date")}}return{isValid:t.length===0,errors:t}},async validateServiceCodes(e){const t=[];if(e.caServiceCode&&e.caServiceCode.trim()&&(await this.getServiceProvider(e.caServiceCode.trim(),"ca")||t.push(`Invalid CA code: ${e.caServiceCode}. Please enter a valid CA service provider code.`)),e.csServiceCode&&e.csServiceCode.trim()&&(await this.getServiceProvider(e.csServiceCode.trim(),"cs")||t.push(`Invalid CS code: ${e.csServiceCode}. Please enter a valid CS service provider code.`)),Array.isArray(e.subsidiaries))for(let r=0;r<e.subsidiaries.length;r++){const a=e.subsidiaries[r],s=r+1;a.caCode&&a.caCode.trim()&&(await this.getServiceProvider(a.caCode.trim(),"ca")||t.push(`Subsidiary ${s}: Invalid CA code "${a.caCode}". Please enter a valid CA service provider code.`)),a.csCode&&a.csCode.trim()&&(await this.getServiceProvider(a.csCode.trim(),"cs")||t.push(`Subsidiary ${s}: Invalid CS code "${a.csCode}". Please enter a valid CS service provider code.`))}return{isValid:t.length===0,errors:t}},async getServiceProvider(e,t){try{const{data:r,error:a}=await G.from("service_providers").select("*").eq("code",e).eq("type",t).maybeSingle();return a?(console.error("Error fetching service provider:",a),null):r?{name:r.name,code:r.code,licenseUrl:r.license_url}:null}catch(r){return console.error("Error fetching service provider:",r),null}},async updateSubsidiaryServiceProvider(e,t,r){try{const a=t==="ca"?{ca_service_code:r}:{cs_service_code:r},{data:s,error:i}=await G.from("subsidiaries").update(a).eq("id",e).select("id, ca_service_code, cs_service_code").single();if(i)throw i;return!0}catch(a){return console.error("Error updating subsidiary service provider:",a),!1}},async removeSubsidiaryServiceProvider(e,t){try{const r=t==="ca"?{ca_service_code:null}:{cs_service_code:null},{data:a,error:s}=await G.from("subsidiaries").update(r).eq("id",e);if(s)throw s;return!0}catch(r){return console.error("Error removing subsidiary service provider:",r),!1}},async generateComplianceTasks(e){try{console.log(" Generating compliance tasks for startup:",e);const{data:t,error:r}=await G.rpc("generate_compliance_tasks_for_startup",{startup_id_param:e});if(r)throw console.error("Error generating compliance tasks:",r),r;return console.log(" Generated compliance tasks:",t),t||[]}catch(t){return console.error("Error generating compliance tasks:",t),[]}},async syncComplianceTasks(e){try{return console.log(" Compliance task syncing disabled - using database function directly"),!0}catch(t){return console.error("Error syncing compliance tasks:",t),!1}},async getComplianceTasks(e){try{const{data:t,error:r}=await G.from("compliance_checks").select("*").eq("startup_id",e).order("year",{ascending:!1}).order("task_name",{ascending:!0});if(r)throw r;return t||[]}catch(t){return console.error("Error fetching compliance tasks:",t),[]}},async updateComplianceTaskStatus(e,t,r,a){try{const s=r==="ca"?{ca_status:a}:{cs_status:a},{error:i}=await G.from("compliance_checks").update(s).eq("startup_id",e).eq("task_id",t);if(i)throw i;return!0}catch(s){return console.error("Error updating compliance task status:",s),!1}}},P8=Object.freeze(Object.defineProperty({__proto__:null,profileService:Qr},Symbol.toStringTag,{value:"Module"}));class dee{async getAllRules(){const{data:t,error:r}=await G.from("compliance_rules_comprehensive").select("*").order("country_name",{ascending:!0}).order("company_type",{ascending:!0}).order("compliance_name",{ascending:!0});if(r)throw r;return t||[]}async getRulesByCountry(t){const{data:r,error:a}=await G.from("compliance_rules_comprehensive").select("*").eq("country_code",t).order("company_type",{ascending:!0}).order("compliance_name",{ascending:!0});if(a)throw a;return r||[]}async getRulesByCompanyType(t){const{data:r,error:a}=await G.from("compliance_rules_comprehensive").select("*").eq("company_type",t).order("country_name",{ascending:!0}).order("compliance_name",{ascending:!0});if(a)throw a;return r||[]}async getRulesByCountryAndCompanyType(t,r){const{data:a,error:s}=await G.from("compliance_rules_comprehensive").select("*").eq("country_code",t).eq("company_type",r).order("compliance_name",{ascending:!0});if(s)throw s;return a||[]}async addRule(t){const{data:r,error:a}=await G.from("compliance_rules_comprehensive").insert(t).select("*").single();if(a)throw a;return r}async updateRule(t,r){const{data:a,error:s}=await G.from("compliance_rules_comprehensive").update({...r,updated_at:new Date().toISOString()}).eq("id",t).select("*").single();if(s)throw s;return a}async deleteRule(t){const{error:r}=await G.from("compliance_rules_comprehensive").delete().eq("id",t);if(r)throw r;return!0}async getCountries(){const{data:t,error:r}=await G.from("compliance_rules_comprehensive").select("country_code, country_name").order("country_name");if(r)throw r;return(t==null?void 0:t.reduce((s,i)=>(s.find(u=>u.country_code===i.country_code)||s.push(i),s),[]))||[]}async getCompanyTypes(){const{data:t,error:r}=await G.from("compliance_rules_comprehensive").select("company_type").order("company_type");if(r)throw r;return[...new Set((t==null?void 0:t.map(s=>s.company_type))||[])]}async getCATypes(){const{data:t,error:r}=await G.from("compliance_rules_comprehensive").select("ca_type").not("ca_type","is",null).order("ca_type");if(r)throw r;return[...new Set((t==null?void 0:t.map(s=>s.ca_type).filter(Boolean))||[])]}async getCSTypes(){const{data:t,error:r}=await G.from("compliance_rules_comprehensive").select("cs_type").not("cs_type","is",null).order("cs_type");if(r)throw r;return[...new Set((t==null?void 0:t.map(s=>s.cs_type).filter(Boolean))||[])]}async getCompanyTypesByCountry(t){const{data:r,error:a}=await G.from("compliance_rules_comprehensive").select("company_type").eq("country_code",t).order("company_type");if(a)throw a;return[...new Set((r==null?void 0:r.map(i=>i.company_type))||[])]}async getCATypeByCountry(t){var s;const{data:r,error:a}=await G.from("compliance_rules_comprehensive").select("ca_type").eq("country_code",t).not("ca_type","is",null).limit(1);if(a)throw a;return((s=r==null?void 0:r[0])==null?void 0:s.ca_type)||null}async getCSTypeByCountry(t){var s;const{data:r,error:a}=await G.from("compliance_rules_comprehensive").select("cs_type").eq("country_code",t).not("cs_type","is",null).limit(1);if(a)throw a;return((s=r==null?void 0:r[0])==null?void 0:s.cs_type)||null}async getCATypesByCountry(t){const r=await this.getCATypeByCountry(t);return r?[r]:[]}async getCSTypesByCountry(t){const r=await this.getCSTypeByCountry(t);return r?[r]:[]}async addCountryWithTypes(t){const{country_code:r,country_name:a,ca_types:s,cs_types:i}=t;for(const l of s)await this.addRule({country_code:r,country_name:a,ca_type:l,company_type:"Country Setup - CA Type",compliance_name:"Country Setup - CA Type",compliance_description:`Setup entry for CA type: ${l} in ${a}`,frequency:"annual",verification_required:"CA"});for(const l of i)await this.addRule({country_code:r,country_name:a,cs_type:l,company_type:"Country Setup - CS Type",compliance_name:"Country Setup - CS Type",compliance_description:`Setup entry for CS type: ${l} in ${a}`,frequency:"annual",verification_required:"CS"})}async bulkUploadRules(t){const r=[];let a=0;for(let s=0;s<t.length;s++)try{console.log(`Processing row ${s+1}:`,t[s]),await this.addRule(t[s]),a++,console.log(`Row ${s+1} processed successfully`)}catch(i){console.error(`Error processing row ${s+1}:`,i);const l=i instanceof Error?i.message:"Unknown error";r.push({row:s+1,error:l,data:t[s]})}return console.log("bulkUploadRules returning:",{success:a,errors:r}),{success:a,errors:r}}}const an=new dee,V1=({label:e,...t})=>n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:e}),n.jsx("input",{...t,className:"w-full bg-white border border-slate-300 rounded-md px-3 py-2 text-slate-900 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-90 disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-700"})]}),R0=({name:e,placeholder:t,value:r,onChange:a,disabled:s,isValid:i,isInvalid:l,isLoading:u,errorMessage:d})=>n.jsxs("div",{className:"relative",children:[n.jsx("input",{name:e,placeholder:t,value:r,onChange:a,disabled:s,className:`w-full bg-white border rounded-md px-3 py-2 text-slate-900 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed pr-10 ${l?"border-red-500 focus:ring-red-500 focus:border-red-500":i?"border-green-500 focus:ring-green-500 focus:border-green-500":"border-slate-300"}`}),n.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:u?n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}):i?n.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:n.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}):l?n.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:n.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}):null}),l&&d&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d})]}),Mc=({label:e,children:t,...r})=>n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:e}),n.jsx("select",{...r,className:"w-full bg-white border border-slate-300 rounded-md px-3 py-2 text-slate-900 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-90 disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-700",children:t})]}),L0=({provider:e,onRemove:t,isEditing:r,type:a})=>n.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 p-4 rounded-xl border border-slate-200 flex justify-between items-center h-full shadow-sm hover:shadow-md transition-shadow",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900",children:e.name}),n.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Code: ",e.code]})]}),r&&n.jsx("button",{onClick:t,className:"text-slate-600 hover:text-red-600 font-semibold text-sm bg-white px-3 py-1 rounded-lg border border-slate-200 hover:border-red-200 transition-colors",children:"Change"})]}),fee=({startup:e,userRole:t,onProfileUpdate:r,isViewOnly:a=!1,currentUser:s})=>{const[i,l]=_.useState(!1),[u,d]=_.useState(!0),[f,m]=_.useState([]),[g,v]=_.useState([]),[x,j]=_.useState(!1),[b,A]=_.useState(null),[S,T]=_.useState({}),[E,D]=_.useState([]),[L,F]=_.useState({isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""}),[z,M]=_.useState({isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""}),[U,oe]=_.useState({}),R=_.useRef(null),q=le=>{const xe={country:le.country||"",companyType:le.companyType||"",registrationDate:le.registrationDate||"",subsidiaries:(le.subsidiaries||[]).map(H=>({country:H.country,companyType:H.companyType})),internationalOps:(le.internationalOps||[]).map(H=>({country:H.country,companyType:H.companyType}))};return JSON.stringify(xe)},se=(t==="Startup"||t==="Admin")&&!a;console.log(" ProfileTab - Edit button visibility check:",{userRole:t,isViewOnly:a,canEdit:se,isEditing:i});const J=le=>({country:le.country||"",companyType:le.companyType||"",registrationDate:le.registrationDate||"",currency:le.currency||"USD",subsidiaries:(le.subsidiaries||[]).map(H=>({id:H.id||0,country:H.country||"",companyType:H.companyType||"",registrationDate:H.registrationDate||"",caCode:H.caCode||H.ca_service_code||"",csCode:H.csCode||H.cs_service_code||"",ca:H.ca||void 0,cs:H.cs||void 0})),internationalOps:(le.internationalOps||[]).map(H=>({id:H.id||0,country:H.country||"",companyType:H.companyType||"",startDate:H.startDate||""})),caServiceCode:le.caServiceCode||le.ca_service_code||"",csServiceCode:le.csServiceCode||le.cs_service_code||"",caCode:le.caServiceCode||le.ca_service_code||"",csCode:le.csServiceCode||le.cs_service_code||"",ca:le.ca||void 0,cs:le.cs||void 0}),[Q,ae]=_.useState({country:"",companyType:"",registrationDate:e.registrationDate||new Date().toISOString().split("T")[0],subsidiaries:[],internationalOps:[],caServiceCode:"",csServiceCode:"",currency:"USD"}),he=Wc.useMemo(()=>{if(!Q.country)return[];let le=Q.country;if(Q.country&&!S[Q.country]){for(const[W,B]of Object.entries(S))if(B.country_name===Q.country){le=W;break}}const xe=S[le];return!xe||!xe.company_types?[]:Object.keys(xe.company_types)},[S,Q.country]),de=Wc.useMemo(()=>E.filter(le=>le!=="default"),[E]);_.useEffect(()=>{(async()=>{try{d(!0);const xe=await Qr.getStartupProfile(e.id);if(xe){console.log(" Raw profile data loaded:",xe),console.log(" Company type from database:",xe.companyType);const W=J(xe);if(console.log(" Sanitized data for form:",W),console.log(" Sanitized company type:",W.companyType),W.country&&S&&Object.keys(S).length>0&&!S[W.country]){for(const[B,ee]of Object.entries(S))if(ee.country_name===W.country){W.country=B;break}}ae(W),R.current=q(W)}try{console.log(" Starting user profile document fetch...");const{data:{user:W},error:B}=await br.supabase.auth.getUser();if(B){console.error(" Auth error:",B);return}if(!W){console.error(" No authenticated user found");return}console.log(" Authenticated user:",W.id,W.email);const{data:ee,error:X}=await br.supabase.from("users").select("government_id, ca_license, verification_documents, logo_url, financial_advisor_license_url, investment_advisor_code").eq("id",W.id),ge=ee&&ee.length>0?ee[0]:null;if(X){console.error(" Profile fetch error:",X);return}console.log(" User profile documents loaded:",ge),ge?(A(ge),console.log(" User profile state updated")):console.log(" No user profile data found")}catch(W){console.error(" Error loading user profile documents:",W)}if(!b&&s){console.log(" Using currentUser data as fallback:",s);const W={government_id:s.government_id,ca_license:s.ca_license,verification_documents:s.verification_documents,logo_url:s.logo_url,financial_advisor_license_url:s.financial_advisor_license_url,investment_advisor_code:s.investment_advisor_code};A(W),console.log(" Fallback user profile set:",W)}const H=await Qr.getProfileNotifications(e.id);v(H);try{const W=await an.getAllRules(),B={},ee=new Set;W.forEach(X=>{ee.add(X.country_code),B[X.country_code]||(B[X.country_code]={country_name:X.country_name,company_types:{}});const ge=X.company_type;ge&&!ge.toLowerCase().includes("setup")&&!ge.toLowerCase().includes("ca type")&&!ge.toLowerCase().includes("cs type")&&ge!==X.ca_type&&ge!==X.cs_type&&(B[X.country_code].company_types[ge]||(B[X.country_code].company_types[ge]=[]),B[X.country_code].company_types[ge].push({id:X.id,name:X.compliance_name,description:X.compliance_description,frequency:X.frequency,verification_required:X.verification_required}))}),T(B),D(Array.from(ee))}catch(W){console.warn("Failed to load compliance rules for dropdowns",W)}}catch(xe){console.error("Error loading profile data:",xe)}finally{d(!1)}})()},[e.id]),_.useEffect(()=>{const le=Qr.supabase.channel("profile_rules_catalogs").on("postgres_changes",{event:"*",schema:"public",table:"compliance_rules_comprehensive"},async()=>{try{const xe=await an.getAllRules(),H={},W=new Set;xe.forEach(B=>{W.add(B.country_code),H[B.country_code]||(H[B.country_code]={country_name:B.country_name,company_types:{}});const ee=B.company_type;ee&&!ee.toLowerCase().includes("setup")&&!ee.toLowerCase().includes("ca type")&&!ee.toLowerCase().includes("cs type")&&ee!==B.ca_type&&ee!==B.cs_type&&(H[B.country_code].company_types[ee]||(H[B.country_code].company_types[ee]=[]),H[B.country_code].company_types[ee].push({id:B.id,name:B.compliance_name,description:B.compliance_description,frequency:B.frequency,verification_required:B.verification_required}))}),T(H),D(Array.from(W))}catch(xe){console.warn("Failed to refresh compliance rules for dropdowns",xe)}}).subscribe();return()=>{le.unsubscribe()}},[]),_.useEffect(()=>{console.log("Setting up real-time subscriptions for startup:",e.id);const le=Qr.supabase.channel(`startup_profile_${e.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"startups",filter:`id=eq.${e.id}`},xe=>{console.log("Startup profile updated:",xe),Qr.getStartupProfile(e.id).then(H=>{H&&(ae(J(H)),R.current=q(J(H)))})}).on("postgres_changes",{event:"*",schema:"public",table:"subsidiaries",filter:`startup_id=eq.${e.id}`},xe=>{console.log("Subsidiary change detected:",xe),Qr.getStartupProfile(e.id).then(H=>{H&&(ae(J(H)),R.current=q(J(H)))})}).on("postgres_changes",{event:"*",schema:"public",table:"international_ops",filter:`startup_id=eq.${e.id}`},xe=>{console.log("International operation change detected:",xe),Qr.getStartupProfile(e.id).then(H=>{H&&(ae(J(H)),R.current=q(J(H)))})}).subscribe();return()=>{console.log("Cleaning up real-time subscriptions"),le.unsubscribe()}},[e.id]),Wc.useEffect(()=>{if(Q.country&&S&&Object.keys(S).length>0&&!S[Q.country]){for(const[le,xe]of Object.entries(S))if(xe.country_name===Q.country){ae(H=>({...H,country:le}));break}}},[Q.country,S]),Wc.useEffect(()=>{if(Q.country&&Q.companyType&&he.length>0){const le=he;le.includes(Q.companyType)||(console.log(` Auto-fixing invalid company type: ${Q.companyType} -> ${le[0]} for country: ${Q.country}`),ae(xe=>({...xe,companyType:le[0]})))}},[Q.country,Q.companyType,he]);const _e=()=>l(!0),Y=()=>{l(!1),Qr.getStartupProfile(e.id).then(le=>{le&&ae(J(le))})},ye=async()=>{var le,xe,H;try{const W=Qr.validateProfileData(Q);if(!W.isValid){const pe=W.errors.map(V=>{if(V==="Invalid company type for selected country"){const Le=Qr.getCompanyTypesByCountry(Q.country);return`Invalid company type for ${Q.country}. Valid types are: ${Le.join(", ")}`}return V}).join(`
`);m(pe.split(`
`)),window.scrollTo({top:0,behavior:"smooth"});return}const B=await Qr.validateServiceCodes(Q);if(!B.isValid){const pe=B.errors.join(`
`);m(pe.split(`
`)),window.scrollTo({top:0,behavior:"smooth"});return}m([]),console.log(" Saving form data:",Q),console.log(" Company type being saved:",Q.companyType);const ee=await Qr.updateStartupProfile(e.id,Q);console.log(" Save result:",ee);const X=await Qr.getStartupProfile(e.id),ge=((le=X==null?void 0:X.subsidiaries)==null?void 0:le.map(pe=>pe.id))||[],be=Q.subsidiaries.map(pe=>pe.id);for(const pe of ge)be.includes(pe)||await Qr.deleteSubsidiary(pe);for(let pe=0;pe<Q.subsidiaries.length;pe++){const V=Q.subsidiaries[pe];if(V.id&&V.id>0)await Qr.updateSubsidiary(V.id,{country:V.country,companyType:V.companyType,registrationDate:V.registrationDate}),V.caCode&&await Qr.updateSubsidiaryServiceProvider(V.id,"ca",V.caCode),V.csCode&&await Qr.updateSubsidiaryServiceProvider(V.id,"cs",V.csCode);else{const Le=await Qr.addSubsidiary(e.id,{country:V.country,companyType:V.companyType,registrationDate:V.registrationDate});Le&&(V.caCode&&await Qr.updateSubsidiaryServiceProvider(Le,"ca",V.caCode),V.csCode&&await Qr.updateSubsidiaryServiceProvider(Le,"cs",V.csCode))}}const $e=((xe=X==null?void 0:X.internationalOps)==null?void 0:xe.map(pe=>pe.id))||[],Ze=Q.internationalOps.map(pe=>pe.id);for(const pe of $e)Ze.includes(pe)||await Qr.deleteInternationalOp(pe);for(let pe=0;pe<Q.internationalOps.length;pe++){const V=Q.internationalOps[pe];V.id&&V.id>0?await Qr.updateInternationalOp(V.id,{country:V.country,companyType:V.companyType,startDate:V.startDate}):await Qr.addInternationalOp(e.id,{country:V.country,companyType:V.companyType,startDate:V.startDate})}if(ee){l(!1),console.log("Profile updated successfully");const pe=await Qr.getStartupProfile(e.id);if(console.log(" Refreshed profile data:",pe),pe){const kt=J(pe);console.log(" Sanitized data for form:",kt),ae(kt),console.log(" ProfileTab: Checking if onProfileUpdate callback exists...",{hasCallback:!!r}),r&&(console.log(" ProfileTab: Calling onProfileUpdate callback with updated profile data...",{subsidiaries:((H=pe.subsidiaries)==null?void 0:H.length)||0,hasProfile:!0}),r({...e,country_of_registration:pe.country,company_type:pe.companyType,registration_date:pe.registrationDate,currency:pe.currency,profile:{country:pe.country,companyType:pe.companyType,registrationDate:pe.registrationDate,currency:pe.currency,subsidiaries:pe.subsidiaries||[],internationalOps:pe.internationalOps||[],caServiceCode:pe.caServiceCode,csServiceCode:pe.csServiceCode,ca:pe.ca,cs:pe.cs}}))}const V=R.current,Le=q(pe||Q),ft=V!==Le;if(R.current=Le,ft)try{await Qr.syncComplianceTasks(e.id)}catch(kt){console.error(" Error syncing compliance tasks:",kt)}else console.log(" No primary/entity change detected. Skipping compliance sync.")}else console.error(" Failed to update profile - success was false"),m(["Failed to update profile"])}catch(W){console.error(" Error saving profile:",W);let B="Error saving profile";W instanceof Error&&(B=W.message,console.error(" Detailed error:",W)),m([B])}},P=le=>{const{name:xe,value:H}=le.target;if(xe==="countryOfRegistration"){const W=S[H]||S.default||{},B=Object.keys(W).filter(ge=>ge!=="default"),ee=B.length>0?B:W.default?["default"]:[],X=XL(H);ae(ge=>{const be={...ge,country:H,currency:X};return ge.country!==H&&!ee.includes(ge.companyType)&&(be.companyType=ee[0]||""),be})}else if(xe==="registrationDate"){const W=new Date(H),B=new Date;if(B.setHours(23,59,59,999),W>B){v(ee=>[...ee,{id:Date.now(),type:"error",message:"Registration date cannot be in the future",timestamp:new Date}]);return}ae(ee=>({...ee,[xe]:H}))}else console.log(" Form field changed:",xe,"value:",H),xe==="companyType"&&console.log(" Company type selected:",H),ae(W=>({...W,[xe]:H}))},Z=async le=>{const{name:xe,value:H}=le.target,W=xe==="caCode";if(m(B=>B.filter(ee=>!ee.includes(W?"CA code":"CS code"))),W?F({isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""}):M({isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""}),ae(B=>({...B,[xe]:H,[W?"caServiceCode":"csServiceCode"]:H})),ae(B=>({...B,[W?"ca":"cs"]:void 0})),H&&H.length>=3){W?F(B=>({...B,isLoading:!0})):M(B=>({...B,isLoading:!0}));try{const B=W?"ca":"cs";console.log(" Fetching service provider:",{value:H,providerType:B});const ee=await Qr.getServiceProvider(H,B);if(console.log(" Service provider result:",ee),ee)ae(X=>({...X,[B]:ee})),W?F({isValid:!0,isInvalid:!1,isLoading:!1,errorMessage:""}):M({isValid:!0,isInvalid:!1,isLoading:!1,errorMessage:""});else{const X=`Invalid ${W?"CA":"CS"} code: ${H}. Please enter a valid service provider code.`;W?F({isValid:!1,isInvalid:!0,isLoading:!1,errorMessage:X}):M({isValid:!1,isInvalid:!0,isLoading:!1,errorMessage:X}),m(ge=>[...ge,X])}if(!W&&H&&ee){j(!0);try{if(console.log(" Auto-saving profile with valid CS code:",H),!await Qr.updateStartupProfile(e.id,{...Q,csServiceCode:H}))throw new Error("Failed to save profile");const{startupService:ge}=await Ai(async()=>{const{startupService:$e}=await import("./startupService-CYBgYt2S.js");return{startupService:$e}},[]),be=await ge.requestCSAssignment(H,`Assignment request from ${H}`,e.id,e.name);be.success?(console.log("CS assignment request created successfully"),v($e=>[...$e,{id:Date.now(),type:"success",message:`CS assignment request sent to ${H} and profile saved`,timestamp:new Date}])):(console.error("Failed to create CS assignment request:",be.error),v($e=>[...$e,{id:Date.now(),type:"error",message:`Failed to request CS assignment: ${be.error}`,timestamp:new Date}]))}catch(X){console.error("Error creating CS assignment request:",X),v(ge=>[...ge,{id:Date.now(),type:"error",message:"Failed to request CS assignment",timestamp:new Date}])}finally{j(!1)}}}catch(B){console.error("Error fetching service provider:",B);const ee=`Error validating ${W?"CA":"CS"} code. Please try again.`;W?F({isValid:!1,isInvalid:!0,isLoading:!1,errorMessage:ee}):M({isValid:!1,isInvalid:!0,isLoading:!1,errorMessage:ee}),m(X=>[...X,ee])}}else if(W?F({isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""}):M({isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""}),H==="")try{console.log(` Auto-saving profile with cleared ${W?"CA":"CS"} code`),await Qr.updateStartupProfile(e.id,{...Q,[W?"caServiceCode":"csServiceCode"]:""}),console.log(`Profile saved with cleared ${W?"CA":"CS"} code`)}catch(B){console.error(`Error saving profile with cleared ${W?"CA":"CS"} code:`,B)}},ce=async(le,xe)=>{const{name:H,value:W}=xe.target,B=H==="caCode";m(X=>X.filter(ge=>!ge.includes(`Subsidiary ${le+1}`)||!ge.includes(B?"CA code":"CS code"))),oe(X=>({...X,[le]:{...X[le],[B?"ca":"cs"]:{isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""}}}));const ee=[...Q.subsidiaries];if(ee[le]={...ee[le],[H]:W},ae(X=>({...X,subsidiaries:ee})),ee[le]={...ee[le],[B?"ca":"cs"]:void 0},ae(X=>({...X,subsidiaries:ee})),W&&W.length>=3){oe(X=>({...X,[le]:{...X[le],[B?"ca":"cs"]:{isValid:!1,isInvalid:!1,isLoading:!0,errorMessage:""}}}));try{const X=B?"ca":"cs",ge=await Qr.getServiceProvider(W,X);if(ge){const be=[...Q.subsidiaries];be[le]={...be[le],[X]:ge},ae($e=>({...$e,subsidiaries:be})),oe($e=>({...$e,[le]:{...$e[le],[B?"ca":"cs"]:{isValid:!0,isInvalid:!1,isLoading:!1,errorMessage:""}}}))}else{const be=`Subsidiary ${le+1}: Invalid ${B?"CA":"CS"} code "${W}". Please enter a valid service provider code.`;oe($e=>({...$e,[le]:{...$e[le],[B?"ca":"cs"]:{isValid:!1,isInvalid:!0,isLoading:!1,errorMessage:be}}})),m($e=>[...$e,be])}if(H==="csCode"&&W&&ge){j(!0);try{if(console.log(" Auto-saving profile with subsidiary CS code:",W),!await Qr.updateStartupProfile(e.id,Q))throw new Error("Failed to save profile");const{startupService:$e}=await Ai(async()=>{const{startupService:pe}=await import("./startupService-CYBgYt2S.js");return{startupService:pe}},[]),Ze=await $e.requestCSAssignment(W,`Assignment request from ${e.name} subsidiary`,e.id,e.name);Ze.success?(console.log("CS assignment request created successfully for subsidiary"),v(pe=>[...pe,{id:Date.now(),type:"success",message:`CS assignment request sent to ${W} for subsidiary and profile saved`,timestamp:new Date}])):(console.error("Failed to create CS assignment request for subsidiary:",Ze.error),v(pe=>[...pe,{id:Date.now(),type:"error",message:`Failed to request CS assignment for subsidiary: ${Ze.error}`,timestamp:new Date}]))}catch(be){console.error("Error creating CS assignment request for subsidiary:",be),v($e=>[...$e,{id:Date.now(),type:"error",message:"Failed to request CS assignment for subsidiary",timestamp:new Date}])}finally{j(!1)}}}catch(X){console.error("Error fetching service provider:",X);const ge=`Error validating ${B?"CA":"CS"} code. Please try again.`;oe(be=>({...be,[le]:{...be[le],[B?"ca":"cs"]:{isValid:!1,isInvalid:!0,isLoading:!1,errorMessage:ge}}})),m(be=>[...be,ge])}}else if(oe(X=>({...X,[le]:{...X[le],[B?"ca":"cs"]:{isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""}}})),W==="")try{console.log(` Auto-saving profile with cleared subsidiary ${B?"CA":"CS"} code`),await Qr.updateStartupProfile(e.id,Q),console.log(`Profile saved with cleared subsidiary ${B?"CA":"CS"} code`)}catch(X){console.error(`Error saving profile with cleared subsidiary ${B?"CA":"CS"} code:`,X)}},je=(le,xe)=>{const H=[...Q.subsidiaries];H[le]={...H[le],[xe]:void 0},ae(W=>({...W,subsidiaries:H}))},ke=le=>{const xe=parseInt(le.target.value,10),H=Q.subsidiaries,W=[];if(console.log(` Changing subsidiary count from ${H.length} to ${xe}`),xe===0)console.log(" Setting subsidiaries to empty array"),ae(B=>({...B,subsidiaries:[]})),oe({});else{for(let ee=0;ee<xe;ee++)H[ee]?W.push(H[ee]):W.push({id:0,country:"",companyType:"",registrationDate:"",caCode:"",csCode:"",ca:void 0,cs:void 0});ae(ee=>({...ee,subsidiaries:W}));const B={};for(let ee=0;ee<xe;ee++)B[ee]={ca:{isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""},cs:{isValid:!1,isInvalid:!1,isLoading:!1,errorMessage:""}};oe(B)}},De=(le,xe)=>{const{name:H,value:W}=xe.target,B=[...Q.subsidiaries];if(H==="country"){const ee=S[W]||S.default||{},X=Object.keys(ee).filter(be=>be!=="default"),ge=X.length>0?X:ee.default?["default"]:[];B[le]={...B[le],country:W,companyType:ge[0]}}else if(H==="registrationDate"){const ee=new Date(W),X=new Date;if(X.setHours(23,59,59,999),ee>X){v(ge=>[...ge,{id:Date.now(),type:"error",message:"Registration date cannot be in the future",timestamp:new Date}]);return}B[le]={...B[le],[H]:W}}else B[le]={...B[le],[H]:W};ae(ee=>({...ee,subsidiaries:B}))},Ee=le=>{const xe=parseInt(le.target.value,10),H=Q.internationalOps,W=[];if(console.log(` Changing international operations count from ${H.length} to ${xe}`),xe===0)console.log(" Setting international operations to empty array"),ae(B=>({...B,internationalOps:[]}));else{for(let B=0;B<xe;B++)H[B]?W.push(H[B]):W.push({id:0,country:"",companyType:"",startDate:""});ae(B=>({...B,internationalOps:W}))}},ne=(le,xe)=>{const{name:H,value:W}=xe.target,B=[...Q.internationalOps];B[le]={...B[le],[H]:W},ae(ee=>({...ee,internationalOps:B}))},Ne=async le=>{await Qr.markNotificationAsRead(le),v(xe=>xe.map(H=>H.id===le?{...H,is_read:!0}:H))};return u?n.jsx("div",{className:"space-y-6",children:n.jsx(tt,{children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/3 mb-4"}),n.jsx("div",{className:"h-32 bg-slate-200 rounded"})]})})}):n.jsxs("div",{className:"bg-slate-50 p-8 space-y-8",children:[f.length>0&&n.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-800 rounded-xl p-4",children:[n.jsx("div",{className:"font-semibold mb-2",children:"Please fix the following issues:"}),n.jsx("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:f.map((le,xe)=>n.jsx("li",{children:le},xe))})]}),g.filter(le=>!le.is_read).length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx($p,{className:"w-5 h-5 text-blue-600"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Recent Updates"})]}),n.jsx("div",{className:"space-y-2",children:g.filter(le=>!le.is_read).slice(0,3).map(le=>n.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-sm",children:le.title}),n.jsx("p",{className:"text-xs text-slate-600",children:le.message})]}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>Ne(le.id),children:"Mark Read"})]},le.id))})]}),b&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Ap,{className:"w-5 h-5 text-green-600"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Verification Documents"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.government_id&&n.jsx("div",{className:"p-4 bg-slate-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Government ID"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Identity verification document"})]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>window.open(b.government_id,"_blank"),className:"flex items-center gap-1",children:[n.jsx(_i,{className:"w-4 h-4"}),"View"]})]})}),b.ca_license&&n.jsx("div",{className:"p-4 bg-slate-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Professional License"}),n.jsx("p",{className:"text-sm text-slate-600",children:"CA/CS license or role-specific document"})]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>window.open(b.ca_license,"_blank"),className:"flex items-center gap-1",children:[n.jsx(_i,{className:"w-4 h-4"}),"View"]})]})}),b.financial_advisor_license_url&&n.jsx("div",{className:"p-4 bg-slate-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Financial Advisor License"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Investment advisor license"})]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>window.open(b.financial_advisor_license_url,"_blank"),className:"flex items-center gap-1",children:[n.jsx(_i,{className:"w-4 h-4"}),"View"]})]})}),b.logo_url&&n.jsx("div",{className:"p-4 bg-slate-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Company Logo"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Company branding logo"})]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>window.open(b.logo_url,"_blank"),className:"flex items-center gap-1",children:[n.jsx(_i,{className:"w-4 h-4"}),"View"]})]})}),b.investment_advisor_code&&n.jsx("div",{className:"p-4 bg-slate-50 rounded-lg",children:n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Investment Advisor Code"}),n.jsxs("p",{className:"text-sm text-slate-600",children:["Code: ",b.investment_advisor_code]})]})})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Company Profile"}),se&&!i&&n.jsxs("button",{onClick:_e,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center gap-2 shadow-md hover:shadow-lg",style:{display:"block"},children:[n.jsx(df,{size:18})," Edit Profile"]}),!se&&n.jsxs("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:["Debug: Edit button hidden - canEdit: ",se.toString(),", userRole: ",t,", isViewOnly: ",a.toString()]})]}),n.jsxs("fieldset",{disabled:!i||!se,className:"space-y-8",children:[!i&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),n.jsx("p",{className:"text-blue-800 font-medium",children:'View Mode - Click "Edit Profile" to modify information'})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-xl border border-slate-200 p-8 hover:shadow-2xl transition-shadow duration-300",children:n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Primary Details"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs(Mc,{label:"Country of Registration",name:"countryOfRegistration",value:Q.country,onChange:P,disabled:!i,children:[n.jsx("option",{value:"",children:"Select Country"}),de.map(le=>{const xe=S[le],H=(xe==null?void 0:xe.country_name)||le;return n.jsx("option",{value:le,children:H},le)})]}),n.jsxs(Mc,{label:"Company Type",name:"companyType",value:Q.companyType,onChange:P,disabled:!i,children:[n.jsx("option",{value:"",children:"Select Company Type"}),he.length>0?he.map(le=>n.jsx("option",{value:le,children:le},le)):n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"Private Limited Company (Pvt. Ltd.)",children:"Private Limited Company (Pvt. Ltd.)"}),n.jsx("option",{value:"Public Limited Company (Ltd.)",children:"Public Limited Company (Ltd.)"}),n.jsx("option",{value:"Limited Liability Partnership (LLP)",children:"Limited Liability Partnership (LLP)"}),n.jsx("option",{value:"One Person Company (OPC)",children:"One Person Company (OPC)"}),n.jsx("option",{value:"Partnership Firm",children:"Partnership Firm"}),n.jsx("option",{value:"Sole Proprietorship",children:"Sole Proprietorship"}),n.jsx("option",{value:"Section 8 Company (Non-Profit)",children:"Section 8 Company (Non-Profit)"}),n.jsx("option",{value:"NGO (Trust / Society)",children:"NGO (Trust / Society)"})]})]}),n.jsxs(Mc,{label:"Currency",name:"currency",value:Q.currency||"USD",onChange:P,disabled:!i,children:[n.jsx("option",{value:"USD",children:"USD - US Dollar"}),n.jsx("option",{value:"INR",children:"INR - Indian Rupee"}),n.jsx("option",{value:"BTN",children:"BTN - Bhutanese Ngultrum"}),n.jsx("option",{value:"AMD",children:"AMD - Armenian Dram"}),n.jsx("option",{value:"BYN",children:"BYN - Belarusian Ruble"}),n.jsx("option",{value:"GEL",children:"GEL - Georgian Lari"}),n.jsx("option",{value:"ILS",children:"ILS - Israeli Shekel"}),n.jsx("option",{value:"JOD",children:"JOD - Jordanian Dinar"}),n.jsx("option",{value:"NGN",children:"NGN - Nigerian Naira"}),n.jsx("option",{value:"PHP",children:"PHP - Philippine Peso"}),n.jsx("option",{value:"RUB",children:"RUB - Russian Ruble"}),n.jsx("option",{value:"SGD",children:"SGD - Singapore Dollar"}),n.jsx("option",{value:"LKR",children:"LKR - Sri Lankan Rupee"}),n.jsx("option",{value:"GBP",children:"GBP - British Pound"}),n.jsx("option",{value:"EUR",children:"EUR - Euro"}),n.jsx("option",{value:"HKD",children:"HKD - Hong Kong Dollar"}),n.jsx("option",{value:"RSD",children:"RSD - Serbian Dinar"}),n.jsx("option",{value:"BRL",children:"BRL - Brazilian Real"}),n.jsx("option",{value:"VND",children:"VND - Vietnamese Dong"}),n.jsx("option",{value:"MMK",children:"MMK - Myanmar Kyat"}),n.jsx("option",{value:"AZN",children:"AZN - Azerbaijani Manat"}),n.jsx("option",{value:"PKR",children:"PKR - Pakistani Rupee"})]}),n.jsx(V1,{label:"Date of Registration",name:"registrationDate",type:"date",value:Q.registrationDate,onChange:P,disabled:!i})]})]}),n.jsx("div",{className:"border-t border-slate-200"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Service Providers"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center gap-2",children:[n.jsx(Wp,{size:16})," Chartered Accountant"]}),Q.ca?n.jsx(L0,{provider:Q.ca,onRemove:()=>ae(le=>({...le,ca:void 0})),isEditing:i,type:"ca"}):n.jsx(R0,{name:"caCode",placeholder:"Enter CA-Code",value:Q.caServiceCode||Q.caCode||"",onChange:Z,disabled:!i,isValid:L.isValid,isInvalid:L.isInvalid,isLoading:L.isLoading,errorMessage:L.errorMessage})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center gap-2",children:[n.jsx(Ap,{size:16})," Company Secretary"]}),Q.cs?n.jsx(L0,{provider:Q.cs,onRemove:()=>ae(le=>({...le,cs:void 0})),isEditing:i,type:"cs"}):n.jsx(R0,{name:"csCode",placeholder:"Enter CS-Code",value:Q.csServiceCode||Q.csCode||"",onChange:Z,disabled:!i||x,isValid:z.isValid,isInvalid:z.isInvalid,isLoading:z.isLoading||x,errorMessage:z.errorMessage})]})]})]})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-xl border border-slate-200 p-8 hover:shadow-2xl transition-shadow duration-300",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Subsidiaries"})]}),n.jsx("div",{className:"max-w-xs",children:n.jsxs(Mc,{label:"Number of Subsidiaries",value:Q.subsidiaries.length,onChange:ke,disabled:!i,children:[n.jsx("option",{value:0,children:"0"}),n.jsx("option",{value:1,children:"1"}),n.jsx("option",{value:2,children:"2"}),n.jsx("option",{value:3,children:"3"})]})}),Q.subsidiaries.length===0?n.jsxs("div",{className:"bg-blue-50 p-6 border border-blue-200 rounded-xl text-center",children:[n.jsx("p",{className:"text-blue-700 font-medium",children:"No subsidiaries added"}),n.jsx("p",{className:"text-blue-600 text-sm mt-1",children:"Add subsidiaries to manage their compliance requirements"})]}):Q.subsidiaries.map((le,xe)=>{var H,W,B,ee,X,ge,be,$e,Ze,pe,V,Le,ft,kt,Mt,Lt;return n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 border border-blue-200 rounded-xl space-y-6 shadow-md",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("h4",{className:"md:col-span-3 text-lg font-bold text-blue-900 flex items-center gap-2",children:[n.jsx("div",{className:"w-6 h-6 bg-blue-200 rounded-full flex items-center justify-center text-sm font-bold text-blue-700",children:xe+1}),"Subsidiary ",xe+1]}),n.jsxs(Mc,{label:"Country",name:"country",value:le.country,onChange:at=>De(xe,at),disabled:!i,children:[n.jsx("option",{value:"",children:"Select Country"}),de.map(at=>{const Nt=S[at],Ie=(Nt==null?void 0:Nt.country_name)||at;return n.jsx("option",{value:at,children:Ie},at)})]}),n.jsxs(Mc,{label:"Company Type",name:"companyType",value:le.companyType,onChange:at=>De(xe,at),disabled:!i,children:[n.jsx("option",{value:"",children:"Select Company Type"}),(()=>{const at=S[le.country];return!at||!at.company_types?[]:Object.keys(at.company_types)})().map(at=>n.jsx("option",{value:at,children:at},at))]}),n.jsx(V1,{label:"Registration Date",name:"registrationDate",type:"date",value:le.registrationDate,onChange:at=>De(xe,at),disabled:!i})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-6 border-t border-blue-200",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center gap-2",children:[n.jsx(Wp,{size:16})," Chartered Accountant"]}),le.ca?n.jsx(L0,{provider:le.ca,onRemove:()=>je(xe,"ca"),isEditing:i,type:"ca"}):n.jsx(R0,{name:"caCode",placeholder:"Enter CA-Code",value:le.caCode||"",onChange:at=>ce(xe,at),disabled:!i,isValid:((W=(H=U[xe])==null?void 0:H.ca)==null?void 0:W.isValid)||!1,isInvalid:((ee=(B=U[xe])==null?void 0:B.ca)==null?void 0:ee.isInvalid)||!1,isLoading:((ge=(X=U[xe])==null?void 0:X.ca)==null?void 0:ge.isLoading)||!1,errorMessage:(($e=(be=U[xe])==null?void 0:be.ca)==null?void 0:$e.errorMessage)||""})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center gap-2",children:[n.jsx(Ap,{size:16})," Company Secretary"]}),le.cs?n.jsx(L0,{provider:le.cs,onRemove:()=>je(xe,"cs"),isEditing:i,type:"cs"}):n.jsx(R0,{name:"csCode",placeholder:"Enter CS-Code",value:le.csCode||"",onChange:at=>ce(xe,at),disabled:!i,isValid:((pe=(Ze=U[xe])==null?void 0:Ze.cs)==null?void 0:pe.isValid)||!1,isInvalid:((Le=(V=U[xe])==null?void 0:V.cs)==null?void 0:Le.isInvalid)||!1,isLoading:((kt=(ft=U[xe])==null?void 0:ft.cs)==null?void 0:kt.isLoading)||!1,errorMessage:((Lt=(Mt=U[xe])==null?void 0:Mt.cs)==null?void 0:Lt.errorMessage)||""})]})]})]},le.id)})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-xl border border-slate-200 p-8 hover:shadow-2xl transition-shadow duration-300",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"International Operations"})]}),n.jsx("p",{className:"text-sm text-slate-600 bg-blue-50 p-3 rounded-lg border border-blue-200",children:"Define countries where you do business without a subsidiary."}),n.jsx("div",{className:"max-w-xs",children:n.jsx(Mc,{label:"Number of International Operations",value:Q.internationalOps.length,onChange:Ee,disabled:!i,children:[0,1,2,3,4,5].map(le=>n.jsx("option",{value:le,children:le},le))})}),Q.internationalOps.length===0?n.jsxs("div",{className:"bg-blue-50 p-6 border border-blue-200 rounded-xl text-center",children:[n.jsx("p",{className:"text-blue-700 font-medium",children:"No international operations added"}),n.jsx("p",{className:"text-blue-600 text-sm mt-1",children:"Add countries where you do business without subsidiaries"})]}):Q.internationalOps.map((le,xe)=>n.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 border border-blue-200 rounded-xl shadow-md",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("h4",{className:"md:col-span-3 text-lg font-bold text-blue-900 flex items-center gap-2",children:[n.jsx("div",{className:"w-6 h-6 bg-blue-200 rounded-full flex items-center justify-center text-sm font-bold text-blue-700",children:xe+1}),"Operation ",xe+1]}),n.jsx("div",{className:"md:col-span-1",children:n.jsxs(Mc,{label:"Country",name:"country",value:le.country,onChange:H=>ne(xe,H),disabled:!i,children:[n.jsx("option",{value:"",children:"Select Country"}),de.map(H=>{const W=S[H],B=(W==null?void 0:W.country_name)||H;return n.jsx("option",{value:H,children:B},H)})]})}),n.jsx("div",{className:"md:col-span-1",children:n.jsxs(Mc,{label:"Company Type",name:"companyType",value:le.companyType,onChange:H=>ne(xe,H),disabled:!i,children:[n.jsx("option",{value:"",children:"Select Company Type"}),(()=>{const H=S[le.country];return!H||!H.company_types?[]:Object.keys(H.company_types)})().map(H=>n.jsx("option",{value:H,children:H},H))]})}),n.jsx("div",{className:"md:col-span-1",children:n.jsx(V1,{label:"Start Date",name:"startDate",type:"date",value:le.startDate,onChange:H=>ne(xe,H),disabled:!i})})]})},le.id))]})})]}),i&&n.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-6",children:n.jsxs("div",{className:"flex flex-wrap justify-end items-center gap-4",children:[n.jsxs("button",{onClick:Y,className:"bg-slate-100 text-slate-700 px-6 py-3 rounded-lg font-semibold hover:bg-slate-200 transition-colors flex items-center gap-2",children:[n.jsx(ac,{size:18})," Cancel"]}),n.jsxs("button",{onClick:ye,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center gap-2 shadow-md hover:shadow-lg",children:[n.jsx(Mv,{size:18})," Save Changes"]})]})})]})};class hee{async updateStartupOverallCompliance(t,r){try{const{error:a}=await G.from("startups").update({compliance_status:r}).eq("id",t);if(a)throw a;return!0}catch(a){return console.error("Error updating overall startup compliance:",a),!1}}async checkTablesExist(){try{const{data:t,error:r}=await G.from("compliance_checks").select("*").limit(1);return!r}catch(t){return console.log("Compliance tables do not exist yet:",t),!1}}async getComplianceTasks(t,r){try{if(!await this.checkTablesExist())return console.log("Compliance tables do not exist yet. Returning empty array."),[];let s=G.from("compliance_checks").select("*").eq("startup_id",t);r!=null&&r.entity&&(s=s.eq("entity_identifier",r.entity)),r!=null&&r.year&&(s=s.eq("year",r.year)),r!=null&&r.status&&(s=s.or(`ca_status.eq.${r.status},cs_status.eq.${r.status}`));const{data:i,error:l}=await s;if(l){if(console.error("Error fetching compliance tasks:",l),l.code==="42P01")return console.log("Compliance_checks table does not exist yet"),[];throw l}return(i||[]).map(d=>({taskId:d.task_id,entityIdentifier:d.entity_identifier,entityDisplayName:d.entity_display_name,year:d.year,task:d.task_name,caRequired:d.ca_required,csRequired:d.cs_required,caStatus:d.ca_status,csStatus:d.cs_status,uploads:[],documentUrl:void 0}))}catch(a){return console.error("Error in getComplianceTasks:",a),[]}}async getAllComplianceUploads(t){try{const{data:r,error:a}=await G.from("compliance_uploads").select("*").eq("startup_id",t);if(a)throw a;const s={};return(r||[]).forEach(i=>{s[i.task_id]||(s[i.task_id]=[]),s[i.task_id].push({id:i.id,taskId:i.task_id,fileName:i.file_name,fileUrl:i.file_url,uploadedBy:i.uploaded_by,uploadedAt:i.uploaded_at,fileSize:i.file_size,fileType:i.file_type})}),s}catch(r){return console.error("Error fetching compliance uploads:",r),{}}}async uploadComplianceDocument(t,r,a,s){try{const i=a.name.replace(/[^a-zA-Z0-9_.-]/g,"_"),l=`${t}/${r}/${Date.now()}_${i}`,{data:u,error:d}=await G.storage.from("compliance-documents").upload(l,a,{upsert:!0,contentType:a.type||"application/pdf",cacheControl:"3600"});if(d)throw d;const{data:f}=G.storage.from("compliance-documents").getPublicUrl(l),{data:m,error:g}=await G.from("compliance_uploads").insert({startup_id:t,task_id:r,file_name:a.name,file_url:f.publicUrl,uploaded_by:s,file_size:a.size,file_type:a.type}).select().single();if(g)throw g;return{id:m.id,taskId:m.task_id,fileName:m.file_name,fileUrl:m.file_url,uploadedBy:m.uploaded_by,uploadedAt:m.uploaded_at,fileSize:m.file_size,fileType:m.file_type}}catch(i){return console.error("Error uploading compliance document:",i),null}}async deleteComplianceUpload(t){try{const{error:r}=await G.from("compliance_uploads").delete().eq("id",t);if(r)throw r;return!0}catch(r){return console.error("Error deleting compliance upload:",r),!1}}async updateComplianceStatus(t,r,a,s,i){try{const l=a==="ca"?{ca_status:s}:{cs_status:s},{error:u}=await G.from("compliance_checks").update(l).eq("startup_id",t).eq("task_id",r);if(u)throw u;return!0}catch(l){return console.error("Error updating compliance status:",l),!1}}async getComplianceSummary(t){try{if(!await this.checkTablesExist())return{totalTasks:0,completedTasks:0,pendingTasks:0,overdueTasks:0,complianceRate:0};const{data:a,error:s}=await G.from("compliance_checks").select("*").eq("startup_id",t);if(s)return console.error("Error fetching compliance summary:",s),{totalTasks:0,completedTasks:0,pendingTasks:0,overdueTasks:0,complianceRate:0};const i=a||[],l=i.length,u=i.filter(g=>g.ca_status===_t.Verified&&g.cs_status===_t.Verified).length,d=i.filter(g=>g.ca_status===_t.Pending||g.cs_status===_t.Pending).length,f=i.filter(g=>{const v=new Date().getFullYear();return g.year<v&&(g.ca_status===_t.Pending||g.cs_status===_t.Pending)}).length,m=l>0?u/l*100:0;return{totalTasks:l,completedTasks:u,pendingTasks:d,overdueTasks:f,complianceRate:m}}catch(r){return console.error("Error in getComplianceSummary:",r),{totalTasks:0,completedTasks:0,pendingTasks:0,overdueTasks:0,complianceRate:0}}}subscribeToComplianceChanges(t,r){return G.channel(`compliance_${t}`).on("postgres_changes",{event:"*",schema:"public",table:"compliance_checks",filter:`startup_id=eq.${t}`},r).on("postgres_changes",{event:"*",schema:"public",table:"compliance_uploads",filter:`startup_id=eq.${t}`},r).subscribe()}async generateComplianceTasksFromProfile(t){try{console.log(" Generating compliance tasks from profile for startup:",t);const{data:r,error:a}=await G.rpc("generate_compliance_tasks_for_startup",{startup_id_param:t});if(a)throw console.error("Error generating compliance tasks from profile:",a),a;const s=(r||[]).map(i=>({taskId:i.task_id,entityIdentifier:i.entity_identifier,entityDisplayName:i.entity_display_name,year:i.year,task:i.task_name,caRequired:i.ca_required,csRequired:i.cs_required,caStatus:_t.Pending,csStatus:_t.Pending,uploads:[],documentUrl:void 0}));return console.log(" Generated compliance tasks:",s),s}catch(r){return console.error("Error generating compliance tasks from profile:",r),[]}}async syncComplianceTasksWithDatabase(t){try{console.log(" Syncing compliance tasks with database for startup:",t);const r=await this.generateComplianceTasksFromProfile(t);if(!r||r.length===0)return console.warn(" Generated 0 compliance tasks. Skipping deletion to avoid wiping existing data."),!0;const{error:a}=await G.from("compliance_checks").delete().eq("startup_id",t);if(a)throw console.error("Error clearing existing compliance tasks:",a),a;if(r.length>0){const s=r.map(l=>({startup_id:t,task_id:l.taskId,entity_identifier:l.entityIdentifier,entity_display_name:l.entityDisplayName,year:l.year,task_name:l.task,ca_required:l.caRequired,cs_required:l.csRequired,ca_status:l.caStatus,cs_status:l.csStatus}));console.log(" Inserting compliance task records:",s);const{error:i}=await G.from("compliance_checks").upsert(s,{onConflict:"startup_id,task_id,entity_identifier,year"});if(i)throw console.error("Error inserting compliance tasks:",i),i}return console.log(" Compliance tasks synced successfully"),!0}catch(r){return console.error("Error syncing compliance tasks with database:",r),!1}}async getComplianceTasksWithRealtime(t){try{const r=await this.getComplianceTasks(t);if(r.length>0)return console.log(" Found existing compliance tasks in database:",r.length),r;console.log(" No tasks in database, generating from profile...");const a=await this.generateComplianceTasksFromProfile(t);return a.length>0?(await this.syncComplianceTasksWithDatabase(t),a):[]}catch(r){return console.error("Error getting compliance tasks with realtime:",r),[]}}subscribeToComplianceTaskChanges(t,r){const a=G.channel(`compliance_tasks_${t}`).on("postgres_changes",{event:"*",schema:"public",table:"compliance_checks",filter:`startup_id=eq.${t}`},s=>{console.log("Compliance task change detected:",s),r(s)}).on("postgres_changes",{event:"*",schema:"public",table:"compliance_uploads",filter:`startup_id=eq.${t}`},s=>{console.log("Compliance upload change detected:",s),r(s)}).subscribe();return{unsubscribe:()=>{a.unsubscribe()}}}}const Y6=new hee;class mee{async checkFirstYearTasksCompleted(t,r,a){if(r.length===0)return!0;try{const s=r.map(d=>`rule_${d.id}_${t}_${a}`);console.log(" Checking first-year tasks completion:",{startupId:t,registrationYear:a,firstYearTaskIds:s,firstYearRulesCount:r.length});const{data:i,error:l}=await G.from("compliance_checks").select("task_id, ca_status, cs_status").eq("startup_id",t).in("task_id",s);if(l)return console.error("Error checking first-year tasks:",l),!1;if(console.log(" Found first-year tasks in database:",i),!i||i.length===0)return console.log(" No first-year tasks found in database - not completed"),!1;for(const d of i){const f=!d.ca_status||d.ca_status===_t.Compliant,m=!d.cs_status||d.cs_status===_t.Compliant;if(console.log(" Checking task completion:",{taskId:d.task_id,caStatus:d.ca_status,csStatus:d.cs_status,isCACompleted:f,isCSCompleted:m}),!f||!m)return console.log(" First-year task not completed:",d.task_id),!1}const u=i.length===s.length;return console.log(" First-year tasks completion status:",u),u}catch(s){return console.error("Error checking first-year tasks completion:",s),!1}}getApplicablePeriods(t,r,a){const s=[];switch(t){case"first-year":s.push({year:r});break;case"annual":for(let i=r;i<=a;i++)s.push({year:i});break;case"quarterly":for(let i=r;i<=a;i++)for(let l=1;l<=4;l++)s.push({year:i,period:`Q${l}`});break;case"monthly":for(let i=r;i<=a;i++)for(let l=1;l<=12;l++)s.push({year:i,period:`M${l}`});break;default:s.push({year:a});break}return s}async getComplianceTasksForStartup(t){try{console.log(" getComplianceTasksForStartup called for startup:",t);try{console.log(" Calling database function generate_compliance_tasks_for_startup for startup:",t);const{data:S,error:T}=await G.from("subsidiaries").select("*").eq("startup_id",t);console.log(" Subsidiary data in database for startup",t,":",S),T&&console.error(" Error fetching subsidiary data:",T);const{data:E,error:D}=await G.rpc("generate_compliance_tasks_for_startup",{startup_id_param:t});if(console.log(" Database function response:",{dbTasks:E,dbError:D}),!D&&E&&E.length>0){console.log(" Found compliance tasks from database function:",E);const L=E.map(F=>({taskId:F.task_id,entityIdentifier:F.entity_identifier,entityDisplayName:F.entity_display_name,year:F.year,task:F.task_name,caRequired:F.ca_required,csRequired:F.cs_required,caStatus:"Pending",csStatus:"Pending",uploads:[],complianceRule:{id:F.task_id,name:F.task_name,description:"",frequency:F.task_type==="firstYear"?"first-year":"annual",verification_required:F.ca_required||F.cs_required,ca_type:F.ca_required?"CA":void 0,cs_type:F.cs_required?"CS":void 0}}));return console.log(" Transformed integrated tasks:",L),L}else!D&&E&&E.length===0?console.log(" Database function returned empty results, falling back to comprehensive rules"):D&&console.log(" Database function error, falling back to comprehensive rules:",D)}catch(S){console.log(" Database function not available, falling back to comprehensive rules:",S)}const{data:r,error:a}=await G.from("startups").select("country_of_registration, company_type, registration_date").eq("id",t).single();if(a||!r)return console.error("Error fetching startup data:",a),[];const s=r.country_of_registration,i=r.company_type,l=r.registration_date;if(!s||!i)return console.log("Startup missing country or company type, cannot load compliance rules"),[];const d={"United States":"US",India:"IN","United Kingdom":"GB",Canada:"CA",Australia:"AU",Germany:"DE",France:"FR",Singapore:"SG",Japan:"JP",China:"CN",Brazil:"BR",Mexico:"MX","South Africa":"ZA",Nigeria:"NG",Kenya:"KE",Egypt:"EG",UAE:"AE","Saudi Arabia":"SA",Israel:"IL",Austria:"AT","Hong Kong":"HK",Netherlands:"NL",Finland:"FI",Greece:"GR",Vietnam:"VN",Myanmar:"MM",Azerbaijan:"AZ",Serbia:"RS",Monaco:"MC",Pakistan:"PK",Philippines:"PH",Jordan:"JO",Georgia:"GE",Belarus:"BY",Armenia:"AM",Bhutan:"BT","Sri Lanka":"LK",Russia:"RU",Italy:"IT",Spain:"ES",Portugal:"PT",Belgium:"BE",Switzerland:"CH",Sweden:"SE",Norway:"NO",Denmark:"DK",Ireland:"IE","New Zealand":"NZ","South Korea":"KR",Thailand:"TH",Malaysia:"MY",Indonesia:"ID",Bangladesh:"BD",Nepal:"NP"}[s]||s;console.log(` Converting country name "${s}" to country code "${d}"`);const f=l?new Date(l).getFullYear():new Date().getFullYear(),m=new Date().getFullYear();console.log(` Looking for compliance rules for country: ${d}, company type: ${i}`);const g=await an.getRulesByCountryAndCompanyType(d,i);console.log(` Found ${g.length} comprehensive rules for ${d}/${i}`);const v=await Y6.getComplianceTasksWithRealtime(t),x=await Y6.getAllComplianceUploads(t),j=[],b=g.filter(S=>S.frequency==="first-year"),A=await this.checkFirstYearTasksCompleted(t,b,f);console.log(` Processing ${g.length} comprehensive rules...`);for(const S of g){console.log(` Processing rule: ${S.compliance_name} (${S.frequency})`);const T=this.getApplicablePeriods(S.frequency,f,m);console.log(` Rule "${S.compliance_name}" has ${T.length} applicable periods:`,T);for(const E of T){const D=`rule_${S.id}_${t}_${E.year}${E.period?`_${E.period}`:""}`,L=v.find(z=>z.taskId===D);let F=S.compliance_name;if(E.period){if(E.period.startsWith("Q")){const z=E.period.substring(1);F=`${S.compliance_name} (Q${z} ${E.year})`}else if(E.period.startsWith("M")){const z=E.period.substring(1),M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];F=`${S.compliance_name} (${M[parseInt(z)-1]} ${E.year})`}}if(L){const z={...L,year:E.year,task:F,uploads:x[L.taskId]||[],complianceRule:S,frequency:S.frequency,complianceDescription:S.compliance_description,caType:S.ca_type,csType:S.cs_type};j.push(z)}else{const z={taskId:D,entityIdentifier:"startup",entityDisplayName:`Parent Company (${d})`,year:E.year,task:F,caRequired:S.verification_required==="CA"||S.verification_required==="both",csRequired:S.verification_required==="CS"||S.verification_required==="both",caStatus:_t.Pending,csStatus:_t.Pending,uploads:[],complianceRule:S,frequency:S.frequency,complianceDescription:S.compliance_description,caType:S.ca_type,csType:S.cs_type};j.push(z)}}}console.log(` Generated ${j.length} integrated tasks from comprehensive rules`);for(const S of v)if(!j.some(E=>E.taskId===S.taskId)){const E={...S,uploads:x[S.taskId]||[]};j.push(E)}return console.log(` Final integrated tasks count: ${j.length}`),j.sort((S,T)=>S.frequency==="first-year"&&T.frequency!=="first-year"?-1:S.frequency!=="first-year"&&T.frequency==="first-year"?1:S.year!==T.year?T.year-S.year:S.task.localeCompare(T.task)),j}catch(r){return console.error("Error getting integrated compliance tasks:",r),[]}}async updateComplianceStatus(t,r,a,s){try{const i=s==="CA"?"ca_status":"cs_status",{error:l}=await G.from("compliance_checks").update({[i]:a}).eq("startup_id",t).eq("task_id",r);if(l)throw console.error("Error updating compliance status:",l),l}catch(i){throw console.error("Error updating compliance status:",i),i}}async uploadComplianceDocument(t,r,a,s){try{const i=a.name.split(".").pop(),l=`${t}/${r}/${Date.now()}.${i}`,{data:u,error:d}=await G.storage.from("compliance-documents").upload(l,a);if(d)return console.error("Error uploading file to storage:",d),{success:!1,error:d.message};const{data:{publicUrl:f}}=G.storage.from("compliance-documents").getPublicUrl(l),{data:m,error:g}=await G.from("compliance_uploads").insert({startup_id:t,task_id:r,file_name:a.name,file_url:f,uploaded_by:s,file_size:a.size,file_type:a.type}).select().single();return g?(console.error("Error inserting upload record:",g),{success:!1,error:g.message}):{success:!0,uploadId:m.id}}catch(i){return console.error("Error uploading compliance document:",i),{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}async deleteComplianceUpload(t){try{const{data:r,error:a}=await G.from("compliance_uploads").select("file_url").eq("id",t).single();if(a)return console.error("Error fetching upload record:",a),!1;if(r.file_url){const i=r.file_url.split("/").pop();if(i){const{error:l}=await G.storage.from("compliance-documents").remove([i]);l&&console.warn("Error deleting file from storage:",l)}}const{error:s}=await G.from("compliance_uploads").delete().eq("id",t);return s?(console.error("Error deleting upload record:",s),!1):!0}catch(r){return console.error("Error deleting compliance upload:",r),!1}}async forceRegenerateComplianceTasks(t){try{console.log(" Force regenerating compliance tasks for startup:",t);const{error:r}=await G.from("compliance_checks").delete().eq("startup_id",t);if(r){console.error("Error clearing existing compliance tasks:",r);return}await this.syncComplianceTasksWithComprehensiveRules(t),console.log(" Compliance tasks force regenerated successfully")}catch(r){console.error("Error force regenerating compliance tasks:",r)}}async syncComplianceTasksWithComprehensiveRules(t){try{const r=await this.getComplianceTasksForStartup(t);for(const a of r)if(a.complianceRule&&a.taskId.startsWith("rule_")){const{data:s,error:i}=await G.from("compliance_checks").select("id").eq("startup_id",t).eq("task_id",a.taskId);if(i){console.warn("Error checking existing compliance check:",i);continue}if(!s||s.length===0){const{error:l}=await G.from("compliance_checks").upsert({startup_id:t,task_id:a.taskId,task_name:a.task,entity_identifier:a.entityIdentifier,entity_display_name:a.entityDisplayName,year:a.year,ca_required:a.caRequired,cs_required:a.csRequired,ca_status:a.caStatus,cs_status:a.csStatus,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{onConflict:"startup_id,task_id"});l?console.warn("Error upserting compliance check:",l):console.log("Successfully upserted compliance check:",a.taskId)}}}catch(r){console.error("Error syncing compliance tasks:",r)}}async getComplianceStats(t){try{const r=await this.getComplianceTasksForStartup(t),a={total:r.length,pending:0,compliant:0,nonCompliant:0};for(const s of r)s.caStatus===_t.Compliant&&s.csStatus===_t.Compliant?a.compliant++:s.caStatus===_t.NonCompliant||s.csStatus===_t.NonCompliant?a.nonCompliant++:a.pending++;return a}catch(r){return console.error("Error getting compliance stats:",r),{total:0,pending:0,compliant:0,nonCompliant:0}}}}const Uc=new mee,pee=Object.freeze(Object.defineProperty({__proto__:null,complianceRulesIntegrationService:Uc},Symbol.toStringTag,{value:"Module"}));class gee{async getAllSubmissions(){const{data:t,error:r}=await G.from("user_submitted_compliances").select(`
        *,
        submitted_by:submitted_by_user_id(name, email, role),
        reviewed_by:reviewed_by_user_id(name, email)
      `).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching user submitted compliances:",r),new Error("Failed to fetch user submitted compliances");return t||[]}async getMySubmissions(){const{data:{user:t}}=await G.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:r,error:a}=await G.from("user_submitted_compliances").select("*").eq("submitted_by_user_id",t.id).order("created_at",{ascending:!1});if(a)throw console.error("Error fetching my submissions:",a),new Error("Failed to fetch my submissions");return r||[]}async submitCompliance(t){const{data:{user:r}}=await G.auth.getUser();if(!r)throw new Error("User not authenticated");const{data:a,error:s}=await G.from("users").select("name, email, role").eq("id",r.id).single();if(s||!a)throw new Error("Failed to get user profile");const i={...t,submitted_by_user_id:r.id,submitted_by_name:a.name,submitted_by_role:a.role,submitted_by_email:a.email,status:"pending"},{data:l,error:u}=await G.from("user_submitted_compliances").insert(i).select().single();if(u)throw console.error("Error submitting compliance:",u),new Error("Failed to submit compliance");return l}async updateSubmissionStatus(t,r){const{data:{user:a}}=await G.auth.getUser();if(!a)throw new Error("User not authenticated");const s={...r,reviewed_by_user_id:a.id,reviewed_at:new Date().toISOString()},{data:i,error:l}=await G.from("user_submitted_compliances").update(s).eq("id",t).select().single();if(l)throw console.error("Error updating submission status:",l),new Error("Failed to update submission status");return i}async approveAndPromoteToMainRules(t){const{data:r,error:a}=await G.from("user_submitted_compliances").select("*").eq("id",t).single();if(a||!r)throw new Error("Failed to fetch submission");const s={country_code:r.country_code,country_name:r.country_name,ca_type:r.ca_type,cs_type:r.cs_type,company_type:r.company_type,compliance_name:r.compliance_name,compliance_description:r.compliance_description,frequency:r.frequency,verification_required:r.verification_required},{error:i}=await G.from("compliance_rules_comprehensive").insert(s);if(i)throw console.error("Error promoting to main rules:",i),new Error("Failed to promote to main compliance rules");await this.updateSubmissionStatus(t,{status:"approved",review_notes:"Approved and promoted to main compliance rules"})}async deleteSubmission(t){const{error:r}=await G.from("user_submitted_compliances").delete().eq("id",t);if(r)throw console.error("Error deleting submission:",r),new Error("Failed to delete submission")}async getSubmissionStats(){const{data:t,error:r}=await G.from("user_submitted_compliances").select("status");if(r)throw console.error("Error fetching submission stats:",r),new Error("Failed to fetch submission statistics");return{total:t.length,pending:t.filter(s=>s.status==="pending").length,approved:t.filter(s=>s.status==="approved").length,rejected:t.filter(s=>s.status==="rejected").length,under_review:t.filter(s=>s.status==="under_review").length}}}const Dh=new gee,xee=({currentUser:e,onSuccess:t,onCancel:r})=>{const[a,s]=_.useState({company_name:"",company_type:"",operation_type:"parent",country_code:"",country_name:"",ca_type:"",cs_type:"",compliance_name:"",compliance_description:"",frequency:"annual",verification_required:"both",justification:"",supporting_documents:[],regulatory_reference:""}),[i,l]=_.useState(!1),[u,d]=_.useState(null),[f,m]=_.useState(!1),g=j=>{const{name:b,value:A}=j.target;s(S=>({...S,[b]:A}))},v=async j=>{j.preventDefault();try{if(l(!0),d(null),!a.company_name||!a.company_type||!a.compliance_name)throw new Error("Please fill in all required fields");await Dh.submitCompliance(a),m(!0),t&&t()}catch(b){console.error("Error submitting compliance:",b),d(b instanceof Error?b.message:"Failed to submit compliance")}finally{l(!1)}},x=()=>{s({company_name:"",company_type:"",operation_type:"parent",country_code:"",country_name:"",ca_type:"",cs_type:"",compliance_name:"",compliance_description:"",frequency:"annual",verification_required:"both",justification:"",supporting_documents:[],regulatory_reference:""}),d(null),m(!1)};return f?n.jsx("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:n.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Compliance Submitted Successfully!"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Your compliance submission has been received and is pending admin review. You will be notified once it's been reviewed."}),n.jsxs("div",{className:"flex justify-center space-x-3",children:[n.jsx("button",{onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Submit Another"}),r&&n.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Close"})]})]})}):n.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Submit New Compliance"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Submit a new compliance requirement for your company's parent operations, subsidiaries, or international operations."})]}),u&&n.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:u}),n.jsxs("form",{onSubmit:v,className:"space-y-6",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Company Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name *"}),n.jsx("input",{type:"text",name:"company_name",value:a.company_name,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter company name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Type *"}),n.jsx("input",{type:"text",name:"company_type",value:a.company_type,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Private Limited Company"})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operation Type *"}),n.jsxs("select",{name:"operation_type",value:a.operation_type,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"parent",children:"Parent Company"}),n.jsx("option",{value:"subsidiary",children:"Subsidiary"}),n.jsx("option",{value:"international",children:"International Operations"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Location Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country Code *"}),n.jsx("input",{type:"text",name:"country_code",value:a.country_code,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., IN, US, UK",maxLength:10})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country Name *"}),n.jsx("input",{type:"text",name:"country_name",value:a.country_name,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., India, United States"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Professional Types"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CA Type"}),n.jsx("input",{type:"text",name:"ca_type",value:a.ca_type,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Chartered Accountant"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CS Type"}),n.jsx("input",{type:"text",name:"cs_type",value:a.cs_type,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Company Secretary"})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Compliance Details"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compliance Name *"}),n.jsx("input",{type:"text",name:"compliance_name",value:a.compliance_name,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Annual Return Filing"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compliance Description"}),n.jsx("textarea",{name:"compliance_description",value:a.compliance_description,onChange:g,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe the compliance requirement..."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frequency *"}),n.jsxs("select",{name:"frequency",value:a.frequency,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"first-year",children:"First Year"}),n.jsx("option",{value:"monthly",children:"Monthly"}),n.jsx("option",{value:"quarterly",children:"Quarterly"}),n.jsx("option",{value:"annual",children:"Annual"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Required *"}),n.jsxs("select",{name:"verification_required",value:a.verification_required,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"CA",children:"CA"}),n.jsx("option",{value:"CS",children:"CS"}),n.jsx("option",{value:"both",children:"Both"})]})]})]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Justification"}),n.jsx("textarea",{name:"justification",value:a.justification,onChange:g,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Explain why this compliance is needed..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Regulatory Reference"}),n.jsx("input",{type:"text",name:"regulatory_reference",value:a.regulatory_reference,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Section 92 of Companies Act, 2013"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[r&&n.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),n.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Reset"}),n.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:i?"Submitting...":"Submit Compliance"})]})]})]})},W_=({currentUser:e,userRole:t,className:r=""})=>{const[a,s]=_.useState(!1),i=()=>{switch(t){case"Startup":return"Submit New Compliance";case"CA":return"Add Compliance Rule";case"CS":return"Add Compliance Rule";default:return"Submit Compliance"}},l=()=>{switch(t){case"Startup":return"Submit compliance requirements for your company's parent operations, subsidiaries, or international operations";case"CA":return"Add new compliance rules based on your professional expertise for parent companies, subsidiaries, or international operations";case"CS":return"Add new compliance rules based on your professional expertise for parent companies, subsidiaries, or international operations";default:return"Submit new compliance requirements"}};return a?n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:n.jsx("div",{className:"relative top-4 mx-auto p-5 w-full max-w-4xl",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg",children:[n.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:i()}),n.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsx("div",{className:"p-6",children:n.jsx(xee,{currentUser:e,onSuccess:()=>{s(!1)},onCancel:()=>s(!1)})})]})})}):n.jsx("div",{className:`bg-white rounded-lg shadow border p-6 ${r}`,children:n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx(La,{className:"w-6 h-6 text-blue-600"})})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:i()}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:l()}),n.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[n.jsx(Wi,{className:"w-4 h-4 mr-2"}),i()]})]})]})})};class vee{async getIPTrademarkRecords(t){try{const{data:r,error:a}=await G.from("ip_trademark_records").select(`
                    *,
                    documents:ip_trademark_documents(*)
                `).eq("startup_id",t).order("created_at",{ascending:!1});if(a)throw console.error("Error fetching IP/trademark records:",a),a;return r||[]}catch(r){throw console.error("Error in getIPTrademarkRecords:",r),r}}async getIPTrademarkRecord(t){try{const{data:r,error:a}=await G.from("ip_trademark_records").select(`
                    *,
                    documents:ip_trademark_documents(*)
                `).eq("id",t).single();if(a)throw console.error("Error fetching IP/trademark record:",a),a;return r}catch(r){throw console.error("Error in getIPTrademarkRecord:",r),r}}async createIPTrademarkRecord(t,r){try{const{data:a,error:s}=await G.from("ip_trademark_records").insert({startup_id:t,type:r.type,name:r.name,description:r.description,registration_number:r.registrationNumber,registration_date:r.registrationDate,expiry_date:r.expiryDate,jurisdiction:r.jurisdiction,status:r.status||dl.Active,owner:r.owner,filing_date:r.filingDate,priority_date:r.priorityDate,renewal_date:r.renewalDate,estimated_value:r.estimatedValue,notes:r.notes}).select().single();if(s)throw console.error("Error creating IP/trademark record:",s),s;return a}catch(a){throw console.error("Error in createIPTrademarkRecord:",a),a}}async updateIPTrademarkRecord(t,r){try{const a={};r.type!==void 0&&(a.type=r.type),r.name!==void 0&&(a.name=r.name),r.description!==void 0&&(a.description=r.description),r.registrationNumber!==void 0&&(a.registration_number=r.registrationNumber),r.registrationDate!==void 0&&(a.registration_date=r.registrationDate),r.expiryDate!==void 0&&(a.expiry_date=r.expiryDate),r.jurisdiction!==void 0&&(a.jurisdiction=r.jurisdiction),r.status!==void 0&&(a.status=r.status),r.owner!==void 0&&(a.owner=r.owner),r.filingDate!==void 0&&(a.filing_date=r.filingDate),r.priorityDate!==void 0&&(a.priority_date=r.priorityDate),r.renewalDate!==void 0&&(a.renewal_date=r.renewalDate),r.estimatedValue!==void 0&&(a.estimated_value=r.estimatedValue),r.notes!==void 0&&(a.notes=r.notes);const{data:s,error:i}=await G.from("ip_trademark_records").update(a).eq("id",t).select().single();if(i)throw console.error("Error updating IP/trademark record:",i),i;return s}catch(a){throw console.error("Error in updateIPTrademarkRecord:",a),a}}async deleteIPTrademarkRecord(t){try{const{error:r}=await G.from("ip_trademark_records").delete().eq("id",t);if(r)throw console.error("Error deleting IP/trademark record:",r),r;return!0}catch(r){throw console.error("Error in deleteIPTrademarkRecord:",r),r}}async uploadIPTrademarkDocument(t,r,a,s){try{const i=r.name.split(".").pop(),u=`ip-trademark-documents/${`${t}_${Date.now()}.${i}`}`,{data:d,error:f}=await G.storage.from("compliance-documents").upload(u,r);if(f)throw console.error("Error uploading file:",f),f;const{data:m}=G.storage.from("compliance-documents").getPublicUrl(u),{data:g,error:v}=await G.from("ip_trademark_documents").insert({ip_record_id:t,file_name:r.name,file_url:m.publicUrl,file_type:r.type,file_size:r.size,document_type:a,uploaded_by:s}).select().single();if(v)throw console.error("Error saving document record:",v),v;return g}catch(i){throw console.error("Error in uploadIPTrademarkDocument:",i),i}}async deleteIPTrademarkDocument(t){try{const{data:r,error:a}=await G.from("ip_trademark_documents").select("file_url").eq("id",t).single();if(a)throw console.error("Error fetching document:",a),a;const i=new URL(r.file_url).pathname.split("/").slice(-2).join("/"),{error:l}=await G.storage.from("compliance-documents").remove([i]);l&&console.error("Error deleting file from storage:",l);const{error:u}=await G.from("ip_trademark_documents").delete().eq("id",t);if(u)throw console.error("Error deleting document record:",u),u;return!0}catch(r){throw console.error("Error in deleteIPTrademarkDocument:",r),r}}async getIPTrademarkDocuments(t){try{const{data:r,error:a}=await G.from("ip_trademark_documents").select("*").eq("ip_record_id",t).order("uploaded_at",{ascending:!1});if(a)throw console.error("Error fetching IP/trademark documents:",a),a;return r||[]}catch(r){throw console.error("Error in getIPTrademarkDocuments:",r),r}}async getIPTrademarkStats(t){try{const{data:r,error:a}=await G.from("ip_trademark_records").select("type, status, estimated_value").eq("startup_id",t);if(a)throw console.error("Error fetching IP/trademark stats:",a),a;const s={total:(r==null?void 0:r.length)||0,byType:{},byStatus:{},totalValue:0};return r==null||r.forEach(i=>{s.byType[i.type]=(s.byType[i.type]||0)+1,s.byStatus[i.status]=(s.byStatus[i.status]||0)+1,i.estimated_value&&(s.totalValue+=i.estimated_value)}),s}catch(r){throw console.error("Error in getIPTrademarkStats:",r),r}}}const Ch=new vee,yee=({startupId:e,currentUser:t,isViewOnly:r=!1})=>{const[a,s]=_.useState([]),[i,l]=_.useState(!0),[u,d]=_.useState(!1),[f,m]=_.useState(!1),[g,v]=_.useState(!1),[x,j]=_.useState(!1),[b,A]=_.useState(null),[S,T]=_.useState(null),[E,D]=_.useState(!1),[L,F]=_.useState(null),[z,M]=_.useState({type:Wl.Trademark,name:"",jurisdiction:"",status:dl.Active}),[U,oe]=_.useState(g2.RegistrationCertificate),R=_.useRef(null);_.useEffect(()=>{q()},[e]);const q=async()=>{try{l(!0);const P=await Ch.getIPTrademarkRecords(e);s(P)}catch(P){console.error("Error loading IP/trademark records:",P)}finally{l(!1)}},se=async()=>{try{await Ch.createIPTrademarkRecord(e,z),d(!1),M({type:Wl.Trademark,name:"",jurisdiction:"",status:dl.Active}),q()}catch(P){console.error("Error adding IP/trademark record:",P)}},J=async()=>{if(b)try{await Ch.updateIPTrademarkRecord(b.id,z),m(!1),A(null),q()}catch(P){console.error("Error updating IP/trademark record:",P)}},Q=async()=>{if(L)try{await Ch.deleteIPTrademarkRecord(L),j(!1),F(null),q()}catch(P){console.error("Error deleting IP/trademark record:",P)}},ae=async()=>{if(!(!S||!b))try{D(!0),await Ch.uploadIPTrademarkDocument(b.id,S,U,(t==null?void 0:t.email)||"Unknown"),v(!1),T(null),A(null),q()}catch(P){console.error("Error uploading document:",P)}finally{D(!1)}},he=async P=>{try{await Ch.deleteIPTrademarkDocument(P),q()}catch(Z){console.error("Error deleting document:",Z)}},de=P=>{A(P),M({type:P.type,name:P.name,description:P.description,registrationNumber:P.registrationNumber,registrationDate:P.registrationDate,expiryDate:P.expiryDate,jurisdiction:P.jurisdiction,status:P.status,owner:P.owner,filingDate:P.filingDate,priorityDate:P.priorityDate,renewalDate:P.renewalDate,estimatedValue:P.estimatedValue,notes:P.notes}),m(!0)},_e=P=>{A(P),v(!0)},Y=P=>{switch(P){case dl.Active:return"bg-green-100 text-green-800";case dl.Pending:return"bg-yellow-100 text-yellow-800";case dl.Expired:return"bg-red-100 text-red-800";case dl.Abandoned:return"bg-gray-100 text-gray-800";case dl.Cancelled:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ye=P=>{switch(P){case Wl.Trademark:return"bg-blue-100 text-blue-800";case Wl.Patent:return"bg-purple-100 text-purple-800";case Wl.Copyright:return"bg-green-100 text-green-800";case Wl.TradeSecret:return"bg-orange-100 text-orange-800";case Wl.DomainName:return"bg-cyan-100 text-cyan-800";default:return"bg-gray-100 text-gray-800"}};return i?n.jsx(tt,{children:n.jsxs("div",{className:"p-6 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Loading IP/Trademark records..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Intellectual Property & Trademarks"}),!r&&n.jsxs(Oe,{onClick:()=>d(!0),className:"flex items-center gap-2",children:[n.jsx(Wi,{className:"w-4 h-4"}),"Add IP/Trademark"]})]}),a.length===0?n.jsx(tt,{children:n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(La,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No IP/Trademark Records"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Start by adding your intellectual property and trademark records."}),!r&&n.jsxs(Oe,{onClick:()=>d(!0),className:"flex items-center gap-2 mx-auto",children:[n.jsx(Wi,{className:"w-4 h-4"}),"Add First Record"]})]})}):n.jsx("div",{className:"grid gap-4",children:a.map(P=>n.jsx(tt,{children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:P.name}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ye(P.type)}`,children:P.type}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Y(P.status)}`,children:P.status})]}),P.description&&n.jsx("p",{className:"text-gray-600 mb-2",children:P.description}),n.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[P.registrationNumber&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(La,{className:"w-4 h-4"}),n.jsxs("span",{children:["Reg. #",P.registrationNumber]})]}),P.jurisdiction&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Gp,{className:"w-4 h-4"}),n.jsx("span",{children:P.jurisdiction})]}),P.registrationDate&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(zp,{className:"w-4 h-4"}),n.jsxs("span",{children:["Reg: ",new Date(P.registrationDate).toLocaleDateString()]})]}),P.expiryDate&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(zp,{className:"w-4 h-4"}),n.jsxs("span",{children:["Exp: ",new Date(P.expiryDate).toLocaleDateString()]})]}),P.estimatedValue&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ki,{className:"w-4 h-4"}),n.jsxs("span",{children:["$",P.estimatedValue.toLocaleString()]})]}),P.owner&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(xm,{className:"w-4 h-4"}),n.jsx("span",{children:P.owner})]})]})]}),!r&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Oe,{variant:"secondary",size:"sm",onClick:()=>de(P),children:n.jsx(Xl,{className:"w-4 h-4"})}),n.jsx(Oe,{variant:"secondary",size:"sm",onClick:()=>_e(P),children:n.jsx(Aw,{className:"w-4 h-4"})}),n.jsx(Oe,{variant:"secondary",size:"sm",onClick:()=>{F(P.id),j(!0)},className:"text-red-600 hover:text-red-700",children:n.jsx(Ma,{className:"w-4 h-4"})})]})]}),P.documents&&P.documents.length>0&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[n.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:"Documents"}),n.jsx("div",{className:"grid gap-2",children:P.documents.map(Z=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(La,{className:"w-4 h-4 text-gray-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:Z.fileName}),n.jsxs("span",{className:"text-xs text-gray-500",children:["(",Z.documentType,")"]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(Oe,{variant:"secondary",size:"sm",onClick:()=>window.open(Z.fileUrl,"_blank"),children:n.jsx(gl,{className:"w-4 h-4"})}),n.jsx(Oe,{variant:"secondary",size:"sm",onClick:()=>window.open(Z.fileUrl,"_blank"),children:n.jsx(_i,{className:"w-4 h-4"})}),!r&&n.jsx(Oe,{variant:"secondary",size:"sm",onClick:()=>he(Z.id),className:"text-red-600 hover:text-red-700",children:n.jsx(Ma,{className:"w-4 h-4"})})]})]},Z.id))})]})]})},P.id))}),n.jsx(Bn,{isOpen:u,onClose:()=>d(!1),children:n.jsxs("div",{className:"p-6 max-h-[90vh] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[n.jsxs("div",{className:"sticky top-0 bg-white pb-4 border-b border-gray-200 mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Add IP/Trademark Record"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Fill in the details for your intellectual property or trademark"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),n.jsx("select",{value:z.type,onChange:P=>M(Z=>({...Z,type:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:Object.values(Wl).map(P=>n.jsx("option",{value:P,children:P},P))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("select",{value:z.status,onChange:P=>M(Z=>({...Z,status:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:Object.values(dl).map(P=>n.jsx("option",{value:P,children:P},P))})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),n.jsx("input",{type:"text",value:z.name,onChange:P=>M(Z=>({...Z,name:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Enter IP/trademark name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jurisdiction *"}),n.jsx("input",{type:"text",value:z.jurisdiction,onChange:P=>M(Z=>({...Z,jurisdiction:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"e.g., United States, EU, etc."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{value:z.description||"",onChange:P=>M(Z=>({...Z,description:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:3,placeholder:"Enter description"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Number"}),n.jsx("input",{type:"text",value:z.registrationNumber||"",onChange:P=>M(Z=>({...Z,registrationNumber:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Enter registration number"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner"}),n.jsx("input",{type:"text",value:z.owner||"",onChange:P=>M(Z=>({...Z,owner:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Enter owner name"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Date"}),n.jsx("input",{type:"date",value:z.registrationDate||"",onChange:P=>M(Z=>({...Z,registrationDate:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),n.jsx("input",{type:"date",value:z.expiryDate||"",onChange:P=>M(Z=>({...Z,expiryDate:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Value"}),n.jsx("input",{type:"number",value:z.estimatedValue||"",onChange:P=>M(Z=>({...Z,estimatedValue:parseFloat(P.target.value)||void 0})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"0"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{value:z.notes||"",onChange:P=>M(Z=>({...Z,notes:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:2,placeholder:"Enter any additional notes"})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 sticky bottom-0 bg-white",children:[n.jsx(Oe,{variant:"secondary",onClick:()=>d(!1),children:"Cancel"}),n.jsx(Oe,{onClick:se,disabled:!z.name||!z.jurisdiction,children:"Add Record"})]})]})}),n.jsx(Bn,{isOpen:f,onClose:()=>m(!1),children:n.jsxs("div",{className:"p-6 max-h-[90vh] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[n.jsxs("div",{className:"sticky top-0 bg-white pb-4 border-b border-gray-200 mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Edit IP/Trademark Record"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Update the details for your intellectual property or trademark"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),n.jsx("select",{value:z.type,onChange:P=>M(Z=>({...Z,type:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:Object.values(Wl).map(P=>n.jsx("option",{value:P,children:P},P))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("select",{value:z.status,onChange:P=>M(Z=>({...Z,status:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:Object.values(dl).map(P=>n.jsx("option",{value:P,children:P},P))})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),n.jsx("input",{type:"text",value:z.name,onChange:P=>M(Z=>({...Z,name:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Enter IP/trademark name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jurisdiction *"}),n.jsx("input",{type:"text",value:z.jurisdiction,onChange:P=>M(Z=>({...Z,jurisdiction:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"e.g., United States, EU, etc."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{value:z.description||"",onChange:P=>M(Z=>({...Z,description:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:3,placeholder:"Enter description"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Number"}),n.jsx("input",{type:"text",value:z.registrationNumber||"",onChange:P=>M(Z=>({...Z,registrationNumber:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Enter registration number"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner"}),n.jsx("input",{type:"text",value:z.owner||"",onChange:P=>M(Z=>({...Z,owner:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Enter owner name"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Date"}),n.jsx("input",{type:"date",value:z.registrationDate||"",onChange:P=>M(Z=>({...Z,registrationDate:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),n.jsx("input",{type:"date",value:z.expiryDate||"",onChange:P=>M(Z=>({...Z,expiryDate:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Value"}),n.jsx("input",{type:"number",value:z.estimatedValue||"",onChange:P=>M(Z=>({...Z,estimatedValue:parseFloat(P.target.value)||void 0})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"0"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{value:z.notes||"",onChange:P=>M(Z=>({...Z,notes:P.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:2,placeholder:"Enter any additional notes"})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 sticky bottom-0 bg-white",children:[n.jsx(Oe,{variant:"secondary",onClick:()=>m(!1),children:"Cancel"}),n.jsx(Oe,{onClick:J,disabled:!z.name||!z.jurisdiction,children:"Update Record"})]})]})}),n.jsx(Bn,{isOpen:g,onClose:()=>v(!1),children:n.jsxs("div",{className:"p-6 max-h-[90vh] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[n.jsxs("div",{className:"sticky top-0 bg-white pb-4 border-b border-gray-200 mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Upload Document"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Upload supporting documents for your IP/trademark record"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Document Type"}),n.jsx("select",{value:U,onChange:P=>oe(P.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:Object.values(g2).map(P=>n.jsx("option",{value:P,children:P},P))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select File"}),n.jsx("input",{ref:R,type:"file",onChange:P=>{var Z;return T(((Z=P.target.files)==null?void 0:Z[0])||null)},className:"w-full border border-gray-300 rounded-md px-3 py-2",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png"})]}),S&&n.jsxs("div",{className:"p-3 bg-gray-50 rounded-md",children:[n.jsxs("p",{className:"text-sm text-gray-700",children:[n.jsx("strong",{children:"File:"})," ",S.name]}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Size: ",(S.size/1024/1024).toFixed(2)," MB"]})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 sticky bottom-0 bg-white",children:[n.jsx(Oe,{variant:"secondary",onClick:()=>v(!1),children:"Cancel"}),n.jsx(Oe,{onClick:ae,disabled:E||!S,children:E?"Uploading...":"Upload Document"})]})]})}),n.jsx(Bn,{isOpen:x,onClose:()=>j(!1),children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx(iu,{className:"w-16 h-16 mx-auto"})}),n.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"Confirm Deletion"}),n.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Are you sure you want to delete this IP/trademark record? This action cannot be undone."}),n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx(Oe,{variant:"secondary",onClick:()=>j(!1),children:"Cancel"}),n.jsx(Oe,{onClick:Q,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Record"})]})]})})})]})},X6=({status:e})=>{let t="",r=null;switch(e){case _t.Verified:t="text-green-600",r=n.jsx(sa,{className:"w-4 h-4"});break;case _t.Rejected:t="text-red-600",r=n.jsx(iu,{className:"w-4 h-4"});break;case _t.Pending:t="text-yellow-600",r=n.jsx(Vx,{className:"w-4 h-4"});break;case _t.NotRequired:t="text-gray-500";break;default:t="text-gray-600"}return n.jsxs("span",{className:`font-semibold ${t} flex items-center justify-center gap-1 w-full`,children:[r,e]})},bee=({startup:e,currentUser:t,onUpdateCompliance:r,isViewOnly:a=!1,allowCAEdit:s=!1,onProfileUpdated:i})=>{console.log(" ComplianceTab props:",{userRole:t==null?void 0:t.role,isViewOnly:a,allowCAEdit:s,startupId:e.id});const[l,u]=_.useState([]),[d,f]=_.useState(!0),[m,g]=_.useState(!1),[v,x]=_.useState(null),[j,b]=_.useState(!1),[A,S]=_.useState(null),[T,E]=_.useState(!1),[D,L]=_.useState(!1),[F,z]=_.useState(null),[M,U]=_.useState({entity:"all",year:"all"}),[oe,R]=_.useState(null),q=_.useRef(null),se=_.useRef(!1),J=_.useRef(null),Q=async()=>{try{if(e.profile){console.log(" Using profile data from startup object:",e.profile),R(e.profile);return}const{profileService:ne}=await Ai(async()=>{const{profileService:le}=await Promise.resolve().then(()=>P8);return{profileService:le}},void 0),Ne=await ne.getStartupProfile(e.id);R(Ne),console.log(" Profile data loaded from database for ComplianceTab:",Ne)}catch(ne){console.error("Error loading profile data:",ne),R(null)}};_.useEffect(()=>{var ne,Ne;console.log(" ComplianceTab: Startup object changed, loading profile data...",{startupId:e.id,hasProfile:!!e.profile,subsidiaries:((Ne=(ne=e.profile)==null?void 0:ne.subsidiaries)==null?void 0:Ne.length)||0}),Q()},[e.id,e.profile]),_.useEffect(()=>{i!==void 0&&(console.log(" Profile updated trigger received:",i,"refreshing profile data..."),Q())},[i]),_.useEffect(()=>{ae()},[e.id,oe]),_.useEffect(()=>{if(!oe)return;const ne=JSON.stringify({country:oe.country||e.country_of_registration||null,companyType:oe.companyType||e.company_type||null,registrationDate:oe.registrationDate||e.registration_date||null,subsidiaries:oe.subsidiaries||[]});J.current!==ne&&!se.current&&(se.current=!0,console.log(" Entity-defining fields changed, syncing compliance tasks..."),Uc.syncComplianceTasksWithComprehensiveRules(e.id).finally(()=>{J.current=ne,se.current=!1,ae()}))},[oe,e.id]),_.useEffect(()=>()=>{},[e.id]),_.useEffect(()=>{const ne=G.channel("compliance_rules_changes").on("postgres_changes",{event:"*",schema:"public",table:"compliance_rules_comprehensive"},async()=>{try{console.log(" Detected compliance_rules_comprehensive change. Resyncing tasks for startup",e.id),await Uc.syncComplianceTasksWithComprehensiveRules(e.id),await ae()}catch(Ne){console.warn("Failed to resync after rules change",Ne)}}).subscribe();return()=>{ne.unsubscribe()}},[e.id]);const ae=async()=>{try{f(!0),console.log(" Loading existing compliance tasks...");let ne=await Uc.getComplianceTasksForStartup(e.id);!ne||ne.length===0?(console.log(" No existing compliance tasks found, force regenerating..."),await Uc.forceRegenerateComplianceTasks(e.id),ne=await Uc.getComplianceTasksForStartup(e.id)):console.log(" Found existing compliance tasks:",ne.length),console.log(" Loaded integrated compliance data:",ne),u(ne||[]),await he(ne||[])}catch(ne){console.error("Error loading compliance data:",ne),u([])}finally{f(!1)}},he=async ne=>{try{if(!ne||ne.length===0)return;let Ne=!1,le=!1,xe=!1,H=!0;for(const ee of ne){const X=!!ee.caRequired,ge=!!ee.csRequired,be=ee.caStatus,$e=ee.csStatus;X&&be===_t.Rejected&&(Ne=!0,xe=!0),ge&&$e===_t.Rejected&&(Ne=!0,le=!0),(t==null?void 0:t.role)==="CA"?X&&be!==_t.Verified&&(H=!1):(t==null?void 0:t.role)==="CS"?ge&&$e!==_t.Verified&&(H=!1):(X&&be!==_t.Verified||ge&&$e!==_t.Verified)&&(H=!1)}let W;if((t==null?void 0:t.role)==="CS"?W=le?_t.NonCompliant:H?_t.Compliant:_t.Pending:(t==null?void 0:t.role)==="CA"?W=xe?_t.NonCompliant:H?_t.Compliant:_t.Pending:W=Ne?_t.NonCompliant:H?_t.Compliant:_t.Pending,(e.complianceStatus||_t.Pending)===W)return;try{await G.from("startups").update({compliance_status:W}).eq("id",e.id)}catch(ee){console.warn("Failed to update overall startup compliance (non-blocking):",ee)}}catch(Ne){console.warn("syncOverallComplianceStatus error:",Ne)}},de=(ne,Ne)=>{const le={country:e.country_of_registration,companyType:e.company_type,registrationDate:e.registration_date},xe=Ze=>{var pe,V,Le,ft,kt,Mt,Lt;if(Ze==="parent")return{caCode:((pe=le.ca)==null?void 0:pe.code)||le.caServiceCode,csCode:((V=le.cs)==null?void 0:V.code)||le.csServiceCode};if(Ze.startsWith("sub-")){const at=parseInt(Ze.split("-")[1]||"0",10),Nt=(Le=le.subsidiaries)==null?void 0:Le[at];return{caCode:((ft=Nt==null?void 0:Nt.ca)==null?void 0:ft.code)||(Nt==null?void 0:Nt.caCode),csCode:((kt=Nt==null?void 0:Nt.cs)==null?void 0:kt.code)||(Nt==null?void 0:Nt.csCode)}}return Ze.startsWith("intl-")?{caCode:((Mt=le.ca)==null?void 0:Mt.code)||le.caServiceCode,csCode:((Lt=le.cs)==null?void 0:Lt.code)||le.csServiceCode}:{}},{caCode:H,csCode:W}=xe(ne.entityIdentifier);((t==null?void 0:t.serviceCode)||(t==null?void 0:t.ca_code)||(t==null?void 0:t.cs_code)||"").toString().toLowerCase();const B=(t==null?void 0:t.role)==="CA"&&Ne==="ca",ee=(t==null?void 0:t.role)==="CS"&&Ne==="cs";console.log(" Verification cell check",{type:Ne,userRole:t==null?void 0:t.role,canEditCA:B,canEditCS:ee,allowCAEdit:s,willShowDropdown:B&&s||ee&&s});const X=l.find(Ze=>Ze.taskId===ne.taskId),ge=X?Ne==="ca"?X.caStatus:X.csStatus:_t.Pending,be=Ne==="ca"?ne.caRequired:ne.csRequired;console.log(" Task requirement check:",{taskId:ne.taskId,type:Ne,isRequired:be,caRequired:ne.caRequired,csRequired:ne.csRequired});const $e=B&&s||ee&&s;return console.log(" Dropdown decision:",{shouldShowDropdown:$e,canEditCA:B,canEditCS:ee,allowCAEdit:s,type:Ne,userRole:t==null?void 0:t.role}),$e?(console.log(" Showing dropdown for",Ne,"column"),n.jsxs("select",{value:ge,onChange:async Ze=>{const pe=Ze.target.value;console.log("Updating compliance status:",{startupId:e.id,taskId:ne.taskId,type:Ne,newStatus:pe,user:t==null?void 0:t.email}),u(V=>V.map(Le=>Le.taskId===ne.taskId?{...Le,[Ne==="ca"?"caStatus":"csStatus"]:pe}:Le)),r&&r(e.id,ne.taskId,Ne,pe);try{await Uc.updateComplianceStatus(e.id,ne.taskId,pe,Ne.toUpperCase());const V=l.map(Le=>Le.taskId===ne.taskId?{...Le,[Ne==="ca"?"caStatus":"csStatus"]:pe}:Le);await he(V)}catch(V){console.error("Error updating compliance status:",V),u(Le=>Le.map(ft=>ft.taskId===ne.taskId?{...ft,[Ne==="ca"?"caStatus":"csStatus"]:ge}:ft))}},className:"bg-white border border-gray-300 rounded-md px-2 py-1 text-xs focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:_t.Pending,children:"Pending"}),n.jsx("option",{value:_t.Verified,children:"Verified"}),n.jsx("option",{value:_t.Rejected,children:"Rejected"})]})):(console.log(" Showing static display for",Ne,"column with status:",ge,"isRequired:",be,"task:",ne.task,"caRequired:",ne.caRequired,"csRequired:",ne.csRequired),be?(console.log(" Task required for",Ne,"- showing status:",ge),n.jsx(X6,{status:ge})):(console.log(" Task not required for",Ne,"- showing NotRequired"),n.jsx(X6,{status:_t.NotRequired})))},_e=ne=>{x(ne),S(null),E(!1),g(!0)},Y=ne=>{S(ne),E(!1)},ye=async()=>{if(!(!v||!t||!A))try{b(!0);const ne=await Uc.uploadComplianceDocument(e.id,v.taskId,A,t.email||"unknown");ne?(console.log("Upload successful:",ne),E(!0),S(null),ae(),setTimeout(()=>{g(!1),x(null),E(!1)},2e3)):alert("Upload failed. Please check if the database tables are set up correctly.")}catch(ne){console.error("Error uploading file:",ne),alert("Error uploading file. Please try again.")}finally{b(!1)}},P=async ne=>{t&&(z(ne),L(!0))},Z=async()=>{if(F)try{await Uc.deleteComplianceUpload(F)?(console.log("Delete successful"),ae()):alert("Delete failed. Please try again.")}catch(ne){console.error("Delete error:",ne),alert("Delete failed. Please try again.")}finally{L(!1),z(null)}},ce=_.useMemo(()=>ne=>{const Ne=l.find(le=>le.taskId===ne);return(Ne==null?void 0:Ne.uploads)||[]},[l]),je=(t==null?void 0:t.role)==="Startup"||(t==null?void 0:t.role)==="Admin",ke=_.useMemo(()=>{if(!l||l.length===0)return{};const ne={},Ne=new Set;e.country_of_registration&&Ne.add(`Parent Company (${e.country_of_registration})`),oe!=null&&oe.subsidiaries&&oe.subsidiaries.forEach((le,xe)=>{le.country&&Ne.add(`Subsidiary ${xe} (${le.country})`)}),oe!=null&&oe.internationalOps&&oe.internationalOps.forEach((le,xe)=>{le.country&&Ne.add(`International Operation ${xe} (${le.country})`)}),console.log(" Expected entities for filtering:",Array.from(Ne)),console.log(" All compliance tasks entityDisplayNames:",l.map(le=>le.entityDisplayName)),console.log(" Profile data subsidiaries:",oe==null?void 0:oe.subsidiaries),console.log(" Startup country_of_registration:",e.country_of_registration);for(const le of l)ne[le.entityDisplayName]||(ne[le.entityDisplayName]=[]),ne[le.entityDisplayName].push({entityIdentifier:le.entityIdentifier,entityDisplayName:le.entityDisplayName,year:le.year,task:le.task,taskId:le.taskId,caRequired:le.caRequired,csRequired:le.csRequired,caStatus:le.caStatus,csStatus:le.csStatus,uploads:le.uploads,complianceRule:le.complianceRule,frequency:le.frequency,complianceDescription:le.complianceDescription,caType:le.caType,csType:le.csType});return console.log(" Final grouped tasks:",Object.keys(ne)),Object.values(ne).forEach(le=>{le.sort((xe,H)=>H.year-xe.year||xe.task.localeCompare(H.task))}),ne},[l,e.country_of_registration,oe]),De=_.useMemo(()=>ke,[ke]),Ee=_.useMemo(()=>M.entity==="all"&&M.year==="all"?De:Object.fromEntries(Object.entries(De).map(([ne,Ne])=>[ne,Ne.filter(le=>(M.entity==="all"||ne.includes(M.entity))&&(M.year==="all"||le.year===parseInt(M.year)))]).filter(([ne,Ne])=>Ne.length>0)),[De,M]);return d?n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),n.jsx("div",{className:"space-y-4",children:[1,2,3].map(ne=>n.jsx("div",{className:"h-32 bg-gray-200 rounded"},ne))})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Compliance Checklist"}),!a&&(t==null?void 0:t.role)==="Startup"&&n.jsx(W_,{currentUser:t,userRole:"Startup",className:"mb-0"})]}),n.jsx("div",{className:"flex justify-end items-center",children:n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("select",{value:M.entity,onChange:ne=>U(Ne=>({...Ne,entity:ne.target.value})),className:"bg-white border border-gray-300 rounded-md px-3 py-1 text-sm",children:[n.jsx("option",{value:"all",children:"All Entities"}),Object.keys(De).map(ne=>n.jsx("option",{value:ne,children:ne},ne))]}),n.jsxs("select",{value:M.year,onChange:ne=>U(Ne=>({...Ne,year:ne.target.value})),className:"bg-white border border-gray-300 rounded-md px-3 py-1 text-sm",children:[n.jsx("option",{value:"all",children:"All Years"}),Array.from(new Set(Object.values(De).flat().map(ne=>ne.year))).sort((ne,Ne)=>Ne-ne).map(ne=>n.jsx("option",{value:ne,children:ne},ne))]})]})}),Object.keys(Ee).length>0?Object.entries(Ee).map(([ne,Ne])=>{const le=ne.match(/\(([A-Z]{2})\)/),xe=le?le[1]:"US",H=Fk(xe);return n.jsxs(tt,{children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-700 mb-4",children:ne}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-left border-collapse",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 uppercase tracking-wider text-center w-20",children:"Year"}),n.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 uppercase tracking-wider text-left w-48",children:"Task"}),n.jsxs("th",{className:"p-4 text-sm font-semibold text-slate-600 uppercase tracking-wider text-center w-32",children:[H.caTitle," Verified"]}),n.jsxs("th",{className:"p-4 text-sm font-semibold text-slate-600 uppercase tracking-wider text-center w-32",children:[H.csTitle," Verified"]}),n.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 uppercase tracking-wider text-center w-32",children:"Action"})]})}),n.jsx("tbody",{className:"divide-y divide-slate-200 align-middle",children:Ne.map(W=>{console.log(" Rendering task:",{taskId:W.taskId,task:W.task,caRequired:W.caRequired,csRequired:W.csRequired});const B=ce(W.taskId);return n.jsxs("tr",{className:"hover:bg-slate-50 transition-colors h-16",children:[n.jsx("td",{className:"p-4 whitespace-nowrap text-slate-600 text-center align-middle w-20",children:W.year}),n.jsx("td",{className:"p-4 whitespace-normal text-slate-900 font-medium text-left align-middle w-48",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:W.task}),W.complianceRule&&n.jsxs("div",{className:"text-xs text-gray-500 mt-1 space-y-1",children:[W.frequency&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(zp,{className:"w-3 h-3"}),n.jsx("span",{className:"capitalize",children:W.frequency.replace("-"," ")})]}),W.complianceDescription&&n.jsxs("div",{className:"flex items-start gap-1",children:[n.jsx(La,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:W.complianceDescription})]}),(W.caType||W.csType)&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(xm,{className:"w-3 h-3"}),n.jsx("span",{className:"text-xs",children:W.caType&&W.csType?`${W.caType} / ${W.csType}`:W.caType||W.csType})]})]})]})}),n.jsx("td",{className:"p-4 whitespace-nowrap text-slate-600 text-center align-middle w-32",children:de(W,"ca")}),n.jsx("td",{className:"p-4 whitespace-nowrap text-slate-600 text-center align-middle w-32",children:de(W,"cs")}),n.jsx("td",{className:"p-4 whitespace-nowrap text-center align-middle w-32",children:n.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[B.length>0&&n.jsxs("button",{onClick:()=>window.open(B[0].fileUrl,"_blank"),className:"px-3 py-2 rounded-md font-semibold transition-colors flex items-center gap-2 text-xs bg-green-100 text-green-700 hover:bg-green-200",title:"View document",children:[n.jsx(gl,{size:14}),"View"]}),je&&B.length===0&&n.jsxs("button",{onClick:()=>_e(W),className:"px-3 py-2 rounded-md font-semibold transition-colors flex items-center gap-2 text-xs bg-blue-100 text-blue-700 hover:bg-blue-200",title:"Upload document",children:[n.jsx(U1,{size:14}),"Upload"]}),je&&B.length>0&&n.jsxs("button",{onClick:()=>P(B[0].id),className:"px-3 py-2 rounded-md font-semibold transition-colors flex items-center gap-2 text-xs bg-red-100 text-red-700 hover:bg-red-200",title:"Delete document",children:[n.jsx(Ma,{size:14}),"Delete"]})]})})]},W.taskId)})})]})})]},ne)}):n.jsx(tt,{children:n.jsx("div",{className:"p-8 text-center text-slate-500",children:!e.country_of_registration||!e.company_type||!e.registration_date?n.jsxs("div",{children:[n.jsx("p",{className:"text-lg font-semibold mb-2",children:"No Profile Data"}),n.jsx("p",{children:"Please complete your startup profile first to generate compliance tasks."}),n.jsx("p",{className:"text-sm mt-2",children:"Go to the Profile tab and set your country, company type, and registration date."}),n.jsxs("p",{className:"text-sm mt-2 text-blue-600",children:["Debug Info: Country: ",e.country_of_registration||"Not set"," | Type: ",e.company_type||"Not set"," | Date: ",e.registration_date||"Not set"]})]}):l.length===0?n.jsxs("div",{children:[n.jsx("p",{className:"text-lg font-semibold mb-2",children:"No Compliance Tasks Found"}),n.jsx("p",{children:"Tasks are driven by admin-defined rules. Once rules exist for your profile's country and company type, they will appear here automatically."}),n.jsxs("p",{className:"text-sm mt-2",children:["Country: ",n.jsx("span",{className:"font-medium",children:e.country_of_registration})," | Company Type: ",n.jsx("span",{className:"font-medium",children:e.company_type})," | Registration: ",n.jsx("span",{className:"font-medium",children:e.registration_date})]}),n.jsx("p",{className:"text-sm mt-2 text-gray-500",children:"If this seems incorrect, please contact the administrator to configure compliance rules in the Admin  Compliance Rules tab."})]}):null})}),n.jsx(Bn,{isOpen:m,onClose:()=>g(!1),children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Upload Compliance Document"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Task: ",v==null?void 0:v.task," (",v==null?void 0:v.year,")"]}),T?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"text-green-600 mb-4",children:n.jsx(sa,{className:"w-16 h-16 mx-auto"})}),n.jsx("h4",{className:"text-lg font-semibold text-green-600 mb-2",children:"Upload Successful!"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Your document has been uploaded successfully."}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This window will close automatically..."})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[n.jsx("input",{ref:q,type:"file",accept:".pdf",onChange:ne=>{var le;const Ne=(le=ne.target.files)==null?void 0:le[0];if(Ne){if(Ne.type!=="application/pdf"){alert("Please select a PDF file only.");return}Y(Ne)}},className:"hidden"}),A?n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[n.jsx(U1,{className:"w-5 h-5 text-blue-600"}),n.jsx("span",{className:"font-medium",children:A.name})]}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Size: ",(A.size/1024/1024).toFixed(2)," MB"]}),n.jsx("button",{onClick:()=>Y(null),className:"text-red-600 text-xs hover:text-red-800",children:"Remove file"})]}):n.jsxs("div",{className:"space-y-2",children:[n.jsx(U1,{className:"w-8 h-8 text-gray-400 mx-auto"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Click to select a PDF file"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Only PDF files are accepted"}),n.jsx("button",{onClick:()=>{var ne;return(ne=q.current)==null?void 0:ne.click()},className:"bg-blue-100 text-blue-700 px-4 py-2 rounded-md text-sm hover:bg-blue-200 transition-colors",children:"Choose File"})]})]}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx(Oe,{variant:"secondary",onClick:()=>{g(!1),S(null),E(!1)},disabled:j,children:"Cancel"}),n.jsx(Oe,{onClick:ye,disabled:j||!A,className:A?"":"opacity-50 cursor-not-allowed",children:j?"Uploading...":"Upload Document"})]})]})]})}),n.jsx(Bn,{isOpen:D,onClose:()=>L(!1),children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx(iu,{className:"w-16 h-16 mx-auto"})}),n.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"Confirm Deletion"}),n.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Are you sure you want to delete this document? This action cannot be undone."}),n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx(Oe,{variant:"secondary",onClick:()=>L(!1),children:"Cancel"}),n.jsx(Oe,{onClick:Z,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Document"})]})]})})}),n.jsx(yee,{startupId:e.id,currentUser:t,isViewOnly:a})]})},ji=({label:e,id:t,children:r,containerClassName:a="",...s})=>n.jsxs("div",{className:a,children:[n.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-slate-700 mb-1",children:e}),n.jsx("select",{id:t,className:"block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-brand-primary focus:border-brand-primary sm:text-sm disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 disabled:shadow-none",...s,children:r})]}),wee=({label:e,id:t,name:r,value:a,onChange:s,required:i=!1,disabled:l=!1,className:u="",placeholder:d,allowFuture:f=!1,fieldName:m,maxYearsPast:g=50,error:v})=>{const x=f?void 0:K6(),j=!!v;return n.jsxs("div",{className:"space-y-1",children:[n.jsxs("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700",children:[e,i&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsx("input",{type:"date",id:t,name:r,value:a,onChange:s,max:x,required:i,disabled:l,placeholder:d,className:`
          w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent
          ${j?"border-red-300 bg-red-50 focus:ring-red-500":"border-gray-300 focus:border-blue-500"}
          ${l?"bg-gray-100 cursor-not-allowed":"bg-white"}
          ${u}
        `}),j&&n.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),v]}),!f&&!j&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Maximum allowed date: ",K6()]})]})},M0=["#1e40af","#1d4ed8","#3b82f6","#16a34a","#dc2626","#ea580c","#7c3aed","#059669","#d97706","#be123c"],jee=({startup:e,userRole:t,isViewOnly:r=!1})=>{const a=qv(e),[s,i]=_.useState({entity:"all",year:"all"}),[l,u]=_.useState([]),[d,f]=_.useState([]),[m,g]=_.useState([]),[v,x]=_.useState([]),[j,b]=_.useState([]),[A,S]=_.useState(null),[T,E]=_.useState([]),[D,L]=_.useState([]),[F,z]=_.useState([]),[M,U]=_.useState([]),[oe,R]=_.useState(!0),[q,se]=_.useState(!1),[J,Q]=_.useState(null),[ae,he]=_.useState(!1),[de,_e]=_.useState(null),[Y,ye]=_.useState({date:"",entity:"Parent Company",description:"",vertical:"",amount:"",cogs:"",fundingSource:"Revenue",attachment:null}),[P,Z]=_.useState("expense"),ce=(t==="Startup"||t==="Admin")&&!r;_.useEffect(()=>{je()},[e.id,s]);const je=async()=>{try{R(!0),Q(null);const H=s.year==="all"?new Date().getFullYear():s.year||new Date().getFullYear();console.log(" Loading financial data for startup:",e.id,"year:",H,"filter year:",s.year),console.log(" Startup object:",e);const[W,B,ee,X,ge,be,$e,Ze,pe,V]=await Promise.all([cs.getMonthlyFinancialData(e.id,H),cs.getRevenueByVertical(e.id,H),cs.getExpensesByVertical(e.id,H),cs.getExpenses(e.id,s),cs.getRevenues(e.id,s),cs.getFinancialSummary(e.id),cs.getEntities(e.id),cs.getVerticals(e.id),cs.getAvailableYears(e.id),na.getInvestmentRecords(e.id)]);console.log(" Financial data loaded:",{startupId:e.id,monthlyDataCount:W.length,expensesCount:X.length,revenuesCount:ge.length,summary:be,entitiesCount:$e.length,verticalsCount:Ze.length,investmentRecordsCount:V.length}),console.log(" Detailed data check:",{expenses:X,revenues:ge,summary:be,filters:s}),console.log(" Actual expenses loaded:",X.map(Ie=>({id:Ie.id,date:Ie.date,description:Ie.description,amount:Ie.amount,vertical:Ie.vertical,entity:Ie.entity}))),console.log(" Filter analysis:",{currentYear:s.year,currentEntity:s.entity,formDate:Y.date,formEntity:Y.entity,formVertical:Y.vertical,yearMatch:s.year===new Date(Y.date).getFullYear(),entityMatch:s.entity==="all"||s.entity===Y.entity}),console.log(" Chart data received:",{monthlyData:W,revenueByVertical:B,expensesByVertical:ee,expensesCount:X.length,revenuesCount:ge.length});const Le=W||[],ft=B||[],kt=ee||[];console.log(" Final chart data:",{monthlyData:Le,revenueByVertical:ft,expensesByVertical:kt}),u(Le),f(ft),g(kt),x(X),b(ge),S(be),E($e),L(Ze);const Mt=new Date(e.registrationDate).getFullYear(),Lt=new Date().getFullYear(),at=["all"];for(let Ie=Lt;Ie>=Mt;Ie--)at.push(Ie);z(at),console.log(" State updated with:",{expensesState:X.length,revenuesState:ge.length,summaryState:be});const Nt=["Revenue"];V.forEach(Ie=>{Nt.push(Ie.investorName)}),U(Nt),console.log(" Funding Sources Created:",{totalInvestors:V.length,fundingSources:Nt,sampleInvestors:V.slice(0,3).map(Ie=>Ie.investorName)})}catch(H){console.error(" Error loading financial data:",H),Q("Failed to load financial data. Please try again.")}finally{R(!1)}},ke=H=>{const{name:W,value:B}=H.target;ye(ee=>({...ee,[W]:W==="amount"||W==="cogs"?parseFloat(B)||0:B}))},De=async H=>{if(H.preventDefault(),!ce){console.log(" Cannot edit - user role issue");return}if(console.log(" Starting handleSubmit with form data:",Y),console.log(" Startup ID being used:",e.id),!Y.date||!Y.description||!Y.vertical||!Y.amount){console.log(" Form validation failed:",{date:Y.date,description:Y.description,vertical:Y.vertical,amount:Y.amount}),Q("Please fill in all required fields.");return}try{se(!0),Q(null);let W="";if(Y.attachment){console.log(" Uploading attachment:",Y.attachment.name);try{W=await cs.uploadAttachment(Y.attachment,e.id),console.log(" Attachment uploaded, URL:",W)}catch(X){console.error(" Attachment upload failed:",X),Q("Failed to upload attachment. Please try again.");return}}const B={startup_id:e.id,record_type:P,date:Y.date,entity:Y.entity,description:Y.description,vertical:Y.vertical,amount:parseFloat(Y.amount.toString()),funding_source:Y.fundingSource,cogs:P==="revenue"&&parseFloat(Y.cogs.toString())||0,attachment_url:W};console.log(" Adding financial record:",B);const ee=await cs.addFinancialRecord(B);console.log(" Record added successfully:",ee),ye({date:"",entity:"Parent Company",description:"",vertical:"",amount:"",cogs:"",fundingSource:"Revenue",attachment:null}),console.log(" Reloading financial data..."),setTimeout(async()=>{await je(),await xe();const X=await cs.getExpenses(e.id,s);console.log(" Debug: Expense records after adding:",X),console.log(" Debug: Expense verticals:",X.map(ge=>({vertical:ge.vertical,amount:ge.amount}))),console.log(" Financial data reloaded successfully")},500)}catch(W){console.error(" Error adding record:",W),console.error(" Error details:",{message:W.message,code:W.code,details:W.details,hint:W.hint}),Q(`Failed to add ${P}: ${W.message}`)}finally{se(!1)}},Ee=async(H,W,B)=>{ce&&(_e({id:H,type:W,description:B}),he(!0))},ne=async()=>{if(de)try{Q(null),await cs.deleteFinancialRecord(de.id),await je(),he(!1),_e(null)}catch(H){console.error(`Error deleting ${de.type}:`,H),Q(`Failed to delete ${de.type}. Please try again.`),he(!1),_e(null)}},Ne=()=>{he(!1),_e(null)},le=async H=>{try{const W=await cs.getAttachmentDownloadUrl(H);window.open(W,"_blank")}catch(W){console.error("Error downloading attachment:",W),Q("Failed to download attachment. Please try again.")}},xe=async()=>{try{const H=s.year==="all"?new Date().getFullYear():s.year||new Date().getFullYear(),W={year:H};s.entity!=="all"&&(W.entity=s.entity);const B=await cs.getFinancialRecords(e.id,W);console.log(" All records for chart calculation:",B);const ee={};for(let pe=1;pe<=12;pe++){const V=new Date(H,pe-1,1).toLocaleDateString("en-US",{month:"short"});ee[V]={revenue:0,expenses:0}}B.forEach(pe=>{const V=new Date(pe.date).toLocaleDateString("en-US",{month:"short"});pe.record_type==="revenue"?ee[V].revenue+=pe.amount:ee[V].expenses+=pe.amount});const X=Object.entries(ee).map(([pe,V])=>({month_name:pe,revenue:V.revenue,expenses:V.expenses})),ge={},be={};B.forEach(pe=>{console.log(" Processing record:",{id:pe.id,type:pe.record_type,vertical:pe.vertical,amount:pe.amount}),pe.record_type==="revenue"?ge[pe.vertical]=(ge[pe.vertical]||0)+pe.amount:pe.record_type==="expense"&&(be[pe.vertical]=(be[pe.vertical]||0)+pe.amount)}),console.log(" Vertical totals before processing:",{revenueByVertical:ge,expensesByVertical:be});const $e=Object.entries(ge).map(([pe,V])=>({name:pe,value:V})).sort((pe,V)=>V.value-pe.value),Ze=Object.entries(be).map(([pe,V])=>({name:pe,value:V})).sort((pe,V)=>V.value-pe.value);console.log(" Manual chart calculation:",{monthlyData:X,revenueByVertical:$e,expensesByVertical:Ze}),console.log(" Setting chart data:",{monthlyData:X.length,revenueByVertical:$e.length,expensesByVertical:Ze.length,expensesByVerticalData:Ze}),u(X),f($e),g(Ze)}catch(H){console.error("Error in manual chart calculation:",H)}};return oe?n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-2 text-slate-600",children:"Loading financial data..."})]})}):(console.log(" Rendering FinancialsTab with:",{expensesCount:v.length,revenuesCount:j.length,summary:A,isLoading:oe,error:J}),n.jsxs("div",{className:"space-y-6",children:[J&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-red-800",children:J}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>Q(null),className:"mt-2",children:"Dismiss"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs(tt,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Funding Received"}),n.jsx("p",{className:"text-2xl font-bold",children:Lr(e.totalFunding,a)})]}),n.jsxs(tt,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Revenue Till Date"}),n.jsx("p",{className:"text-2xl font-bold",children:Lr((A==null?void 0:A.total_revenue)||0,a)})]}),n.jsxs(tt,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Expenditure Till Date"}),n.jsx("p",{className:"text-2xl font-bold",children:Lr((A==null?void 0:A.total_expenses)||0,a)})]}),n.jsxs(tt,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Available Fund"}),n.jsx("p",{className:"text-2xl font-bold",children:Lr(((A==null?void 0:A.total_revenue)||0)-((A==null?void 0:A.total_expenses)||0),a)}),n.jsx("p",{className:"text-xs text-slate-400",children:"Total Revenue - Total Expenditure"})]})]}),n.jsx(tt,{children:n.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[n.jsxs(ji,{label:"Entity",id:"filter-entity",value:s.entity||"all",onChange:H=>i({...s,entity:H.target.value}),containerClassName:"flex-1 min-w-[120px]",children:[n.jsx("option",{value:"all",children:"All Entities"}),T.map(H=>n.jsx("option",{value:H,children:H},H))]}),n.jsx(ji,{label:"Year",id:"filter-year",value:s.year||"all",onChange:H=>{const W=H.target.value;i({...s,year:W==="all"?"all":parseInt(W)})},containerClassName:"flex-1 min-w-[100px]",children:F.map(H=>n.jsx("option",{value:H,children:H==="all"?"All Years":H},H))})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2 text-slate-700",children:"Monthly Revenue"}),n.jsx("div",{style:{width:"100%",height:250},children:n.jsx(ii,{children:n.jsxs(zx,{data:l,children:[n.jsx(su,{strokeDasharray:"3 3"}),n.jsx(oc,{dataKey:"month_name",fontSize:12}),n.jsx(vl,{fontSize:12,tickFormatter:H=>ld(H,a)}),n.jsx(si,{formatter:H=>Lr(H,a)}),n.jsx(Es,{wrapperStyle:{fontSize:"14px"}}),n.jsx(rm,{type:"monotone",dataKey:"revenue",stroke:"#16a34a"})]})})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2 text-slate-700",children:"Monthly Expenses"}),n.jsx("div",{style:{width:"100%",height:250},children:n.jsx(ii,{children:n.jsxs(zx,{data:l,children:[n.jsx(su,{strokeDasharray:"3 3"}),n.jsx(oc,{dataKey:"month_name",fontSize:12}),n.jsx(vl,{fontSize:12,tickFormatter:H=>ld(H,a)}),n.jsx(si,{formatter:H=>Lr(H,a)}),n.jsx(Es,{wrapperStyle:{fontSize:"14px"}}),n.jsx(rm,{type:"monotone",dataKey:"expenses",stroke:"#dc2626"})]})})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-0 text-slate-700",children:"Revenue by Vertical"}),n.jsx("div",{style:{width:"100%",height:300},children:n.jsx(ii,{children:n.jsxs(jf,{children:[n.jsx(nu,{data:d,dataKey:"value",nameKey:"name",cx:"65%",cy:"50%",outerRadius:65,label:!0,children:d.map((H,W)=>n.jsx(xl,{fill:M0[W%M0.length]},`cell-${W}`))}),n.jsx(si,{formatter:H=>Lr(H,a)}),n.jsx(Es,{layout:"vertical",align:"left",verticalAlign:"middle"})]})})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-0 text-slate-700",children:"Expenses by Vertical"}),n.jsx("div",{style:{width:"100%",height:300},children:n.jsx(ii,{children:n.jsxs(jf,{children:[n.jsx(nu,{data:m,dataKey:"value",nameKey:"name",cx:"65%",cy:"50%",outerRadius:65,label:!0,children:m.map((H,W)=>n.jsx(xl,{fill:M0[W%M0.length]},`cell-${W}`))}),n.jsx(si,{formatter:H=>Lr(H,a)}),n.jsx(Es,{layout:"vertical",align:"left",verticalAlign:"middle"})]})})})]})]}),ce&&n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-700 mb-6",children:"Add Financial Record"}),n.jsxs("form",{onSubmit:De,className:"space-y-4",children:[n.jsxs("div",{className:"flex gap-4 mb-4",children:[n.jsx("button",{type:"button",onClick:()=>{Z("expense"),ye({...Y,description:"",vertical:"",amount:"",cogs:""})},className:`flex-1 py-2 rounded-md font-semibold ${P==="expense"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"}`,children:"Expense"}),n.jsx("button",{type:"button",onClick:()=>{Z("revenue"),ye({...Y,description:"",vertical:"",amount:"",cogs:""})},className:`flex-1 py-2 rounded-md font-semibold ${P==="revenue"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"}`,children:"Revenue"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(wee,{label:"Transaction Date",id:"date",name:"date",value:Y.date,onChange:ke,required:!0,fieldName:"Transaction date",maxYearsPast:10}),n.jsx(ji,{label:"Entity",id:"entity",name:"entity",value:Y.entity,onChange:ke,required:!0,children:T.length>0?T.map(H=>n.jsx("option",{value:H,children:H},H)):n.jsx("option",{value:"Parent Company",children:"Parent Company"})}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 mb-2",children:"Description"}),n.jsx("textarea",{id:"description",name:"description",value:Y.description,onChange:ke,required:!0,rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Enter description..."})]}),n.jsxs(ji,{label:"Vertical",id:"vertical",name:"vertical",value:Y.vertical,onChange:ke,required:!0,children:[n.jsx("option",{value:"",children:"Select Vertical"}),P==="expense"?n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"SaaS",children:"SaaS"}),n.jsx("option",{value:"Enterprise",children:"Enterprise"}),n.jsx("option",{value:"B2C Hardware",children:"B2C Hardware"}),n.jsx("option",{value:"B2B Services",children:"B2B Services"}),n.jsx("option",{value:"R&D",children:"R&D"}),n.jsx("option",{value:"Marketing",children:"Marketing"}),n.jsx("option",{value:"Salaries",children:"Salaries"}),n.jsx("option",{value:"Ops",children:"Ops"}),n.jsx("option",{value:"COGS",children:"COGS"}),n.jsx("option",{value:"Other Expenses",children:"Other Expenses"})]}):n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"Product Sales",children:"Product Sales"}),n.jsx("option",{value:"Service Revenue",children:"Service Revenue"}),n.jsx("option",{value:"Subscription Revenue",children:"Subscription Revenue"}),n.jsx("option",{value:"Commission/Transaction Fees",children:"Commission/Transaction Fees"}),n.jsx("option",{value:"Advertising Revenue",children:"Advertising Revenue"}),n.jsx("option",{value:"Licensing & Royalties",children:"Licensing & Royalties"}),n.jsx("option",{value:"Other Income",children:"Other Income"})]})]}),n.jsx(At,{label:"Amount",id:"amount",name:"amount",type:"number",step:"0.01",min:"0",value:Y.amount,onChange:ke,required:!0}),P==="revenue"&&n.jsx(At,{label:"COGS",id:"cogs",name:"cogs",type:"number",step:"0.01",min:"0",value:Y.cogs,onChange:ke}),P==="expense"&&n.jsxs(n.Fragment,{children:[n.jsxs(ji,{label:"Funding Source",id:"fundingSource",name:"fundingSource",value:Y.fundingSource,onChange:ke,required:!0,children:[n.jsx("option",{value:"",children:"Select funding source"}),M.length>0?M.map(H=>n.jsx("option",{value:H,children:H},H)):n.jsx("option",{value:"Revenue",children:"Revenue"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"attachment",className:"block text-sm font-medium text-slate-700 mb-2",children:"Attach Invoice"}),n.jsx("input",{id:"attachment",type:"file",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:H=>{var W;return ye({...Y,attachment:((W=H.target.files)==null?void 0:W[0])||null})},className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),P==="revenue"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"attachment",className:"block text-sm font-medium text-slate-700 mb-2",children:"Attach Invoice"}),n.jsx("input",{id:"attachment",type:"file",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:H=>{var W;return ye({...Y,attachment:((W=H.target.files)==null?void 0:W[0])||null})},className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsx("div",{})," "]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(Oe,{type:"submit",disabled:q,className:"bg-blue-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-blue-700 flex items-center gap-2",children:q?"Adding...":"Add Record"})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Expenditure List"}),n.jsx("div",{className:"overflow-x-auto",children:v.length===0?n.jsx("p",{className:"text-slate-500 text-center py-4",children:"No expenses found for the selected filters."}):n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"py-2 text-left font-semibold",children:"Vertical"}),n.jsx("th",{className:"py-2 text-left font-semibold",children:"Amount"}),n.jsx("th",{className:"py-2 text-left font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:v.map(H=>n.jsxs("tr",{className:"border-b",children:[n.jsx("td",{className:"py-2",children:H.vertical}),n.jsx("td",{className:"py-2",children:Lr(H.amount,a)}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex gap-2",children:[H.attachmentUrl&&n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>le(H.attachmentUrl),children:n.jsx(_i,{className:"h-4 w-4"})}),ce&&n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>Ee(H.id,"expense",H.vertical),children:n.jsx(Ma,{className:"h-4 w-4"})})]})})]},H.id))})]})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Revenue & Profitability"}),n.jsx("div",{className:"overflow-x-auto",children:j.length===0?n.jsx("p",{className:"text-slate-500 text-center py-4",children:"No revenue found for the selected filters."}):n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"py-2 text-left font-semibold",children:"Vertical"}),n.jsx("th",{className:"py-2 text-left font-semibold",children:"Earnings"}),n.jsx("th",{className:"py-2 text-left font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:j.map(H=>n.jsxs("tr",{className:"border-b",children:[n.jsx("td",{className:"py-2",children:H.vertical}),n.jsx("td",{className:"py-2",children:Lr(H.earnings,a)}),n.jsx("td",{className:"py-2",children:n.jsxs("div",{className:"flex gap-2",children:[H.attachmentUrl&&n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>le(H.attachmentUrl),children:n.jsx(_i,{className:"h-4 w-4"})}),ce&&n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>Ee(H.id,"revenue",H.vertical),children:n.jsx(Ma,{className:"h-4 w-4"})})]})})]},H.id))})]})})]})]}),ae&&de&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(Ma,{className:"h-6 w-6 text-red-500 mr-3"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirm Delete"})]}),n.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete this ",de.type,"?",n.jsx("br",{}),n.jsx("span",{className:"font-medium",children:de.description})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx(Oe,{variant:"outline",onClick:Ne,className:"px-4 py-2",children:"Cancel"}),n.jsx(Oe,{variant:"destructive",onClick:ne,className:"px-4 py-2",children:"Delete"})]})]})})]}))},_ee={position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},Nee={backgroundColor:"#ffffff",borderRadius:8,width:"90%",maxWidth:480,boxShadow:"0 10px 25px rgba(0,0,0,0.15)"},See={padding:"14px 16px",borderBottom:"1px solid #e5e7eb",fontWeight:600,fontSize:16},Aee={padding:16},Cee={padding:16,borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"flex-end",gap:8},kee=({isOpen:e,title:t,onClose:r,children:a,footer:s})=>e?n.jsx("div",{style:_ee,onClick:r,children:n.jsxs("div",{style:Nee,onClick:i=>i.stopPropagation(),children:[n.jsx("div",{style:See,children:t}),n.jsx("div",{style:Aee,children:a}),n.jsx("div",{style:Cee,children:s})]})}):null;class Eee{async getEmployees(t,r){let a=G.from("employees").select("*").eq("startup_id",t).order("joining_date",{ascending:!1});r!=null&&r.entity&&r.entity!=="All Entities"&&(a=a.eq("entity",r.entity)),r!=null&&r.department&&r.department!=="All Departments"&&(a=a.eq("department",r.department)),r!=null&&r.year&&(a=a.eq("EXTRACT(YEAR FROM joining_date)",r.year));const{data:s,error:i}=await a;if(i)throw i;return(s||[]).map(l=>({id:l.id,name:l.name,joiningDate:l.joining_date,entity:l.entity,department:l.department,salary:l.salary,esopAllocation:l.esop_allocation,allocationType:l.allocation_type,esopPerAllocation:l.esop_per_allocation,contractUrl:l.contract_url}))}async addEmployee(t,r){const a=G6(r.joiningDate);if(!a.isValid)throw new Error(a.error);const{data:s,error:i}=await G.from("startups").select("registration_date").eq("id",t).single();if(i)throw i;if(s!=null&&s.registration_date&&r.joiningDate){const d=new Date(r.joiningDate),f=new Date(s.registration_date);if(d<f)throw new Error(`Employee joining date cannot be before the company registration date (${s.registration_date}). Please select a date on or after the registration date.`)}const{data:l,error:u}=await G.from("employees").insert({startup_id:t,name:r.name,joining_date:r.joiningDate,entity:r.entity,department:r.department,salary:r.salary,esop_allocation:r.esopAllocation,allocation_type:r.allocationType,esop_per_allocation:r.esopPerAllocation,contract_url:r.contractUrl}).select().single();if(u)throw u;return{id:l.id,name:l.name,joiningDate:l.joining_date,entity:l.entity,department:l.department,salary:l.salary,esopAllocation:l.esop_allocation,allocationType:l.allocation_type,esopPerAllocation:l.esop_per_allocation,contractUrl:l.contract_url}}async updateEmployee(t,r){if(r.joiningDate!==void 0){const l=G6(r.joiningDate);if(!l.isValid)throw new Error(l.error);const{data:u,error:d}=await G.from("employees").select("startup_id").eq("id",t).single();if(d)throw d;const{data:f,error:m}=await G.from("startups").select("registration_date").eq("id",u.startup_id).single();if(m)throw m;if(f!=null&&f.registration_date){const g=new Date(r.joiningDate),v=new Date(f.registration_date);if(g<v)throw new Error(`Employee joining date cannot be before the company registration date (${f.registration_date}). Please select a date on or after the registration date.`)}}const a={};r.name!==void 0&&(a.name=r.name),r.joiningDate!==void 0&&(a.joining_date=r.joiningDate),r.entity!==void 0&&(a.entity=r.entity),r.department!==void 0&&(a.department=r.department),r.salary!==void 0&&(a.salary=r.salary),r.esopAllocation!==void 0&&(a.esop_allocation=r.esopAllocation),r.allocationType!==void 0&&(a.allocation_type=r.allocationType),r.esopPerAllocation!==void 0&&(a.esop_per_allocation=r.esopPerAllocation),r.contractUrl!==void 0&&(a.contract_url=r.contractUrl);const{data:s,error:i}=await G.from("employees").update(a).eq("id",t).select().single();if(i)throw i;return{id:s.id,name:s.name,joiningDate:s.joining_date,entity:s.entity,department:s.department,salary:s.salary,esopAllocation:s.esop_allocation,allocationType:s.allocation_type,esopPerAllocation:s.esop_per_allocation,contractUrl:s.contract_url}}async deleteEmployee(t){const{error:r}=await G.from("employees").delete().eq("id",t);if(r)throw r}async getEmployeeSummary(t){try{const{data:r,error:a}=await G.rpc("get_employee_summary",{p_startup_id:t});if(a)throw a;if(r&&Array.isArray(r)&&r[0]){const s=r[0];return{total_employees:s.total_employees??0,total_salary_expense:s.total_salary_expense??0,total_esop_allocated:s.total_esop_allocated??0,avg_salary:s.avg_salary??0,avg_esop_allocation:s.avg_esop_allocation??0}}return this.calculateEmployeeSummaryManually(t)}catch(r){return console.warn("RPC get_employee_summary failed, falling back to manual calc:",r),this.calculateEmployeeSummaryManually(t)}}async getEmployeesByDepartment(t){return console.log(" Using manual calculation for department data (startup_id:",t,")"),this.calculateEmployeesByDepartmentManually(t)}async getMonthlySalaryData(t,r){return console.log(" Using manual calculation for monthly data (startup_id:",t,", year:",r,")"),this.calculateMonthlySalaryDataManually(t,r)}async getEntities(t){const{data:r,error:a}=await G.from("employees").select("entity").eq("startup_id",t).order("entity");if(a)throw a;return[...new Set((r==null?void 0:r.map(s=>s.entity))||[])]}async getDepartments(t){const{data:r,error:a}=await G.from("employees").select("department").eq("startup_id",t).order("department");if(a)throw a;return[...new Set((r==null?void 0:r.map(s=>s.department))||[])]}async getAvailableYears(t){const{data:r,error:a}=await G.from("employees").select("joining_date").eq("startup_id",t);if(a)throw a;const s=(r==null?void 0:r.map(l=>new Date(l.joining_date).getFullYear()))||[],i=[...new Set(s)].sort((l,u)=>u-l);return i.length===0?[new Date().getFullYear()]:i}async uploadContract(t,r){const a=`${r}/${Date.now()}_${t.name}`,{data:s,error:i}=await G.storage.from("employee-contracts").upload(a,t);if(i)throw i;const{data:l}=G.storage.from("employee-contracts").getPublicUrl(a);return l.publicUrl}async deleteContract(t){const r=t.split("/").slice(-2).join("/"),{error:a}=await G.storage.from("employee-contracts").remove([r]);if(a)throw a}async getContractDownloadUrl(t){try{if(t&&t.startsWith("http"))return t;if(t&&!t.startsWith("http")){const{data:r}=G.storage.from("employee-contracts").getPublicUrl(t);return r.publicUrl}throw new Error("Invalid contract URL")}catch(r){throw console.error("Error generating download URL:",r),r}}async calculateEmployeeSummaryManually(t){const r=await this.getEmployees(t),a=r.length,s=r.reduce((d,f)=>d+f.salary,0),i=r.reduce((d,f)=>d+f.esopAllocation,0),l=a>0?s/a:0,u=a>0?i/a:0;return{total_employees:a,total_salary_expense:s,total_esop_allocated:i,avg_salary:l,avg_esop_allocation:u}}async calculateEmployeesByDepartmentManually(t){const r=await this.getEmployees(t),a=new Map;return r.forEach(s=>{const i=a.get(s.department)||{count:0,salary:0,esop:0};a.set(s.department,{count:i.count+1,salary:i.salary+s.salary,esop:i.esop+s.esopAllocation})}),Array.from(a.entries()).map(([s,i])=>({department_name:s,employee_count:i.count,total_salary:i.salary,total_esop:i.esop})).sort((s,i)=>i.employee_count-s.employee_count)}async calculateMonthlySalaryDataManually(t,r){const a=await this.getEmployees(t),s=new Map;return a.forEach(i=>{if(new Date(i.joiningDate).getFullYear()===r){const u=new Date(i.joiningDate).toLocaleString("default",{month:"short"}),d=s.get(u)||{salary:0,esop:0};s.set(u,{salary:d.salary+i.salary,esop:d.esop+i.esopAllocation})}}),Array.from(s.entries()).map(([i,l])=>({month_name:i,total_salary:l.salary,total_esop:l.esop}))}}const id=new Eee,Pee=async e=>{try{console.log(" Loading monthly data for startup:",e.id);const t=await id.getMonthlySalaryData(e.id,new Date().getFullYear());return console.log(" Monthly data loaded:",t),t.length===0?(console.log(" No monthly data found, returning empty set"),[]):t.map(r=>({name:r.month_name,salary:r.total_salary,esop:r.total_esop}))}catch(t){return console.error(" Error loading monthly data:",t),[]}},Tee=async e=>{try{console.log(" Loading department data for startup:",e.id);const t=await id.getEmployeesByDepartment(e.id);return console.log(" Department data loaded:",t),t.length===0?(console.log(" No department data found, returning empty set"),[]):t.map(r=>({name:r.department_name,value:r.employee_count}))}catch(t){return console.error(" Error loading department data:",t),[]}},Oee=async e=>{try{return await id.getEmployees(e.id)}catch(t){return console.error("Error loading employees:",t),[]}},I0=["#1e40af","#1d4ed8","#3b82f6"],Dee=({startup:e,userRole:t,isViewOnly:r=!1})=>{const a=qv(e),[s,i]=_.useState(!1),[l,u]=_.useState(!0),[d,f]=_.useState(null),[m,g]=_.useState([]),[v,x]=_.useState([]),[j,b]=_.useState([]),[A,S]=_.useState(null),[T,E]=_.useState(["Parent Company"]),[D,L]=_.useState(0),[F,z]=_.useState("0"),[M,U]=_.useState(0),[oe,R]=_.useState(0),[q,se]=_.useState(""),[J,Q]=_.useState("one-time"),[ae,he]=_.useState("0"),[de,_e]=_.useState(!1),Y=(t==="Startup"||t==="Admin")&&!r;_.useEffect(()=>{ye()},[e.id]);const ye=async()=>{try{u(!0),f(null);const[Ee,ne,Ne,le,xe,H,W]=await Promise.all([Pee(e),Tee(e),Oee(e),id.getEmployeeSummary(e.id),Qr.getStartupProfile(e.id),na.getTotalShares(e.id),na.getEsopReservedShares(e.id)]);let B=0;if(H>0){let X=e.currentValuation||0;try{const ge=await na.getInvestmentRecords(e.id);if(ge&&ge.length>0){const be=[...ge].sort(($e,Ze)=>new Date(Ze.date).getTime()-new Date($e.date).getTime())[0];be!=null&&be.postMoneyValuation&&be.postMoneyValuation>0&&(X=be.postMoneyValuation)}}catch(ge){console.log("Could not load investment records for price calculation:",ge)}B=X/H}if(console.log(" Loaded ESOP data:",{startupId:e.id,calculatedPricePerShare:B,totalShares:H,esopReservedShares:W,summaryData:le}),W===0&&H===0&&B===0){console.log(" No startup_shares record found, creating default record...");try{await na.upsertEsopReservedShares(e.id,1e4),console.log(" Created default startup_shares record with ESOP:",1e4);const ge=await na.getEsopReservedShares(e.id);L(ge),z(String(ge))}catch(X){console.error(" Failed to create default startup_shares record:",X)}}else L(W||0),z(String(W||0));g(Ee),x(ne),b(Ne),S(le),U(B),R(H||0);const ee=["Parent Company"];xe!=null&&xe.subsidiaries&&xe.subsidiaries.length>0&&xe.subsidiaries.forEach(X=>{const ge=`${X.country} Subsidiary`;ee.push(ge)}),E(ee)}catch(Ee){console.error("Error loading data:",Ee),f("Failed to load employee data")}finally{u(!1)}},P=async Ee=>{console.log(" FORM SUBMISSION TRIGGERED!"),Ee.preventDefault();const ne=new FormData(Ee.target);try{console.log(" Starting employee creation process..."),console.log(" Form data:",{name:ne.get("name"),joiningDate:ne.get("joiningDate"),entity:ne.get("entity"),department:ne.get("department"),salary:ne.get("salary"),esopAllocation:ne.get("esopAllocation"),esopPerAllocation:ne.get("esopPerAllocation")});const Ne=q!==""?parseFloat(q):parseFloat(ne.get("esopAllocation"))||0,le=ae!==""?parseFloat(ae):parseFloat(ne.get("esopPerAllocation"))||0,xe=(A==null?void 0:A.total_esop_allocated)||j.reduce((be,$e)=>be+$e.esopAllocation,0),H=xe+(Ne||0);if(console.log(" ESOP Validation:",{currentAllocatedTotal:xe,esopAllocationValue:Ne,prospectiveAllocatedTotal:H,pricePerShare:M,reservedEsopValue:ce,wouldExceed:M>0&&ce>0&&H>ce}),M>0&&ce>0&&H>ce){const be=`Total ESOP allocation would exceed the reserved ESOPs value. Current: ${Lr(xe,a)}, Adding: ${Lr(Ne||0,a)}, Reserved: ${Lr(ce,a)}. Reduce the allocation or increase reserved ESOPs.`;console.log(" ESOP validation failed:",be),f(be);return}if(D===0&&(Ne||0)>0){console.log(" ESOP shares validation failed: No reserved shares but trying to allocate"),f("Cannot allocate ESOPs when no shares are reserved for ESOP. Please set ESOP reserved shares first.");return}const W=ne.get("joiningDate");if(console.log(" Date validation:",{joiningDate:W,startupRegistrationDate:e.registrationDate}),W&&e.registrationDate){const be=new Date(W),$e=new Date(e.registrationDate);if(console.log(" Date comparison:",{joiningDateObj:be.toISOString(),registrationDateObj:$e.toISOString(),isBefore:be<$e}),be<$e){const Ze=`Employee joining date cannot be before the company registration date (${e.registrationDate}). Please select a date on or after the registration date.`;console.log(" Date validation failed:",Ze),f(Ze);return}}const B={name:ne.get("name"),joiningDate:ne.get("joiningDate"),entity:ne.get("entity"),department:ne.get("department"),salary:parseFloat(ne.get("salary")),esopAllocation:Ne||0,allocationType:J,esopPerAllocation:le||0,contractUrl:""};console.log(" Employee data to create:",B),console.log(" Startup ID:",e.id),console.log(" Creating employee in database...");const ee=await id.addEmployee(e.id,B);console.log(" Employee created successfully:",ee);const X=Ee.target.elements.namedItem("contract"),ge=X!=null&&X.files&&X.files[0]?X.files[0]:null;if(ge&&(ee!=null&&ee.id)){console.log(" Contract file found, uploading...");const be=await hs.uploadEmployeeContract(ge,String(e.id),String(ee.id));console.log(" Upload result:",be),be.success&&be.url&&(console.log(" Updating employee with contract URL..."),await id.updateEmployee(ee.id,{contractUrl:be.url}),console.log(" Employee updated with contract URL"))}console.log(" Reloading data..."),await ye(),console.log(" Data reloaded successfully"),Ee.target.reset(),console.log(" Form reset successfully"),se(""),he("0"),Q("one-time")}catch(Ne){console.error(" Error adding employee:",Ne),f("Failed to add employee")}},Z=async Ee=>{if(confirm("Are you sure you want to delete this employee?"))try{await id.deleteEmployee(Ee),await ye()}catch(ne){console.error("Error deleting employee:",ne),f("Failed to delete employee")}},ce=(D||0)*(M||0),je=(A==null?void 0:A.total_esop_allocated)||j.reduce((Ee,ne)=>Ee+ne.esopAllocation,0),ke=(()=>{if(D>0&&je>0)if(M>0){const Ee=D*M;return(je/Ee*100).toFixed(1)}else return(je/je*100).toFixed(1);else{if(D>0&&je===0)return"0";if(D===0&&je>0)return"N/A"}return"0"})(),De=M>0?je>ce:(D>0&&je>0,!1);return console.log(" ESOP Calculation Debug:",{esopReservedShares:D,pricePerShare:M,reservedEsopValue:ce,allocatedEsopValue:je,esopPercentage:ke,isOverAllocated:De,totalEmployees:j.length,employeeEsopAllocations:j.map(Ee=>({name:Ee.name,esopAllocation:Ee.esopAllocation}))}),l?n.jsx("div",{className:"space-y-6",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"Loading employees data..."})]})})}):n.jsxs("div",{className:"space-y-6",children:[d&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:d}),D===0&&n.jsx("div",{className:"bg-amber-50 border border-amber-200 text-amber-700 px-4 py-3 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-amber-500 mr-2",children:""}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"ESOP Configuration Missing"}),n.jsx("p",{className:"text-sm",children:"No ESOP shares are reserved for this startup. Please set ESOP reserved shares to enable employee stock option allocations."})]})]})}),De&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-red-500 mr-2",children:""}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"ESOP Over-allocation Detected"}),n.jsxs("p",{className:"text-sm",children:["Total allocated ESOPs (",Lr(je,a),") exceeds reserved ESOPs (",Lr(ce,a),"). Please reduce employee allocations or increase reserved shares."]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(tt,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Number of Employees"}),n.jsx("p",{className:"text-2xl font-bold",children:(A==null?void 0:A.total_employees)||j.length})]}),n.jsxs(tt,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Equity Reserved for ESOPs"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(At,{id:"esop-reserved-shares",name:"esop-reserved-shares",type:"number",value:F,onChange:Ee=>z(Ee.target.value),onBlur:async()=>{const Ee=Number(F);if(!Number.isFinite(Ee)||Ee<0){z(String(D||0));return}if(oe&&Ee>oe){f("ESOP reserved shares cannot exceed total company shares"),z(String(D||0));return}try{const ne=await na.upsertEsopReservedShares(e.id,Ee);L(ne)}catch(ne){console.error("Failed to save ESOP reserved shares",ne),z(String(D||0))}}}),n.jsx("span",{className:"text-slate-500",children:"(shares)"}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>_e(!0),children:"Edit"})]}),n.jsx("p",{className:"text-2xl font-bold mt-1",children:Lr(ce,a)}),M===0&&n.jsxs("div",{className:"text-xs text-amber-600 mt-1",children:[n.jsx("p",{className:"font-medium",children:" Price per share not set"}),n.jsx("p",{className:"mt-1",children:"Go to Cap Table tab  Company Settings to set the price per share"})]})]}),n.jsxs(tt,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Equity Allocated as ESOPs"}),n.jsxs("p",{className:"text-2xl font-bold",children:[Lr(je,a)," (",ke,"%)"]}),ke==="N/A"&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:" No ESOP shares reserved but allocations exist"})]})]}),n.jsx(kee,{isOpen:de,title:"Update ESOP Reserved Shares",onClose:()=>_e(!1),footer:n.jsxs(n.Fragment,{children:[n.jsx(Oe,{type:"button",variant:"outline",onClick:()=>_e(!1),children:"Cancel"}),n.jsx(Oe,{type:"button",onClick:async()=>{const Ee=Number(F);if(!Number.isFinite(Ee)||Ee<0){f("Please enter a valid non-negative number");return}if(oe&&Ee>oe){f("ESOP reserved shares cannot exceed total company shares");return}try{const ne=await na.upsertEsopReservedShares(e.id,Ee);L(ne),_e(!1)}catch(ne){console.error("Failed to save ESOP reserved shares",ne)}},children:"Save"})]}),children:n.jsxs("div",{style:{display:"grid",gap:8},children:[n.jsx("label",{htmlFor:"modal-esop-reserved",style:{fontSize:12,color:"#475569"},children:"ESOP Reserved Shares"}),n.jsx("input",{id:"modal-esop-reserved",type:"number",value:F,onChange:Ee=>z(Ee.target.value),style:{padding:"8px 10px",border:"1px solid #cbd5e1",borderRadius:6}})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Salary Expense"}),n.jsx("div",{style:{width:"100%",height:250},children:n.jsx(ii,{children:n.jsxs(zx,{data:m,children:[n.jsx(su,{strokeDasharray:"3 3"}),n.jsx(oc,{dataKey:"name",fontSize:12}),n.jsx(vl,{fontSize:12}),n.jsx(si,{}),n.jsx(Es,{}),n.jsx(rm,{type:"monotone",dataKey:"salary",stroke:"#16a34a"})]})})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"ESOP Expenses"}),n.jsx("div",{style:{width:"100%",height:250},children:n.jsx(ii,{children:n.jsxs(zx,{data:m,children:[n.jsx(su,{strokeDasharray:"3 3"}),n.jsx(oc,{dataKey:"name",fontSize:12}),n.jsx(vl,{fontSize:12}),n.jsx(si,{}),n.jsx(Es,{}),n.jsx(rm,{type:"monotone",dataKey:"esop",stroke:"#3b82f6"})]})})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Salary by Department"}),n.jsx("div",{style:{width:"100%",height:250},children:n.jsx(ii,{children:n.jsxs(jf,{children:[n.jsx(nu,{data:v,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:v.map((Ee,ne)=>n.jsx(xl,{fill:I0[ne%I0.length]},`cell-${ne}`))}),n.jsx(si,{}),n.jsx(Es,{})]})})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"ESOP by Department"}),n.jsx("div",{style:{width:"100%",height:250},children:n.jsx(ii,{children:n.jsxs(jf,{children:[n.jsx(nu,{data:v,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:v.map((Ee,ne)=>n.jsx(xl,{fill:I0[ne%I0.length]},`cell-${ne}`))}),n.jsx(si,{}),n.jsx(Es,{})]})})})]})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Add New Employee"}),console.log(" Form canEdit status:",Y,"userRole:",t,"isViewOnly:",r),n.jsx("fieldset",{disabled:!1,children:n.jsxs("form",{onSubmit:P,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(At,{label:"Employee Name",name:"name",required:!0}),n.jsx(At,{label:"Date of Joining",name:"joiningDate",type:"date",max:new Date().toISOString().split("T")[0],required:!0}),n.jsx(ji,{label:"Entity",name:"entity",children:T.map((Ee,ne)=>n.jsx("option",{value:Ee,children:Ee},ne))}),n.jsx(At,{label:"Department",name:"department",required:!0}),n.jsx(At,{label:"Salary (Annual)",name:"salary",type:"number",min:"0",required:!0}),n.jsx(At,{label:"ESOP Allocation (USD)",name:"esopAllocation",type:"number",min:"0",value:q,onChange:Ee=>{const ne=Ee.target.value;se(ne);const Ne=parseFloat(ne)||0;he(String(Ne/(J==="monthly"?12:J==="quarterly"?4:1)))}}),n.jsxs(ji,{label:"Allocation Type",name:"allocationType",value:J,onChange:Ee=>{const ne=Ee.target.value;Q(ne);const Ne=parseFloat(q)||0;he(String(Ne/(ne==="monthly"?12:ne==="quarterly"?4:1)))},children:[n.jsx("option",{value:"one-time",children:"One-time"}),n.jsx("option",{value:"annually",children:"Annually"}),n.jsx("option",{value:"quarterly",children:"Quarterly"}),n.jsx("option",{value:"monthly",children:"Monthly"})]}),n.jsx(At,{label:"ESOP per Allocation",name:"esopPerAllocation",type:"number",min:"0",value:ae,readOnly:!0}),n.jsx(At,{id:"employee-contract",label:"Employee Contract",name:"contract",type:"file",accept:".pdf,.doc,.docx"}),n.jsx("div",{className:"flex items-end pt-5",children:n.jsx(Oe,{type:"submit",children:"Add Employee"})})]})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Employee List"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Name"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Department"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Salary"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"ESOP Allocated"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Contract"}),n.jsx("th",{className:"px-4 py-2 text-right font-medium text-slate-500",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:j.map(Ee=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2 font-medium text-slate-900",children:Ee.name}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:Ee.department}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:Lr(Ee.salary,a)}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:Lr(Ee.esopAllocation,a)}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:Ee.contractUrl?n.jsxs("a",{href:Ee.contractUrl,className:"flex items-center text-brand-primary hover:underline",children:[n.jsx(_i,{className:"h-4 w-4 mr-1"})," View"]}):"N/A"}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx(Oe,{size:"sm",variant:"outline",disabled:!Y,onClick:()=>Z(Ee.id),children:n.jsx(Ma,{className:"h-4 w-4"})})})]},Ee.id))})]})})]})]})};class Ree{async getIncubationPrograms(t){const{data:r,error:a}=await G.from("incubation_programs").select("*").eq("startup_id",t).order("start_date",{ascending:!1});if(a)throw a;return(r||[]).map(s=>({id:s.id,programName:s.program_name,programType:s.program_type,startDate:s.start_date,endDate:s.end_date,status:s.status,description:s.description,mentorName:s.mentor_name,mentorEmail:s.mentor_email,programUrl:s.program_url,createdAt:s.created_at}))}async addIncubationProgram(t,r){const{data:a,error:s}=await G.from("incubation_programs").insert({startup_id:t,program_name:r.programName,program_type:r.programType,start_date:r.startDate,end_date:r.endDate,description:r.description,mentor_name:r.mentorName,mentor_email:r.mentorEmail,program_url:r.programUrl}).select().single();if(s)throw s;return{id:a.id,programName:a.program_name,programType:a.program_type,startDate:a.start_date,endDate:a.end_date,status:a.status,description:a.description,mentorName:a.mentor_name,mentorEmail:a.mentor_email,programUrl:a.program_url,createdAt:a.created_at}}async updateIncubationProgram(t,r){const a={};r.programName!==void 0&&(a.program_name=r.programName),r.programType!==void 0&&(a.program_type=r.programType),r.startDate!==void 0&&(a.start_date=r.startDate),r.endDate!==void 0&&(a.end_date=r.endDate),r.status!==void 0&&(a.status=r.status),r.description!==void 0&&(a.description=r.description),r.mentorName!==void 0&&(a.mentor_name=r.mentorName),r.mentorEmail!==void 0&&(a.mentor_email=r.mentorEmail),r.programUrl!==void 0&&(a.program_url=r.programUrl);const{data:s,error:i}=await G.from("incubation_programs").update(a).eq("id",t).select().single();if(i)throw i;return{id:s.id,programName:s.program_name,programType:s.program_type,startDate:s.start_date,endDate:s.end_date,status:s.status,description:s.description,mentorName:s.mentor_name,mentorEmail:s.mentor_email,programUrl:s.program_url,createdAt:s.created_at}}async deleteIncubationProgram(t){const{error:r}=await G.from("incubation_programs").delete().eq("id",t);if(r)throw r}async getProgramTypes(){return["Incubation","Acceleration","Mentorship","Bootcamp"]}async getProgramStatuses(){return["Active","Completed","Dropped"]}async getPopularPrograms(){return["Y Combinator","Techstars","500 Global","AngelPad","Plug and Play","MassChallenge","Startupbootcamp","Seedcamp","Entrepreneur First","Antler"]}subscribeToIncubationPrograms(t,r){return G.channel("incubation_programs_changes").on("postgres_changes",{event:"*",schema:"public",table:"incubation_programs",filter:`startup_id=eq.${t}`},async()=>{try{const s=await this.getIncubationPrograms(t);r(s)}catch(s){console.warn("Failed to refresh incubation programs after realtime event:",s)}}).subscribe()}async getProgramSummary(t){const r=await this.getIncubationPrograms(t),a=r.length,s=r.filter(d=>d.status==="Active").length,i=r.filter(d=>d.status==="Completed").length,l=r.map(d=>{const f=new Date(d.startDate),m=new Date(d.endDate);return Math.ceil((m.getTime()-f.getTime())/(1e3*60*60*24))}),u=l.length>0?l.reduce((d,f)=>d+f,0)/l.length:0;return{totalPrograms:a,activePrograms:s,completedPrograms:i,averageDuration:u}}async getProgramsByType(t){const a=(await this.getIncubationPrograms(t)).reduce((s,i)=>(s[i.programType]=(s[i.programType]||0)+1,s),{});return Object.entries(a).map(([s,i])=>({type:s,count:i}))}}const q0=new Ree;class Lee{async getRecognitionRecordsByStartupId(t){try{const{data:r,error:a}=await G.from("recognition_records").select("*").eq("startup_id",t).order("date_added",{ascending:!1});if(a)throw console.error("Error fetching recognition records:",a),a;return(r||[]).map(s=>({id:s.id.toString(),startupId:s.startup_id,programName:s.program_name,facilitatorName:s.facilitator_name,facilitatorCode:s.facilitator_code,incubationType:s.incubation_type,feeType:s.fee_type,feeAmount:s.fee_amount,shares:s.shares,pricePerShare:s.price_per_share,investmentAmount:s.investment_amount,equityAllocated:s.equity_allocated,postMoneyValuation:s.post_money_valuation,signedAgreementUrl:s.signed_agreement_url,status:s.status||"pending",dateAdded:s.date_added}))}catch(r){throw console.error("Error in getRecognitionRecordsByStartupId:",r),r}}async getRecognitionRecordsByFacilitatorCode(t){try{const{data:r,error:a}=await G.from("recognition_records").select(`
          *,
          startups!recognition_records_startup_id_fkey (
            id,
            name,
            sector,
            total_funding,
            total_revenue,
            registration_date
          )
        `).eq("facilitator_code",t).order("date_added",{ascending:!1});if(a)throw console.error("Error fetching recognition records by facilitator code:",a),a;return(r||[]).map(s=>({id:s.id.toString(),startupId:s.startup_id,programName:s.program_name,facilitatorName:s.facilitator_name,facilitatorCode:s.facilitator_code,incubationType:s.incubation_type,feeType:s.fee_type,feeAmount:s.fee_amount,shares:s.shares,pricePerShare:s.price_per_share,investmentAmount:s.investment_amount,equityAllocated:s.equity_allocated,postMoneyValuation:s.post_money_valuation,signedAgreementUrl:s.signed_agreement_url,status:s.status||"pending",dateAdded:s.date_added}))}catch(r){throw console.error("Error in getRecognitionRecordsByFacilitatorCode:",r),r}}async createRecognitionRecord(t){try{console.log(" Creating recognition record for startup:",t.startupId),console.log(" Record data:",t);const{data:r,error:a}=await G.from("recognition_records").insert({startup_id:t.startupId,program_name:t.programName,facilitator_name:t.facilitatorName,facilitator_code:t.facilitatorCode,incubation_type:t.incubationType,fee_type:t.feeType,fee_amount:t.feeAmount,shares:t.shares,price_per_share:t.pricePerShare,investment_amount:t.investmentAmount,equity_allocated:t.equityAllocated,post_money_valuation:t.postMoneyValuation,signed_agreement_url:t.signedAgreementUrl,status:t.status||"pending",date_added:new Date().toISOString().split("T")[0]}).select().single();if(a)throw console.error(" Error creating recognition record:",a),a;return console.log(" Recognition record created successfully:",r),{id:r.id.toString(),startupId:r.startup_id,programName:r.program_name,facilitatorName:r.facilitator_name,facilitatorCode:r.facilitator_code,incubationType:r.incubation_type,feeType:r.fee_type,feeAmount:r.fee_amount,shares:r.shares,pricePerShare:r.price_per_share,investmentAmount:r.investment_amount,equityAllocated:r.equity_allocated,postMoneyValuation:r.post_money_valuation,signedAgreementUrl:r.signed_agreement_url,status:r.status||"pending",dateAdded:r.date_added}}catch(r){throw console.error(" Error in createRecognitionRecord:",r),r}}async updateRecognitionRecord(t,r){try{const a={};r.programName!==void 0&&(a.program_name=r.programName),r.facilitatorName!==void 0&&(a.facilitator_name=r.facilitatorName),r.facilitatorCode!==void 0&&(a.facilitator_code=r.facilitatorCode),r.incubationType!==void 0&&(a.incubation_type=r.incubationType),r.feeType!==void 0&&(a.fee_type=r.feeType),r.feeAmount!==void 0&&(a.fee_amount=r.feeAmount),r.shares!==void 0&&(a.shares=r.shares),r.pricePerShare!==void 0&&(a.price_per_share=r.pricePerShare),r.investmentAmount!==void 0&&(a.investment_amount=r.investmentAmount),r.equityAllocated!==void 0&&(a.equity_allocated=r.equityAllocated),r.postMoneyValuation!==void 0&&(a.post_money_valuation=r.postMoneyValuation),r.signedAgreementUrl!==void 0&&(a.signed_agreement_url=r.signedAgreementUrl),r.status!==void 0&&(a.status=r.status);const{data:s,error:i}=await G.from("recognition_records").update(a).eq("id",t).select().single();if(i)throw console.error("Error updating recognition record:",i),i;return{id:s.id.toString(),startupId:s.startup_id,programName:s.program_name,facilitatorName:s.facilitator_name,facilitatorCode:s.facilitator_code,incubationType:s.incubation_type,feeType:s.fee_type,feeAmount:s.fee_amount,shares:s.shares,pricePerShare:s.price_per_share,investmentAmount:s.investment_amount,equityAllocated:s.equity_allocated,postMoneyValuation:s.post_money_valuation,signedAgreementUrl:s.signed_agreement_url,status:s.status||"pending",dateAdded:s.date_added}}catch(a){throw console.error("Error in updateRecognitionRecord:",a),a}}async deleteRecognitionRecord(t){try{const{error:r}=await G.from("recognition_records").delete().eq("id",t);if(r)throw console.error("Error deleting recognition record:",r),r;return!0}catch(r){throw console.error("Error in deleteRecognitionRecord:",r),r}}async getRecognitionRecordById(t){try{const{data:r,error:a}=await G.from("recognition_records").select("*").eq("id",t).single();if(a){if(a.code==="PGRST116")return null;throw console.error("Error fetching recognition record by ID:",a),a}return{id:r.id.toString(),startupId:r.startup_id,programName:r.program_name,facilitatorName:r.facilitator_name,facilitatorCode:r.facilitator_code,incubationType:r.incubation_type,feeType:r.fee_type,feeAmount:r.fee_amount,shares:r.shares,pricePerShare:r.price_per_share,investmentAmount:r.investment_amount,equityAllocated:r.equity_allocated,postMoneyValuation:r.post_money_valuation,signedAgreementUrl:r.signed_agreement_url,status:r.status||"pending",dateAdded:r.date_added}}catch(r){throw console.error("Error in getRecognitionRecordById:",r),r}}async validateFacilitatorCode(t){try{console.log(" Validating facilitator code:",t);const{data:r,error:a}=await G.from("users").select("id, facilitator_code, name, role").eq("facilitator_code",t).eq("role","Startup Facilitation Center").single();if(a){if(a.code==="PGRST116")return console.log(" No facilitator found with code:",t),!1;throw console.error(" Error validating facilitator code:",a),a}return r?(console.log(" Facilitator found:",{id:r.id,code:r.facilitator_code,name:r.name,role:r.role}),!0):!1}catch(r){return console.error(" Error in validateFacilitatorCode:",r),!1}}async getStartupDetailsForRecognition(t){try{const{data:r,error:a}=await G.from("recognition_records").select(`
          *,
          startups!recognition_records_startup_id_fkey (
            id,
            name,
            sector,
            total_funding,
            total_revenue,
            registration_date
          )
        `).eq("id",t).single();if(a)throw console.error("Error fetching startup details for recognition:",a),a;return{recognitionRecord:{id:r.id.toString(),startupId:r.startup_id,programName:r.program_name,facilitatorName:r.facilitator_name,facilitatorCode:r.facilitator_code,incubationType:r.incubation_type,feeType:r.fee_type,feeAmount:r.fee_amount,shares:r.shares,pricePerShare:r.price_per_share,investmentAmount:r.investment_amount,equityAllocated:r.equity_allocated,postMoneyValuation:r.post_money_valuation,signedAgreementUrl:r.signed_agreement_url,dateAdded:r.date_added},startup:r.startups}}catch(r){throw console.error("Error in getStartupDetailsForRecognition:",r),r}}async approveRecognitionRecord(t){try{const{error:r}=await G.from("recognition_records").update({status:"approved"}).eq("id",t);if(r)throw console.error("Error approving recognition record:",r),r;return!0}catch(r){throw console.error("Error in approveRecognitionRecord:",r),r}}}const F0=new Lee;function _a(e){"@babel/helpers - typeof";return _a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_a(e)}var yl=Uint8Array,Yi=Uint16Array,Y_=Int32Array,X_=new yl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Z_=new yl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Z6=new yl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),T8=function(e,t){for(var r=new Yi(31),a=0;a<31;++a)r[a]=t+=1<<e[a-1];for(var s=new Y_(r[30]),a=1;a<30;++a)for(var i=r[a];i<r[a+1];++i)s[i]=i-r[a]<<5|a;return{b:r,r:s}},O8=T8(X_,2),Mee=O8.b,Ew=O8.r;Mee[28]=258,Ew[258]=28;var Iee=T8(Z_,0),J6=Iee.r,Pw=new Yi(32768);for(var Ka=0;Ka<32768;++Ka){var Ju=(Ka&43690)>>1|(Ka&21845)<<1;Ju=(Ju&52428)>>2|(Ju&13107)<<2,Ju=(Ju&61680)>>4|(Ju&3855)<<4,Pw[Ka]=((Ju&65280)>>8|(Ju&255)<<8)>>1}var Cp=function(e,t,r){for(var a=e.length,s=0,i=new Yi(t);s<a;++s)e[s]&&++i[e[s]-1];var l=new Yi(t);for(s=1;s<t;++s)l[s]=l[s-1]+i[s-1]<<1;var u;if(r){u=new Yi(1<<t);var d=15-t;for(s=0;s<a;++s)if(e[s])for(var f=s<<4|e[s],m=t-e[s],g=l[e[s]-1]++<<m,v=g|(1<<m)-1;g<=v;++g)u[Pw[g]>>d]=f}else for(u=new Yi(a),s=0;s<a;++s)e[s]&&(u[s]=Pw[l[e[s]-1]++]>>15-e[s]);return u},_f=new yl(288);for(var Ka=0;Ka<144;++Ka)_f[Ka]=8;for(var Ka=144;Ka<256;++Ka)_f[Ka]=9;for(var Ka=256;Ka<280;++Ka)_f[Ka]=7;for(var Ka=280;Ka<288;++Ka)_f[Ka]=8;var Kx=new yl(32);for(var Ka=0;Ka<32;++Ka)Kx[Ka]=5;var qee=Cp(_f,9,0),Fee=Cp(Kx,5,0),D8=function(e){return(e+7)/8|0},Bee=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new yl(e.subarray(t,r))},Ic=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8},gp=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8,e[a+2]|=r>>16},H1=function(e,t){for(var r=[],a=0;a<e.length;++a)e[a]&&r.push({s:a,f:e[a]});var s=r.length,i=r.slice();if(!s)return{t:L8,l:0};if(s==1){var l=new yl(r[0].s+1);return l[r[0].s]=1,{t:l,l:1}}r.sort(function(L,F){return L.f-F.f}),r.push({s:-1,f:25001});var u=r[0],d=r[1],f=0,m=1,g=2;for(r[0]={s:-1,f:u.f+d.f,l:u,r:d};m!=s-1;)u=r[r[f].f<r[g].f?f++:g++],d=r[f!=m&&r[f].f<r[g].f?f++:g++],r[m++]={s:-1,f:u.f+d.f,l:u,r:d};for(var v=i[0].s,a=1;a<s;++a)i[a].s>v&&(v=i[a].s);var x=new Yi(v+1),j=Tw(r[m-1],x,0);if(j>t){var a=0,b=0,A=j-t,S=1<<A;for(i.sort(function(F,z){return x[z.s]-x[F.s]||F.f-z.f});a<s;++a){var T=i[a].s;if(x[T]>t)b+=S-(1<<j-x[T]),x[T]=t;else break}for(b>>=A;b>0;){var E=i[a].s;x[E]<t?b-=1<<t-x[E]++-1:++a}for(;a>=0&&b;--a){var D=i[a].s;x[D]==t&&(--x[D],++b)}j=t}return{t:new yl(x),l:j}},Tw=function(e,t,r){return e.s==-1?Math.max(Tw(e.l,t,r+1),Tw(e.r,t,r+1)):t[e.s]=r},Q6=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Yi(++t),a=0,s=e[0],i=1,l=function(d){r[a++]=d},u=1;u<=t;++u)if(e[u]==s&&u!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)l(32754);i>2&&(l(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(l(s),--i;i>6;i-=6)l(8304);i>2&&(l(i-3<<5|8208),i=0)}for(;i--;)l(s);i=1,s=e[u]}return{c:r.subarray(0,a),n:t}},xp=function(e,t){for(var r=0,a=0;a<t.length;++a)r+=e[a]*t[a];return r},R8=function(e,t,r){var a=r.length,s=D8(t+2);e[s]=a&255,e[s+1]=a>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<a;++i)e[s+i+4]=r[i];return(s+4+a)*8},eC=function(e,t,r,a,s,i,l,u,d,f,m){Ic(t,m++,r),++s[256];for(var g=H1(s,15),v=g.t,x=g.l,j=H1(i,15),b=j.t,A=j.l,S=Q6(v),T=S.c,E=S.n,D=Q6(b),L=D.c,F=D.n,z=new Yi(19),M=0;M<T.length;++M)++z[T[M]&31];for(var M=0;M<L.length;++M)++z[L[M]&31];for(var U=H1(z,7),oe=U.t,R=U.l,q=19;q>4&&!oe[Z6[q-1]];--q);var se=f+5<<3,J=xp(s,_f)+xp(i,Kx)+l,Q=xp(s,v)+xp(i,b)+l+14+3*q+xp(z,oe)+2*z[16]+3*z[17]+7*z[18];if(d>=0&&se<=J&&se<=Q)return R8(t,m,e.subarray(d,d+f));var ae,he,de,_e;if(Ic(t,m,1+(Q<J)),m+=2,Q<J){ae=Cp(v,x,0),he=v,de=Cp(b,A,0),_e=b;var Y=Cp(oe,R,0);Ic(t,m,E-257),Ic(t,m+5,F-1),Ic(t,m+10,q-4),m+=14;for(var M=0;M<q;++M)Ic(t,m+3*M,oe[Z6[M]]);m+=3*q;for(var ye=[T,L],P=0;P<2;++P)for(var Z=ye[P],M=0;M<Z.length;++M){var ce=Z[M]&31;Ic(t,m,Y[ce]),m+=oe[ce],ce>15&&(Ic(t,m,Z[M]>>5&127),m+=Z[M]>>12)}}else ae=qee,he=_f,de=Fee,_e=Kx;for(var M=0;M<u;++M){var je=a[M];if(je>255){var ce=je>>18&31;gp(t,m,ae[ce+257]),m+=he[ce+257],ce>7&&(Ic(t,m,je>>23&31),m+=X_[ce]);var ke=je&31;gp(t,m,de[ke]),m+=_e[ke],ke>3&&(gp(t,m,je>>5&8191),m+=Z_[ke])}else gp(t,m,ae[je]),m+=he[je]}return gp(t,m,ae[256]),m+he[256]},Uee=new Y_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),L8=new yl(0),$ee=function(e,t,r,a,s,i){var l=i.z||e.length,u=new yl(a+l+5*(1+Math.ceil(l/7e3))+s),d=u.subarray(a,u.length-s),f=i.l,m=(i.r||0)&7;if(t){m&&(d[0]=i.r>>3);for(var g=Uee[t-1],v=g>>13,x=g&8191,j=(1<<r)-1,b=i.p||new Yi(32768),A=i.h||new Yi(j+1),S=Math.ceil(r/3),T=2*S,E=function(W){return(e[W]^e[W+1]<<S^e[W+2]<<T)&j},D=new Y_(25e3),L=new Yi(288),F=new Yi(32),z=0,M=0,U=i.i||0,oe=0,R=i.w||0,q=0;U+2<l;++U){var se=E(U),J=U&32767,Q=A[se];if(b[J]=Q,A[se]=J,R<=U){var ae=l-U;if((z>7e3||oe>24576)&&(ae>423||!f)){m=eC(e,d,0,D,L,F,M,oe,q,U-q,m),oe=z=M=0,q=U;for(var he=0;he<286;++he)L[he]=0;for(var he=0;he<30;++he)F[he]=0}var de=2,_e=0,Y=x,ye=J-Q&32767;if(ae>2&&se==E(U-ye))for(var P=Math.min(v,ae)-1,Z=Math.min(32767,U),ce=Math.min(258,ae);ye<=Z&&--Y&&J!=Q;){if(e[U+de]==e[U+de-ye]){for(var je=0;je<ce&&e[U+je]==e[U+je-ye];++je);if(je>de){if(de=je,_e=ye,je>P)break;for(var ke=Math.min(ye,je-2),De=0,he=0;he<ke;++he){var Ee=U-ye+he&32767,ne=b[Ee],Ne=Ee-ne&32767;Ne>De&&(De=Ne,Q=Ee)}}}J=Q,Q=b[J],ye+=J-Q&32767}if(_e){D[oe++]=268435456|Ew[de]<<18|J6[_e];var le=Ew[de]&31,xe=J6[_e]&31;M+=X_[le]+Z_[xe],++L[257+le],++F[xe],R=U+de,++z}else D[oe++]=e[U],++L[e[U]]}}for(U=Math.max(U,R);U<l;++U)D[oe++]=e[U],++L[e[U]];m=eC(e,d,f,D,L,F,M,oe,q,U-q,m),f||(i.r=m&7|d[m/8|0]<<3,m-=7,i.h=A,i.p=b,i.i=U,i.w=R)}else{for(var U=i.w||0;U<l+f;U+=65535){var H=U+65535;H>=l&&(d[m/8|0]=f,H=l),m=R8(d,m+1,e.subarray(U,H))}i.i=l}return Bee(u,0,a+D8(m)+s)},M8=function(){var e=1,t=0;return{p:function(r){for(var a=e,s=t,i=r.length|0,l=0;l!=i;){for(var u=Math.min(l+2655,i);l<u;++l)s+=a+=r[l];a=(a&65535)+15*(a>>16),s=(s&65535)+15*(s>>16)}e=a,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},zee=function(e,t,r,a,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),l=new yl(i.length+e.length);l.set(i),l.set(e,i.length),e=l,s.w=i.length}return $ee(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,a,s)},I8=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Vee=function(e,t){var r=t.level,a=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=a<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=M8();s.p(t.dictionary),I8(e,2,s.d())}};function Ow(e,t){t||(t={});var r=M8();r.p(e);var a=zee(e,t,t.dictionary?6:2,4);return Vee(a,t),I8(a,a.length-4,r.d()),a}var Hee=typeof TextDecoder<"u"&&new TextDecoder,Gee=0;try{Hee.decode(L8,{stream:!0}),Gee=1}catch{}function Kee(e){if(Array.isArray(e))return e}function Wee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,l,u=[],d=!0,f=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(u.push(a.value),u.length!==t);d=!0);}catch(m){f=!0,s=m}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}function tC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function Yee(e,t){if(e){if(typeof e=="string")return tC(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tC(e,t):void 0}}function Xee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rC(e,t){return Kee(e)||Wee(e,t)||Yee(e,t)||Xee()}function aC(e,t="utf8"){return new TextDecoder(t).decode(e)}const Zee=new TextEncoder;function Jee(e){return Zee.encode(e)}const Qee=1024*8,ete=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),G1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class J_{constructor(t=Qee,r={}){da(this,"buffer");da(this,"byteLength");da(this,"byteOffset");da(this,"length");da(this,"offset");da(this,"lastWrittenByte");da(this,"littleEndian");da(this,"_data");da(this,"_mark");da(this,"_marks");let a=!1;typeof t=="number"?t=new ArrayBuffer(t):(a=!0,this.lastWrittenByte=t.byteLength);const s=r.offset?r.offset>>>0:0,i=t.byteLength-s;let l=s;(ArrayBuffer.isView(t)||t instanceof J_)&&(t.byteLength!==t.buffer.byteLength&&(l=t.byteOffset+s),t=t.buffer),a?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const a=(this.offset+t)*2,s=new Uint8Array(a);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=a,this.byteLength=a,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const a=G1[r].BYTES_PER_ELEMENT*t,s=this.byteOffset+this.offset,i=this.buffer.slice(s,s+a);if(this.littleEndian===ete&&r!=="uint8"&&r!=="int8"){const u=new Uint8Array(this.buffer.slice(s,s+a));u.reverse();const d=new G1[r](u.buffer);return this.offset+=a,d.reverse(),d}const l=new G1[r](i);return this.offset+=a,l}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let a=0;a<t;a++)r+=this.readChar();return r}readUtf8(t=1){return aC(this.readBytes(t))}decodeText(t=1,r="utf8"){return aC(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(Jee(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function vm(e){let t=e.length;for(;--t>=0;)e[t]=0}const tte=3,rte=258,q8=29,ate=256,nte=ate+1+q8,F8=30,ste=512,ite=new Array((nte+2)*2);vm(ite);const ote=new Array(F8*2);vm(ote);const lte=new Array(ste);vm(lte);const cte=new Array(rte-tte+1);vm(cte);const ute=new Array(q8);vm(ute);const dte=new Array(F8);vm(dte);const fte=(e,t,r,a)=>{let s=e&65535|0,i=e>>>16&65535|0,l=0;for(;r!==0;){l=r>2e3?2e3:r,r-=l;do s=s+t[a++]|0,i=i+s|0;while(--l);s%=65521,i%=65521}return s|i<<16|0};var Dw=fte;const hte=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var a=0;a<8;a++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},mte=new Uint32Array(hte()),pte=(e,t,r,a)=>{const s=mte,i=a+r;e^=-1;for(let l=a;l<i;l++)e=e>>>8^s[(e^t[l])&255];return e^-1};var Kl=pte,Rw={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},B8={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const gte=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var xte=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const a in r)gte(r,a)&&(e[a]=r[a])}}return e},vte=e=>{let t=0;for(let a=0,s=e.length;a<s;a++)t+=e[a].length;const r=new Uint8Array(t);for(let a=0,s=0,i=e.length;a<i;a++){let l=e[a];r.set(l,s),s+=l.length}return r},U8={assign:xte,flattenChunks:vte};let $8=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{$8=!1}const Yp=new Uint8Array(256);for(let e=0;e<256;e++)Yp[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Yp[254]=Yp[254]=1;var yte=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,a,s,i,l=e.length,u=0;for(s=0;s<l;s++)r=e.charCodeAt(s),(r&64512)===55296&&s+1<l&&(a=e.charCodeAt(s+1),(a&64512)===56320&&(r=65536+(r-55296<<10)+(a-56320),s++)),u+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(u),i=0,s=0;i<u;s++)r=e.charCodeAt(s),(r&64512)===55296&&s+1<l&&(a=e.charCodeAt(s+1),(a&64512)===56320&&(r=65536+(r-55296<<10)+(a-56320),s++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|r&63):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|r&63):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|r&63);return t};const bte=(e,t)=>{if(t<65534&&e.subarray&&$8)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let a=0;a<t;a++)r+=String.fromCharCode(e[a]);return r};var wte=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let a,s;const i=new Array(r*2);for(s=0,a=0;a<r;){let l=e[a++];if(l<128){i[s++]=l;continue}let u=Yp[l];if(u>4){i[s++]=65533,a+=u-1;continue}for(l&=u===2?31:u===3?15:7;u>1&&a<r;)l=l<<6|e[a++]&63,u--;if(u>1){i[s++]=65533;continue}l<65536?i[s++]=l:(l-=65536,i[s++]=55296|l>>10&1023,i[s++]=56320|l&1023)}return bte(i,s)},jte=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+Yp[e[r]]>t?r:t},Lw={string2buf:yte,buf2string:wte,utf8border:jte};function _te(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Nte=_te;const B0=16209,Ste=16191;var Ate=function(t,r){let a,s,i,l,u,d,f,m,g,v,x,j,b,A,S,T,E,D,L,F,z,M,U,oe;const R=t.state;a=t.next_in,U=t.input,s=a+(t.avail_in-5),i=t.next_out,oe=t.output,l=i-(r-t.avail_out),u=i+(t.avail_out-257),d=R.dmax,f=R.wsize,m=R.whave,g=R.wnext,v=R.window,x=R.hold,j=R.bits,b=R.lencode,A=R.distcode,S=(1<<R.lenbits)-1,T=(1<<R.distbits)-1;e:do{j<15&&(x+=U[a++]<<j,j+=8,x+=U[a++]<<j,j+=8),E=b[x&S];t:for(;;){if(D=E>>>24,x>>>=D,j-=D,D=E>>>16&255,D===0)oe[i++]=E&65535;else if(D&16){L=E&65535,D&=15,D&&(j<D&&(x+=U[a++]<<j,j+=8),L+=x&(1<<D)-1,x>>>=D,j-=D),j<15&&(x+=U[a++]<<j,j+=8,x+=U[a++]<<j,j+=8),E=A[x&T];r:for(;;){if(D=E>>>24,x>>>=D,j-=D,D=E>>>16&255,D&16){if(F=E&65535,D&=15,j<D&&(x+=U[a++]<<j,j+=8,j<D&&(x+=U[a++]<<j,j+=8)),F+=x&(1<<D)-1,F>d){t.msg="invalid distance too far back",R.mode=B0;break e}if(x>>>=D,j-=D,D=i-l,F>D){if(D=F-D,D>m&&R.sane){t.msg="invalid distance too far back",R.mode=B0;break e}if(z=0,M=v,g===0){if(z+=f-D,D<L){L-=D;do oe[i++]=v[z++];while(--D);z=i-F,M=oe}}else if(g<D){if(z+=f+g-D,D-=g,D<L){L-=D;do oe[i++]=v[z++];while(--D);if(z=0,g<L){D=g,L-=D;do oe[i++]=v[z++];while(--D);z=i-F,M=oe}}}else if(z+=g-D,D<L){L-=D;do oe[i++]=v[z++];while(--D);z=i-F,M=oe}for(;L>2;)oe[i++]=M[z++],oe[i++]=M[z++],oe[i++]=M[z++],L-=3;L&&(oe[i++]=M[z++],L>1&&(oe[i++]=M[z++]))}else{z=i-F;do oe[i++]=oe[z++],oe[i++]=oe[z++],oe[i++]=oe[z++],L-=3;while(L>2);L&&(oe[i++]=oe[z++],L>1&&(oe[i++]=oe[z++]))}}else if((D&64)===0){E=A[(E&65535)+(x&(1<<D)-1)];continue r}else{t.msg="invalid distance code",R.mode=B0;break e}break}}else if((D&64)===0){E=b[(E&65535)+(x&(1<<D)-1)];continue t}else if(D&32){R.mode=Ste;break e}else{t.msg="invalid literal/length code",R.mode=B0;break e}break}}while(a<s&&i<u);L=j>>3,a-=L,j-=L<<3,x&=(1<<j)-1,t.next_in=a,t.next_out=i,t.avail_in=a<s?5+(s-a):5-(a-s),t.avail_out=i<u?257+(u-i):257-(i-u),R.hold=x,R.bits=j};const kh=15,nC=852,sC=592,iC=0,K1=1,oC=2,Cte=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),kte=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ete=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Pte=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Tte=(e,t,r,a,s,i,l,u)=>{const d=u.bits;let f=0,m=0,g=0,v=0,x=0,j=0,b=0,A=0,S=0,T=0,E,D,L,F,z,M=null,U;const oe=new Uint16Array(kh+1),R=new Uint16Array(kh+1);let q=null,se,J,Q;for(f=0;f<=kh;f++)oe[f]=0;for(m=0;m<a;m++)oe[t[r+m]]++;for(x=d,v=kh;v>=1&&oe[v]===0;v--);if(x>v&&(x=v),v===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,u.bits=1,0;for(g=1;g<v&&oe[g]===0;g++);for(x<g&&(x=g),A=1,f=1;f<=kh;f++)if(A<<=1,A-=oe[f],A<0)return-1;if(A>0&&(e===iC||v!==1))return-1;for(R[1]=0,f=1;f<kh;f++)R[f+1]=R[f]+oe[f];for(m=0;m<a;m++)t[r+m]!==0&&(l[R[t[r+m]]++]=m);if(e===iC?(M=q=l,U=20):e===K1?(M=Cte,q=kte,U=257):(M=Ete,q=Pte,U=0),T=0,m=0,f=g,z=i,j=x,b=0,L=-1,S=1<<x,F=S-1,e===K1&&S>nC||e===oC&&S>sC)return 1;for(;;){se=f-b,l[m]+1<U?(J=0,Q=l[m]):l[m]>=U?(J=q[l[m]-U],Q=M[l[m]-U]):(J=96,Q=0),E=1<<f-b,D=1<<j,g=D;do D-=E,s[z+(T>>b)+D]=se<<24|J<<16|Q|0;while(D!==0);for(E=1<<f-1;T&E;)E>>=1;if(E!==0?(T&=E-1,T+=E):T=0,m++,--oe[f]===0){if(f===v)break;f=t[r+l[m]]}if(f>x&&(T&F)!==L){for(b===0&&(b=x),z+=g,j=f-b,A=1<<j;j+b<v&&(A-=oe[j+b],!(A<=0));)j++,A<<=1;if(S+=1<<j,e===K1&&S>nC||e===oC&&S>sC)return 1;L=T&F,s[L]=x<<24|j<<16|z-i|0}}return T!==0&&(s[z+T]=f-b<<24|64<<16|0),u.bits=x,0};var kp=Tte;const Ote=0,z8=1,V8=2,{Z_FINISH:lC,Z_BLOCK:Dte,Z_TREES:U0,Z_OK:Nf,Z_STREAM_END:Rte,Z_NEED_DICT:Lte,Z_STREAM_ERROR:Do,Z_DATA_ERROR:H8,Z_MEM_ERROR:G8,Z_BUF_ERROR:Mte,Z_DEFLATED:cC}=B8,Fv=16180,uC=16181,dC=16182,fC=16183,hC=16184,mC=16185,pC=16186,gC=16187,xC=16188,vC=16189,Wx=16190,qc=16191,W1=16192,yC=16193,Y1=16194,bC=16195,wC=16196,jC=16197,_C=16198,$0=16199,z0=16200,NC=16201,SC=16202,AC=16203,CC=16204,kC=16205,X1=16206,EC=16207,PC=16208,rn=16209,K8=16210,W8=16211,Ite=852,qte=592,Fte=15,Bte=Fte,TC=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Ute(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Of=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Fv||t.mode>W8?1:0},Y8=e=>{if(Of(e))return Do;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Fv,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Ite),t.distcode=t.distdyn=new Int32Array(qte),t.sane=1,t.back=-1,Nf},X8=e=>{if(Of(e))return Do;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Y8(e)},Z8=(e,t)=>{let r;if(Of(e))return Do;const a=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Do:(a.window!==null&&a.wbits!==t&&(a.window=null),a.wrap=r,a.wbits=t,X8(e))},J8=(e,t)=>{if(!e)return Do;const r=new Ute;e.state=r,r.strm=e,r.window=null,r.mode=Fv;const a=Z8(e,t);return a!==Nf&&(e.state=null),a},$te=e=>J8(e,Bte);let OC=!0,Z1,J1;const zte=e=>{if(OC){Z1=new Int32Array(512),J1=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(kp(z8,e.lens,0,288,Z1,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;kp(V8,e.lens,0,32,J1,0,e.work,{bits:5}),OC=!1}e.lencode=Z1,e.lenbits=9,e.distcode=J1,e.distbits=5},Q8=(e,t,r,a)=>{let s;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),a>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>a&&(s=a),i.window.set(t.subarray(r-a,r-a+s),i.wnext),a-=s,a?(i.window.set(t.subarray(r-a,r),0),i.wnext=a,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},Vte=(e,t)=>{let r,a,s,i,l,u,d,f,m,g,v,x,j,b,A=0,S,T,E,D,L,F,z,M;const U=new Uint8Array(4);let oe,R;const q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Of(e)||!e.output||!e.input&&e.avail_in!==0)return Do;r=e.state,r.mode===qc&&(r.mode=W1),l=e.next_out,s=e.output,d=e.avail_out,i=e.next_in,a=e.input,u=e.avail_in,f=r.hold,m=r.bits,g=u,v=d,M=Nf;e:for(;;)switch(r.mode){case Fv:if(r.wrap===0){r.mode=W1;break}for(;m<16;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if(r.wrap&2&&f===35615){r.wbits===0&&(r.wbits=15),r.check=0,U[0]=f&255,U[1]=f>>>8&255,r.check=Kl(r.check,U,2,0),f=0,m=0,r.mode=uC;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",r.mode=rn;break}if((f&15)!==cC){e.msg="unknown compression method",r.mode=rn;break}if(f>>>=4,m-=4,z=(f&15)+8,r.wbits===0&&(r.wbits=z),z>15||z>r.wbits){e.msg="invalid window size",r.mode=rn;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=f&512?vC:qc,f=0,m=0;break;case uC:for(;m<16;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if(r.flags=f,(r.flags&255)!==cC){e.msg="unknown compression method",r.mode=rn;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=rn;break}r.head&&(r.head.text=f>>8&1),r.flags&512&&r.wrap&4&&(U[0]=f&255,U[1]=f>>>8&255,r.check=Kl(r.check,U,2,0)),f=0,m=0,r.mode=dC;case dC:for(;m<32;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}r.head&&(r.head.time=f),r.flags&512&&r.wrap&4&&(U[0]=f&255,U[1]=f>>>8&255,U[2]=f>>>16&255,U[3]=f>>>24&255,r.check=Kl(r.check,U,4,0)),f=0,m=0,r.mode=fC;case fC:for(;m<16;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}r.head&&(r.head.xflags=f&255,r.head.os=f>>8),r.flags&512&&r.wrap&4&&(U[0]=f&255,U[1]=f>>>8&255,r.check=Kl(r.check,U,2,0)),f=0,m=0,r.mode=hC;case hC:if(r.flags&1024){for(;m<16;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}r.length=f,r.head&&(r.head.extra_len=f),r.flags&512&&r.wrap&4&&(U[0]=f&255,U[1]=f>>>8&255,r.check=Kl(r.check,U,2,0)),f=0,m=0}else r.head&&(r.head.extra=null);r.mode=mC;case mC:if(r.flags&1024&&(x=r.length,x>u&&(x=u),x&&(r.head&&(z=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(a.subarray(i,i+x),z)),r.flags&512&&r.wrap&4&&(r.check=Kl(r.check,a,x,i)),u-=x,i+=x,r.length-=x),r.length))break e;r.length=0,r.mode=pC;case pC:if(r.flags&2048){if(u===0)break e;x=0;do z=a[i+x++],r.head&&z&&r.length<65536&&(r.head.name+=String.fromCharCode(z));while(z&&x<u);if(r.flags&512&&r.wrap&4&&(r.check=Kl(r.check,a,x,i)),u-=x,i+=x,z)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=gC;case gC:if(r.flags&4096){if(u===0)break e;x=0;do z=a[i+x++],r.head&&z&&r.length<65536&&(r.head.comment+=String.fromCharCode(z));while(z&&x<u);if(r.flags&512&&r.wrap&4&&(r.check=Kl(r.check,a,x,i)),u-=x,i+=x,z)break e}else r.head&&(r.head.comment=null);r.mode=xC;case xC:if(r.flags&512){for(;m<16;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if(r.wrap&4&&f!==(r.check&65535)){e.msg="header crc mismatch",r.mode=rn;break}f=0,m=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=qc;break;case vC:for(;m<32;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}e.adler=r.check=TC(f),f=0,m=0,r.mode=Wx;case Wx:if(r.havedict===0)return e.next_out=l,e.avail_out=d,e.next_in=i,e.avail_in=u,r.hold=f,r.bits=m,Lte;e.adler=r.check=1,r.mode=qc;case qc:if(t===Dte||t===U0)break e;case W1:if(r.last){f>>>=m&7,m-=m&7,r.mode=X1;break}for(;m<3;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}switch(r.last=f&1,f>>>=1,m-=1,f&3){case 0:r.mode=yC;break;case 1:if(zte(r),r.mode=$0,t===U0){f>>>=2,m-=2;break e}break;case 2:r.mode=wC;break;case 3:e.msg="invalid block type",r.mode=rn}f>>>=2,m-=2;break;case yC:for(f>>>=m&7,m-=m&7;m<32;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",r.mode=rn;break}if(r.length=f&65535,f=0,m=0,r.mode=Y1,t===U0)break e;case Y1:r.mode=bC;case bC:if(x=r.length,x){if(x>u&&(x=u),x>d&&(x=d),x===0)break e;s.set(a.subarray(i,i+x),l),u-=x,i+=x,d-=x,l+=x,r.length-=x;break}r.mode=qc;break;case wC:for(;m<14;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if(r.nlen=(f&31)+257,f>>>=5,m-=5,r.ndist=(f&31)+1,f>>>=5,m-=5,r.ncode=(f&15)+4,f>>>=4,m-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=rn;break}r.have=0,r.mode=jC;case jC:for(;r.have<r.ncode;){for(;m<3;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}r.lens[q[r.have++]]=f&7,f>>>=3,m-=3}for(;r.have<19;)r.lens[q[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,oe={bits:r.lenbits},M=kp(Ote,r.lens,0,19,r.lencode,0,r.work,oe),r.lenbits=oe.bits,M){e.msg="invalid code lengths set",r.mode=rn;break}r.have=0,r.mode=_C;case _C:for(;r.have<r.nlen+r.ndist;){for(;A=r.lencode[f&(1<<r.lenbits)-1],S=A>>>24,T=A>>>16&255,E=A&65535,!(S<=m);){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if(E<16)f>>>=S,m-=S,r.lens[r.have++]=E;else{if(E===16){for(R=S+2;m<R;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if(f>>>=S,m-=S,r.have===0){e.msg="invalid bit length repeat",r.mode=rn;break}z=r.lens[r.have-1],x=3+(f&3),f>>>=2,m-=2}else if(E===17){for(R=S+3;m<R;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}f>>>=S,m-=S,z=0,x=3+(f&7),f>>>=3,m-=3}else{for(R=S+7;m<R;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}f>>>=S,m-=S,z=0,x=11+(f&127),f>>>=7,m-=7}if(r.have+x>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=rn;break}for(;x--;)r.lens[r.have++]=z}}if(r.mode===rn)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=rn;break}if(r.lenbits=9,oe={bits:r.lenbits},M=kp(z8,r.lens,0,r.nlen,r.lencode,0,r.work,oe),r.lenbits=oe.bits,M){e.msg="invalid literal/lengths set",r.mode=rn;break}if(r.distbits=6,r.distcode=r.distdyn,oe={bits:r.distbits},M=kp(V8,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,oe),r.distbits=oe.bits,M){e.msg="invalid distances set",r.mode=rn;break}if(r.mode=$0,t===U0)break e;case $0:r.mode=z0;case z0:if(u>=6&&d>=258){e.next_out=l,e.avail_out=d,e.next_in=i,e.avail_in=u,r.hold=f,r.bits=m,Ate(e,v),l=e.next_out,s=e.output,d=e.avail_out,i=e.next_in,a=e.input,u=e.avail_in,f=r.hold,m=r.bits,r.mode===qc&&(r.back=-1);break}for(r.back=0;A=r.lencode[f&(1<<r.lenbits)-1],S=A>>>24,T=A>>>16&255,E=A&65535,!(S<=m);){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if(T&&(T&240)===0){for(D=S,L=T,F=E;A=r.lencode[F+((f&(1<<D+L)-1)>>D)],S=A>>>24,T=A>>>16&255,E=A&65535,!(D+S<=m);){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}f>>>=D,m-=D,r.back+=D}if(f>>>=S,m-=S,r.back+=S,r.length=E,T===0){r.mode=kC;break}if(T&32){r.back=-1,r.mode=qc;break}if(T&64){e.msg="invalid literal/length code",r.mode=rn;break}r.extra=T&15,r.mode=NC;case NC:if(r.extra){for(R=r.extra;m<R;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,m-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=SC;case SC:for(;A=r.distcode[f&(1<<r.distbits)-1],S=A>>>24,T=A>>>16&255,E=A&65535,!(S<=m);){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if((T&240)===0){for(D=S,L=T,F=E;A=r.distcode[F+((f&(1<<D+L)-1)>>D)],S=A>>>24,T=A>>>16&255,E=A&65535,!(D+S<=m);){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}f>>>=D,m-=D,r.back+=D}if(f>>>=S,m-=S,r.back+=S,T&64){e.msg="invalid distance code",r.mode=rn;break}r.offset=E,r.extra=T&15,r.mode=AC;case AC:if(r.extra){for(R=r.extra;m<R;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,m-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=rn;break}r.mode=CC;case CC:if(d===0)break e;if(x=v-d,r.offset>x){if(x=r.offset-x,x>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=rn;break}x>r.wnext?(x-=r.wnext,j=r.wsize-x):j=r.wnext-x,x>r.length&&(x=r.length),b=r.window}else b=s,j=l-r.offset,x=r.length;x>d&&(x=d),d-=x,r.length-=x;do s[l++]=b[j++];while(--x);r.length===0&&(r.mode=z0);break;case kC:if(d===0)break e;s[l++]=r.length,d--,r.mode=z0;break;case X1:if(r.wrap){for(;m<32;){if(u===0)break e;u--,f|=a[i++]<<m,m+=8}if(v-=d,e.total_out+=v,r.total+=v,r.wrap&4&&v&&(e.adler=r.check=r.flags?Kl(r.check,s,v,l-v):Dw(r.check,s,v,l-v)),v=d,r.wrap&4&&(r.flags?f:TC(f))!==r.check){e.msg="incorrect data check",r.mode=rn;break}f=0,m=0}r.mode=EC;case EC:if(r.wrap&&r.flags){for(;m<32;){if(u===0)break e;u--,f+=a[i++]<<m,m+=8}if(r.wrap&4&&f!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=rn;break}f=0,m=0}r.mode=PC;case PC:M=Rte;break e;case rn:M=H8;break e;case K8:return G8;case W8:default:return Do}return e.next_out=l,e.avail_out=d,e.next_in=i,e.avail_in=u,r.hold=f,r.bits=m,(r.wsize||v!==e.avail_out&&r.mode<rn&&(r.mode<X1||t!==lC))&&Q8(e,e.output,e.next_out,v-e.avail_out),g-=e.avail_in,v-=e.avail_out,e.total_in+=g,e.total_out+=v,r.total+=v,r.wrap&4&&v&&(e.adler=r.check=r.flags?Kl(r.check,s,v,e.next_out-v):Dw(r.check,s,v,e.next_out-v)),e.data_type=r.bits+(r.last?64:0)+(r.mode===qc?128:0)+(r.mode===$0||r.mode===Y1?256:0),(g===0&&v===0||t===lC)&&M===Nf&&(M=Mte),M},Hte=e=>{if(Of(e))return Do;let t=e.state;return t.window&&(t.window=null),e.state=null,Nf},Gte=(e,t)=>{if(Of(e))return Do;const r=e.state;return(r.wrap&2)===0?Do:(r.head=t,t.done=!1,Nf)},Kte=(e,t)=>{const r=t.length;let a,s,i;return Of(e)||(a=e.state,a.wrap!==0&&a.mode!==Wx)?Do:a.mode===Wx&&(s=1,s=Dw(s,t,r,0),s!==a.check)?H8:(i=Q8(e,t,r,r),i?(a.mode=K8,G8):(a.havedict=1,Nf))};var Wte=X8,Yte=Z8,Xte=Y8,Zte=$te,Jte=J8,Qte=Vte,ere=Hte,tre=Gte,rre=Kte,are="pako inflate (from Nodeca project)",Vc={inflateReset:Wte,inflateReset2:Yte,inflateResetKeep:Xte,inflateInit:Zte,inflateInit2:Jte,inflate:Qte,inflateEnd:ere,inflateGetHeader:tre,inflateSetDictionary:rre,inflateInfo:are};function nre(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var sre=nre;const eD=Object.prototype.toString,{Z_NO_FLUSH:ire,Z_FINISH:ore,Z_OK:Xp,Z_STREAM_END:Q1,Z_NEED_DICT:e2,Z_STREAM_ERROR:lre,Z_DATA_ERROR:DC,Z_MEM_ERROR:cre}=B8;function hg(e){this.options=U8.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Nte,this.strm.avail_out=0;let r=Vc.inflateInit2(this.strm,t.windowBits);if(r!==Xp)throw new Error(Rw[r]);if(this.header=new sre,Vc.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Lw.string2buf(t.dictionary):eD.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Vc.inflateSetDictionary(this.strm,t.dictionary),r!==Xp)))throw new Error(Rw[r])}hg.prototype.push=function(e,t){const r=this.strm,a=this.options.chunkSize,s=this.options.dictionary;let i,l,u;if(this.ended)return!1;for(t===~~t?l=t:l=t===!0?ore:ire,eD.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(a),r.next_out=0,r.avail_out=a),i=Vc.inflate(r,l),i===e2&&s&&(i=Vc.inflateSetDictionary(r,s),i===Xp?i=Vc.inflate(r,l):i===DC&&(i=e2));r.avail_in>0&&i===Q1&&r.state.wrap>0&&e[r.next_in]!==0;)Vc.inflateReset(r),i=Vc.inflate(r,l);switch(i){case lre:case DC:case e2:case cre:return this.onEnd(i),this.ended=!0,!1}if(u=r.avail_out,r.next_out&&(r.avail_out===0||i===Q1))if(this.options.to==="string"){let d=Lw.utf8border(r.output,r.next_out),f=r.next_out-d,m=Lw.buf2string(r.output,d);r.next_out=f,r.avail_out=a-f,f&&r.output.set(r.output.subarray(d,d+f),0),this.onData(m)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===Xp&&u===0)){if(i===Q1)return i=Vc.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};hg.prototype.onData=function(e){this.chunks.push(e)};hg.prototype.onEnd=function(e){e===Xp&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=U8.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function ure(e,t){const r=new hg(t);if(r.push(e),r.err)throw r.msg||Rw[r.err];return r.result}var dre=hg,fre=ure,hre={Inflate:dre,inflate:fre};const{Inflate:mre,inflate:pre}=hre;var RC=mre,gre=pre;const tD=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;tD[e]=t}const LC=4294967295;function xre(e,t,r){let a=e;for(let s=0;s<r;s++)a=tD[(a^t[s])&255]^a>>>8;return a}function vre(e,t){return(xre(LC,e,t)^LC)>>>0}function MC(e,t,r){const a=e.readUint32(),s=vre(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(s!==a)throw new Error(`CRC mismatch for chunk ${r}. Expected ${a}, found ${s}`)}function rD(e,t,r){for(let a=0;a<r;a++)t[a]=e[a]}function aD(e,t,r,a){let s=0;for(;s<a;s++)t[s]=e[s];for(;s<r;s++)t[s]=e[s]+t[s-a]&255}function nD(e,t,r,a){let s=0;if(r.length===0)for(;s<a;s++)t[s]=e[s];else for(;s<a;s++)t[s]=e[s]+r[s]&255}function sD(e,t,r,a,s){let i=0;if(r.length===0){for(;i<s;i++)t[i]=e[i];for(;i<a;i++)t[i]=e[i]+(t[i-s]>>1)&255}else{for(;i<s;i++)t[i]=e[i]+(r[i]>>1)&255;for(;i<a;i++)t[i]=e[i]+(t[i-s]+r[i]>>1)&255}}function iD(e,t,r,a,s){let i=0;if(r.length===0){for(;i<s;i++)t[i]=e[i];for(;i<a;i++)t[i]=e[i]+t[i-s]&255}else{for(;i<s;i++)t[i]=e[i]+r[i]&255;for(;i<a;i++)t[i]=e[i]+yre(t[i-s],r[i],r[i-s])&255}}function yre(e,t,r){const a=e+t-r,s=Math.abs(a-e),i=Math.abs(a-t),l=Math.abs(a-r);return s<=i&&s<=l?e:i<=l?t:r}function bre(e,t,r,a,s,i){switch(e){case 0:rD(t,r,s);break;case 1:aD(t,r,s,i);break;case 2:nD(t,r,a,s);break;case 3:sD(t,r,a,s,i);break;case 4:iD(t,r,a,s,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const wre=new Uint16Array([255]),jre=new Uint8Array(wre.buffer),_re=jre[0]===255;function Nre(e){const{data:t,width:r,height:a,channels:s,depth:i}=e,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],u=Math.ceil(i/8)*s,d=new Uint8Array(a*r*u);let f=0;for(let m=0;m<7;m++){const g=l[m],v=Math.ceil((r-g.x)/g.xStep),x=Math.ceil((a-g.y)/g.yStep);if(v<=0||x<=0)continue;const j=v*u,b=new Uint8Array(j);for(let A=0;A<x;A++){const S=t[f++],T=t.subarray(f,f+j);f+=j;const E=new Uint8Array(j);bre(S,T,E,b,j,u),b.set(E);for(let D=0;D<v;D++){const L=g.x+D*g.xStep,F=g.y+A*g.yStep;if(!(L>=r||F>=a))for(let z=0;z<u;z++)d[(F*r+L)*u+z]=E[D*u+z]}}}if(i===16){const m=new Uint16Array(d.buffer);if(_re)for(let g=0;g<m.length;g++)m[g]=Sre(m[g]);return m}else return d}function Sre(e){return(e&255)<<8|e>>8&255}const Are=new Uint16Array([255]),Cre=new Uint8Array(Are.buffer),kre=Cre[0]===255,Ere=new Uint8Array(0);function IC(e){const{data:t,width:r,height:a,channels:s,depth:i}=e,l=Math.ceil(i/8)*s,u=Math.ceil(i/8*s*r),d=new Uint8Array(a*u);let f=Ere,m=0,g,v;for(let x=0;x<a;x++){switch(g=t.subarray(m+1,m+1+u),v=d.subarray(x*u,(x+1)*u),t[m]){case 0:rD(g,v,u);break;case 1:aD(g,v,u,l);break;case 2:nD(g,v,f,u);break;case 3:sD(g,v,f,u,l);break;case 4:iD(g,v,f,u,l);break;default:throw new Error(`Unsupported filter: ${t[m]}`)}f=v,m+=u+1}if(i===16){const x=new Uint16Array(d.buffer);if(kre)for(let j=0;j<x.length;j++)x[j]=Pre(x[j]);return x}else return d}function Pre(e){return(e&255)<<8|e>>8&255}const Z0=Uint8Array.of(137,80,78,71,13,10,26,10);function qC(e){if(!Tre(e.readBytes(Z0.length)))throw new Error("wrong PNG signature")}function Tre(e){if(e.length<Z0.length)return!1;for(let t=0;t<Z0.length;t++)if(e[t]!==Z0[t])return!1;return!0}const Ore="tEXt",Dre=0,oD=new TextDecoder("latin1");function Rre(e){if(Mre(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const Lre=/^[\u0000-\u00FF]*$/;function Mre(e){if(!Lre.test(e))throw new Error("invalid latin1 text")}function Ire(e,t,r){const a=lD(t);e[a]=qre(t,r-a.length-1)}function lD(e){for(e.mark();e.readByte()!==Dre;);const t=e.offset;e.reset();const r=oD.decode(e.readBytes(t-e.offset-1));return e.skip(1),Rre(r),r}function qre(e,t){return oD.decode(e.readBytes(t))}const Ii={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},t2={UNKNOWN:-1,DEFLATE:0},FC={UNKNOWN:-1,ADAPTIVE:0},r2={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},V0={NONE:0,BACKGROUND:1,PREVIOUS:2},a2={SOURCE:0,OVER:1};class Fre extends J_{constructor(r,a={}){super(r);da(this,"_checkCrc");da(this,"_inflator");da(this,"_png");da(this,"_apng");da(this,"_end");da(this,"_hasPalette");da(this,"_palette");da(this,"_hasTransparency");da(this,"_transparency");da(this,"_compressionMethod");da(this,"_filterMethod");da(this,"_interlaceMethod");da(this,"_colorType");da(this,"_isAnimated");da(this,"_numberOfFrames");da(this,"_numberOfPlays");da(this,"_frames");da(this,"_writingDataChunks");const{checkCrc:s=!1}=a;this._checkCrc=s,this._inflator=new RC,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=t2.UNKNOWN,this._filterMethod=FC.UNKNOWN,this._interlaceMethod=r2.UNKNOWN,this._colorType=Ii.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(qC(this);!this._end;){const r=this.readUint32(),a=this.readChars(4);this.decodeChunk(r,a)}return this.decodeImage(),this._png}decodeApng(){for(qC(this);!this._end;){const r=this.readUint32(),a=this.readChars(4);this.decodeApngChunk(r,a)}return this.decodeApngImage(),this._apng}decodeChunk(r,a){const s=this.offset;switch(a){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case Ore:Ire(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${a}`);this._checkCrc?MC(this,r+4,a):this.skip(4)}decodeApngChunk(r,a){const s=this.offset;switch(a!=="fdAT"&&a!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),a){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,a),this.offset=s+r;break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${a}`);this._checkCrc?MC(this,r+4,a):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=Bre(this.readUint8());const a=this.readUint8();this._colorType=a;let s;switch(a){case Ii.GREYSCALE:s=1;break;case Ii.TRUECOLOUR:s=3;break;case Ii.INDEXED_COLOUR:s=1;break;case Ii.GREYSCALE_ALPHA:s=2;break;case Ii.TRUECOLOUR_ALPHA:s=4;break;case Ii.UNKNOWN:default:throw new Error(`Unknown color type: ${a}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==t2.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const a=r/3;this._hasPalette=!0;const s=[];this._palette=s;for(let i=0;i<a;i++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const a=r,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,a)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let a=r,s=this.offset+this.byteOffset;if(s+=4,a-=4,this._inflator.push(new Uint8Array(this.buffer,s,a)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Ii.GREYSCALE:case Ii.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let a=0;a<r/2;a++)this._transparency[a]=this.readUint16();break}case Ii.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let a=0;for(;a<r;a++){const s=this.readByte();this._palette[a].push(s)}for(;a<this._palette.length;a++)this._palette[a].push(255);break}case Ii.UNKNOWN:case Ii.GREYSCALE_ALPHA:case Ii.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const a=lD(this),s=this.readUint8();if(s!==t2.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const i=this.readBytes(r-a.length-2);this._png.iccEmbeddedProfile={name:a,profile:gre(i)}}decodepHYs(){const r=this.readUint32(),a=this.readUint32(),s=this.readByte();this._png.resolution={x:r,y:a,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const a={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(r);if(s){if(s.data=IC({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)a.data=s.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(s,i,a),this.addFrameDataToCanvas(a,s)}this._apng.frames.push(a)}}return this._apng}disposeFrame(r,a,s){switch(r.disposeOp){case V0.NONE:break;case V0.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let l=0;l<this._png.width;l++){const u=(i*r.width+l)*this._png.channels;for(let d=0;d<this._png.channels;d++)s.data[u+d]=0}break;case V0.PREVIOUS:s.data.set(a.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,a){const s=1<<this._png.depth,i=(l,u)=>{const d=((l+a.yOffset)*this._png.width+a.xOffset+u)*this._png.channels,f=(l*a.width+u)*this._png.channels;return{index:d,frameIndex:f}};switch(a.blendOp){case a2.SOURCE:for(let l=0;l<a.height;l++)for(let u=0;u<a.width;u++){const{index:d,frameIndex:f}=i(l,u);for(let m=0;m<this._png.channels;m++)r.data[d+m]=a.data[f+m]}break;case a2.OVER:for(let l=0;l<a.height;l++)for(let u=0;u<a.width;u++){const{index:d,frameIndex:f}=i(l,u);for(let m=0;m<this._png.channels;m++){const g=a.data[f+this._png.channels-1]/s,v=m%(this._png.channels-1)===0?1:a.data[f+m],x=Math.floor(g*v+(1-g)*r.data[d+m]);r.data[d+m]+=x}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var a;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((a=this._frames)==null?void 0:a.at(0)).data:this._inflator.result;if(this._filterMethod!==FC.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===r2.NO_INTERLACE)this._png.data=IC({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===r2.ADAM7)this._png.data=Nre({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,a=this._frames.at(-1);a?a.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:V0.NONE,blendOp:a2.SOURCE,data:r}),this._inflator=new RC,this._writingDataChunks=!1}}function Bre(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var BC;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(BC||(BC={}));function Ure(e,t){return new Fre(e,t).decode()}var Nr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function n2(){Nr.console&&typeof Nr.console.log=="function"&&Nr.console.log.apply(Nr.console,arguments)}var Ra={log:n2,warn:function(e){Nr.console&&(typeof Nr.console.warn=="function"?Nr.console.warn.apply(Nr.console,arguments):n2.call(null,arguments))},error:function(e){Nr.console&&(typeof Nr.console.error=="function"?Nr.console.error.apply(Nr.console,arguments):n2(e))}};function s2(e,t,r){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){tf(a.response,t,r)},a.onerror=function(){Ra.error("could not download file")},a.send()}function UC(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function H0(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var tf=Nr.saveAs||((typeof window>"u"?"undefined":_a(window))!=="object"||window!==Nr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var a=Nr.URL||Nr.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?UC(s.href)?s2(e,t,r):H0(s,s.target="_blank"):H0(s)):(s.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(s.href)},4e4),setTimeout(function(){H0(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(UC(e))s2(e,t,r);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){H0(a)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:_a(i)!=="object"&&(Ra.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(e,r),t)}:function(e,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return s2(e,t,r);var s=e.type==="application/octet-stream",i=/constructor/i.test(Nr.HTMLElement)||Nr.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&i)&&(typeof FileReader>"u"?"undefined":_a(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var m=u.result;m=l?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=m:location=m,a=null},u.readAsDataURL(e)}else{var d=Nr.URL||Nr.webkitURL,f=d.createObjectURL(e);a?a.location=f:location.href=f,a=null,setTimeout(function(){d.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function cD(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],a=0;a<r.length;a++){var s=r[a].re,i=r[a].process,l=s.exec(e);l&&(t=i(l),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),d=this.g.toString(16),f=this.b.toString(16);return u.length==1&&(u="0"+u),d.length==1&&(d="0"+d),f.length==1&&(f="0"+f),"#"+u+d+f}}var J0=Nr.atob.bind(Nr),$C=Nr.btoa.bind(Nr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function i2(e,t){var r=e[0],a=e[1],s=e[2],i=e[3];r=Us(r,a,s,i,t[0],7,-680876936),i=Us(i,r,a,s,t[1],12,-389564586),s=Us(s,i,r,a,t[2],17,606105819),a=Us(a,s,i,r,t[3],22,-1044525330),r=Us(r,a,s,i,t[4],7,-176418897),i=Us(i,r,a,s,t[5],12,1200080426),s=Us(s,i,r,a,t[6],17,-1473231341),a=Us(a,s,i,r,t[7],22,-45705983),r=Us(r,a,s,i,t[8],7,1770035416),i=Us(i,r,a,s,t[9],12,-1958414417),s=Us(s,i,r,a,t[10],17,-42063),a=Us(a,s,i,r,t[11],22,-1990404162),r=Us(r,a,s,i,t[12],7,1804603682),i=Us(i,r,a,s,t[13],12,-40341101),s=Us(s,i,r,a,t[14],17,-1502002290),r=$s(r,a=Us(a,s,i,r,t[15],22,1236535329),s,i,t[1],5,-165796510),i=$s(i,r,a,s,t[6],9,-1069501632),s=$s(s,i,r,a,t[11],14,643717713),a=$s(a,s,i,r,t[0],20,-373897302),r=$s(r,a,s,i,t[5],5,-701558691),i=$s(i,r,a,s,t[10],9,38016083),s=$s(s,i,r,a,t[15],14,-660478335),a=$s(a,s,i,r,t[4],20,-405537848),r=$s(r,a,s,i,t[9],5,568446438),i=$s(i,r,a,s,t[14],9,-1019803690),s=$s(s,i,r,a,t[3],14,-187363961),a=$s(a,s,i,r,t[8],20,1163531501),r=$s(r,a,s,i,t[13],5,-1444681467),i=$s(i,r,a,s,t[2],9,-51403784),s=$s(s,i,r,a,t[7],14,1735328473),r=zs(r,a=$s(a,s,i,r,t[12],20,-1926607734),s,i,t[5],4,-378558),i=zs(i,r,a,s,t[8],11,-2022574463),s=zs(s,i,r,a,t[11],16,1839030562),a=zs(a,s,i,r,t[14],23,-35309556),r=zs(r,a,s,i,t[1],4,-1530992060),i=zs(i,r,a,s,t[4],11,1272893353),s=zs(s,i,r,a,t[7],16,-155497632),a=zs(a,s,i,r,t[10],23,-1094730640),r=zs(r,a,s,i,t[13],4,681279174),i=zs(i,r,a,s,t[0],11,-358537222),s=zs(s,i,r,a,t[3],16,-722521979),a=zs(a,s,i,r,t[6],23,76029189),r=zs(r,a,s,i,t[9],4,-640364487),i=zs(i,r,a,s,t[12],11,-421815835),s=zs(s,i,r,a,t[15],16,530742520),r=Vs(r,a=zs(a,s,i,r,t[2],23,-995338651),s,i,t[0],6,-198630844),i=Vs(i,r,a,s,t[7],10,1126891415),s=Vs(s,i,r,a,t[14],15,-1416354905),a=Vs(a,s,i,r,t[5],21,-57434055),r=Vs(r,a,s,i,t[12],6,1700485571),i=Vs(i,r,a,s,t[3],10,-1894986606),s=Vs(s,i,r,a,t[10],15,-1051523),a=Vs(a,s,i,r,t[1],21,-2054922799),r=Vs(r,a,s,i,t[8],6,1873313359),i=Vs(i,r,a,s,t[15],10,-30611744),s=Vs(s,i,r,a,t[6],15,-1560198380),a=Vs(a,s,i,r,t[13],21,1309151649),r=Vs(r,a,s,i,t[4],6,-145523070),i=Vs(i,r,a,s,t[11],10,-1120210379),s=Vs(s,i,r,a,t[2],15,718787259),a=Vs(a,s,i,r,t[9],21,-343485551),e[0]=od(r,e[0]),e[1]=od(a,e[1]),e[2]=od(s,e[2]),e[3]=od(i,e[3])}function Bv(e,t,r,a,s,i){return t=od(od(t,e),od(a,i)),od(t<<s|t>>>32-s,r)}function Us(e,t,r,a,s,i,l){return Bv(t&r|~t&a,e,t,s,i,l)}function $s(e,t,r,a,s,i,l){return Bv(t&a|r&~a,e,t,s,i,l)}function zs(e,t,r,a,s,i,l){return Bv(t^r^a,e,t,s,i,l)}function Vs(e,t,r,a,s,i,l){return Bv(r^(t|~a),e,t,s,i,l)}function uD(e){var t,r=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)i2(a,$re(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(i2(a,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,i2(a,s),a}function $re(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var zC="0123456789abcdef".split("");function zre(e){for(var t="",r=0;r<4;r++)t+=zC[e>>8*r+4&15]+zC[e>>8*r&15];return t}function Vre(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Mw(e){return uD(e).map(Vre).join("")}var Hre=function(e){for(var t=0;t<e.length;t++)e[t]=zre(e[t]);return e.join("")}(uD("hello"))!="5d41402abc4b2a76b9719d911017c592";function od(e,t){if(Hre){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Iw(e,t){var r,a,s,i;if(e!==r){for(var l=(s=e,i=1+(256/e.length|0),new Array(i+1).join(s)),u=[],d=0;d<256;d++)u[d]=d;var f=0;for(d=0;d<256;d++){var m=u[d];f=(f+m+l.charCodeAt(d))%256,u[d]=u[f],u[f]=m}r=e,a=u}else u=a;var g=t.length,v=0,x=0,j="";for(d=0;d<g;d++)x=(x+(m=u[v=(v+1)%256]))%256,u[v]=u[x],u[x]=m,l=u[(u[v]+u[x])%256],j+=String.fromCharCode(t.charCodeAt(d)^l);return j}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var VC={print:4,modify:8,copy:16,"annot-forms":32};function Rh(e,t,r,a){this.v=1,this.r=2;var s=192;e.forEach(function(u){if(VC.perm!==void 0)throw new Error("Invalid permission: "+u);s+=VC[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),l=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,l),this.P=-(1+(255^s)),this.encryptionKey=Mw(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=Iw(this.encryptionKey,this.padding)}function Lh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,a=0;a<r;a++){var s=e.charCodeAt(a);t+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):e[a]}return t}function HC(e){if(_a(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,a,s){if(s=s||!1,typeof r!="string"||typeof a!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[a,!!s],i},this.unsubscribe=function(r){for(var a in t)if(t[a][r])return delete t[a][r],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[r]){var l=t[r][i];try{l[0].apply(e,a)}catch(u){Nr.console&&Ra.error("jsPDF PubSub Error",u.message,u)}l[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Yx(e){if(!(this instanceof Yx))return new Yx(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function dD(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function af(e,t,r,a,s){if(!(this instanceof af))return new af(e,t,r,a,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,dD.call(this,a,s)}function qh(e,t,r,a,s){if(!(this instanceof qh))return new qh(e,t,r,a,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,dD.call(this,a,s)}function ir(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],s=arguments[2],i=arguments[3],l=[],u=1,d=16,f="S",m=null;_a(e=e||{})==="object"&&(r=e.orientation,a=e.unit||a,s=e.format||s,i=e.compress||e.compressPdf||i,(m=e.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),u=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(d=e.floatPrecision),f=e.defaultPathOperation||"S"),l=e.filters||(i===!0?["FlateEncode"]:l),a=a||"mm",r=(""+(r||"P")).toLowerCase();var g=e.putOnlyUsedFonts||!1,v={},x={internal:{},__private__:{}};x.__private__.PubSub=HC;var j="1.3",b=x.__private__.getPdfVersion=function(){return j};x.__private__.setPdfVersion=function(k){j=k};var A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return A};var S=x.__private__.getPageFormat=function(k){return A[k]};s=s||"a4";var T="compat",E="advanced",D=T;function L(){this.saveGraphicsState(),B(new Ve(Nt,0,0,-Nt,0,mc()*Nt).toString()+" cm"),this.setFontSize(this.getFontSize()/Nt),f="n",D=E}function F(){this.restoreGraphicsState(),f="S",D=T}var z=x.__private__.combineFontStyleAndFontWeight=function(k,te){if(k=="bold"&&te=="normal"||k=="bold"&&te==400||k=="normal"&&te=="italic"||k=="bold"&&te=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return te&&(k=te==400||te==="normal"?k==="italic"?"italic":"normal":te!=700&&te!=="bold"||k!=="normal"?(te==700?"bold":te)+""+k:"bold"),k};x.advancedAPI=function(k){var te=D===T;return te&&L.call(this),typeof k!="function"||(k(this),te&&F.call(this)),this},x.compatAPI=function(k){var te=D===E;return te&&F.call(this),typeof k!="function"||(k(this),te&&L.call(this)),this},x.isAdvancedAPI=function(){return D===E};var M,U=function(k){if(D!==E)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},oe=x.roundToPrecision=x.__private__.roundToPrecision=function(k,te){var Ce=t||te;if(isNaN(k)||isNaN(Ce))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(Ce).replace(/0+$/,"")};M=x.hpf=x.__private__.hpf=typeof d=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return oe(k,d)}:d==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return oe(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return oe(k,16)};var R=x.f2=x.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return oe(k,2)},q=x.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return oe(k,3)},se=x.scale=x.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return D===T?k*Nt:D===E?k:void 0},J=function(k){return se(function(te){return D===T?mc()-te:D===E?te:void 0}(k))};x.__private__.setPrecision=x.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(t=parseInt(k,10))};var Q,ae="00000000000000000000000000000000",he=x.__private__.getFileId=function(){return ae},de=x.__private__.setFileId=function(k){return ae=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():ae.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(Vr=new Rh(m.userPermissions,m.userPassword,m.ownerPassword,ae)),ae};x.setFileId=function(k){return de(k),this},x.getFileId=function(){return he()};var _e=x.__private__.convertDateToPDFDate=function(k){var te=k.getTimezoneOffset(),Ce=te<0?"+":"-",Me=Math.floor(Math.abs(te/60)),Ge=Math.abs(te%60),pt=[Ce,ce(Me),"'",ce(Ge),"'"].join("");return["D:",k.getFullYear(),ce(k.getMonth()+1),ce(k.getDate()),ce(k.getHours()),ce(k.getMinutes()),ce(k.getSeconds()),pt].join("")},Y=x.__private__.convertPDFDateToDate=function(k){var te=parseInt(k.substr(2,4),10),Ce=parseInt(k.substr(6,2),10)-1,Me=parseInt(k.substr(8,2),10),Ge=parseInt(k.substr(10,2),10),pt=parseInt(k.substr(12,2),10),jt=parseInt(k.substr(14,2),10);return new Date(te,Ce,Me,Ge,pt,jt,0)},ye=x.__private__.setCreationDate=function(k){var te;if(k===void 0&&(k=new Date),k instanceof Date)te=_e(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");te=k}return Q=te},P=x.__private__.getCreationDate=function(k){var te=Q;return k==="jsDate"&&(te=Y(Q)),te};x.setCreationDate=function(k){return ye(k),this},x.getCreationDate=function(k){return P(k)};var Z,ce=x.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},je=x.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},ke=0,De=[],Ee=[],ne=0,Ne=[],le=[],xe=!1,H=Ee;x.__private__.setCustomOutputDestination=function(k){xe=!0,H=k};var W=function(k){xe||(H=k)};x.__private__.resetCustomOutputDestination=function(){xe=!1,H=Ee};var B=x.__private__.out=function(k){return k=k.toString(),ne+=k.length+1,H.push(k),H},ee=x.__private__.write=function(k){return B(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},X=x.__private__.getArrayBuffer=function(k){for(var te=k.length,Ce=new ArrayBuffer(te),Me=new Uint8Array(Ce);te--;)Me[te]=k.charCodeAt(te);return Ce},ge=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return ge};var be=e.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(k){return be=D===E?k/Nt:k,this};var $e,Ze=x.__private__.getFontSize=x.getFontSize=function(){return D===T?be:be*Nt},pe=e.R2L||!1;x.__private__.setR2L=x.setR2L=function(k){return pe=k,this},x.__private__.getR2L=x.getR2L=function(){return pe};var V,Le=x.__private__.setZoomMode=function(k){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))$e=k;else if(isNaN(k)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');$e=k}else $e=parseInt(k,10)};x.__private__.getZoomMode=function(){return $e};var ft,kt=x.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');V=k};x.__private__.getPageMode=function(){return V};var Mt=x.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');ft=k};x.__private__.getLayoutMode=function(){return ft},x.__private__.setDisplayMode=x.setDisplayMode=function(k,te,Ce){return Le(k),Mt(te),kt(Ce),this};var Lt={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(k){if(Object.keys(Lt).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Lt[k]},x.__private__.getDocumentProperties=function(){return Lt},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(k){for(var te in Lt)Lt.hasOwnProperty(te)&&k[te]&&(Lt[te]=k[te]);return this},x.__private__.setDocumentProperty=function(k,te){if(Object.keys(Lt).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Lt[k]=te};var at,Nt,Ie,Tt,mt,Et={},zt={},ur=[],Rt={},Vt={},Qt={},hr={},pr=null,Be=0,We=[],vt=new HC(x),Fe=e.hotfixes||[],Te={},nt={},we=[],Ve=function k(te,Ce,Me,Ge,pt,jt){if(!(this instanceof k))return new k(te,Ce,Me,Ge,pt,jt);isNaN(te)&&(te=1),isNaN(Ce)&&(Ce=0),isNaN(Me)&&(Me=0),isNaN(Ge)&&(Ge=1),isNaN(pt)&&(pt=0),isNaN(jt)&&(jt=0),this._matrix=[te,Ce,Me,Ge,pt,jt]};Object.defineProperty(Ve.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(Ve.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(Ve.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(Ve.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(Ve.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(Ve.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(Ve.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(Ve.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(Ve.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(Ve.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(Ve.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(Ve.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(Ve.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ve.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ve.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ve.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ve.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(M).join(k)},Ve.prototype.multiply=function(k){var te=k.sx*this.sx+k.shy*this.shx,Ce=k.sx*this.shy+k.shy*this.sy,Me=k.shx*this.sx+k.sy*this.shx,Ge=k.shx*this.shy+k.sy*this.sy,pt=k.tx*this.sx+k.ty*this.shx+this.tx,jt=k.tx*this.shy+k.ty*this.sy+this.ty;return new Ve(te,Ce,Me,Ge,pt,jt)},Ve.prototype.decompose=function(){var k=this.sx,te=this.shy,Ce=this.shx,Me=this.sy,Ge=this.tx,pt=this.ty,jt=Math.sqrt(k*k+te*te),Gt=(k/=jt)*Ce+(te/=jt)*Me;Ce-=k*Gt,Me-=te*Gt;var sr=Math.sqrt(Ce*Ce+Me*Me);return Gt/=sr,k*(Me/=sr)<te*(Ce/=sr)&&(k=-k,te=-te,Gt=-Gt,jt=-jt),{scale:new Ve(jt,0,0,sr,0,0),translate:new Ve(1,0,0,1,Ge,pt),rotate:new Ve(k,te,-te,k,0,0),skew:new Ve(1,0,Gt,1,0,0)}},Ve.prototype.toString=function(k){return this.join(" ")},Ve.prototype.inversed=function(){var k=this.sx,te=this.shy,Ce=this.shx,Me=this.sy,Ge=this.tx,pt=this.ty,jt=1/(k*Me-te*Ce),Gt=Me*jt,sr=-te*jt,xr=-Ce*jt,Ar=k*jt;return new Ve(Gt,sr,xr,Ar,-Gt*Ge-xr*pt,-sr*Ge-Ar*pt)},Ve.prototype.applyToPoint=function(k){var te=k.x*this.sx+k.y*this.shx+this.tx,Ce=k.x*this.shy+k.y*this.sy+this.ty;return new xa(te,Ce)},Ve.prototype.applyToRectangle=function(k){var te=this.applyToPoint(k),Ce=this.applyToPoint(new xa(k.x+k.w,k.y+k.h));return new ma(te.x,te.y,Ce.x-te.x,Ce.y-te.y)},Ve.prototype.clone=function(){var k=this.sx,te=this.shy,Ce=this.shx,Me=this.sy,Ge=this.tx,pt=this.ty;return new Ve(k,te,Ce,Me,Ge,pt)},x.Matrix=Ve;var Ct=x.matrixMult=function(k,te){return te.multiply(k)},Dt=new Ve(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=Dt;var Wt=function(k,te){if(!Vt[k]){var Ce=(te instanceof af?"Sh":"P")+(Object.keys(Rt).length+1).toString(10);te.id=Ce,Vt[k]=Ce,Rt[Ce]=te,vt.publish("addPattern",te)}};x.ShadingPattern=af,x.TilingPattern=qh,x.addShadingPattern=function(k,te){return U("addShadingPattern()"),Wt(k,te),this},x.beginTilingPattern=function(k){U("beginTilingPattern()"),pa(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},x.endTilingPattern=function(k,te){U("endTilingPattern()"),te.stream=le[Z].join(`
`),Wt(k,te),vt.publish("endTilingPattern",te),we.pop().restore()};var cr,Ot=x.__private__.newObject=function(){var k=$t();return rr(k,!0),k},$t=x.__private__.newObjectDeferred=function(){return ke++,De[ke]=function(){return ne},ke},rr=function(k,te){return te=typeof te=="boolean"&&te,De[k]=ne,te&&B(k+" 0 obj"),k},qt=x.__private__.newAdditionalObject=function(){var k={objId:$t(),content:""};return Ne.push(k),k},Sr=$t(),Na=$t(),Tr=x.__private__.decodeColorString=function(k){var te=k.split(" ");if(te.length!==2||te[1]!=="g"&&te[1]!=="G")te.length!==5||te[4]!=="k"&&te[4]!=="K"||(te=[(1-te[0])*(1-te[3]),(1-te[1])*(1-te[3]),(1-te[2])*(1-te[3]),"r"]);else{var Ce=parseFloat(te[0]);te=[Ce,Ce,Ce,"r"]}for(var Me="#",Ge=0;Ge<3;Ge++)Me+=("0"+Math.floor(255*parseFloat(te[Ge])).toString(16)).slice(-2);return Me},on=x.__private__.encodeColorString=function(k){var te;typeof k=="string"&&(k={ch1:k});var Ce=k.ch1,Me=k.ch2,Ge=k.ch3,pt=k.ch4,jt=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ce=="string"&&Ce.charAt(0)!=="#"){var Gt=new cD(Ce);if(Gt.ok)Ce=Gt.toHex();else if(!/^\d*\.?\d*$/.test(Ce))throw new Error('Invalid color "'+Ce+'" passed to jsPDF.encodeColorString.')}if(typeof Ce=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ce)&&(Ce="#"+Ce[1]+Ce[1]+Ce[2]+Ce[2]+Ce[3]+Ce[3]),typeof Ce=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ce)){var sr=parseInt(Ce.substr(1),16);Ce=sr>>16&255,Me=sr>>8&255,Ge=255&sr}if(Me===void 0||pt===void 0&&Ce===Me&&Me===Ge)te=typeof Ce=="string"?Ce+" "+jt[0]:k.precision===2?R(Ce/255)+" "+jt[0]:q(Ce/255)+" "+jt[0];else if(pt===void 0||_a(pt)==="object"){if(pt&&!isNaN(pt.a)&&pt.a===0)return["1.","1.","1.",jt[1]].join(" ");te=typeof Ce=="string"?[Ce,Me,Ge,jt[1]].join(" "):k.precision===2?[R(Ce/255),R(Me/255),R(Ge/255),jt[1]].join(" "):[q(Ce/255),q(Me/255),q(Ge/255),jt[1]].join(" ")}else te=typeof Ce=="string"?[Ce,Me,Ge,pt,jt[2]].join(" "):k.precision===2?[R(Ce),R(Me),R(Ge),R(pt),jt[2]].join(" "):[q(Ce),q(Me),q(Ge),q(pt),jt[2]].join(" ");return te},$a=x.__private__.getFilters=function(){return l},Pa=x.__private__.putStream=function(k){var te=(k=k||{}).data||"",Ce=k.filters||$a(),Me=k.alreadyAppliedFilters||[],Ge=k.addLength1||!1,pt=te.length,jt=k.objectId,Gt=function(_n){return _n};if(m!==null&&jt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(Gt=Vr.encryptor(jt,0));var sr={};Ce===!0&&(Ce=["FlateEncode"]);var xr=k.additionalKeyValues||[],Ar=(sr=ir.API.processDataByFilters!==void 0?ir.API.processDataByFilters(te,Ce):{data:te,reverseChain:[]}).reverseChain+(Array.isArray(Me)?Me.join(" "):Me.toString());if(sr.data.length!==0&&(xr.push({key:"Length",value:sr.data.length}),Ge===!0&&xr.push({key:"Length1",value:pt})),Ar.length!=0)if(Ar.split("/").length-1==1)xr.push({key:"Filter",value:Ar});else{xr.push({key:"Filter",value:"["+Ar+"]"});for(var Xr=0;Xr<xr.length;Xr+=1)if(xr[Xr].key==="DecodeParms"){for(var za=[],mn=0;mn<sr.reverseChain.split("/").length-1;mn+=1)za.push("null");za.push(xr[Xr].value),xr[Xr].value="["+za.join(" ")+"]"}}B("<<");for(var Sa=0;Sa<xr.length;Sa++)B("/"+xr[Sa].key+" "+xr[Sa].value);B(">>"),sr.data.length!==0&&(B("stream"),B(Gt(sr.data)),B("endstream"))},ea=x.__private__.putPage=function(k){var te=k.number,Ce=k.data,Me=k.objId,Ge=k.contentsObjId;rr(Me,!0),B("<</Type /Page"),B("/Parent "+k.rootDictionaryObjId+" 0 R"),B("/Resources "+k.resourceDictionaryObjId+" 0 R"),B("/MediaBox ["+parseFloat(M(k.mediaBox.bottomLeftX))+" "+parseFloat(M(k.mediaBox.bottomLeftY))+" "+M(k.mediaBox.topRightX)+" "+M(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&B("/CropBox ["+M(k.cropBox.bottomLeftX)+" "+M(k.cropBox.bottomLeftY)+" "+M(k.cropBox.topRightX)+" "+M(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&B("/BleedBox ["+M(k.bleedBox.bottomLeftX)+" "+M(k.bleedBox.bottomLeftY)+" "+M(k.bleedBox.topRightX)+" "+M(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&B("/TrimBox ["+M(k.trimBox.bottomLeftX)+" "+M(k.trimBox.bottomLeftY)+" "+M(k.trimBox.topRightX)+" "+M(k.trimBox.topRightY)+"]"),k.artBox!==null&&B("/ArtBox ["+M(k.artBox.bottomLeftX)+" "+M(k.artBox.bottomLeftY)+" "+M(k.artBox.topRightX)+" "+M(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&B("/UserUnit "+k.userUnit),vt.publish("putPage",{objId:Me,pageContext:We[te],pageNumber:te,page:Ce}),B("/Contents "+Ge+" 0 R"),B(">>"),B("endobj");var pt=Ce.join(`
`);return D===E&&(pt+=`
Q`),rr(Ge,!0),Pa({data:pt,filters:$a(),objectId:Ge}),B("endobj"),Me},hn=x.__private__.putPages=function(){var k,te,Ce=[];for(k=1;k<=Be;k++)We[k].objId=$t(),We[k].contentsObjId=$t();for(k=1;k<=Be;k++)Ce.push(ea({number:k,data:le[k],objId:We[k].objId,contentsObjId:We[k].contentsObjId,mediaBox:We[k].mediaBox,cropBox:We[k].cropBox,bleedBox:We[k].bleedBox,trimBox:We[k].trimBox,artBox:We[k].artBox,userUnit:We[k].userUnit,rootDictionaryObjId:Sr,resourceDictionaryObjId:Na}));rr(Sr,!0),B("<</Type /Pages");var Me="/Kids [";for(te=0;te<Be;te++)Me+=Ce[te]+" 0 R ";B(Me+"]"),B("/Count "+Be),B(">>"),B("endobj"),vt.publish("postPutPages")},ta=function(k){vt.publish("putFont",{font:k,out:B,newObject:Ot,putStream:Pa}),k.isAlreadyPutted!==!0&&(k.objectNumber=Ot(),B("<<"),B("/Type /Font"),B("/BaseFont /"+Lh(k.postScriptName)),B("/Subtype /Type1"),typeof k.encoding=="string"&&B("/Encoding /"+k.encoding),B("/FirstChar 32"),B("/LastChar 255"),B(">>"),B("endobj"))},gr=function(k){k.objectNumber=Ot();var te=[];te.push({key:"Type",value:"/XObject"}),te.push({key:"Subtype",value:"/Form"}),te.push({key:"BBox",value:"["+[M(k.x),M(k.y),M(k.x+k.width),M(k.y+k.height)].join(" ")+"]"}),te.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var Ce=k.pages[1].join(`
`);Pa({data:Ce,additionalKeyValues:te,objectId:k.objectNumber}),B("endobj")},ra=function(k,te){te||(te=21);var Ce=Ot(),Me=function(jt,Gt){var sr,xr=[],Ar=1/(Gt-1);for(sr=0;sr<1;sr+=Ar)xr.push(sr);if(xr.push(1),jt[0].offset!=0){var Xr={offset:0,color:jt[0].color};jt.unshift(Xr)}if(jt[jt.length-1].offset!=1){var za={offset:1,color:jt[jt.length-1].color};jt.push(za)}for(var mn="",Sa=0,_n=0;_n<xr.length;_n++){for(sr=xr[_n];sr>jt[Sa+1].offset;)Sa++;var pn=jt[Sa].offset,Hn=(sr-pn)/(jt[Sa+1].offset-pn),fi=jt[Sa].color,Is=jt[Sa+1].color;mn+=je(Math.round((1-Hn)*fi[0]+Hn*Is[0]).toString(16))+je(Math.round((1-Hn)*fi[1]+Hn*Is[1]).toString(16))+je(Math.round((1-Hn)*fi[2]+Hn*Is[2]).toString(16))}return mn.trim()}(k.colors,te),Ge=[];Ge.push({key:"FunctionType",value:"0"}),Ge.push({key:"Domain",value:"[0.0 1.0]"}),Ge.push({key:"Size",value:"["+te+"]"}),Ge.push({key:"BitsPerSample",value:"8"}),Ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pa({data:Me,additionalKeyValues:Ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ce}),B("endobj"),k.objectNumber=Ot(),B("<< /ShadingType "+k.type),B("/ColorSpace /DeviceRGB");var pt="/Coords ["+M(parseFloat(k.coords[0]))+" "+M(parseFloat(k.coords[1]))+" ";k.type===2?pt+=M(parseFloat(k.coords[2]))+" "+M(parseFloat(k.coords[3])):pt+=M(parseFloat(k.coords[2]))+" "+M(parseFloat(k.coords[3]))+" "+M(parseFloat(k.coords[4]))+" "+M(parseFloat(k.coords[5])),B(pt+="]"),k.matrix&&B("/Matrix ["+k.matrix.toString()+"]"),B("/Function "+Ce+" 0 R"),B("/Extend [true true]"),B(">>"),B("endobj")},ci=function(k,te){var Ce=$t(),Me=Ot();te.push({resourcesOid:Ce,objectOid:Me}),k.objectNumber=Me;var Ge=[];Ge.push({key:"Type",value:"/Pattern"}),Ge.push({key:"PatternType",value:"1"}),Ge.push({key:"PaintType",value:"1"}),Ge.push({key:"TilingType",value:"1"}),Ge.push({key:"BBox",value:"["+k.boundingBox.map(M).join(" ")+"]"}),Ge.push({key:"XStep",value:M(k.xStep)}),Ge.push({key:"YStep",value:M(k.yStep)}),Ge.push({key:"Resources",value:Ce+" 0 R"}),k.matrix&&Ge.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),Pa({data:k.stream,additionalKeyValues:Ge,objectId:k.objectNumber}),B("endobj")},wn=function(k){for(var te in k.objectNumber=Ot(),B("<<"),k)switch(te){case"opacity":B("/ca "+R(k[te]));break;case"stroke-opacity":B("/CA "+R(k[te]))}B(">>"),B("endobj")},_l=function(k){rr(k.resourcesOid,!0),B("<<"),B("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var te in B("/Font <<"),Et)Et.hasOwnProperty(te)&&(g===!1||g===!0&&v.hasOwnProperty(te))&&B("/"+te+" "+Et[te].objectNumber+" 0 R");B(">>")}(),function(){if(Object.keys(Rt).length>0){for(var te in B("/Shading <<"),Rt)Rt.hasOwnProperty(te)&&Rt[te]instanceof af&&Rt[te].objectNumber>=0&&B("/"+te+" "+Rt[te].objectNumber+" 0 R");vt.publish("putShadingPatternDict"),B(">>")}}(),function(te){if(Object.keys(Rt).length>0){for(var Ce in B("/Pattern <<"),Rt)Rt.hasOwnProperty(Ce)&&Rt[Ce]instanceof x.TilingPattern&&Rt[Ce].objectNumber>=0&&Rt[Ce].objectNumber<te&&B("/"+Ce+" "+Rt[Ce].objectNumber+" 0 R");vt.publish("putTilingPatternDict"),B(">>")}}(k.objectOid),function(){if(Object.keys(Qt).length>0){var te;for(te in B("/ExtGState <<"),Qt)Qt.hasOwnProperty(te)&&Qt[te].objectNumber>=0&&B("/"+te+" "+Qt[te].objectNumber+" 0 R");vt.publish("putGStateDict"),B(">>")}}(),function(){for(var te in B("/XObject <<"),Te)Te.hasOwnProperty(te)&&Te[te].objectNumber>=0&&B("/"+te+" "+Te[te].objectNumber+" 0 R");vt.publish("putXobjectDict"),B(">>")}(),B(">>"),B("endobj")},qo=function(k){zt[k.fontName]=zt[k.fontName]||{},zt[k.fontName][k.fontStyle]=k.id},Ts=function(k,te,Ce,Me,Ge){var pt={id:"F"+(Object.keys(Et).length+1).toString(10),postScriptName:k,fontName:te,fontStyle:Ce,encoding:Me,isStandardFont:Ge||!1,metadata:{}};return vt.publish("addFont",{font:pt,instance:this}),Et[pt.id]=pt,qo(pt),pt.id},zn=x.__private__.pdfEscape=x.pdfEscape=function(k,te){return function(Ce,Me){var Ge,pt,jt,Gt,sr,xr,Ar,Xr,za;if(jt=(Me=Me||{}).sourceEncoding||"Unicode",sr=Me.outputEncoding,(Me.autoencode||sr)&&Et[at].metadata&&Et[at].metadata[jt]&&Et[at].metadata[jt].encoding&&(Gt=Et[at].metadata[jt].encoding,!sr&&Et[at].encoding&&(sr=Et[at].encoding),!sr&&Gt.codePages&&(sr=Gt.codePages[0]),typeof sr=="string"&&(sr=Gt[sr]),sr)){for(Ar=!1,xr=[],Ge=0,pt=Ce.length;Ge<pt;Ge++)(Xr=sr[Ce.charCodeAt(Ge)])?xr.push(String.fromCharCode(Xr)):xr.push(Ce[Ge]),xr[Ge].charCodeAt(0)>>8&&(Ar=!0);Ce=xr.join("")}for(Ge=Ce.length;Ar===void 0&&Ge!==0;)Ce.charCodeAt(Ge-1)>>8&&(Ar=!0),Ge--;if(!Ar)return Ce;for(xr=Me.noBOM?[]:[254,255],Ge=0,pt=Ce.length;Ge<pt;Ge++){if((za=(Xr=Ce.charCodeAt(Ge))>>8)>>8)throw new Error("Character at position "+Ge+" of string '"+Ce+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");xr.push(za),xr.push(Xr-(za<<8))}return String.fromCharCode.apply(void 0,xr)}(k,te).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vn=x.__private__.beginPage=function(k){le[++Be]=[],We[Be]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},Ys(Be),W(le[Z])},to=function(k,te){var Ce,Me,Ge;switch(r=te||r,typeof k=="string"&&(Ce=S(k.toLowerCase()),Array.isArray(Ce)&&(Me=Ce[0],Ge=Ce[1])),Array.isArray(k)&&(Me=k[0]*Nt,Ge=k[1]*Nt),isNaN(Me)&&(Me=s[0],Ge=s[1]),(Me>14400||Ge>14400)&&(Ra.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Me=Math.min(14400,Me),Ge=Math.min(14400,Ge)),s=[Me,Ge],r.substr(0,1)){case"l":Ge>Me&&(s=[Ge,Me]);break;case"p":Me>Ge&&(s=[Ge,Me])}Vn(s),Pe(di),B(or),ha!==0&&B(ha+" J"),Or!==0&&B(Or+" j"),vt.publish("addPage",{pageNumber:Be})},ro=function(k){k>0&&k<=Be&&(le.splice(k,1),We.splice(k,1),Be--,Z>Be&&(Z=Be),this.setPage(Z))},Ys=function(k){k>0&&k<=Be&&(Z=k)},Os=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return le.length-1},Nl=function(k,te,Ce){var Me,Ge=void 0;return Ce=Ce||{},k=k!==void 0?k:Et[at].fontName,te=te!==void 0?te:Et[at].fontStyle,Me=k.toLowerCase(),zt[Me]!==void 0&&zt[Me][te]!==void 0?Ge=zt[Me][te]:zt[k]!==void 0&&zt[k][te]!==void 0?Ge=zt[k][te]:Ce.disableWarning===!1&&Ra.warn("Unable to look up font label for font '"+k+"', '"+te+"'. Refer to getFontList() for available fonts."),Ge||Ce.noFallback||(Ge=zt.times[te])==null&&(Ge=zt.times.normal),Ge},Sl=x.__private__.putInfo=function(){var k=Ot(),te=function(Me){return Me};for(var Ce in m!==null&&(te=Vr.encryptor(k,0)),B("<<"),B("/Producer ("+zn(te("jsPDF "+ir.version))+")"),Lt)Lt.hasOwnProperty(Ce)&&Lt[Ce]&&B("/"+Ce.substr(0,1).toUpperCase()+Ce.substr(1)+" ("+zn(te(Lt[Ce]))+")");B("/CreationDate ("+zn(te(Q))+")"),B(">>"),B("endobj")},Fo=x.__private__.putCatalog=function(k){var te=(k=k||{}).rootDictionaryObjId||Sr;switch(Ot(),B("<<"),B("/Type /Catalog"),B("/Pages "+te+" 0 R"),$e||($e="fullwidth"),$e){case"fullwidth":B("/OpenAction [3 0 R /FitH null]");break;case"fullheight":B("/OpenAction [3 0 R /FitV null]");break;case"fullpage":B("/OpenAction [3 0 R /Fit]");break;case"original":B("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ce=""+$e;Ce.substr(Ce.length-1)==="%"&&($e=parseInt($e)/100),typeof $e=="number"&&B("/OpenAction [3 0 R /XYZ null null "+R($e)+"]")}switch(ft||(ft="continuous"),ft){case"continuous":B("/PageLayout /OneColumn");break;case"single":B("/PageLayout /SinglePage");break;case"two":case"twoleft":B("/PageLayout /TwoColumnLeft");break;case"tworight":B("/PageLayout /TwoColumnRight")}V&&B("/PageMode /"+V),vt.publish("putCatalog"),B(">>"),B("endobj")},Kr=x.__private__.putTrailer=function(){B("trailer"),B("<<"),B("/Size "+(ke+1)),B("/Root "+ke+" 0 R"),B("/Info "+(ke-1)+" 0 R"),m!==null&&B("/Encrypt "+Vr.oid+" 0 R"),B("/ID [ <"+ae+"> <"+ae+"> ]"),B(">>")},uc=x.__private__.putHeader=function(){B("%PDF-"+j),B("%")},hu=x.__private__.putXRef=function(){var k="0000000000";B("xref"),B("0 "+(ke+1)),B("0000000000 65535 f ");for(var te=1;te<=ke;te++)typeof De[te]=="function"?B((k+De[te]()).slice(-10)+" 00000 n "):De[te]!==void 0?B((k+De[te]).slice(-10)+" 00000 n "):B("0000000000 00000 n ")},Ds=x.__private__.buildDocument=function(){var k;ke=0,ne=0,Ee=[],De=[],Ne=[],Sr=$t(),Na=$t(),W(Ee),vt.publish("buildDocument"),uc(),hn(),function(){vt.publish("putAdditionalObjects");for(var Ce=0;Ce<Ne.length;Ce++){var Me=Ne[Ce];rr(Me.objId,!0),B(Me.content),B("endobj")}vt.publish("postPutAdditionalObjects")}(),k=[],function(){for(var Ce in Et)Et.hasOwnProperty(Ce)&&(g===!1||g===!0&&v.hasOwnProperty(Ce))&&ta(Et[Ce])}(),function(){var Ce;for(Ce in Qt)Qt.hasOwnProperty(Ce)&&wn(Qt[Ce])}(),function(){for(var Ce in Te)Te.hasOwnProperty(Ce)&&gr(Te[Ce])}(),function(Ce){var Me;for(Me in Rt)Rt.hasOwnProperty(Me)&&(Rt[Me]instanceof af?ra(Rt[Me]):Rt[Me]instanceof qh&&ci(Rt[Me],Ce))}(k),vt.publish("putResources"),k.forEach(_l),_l({resourcesOid:Na,objectOid:Number.MAX_SAFE_INTEGER}),vt.publish("postPutResources"),m!==null&&(Vr.oid=Ot(),B("<<"),B("/Filter /Standard"),B("/V "+Vr.v),B("/R "+Vr.r),B("/U <"+Vr.toHexString(Vr.U)+">"),B("/O <"+Vr.toHexString(Vr.O)+">"),B("/P "+Vr.P),B(">>"),B("endobj")),Sl(),Fo();var te=ne;return hu(),Kr(),B("startxref"),B(""+te),B("%%EOF"),W(le[Z]),Ee.join(`
`)},ao=x.__private__.getBlob=function(k){return new Blob([X(k)],{type:"application/pdf"})},es=x.output=x.__private__.output=(cr=function(k,te){switch(typeof(te=te||{})=="string"?te={filename:te}:te.filename=te.filename||"generated.pdf",k){case void 0:return Ds();case"save":x.save(te.filename);break;case"arraybuffer":return X(Ds());case"blob":return ao(Ds());case"bloburi":case"bloburl":if(Nr.URL!==void 0&&typeof Nr.URL.createObjectURL=="function")return Nr.URL&&Nr.URL.createObjectURL(ao(Ds()))||void 0;Ra.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ce="",Me=Ds();try{Ce=$C(Me)}catch{Ce=$C(unescape(encodeURIComponent(Me)))}return"data:application/pdf;filename="+te.filename+";base64,"+Ce;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Nr)==="[object Window]"){var Ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",pt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';te.pdfObjectUrl&&(Ge=te.pdfObjectUrl,pt="");var jt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ge+'"'+pt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(te)+");<\/script></body></html>",Gt=Nr.open();return Gt!==null&&Gt.document.write(jt),Gt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Nr)==="[object Window]"){var sr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(te.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+te.filename+'" width="500px" height="400px" /></body></html>',xr=Nr.open();if(xr!==null){xr.document.write(sr);var Ar=this;xr.document.documentElement.querySelector("#pdfViewer").onload=function(){xr.document.title=te.filename,xr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ar.output("bloburl"))}}return xr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Nr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Xr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",te)+'"></iframe></body></html>',za=Nr.open();if(za!==null&&(za.document.write(Xr),za.document.title=te.filename),za||typeof safari>"u")return za;break;case"datauri":case"dataurl":return Nr.document.location.href=this.output("datauristring",te);default:return null}},cr.foo=function(){try{return cr.apply(this,arguments)}catch(Ce){var k=Ce.stack||"";~k.indexOf(" at ")&&(k=k.split(" at ")[1]);var te="Error in function "+k.split(`
`)[0].split("<")[0]+": "+Ce.message;if(!Nr.console)throw new Error(te);Nr.console.error(te,Ce),Nr.alert&&alert(te)}},cr.foo.bar=cr,cr.foo),Bo=function(k){return Array.isArray(Fe)===!0&&Fe.indexOf(k)>-1};switch(a){case"pt":Nt=1;break;case"mm":Nt=72/25.4;break;case"cm":Nt=72/2.54;break;case"in":Nt=72;break;case"px":Nt=Bo("px_scaling")==1?.75:96/72;break;case"pc":case"em":Nt=12;break;case"ex":Nt=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);Nt=a}var Vr=null;ye(),de();var Uo=x.__private__.getPageInfo=x.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:We[k].objId,pageNumber:k,pageContext:We[k]}},mu=x.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var te in We)if(We[te].objId===k)break;return Uo(te)},dc=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:We[Z].objId,pageNumber:Z,pageContext:We[Z]}};x.addPage=function(){return to.apply(this,arguments),this},x.setPage=function(){return Ys.apply(this,arguments),W.call(this,le[Z]),this},x.insertPage=function(k){return this.addPage(),this.movePage(Z,k),this},x.movePage=function(k,te){var Ce,Me;if(k>te){Ce=le[k],Me=We[k];for(var Ge=k;Ge>te;Ge--)le[Ge]=le[Ge-1],We[Ge]=We[Ge-1];le[te]=Ce,We[te]=Me,this.setPage(te)}else if(k<te){Ce=le[k],Me=We[k];for(var pt=k;pt<te;pt++)le[pt]=le[pt+1],We[pt]=We[pt+1];le[te]=Ce,We[te]=Me,this.setPage(te)}return this},x.deletePage=function(){return ro.apply(this,arguments),this},x.__private__.text=x.text=function(k,te,Ce,Me,Ge){var pt,jt,Gt,sr,xr,Ar,Xr,za,mn,Sa=(Me=Me||{}).scope||this;if(typeof k=="number"&&typeof te=="number"&&(typeof Ce=="string"||Array.isArray(Ce))){var _n=Ce;Ce=te,te=k,k=_n}if(arguments[3]instanceof Ve==0?(Gt=arguments[4],sr=arguments[5],_a(Xr=arguments[3])==="object"&&Xr!==null||(typeof Gt=="string"&&(sr=Gt,Gt=null),typeof Xr=="string"&&(sr=Xr,Xr=null),typeof Xr=="number"&&(Gt=Xr,Xr=null),Me={flags:Xr,angle:Gt,align:sr})):(U("The transform parameter of text() with a Matrix value"),mn=Ge),isNaN(te)||isNaN(Ce)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return Sa;var pn,Hn="",fi=typeof Me.lineHeightFactor=="number"?Me.lineHeightFactor:Rs,Is=Sa.internal.scaleFactor;function If(Br){return Br=Br.split("	").join(Array(Me.TabLen||9).join(" ")),zn(Br,Xr)}function El(Br){for(var ca,Xa=Br.concat(),Ta=[],co=Xa.length;co--;)typeof(ca=Xa.shift())=="string"?Ta.push(ca):Array.isArray(Br)&&(ca.length===1||ca[1]===void 0&&ca[2]===void 0)?Ta.push(ca[0]):Ta.push([ca[0],ca[1],ca[2]]);return Ta}function Ei(Br,ca){var Xa;if(typeof Br=="string")Xa=ca(Br)[0];else if(Array.isArray(Br)){for(var Ta,co,_u=Br.concat(),xc=[],Ff=_u.length;Ff--;)typeof(Ta=_u.shift())=="string"?xc.push(ca(Ta)[0]):Array.isArray(Ta)&&typeof Ta[0]=="string"&&(co=ca(Ta[0],Ta[1],Ta[2]),xc.push([co[0],co[1],co[2]]));Xa=xc}return Xa}var Pl=!1,Tl=!0;if(typeof k=="string")Pl=!0;else if(Array.isArray(k)){var Ol=k.concat();jt=[];for(var Dl,Gn=Ol.length;Gn--;)(typeof(Dl=Ol.shift())!="string"||Array.isArray(Dl)&&typeof Dl[0]!="string")&&(Tl=!1);Pl=Tl}if(Pl===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var Rl=be/Sa.internal.scaleFactor,hi=Rl*(fi-1);switch(Me.baseline){case"bottom":Ce-=hi;break;case"top":Ce+=Rl-hi;break;case"hanging":Ce+=Rl-2*hi;break;case"middle":Ce+=Rl/2-hi}if((Ar=Me.maxWidth||0)>0&&(typeof k=="string"?k=Sa.splitTextToSize(k,Ar):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(Br,ca){return Br.concat(Sa.splitTextToSize(ca,Ar))},[]))),pt={text:k,x:te,y:Ce,options:Me,mutex:{pdfEscape:zn,activeFontKey:at,fonts:Et,activeFontSize:be}},vt.publish("preProcessText",pt),k=pt.text,Gt=(Me=pt.options).angle,mn instanceof Ve==0&&Gt&&typeof Gt=="number"){Gt*=Math.PI/180,Me.rotationDirection===0&&(Gt=-Gt),D===E&&(Gt=-Gt);var Sd=Math.cos(Gt),Ad=Math.sin(Gt);mn=new Ve(Sd,Ad,-Ad,Sd,0,0)}else Gt&&Gt instanceof Ve&&(mn=Gt);D!==E||mn||(mn=Dt),(xr=Me.charSpace||Fr)!==void 0&&(Hn+=M(se(xr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(za=Me.horizontalScale)!==void 0&&(Hn+=M(100*za)+` Tz
`),Me.lang;var Wa=-1,io=Me.renderingMode!==void 0?Me.renderingMode:Me.stroke,pc=Sa.internal.getCurrentPageInfo().pageContext;switch(io){case 0:case!1:case"fill":Wa=0;break;case 1:case!0:case"stroke":Wa=1;break;case 2:case"fillThenStroke":Wa=2;break;case 3:case"invisible":Wa=3;break;case 4:case"fillAndAddForClipping":Wa=4;break;case 5:case"strokeAndAddPathForClipping":Wa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Wa=6;break;case 7:case"addToPathForClipping":Wa=7}var Ll=pc.usedRenderingMode!==void 0?pc.usedRenderingMode:-1;Wa!==-1?Hn+=Wa+` Tr
`:Ll!==-1&&(Hn+=`0 Tr
`),Wa!==-1&&(pc.usedRenderingMode=Wa),sr=Me.align||"left";var ts,gc=be*fi,Ml=Sa.internal.pageSize.getWidth(),xu=Et[at];xr=Me.charSpace||Fr,Ar=Me.maxWidth||0,Xr=Object.assign({autoencode:!0,noBOM:!0},Me.flags);var Ho=[],Go=function(Br){return Sa.getStringUnitWidth(Br,{font:xu,charSpace:xr,fontSize:be,doKerning:!1})*be/Is};if(Object.prototype.toString.call(k)==="[object Array]"){var vs;jt=El(k),sr!=="left"&&(ts=jt.map(Go));var qs,Ko=0;if(sr==="right"){te-=ts[0],k=[],Gn=jt.length;for(var oo=0;oo<Gn;oo++)oo===0?(qs=et(te),vs=Pt(Ce)):(qs=se(Ko-ts[oo]),vs=-gc),k.push([jt[oo],qs,vs]),Ko=ts[oo]}else if(sr==="center"){te-=ts[0]/2,k=[],Gn=jt.length;for(var Il=0;Il<Gn;Il++)Il===0?(qs=et(te),vs=Pt(Ce)):(qs=se((Ko-ts[Il])/2),vs=-gc),k.push([jt[Il],qs,vs]),Ko=ts[Il]}else if(sr==="left"){k=[],Gn=jt.length;for(var Cd=0;Cd<Gn;Cd++)k.push(jt[Cd])}else if(sr==="justify"&&xu.encoding==="Identity-H"){k=[],Gn=jt.length,Ar=Ar!==0?Ar:Ml;for(var vu=0,ln=0;ln<Gn;ln++)if(vs=ln===0?Pt(Ce):-gc,qs=ln===0?et(te):vu,ln<Gn-1){var qf=se((Ar-ts[ln])/(jt[ln].split(" ").length-1)),Ya=jt[ln].split(" ");k.push([Ya[0]+" ",qs,vs]),vu=0;for(var Fs=1;Fs<Ya.length;Fs++){var yu=(Go(Ya[Fs-1]+" "+Ya[Fs])-Go(Ya[Fs]))*Is+qf;Fs==Ya.length-1?k.push([Ya[Fs],yu,0]):k.push([Ya[Fs]+" ",yu,0]),vu-=yu}}else k.push([jt[ln],qs,vs]);k.push(["",vu,0])}else{if(sr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],Gn=jt.length,Ar=Ar!==0?Ar:Ml,ln=0;ln<Gn;ln++){vs=ln===0?Pt(Ce):-gc,qs=ln===0?et(te):0;var bu=jt[ln].split(" ").length-1,wu=bu>0?(Ar-ts[ln])/bu:0;ln<Gn-1?Ho.push(M(se(wu))):Ho.push(0),k.push([jt[ln],qs,vs])}}}(typeof Me.R2L=="boolean"?Me.R2L:pe)===!0&&(k=Ei(k,function(Br,ca,Xa){return[Br.split("").reverse().join(""),ca,Xa]})),pt={text:k,x:te,y:Ce,options:Me,mutex:{pdfEscape:zn,activeFontKey:at,fonts:Et,activeFontSize:be}},vt.publish("postProcessText",pt),k=pt.text,pn=pt.mutex.isHex||!1;var ju=Et[at].encoding;ju!=="WinAnsiEncoding"&&ju!=="StandardEncoding"||(k=Ei(k,function(Br,ca,Xa){return[If(Br),ca,Xa]})),jt=El(k),k=[];for(var lo,ql,Zs,Wo=Array.isArray(jt[0])?1:0,mi="",Yo=function(Br,ca,Xa){var Ta="";return Xa instanceof Ve?(Xa=typeof Me.angle=="number"?Ct(Xa,new Ve(1,0,0,1,Br,ca)):Ct(new Ve(1,0,0,1,Br,ca),Xa),D===E&&(Xa=Ct(new Ve(1,0,0,-1,0,0),Xa)),Ta=Xa.join(" ")+` Tm
`):Ta=M(Br)+" "+M(ca)+` Td
`,Ta},Js=0;Js<jt.length;Js++){switch(mi="",Wo){case 1:Zs=(pn?"<":"(")+jt[Js][0]+(pn?">":")"),lo=parseFloat(jt[Js][1]),ql=parseFloat(jt[Js][2]);break;case 0:Zs=(pn?"<":"(")+jt[Js]+(pn?">":")"),lo=et(te),ql=Pt(Ce)}Ho!==void 0&&Ho[Js]!==void 0&&(mi=Ho[Js]+` Tw
`),Js===0?k.push(mi+Yo(lo,ql,mn)+Zs):Wo===0?k.push(mi+Zs):Wo===1&&k.push(mi+Yo(lo,ql,mn)+Zs)}k=Wo===0?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var rs=`BT
/`;return rs+=at+" "+be+` Tf
`,rs+=M(be*fi)+` TL
`,rs+=Wr+`
`,rs+=Hn,rs+=k,B(rs+="ET"),v[at]=!0,Sa};var no=x.__private__.clip=x.clip=function(k){return B(k==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return no("evenodd")},x.__private__.discardPath=x.discardPath=function(){return B("n"),this};var Xs=x.__private__.isValidStyle=function(k){var te=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(te=!0),te};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(k){return Xs(k)&&(f=k),this};var fc=x.__private__.getStyle=x.getStyle=function(k){var te=f;switch(k){case"D":case"S":te="S";break;case"F":te="f";break;case"FD":case"DF":te="B";break;case"f":case"f*":case"B":case"B*":te=k}return te},ki=x.close=function(){return B("h"),this};x.stroke=function(){return B("S"),this},x.fill=function(k){return so("f",k),this},x.fillEvenOdd=function(k){return so("f*",k),this},x.fillStroke=function(k){return so("B",k),this},x.fillStrokeEvenOdd=function(k){return so("B*",k),this};var so=function(k,te){_a(te)==="object"?hc(te,k):B(k)},Al=function(k){k===null||D===E&&k===void 0||(k=fc(k),B(k))};function Cl(k,te,Ce,Me,Ge){var pt=new qh(te||this.boundingBox,Ce||this.xStep,Me||this.yStep,this.gState,Ge||this.matrix);pt.stream=this.stream;var jt=k+"$$"+this.cloneIndex+++"$$";return Wt(jt,pt),pt}var hc=function(k,te){var Ce=Vt[k.key],Me=Rt[Ce];if(Me instanceof af)B("q"),B(pu(te)),Me.gState&&x.setGState(Me.gState),B(k.matrix.toString()+" cm"),B("/"+Ce+" sh"),B("Q");else if(Me instanceof qh){var Ge=new Ve(1,0,0,-1,0,mc());k.matrix&&(Ge=Ge.multiply(k.matrix||Dt),Ce=Cl.call(Me,k.key,k.boundingBox,k.xStep,k.yStep,Ge).id),B("q"),B("/Pattern cs"),B("/"+Ce+" scn"),Me.gState&&x.setGState(Me.gState),B(te),B("Q")}},pu=function(k){switch(k){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},$o=x.moveTo=function(k,te){return B(M(se(k))+" "+M(J(te))+" m"),this},Mn=x.lineTo=function(k,te){return B(M(se(k))+" "+M(J(te))+" l"),this},ui=x.curveTo=function(k,te,Ce,Me,Ge,pt){return B([M(se(k)),M(J(te)),M(se(Ce)),M(J(Me)),M(se(Ge)),M(J(pt)),"c"].join(" ")),this};x.__private__.line=x.line=function(k,te,Ce,Me,Ge){if(isNaN(k)||isNaN(te)||isNaN(Ce)||isNaN(Me)||!Xs(Ge))throw new Error("Invalid arguments passed to jsPDF.line");return D===T?this.lines([[Ce-k,Me-te]],k,te,[1,1],Ge||"S"):this.lines([[Ce-k,Me-te]],k,te,[1,1]).stroke()},x.__private__.lines=x.lines=function(k,te,Ce,Me,Ge,pt){var jt,Gt,sr,xr,Ar,Xr,za,mn,Sa,_n,pn,Hn;if(typeof k=="number"&&(Hn=Ce,Ce=te,te=k,k=Hn),Me=Me||[1,1],pt=pt||!1,isNaN(te)||isNaN(Ce)||!Array.isArray(k)||!Array.isArray(Me)||!Xs(Ge)||typeof pt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for($o(te,Ce),jt=Me[0],Gt=Me[1],xr=k.length,_n=te,pn=Ce,sr=0;sr<xr;sr++)(Ar=k[sr]).length===2?(_n=Ar[0]*jt+_n,pn=Ar[1]*Gt+pn,Mn(_n,pn)):(Xr=Ar[0]*jt+_n,za=Ar[1]*Gt+pn,mn=Ar[2]*jt+_n,Sa=Ar[3]*Gt+pn,_n=Ar[4]*jt+_n,pn=Ar[5]*Gt+pn,ui(Xr,za,mn,Sa,_n,pn));return pt&&ki(),Al(Ge),this},x.path=function(k){for(var te=0;te<k.length;te++){var Ce=k[te],Me=Ce.c;switch(Ce.op){case"m":$o(Me[0],Me[1]);break;case"l":Mn(Me[0],Me[1]);break;case"c":ui.apply(this,Me);break;case"h":ki()}}return this},x.__private__.rect=x.rect=function(k,te,Ce,Me,Ge){if(isNaN(k)||isNaN(te)||isNaN(Ce)||isNaN(Me)||!Xs(Ge))throw new Error("Invalid arguments passed to jsPDF.rect");return D===T&&(Me=-Me),B([M(se(k)),M(J(te)),M(se(Ce)),M(se(Me)),"re"].join(" ")),Al(Ge),this},x.__private__.triangle=x.triangle=function(k,te,Ce,Me,Ge,pt,jt){if(isNaN(k)||isNaN(te)||isNaN(Ce)||isNaN(Me)||isNaN(Ge)||isNaN(pt)||!Xs(jt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ce-k,Me-te],[Ge-Ce,pt-Me],[k-Ge,te-pt]],k,te,[1,1],jt,!0),this},x.__private__.roundedRect=x.roundedRect=function(k,te,Ce,Me,Ge,pt,jt){if(isNaN(k)||isNaN(te)||isNaN(Ce)||isNaN(Me)||isNaN(Ge)||isNaN(pt)||!Xs(jt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Gt=4/3*(Math.SQRT2-1);return Ge=Math.min(Ge,.5*Ce),pt=Math.min(pt,.5*Me),this.lines([[Ce-2*Ge,0],[Ge*Gt,0,Ge,pt-pt*Gt,Ge,pt],[0,Me-2*pt],[0,pt*Gt,-Ge*Gt,pt,-Ge,pt],[2*Ge-Ce,0],[-Ge*Gt,0,-Ge,-pt*Gt,-Ge,-pt],[0,2*pt-Me],[0,-pt*Gt,Ge*Gt,-pt,Ge,-pt]],k+Ge,te,[1,1],jt,!0),this},x.__private__.ellipse=x.ellipse=function(k,te,Ce,Me,Ge){if(isNaN(k)||isNaN(te)||isNaN(Ce)||isNaN(Me)||!Xs(Ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var pt=4/3*(Math.SQRT2-1)*Ce,jt=4/3*(Math.SQRT2-1)*Me;return $o(k+Ce,te),ui(k+Ce,te-jt,k+pt,te-Me,k,te-Me),ui(k-pt,te-Me,k-Ce,te-jt,k-Ce,te),ui(k-Ce,te+jt,k-pt,te+Me,k,te+Me),ui(k+pt,te+Me,k+Ce,te+jt,k+Ce,te),Al(Ge),this},x.__private__.circle=x.circle=function(k,te,Ce,Me){if(isNaN(k)||isNaN(te)||isNaN(Ce)||!Xs(Me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,te,Ce,Ce,Me)},x.setFont=function(k,te,Ce){return Ce&&(te=z(te,Ce)),at=Nl(k,te,{disableWarning:!1}),this};var kl=x.__private__.getFont=x.getFont=function(){return Et[Nl.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var k,te,Ce={};for(k in zt)if(zt.hasOwnProperty(k))for(te in Ce[k]=[],zt[k])zt[k].hasOwnProperty(te)&&Ce[k].push(te);return Ce},x.addFont=function(k,te,Ce,Me,Ge){var pt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&pt.indexOf(arguments[3])!==-1?Ge=arguments[3]:arguments[3]&&pt.indexOf(arguments[3])==-1&&(Ce=z(Ce,Me)),Ts.call(this,k,te,Ce,Ge=Ge||"Identity-H")};var Rs,di=e.lineWidth||.200025,$=x.__private__.getLineWidth=x.getLineWidth=function(){return di},Pe=x.__private__.setLineWidth=x.setLineWidth=function(k){return di=k,B(M(se(k))+" w"),this};x.__private__.setLineDash=ir.API.setLineDash=ir.API.setLineDashPattern=function(k,te){if(k=k||[],te=te||0,isNaN(te)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(Ce){return M(se(Ce))}).join(" "),te=M(se(te)),B("["+k+"] "+te+" d"),this};var it=x.__private__.getLineHeight=x.getLineHeight=function(){return be*Rs};x.__private__.getLineHeight=x.getLineHeight=function(){return be*Rs};var ht=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(Rs=k),this},ct=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return Rs};ht(e.lineHeight);var et=x.__private__.getHorizontalCoordinate=function(k){return se(k)},Pt=x.__private__.getVerticalCoordinate=function(k){return D===E?k:We[Z].mediaBox.topRightY-We[Z].mediaBox.bottomLeftY-se(k)},Ft=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(k){return M(et(k))},yt=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(k){return M(Pt(k))},or=e.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return Tr(or)},x.__private__.setStrokeColor=x.setDrawColor=function(k,te,Ce,Me){return or=on({ch1:k,ch2:te,ch3:Ce,ch4:Me,pdfColorType:"draw",precision:2}),B(or),this};var wr=e.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return Tr(wr)},x.__private__.setFillColor=x.setFillColor=function(k,te,Ce,Me){return wr=on({ch1:k,ch2:te,ch3:Ce,ch4:Me,pdfColorType:"fill",precision:2}),B(wr),this};var Wr=e.textColor||"0 g",ga=x.__private__.getTextColor=x.getTextColor=function(){return Tr(Wr)};x.__private__.setTextColor=x.setTextColor=function(k,te,Ce,Me){return Wr=on({ch1:k,ch2:te,ch3:Ce,ch4:Me,pdfColorType:"text",precision:3}),this};var Fr=e.charSpace,kr=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(Fr||0)};x.__private__.setCharSpace=x.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Fr=k,this};var ha=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(k){var te=x.CapJoinStyles[k];if(te===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ha=te,B(te+" J"),this};var Or=0;x.__private__.setLineJoin=x.setLineJoin=function(k){var te=x.CapJoinStyles[k];if(te===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Or=te,B(te+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return B(M(se(k))+" M"),this},x.GState=Yx,x.setGState=function(k){(k=typeof k=="string"?Qt[hr[k]]:Bt(null,k)).equals(pr)||(B("/"+k.id+" gs"),pr=k)};var Bt=function(k,te){if(!k||!hr[k]){var Ce=!1;for(var Me in Qt)if(Qt.hasOwnProperty(Me)&&Qt[Me].equals(te)){Ce=!0;break}if(Ce)te=Qt[Me];else{var Ge="GS"+(Object.keys(Qt).length+1).toString(10);Qt[Ge]=te,te.id=Ge}return k&&(hr[k]=te.id),vt.publish("addGState",te),te}};x.addGState=function(k,te){return Bt(k,te),this},x.saveGraphicsState=function(){return B("q"),ur.push({key:at,size:be,color:Wr}),this},x.restoreGraphicsState=function(){B("Q");var k=ur.pop();return at=k.key,be=k.size,Wr=k.color,pr=null,this},x.setCurrentTransformationMatrix=function(k){return B(k.toString()+" cm"),this},x.comment=function(k){return B("#"+k),this};var xa=function(k,te){var Ce=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ce},set:function(pt){isNaN(pt)||(Ce=parseFloat(pt))}});var Me=te||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Me},set:function(pt){isNaN(pt)||(Me=parseFloat(pt))}});var Ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ge},set:function(pt){Ge=pt.toString()}}),this},ma=function(k,te,Ce,Me){xa.call(this,k,te),this.type="rect";var Ge=Ce||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ge},set:function(jt){isNaN(jt)||(Ge=parseFloat(jt))}});var pt=Me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return pt},set:function(jt){isNaN(jt)||(pt=parseFloat(jt))}}),this},Ls=function(){this.page=Be,this.currentPage=Z,this.pages=le.slice(0),this.pagesContext=We.slice(0),this.x=Ie,this.y=Tt,this.matrix=mt,this.width=Ms(Z),this.height=zo(Z),this.outputDestination=H,this.id="",this.objectNumber=-1};Ls.prototype.restore=function(){Be=this.page,Z=this.currentPage,We=this.pagesContext,le=this.pages,Ie=this.x,Tt=this.y,mt=this.matrix,Rf(Z,this.width),Vo(Z,this.height),H=this.outputDestination};var pa=function(k,te,Ce,Me,Ge){we.push(new Ls),Be=Z=0,le=[],Ie=k,Tt=te,mt=Ge,Vn([Ce,Me])};for(var jn in x.beginFormObject=function(k,te,Ce,Me,Ge){return pa(k,te,Ce,Me,Ge),this},x.endFormObject=function(k){return function(te){if(nt[te])we.pop().restore();else{var Ce=new Ls,Me="Xo"+(Object.keys(Te).length+1).toString(10);Ce.id=Me,nt[te]=Me,Te[Me]=Ce,vt.publish("addFormObject",Ce),we.pop().restore()}}(k),this},x.doFormObject=function(k,te){var Ce=Te[nt[k]];return B("q"),B(te.toString()+" cm"),B("/"+Ce.id+" Do"),B("Q"),this},x.getFormObject=function(k){var te=Te[nt[k]];return{x:te.x,y:te.y,width:te.width,height:te.height,matrix:te.matrix}},x.save=function(k,te){return k=k||"generated.pdf",(te=te||{}).returnPromise=te.returnPromise||!1,te.returnPromise===!1?(tf(ao(Ds()),k),typeof tf.unload=="function"&&Nr.setTimeout&&setTimeout(tf.unload,911),this):new Promise(function(Ce,Me){try{var Ge=tf(ao(Ds()),k);typeof tf.unload=="function"&&Nr.setTimeout&&setTimeout(tf.unload,911),Ce(Ge)}catch(pt){Me(pt.message)}})},ir.API)ir.API.hasOwnProperty(jn)&&(jn==="events"&&ir.API.events.length?function(k,te){var Ce,Me,Ge;for(Ge=te.length-1;Ge!==-1;Ge--)Ce=te[Ge][0],Me=te[Ge][1],k.subscribe.apply(k,[Ce].concat(typeof Me=="function"?[Me]:Me))}(vt,ir.API.events):x[jn]=ir.API[jn]);function Ms(k){return We[k].mediaBox.topRightX-We[k].mediaBox.bottomLeftX}function Rf(k,te){We[k].mediaBox.topRightX=te+We[k].mediaBox.bottomLeftX}function zo(k){return We[k].mediaBox.topRightY-We[k].mediaBox.bottomLeftY}function Vo(k,te){We[k].mediaBox.topRightY=te+We[k].mediaBox.bottomLeftY}var gu=x.getPageWidth=function(k){return Ms(k=k||Z)/Nt},Lf=x.setPageWidth=function(k,te){Rf(k,te*Nt)},mc=x.getPageHeight=function(k){return zo(k=k||Z)/Nt},Mf=x.setPageHeight=function(k,te){Vo(k,te*Nt)};return x.internal={pdfEscape:zn,getStyle:fc,getFont:kl,getFontSize:Ze,getCharSpace:kr,getTextColor:ga,getLineHeight:it,getLineHeightFactor:ct,getLineWidth:$,write:ee,getHorizontalCoordinate:et,getVerticalCoordinate:Pt,getCoordinateString:Ft,getVerticalCoordinateString:yt,collections:{},newObject:Ot,newAdditionalObject:qt,newObjectDeferred:$t,newObjectDeferredBegin:rr,getFilters:$a,putStream:Pa,events:vt,scaleFactor:Nt,pageSize:{getWidth:function(){return gu(Z)},setWidth:function(k){Lf(Z,k)},getHeight:function(){return mc(Z)},setHeight:function(k){Mf(Z,k)}},encryptionOptions:m,encryption:Vr,getEncryptor:function(k){return m!==null?Vr.encryptor(k,0):function(te){return te}},output:es,getNumberOfPages:Os,pages:le,out:B,f2:R,f3:q,getPageInfo:Uo,getPageInfoByObjId:mu,getCurrentPageInfo:dc,getPDFVersion:b,Point:xa,Rectangle:ma,Matrix:Ve,hasHotfix:Bo},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return gu(Z)},set:function(k){Lf(Z,k)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return mc(Z)},set:function(k){Mf(Z,k)},enumerable:!0,configurable:!0}),(function(k){for(var te=0,Ce=ge.length;te<Ce;te++){var Me=Ts.call(this,k[te][0],k[te][1],k[te][2],ge[te][3],!0);g===!1&&(v[Me]=!0);var Ge=k[te][0].split("-");qo({id:Me,fontName:Ge[0],fontStyle:Ge[1]||""})}vt.publish("addFonts",{fonts:Et,dictionary:zt})}).call(x,ge),at="F1",to(s,r),vt.publish("initialized"),x}Rh.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Rh.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Rh.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Rh.prototype.processOwnerPassword=function(e,t){return Iw(Mw(t).substr(0,5),e)},Rh.prototype.encryptor=function(e,t){var r=Mw(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return Iw(r,a)}},Yx.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||_a(e)!==_a(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return a===0},ir.API={events:[]},ir.version="3.0.3";var vn=ir.API,Q_=1,Df=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Eh=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Er=function(e){return e.toFixed(2)},Qu=function(e){return e.toFixed(5)};vn.__acroform__={};var Ci=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},GC=function(e){return e*Q_},Yl=function(e){var t=new hD,r=tr.internal.getHeight(e)||0,a=tr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Er(a)),Number(Er(r))],t},Gre=vn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},Kre=vn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},Wre=vn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Tn=vn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Wre(e,t-1)},On=vn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Gre(e,t-1)},Dn=vn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Kre(e,t-1)},Yre=vn.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,s=e[0],i=e[1],l=e[2],u=e[3],d={};return d.lowerLeft_X=r(s)||0,d.lowerLeft_Y=a(i+u)||0,d.upperRight_X=r(s+l)||0,d.upperRight_Y=a(i)||0,[Number(Er(d.lowerLeft_X)),Number(Er(d.lowerLeft_Y)),Number(Er(d.upperRight_X)),Number(Er(d.upperRight_Y))]},Xre=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,a=qw(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+Er(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Yl(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},qw=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(R){return R.split(`
`)}):s.map(function(R){return[R]});var i=r,l=tr.internal.getHeight(e)||0;l=l<0?-l:l;var u=tr.internal.getWidth(e)||0;u=u<0?-u:u;var d=function(R,q,se){if(R+1<s.length){var J=q+" "+s[R+1][0];return G0(J,e,se).width<=u-4}return!1};i++;e:for(;i>0;){t="",i--;var f,m,g=G0("3",e,i).height,v=e.multiline?l-i:(l-g)/2,x=v+=2,j=0,b=0,A=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+G0(t,e,i=12).width+", FieldWidth:"+u+`
`;break}for(var S="",T=0,E=0;E<s.length;E++)if(s.hasOwnProperty(E)){var D=!1;if(s[E].length!==1&&A!==s[E].length-1){if((g+2)*(T+2)+2>l)continue e;S+=s[E][A],D=!0,b=E,E--}else{S=(S+=s[E][A]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var L=parseInt(E),F=d(L,S,i),z=E>=s.length-1;if(F&&!z){S+=" ",A=0;continue}if(F||z){if(z)b=L;else if(e.multiline&&(g+2)*(T+2)+2>l)continue e}else{if(!e.multiline||(g+2)*(T+2)+2>l)continue e;b=L}}for(var M="",U=j;U<=b;U++){var oe=s[U];if(e.multiline){if(U===b){M+=oe[A]+" ",A=(A+1)%oe.length;continue}if(U===j){M+=oe[oe.length-1]+" ";continue}}M+=oe[0]+" "}switch(M=M.substr(M.length-1)==" "?M.substr(0,M.length-1):M,m=G0(M,e,i).width,e.textAlign){case"right":f=u-m-2;break;case"center":f=(u-m)/2;break;default:f=2}t+=Er(f)+" "+Er(x)+` Td
`,t+="("+Df(M)+`) Tj
`,t+=-Er(f)+` 0 Td
`,x=-(i+2),m=0,j=D?b:b+1,T++,S=""}break}return a.text=t,a.fontSize=i,a},G0=function(e,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},Zre={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Jre=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(a){return a.type===r.type&&a.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},Qre=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(wl.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Zre)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Q_=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new mD,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in a)if(a.hasOwnProperty(s)){var i=a[s];i.objId=void 0,i.hasAnnotation&&Jre(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(a,s){var i=!a;for(var l in a||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(l)){var u=a[l],d=[],f=u.Rect;if(u.Rect&&(u.Rect=Yre(u.Rect,s)),s.internal.newObjectDeferredBegin(u.objId,!0),u.DA=tr.createDefaultAppearanceStream(u),_a(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(d=u.getKeyValueListForStream()),u.Rect=f,u.hasAppearanceStream&&!u.appearanceStreamContent){var m=Xre(u);d.push({key:"AP",value:"<</N "+m+">>"}),s.internal.acroformPlugin.xForms.push(m)}if(u.appearanceStreamContent){var g="";for(var v in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(v)){var x=u.appearanceStreamContent[v];if(g+="/"+v+" ",g+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var l in x)if(x.hasOwnProperty(l)){var j=x[l];typeof j=="function"&&(j=j.call(s,u)),g+="/"+l+" "+j+" ",s.internal.acroformPlugin.xForms.indexOf(j)>=0||s.internal.acroformPlugin.xForms.push(j)}}else typeof(j=x)=="function"&&(j=j.call(s,u)),g+="/"+l+" "+j,s.internal.acroformPlugin.xForms.indexOf(j)>=0||s.internal.acroformPlugin.xForms.push(j);g+=">>"}d.push({key:"AP",value:`<<
`+g+">>"})}s.internal.putStream({additionalKeyValues:d,objectId:u.objId}),s.internal.out("endobj")}i&&function(b,A){for(var S in b)if(b.hasOwnProperty(S)){var T=S,E=b[S];A.internal.newObjectDeferredBegin(E.objId,!0),_a(E)==="object"&&typeof E.putStream=="function"&&E.putStream(),delete b[T]}}(s.internal.acroformPlugin.xForms,s)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},fD=vn.__acroform__.arrayToPdfArray=function(e,t,r){var a=function(l){return l};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),_a(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(a=r.internal.getEncryptor(t)),s+="("+Df(a(e[i].toString()))+")"):s+=e[i].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},o2=function(e,t,r){var a=function(s){return s};return t!==void 0&&r&&(a=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+Df(a(e))+")"},ec=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ec.prototype.toString=function(){return this.objId+" 0 R"},ec.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},ec.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var a=t[r],s=this[a];s&&(Array.isArray(s)?e.push({key:a,value:fD(s,this.objId,this.scope)}):s instanceof ec?(s.scope=this.scope,e.push({key:a,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:a,value:s}))}return e};var hD=function(){ec.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Ci(hD,ec);var mD=function(){ec.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Df(r(e))+")"}},set:function(r){e=r}})};Ci(mD,ec);var wl=function e(){ec.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');t=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Tn(t,3)},set:function(S){S?this.F=On(t,3):this.F=Dn(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');r=S}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(S){a=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(S){a[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(S){a[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(S){a[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(S){a[3]=S}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Xx)return;i="FieldObject"+e.FieldNum++}var S=function(T){return T};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+Df(S(i))+")"},set:function(S){i=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(S){i=S}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(S){l=S}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(S){u=S}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(S){d=S}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/Q_:f},set:function(S){f=S}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(S){m=S}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof Xx||this instanceof gf))return o2(g,this.objId,this.scope)},set:function(S){S=S.toString(),g=S}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof fs==0?o2(v,this.objId,this.scope):v},set:function(S){S=S.toString(),v=this instanceof fs==0?S.substr(0,1)==="("?Eh(S.substr(1,S.length-2)):Eh(S):S}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof fs==1?Eh(v.substr(1,v.length-1)):v},set:function(S){S=S.toString(),v=this instanceof fs==1?"/"+S:S}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof fs==0?o2(x,this.objId,this.scope):x},set:function(S){S=S.toString(),x=this instanceof fs==0?S.substr(0,1)==="("?Eh(S.substr(1,S.length-2)):Eh(S):S}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof fs==1?Eh(x.substr(1,x.length-1)):x},set:function(S){S=S.toString(),x=this instanceof fs==1?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var j,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(S){S=!!S,b=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(j)return j},set:function(S){j=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,1)},set:function(S){S?this.Ff=On(this.Ff,1):this.Ff=Dn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,2)},set:function(S){S?this.Ff=On(this.Ff,2):this.Ff=Dn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,3)},set:function(S){S?this.Ff=On(this.Ff,3):this.Ff=Dn(this.Ff,3)}});var A=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(A!==null)return A},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');A=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(A){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:A=2;break;case"center":case 1:A=1;break;default:A=0}}})};Ci(wl,ec);var Uh=function(){wl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return fD(t,this.objId,this.scope)},set:function(r){var a,s;s=[],typeof(a=r)=="string"&&(s=function(i,l,u){u||(u=1);for(var d,f=[];d=l.exec(i);)f.push(d[u]);return f}(a,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,18)},set:function(r){r?this.Ff=On(this.Ff,18):this.Ff=Dn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=On(this.Ff,19):this.Ff=Dn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,20)},set:function(r){r?(this.Ff=On(this.Ff,20),t.sort()):this.Ff=Dn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,22)},set:function(r){r?this.Ff=On(this.Ff,22):this.Ff=Dn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,23)},set:function(r){r?this.Ff=On(this.Ff,23):this.Ff=Dn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,27)},set:function(r){r?this.Ff=On(this.Ff,27):this.Ff=Dn(this.Ff,27)}}),this.hasAppearanceStream=!1};Ci(Uh,wl);var $h=function(){Uh.call(this),this.fontName="helvetica",this.combo=!1};Ci($h,Uh);var zh=function(){$h.call(this),this.combo=!0};Ci(zh,$h);var Q0=function(){zh.call(this),this.edit=!0};Ci(Q0,zh);var fs=function(){wl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,15)},set:function(r){r?this.Ff=On(this.Ff,15):this.Ff=Dn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,16)},set:function(r){r?this.Ff=On(this.Ff,16):this.Ff=Dn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,17)},set:function(r){r?this.Ff=On(this.Ff,17):this.Ff=Dn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,26)},set:function(r){r?this.Ff=On(this.Ff,26):this.Ff=Dn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,s=[];for(a in s.push("<<"),t)s.push("/"+a+" ("+Df(r(t[a]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){_a(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Ci(fs,wl);var ex=function(){fs.call(this),this.pushButton=!0};Ci(ex,fs);var Vh=function(){fs.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Ci(Vh,fs);var Xx=function(){var e,t;wl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(u){return u};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,l=[];for(i in l.push("<<"),a)l.push("/"+i+" ("+Df(s(a[i]))+")");return l.push(">>"),l.join(`
`)},set:function(s){_a(s)==="object"&&(a=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(s){typeof s=="string"&&(a.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=tr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ci(Xx,wl),Vh.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Vh.prototype.createOption=function(e){var t=new Xx;return t.Parent=this,t.optionName=e,this.Kids.push(t),eae.call(this.scope,t),t};var tx=function(){fs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=tr.CheckBox.createAppearanceStream()};Ci(tx,fs);var gf=function(){wl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,13)},set:function(t){t?this.Ff=On(this.Ff,13):this.Ff=Dn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,21)},set:function(t){t?this.Ff=On(this.Ff,21):this.Ff=Dn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,23)},set:function(t){t?this.Ff=On(this.Ff,23):this.Ff=Dn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,24)},set:function(t){t?this.Ff=On(this.Ff,24):this.Ff=Dn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,25)},set:function(t){t?this.Ff=On(this.Ff,25):this.Ff=Dn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,26)},set:function(t){t?this.Ff=On(this.Ff,26):this.Ff=Dn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ci(gf,wl);var rx=function(){gf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,14)},set:function(e){e?this.Ff=On(this.Ff,14):this.Ff=Dn(this.Ff,14)}}),this.password=!0};Ci(rx,gf);var tr={CheckBox:{createAppearanceStream:function(){return{N:{On:tr.CheckBox.YesNormal},D:{On:tr.CheckBox.YesPushDown,Off:tr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Yl(e);t.scope=e.scope;var r=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=qw(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Er(tr.internal.getWidth(e))+" "+Er(tr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+Er(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Yl(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=[],i=tr.internal.getHeight(e),l=tr.internal.getWidth(e),u=qw(e,e.caption);return s.push("1 g"),s.push("0 0 "+Er(l)+" "+Er(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Er(l-1)+" "+Er(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+Er(u.fontSize)+" Tf "+a),s.push(u.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Yl(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Er(tr.internal.getWidth(e))+" "+Er(tr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:tr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=tr.RadioButton.Circle.YesNormal,t.D[e]=tr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Yl(e);t.scope=e.scope;var r=[],a=tr.internal.getWidth(e)<=tr.internal.getHeight(e)?tr.internal.getWidth(e)/4:tr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=tr.internal.Bezier_C,i=Number((a*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Qu(tr.internal.getWidth(e)/2)+" "+Qu(tr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Yl(e);t.scope=e.scope;var r=[],a=tr.internal.getWidth(e)<=tr.internal.getHeight(e)?tr.internal.getWidth(e)/4:tr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*tr.internal.Bezier_C).toFixed(5)),l=Number((a*tr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Qu(tr.internal.getWidth(e)/2)+" "+Qu(tr.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Qu(tr.internal.getWidth(e)/2)+" "+Qu(tr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+l+" "+l+" "+a+" 0 "+a+" c"),r.push("-"+l+" "+a+" -"+a+" "+l+" -"+a+" 0 c"),r.push("-"+a+" -"+l+" -"+l+" -"+a+" 0 -"+a+" c"),r.push(l+" -"+a+" "+a+" -"+l+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Yl(e);t.scope=e.scope;var r=[],a=tr.internal.getWidth(e)<=tr.internal.getHeight(e)?tr.internal.getWidth(e)/4:tr.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*tr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Qu(tr.internal.getWidth(e)/2)+" "+Qu(tr.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:tr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=tr.RadioButton.Cross.YesNormal,t.D[e]=tr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Yl(e);t.scope=e.scope;var r=[],a=tr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Er(tr.internal.getWidth(e)-2)+" "+Er(tr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Er(a.x1.x)+" "+Er(a.x1.y)+" m"),r.push(Er(a.x2.x)+" "+Er(a.x2.y)+" l"),r.push(Er(a.x4.x)+" "+Er(a.x4.y)+" m"),r.push(Er(a.x3.x)+" "+Er(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Yl(e);t.scope=e.scope;var r=tr.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+Er(tr.internal.getWidth(e))+" "+Er(tr.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Er(tr.internal.getWidth(e)-2)+" "+Er(tr.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(Er(r.x1.x)+" "+Er(r.x1.y)+" m"),a.push(Er(r.x2.x)+" "+Er(r.x2.y)+" l"),a.push(Er(r.x4.x)+" "+Er(r.x4.y)+" m"),a.push(Er(r.x3.x)+" "+Er(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Yl(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Er(tr.internal.getWidth(e))+" "+Er(tr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};tr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=tr.internal.getWidth(e),r=tr.internal.getHeight(e),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},tr.internal.getWidth=function(e){var t=0;return _a(e)==="object"&&(t=GC(e.Rect[2])),t},tr.internal.getHeight=function(e){var t=0;return _a(e)==="object"&&(t=GC(e.Rect[3])),t};var eae=vn.addField=function(e){if(Qre(this,e),!(e instanceof wl))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};vn.AcroFormChoiceField=Uh,vn.AcroFormListBox=$h,vn.AcroFormComboBox=zh,vn.AcroFormEditBox=Q0,vn.AcroFormButton=fs,vn.AcroFormPushButton=ex,vn.AcroFormRadioButton=Vh,vn.AcroFormCheckBox=tx,vn.AcroFormTextField=gf,vn.AcroFormPasswordField=rx,vn.AcroFormAppearance=tr,vn.AcroForm={ChoiceField:Uh,ListBox:$h,ComboBox:zh,EditBox:Q0,Button:fs,PushButton:ex,RadioButton:Vh,CheckBox:tx,TextField:gf,PasswordField:rx,Appearance:tr},ir.AcroForm={ChoiceField:Uh,ListBox:$h,ComboBox:zh,EditBox:Q0,Button:fs,PushButton:ex,RadioButton:Vh,CheckBox:tx,TextField:gf,PasswordField:rx,Appearance:tr};ir.AcroForm;function pD(e){return e.reduce(function(t,r,a){return t[r]=a,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(R,q){var se,J,Q,ae,he,de=r;if((q=q||r)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(F(R))for(he in a)for(Q=a[he],se=0;se<Q.length;se+=1){for(ae=!0,J=0;J<Q[se].length;J+=1)if(Q[se][J]!==void 0&&Q[se][J]!==R[J]){ae=!1;break}if(ae===!0){de=he;break}}else for(he in a)for(Q=a[he],se=0;se<Q.length;se+=1){for(ae=!0,J=0;J<Q[se].length;J+=1)if(Q[se][J]!==void 0&&Q[se][J]!==R.charCodeAt(J)){ae=!1;break}if(ae===!0){de=he;break}}return de===r&&q!==r&&(de=q),de},i=function R(q){for(var se=this.internal.write,J=this.internal.putStream,Q=(0,this.internal.getFilters)();Q.indexOf("FlateEncode")!==-1;)Q.splice(Q.indexOf("FlateEncode"),1);q.objectId=this.internal.newObject();var ae=[];if(ae.push({key:"Type",value:"/XObject"}),ae.push({key:"Subtype",value:"/Image"}),ae.push({key:"Width",value:q.width}),ae.push({key:"Height",value:q.height}),q.colorSpace===S.INDEXED?ae.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(q.palette.length/3-1)+" "+("sMask"in q&&q.sMask!==void 0?q.objectId+2:q.objectId+1)+" 0 R]"}):(ae.push({key:"ColorSpace",value:"/"+q.colorSpace}),q.colorSpace===S.DEVICE_CMYK&&ae.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ae.push({key:"BitsPerComponent",value:q.bitsPerComponent}),"decodeParameters"in q&&q.decodeParameters!==void 0&&ae.push({key:"DecodeParms",value:"<<"+q.decodeParameters+">>"}),"transparency"in q&&Array.isArray(q.transparency)&&q.transparency.length>0){for(var he="",de=0,_e=q.transparency.length;de<_e;de++)he+=q.transparency[de]+" "+q.transparency[de]+" ";ae.push({key:"Mask",value:"["+he+"]"})}q.sMask!==void 0&&ae.push({key:"SMask",value:q.objectId+1+" 0 R"});var Y=q.filter!==void 0?["/"+q.filter]:void 0;if(J({data:q.data,additionalKeyValues:ae,alreadyAppliedFilters:Y,objectId:q.objectId}),se("endobj"),"sMask"in q&&q.sMask!==void 0){var ye,P=(ye=q.sMaskBitsPerComponent)!==null&&ye!==void 0?ye:q.bitsPerComponent,Z={width:q.width,height:q.height,colorSpace:"DeviceGray",bitsPerComponent:P,data:q.sMask};"filter"in q&&(Z.decodeParameters="/Predictor ".concat(q.predictor," /Colors 1 /BitsPerComponent ").concat(P," /Columns ").concat(q.width),Z.filter=q.filter),R.call(this,Z)}if(q.colorSpace===S.INDEXED){var ce=this.internal.newObject();J({data:M(new Uint8Array(q.palette)),objectId:ce}),se("endobj")}},l=function(){var R=this.internal.collections[t+"images"];for(var q in R)i.call(this,R[q])},u=function(){var R,q=this.internal.collections[t+"images"],se=this.internal.write;for(var J in q)se("/I"+(R=q[J]).index,R.objectId,"0","R")},d=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",u))},f=function(){var R=this.internal.collections[t+"images"];return d.call(this),R},m=function(){return Object.keys(this.internal.collections[t+"images"]).length},g=function(R){return typeof e["process"+R.toUpperCase()]=="function"},v=function(R){return _a(R)==="object"&&R.nodeType===1},x=function(R,q){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var se=""+R.getAttribute("src");if(se.indexOf("data:image/")===0)return J0(unescape(se).split("base64,").pop());var J=e.loadFile(se,!0);if(J!==void 0)return J}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var Q;switch(q){case"PNG":Q="image/png";break;case"WEBP":Q="image/webp";break;default:Q="image/jpeg"}return J0(R.toDataURL(Q,1).split("base64,").pop())}},j=function(R){var q=this.internal.collections[t+"images"];if(q){for(var se in q)if(R===q[se].alias)return q[se]}},b=function(R,q,se){return R||q||(R=-96,q=-96),R<0&&(R=-1*se.width*72/R/this.internal.scaleFactor),q<0&&(q=-1*se.height*72/q/this.internal.scaleFactor),R===0&&(R=q*se.width/se.height),q===0&&(q=R*se.height/se.width),[R,q]},A=function(R,q,se,J,Q,ae){var he=b.call(this,se,J,Q),de=this.internal.getCoordinateString,_e=this.internal.getVerticalCoordinateString,Y=f.call(this);if(se=he[0],J=he[1],Y[Q.index]=Q,ae){ae*=Math.PI/180;var ye=Math.cos(ae),P=Math.sin(ae),Z=function(je){return je.toFixed(4)},ce=[Z(ye),Z(P),Z(-1*P),Z(ye),0,0,"cm"]}this.internal.write("q"),ae?(this.internal.write([1,"0","0",1,de(R),_e(q+J),"cm"].join(" ")),this.internal.write(ce.join(" ")),this.internal.write([de(se),"0","0",de(J),"0","0","cm"].join(" "))):this.internal.write([de(se),"0","0",de(J),de(R),_e(q+J),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Q.index+" Do"),this.internal.write("Q")},S=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var T=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},E=e.__addimage__.sHashCode=function(R){var q,se,J=0;if(typeof R=="string")for(se=R.length,q=0;q<se;q++)J=(J<<5)-J+R.charCodeAt(q),J|=0;else if(F(R))for(se=R.byteLength/2,q=0;q<se;q++)J=(J<<5)-J+R[q],J|=0;return J},D=e.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var q=!0;return R.length===0&&(q=!1),R.length%4!=0&&(q=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(q=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(q=!1),q},L=e.__addimage__.extractImageFromDataUrl=function(R){if(R==null||!(R=R.trim()).startsWith("data:"))return null;var q=R.indexOf(",");return q<0?null:R.substring(0,q).trim().endsWith("base64")?R.substring(q+1):null};e.__addimage__.isArrayBuffer=function(R){return R instanceof ArrayBuffer};var F=e.__addimage__.isArrayBufferView=function(R){return R instanceof Int8Array||R instanceof Uint8Array||R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array},z=e.__addimage__.binaryStringToUint8Array=function(R){for(var q=R.length,se=new Uint8Array(q),J=0;J<q;J++)se[J]=R.charCodeAt(J);return se},M=e.__addimage__.arrayBufferToBinaryString=function(R){for(var q="",se=F(R)?R:new Uint8Array(R),J=0;J<se.length;J+=8192)q+=String.fromCharCode.apply(null,se.subarray(J,J+8192));return q};e.addImage=function(){var R,q,se,J,Q,ae,he,de,_e;if(typeof arguments[1]=="number"?(q=r,se=arguments[1],J=arguments[2],Q=arguments[3],ae=arguments[4],he=arguments[5],de=arguments[6],_e=arguments[7]):(q=arguments[1],se=arguments[2],J=arguments[3],Q=arguments[4],ae=arguments[5],he=arguments[6],de=arguments[7],_e=arguments[8]),_a(R=arguments[0])==="object"&&!v(R)&&"imageData"in R){var Y=R;R=Y.imageData,q=Y.format||q||r,se=Y.x||se||0,J=Y.y||J||0,Q=Y.w||Y.width||Q,ae=Y.h||Y.height||ae,he=Y.alias||he,de=Y.compression||de,_e=Y.rotation||Y.angle||_e}var ye=this.internal.getFilters();if(de===void 0&&ye.indexOf("FlateEncode")!==-1&&(de="SLOW"),isNaN(se)||isNaN(J))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var P=U.call(this,R,q,he,de);return A.call(this,se,J,Q,ae,P,_e),this};var U=function(R,q,se,J){var Q,ae,he;if(typeof R=="string"&&s(R)===r){R=unescape(R);var de=oe(R,!1);(de!==""||(de=e.loadFile(R,!0))!==void 0)&&(R=de)}if(v(R)&&(R=x(R,q)),q=s(R,q),!g(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(((he=se)==null||he.length===0)&&(se=function(_e){return typeof _e=="string"||F(_e)?E(_e):F(_e.data)?E(_e.data):null}(R)),(Q=j.call(this,se))||(R instanceof Uint8Array||q==="RGBA"||(ae=R,R=z(R)),Q=this["process"+q.toUpperCase()](R,m.call(this),se,function(_e){return _e&&typeof _e=="string"&&(_e=_e.toUpperCase()),_e in e.image_compression?_e:T.NONE}(J),ae)),!Q)throw new Error("An unknown error occurred whilst processing the image.");return Q},oe=e.__addimage__.convertBase64ToBinaryString=function(R,q){q=typeof q!="boolean"||q;var se,J="";if(typeof R=="string"){var Q;se=(Q=L(R))!==null&&Q!==void 0?Q:R;try{J=J0(se)}catch(ae){if(q)throw D(se)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ae.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return J};e.getImageProperties=function(R){var q,se,J="";if(v(R)&&(R=x(R)),typeof R=="string"&&s(R)===r&&((J=oe(R,!1))===""&&(J=e.loadFile(R)||""),R=J),se=s(R),!g(se))throw new Error("addImage does not support files of type '"+se+"', please ensure that a plugin for '"+se+"' support is added.");if(R instanceof Uint8Array||(R=z(R)),!(q=this["process"+se.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return q.fileType=se,q}})(ir.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};ir.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var a,s,i,l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(r.objId),f=r.pageContext.annotations,m=!1,g=0;g<f.length&&!m;g++)switch((a=f[g]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var v=0;v<f.length;v++){a=f[v];var x=this.internal.pdfEscape,j=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),A=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(b.objId),T=a.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+l(a.bounds.x)+" "+u(a.bounds.y+a.bounds.h)+" "+l(a.bounds.x+a.bounds.w)+" "+u(a.bounds.y)+"] ")+"/Contents ("+x(S(a.contents))+")",i+=" /Popup "+A.objId+" 0 R",i+=" /P "+d.objId+" 0 R",i+=" /T ("+x(S(T))+") >>",b.content=i;var E=b.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+l(a.bounds.x+30)+" "+u(a.bounds.y+a.bounds.h)+" "+l(a.bounds.x+a.bounds.w+30)+" "+u(a.bounds.y)+"] ")+" /Parent "+E,a.open&&(i+=" /Open true"),i+=" >>",A.content=i,this.internal.write(b.objId,"0 R",A.objId,"0 R");break;case"freetext":s="/Rect ["+l(a.bounds.x)+" "+u(a.bounds.y)+" "+l(a.bounds.x+a.bounds.w)+" "+u(a.bounds.y+a.bounds.h)+"] ";var D=a.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+x(j(a.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+D+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(a.options.name){var L=this.annotations._nameMap[a.options.name];a.options.pageNumber=L.page,a.options.top=L.y}else a.options.top||(a.options.top=0);if(s="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",i="",a.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+x(j(a.options.url))+") >>";else if(a.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,i+=" /FitV "+a.options.left+"]";break;default:var F=u(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),i+=" /XYZ "+a.options.left+" "+F+" "+a.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},e.link=function(r,a,s,i,l){var u=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:d(r),y:f(a),w:d(r+s),h:f(a+i)},options:l,type:"link"})},e.textWithLink=function(r,a,s,i){var l,u,d=this.getTextWidth(r),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){u=i.maxWidth;var m=this.splitTextToSize(r,u).length;l=Math.ceil(f*m)}else u=d,l=f;return this.text(r,a,s,i),s+=.2*f,i.align==="center"&&(a-=d/2),i.align==="right"&&(a-=d),this.link(a,s-f,u,l,i),d},e.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}}(ir.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(b){return t[b.charCodeAt(0)]!==void 0},l=e.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},u=e.__arabicParser__.isArabicEndLetter=function(b){return l(b)&&i(b)&&t[b.charCodeAt(0)].length<=2},d=e.__arabicParser__.isArabicAlfLetter=function(b){return l(b)&&s.indexOf(b.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return l(b)&&i(b)&&t[b.charCodeAt(0)].length>=1};var f=e.__arabicParser__.arabicLetterHasFinalForm=function(b){return l(b)&&i(b)&&t[b.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(b){return l(b)&&i(b)&&t[b.charCodeAt(0)].length>=3};var m=e.__arabicParser__.arabicLetterHasMedialForm=function(b){return l(b)&&i(b)&&t[b.charCodeAt(0)].length==4},g=e.__arabicParser__.resolveLigatures=function(b){var A=0,S=r,T="",E=0;for(A=0;A<b.length;A+=1)S[b.charCodeAt(A)]!==void 0?(E++,typeof(S=S[b.charCodeAt(A)])=="number"&&(T+=String.fromCharCode(S),S=r,E=0),A===b.length-1&&(S=r,T+=b.charAt(A-(E-1)),A-=E-1,E=0)):(S=r,T+=b.charAt(A-E),A-=E,E=0);return T};e.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&a[b.charCodeAt(0)]!==void 0};var v=e.__arabicParser__.getCorrectForm=function(b,A,S){return l(b)?i(b)===!1?-1:!f(b)||!l(A)&&!l(S)||!l(S)&&u(A)||u(b)&&!l(A)||u(b)&&d(A)||u(b)&&u(A)?0:m(b)&&l(A)&&!u(A)&&l(S)&&f(S)?3:u(b)||!l(S)?1:2:-1},x=function(b){var A=0,S=0,T=0,E="",D="",L="",F=(b=b||"").split("\\s+"),z=[];for(A=0;A<F.length;A+=1){for(z.push(""),S=0;S<F[A].length;S+=1)E=F[A][S],D=F[A][S-1],L=F[A][S+1],l(E)?(T=v(E,D,L),z[A]+=T!==-1?String.fromCharCode(t[E.charCodeAt(0)][T]):E):z[A]+=E;z[A]=g(z[A])}return z.join(" ")},j=e.__arabicParser__.processArabic=e.processArabic=function(){var b,A=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(A)){var T=0;for(S=[],T=0;T<A.length;T+=1)Array.isArray(A[T])?S.push([x(A[T][0]),A[T][1],A[T][2]]):S.push([x(A[T])]);b=S}else b=x(A);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};e.events.push(["preProcessText",j])}(ir.API),ir.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(u){r=u}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(u){a=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(u){s=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(u){i=u}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(u){l=u}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,a){var s;if((r=r||"2d")!=="2d")return null;for(s in a)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=a[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(ir.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(b){d=b}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(b){f=b}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(b){m=b}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(b){g=b}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(b){v=b}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(b){x=b}});var j=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return j},set:function(b){j=b}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(d){return a.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},e.getTextDimensions=function(d,f){a.call(this);var m=(f=f||{}).fontSize||this.getFontSize(),g=f.font||this.getFont(),v=f.scaleFactor||this.internal.scaleFactor,x=0,j=0,b=0,A=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var S=f.maxWidth;S>0?typeof d=="string"?d=this.splitTextToSize(d,S):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(E,D){return E.concat(A.splitTextToSize(D,S))},[])):d=Array.isArray(d)?d:[d];for(var T=0;T<d.length;T++)x<(b=this.getStringUnitWidth(d[T],{font:g})*m)&&(x=b);return x!==0&&(j=d.length),{w:x/=v,h:Math.max((j*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/v,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var d=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=e.cell=function(){var d;d=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var f=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,g=this.internal.__cell__.margins||t,v=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===d.lineNumber?(d.x=(f.x||0)+(f.width||0),d.y=f.y||0):f.y+f.height+d.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=g.top,x&&v&&(this.printHeaderRow(d.lineNumber,!0),d.y+=v[0].height)):d.y=f.y+f.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,r===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-m,d.y+m,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+m,{align:"center",baseline:"top",maxWidth:d.width-m-m}):this.text(d.text,d.x+m,d.y+m,{align:"left",baseline:"top",maxWidth:d.width-m-m})),this.internal.__cell__.lastCell=d,this};e.table=function(d,f,m,g,v){if(a.call(this),!m)throw new Error("No data for PDF table.");var x,j,b,A,S=[],T=[],E=[],D={},L={},F=[],z=[],M=(v=v||{}).autoSize||!1,U=v.printHeaders!==!1,oe=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,R=v.margins||Object.assign({width:this.getPageWidth()},t),q=typeof v.padding=="number"?v.padding:3,se=v.headerBackgroundColor||"#c8c8c8",J=v.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=U,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=oe,this.internal.__cell__.padding=q,this.internal.__cell__.headerBackgroundColor=se,this.internal.__cell__.headerTextColor=J,this.setFontSize(oe),g==null)T=S=Object.keys(m[0]),E=S.map(function(){return"left"});else if(Array.isArray(g)&&_a(g[0])==="object")for(S=g.map(function(Y){return Y.name}),T=g.map(function(Y){return Y.prompt||Y.name||""}),E=g.map(function(Y){return Y.align||"left"}),x=0;x<g.length;x+=1)L[g[x].name]=.7499990551181103*g[x].width;else Array.isArray(g)&&typeof g[0]=="string"&&(T=S=g,E=S.map(function(){return"left"}));if(M||Array.isArray(g)&&typeof g[0]=="string")for(x=0;x<S.length;x+=1){for(D[A=S[x]]=m.map(function(Y){return Y[A]}),this.setFont(void 0,"bold"),F.push(this.getTextDimensions(T[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),j=D[A],this.setFont(void 0,"normal"),b=0;b<j.length;b+=1)F.push(this.getTextDimensions(j[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);L[A]=Math.max.apply(null,F)+q+q,F=[]}if(U){var Q={};for(x=0;x<S.length;x+=1)Q[S[x]]={},Q[S[x]].text=T[x],Q[S[x]].align=E[x];var ae=u.call(this,Q,L);z=S.map(function(Y){return new i(d,f,L[Y],ae,Q[Y].text,void 0,Q[Y].align)}),this.setTableHeaderRow(z),this.printHeaderRow(1,!1)}var he=g.reduce(function(Y,ye){return Y[ye.name]=ye.align,Y},{});for(x=0;x<m.length;x+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:x,data:m[x]},this);var de=u.call(this,m[x],L);for(b=0;b<S.length;b+=1){var _e=m[x][S[b]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:x,col:b,data:_e},this),l.call(this,new i(d,f,L[S[b]],de,_e,x+2,he[S[b]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=f,this};var u=function(d,f){var m=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(d).map(function(x){var j=d[x];return this.splitTextToSize(j.hasOwnProperty("text")?j.text:j,f[x]-m-m)},this).map(function(x){return this.getLineHeightFactor()*x.length*g/v+m+m},this).reduce(function(x,j){return Math.max(x,j)},0)};e.setTableHeaderRow=function(d){a.call(this),this.internal.__cell__.tableHeaderRow=d},e.printHeaderRow=function(d,f){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){m=this.internal.__cell__.tableHeaderRow[x].clone(),f&&(m.y=this.internal.__cell__.margins.top||0,v.push(m)),m.lineNumber=d;var j=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,m),this.setTextColor(j)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),r=!1}}(ir.API);var gD={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},xD=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Fw=pD(xD),vD=[100,200,300,400,500,600,700,800,900],tae=pD(vD);function l2(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return gD[i=i||"normal"]?i:"normal"}(e.style),a=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(e.weight),s=function(i){return typeof Fw[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:a,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,a].join(" ")}}}function KC(e,t,r,a){var s;for(s=r;s>=0&&s<t.length;s+=a)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=a)if(e[t[s]])return e[t[s]]}var rae={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},WC={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function YC(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function XC(e){return e.trimLeft()}function aae(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function nae(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var K0,ZC,JC,Ph,W0,QC,ek,tk,c2=["times"];function rk(e,t,r,a,s){var i=4,l=nk;switch(s){case ir.API.image_compression.FAST:i=1,l=ak;break;case ir.API.image_compression.MEDIUM:i=6,l=sk;break;case ir.API.image_compression.SLOW:i=9,l=ik}e=function(d,f,m,g){for(var v,x=d.length/f,j=new Uint8Array(d.length+x),b=[sae,ak,nk,sk,ik],A=0;A<x;A+=1){var S=A*f,T=d.subarray(S,S+f);if(g)j.set(g(T,m,v),S+A);else{for(var E=b.length,D=[],L=0;L<E;L+=1)D[L]=b[L](T,m,v);var F=oae(D.concat());j.set(D[F],S+A)}v=T}return j}(e,t,Math.ceil(r*a/8),l);var u=Ow(e,{level:i});return ir.API.__addimage__.arrayBufferToBinaryString(u)}function sae(e){var t=Array.apply([],e);return t.unshift(0),t}function ak(e,t){var r=e.length,a=[];a[0]=1;for(var s=0;s<r;s+=1){var i=e[s-t]||0;a[s+1]=e[s]-i+256&255}return a}function nk(e,t,r){var a=e.length,s=[];s[0]=2;for(var i=0;i<a;i+=1){var l=r&&r[i]||0;s[i+1]=e[i]-l+256&255}return s}function sk(e,t,r){var a=e.length,s=[];s[0]=3;for(var i=0;i<a;i+=1){var l=e[i-t]||0,u=r&&r[i]||0;s[i+1]=e[i]+256-(l+u>>>1)&255}return s}function ik(e,t,r){var a=e.length,s=[];s[0]=4;for(var i=0;i<a;i+=1){var l=iae(e[i-t]||0,r&&r[i]||0,r&&r[i-t]||0);s[i+1]=e[i]-l+256&255}return s}function iae(e,t,r){if(e===t&&t===r)return e;var a=Math.abs(t-r),s=Math.abs(e-r),i=Math.abs(e+t-r-r);return a<=s&&a<=i?e:s<=i?t:r}function oae(e){var t=e.map(function(r){return r.reduce(function(a,s){return a+Math.abs(s)},0)});return t.indexOf(Math.min.apply(null,t))}function u2(e,t,r){var a=t*r,s=Math.floor(a/8),i=16-(a-8*s+r),l=(1<<r)-1;return yD(e,s)>>i&l}function ok(e,t,r,a){var s=r*a,i=Math.floor(s/8),l=16-(s-8*i+a),u=(1<<a)-1,d=(t&u)<<l;(function(f,m,g){if(m+1<f.byteLength)f.setUint16(m,g,!1);else{var v=g>>8&255;f.setUint8(m,v)}})(e,i,yD(e,i)&~(u<<l)&65535|d)}function yD(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function lae(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,l=1<<1+(7&s);e[t++],e[t++];var u=null,d=null;i&&(u=t,d=l,t+=3*l);var f=!0,m=[],g=0,v=null,x=0,j=null;for(this.width=r,this.height=a;f&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,j=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var b=e[t++];g=e[t++]|e[t++]<<8,v=e[t++],1&b||(v=null),x=b>>2&7,t++;break;case 254:for(;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var A=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,T=e[t++]|e[t++]<<8,E=e[t++]|e[t++]<<8,D=e[t++],L=D>>6&1,F=1<<1+(7&D),z=u,M=d,U=!1;D>>7&&(U=!0,z=t,M=F,t+=3*F);var oe=t;for(t++;;){var R;if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}m.push({x:A,y:S,width:T,height:E,has_local_palette:U,palette_offset:z,palette_size:M,data_offset:oe,data_length:t-oe,transparent_index:v,interlaced:!!L,delay:g,disposal:x});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return j},this.frameInfo=function(q){if(q<0||q>=m.length)throw new Error("Frame index out of range.");return m[q]},this.decodeAndBlitFrameBGRA=function(q,se){var J=this.frameInfo(q),Q=J.width*J.height,ae=new Uint8Array(Q);lk(e,J.data_offset,ae,Q);var he=J.palette_offset,de=J.transparent_index;de===null&&(de=256);var _e=J.width,Y=r-_e,ye=_e,P=4*(J.y*r+J.x),Z=4*((J.y+J.height)*r+J.x),ce=P,je=4*Y;J.interlaced===!0&&(je+=4*r*7);for(var ke=8,De=0,Ee=ae.length;De<Ee;++De){var ne=ae[De];if(ye===0&&(ye=_e,(ce+=je)>=Z&&(je=4*Y+4*r*(ke-1),ce=P+(_e+Y)*(ke<<1),ke>>=1)),ne===de)ce+=4;else{var Ne=e[he+3*ne],le=e[he+3*ne+1],xe=e[he+3*ne+2];se[ce++]=xe,se[ce++]=le,se[ce++]=Ne,se[ce++]=255}--ye}},this.decodeAndBlitFrameRGBA=function(q,se){var J=this.frameInfo(q),Q=J.width*J.height,ae=new Uint8Array(Q);lk(e,J.data_offset,ae,Q);var he=J.palette_offset,de=J.transparent_index;de===null&&(de=256);var _e=J.width,Y=r-_e,ye=_e,P=4*(J.y*r+J.x),Z=4*((J.y+J.height)*r+J.x),ce=P,je=4*Y;J.interlaced===!0&&(je+=4*r*7);for(var ke=8,De=0,Ee=ae.length;De<Ee;++De){var ne=ae[De];if(ye===0&&(ye=_e,(ce+=je)>=Z&&(je=4*Y+4*r*(ke-1),ce=P+(_e+Y)*(ke<<1),ke>>=1)),ne===de)ce+=4;else{var Ne=e[he+3*ne],le=e[he+3*ne+1],xe=e[he+3*ne+2];se[ce++]=Ne,se[ce++]=le,se[ce++]=xe,se[ce++]=255}--ye}}}function lk(e,t,r,a){for(var s=e[t++],i=1<<s,l=i+1,u=l+1,d=s+1,f=(1<<d)-1,m=0,g=0,v=0,x=e[t++],j=new Int32Array(4096),b=null;;){for(;m<16&&x!==0;)g|=e[t++]<<m,m+=8,x===1?x=e[t++]:--x;if(m<d)break;var A=g&f;if(g>>=d,m-=d,A!==i){if(A===l)break;for(var S=A<u?A:b,T=0,E=S;E>i;)E=j[E]>>8,++T;var D=E;if(v+T+(S!==A?1:0)>a)return void Ra.log("Warning, gif stream longer than expected.");r[v++]=D;var L=v+=T;for(S!==A&&(r[v++]=D),E=S;T--;)E=j[E],r[--L]=255&E,E>>=8;b!==null&&u<4096&&(j[u++]=b<<8|D,u>=f+1&&d<12&&(++d,f=f<<1|1)),b=A}else u=l+1,f=(1<<(d=s+1))-1,b=null}return v!==a&&Ra.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function d2(e){var t,r,a,s,i,l=Math.floor,u=new Array(64),d=new Array(64),f=new Array(64),m=new Array(64),g=new Array(65535),v=new Array(65535),x=new Array(64),j=new Array(64),b=[],A=0,S=7,T=new Array(64),E=new Array(64),D=new Array(64),L=new Array(256),F=new Array(2048),z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],oe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],q=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],se=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ae(P,Z){for(var ce=0,je=0,ke=new Array,De=1;De<=16;De++){for(var Ee=1;Ee<=P[De];Ee++)ke[Z[je]]=[],ke[Z[je]][0]=ce,ke[Z[je]][1]=De,je++,ce++;ce*=2}return ke}function he(P){for(var Z=P[0],ce=P[1]-1;ce>=0;)Z&1<<ce&&(A|=1<<S),ce--,--S<0&&(A==255?(de(255),de(0)):de(A),S=7,A=0)}function de(P){b.push(P)}function _e(P){de(P>>8&255),de(255&P)}function Y(P,Z,ce,je,ke){for(var De,Ee=ke[0],ne=ke[240],Ne=function(be,$e){var Ze,pe,V,Le,ft,kt,Mt,Lt,at,Nt,Ie=0;for(at=0;at<8;++at){Ze=be[Ie],pe=be[Ie+1],V=be[Ie+2],Le=be[Ie+3],ft=be[Ie+4],kt=be[Ie+5],Mt=be[Ie+6];var Tt=Ze+(Lt=be[Ie+7]),mt=Ze-Lt,Et=pe+Mt,zt=pe-Mt,ur=V+kt,Rt=V-kt,Vt=Le+ft,Qt=Le-ft,hr=Tt+Vt,pr=Tt-Vt,Be=Et+ur,We=Et-ur;be[Ie]=hr+Be,be[Ie+4]=hr-Be;var vt=.707106781*(We+pr);be[Ie+2]=pr+vt,be[Ie+6]=pr-vt;var Fe=.382683433*((hr=Qt+Rt)-(We=zt+mt)),Te=.5411961*hr+Fe,nt=1.306562965*We+Fe,we=.707106781*(Be=Rt+zt),Ve=mt+we,Ct=mt-we;be[Ie+5]=Ct+Te,be[Ie+3]=Ct-Te,be[Ie+1]=Ve+nt,be[Ie+7]=Ve-nt,Ie+=8}for(Ie=0,at=0;at<8;++at){Ze=be[Ie],pe=be[Ie+8],V=be[Ie+16],Le=be[Ie+24],ft=be[Ie+32],kt=be[Ie+40],Mt=be[Ie+48];var Dt=Ze+(Lt=be[Ie+56]),Wt=Ze-Lt,cr=pe+Mt,Ot=pe-Mt,$t=V+kt,rr=V-kt,qt=Le+ft,Sr=Le-ft,Na=Dt+qt,Tr=Dt-qt,on=cr+$t,$a=cr-$t;be[Ie]=Na+on,be[Ie+32]=Na-on;var Pa=.707106781*($a+Tr);be[Ie+16]=Tr+Pa,be[Ie+48]=Tr-Pa;var ea=.382683433*((Na=Sr+rr)-($a=Ot+Wt)),hn=.5411961*Na+ea,ta=1.306562965*$a+ea,gr=.707106781*(on=rr+Ot),ra=Wt+gr,ci=Wt-gr;be[Ie+40]=ci+hn,be[Ie+24]=ci-hn,be[Ie+8]=ra+ta,be[Ie+56]=ra-ta,Ie++}for(at=0;at<64;++at)Nt=be[at]*$e[at],x[at]=Nt>0?Nt+.5|0:Nt-.5|0;return x}(P,Z),le=0;le<64;++le)j[z[le]]=Ne[le];var xe=j[0]-ce;ce=j[0],xe==0?he(je[0]):(he(je[v[De=32767+xe]]),he(g[De]));for(var H=63;H>0&&j[H]==0;)H--;if(H==0)return he(Ee),ce;for(var W,B=1;B<=H;){for(var ee=B;j[B]==0&&B<=H;)++B;var X=B-ee;if(X>=16){W=X>>4;for(var ge=1;ge<=W;++ge)he(ne);X&=15}De=32767+j[B],he(ke[(X<<4)+v[De]]),he(g[De]),B++}return H!=63&&he(Ee),ce}function ye(P){P=Math.min(Math.max(P,1),100),i!=P&&(function(Z){for(var ce=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],je=0;je<64;je++){var ke=l((ce[je]*Z+50)/100);ke=Math.min(Math.max(ke,1),255),u[z[je]]=ke}for(var De=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ee=0;Ee<64;Ee++){var ne=l((De[Ee]*Z+50)/100);ne=Math.min(Math.max(ne,1),255),d[z[Ee]]=ne}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],le=0,xe=0;xe<8;xe++)for(var H=0;H<8;H++)f[le]=1/(u[z[le]]*Ne[xe]*Ne[H]*8),m[le]=1/(d[z[le]]*Ne[xe]*Ne[H]*8),le++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),i=P)}this.encode=function(P,Z){Z&&ye(Z),b=new Array,A=0,S=7,_e(65496),_e(65504),_e(16),de(74),de(70),de(73),de(70),de(0),de(1),de(1),de(0),_e(1),_e(1),de(0),de(0),function(){_e(65499),_e(132),de(0);for(var pe=0;pe<64;pe++)de(u[pe]);de(1);for(var V=0;V<64;V++)de(d[V])}(),function(pe,V){_e(65472),_e(17),de(8),_e(V),_e(pe),de(3),de(1),de(17),de(0),de(2),de(17),de(1),de(3),de(17),de(1)}(P.width,P.height),function(){_e(65476),_e(418),de(0);for(var pe=0;pe<16;pe++)de(M[pe+1]);for(var V=0;V<=11;V++)de(U[V]);de(16);for(var Le=0;Le<16;Le++)de(oe[Le+1]);for(var ft=0;ft<=161;ft++)de(R[ft]);de(1);for(var kt=0;kt<16;kt++)de(q[kt+1]);for(var Mt=0;Mt<=11;Mt++)de(se[Mt]);de(17);for(var Lt=0;Lt<16;Lt++)de(J[Lt+1]);for(var at=0;at<=161;at++)de(Q[at])}(),_e(65498),_e(12),de(3),de(1),de(0),de(2),de(17),de(3),de(17),de(0),de(63),de(0);var ce=0,je=0,ke=0;A=0,S=7,this.encode.displayName="_encode_";for(var De,Ee,ne,Ne,le,xe,H,W,B,ee=P.data,X=P.width,ge=P.height,be=4*X,$e=0;$e<ge;){for(De=0;De<be;){for(le=be*$e+De,H=-1,W=0,B=0;B<64;B++)xe=le+(W=B>>3)*be+(H=4*(7&B)),$e+W>=ge&&(xe-=be*($e+1+W-ge)),De+H>=be&&(xe-=De+H-be+4),Ee=ee[xe++],ne=ee[xe++],Ne=ee[xe++],T[B]=(F[Ee]+F[ne+256|0]+F[Ne+512|0]>>16)-128,E[B]=(F[Ee+768|0]+F[ne+1024|0]+F[Ne+1280|0]>>16)-128,D[B]=(F[Ee+1280|0]+F[ne+1536|0]+F[Ne+1792|0]>>16)-128;ce=Y(T,f,ce,t,a),je=Y(E,m,je,r,s),ke=Y(D,m,ke,r,s),De+=32}$e+=8}if(S>=0){var Ze=[];Ze[1]=S+1,Ze[0]=(1<<S+1)-1,he(Ze)}return _e(65497),new Uint8Array(b)},e=e||50,function(){for(var P=String.fromCharCode,Z=0;Z<256;Z++)L[Z]=P(Z)}(),t=ae(M,U),r=ae(q,se),a=ae(oe,R),s=ae(J,Q),function(){for(var P=1,Z=2,ce=1;ce<=15;ce++){for(var je=P;je<Z;je++)v[32767+je]=ce,g[32767+je]=[],g[32767+je][1]=ce,g[32767+je][0]=je;for(var ke=-(Z-1);ke<=-P;ke++)v[32767+ke]=ce,g[32767+ke]=[],g[32767+ke][1]=ce,g[32767+ke][0]=Z-1+ke;P<<=1,Z<<=1}}(),function(){for(var P=0;P<256;P++)F[P]=19595*P,F[P+256|0]=38470*P,F[P+512|0]=7471*P+32768,F[P+768|0]=-11059*P,F[P+1024|0]=-21709*P,F[P+1280|0]=32768*P+8421375,F[P+1536|0]=-27439*P,F[P+1792|0]=-5329*P}(),ye(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function cl(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ck(e){function t(U){if(!U)throw Error("assert :P")}function r(U,oe,R){for(var q=0;4>q;q++)if(U[oe+q]!=R.charCodeAt(q))return!0;return!1}function a(U,oe,R,q,se){for(var J=0;J<se;J++)U[oe+J]=R[q+J]}function s(U,oe,R,q){for(var se=0;se<q;se++)U[oe+se]=R}function i(U){return new Int32Array(U)}function l(U,oe){for(var R=[],q=0;q<U;q++)R.push(new oe);return R}function u(U,oe){var R=[];return function q(se,J,Q){for(var ae=Q[J],he=0;he<ae&&(se.push(Q.length>J+1?[]:new oe),!(Q.length<J+1));he++)q(se[he],J+1,Q)}(R,0,U),R}var d=function(){var U=this;function oe(y,N){for(var O=1<<N-1>>>0;y&O;)O>>>=1;return O?(y&O-1)+O:y}function R(y,N,O,I,re){t(!(I%O));do y[N+(I-=O)]=re;while(0<I)}function q(y,N,O,I,re){if(t(2328>=re),512>=re)var ie=i(512);else if((ie=i(re))==null)return 0;return function(ue,me,ve,Ae,qe,Je){var Se,ze,Ke=me,lt=1<<ve,Xe=i(16),dt=i(16);for(t(qe!=0),t(Ae!=null),t(ue!=null),t(0<ve),ze=0;ze<qe;++ze){if(15<Ae[ze])return 0;++Xe[Ae[ze]]}if(Xe[0]==qe)return 0;for(dt[1]=0,Se=1;15>Se;++Se){if(Xe[Se]>1<<Se)return 0;dt[Se+1]=dt[Se]+Xe[Se]}for(ze=0;ze<qe;++ze)Se=Ae[ze],0<Ae[ze]&&(Je[dt[Se]++]=ze);if(dt[15]==1)return(Ae=new se).g=0,Ae.value=Je[0],R(ue,Ke,1,lt,Ae),lt;var ut,St=-1,bt=lt-1,ar=0,Ht=1,jr=1,Kt=1<<ve;for(ze=0,Se=1,qe=2;Se<=ve;++Se,qe<<=1){if(Ht+=jr<<=1,0>(jr-=Xe[Se]))return 0;for(;0<Xe[Se];--Xe[Se])(Ae=new se).g=Se,Ae.value=Je[ze++],R(ue,Ke+ar,qe,Kt,Ae),ar=oe(ar,Se)}for(Se=ve+1,qe=2;15>=Se;++Se,qe<<=1){if(Ht+=jr<<=1,0>(jr-=Xe[Se]))return 0;for(;0<Xe[Se];--Xe[Se]){if(Ae=new se,(ar&bt)!=St){for(Ke+=Kt,ut=1<<(St=Se)-ve;15>St&&!(0>=(ut-=Xe[St]));)++St,ut<<=1;lt+=Kt=1<<(ut=St-ve),ue[me+(St=ar&bt)].g=ut+ve,ue[me+St].value=Ke-me-St}Ae.g=Se-ve,Ae.value=Je[ze++],R(ue,Ke+(ar>>ve),qe,Kt,Ae),ar=oe(ar,Se)}}return Ht!=2*dt[15]-1?0:lt}(y,N,O,I,re,ie)}function se(){this.value=this.g=0}function J(){this.value=this.g=0}function Q(){this.G=l(5,se),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Go,J)}function ae(y,N,O,I){t(y!=null),t(N!=null),t(2147483648>I),y.Ca=254,y.I=0,y.b=-8,y.Ka=0,y.oa=N,y.pa=O,y.Jd=N,y.Yc=O+I,y.Zc=4<=I?O+I-4+1:O,Ee(y)}function he(y,N){for(var O=0;0<N--;)O|=Ne(y,128)<<N;return O}function de(y,N){var O=he(y,N);return ne(y)?-O:O}function _e(y,N,O,I){var re,ie=0;for(t(y!=null),t(N!=null),t(4294967288>I),y.Sb=I,y.Ra=0,y.u=0,y.h=0,4<I&&(I=4),re=0;re<I;++re)ie+=N[O+re]<<8*re;y.Ra=ie,y.bb=I,y.oa=N,y.pa=O}function Y(y){for(;8<=y.u&&y.bb<y.Sb;)y.Ra>>>=8,y.Ra+=y.oa[y.pa+y.bb]<<Ko-8>>>0,++y.bb,y.u-=8;je(y)&&(y.h=1,y.u=0)}function ye(y,N){if(t(0<=N),!y.h&&N<=qs){var O=ce(y)&vs[N];return y.u+=N,Y(y),O}return y.h=1,y.u=0}function P(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ce(y){return y.Ra>>>(y.u&Ko-1)>>>0}function je(y){return t(y.bb<=y.Sb),y.h||y.bb==y.Sb&&y.u>Ko}function ke(y,N){y.u=N,y.h=je(y)}function De(y){y.u>=oo&&(t(y.u>=oo),Y(y))}function Ee(y){t(y!=null&&y.oa!=null),y.pa<y.Zc?(y.I=(y.oa[y.pa++]|y.I<<8)>>>0,y.b+=8):(t(y!=null&&y.oa!=null),y.pa<y.Yc?(y.b+=8,y.I=y.oa[y.pa++]|y.I<<8):y.Ka?y.b=0:(y.I<<=8,y.b+=8,y.Ka=1))}function ne(y){return he(y,1)}function Ne(y,N){var O=y.Ca;0>y.b&&Ee(y);var I=y.b,re=O*N>>>8,ie=(y.I>>>I>re)+0;for(ie?(O-=re,y.I-=re+1<<I>>>0):O=re+1,I=O,re=0;256<=I;)re+=8,I>>=8;return I=7^re+Il[I],y.b-=I,y.Ca=(O<<I)-1,ie}function le(y,N,O){y[N+0]=O>>24&255,y[N+1]=O>>16&255,y[N+2]=O>>8&255,y[N+3]=255&O}function xe(y,N){return y[N+0]|y[N+1]<<8}function H(y,N){return xe(y,N)|y[N+2]<<16}function W(y,N){return xe(y,N)|xe(y,N+2)<<16}function B(y,N){var O=1<<N;return t(y!=null),t(0<N),y.X=i(O),y.X==null?0:(y.Mb=32-N,y.Xa=N,1)}function ee(y,N){t(y!=null),t(N!=null),t(y.Xa==N.Xa),a(N.X,0,y.X,0,1<<N.Xa)}function X(){this.X=[],this.Xa=this.Mb=0}function ge(y,N,O,I){t(O!=null),t(I!=null);var re=O[0],ie=I[0];return re==0&&(re=(y*ie+N/2)/N),ie==0&&(ie=(N*re+y/2)/y),0>=re||0>=ie?0:(O[0]=re,I[0]=ie,1)}function be(y,N){return y+(1<<N)-1>>>N}function $e(y,N){return((4278255360&y)+(4278255360&N)>>>0&4278255360)+((16711935&y)+(16711935&N)>>>0&16711935)>>>0}function Ze(y,N){U[N]=function(O,I,re,ie,ue,me,ve){var Ae;for(Ae=0;Ae<ue;++Ae){var qe=U[y](me[ve+Ae-1],re,ie+Ae);me[ve+Ae]=$e(O[I+Ae],qe)}}}function pe(){this.ud=this.hd=this.jd=0}function V(y,N){return((4278124286&(y^N))>>>1)+(y&N)>>>0}function Le(y){return 0<=y&&256>y?y:0>y?0:255<y?255:void 0}function ft(y,N){return Le(y+(y-N+.5>>1))}function kt(y,N,O){return Math.abs(N-O)-Math.abs(y-O)}function Mt(y,N,O,I,re,ie,ue){for(I=ie[ue-1],O=0;O<re;++O)ie[ue+O]=I=$e(y[N+O],I)}function Lt(y,N,O,I,re){var ie;for(ie=0;ie<O;++ie){var ue=y[N+ie],me=ue>>8&255,ve=16711935&(ve=(ve=16711935&ue)+((me<<16)+me));I[re+ie]=(4278255360&ue)+ve>>>0}}function at(y,N){N.jd=255&y,N.hd=y>>8&255,N.ud=y>>16&255}function Nt(y,N,O,I,re,ie){var ue;for(ue=0;ue<I;++ue){var me=N[O+ue],ve=me>>>8,Ae=me,qe=255&(qe=(qe=me>>>16)+((y.jd<<24>>24)*(ve<<24>>24)>>>5));Ae=255&(Ae=(Ae+=(y.hd<<24>>24)*(ve<<24>>24)>>>5)+((y.ud<<24>>24)*(qe<<24>>24)>>>5)),re[ie+ue]=(4278255360&me)+(qe<<16)+Ae}}function Ie(y,N,O,I,re){U[N]=function(ie,ue,me,ve,Ae,qe,Je,Se,ze){for(ve=Je;ve<Se;++ve)for(Je=0;Je<ze;++Je)Ae[qe++]=re(me[I(ie[ue++])])},U[y]=function(ie,ue,me,ve,Ae,qe,Je){var Se=8>>ie.b,ze=ie.Ea,Ke=ie.K[0],lt=ie.w;if(8>Se)for(ie=(1<<ie.b)-1,lt=(1<<Se)-1;ue<me;++ue){var Xe,dt=0;for(Xe=0;Xe<ze;++Xe)Xe&ie||(dt=I(ve[Ae++])),qe[Je++]=re(Ke[dt&lt]),dt>>=Se}else U["VP8LMapColor"+O](ve,Ae,Ke,lt,qe,Je,ue,me,ze)}}function Tt(y,N,O,I,re){for(O=N+O;N<O;){var ie=y[N++];I[re++]=ie>>16&255,I[re++]=ie>>8&255,I[re++]=255&ie}}function mt(y,N,O,I,re){for(O=N+O;N<O;){var ie=y[N++];I[re++]=ie>>16&255,I[re++]=ie>>8&255,I[re++]=255&ie,I[re++]=ie>>24&255}}function Et(y,N,O,I,re){for(O=N+O;N<O;){var ie=(ue=y[N++])>>16&240|ue>>12&15,ue=240&ue|ue>>28&15;I[re++]=ie,I[re++]=ue}}function zt(y,N,O,I,re){for(O=N+O;N<O;){var ie=(ue=y[N++])>>16&248|ue>>13&7,ue=ue>>5&224|ue>>3&31;I[re++]=ie,I[re++]=ue}}function ur(y,N,O,I,re){for(O=N+O;N<O;){var ie=y[N++];I[re++]=255&ie,I[re++]=ie>>8&255,I[re++]=ie>>16&255}}function Rt(y,N,O,I,re,ie){if(ie==0)for(O=N+O;N<O;)le(I,((ie=y[N++])[0]>>24|ie[1]>>8&65280|ie[2]<<8&16711680|ie[3]<<24)>>>0),re+=32;else a(I,re,y,N,O)}function Vt(y,N){U[N][0]=U[y+"0"],U[N][1]=U[y+"1"],U[N][2]=U[y+"2"],U[N][3]=U[y+"3"],U[N][4]=U[y+"4"],U[N][5]=U[y+"5"],U[N][6]=U[y+"6"],U[N][7]=U[y+"7"],U[N][8]=U[y+"8"],U[N][9]=U[y+"9"],U[N][10]=U[y+"10"],U[N][11]=U[y+"11"],U[N][12]=U[y+"12"],U[N][13]=U[y+"13"],U[N][14]=U[y+"0"],U[N][15]=U[y+"0"]}function Qt(y){return y==Td||y==Fl||y==Zo||y==Au}function hr(){this.eb=[],this.size=this.A=this.fb=0}function pr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Be(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new hr,this.f.kb=new pr,this.sd=null}function We(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function vt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Fe(y){return alert("todo:WebPSamplerProcessPlane"),y.T}function Te(y,N){var O=y.T,I=N.ba.f.RGBA,re=I.eb,ie=I.fb+y.ka*I.A,ue=qn[N.ba.S],me=y.y,ve=y.O,Ae=y.f,qe=y.N,Je=y.ea,Se=y.W,ze=N.cc,Ke=N.dc,lt=N.Mc,Xe=N.Nc,dt=y.ka,ut=y.ka+y.T,St=y.U,bt=St+1>>1;for(dt==0?ue(me,ve,null,null,Ae,qe,Je,Se,Ae,qe,Je,Se,re,ie,null,null,St):(ue(N.ec,N.fc,me,ve,ze,Ke,lt,Xe,Ae,qe,Je,Se,re,ie-I.A,re,ie,St),++O);dt+2<ut;dt+=2)ze=Ae,Ke=qe,lt=Je,Xe=Se,qe+=y.Rc,Se+=y.Rc,ie+=2*I.A,ue(me,(ve+=2*y.fa)-y.fa,me,ve,ze,Ke,lt,Xe,Ae,qe,Je,Se,re,ie-I.A,re,ie,St);return ve+=y.fa,y.j+ut<y.o?(a(N.ec,N.fc,me,ve,St),a(N.cc,N.dc,Ae,qe,bt),a(N.Mc,N.Nc,Je,Se,bt),O--):1&ut||ue(me,ve,null,null,Ae,qe,Je,Se,Ae,qe,Je,Se,re,ie+I.A,null,null,St),O}function nt(y,N,O){var I=y.F,re=[y.J];if(I!=null){var ie=y.U,ue=N.ba.S,me=ue==wc||ue==Zo;N=N.ba.f.RGBA;var ve=[0],Ae=y.ka;ve[0]=y.T,y.Kb&&(Ae==0?--ve[0]:(--Ae,re[0]-=y.width),y.j+y.ka+y.T==y.o&&(ve[0]=y.o-y.j-Ae));var qe=N.eb;Ae=N.fb+Ae*N.A,y=ei(I,re[0],y.width,ie,ve,qe,Ae+(me?0:3),N.A),t(O==ve),y&&Qt(ue)&&Nu(qe,Ae,me,ie,ve,N.A)}return 0}function we(y){var N=y.ma,O=N.ba.S,I=11>O,re=O==Su||O==Pd||O==wc||O==Xo||O==12||Qt(O);if(N.memory=null,N.Ib=null,N.Jb=null,N.Nd=null,!Ml(N.Oa,y,re?11:12))return 0;if(re&&Qt(O)&&If(),y.da)alert("todo:use_scaling");else{if(I){if(N.Ib=Fe,y.Kb){if(O=y.U+1>>1,N.memory=i(y.U+2*O),N.memory==null)return 0;N.ec=N.memory,N.fc=0,N.cc=N.ec,N.dc=N.fc+y.U,N.Mc=N.cc,N.Nc=N.dc+O,N.Ib=Te,If()}}else alert("todo:EmitYUV");re&&(N.Jb=nt,I&&fi())}if(I&&!yg){for(y=0;256>y;++y)$v[y]=89858*(y-128)+Sn>>po,Rd[y]=-22014*(y-128)+Sn,jm[y]=-45773*(y-128),An[y]=113618*(y-128)+Sn>>po;for(y=$l;y<Yf;++y)N=76283*(y-16)+Sn>>po,Ld[y-$l]=Wa(N,255),_m[y-$l]=Wa(N+8>>4,15);yg=1}return 1}function Ve(y){var N=y.ma,O=y.U,I=y.T;return t(!(1&y.ka)),0>=O||0>=I?0:(O=N.Ib(y,N),N.Jb!=null&&N.Jb(y,N,O),N.Dc+=O,1)}function Ct(y){y.ma.memory=null}function Dt(y,N,O,I){return ye(y,8)!=47?0:(N[0]=ye(y,14)+1,O[0]=ye(y,14)+1,I[0]=ye(y,1),ye(y,3)!=0?0:!y.h)}function Wt(y,N){if(4>y)return y+1;var O=y-2>>1;return(2+(1&y)<<O)+ye(N,O)+1}function cr(y,N){return 120<N?N-120:1<=(O=((O=Qo[N-1])>>4)*y+(8-(15&O)))?O:1;var O}function Ot(y,N,O){var I=ce(O),re=y[N+=255&I].g-8;return 0<re&&(ke(O,O.u+8),I=ce(O),N+=y[N].value,N+=I&(1<<re)-1),ke(O,O.u+y[N].g),y[N].value}function $t(y,N,O){return O.g+=y.g,O.value+=y.value<<N>>>0,t(8>=O.g),y.g}function rr(y,N,O){var I=y.xc;return t((N=I==0?0:y.vc[y.md*(O>>I)+(N>>I)])<y.Wb),y.Ya[N]}function qt(y,N,O,I){var re=y.ab,ie=y.c*N,ue=y.C;N=ue+N;var me=O,ve=I;for(I=y.Ta,O=y.Ua;0<re--;){var Ae=y.gc[re],qe=ue,Je=N,Se=me,ze=ve,Ke=(ve=I,me=O,Ae.Ea);switch(t(qe<Je),t(Je<=Ae.nc),Ae.hc){case 2:ln(Se,ze,(Je-qe)*Ke,ve,me);break;case 0:var lt=qe,Xe=Je,dt=ve,ut=me,St=(Kt=Ae).Ea;lt==0&&(Cd(Se,ze,null,null,1,dt,ut),Mt(Se,ze+1,0,0,St-1,dt,ut+1),ze+=St,ut+=St,++lt);for(var bt=1<<Kt.b,ar=bt-1,Ht=be(St,Kt.b),jr=Kt.K,Kt=Kt.w+(lt>>Kt.b)*Ht;lt<Xe;){var Ir=jr,gn=Kt,vr=1;for(vu(Se,ze,dt,ut-St,1,dt,ut);vr<St;){var Yt=(vr&~ar)+bt;Yt>St&&(Yt=St),(0,bu[Ir[gn++]>>8&15])(Se,ze+ +vr,dt,ut+vr-St,Yt-vr,dt,ut+vr),vr=Yt}ze+=St,ut+=St,++lt&ar||(Kt+=Ht)}Je!=Ae.nc&&a(ve,me-Ke,ve,me+(Je-qe-1)*Ke,Ke);break;case 1:for(Ke=Se,Xe=ze,St=(Se=Ae.Ea)-(ut=Se&~(dt=(ze=1<<Ae.b)-1)),lt=be(Se,Ae.b),bt=Ae.K,Ae=Ae.w+(qe>>Ae.b)*lt;qe<Je;){for(ar=bt,Ht=Ae,jr=new pe,Kt=Xe+ut,Ir=Xe+Se;Xe<Kt;)at(ar[Ht++],jr),wu(jr,Ke,Xe,ze,ve,me),Xe+=ze,me+=ze;Xe<Ir&&(at(ar[Ht++],jr),wu(jr,Ke,Xe,St,ve,me),Xe+=St,me+=St),++qe&dt||(Ae+=lt)}break;case 3:if(Se==ve&&ze==me&&0<Ae.b){for(Xe=ve,Se=Ke=me+(Je-qe)*Ke-(ut=(Je-qe)*be(Ae.Ea,Ae.b)),ze=ve,dt=me,lt=[],ut=(St=ut)-1;0<=ut;--ut)lt[ut]=ze[dt+ut];for(ut=St-1;0<=ut;--ut)Xe[Se+ut]=lt[ut];qf(Ae,qe,Je,ve,Ke,ve,me)}else qf(Ae,qe,Je,Se,ze,ve,me)}me=I,ve=O}ve!=O&&a(I,O,me,ve,ie)}function Sr(y,N){var O=y.V,I=y.Ba+y.c*y.C,re=N-y.C;if(t(N<=y.l.o),t(16>=re),0<re){var ie=y.l,ue=y.Ta,me=y.Ua,ve=ie.width;if(qt(y,re,O,I),re=me=[me],t((O=y.C)<(I=N)),t(ie.v<ie.va),I>ie.o&&(I=ie.o),O<ie.j){var Ae=ie.j-O;O=ie.j,re[0]+=Ae*ve}if(O>=I?O=0:(re[0]+=4*ie.v,ie.ka=O-ie.j,ie.U=ie.va-ie.v,ie.T=I-O,O=1),O){if(me=me[0],11>(O=y.ca).S){var qe=O.f.RGBA,Je=(I=O.S,re=ie.U,ie=ie.T,Ae=qe.eb,qe.A),Se=ie;for(qe=qe.fb+y.Ma*qe.A;0<Se--;){var ze=ue,Ke=me,lt=re,Xe=Ae,dt=qe;switch(I){case as:ju(ze,Ke,lt,Xe,dt);break;case Su:lo(ze,Ke,lt,Xe,dt);break;case Td:lo(ze,Ke,lt,Xe,dt),Nu(Xe,dt,0,lt,1,0);break;case uo:Wo(ze,Ke,lt,Xe,dt);break;case Pd:Rt(ze,Ke,lt,Xe,dt,1);break;case Fl:Rt(ze,Ke,lt,Xe,dt,1),Nu(Xe,dt,0,lt,1,0);break;case wc:Rt(ze,Ke,lt,Xe,dt,0);break;case Zo:Rt(ze,Ke,lt,Xe,dt,0),Nu(Xe,dt,1,lt,1,0);break;case Xo:ql(ze,Ke,lt,Xe,dt);break;case Au:ql(ze,Ke,lt,Xe,dt),Qs(Xe,dt,lt,1,0);break;case Vf:Zs(ze,Ke,lt,Xe,dt);break;default:t(0)}me+=ve,qe+=Je}y.Ma+=ie}else alert("todo:EmitRescaledRowsYUVA");t(y.Ma<=O.height)}}y.C=N,t(y.C<=y.i)}function Na(y){var N;if(0<y.ua)return 0;for(N=0;N<y.Wb;++N){var O=y.Ya[N].G,I=y.Ya[N].H;if(0<O[1][I[1]+0].g||0<O[2][I[2]+0].g||0<O[3][I[3]+0].g)return 0}return 1}function Tr(y,N,O,I,re,ie){if(y.Z!=0){var ue=y.qd,me=y.rd;for(t(ho[y.Z]!=null);N<O;++N)ho[y.Z](ue,me,I,re,I,re,ie),ue=I,me=re,re+=ie;y.qd=ue,y.rd=me}}function on(y,N){var O=y.l.ma,I=O.Z==0||O.Z==1?y.l.j:y.C;if(I=y.C<I?I:y.C,t(N<=y.l.o),N>I){var re=y.l.width,ie=O.ca,ue=O.tb+re*I,me=y.V,ve=y.Ba+y.c*I,Ae=y.gc;t(y.ab==1),t(Ae[0].hc==3),Fs(Ae[0],I,N,me,ve,ie,ue),Tr(O,I,N,ie,ue,re)}y.C=y.Ma=N}function $a(y,N,O,I,re,ie,ue){var me=y.$/I,ve=y.$%I,Ae=y.m,qe=y.s,Je=O+y.$,Se=Je;re=O+I*re;var ze=O+I*ie,Ke=280+qe.ua,lt=y.Pb?me:16777216,Xe=0<qe.ua?qe.Wa:null,dt=qe.wc,ut=Je<ze?rr(qe,ve,me):null;t(y.C<ie),t(ze<=re);var St=!1;e:for(;;){for(;St||Je<ze;){var bt=0;if(me>=lt){var ar=Je-O;t((lt=y).Pb),lt.wd=lt.m,lt.xd=ar,0<lt.s.ua&&ee(lt.s.Wa,lt.s.vb),lt=me+gg}if(ve&dt||(ut=rr(qe,ve,me)),t(ut!=null),ut.Qb&&(N[Je]=ut.qb,St=!0),!St)if(De(Ae),ut.jc){bt=Ae,ar=N;var Ht=Je,jr=ut.pd[ce(bt)&Go-1];t(ut.jc),256>jr.g?(ke(bt,bt.u+jr.g),ar[Ht]=jr.value,bt=0):(ke(bt,bt.u+jr.g-256),t(256<=jr.value),bt=jr.value),bt==0&&(St=!0)}else bt=Ot(ut.G[0],ut.H[0],Ae);if(Ae.h)break;if(St||256>bt){if(!St)if(ut.nd)N[Je]=(ut.qb|bt<<8)>>>0;else{if(De(Ae),St=Ot(ut.G[1],ut.H[1],Ae),De(Ae),ar=Ot(ut.G[2],ut.H[2],Ae),Ht=Ot(ut.G[3],ut.H[3],Ae),Ae.h)break;N[Je]=(Ht<<24|St<<16|bt<<8|ar)>>>0}if(St=!1,++Je,++ve>=I&&(ve=0,++me,ue!=null&&me<=ie&&!(me%16)&&ue(y,me),Xe!=null))for(;Se<Je;)bt=N[Se++],Xe.X[(506832829*bt&4294967295)>>>Xe.Mb]=bt}else if(280>bt){if(bt=Wt(bt-256,Ae),ar=Ot(ut.G[4],ut.H[4],Ae),De(Ae),ar=cr(I,ar=Wt(ar,Ae)),Ae.h)break;if(Je-O<ar||re-Je<bt)break e;for(Ht=0;Ht<bt;++Ht)N[Je+Ht]=N[Je+Ht-ar];for(Je+=bt,ve+=bt;ve>=I;)ve-=I,++me,ue!=null&&me<=ie&&!(me%16)&&ue(y,me);if(t(Je<=re),ve&dt&&(ut=rr(qe,ve,me)),Xe!=null)for(;Se<Je;)bt=N[Se++],Xe.X[(506832829*bt&4294967295)>>>Xe.Mb]=bt}else{if(!(bt<Ke))break e;for(St=bt-280,t(Xe!=null);Se<Je;)bt=N[Se++],Xe.X[(506832829*bt&4294967295)>>>Xe.Mb]=bt;bt=Je,t(!(St>>>(ar=Xe).Xa)),N[bt]=ar.X[St],St=!0}St||t(Ae.h==je(Ae))}if(y.Pb&&Ae.h&&Je<re)t(y.m.h),y.a=5,y.m=y.wd,y.$=y.xd,0<y.s.ua&&ee(y.s.vb,y.s.Wa);else{if(Ae.h)break e;ue!=null&&ue(y,me>ie?ie:me),y.a=0,y.$=Je-O}return 1}return y.a=3,0}function Pa(y){t(y!=null),y.vc=null,y.yc=null,y.Ya=null;var N=y.Wa;N!=null&&(N.X=null),y.vb=null,t(y!=null)}function ea(){var y=new sr;return y==null?null:(y.a=0,y.xb=Cu,Vt("Predictor","VP8LPredictors"),Vt("Predictor","VP8LPredictors_C"),Vt("PredictorAdd","VP8LPredictorsAdd"),Vt("PredictorAdd","VP8LPredictorsAdd_C"),ln=Lt,wu=Nt,ju=Tt,lo=mt,ql=Et,Zs=zt,Wo=ur,U.VP8LMapColor32b=Ya,U.VP8LMapColor8b=yu,y)}function hn(y,N,O,I,re){var ie=1,ue=[y],me=[N],ve=I.m,Ae=I.s,qe=null,Je=0;e:for(;;){if(O)for(;ie&&ye(ve,1);){var Se=ue,ze=me,Ke=I,lt=1,Xe=Ke.m,dt=Ke.gc[Ke.ab],ut=ye(Xe,2);if(Ke.Oc&1<<ut)ie=0;else{switch(Ke.Oc|=1<<ut,dt.hc=ut,dt.Ea=Se[0],dt.nc=ze[0],dt.K=[null],++Ke.ab,t(4>=Ke.ab),ut){case 0:case 1:dt.b=ye(Xe,3)+2,lt=hn(be(dt.Ea,dt.b),be(dt.nc,dt.b),0,Ke,dt.K),dt.K=dt.K[0];break;case 3:var St,bt=ye(Xe,8)+1,ar=16<bt?0:4<bt?1:2<bt?2:3;if(Se[0]=be(dt.Ea,ar),dt.b=ar,St=lt=hn(bt,1,0,Ke,dt.K)){var Ht,jr=bt,Kt=dt,Ir=1<<(8>>Kt.b),gn=i(Ir);if(gn==null)St=0;else{var vr=Kt.K[0],Yt=Kt.w;for(gn[0]=Kt.K[0][0],Ht=1;Ht<1*jr;++Ht)gn[Ht]=$e(vr[Yt+Ht],gn[Ht-1]);for(;Ht<4*Ir;++Ht)gn[Ht]=0;Kt.K[0]=null,Kt.K[0]=gn,St=1}}lt=St;break;case 2:break;default:t(0)}ie=lt}}if(ue=ue[0],me=me[0],ie&&ye(ve,1)&&!(ie=1<=(Je=ye(ve,4))&&11>=Je)){I.a=3;break e}var It;if(It=ie)t:{var Va,_r,Pr,Jt=I,Cr=ue,Hr=me,Oa=Je,cn=O,un=Jt.m,Ja=Jt.s,Mr=[null],Gr=1,Qa=0,dr=_c[Oa];r:for(;;){if(cn&&ye(un,1)){var Cn=ye(un,3)+2,ai=be(Cr,Cn),en=be(Hr,Cn),bs=ai*en;if(!hn(ai,en,0,Jt,Mr))break r;for(Mr=Mr[0],Ja.xc=Cn,Va=0;Va<bs;++Va){var va=Mr[Va]>>8&65535;Mr[Va]=va,va>=Gr&&(Gr=va+1)}}if(un.h)break r;for(_r=0;5>_r;++_r){var dn=ti[_r];!_r&&0<Oa&&(dn+=1<<Oa),Qa<dn&&(Qa=dn)}var ws=l(Gr*dr,se),Kn=Gr,Aa=l(Kn,Q);if(Aa==null)var Zr=null;else t(65536>=Kn),Zr=Aa;var ns=i(Qa);if(Zr==null||ns==null||ws==null){Jt.a=1;break r}var Wn=ws;for(Va=Pr=0;Va<Gr;++Va){var ua=Zr[Va],js=ua.G,kn=ua.H,go=0,Pi=1,En=0;for(_r=0;5>_r;++_r){dn=ti[_r],js[_r]=Wn,kn[_r]=Pr,!_r&&0<Oa&&(dn+=1<<Oa);n:{var Md,Xf=dn,Id=Jt,Eu=ns,jg=Wn,_g=Pr,qd=0,al=Id.m,Vv=ye(al,1);if(s(Eu,0,0,Xf),Vv){var Ng=ye(al,1)+1,Sg=ye(al,1),Nm=ye(al,Sg==0?1:8);Eu[Nm]=1,Ng==2&&(Eu[Nm=ye(al,8)]=1);var Pu=1}else{var Sm=i(19),Am=ye(al,4)+4;if(19<Am){Id.a=3;var Fd=0;break n}for(Md=0;Md<Am;++Md)Sm[Jo[Md]]=ye(al,3);var Zf=void 0,Tu=void 0,Ag=Id,Cg=Sm,nl=Xf,Bd=Eu,Jf=0,Ti=Ag.m,Ou=8,Cm=l(128,se);a:for(;q(Cm,0,7,Cg,19);){if(ye(Ti,1)){var kg=2+2*ye(Ti,3);if((Zf=2+ye(Ti,kg))>nl)break a}else Zf=nl;for(Tu=0;Tu<nl&&Zf--;){De(Ti);var km=Cm[0+(127&ce(Ti))];ke(Ti,Ti.u+km.g);var Ac=km.value;if(16>Ac)Bd[Tu++]=Ac,Ac!=0&&(Ou=Ac);else{var Eg=Ac==16,Em=Ac-16,Pm=xi[Em],Tm=ye(Ti,Hf[Em])+Pm;if(Tu+Tm>nl)break a;for(var Pg=Eg?Ou:0;0<Tm--;)Bd[Tu++]=Pg}}Jf=1;break a}Jf||(Ag.a=3),Pu=Jf}(Pu=Pu&&!al.h)&&(qd=q(jg,_g,8,Eu,Xf)),Pu&&qd!=0?Fd=qd:(Id.a=3,Fd=0)}if(Fd==0)break r;if(Pi&&jc[_r]==1&&(Pi=Wn[Pr].g==0),go+=Wn[Pr].g,Pr+=Fd,3>=_r){var Cc,Qf=ns[0];for(Cc=1;Cc<dn;++Cc)ns[Cc]>Qf&&(Qf=ns[Cc]);En+=Qf}}if(ua.nd=Pi,ua.Qb=0,Pi&&(ua.qb=(js[3][kn[3]+0].value<<24|js[1][kn[1]+0].value<<16|js[2][kn[2]+0].value)>>>0,go==0&&256>js[0][kn[0]+0].value&&(ua.Qb=1,ua.qb+=js[0][kn[0]+0].value<<8)),ua.jc=!ua.Qb&&6>En,ua.jc){var Ud,sl=ua;for(Ud=0;Ud<Go;++Ud){var xo=Ud,il=sl.pd[xo],$d=sl.G[0][sl.H[0]+xo];256<=$d.value?(il.g=$d.g+256,il.value=$d.value):(il.g=0,il.value=0,xo>>=$t($d,8,il),xo>>=$t(sl.G[1][sl.H[1]+xo],16,il),xo>>=$t(sl.G[2][sl.H[2]+xo],0,il),$t(sl.G[3][sl.H[3]+xo],24,il))}}}Ja.vc=Mr,Ja.Wb=Gr,Ja.Ya=Zr,Ja.yc=ws,It=1;break t}It=0}if(!(ie=It)){I.a=3;break e}if(0<Je){if(Ae.ua=1<<Je,!B(Ae.Wa,Je)){I.a=1,ie=0;break e}}else Ae.ua=0;var zd=I,Om=ue,Tg=me,Dm=zd.s,Rm=Dm.xc;if(zd.c=Om,zd.i=Tg,Dm.md=be(Om,Rm),Dm.wc=Rm==0?-1:(1<<Rm)-1,O){I.xb=vg;break e}if((qe=i(ue*me))==null){I.a=1,ie=0;break e}ie=(ie=$a(I,qe,0,ue,me,me,null))&&!ve.h;break e}return ie?(re!=null?re[0]=qe:(t(qe==null),t(O)),I.$=0,O||Pa(Ae)):Pa(Ae),ie}function ta(y,N){var O=y.c*y.i,I=O+N+16*N;return t(y.c<=N),y.V=i(I),y.V==null?(y.Ta=null,y.Ua=0,y.a=1,0):(y.Ta=y.V,y.Ua=y.Ba+O+N,1)}function gr(y,N){var O=y.C,I=N-O,re=y.V,ie=y.Ba+y.c*O;for(t(N<=y.l.o);0<I;){var ue=16<I?16:I,me=y.l.ma,ve=y.l.width,Ae=ve*ue,qe=me.ca,Je=me.tb+ve*O,Se=y.Ta,ze=y.Ua;qt(y,ue,re,ie),vc(Se,ze,qe,Je,Ae),Tr(me,O,O+ue,qe,Je,ve),I-=ue,re+=ue*y.c,O+=ue}t(O==N),y.C=y.Ma=N}function ra(){this.ub=this.yd=this.td=this.Rb=0}function ci(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function wn(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function _l(){this.Yb=function(){var y=[];return function N(O,I,re){for(var ie=re[I],ue=0;ue<ie&&(O.push(re.length>I+1?[]:0),!(re.length<I+1));ue++)N(O[ue],I+1,re)}(y,0,[3,11]),y}()}function qo(){this.jb=i(3),this.Wc=u([4,8],_l),this.Xc=u([4,17],_l)}function Ts(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function zn(){this.ld=this.La=this.dd=this.tc=0}function Vn(){this.Na=this.la=0}function to(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ro(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ys(){this.uc=this.M=this.Nb=0,this.wa=Array(new zn),this.Y=0,this.ya=Array(new ro),this.aa=0,this.l=new Sl}function Os(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Nl(){this.cb=this.a=0,this.sc="",this.m=new P,this.Od=new ra,this.Kc=new ci,this.ed=new Ts,this.Qa=new wn,this.Ic=this.$c=this.Aa=0,this.D=new Ys,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,P),this.ia=0,this.pb=l(4,to),this.Pa=new qo,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Os),this.Hd=0,this.rb=Array(new Vn),this.sb=0,this.wa=Array(new zn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ro),this.L=this.aa=0,this.gd=u([4,2],zn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Sl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Fo(){var y=new Nl;return y!=null&&(y.a=0,y.sc="OK",y.cb=0,y.Xb=0,Nn||(Nn=Ds)),y}function Kr(y,N,O){return y.a==0&&(y.a=N,y.sc=O,y.cb=0),0}function uc(y,N,O){return 3<=O&&y[N+0]==157&&y[N+1]==1&&y[N+2]==42}function hu(y,N){if(y==null)return 0;if(y.a=0,y.sc="OK",N==null)return Kr(y,2,"null VP8Io passed to VP8GetHeaders()");var O=N.data,I=N.w,re=N.ha;if(4>re)return Kr(y,7,"Truncated header.");var ie=O[I+0]|O[I+1]<<8|O[I+2]<<16,ue=y.Od;if(ue.Rb=!(1&ie),ue.td=ie>>1&7,ue.yd=ie>>4&1,ue.ub=ie>>5,3<ue.td)return Kr(y,3,"Incorrect keyframe parameters.");if(!ue.yd)return Kr(y,4,"Frame not displayable.");I+=3,re-=3;var me=y.Kc;if(ue.Rb){if(7>re)return Kr(y,7,"cannot parse picture header");if(!uc(O,I,re))return Kr(y,3,"Bad code word");me.c=16383&(O[I+4]<<8|O[I+3]),me.Td=O[I+4]>>6,me.i=16383&(O[I+6]<<8|O[I+5]),me.Ud=O[I+6]>>6,I+=7,re-=7,y.za=me.c+15>>4,y.Ub=me.i+15>>4,N.width=me.c,N.height=me.i,N.Da=0,N.j=0,N.v=0,N.va=N.width,N.o=N.height,N.da=0,N.ib=N.width,N.hb=N.height,N.U=N.width,N.T=N.height,s((ie=y.Pa).jb,0,255,ie.jb.length),t((ie=y.Qa)!=null),ie.Cb=0,ie.Bb=0,ie.Fb=1,s(ie.Zb,0,0,ie.Zb.length),s(ie.Lb,0,0,ie.Lb)}if(ue.ub>re)return Kr(y,7,"bad partition length");ae(ie=y.m,O,I,ue.ub),I+=ue.ub,re-=ue.ub,ue.Rb&&(me.Ld=ne(ie),me.Kd=ne(ie)),me=y.Qa;var ve,Ae=y.Pa;if(t(ie!=null),t(me!=null),me.Cb=ne(ie),me.Cb){if(me.Bb=ne(ie),ne(ie)){for(me.Fb=ne(ie),ve=0;4>ve;++ve)me.Zb[ve]=ne(ie)?de(ie,7):0;for(ve=0;4>ve;++ve)me.Lb[ve]=ne(ie)?de(ie,6):0}if(me.Bb)for(ve=0;3>ve;++ve)Ae.jb[ve]=ne(ie)?he(ie,8):255}else me.Bb=0;if(ie.Ka)return Kr(y,3,"cannot parse segment header");if((me=y.ed).zd=ne(ie),me.Tb=he(ie,6),me.wb=he(ie,3),me.Pc=ne(ie),me.Pc&&ne(ie)){for(Ae=0;4>Ae;++Ae)ne(ie)&&(me.vd[Ae]=de(ie,6));for(Ae=0;4>Ae;++Ae)ne(ie)&&(me.od[Ae]=de(ie,6))}if(y.L=me.Tb==0?0:me.zd?1:2,ie.Ka)return Kr(y,3,"cannot parse filter header");var qe=re;if(re=ve=I,I=ve+qe,me=qe,y.Xb=(1<<he(y.m,2))-1,qe<3*(Ae=y.Xb))O=7;else{for(ve+=3*Ae,me-=3*Ae,qe=0;qe<Ae;++qe){var Je=O[re+0]|O[re+1]<<8|O[re+2]<<16;Je>me&&(Je=me),ae(y.Jc[+qe],O,ve,Je),ve+=Je,me-=Je,re+=3}ae(y.Jc[+Ae],O,ve,me),O=ve<I?0:5}if(O!=0)return Kr(y,O,"cannot parse partitions");for(O=he(ve=y.m,7),re=ne(ve)?de(ve,4):0,I=ne(ve)?de(ve,4):0,me=ne(ve)?de(ve,4):0,Ae=ne(ve)?de(ve,4):0,ve=ne(ve)?de(ve,4):0,qe=y.Qa,Je=0;4>Je;++Je){if(qe.Cb){var Se=qe.Zb[Je];qe.Fb||(Se+=O)}else{if(0<Je){y.pb[Je]=y.pb[0];continue}Se=O}var ze=y.pb[Je];ze.Sc[0]=Od[Wa(Se+re,127)],ze.Sc[1]=Dd[Wa(Se+0,127)],ze.Eb[0]=2*Od[Wa(Se+I,127)],ze.Eb[1]=101581*Dd[Wa(Se+me,127)]>>16,8>ze.Eb[1]&&(ze.Eb[1]=8),ze.Qc[0]=Od[Wa(Se+Ae,117)],ze.Qc[1]=Dd[Wa(Se+ve,127)],ze.lc=Se+ve}if(!ue.Rb)return Kr(y,4,"Not a key frame.");for(ne(ie),ue=y.Pa,O=0;4>O;++O){for(re=0;8>re;++re)for(I=0;3>I;++I)for(me=0;11>me;++me)Ae=Ne(ie,Nc[O][re][I][me])?he(ie,8):fo[O][re][I][me],ue.Wc[O][re].Yb[I][me]=Ae;for(re=0;17>re;++re)ue.Xc[O][re]=ue.Wc[O][xg[re]]}return y.kc=ne(ie),y.kc&&(y.Bd=he(ie,8)),y.cb=1}function Ds(y,N,O,I,re,ie,ue){var me=N[re].Yb[O];for(O=0;16>re;++re){if(!Ne(y,me[O+0]))return re;for(;!Ne(y,me[O+1]);)if(me=N[++re].Yb[0],O=0,re==16)return 16;var ve=N[re+1].Yb;if(Ne(y,me[O+2])){var Ae=y,qe=0;if(Ne(Ae,(Se=me)[(Je=O)+3]))if(Ne(Ae,Se[Je+6])){for(me=0,Je=2*(qe=Ne(Ae,Se[Je+8]))+(Se=Ne(Ae,Se[Je+9+qe])),qe=0,Se=Za[Je];Se[me];++me)qe+=qe+Ne(Ae,Se[me]);qe+=3+(8<<Je)}else Ne(Ae,Se[Je+7])?(qe=7+2*Ne(Ae,165),qe+=Ne(Ae,145)):qe=5+Ne(Ae,159);else qe=Ne(Ae,Se[Je+4])?3+Ne(Ae,Se[Je+5]):2;me=ve[2]}else qe=1,me=ve[1];ve=ue+aa[re],0>(Ae=y).b&&Ee(Ae);var Je,Se=Ae.b,ze=(Je=Ae.Ca>>1)-(Ae.I>>Se)>>31;--Ae.b,Ae.Ca+=ze,Ae.Ca|=1,Ae.I-=(Je+1&ze)<<Se,ie[ve]=((qe^ze)-ze)*I[(0<re)+0]}return 16}function ao(y){var N=y.rb[y.sb-1];N.la=0,N.Na=0,s(y.zc,0,0,y.zc.length),y.ja=0}function es(y,N,O,I,re){re=y[N+O+32*I]+(re>>3),y[N+O+32*I]=-256&re?0>re?0:255:re}function Bo(y,N,O,I,re,ie){es(y,N,0,O,I+re),es(y,N,1,O,I+ie),es(y,N,2,O,I-ie),es(y,N,3,O,I-re)}function Vr(y){return(20091*y>>16)+y}function Uo(y,N,O,I){var re,ie=0,ue=i(16);for(re=0;4>re;++re){var me=y[N+0]+y[N+8],ve=y[N+0]-y[N+8],Ae=(35468*y[N+4]>>16)-Vr(y[N+12]),qe=Vr(y[N+4])+(35468*y[N+12]>>16);ue[ie+0]=me+qe,ue[ie+1]=ve+Ae,ue[ie+2]=ve-Ae,ue[ie+3]=me-qe,ie+=4,N++}for(re=ie=0;4>re;++re)me=(y=ue[ie+0]+4)+ue[ie+8],ve=y-ue[ie+8],Ae=(35468*ue[ie+4]>>16)-Vr(ue[ie+12]),es(O,I,0,0,me+(qe=Vr(ue[ie+4])+(35468*ue[ie+12]>>16))),es(O,I,1,0,ve+Ae),es(O,I,2,0,ve-Ae),es(O,I,3,0,me-qe),ie++,I+=32}function mu(y,N,O,I){var re=y[N+0]+4,ie=35468*y[N+4]>>16,ue=Vr(y[N+4]),me=35468*y[N+1]>>16;Bo(O,I,0,re+ue,y=Vr(y[N+1]),me),Bo(O,I,1,re+ie,y,me),Bo(O,I,2,re-ie,y,me),Bo(O,I,3,re-ue,y,me)}function dc(y,N,O,I,re){Uo(y,N,O,I),re&&Uo(y,N+16,O,I+4)}function no(y,N,O,I){Yo(y,N+0,O,I,1),Yo(y,N+32,O,I+128,1)}function Xs(y,N,O,I){var re;for(y=y[N+0]+4,re=0;4>re;++re)for(N=0;4>N;++N)es(O,I,N,re,y)}function fc(y,N,O,I){y[N+0]&&Br(y,N+0,O,I),y[N+16]&&Br(y,N+16,O,I+4),y[N+32]&&Br(y,N+32,O,I+128),y[N+48]&&Br(y,N+48,O,I+128+4)}function ki(y,N,O,I){var re,ie=i(16);for(re=0;4>re;++re){var ue=y[N+0+re]+y[N+12+re],me=y[N+4+re]+y[N+8+re],ve=y[N+4+re]-y[N+8+re],Ae=y[N+0+re]-y[N+12+re];ie[0+re]=ue+me,ie[8+re]=ue-me,ie[4+re]=Ae+ve,ie[12+re]=Ae-ve}for(re=0;4>re;++re)ue=(y=ie[0+4*re]+3)+ie[3+4*re],me=ie[1+4*re]+ie[2+4*re],ve=ie[1+4*re]-ie[2+4*re],Ae=y-ie[3+4*re],O[I+0]=ue+me>>3,O[I+16]=Ae+ve>>3,O[I+32]=ue-me>>3,O[I+48]=Ae-ve>>3,I+=64}function so(y,N,O){var I,re=N-32,ie=In,ue=255-y[re-1];for(I=0;I<O;++I){var me,ve=ie,Ae=ue+y[N-1];for(me=0;me<O;++me)y[N+me]=ve[Ae+y[re+me]];N+=32}}function Al(y,N){so(y,N,4)}function Cl(y,N){so(y,N,8)}function hc(y,N){so(y,N,16)}function pu(y,N){var O;for(O=0;16>O;++O)a(y,N+32*O,y,N-32,16)}function $o(y,N){var O;for(O=16;0<O;--O)s(y,N,y[N-1],16),N+=32}function Mn(y,N,O){var I;for(I=0;16>I;++I)s(N,O+32*I,y,16)}function ui(y,N){var O,I=16;for(O=0;16>O;++O)I+=y[N-1+32*O]+y[N+O-32];Mn(I>>5,y,N)}function kl(y,N){var O,I=8;for(O=0;16>O;++O)I+=y[N-1+32*O];Mn(I>>4,y,N)}function Rs(y,N){var O,I=8;for(O=0;16>O;++O)I+=y[N+O-32];Mn(I>>4,y,N)}function di(y,N){Mn(128,y,N)}function $(y,N,O){return y+2*N+O+2>>2}function Pe(y,N){var O,I=N-32;for(I=new Uint8Array([$(y[I-1],y[I+0],y[I+1]),$(y[I+0],y[I+1],y[I+2]),$(y[I+1],y[I+2],y[I+3]),$(y[I+2],y[I+3],y[I+4])]),O=0;4>O;++O)a(y,N+32*O,I,0,I.length)}function it(y,N){var O=y[N-1],I=y[N-1+32],re=y[N-1+64],ie=y[N-1+96];le(y,N+0,16843009*$(y[N-1-32],O,I)),le(y,N+32,16843009*$(O,I,re)),le(y,N+64,16843009*$(I,re,ie)),le(y,N+96,16843009*$(re,ie,ie))}function ht(y,N){var O,I=4;for(O=0;4>O;++O)I+=y[N+O-32]+y[N-1+32*O];for(I>>=3,O=0;4>O;++O)s(y,N+32*O,I,4)}function ct(y,N){var O=y[N-1+0],I=y[N-1+32],re=y[N-1+64],ie=y[N-1-32],ue=y[N+0-32],me=y[N+1-32],ve=y[N+2-32],Ae=y[N+3-32];y[N+0+96]=$(I,re,y[N-1+96]),y[N+1+96]=y[N+0+64]=$(O,I,re),y[N+2+96]=y[N+1+64]=y[N+0+32]=$(ie,O,I),y[N+3+96]=y[N+2+64]=y[N+1+32]=y[N+0+0]=$(ue,ie,O),y[N+3+64]=y[N+2+32]=y[N+1+0]=$(me,ue,ie),y[N+3+32]=y[N+2+0]=$(ve,me,ue),y[N+3+0]=$(Ae,ve,me)}function et(y,N){var O=y[N+1-32],I=y[N+2-32],re=y[N+3-32],ie=y[N+4-32],ue=y[N+5-32],me=y[N+6-32],ve=y[N+7-32];y[N+0+0]=$(y[N+0-32],O,I),y[N+1+0]=y[N+0+32]=$(O,I,re),y[N+2+0]=y[N+1+32]=y[N+0+64]=$(I,re,ie),y[N+3+0]=y[N+2+32]=y[N+1+64]=y[N+0+96]=$(re,ie,ue),y[N+3+32]=y[N+2+64]=y[N+1+96]=$(ie,ue,me),y[N+3+64]=y[N+2+96]=$(ue,me,ve),y[N+3+96]=$(me,ve,ve)}function Pt(y,N){var O=y[N-1+0],I=y[N-1+32],re=y[N-1+64],ie=y[N-1-32],ue=y[N+0-32],me=y[N+1-32],ve=y[N+2-32],Ae=y[N+3-32];y[N+0+0]=y[N+1+64]=ie+ue+1>>1,y[N+1+0]=y[N+2+64]=ue+me+1>>1,y[N+2+0]=y[N+3+64]=me+ve+1>>1,y[N+3+0]=ve+Ae+1>>1,y[N+0+96]=$(re,I,O),y[N+0+64]=$(I,O,ie),y[N+0+32]=y[N+1+96]=$(O,ie,ue),y[N+1+32]=y[N+2+96]=$(ie,ue,me),y[N+2+32]=y[N+3+96]=$(ue,me,ve),y[N+3+32]=$(me,ve,Ae)}function Ft(y,N){var O=y[N+0-32],I=y[N+1-32],re=y[N+2-32],ie=y[N+3-32],ue=y[N+4-32],me=y[N+5-32],ve=y[N+6-32],Ae=y[N+7-32];y[N+0+0]=O+I+1>>1,y[N+1+0]=y[N+0+64]=I+re+1>>1,y[N+2+0]=y[N+1+64]=re+ie+1>>1,y[N+3+0]=y[N+2+64]=ie+ue+1>>1,y[N+0+32]=$(O,I,re),y[N+1+32]=y[N+0+96]=$(I,re,ie),y[N+2+32]=y[N+1+96]=$(re,ie,ue),y[N+3+32]=y[N+2+96]=$(ie,ue,me),y[N+3+64]=$(ue,me,ve),y[N+3+96]=$(me,ve,Ae)}function yt(y,N){var O=y[N-1+0],I=y[N-1+32],re=y[N-1+64],ie=y[N-1+96];y[N+0+0]=O+I+1>>1,y[N+2+0]=y[N+0+32]=I+re+1>>1,y[N+2+32]=y[N+0+64]=re+ie+1>>1,y[N+1+0]=$(O,I,re),y[N+3+0]=y[N+1+32]=$(I,re,ie),y[N+3+32]=y[N+1+64]=$(re,ie,ie),y[N+3+64]=y[N+2+64]=y[N+0+96]=y[N+1+96]=y[N+2+96]=y[N+3+96]=ie}function or(y,N){var O=y[N-1+0],I=y[N-1+32],re=y[N-1+64],ie=y[N-1+96],ue=y[N-1-32],me=y[N+0-32],ve=y[N+1-32],Ae=y[N+2-32];y[N+0+0]=y[N+2+32]=O+ue+1>>1,y[N+0+32]=y[N+2+64]=I+O+1>>1,y[N+0+64]=y[N+2+96]=re+I+1>>1,y[N+0+96]=ie+re+1>>1,y[N+3+0]=$(me,ve,Ae),y[N+2+0]=$(ue,me,ve),y[N+1+0]=y[N+3+32]=$(O,ue,me),y[N+1+32]=y[N+3+64]=$(I,O,ue),y[N+1+64]=y[N+3+96]=$(re,I,O),y[N+1+96]=$(ie,re,I)}function wr(y,N){var O;for(O=0;8>O;++O)a(y,N+32*O,y,N-32,8)}function Wr(y,N){var O;for(O=0;8>O;++O)s(y,N,y[N-1],8),N+=32}function ga(y,N,O){var I;for(I=0;8>I;++I)s(N,O+32*I,y,8)}function Fr(y,N){var O,I=8;for(O=0;8>O;++O)I+=y[N+O-32]+y[N-1+32*O];ga(I>>4,y,N)}function kr(y,N){var O,I=4;for(O=0;8>O;++O)I+=y[N+O-32];ga(I>>3,y,N)}function ha(y,N){var O,I=4;for(O=0;8>O;++O)I+=y[N-1+32*O];ga(I>>3,y,N)}function Or(y,N){ga(128,y,N)}function Bt(y,N,O){var I=y[N-O],re=y[N+0],ie=3*(re-I)+zf[1020+y[N-2*O]-y[N+O]],ue=bc[112+(ie+4>>3)];y[N-O]=In[255+I+bc[112+(ie+3>>3)]],y[N+0]=In[255+re-ue]}function xa(y,N,O,I){var re=y[N+0],ie=y[N+O];return gi[255+y[N-2*O]-y[N-O]]>I||gi[255+ie-re]>I}function ma(y,N,O,I){return 4*gi[255+y[N-O]-y[N+0]]+gi[255+y[N-2*O]-y[N+O]]<=I}function Ls(y,N,O,I,re){var ie=y[N-3*O],ue=y[N-2*O],me=y[N-O],ve=y[N+0],Ae=y[N+O],qe=y[N+2*O],Je=y[N+3*O];return 4*gi[255+me-ve]+gi[255+ue-Ae]>I?0:gi[255+y[N-4*O]-ie]<=re&&gi[255+ie-ue]<=re&&gi[255+ue-me]<=re&&gi[255+Je-qe]<=re&&gi[255+qe-Ae]<=re&&gi[255+Ae-ve]<=re}function pa(y,N,O,I){var re=2*I+1;for(I=0;16>I;++I)ma(y,N+I,O,re)&&Bt(y,N+I,O)}function jn(y,N,O,I){var re=2*I+1;for(I=0;16>I;++I)ma(y,N+I*O,1,re)&&Bt(y,N+I*O,1)}function Ms(y,N,O,I){var re;for(re=3;0<re;--re)pa(y,N+=4*O,O,I)}function Rf(y,N,O,I){var re;for(re=3;0<re;--re)jn(y,N+=4,O,I)}function zo(y,N,O,I,re,ie,ue,me){for(ie=2*ie+1;0<re--;){if(Ls(y,N,O,ie,ue))if(xa(y,N,O,me))Bt(y,N,O);else{var ve=y,Ae=N,qe=O,Je=ve[Ae-2*qe],Se=ve[Ae-qe],ze=ve[Ae+0],Ke=ve[Ae+qe],lt=ve[Ae+2*qe],Xe=27*(ut=zf[1020+3*(ze-Se)+zf[1020+Je-Ke]])+63>>7,dt=18*ut+63>>7,ut=9*ut+63>>7;ve[Ae-3*qe]=In[255+ve[Ae-3*qe]+ut],ve[Ae-2*qe]=In[255+Je+dt],ve[Ae-qe]=In[255+Se+Xe],ve[Ae+0]=In[255+ze-Xe],ve[Ae+qe]=In[255+Ke-dt],ve[Ae+2*qe]=In[255+lt-ut]}N+=I}}function Vo(y,N,O,I,re,ie,ue,me){for(ie=2*ie+1;0<re--;){if(Ls(y,N,O,ie,ue))if(xa(y,N,O,me))Bt(y,N,O);else{var ve=y,Ae=N,qe=O,Je=ve[Ae-qe],Se=ve[Ae+0],ze=ve[Ae+qe],Ke=bc[112+(4+(lt=3*(Se-Je))>>3)],lt=bc[112+(lt+3>>3)],Xe=Ke+1>>1;ve[Ae-2*qe]=In[255+ve[Ae-2*qe]+Xe],ve[Ae-qe]=In[255+Je+lt],ve[Ae+0]=In[255+Se-Ke],ve[Ae+qe]=In[255+ze-Xe]}N+=I}}function gu(y,N,O,I,re,ie){zo(y,N,O,1,16,I,re,ie)}function Lf(y,N,O,I,re,ie){zo(y,N,1,O,16,I,re,ie)}function mc(y,N,O,I,re,ie){var ue;for(ue=3;0<ue;--ue)Vo(y,N+=4*O,O,1,16,I,re,ie)}function Mf(y,N,O,I,re,ie){var ue;for(ue=3;0<ue;--ue)Vo(y,N+=4,1,O,16,I,re,ie)}function k(y,N,O,I,re,ie,ue,me){zo(y,N,re,1,8,ie,ue,me),zo(O,I,re,1,8,ie,ue,me)}function te(y,N,O,I,re,ie,ue,me){zo(y,N,1,re,8,ie,ue,me),zo(O,I,1,re,8,ie,ue,me)}function Ce(y,N,O,I,re,ie,ue,me){Vo(y,N+4*re,re,1,8,ie,ue,me),Vo(O,I+4*re,re,1,8,ie,ue,me)}function Me(y,N,O,I,re,ie,ue,me){Vo(y,N+4,1,re,8,ie,ue,me),Vo(O,I+4,1,re,8,ie,ue,me)}function Ge(){this.ba=new Be,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new vt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function pt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function jt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Gt(){this.ua=0,this.Wa=new X,this.vb=new X,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Q,this.yc=new se}function sr(){this.xb=this.a=0,this.l=new Sl,this.ca=new Be,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Z,this.Pb=0,this.wd=new Z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Gt,this.ab=0,this.gc=l(4,jt),this.Oc=0}function xr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Sl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ar(y,N,O,I,re,ie,ue){for(y=y==null?0:y[N+0],N=0;N<ue;++N)re[ie+N]=y+O[I+N]&255,y=re[ie+N]}function Xr(y,N,O,I,re,ie,ue){var me;if(y==null)Ar(null,null,O,I,re,ie,ue);else for(me=0;me<ue;++me)re[ie+me]=y[N+me]+O[I+me]&255}function za(y,N,O,I,re,ie,ue){if(y==null)Ar(null,null,O,I,re,ie,ue);else{var me,ve=y[N+0],Ae=ve,qe=ve;for(me=0;me<ue;++me)Ae=qe+(ve=y[N+me])-Ae,qe=O[I+me]+(-256&Ae?0>Ae?0:255:Ae)&255,Ae=ve,re[ie+me]=qe}}function mn(y,N,O,I){var re=N.width,ie=N.o;if(t(y!=null&&N!=null),0>O||0>=I||O+I>ie)return null;if(!y.Cc){if(y.ga==null){var ue;if(y.ga=new xr,(ue=y.ga==null)||(ue=N.width*N.o,t(y.Gb.length==0),y.Gb=i(ue),y.Uc=0,y.Gb==null?ue=0:(y.mb=y.Gb,y.nb=y.Uc,y.rc=null,ue=1),ue=!ue),!ue){ue=y.ga;var me=y.Fa,ve=y.P,Ae=y.qc,qe=y.mb,Je=y.nb,Se=ve+1,ze=Ae-1,Ke=ue.l;if(t(me!=null&&qe!=null&&N!=null),ho[0]=null,ho[1]=Ar,ho[2]=Xr,ho[3]=za,ue.ca=qe,ue.tb=Je,ue.c=N.width,ue.i=N.height,t(0<ue.c&&0<ue.i),1>=Ae)N=0;else if(ue.$a=3&me[ve+0],ue.Z=me[ve+0]>>2&3,ue.Lc=me[ve+0]>>4&3,ve=me[ve+0]>>6&3,0>ue.$a||1<ue.$a||4<=ue.Z||1<ue.Lc||ve)N=0;else if(Ke.put=Ve,Ke.ac=we,Ke.bc=Ct,Ke.ma=ue,Ke.width=N.width,Ke.height=N.height,Ke.Da=N.Da,Ke.v=N.v,Ke.va=N.va,Ke.j=N.j,Ke.o=N.o,ue.$a)e:{t(ue.$a==1),N=ea();t:for(;;){if(N==null){N=0;break e}if(t(ue!=null),ue.mc=N,N.c=ue.c,N.i=ue.i,N.l=ue.l,N.l.ma=ue,N.l.width=ue.c,N.l.height=ue.i,N.a=0,_e(N.m,me,Se,ze),!hn(ue.c,ue.i,1,N,null)||(N.ab==1&&N.gc[0].hc==3&&Na(N.s)?(ue.ic=1,me=N.c*N.i,N.Ta=null,N.Ua=0,N.V=i(me),N.Ba=0,N.V==null?(N.a=1,N=0):N=1):(ue.ic=0,N=ta(N,ue.c)),!N))break t;N=1;break e}ue.mc=null,N=0}else N=ze>=ue.c*ue.i;ue=!N}if(ue)return null;y.ga.Lc!=1?y.Ga=0:I=ie-O}t(y.ga!=null),t(O+I<=ie);e:{if(N=(me=y.ga).c,ie=me.l.o,me.$a==0){if(Se=y.rc,ze=y.Vc,Ke=y.Fa,ve=y.P+1+O*N,Ae=y.mb,qe=y.nb+O*N,t(ve<=y.P+y.qc),me.Z!=0)for(t(ho[me.Z]!=null),ue=0;ue<I;++ue)ho[me.Z](Se,ze,Ke,ve,Ae,qe,N),Se=Ae,ze=qe,qe+=N,ve+=N;else for(ue=0;ue<I;++ue)a(Ae,qe,Ke,ve,N),Se=Ae,ze=qe,qe+=N,ve+=N;y.rc=Se,y.Vc=ze}else{if(t(me.mc!=null),N=O+I,t((ue=me.mc)!=null),t(N<=ue.i),ue.C>=N)N=1;else if(me.ic||fi(),me.ic){me=ue.V,Se=ue.Ba,ze=ue.c;var lt=ue.i,Xe=(Ke=1,ve=ue.$/ze,Ae=ue.$%ze,qe=ue.m,Je=ue.s,ue.$),dt=ze*lt,ut=ze*N,St=Je.wc,bt=Xe<ut?rr(Je,Ae,ve):null;t(Xe<=dt),t(N<=lt),t(Na(Je));t:for(;;){for(;!qe.h&&Xe<ut;){if(Ae&St||(bt=rr(Je,Ae,ve)),t(bt!=null),De(qe),256>(lt=Ot(bt.G[0],bt.H[0],qe)))me[Se+Xe]=lt,++Xe,++Ae>=ze&&(Ae=0,++ve<=N&&!(ve%16)&&on(ue,ve));else{if(!(280>lt)){Ke=0;break t}lt=Wt(lt-256,qe);var ar,Ht=Ot(bt.G[4],bt.H[4],qe);if(De(qe),!(Xe>=(Ht=cr(ze,Ht=Wt(Ht,qe)))&&dt-Xe>=lt)){Ke=0;break t}for(ar=0;ar<lt;++ar)me[Se+Xe+ar]=me[Se+Xe+ar-Ht];for(Xe+=lt,Ae+=lt;Ae>=ze;)Ae-=ze,++ve<=N&&!(ve%16)&&on(ue,ve);Xe<ut&&Ae&St&&(bt=rr(Je,Ae,ve))}t(qe.h==je(qe))}on(ue,ve>N?N:ve);break t}!Ke||qe.h&&Xe<dt?(Ke=0,ue.a=qe.h?5:3):ue.$=Xe,N=Ke}else N=$a(ue,ue.V,ue.Ba,ue.c,ue.i,N,gr);if(!N){I=0;break e}}O+I>=ie&&(y.Cc=1),I=1}if(!I)return null;if(y.Cc&&((I=y.ga)!=null&&(I.mc=null),y.ga=null,0<y.Ga))return alert("todo:WebPDequantizeLevels"),null}return y.nb+O*re}function Sa(y,N,O,I,re,ie){for(;0<re--;){var ue,me=y,ve=N+(O?1:0),Ae=y,qe=N+(O?0:3);for(ue=0;ue<I;++ue){var Je=Ae[qe+4*ue];Je!=255&&(Je*=32897,me[ve+4*ue+0]=me[ve+4*ue+0]*Je>>23,me[ve+4*ue+1]=me[ve+4*ue+1]*Je>>23,me[ve+4*ue+2]=me[ve+4*ue+2]*Je>>23)}N+=ie}}function _n(y,N,O,I,re){for(;0<I--;){var ie;for(ie=0;ie<O;++ie){var ue=y[N+2*ie+0],me=15&(Ae=y[N+2*ie+1]),ve=4369*me,Ae=(240&Ae|Ae>>4)*ve>>16;y[N+2*ie+0]=(240&ue|ue>>4)*ve>>16&240|(15&ue|ue<<4)*ve>>16>>4&15,y[N+2*ie+1]=240&Ae|me}N+=re}}function pn(y,N,O,I,re,ie,ue,me){var ve,Ae,qe=255;for(Ae=0;Ae<re;++Ae){for(ve=0;ve<I;++ve){var Je=y[N+ve];ie[ue+4*ve]=Je,qe&=Je}N+=O,ue+=me}return qe!=255}function Hn(y,N,O,I,re){var ie;for(ie=0;ie<re;++ie)O[I+ie]=y[N+ie]>>8}function fi(){Nu=Sa,Qs=_n,ei=pn,vc=Hn}function Is(y,N,O){U[y]=function(I,re,ie,ue,me,ve,Ae,qe,Je,Se,ze,Ke,lt,Xe,dt,ut,St){var bt,ar=St-1>>1,Ht=me[ve+0]|Ae[qe+0]<<16,jr=Je[Se+0]|ze[Ke+0]<<16;t(I!=null);var Kt=3*Ht+jr+131074>>2;for(N(I[re+0],255&Kt,Kt>>16,lt,Xe),ie!=null&&(Kt=3*jr+Ht+131074>>2,N(ie[ue+0],255&Kt,Kt>>16,dt,ut)),bt=1;bt<=ar;++bt){var Ir=me[ve+bt]|Ae[qe+bt]<<16,gn=Je[Se+bt]|ze[Ke+bt]<<16,vr=Ht+Ir+jr+gn+524296,Yt=vr+2*(Ir+jr)>>3;Kt=Yt+Ht>>1,Ht=(vr=vr+2*(Ht+gn)>>3)+Ir>>1,N(I[re+2*bt-1],255&Kt,Kt>>16,lt,Xe+(2*bt-1)*O),N(I[re+2*bt-0],255&Ht,Ht>>16,lt,Xe+(2*bt-0)*O),ie!=null&&(Kt=vr+jr>>1,Ht=Yt+gn>>1,N(ie[ue+2*bt-1],255&Kt,Kt>>16,dt,ut+(2*bt-1)*O),N(ie[ue+2*bt+0],255&Ht,Ht>>16,dt,ut+(2*bt+0)*O)),Ht=Ir,jr=gn}1&St||(Kt=3*Ht+jr+131074>>2,N(I[re+St-1],255&Kt,Kt>>16,lt,Xe+(St-1)*O),ie!=null&&(Kt=3*jr+Ht+131074>>2,N(ie[ue+St-1],255&Kt,Kt>>16,dt,ut+(St-1)*O)))}}function If(){qn[as]=tl,qn[Su]=mo,qn[uo]=Ul,qn[Pd]=Gf,qn[wc]=Kf,qn[Xo]=ku,qn[Vf]=Wf,qn[Td]=mo,qn[Fl]=Gf,qn[Zo]=Kf,qn[Au]=ku}function El(y){return y&-16384?0>y?0:255:y>>Uv}function Ei(y,N){return El((19077*y>>8)+(26149*N>>8)-14234)}function Pl(y,N,O){return El((19077*y>>8)-(6419*N>>8)-(13320*O>>8)+8708)}function Tl(y,N){return El((19077*y>>8)+(33050*N>>8)-17685)}function Ol(y,N,O,I,re){I[re+0]=Ei(y,O),I[re+1]=Pl(y,N,O),I[re+2]=Tl(y,N)}function Dl(y,N,O,I,re){I[re+0]=Tl(y,N),I[re+1]=Pl(y,N,O),I[re+2]=Ei(y,O)}function Gn(y,N,O,I,re){var ie=Pl(y,N,O);N=ie<<3&224|Tl(y,N)>>3,I[re+0]=248&Ei(y,O)|ie>>5,I[re+1]=N}function Rl(y,N,O,I,re){var ie=240&Tl(y,N)|15;I[re+0]=240&Ei(y,O)|Pl(y,N,O)>>4,I[re+1]=ie}function hi(y,N,O,I,re){I[re+0]=255,Ol(y,N,O,I,re+1)}function Sd(y,N,O,I,re){Dl(y,N,O,I,re),I[re+3]=255}function Ad(y,N,O,I,re){Ol(y,N,O,I,re),I[re+3]=255}function Wa(y,N){return 0>y?0:y>N?N:y}function io(y,N,O){U[y]=function(I,re,ie,ue,me,ve,Ae,qe,Je){for(var Se=qe+(-2&Je)*O;qe!=Se;)N(I[re+0],ie[ue+0],me[ve+0],Ae,qe),N(I[re+1],ie[ue+0],me[ve+0],Ae,qe+O),re+=2,++ue,++ve,qe+=2*O;1&Je&&N(I[re+0],ie[ue+0],me[ve+0],Ae,qe)}}function pc(y,N,O){return O==0?y==0?N==0?6:5:N==0?4:0:O}function Ll(y,N,O,I,re){switch(y>>>30){case 3:Yo(N,O,I,re,0);break;case 2:Js(N,O,I,re);break;case 1:Br(N,O,I,re)}}function ts(y,N){var O,I,re=N.M,ie=N.Nb,ue=y.oc,me=y.pc+40,ve=y.oc,Ae=y.pc+584,qe=y.oc,Je=y.pc+600;for(O=0;16>O;++O)ue[me+32*O-1]=129;for(O=0;8>O;++O)ve[Ae+32*O-1]=129,qe[Je+32*O-1]=129;for(0<re?ue[me-1-32]=ve[Ae-1-32]=qe[Je-1-32]=129:(s(ue,me-32-1,127,21),s(ve,Ae-32-1,127,9),s(qe,Je-32-1,127,9)),I=0;I<y.za;++I){var Se=N.ya[N.aa+I];if(0<I){for(O=-1;16>O;++O)a(ue,me+32*O-4,ue,me+32*O+12,4);for(O=-1;8>O;++O)a(ve,Ae+32*O-4,ve,Ae+32*O+4,4),a(qe,Je+32*O-4,qe,Je+32*O+4,4)}var ze=y.Gd,Ke=y.Hd+I,lt=Se.ad,Xe=Se.Hc;if(0<re&&(a(ue,me-32,ze[Ke].y,0,16),a(ve,Ae-32,ze[Ke].f,0,8),a(qe,Je-32,ze[Ke].ea,0,8)),Se.Za){var dt=ue,ut=me-32+16;for(0<re&&(I>=y.za-1?s(dt,ut,ze[Ke].y[15],4):a(dt,ut,ze[Ke+1].y,0,4)),O=0;4>O;O++)dt[ut+128+O]=dt[ut+256+O]=dt[ut+384+O]=dt[ut+0+O];for(O=0;16>O;++O,Xe<<=2)dt=ue,ut=me+Sc[O],ys[Se.Ob[O]](dt,ut),Ll(Xe,lt,16*+O,dt,ut)}else if(dt=pc(I,re,Se.Ob[0]),el[dt](ue,me),Xe!=0)for(O=0;16>O;++O,Xe<<=2)Ll(Xe,lt,16*+O,ue,me+Sc[O]);for(O=Se.Gc,dt=pc(I,re,Se.Dd),ri[dt](ve,Ae),ri[dt](qe,Je),Xe=lt,dt=ve,ut=Ae,255&(Se=0|O)&&(170&Se?rs(Xe,256,dt,ut):ca(Xe,256,dt,ut)),Se=qe,Xe=Je,255&(O>>=8)&&(170&O?rs(lt,320,Se,Xe):ca(lt,320,Se,Xe)),re<y.Ub-1&&(a(ze[Ke].y,0,ue,me+480,16),a(ze[Ke].f,0,ve,Ae+224,8),a(ze[Ke].ea,0,qe,Je+224,8)),O=8*ie*y.B,ze=y.sa,Ke=y.ta+16*I+16*ie*y.R,lt=y.qa,Se=y.ra+8*I+O,Xe=y.Ha,dt=y.Ia+8*I+O,O=0;16>O;++O)a(ze,Ke+O*y.R,ue,me+32*O,16);for(O=0;8>O;++O)a(lt,Se+O*y.B,ve,Ae+32*O,8),a(Xe,dt+O*y.B,qe,Je+32*O,8)}}function gc(y,N,O,I,re,ie,ue,me,ve){var Ae=[0],qe=[0],Je=0,Se=ve!=null?ve.kd:0,ze=ve??new pt;if(y==null||12>O)return 7;ze.data=y,ze.w=N,ze.ha=O,N=[N],O=[O],ze.gb=[ze.gb];e:{var Ke=N,lt=O,Xe=ze.gb;if(t(y!=null),t(lt!=null),t(Xe!=null),Xe[0]=0,12<=lt[0]&&!r(y,Ke[0],"RIFF")){if(r(y,Ke[0]+8,"WEBP")){Xe=3;break e}var dt=W(y,Ke[0]+4);if(12>dt||4294967286<dt){Xe=3;break e}if(Se&&dt>lt[0]-8){Xe=7;break e}Xe[0]=dt,Ke[0]+=12,lt[0]-=12}Xe=0}if(Xe!=0)return Xe;for(dt=0<ze.gb[0],O=O[0];;){e:{var ut=y;lt=N,Xe=O;var St=Ae,bt=qe,ar=Ke=[0];if((Kt=Je=[Je])[0]=0,8>Xe[0])Xe=7;else{if(!r(ut,lt[0],"VP8X")){if(W(ut,lt[0]+4)!=10){Xe=3;break e}if(18>Xe[0]){Xe=7;break e}var Ht=W(ut,lt[0]+8),jr=1+H(ut,lt[0]+12);if(2147483648<=jr*(ut=1+H(ut,lt[0]+15))){Xe=3;break e}ar!=null&&(ar[0]=Ht),St!=null&&(St[0]=jr),bt!=null&&(bt[0]=ut),lt[0]+=18,Xe[0]-=18,Kt[0]=1}Xe=0}}if(Je=Je[0],Ke=Ke[0],Xe!=0)return Xe;if(lt=!!(2&Ke),!dt&&Je)return 3;if(ie!=null&&(ie[0]=!!(16&Ke)),ue!=null&&(ue[0]=lt),me!=null&&(me[0]=0),ue=Ae[0],Ke=qe[0],Je&&lt&&ve==null){Xe=0;break}if(4>O){Xe=7;break}if(dt&&Je||!dt&&!Je&&!r(y,N[0],"ALPH")){O=[O],ze.na=[ze.na],ze.P=[ze.P],ze.Sa=[ze.Sa];e:{Ht=y,Xe=N,dt=O;var Kt=ze.gb;St=ze.na,bt=ze.P,ar=ze.Sa,jr=22,t(Ht!=null),t(dt!=null),ut=Xe[0];var Ir=dt[0];for(t(St!=null),t(ar!=null),St[0]=null,bt[0]=null,ar[0]=0;;){if(Xe[0]=ut,dt[0]=Ir,8>Ir){Xe=7;break e}var gn=W(Ht,ut+4);if(4294967286<gn){Xe=3;break e}var vr=8+gn+1&-2;if(jr+=vr,0<Kt&&jr>Kt){Xe=3;break e}if(!r(Ht,ut,"VP8 ")||!r(Ht,ut,"VP8L")){Xe=0;break e}if(Ir[0]<vr){Xe=7;break e}r(Ht,ut,"ALPH")||(St[0]=Ht,bt[0]=ut+8,ar[0]=gn),ut+=vr,Ir-=vr}}if(O=O[0],ze.na=ze.na[0],ze.P=ze.P[0],ze.Sa=ze.Sa[0],Xe!=0)break}O=[O],ze.Ja=[ze.Ja],ze.xa=[ze.xa];e:if(Kt=y,Xe=N,dt=O,St=ze.gb[0],bt=ze.Ja,ar=ze.xa,Ht=Xe[0],ut=!r(Kt,Ht,"VP8 "),jr=!r(Kt,Ht,"VP8L"),t(Kt!=null),t(dt!=null),t(bt!=null),t(ar!=null),8>dt[0])Xe=7;else{if(ut||jr){if(Kt=W(Kt,Ht+4),12<=St&&Kt>St-12){Xe=3;break e}if(Se&&Kt>dt[0]-8){Xe=7;break e}bt[0]=Kt,Xe[0]+=8,dt[0]-=8,ar[0]=jr}else ar[0]=5<=dt[0]&&Kt[Ht+0]==47&&!(Kt[Ht+4]>>5),bt[0]=dt[0];Xe=0}if(O=O[0],ze.Ja=ze.Ja[0],ze.xa=ze.xa[0],N=N[0],Xe!=0)break;if(4294967286<ze.Ja)return 3;if(me==null||lt||(me[0]=ze.xa?2:1),ue=[ue],Ke=[Ke],ze.xa){if(5>O){Xe=7;break}me=ue,Se=Ke,lt=ie,y==null||5>O?y=0:5<=O&&y[N+0]==47&&!(y[N+4]>>5)?(dt=[0],Kt=[0],St=[0],_e(bt=new Z,y,N,O),Dt(bt,dt,Kt,St)?(me!=null&&(me[0]=dt[0]),Se!=null&&(Se[0]=Kt[0]),lt!=null&&(lt[0]=St[0]),y=1):y=0):y=0}else{if(10>O){Xe=7;break}me=Ke,y==null||10>O||!uc(y,N+3,O-3)?y=0:(Se=y[N+0]|y[N+1]<<8|y[N+2]<<16,lt=16383&(y[N+7]<<8|y[N+6]),y=16383&(y[N+9]<<8|y[N+8]),1&Se||3<(Se>>1&7)||!(Se>>4&1)||Se>>5>=ze.Ja||!lt||!y?y=0:(ue&&(ue[0]=lt),me&&(me[0]=y),y=1))}if(!y||(ue=ue[0],Ke=Ke[0],Je&&(Ae[0]!=ue||qe[0]!=Ke)))return 3;ve!=null&&(ve[0]=ze,ve.offset=N-ve.w,t(4294967286>N-ve.w),t(ve.offset==ve.ha-O));break}return Xe==0||Xe==7&&Je&&ve==null?(ie!=null&&(ie[0]|=ze.na!=null&&0<ze.na.length),I!=null&&(I[0]=ue),re!=null&&(re[0]=Ke),0):Xe}function Ml(y,N,O){var I=N.width,re=N.height,ie=0,ue=0,me=I,ve=re;if(N.Da=y!=null&&0<y.Da,N.Da&&(me=y.cd,ve=y.bd,ie=y.v,ue=y.j,11>O||(ie&=-2,ue&=-2),0>ie||0>ue||0>=me||0>=ve||ie+me>I||ue+ve>re))return 0;if(N.v=ie,N.j=ue,N.va=ie+me,N.o=ue+ve,N.U=me,N.T=ve,N.da=y!=null&&0<y.da,N.da){if(!ge(me,ve,O=[y.ib],ie=[y.hb]))return 0;N.ib=O[0],N.hb=ie[0]}return N.ob=y!=null&&y.ob,N.Kb=y==null||!y.Sd,N.da&&(N.ob=N.ib<3*I/4&&N.hb<3*re/4,N.Kb=0),1}function xu(y){if(y==null)return 2;if(11>y.S){var N=y.f.RGBA;N.fb+=(y.height-1)*N.A,N.A=-N.A}else N=y.f.kb,y=y.height,N.O+=(y-1)*N.fa,N.fa=-N.fa,N.N+=(y-1>>1)*N.Ab,N.Ab=-N.Ab,N.W+=(y-1>>1)*N.Db,N.Db=-N.Db,N.F!=null&&(N.J+=(y-1)*N.lb,N.lb=-N.lb);return 0}function Ho(y,N,O,I){if(I==null||0>=y||0>=N)return 2;if(O!=null){if(O.Da){var re=O.cd,ie=O.bd,ue=-2&O.v,me=-2&O.j;if(0>ue||0>me||0>=re||0>=ie||ue+re>y||me+ie>N)return 2;y=re,N=ie}if(O.da){if(!ge(y,N,re=[O.ib],ie=[O.hb]))return 2;y=re[0],N=ie[0]}}I.width=y,I.height=N;e:{var ve=I.width,Ae=I.height;if(y=I.S,0>=ve||0>=Ae||!(y>=as&&13>y))y=2;else{if(0>=I.Rd&&I.sd==null){ue=ie=re=N=0;var qe=(me=ve*wg[y])*Ae;if(11>y||(ie=(Ae+1)/2*(N=(ve+1)/2),y==12&&(ue=(re=ve)*Ae)),(Ae=i(qe+2*ie+ue))==null){y=1;break e}I.sd=Ae,11>y?((ve=I.f.RGBA).eb=Ae,ve.fb=0,ve.A=me,ve.size=qe):((ve=I.f.kb).y=Ae,ve.O=0,ve.fa=me,ve.Fd=qe,ve.f=Ae,ve.N=0+qe,ve.Ab=N,ve.Cd=ie,ve.ea=Ae,ve.W=0+qe+ie,ve.Db=N,ve.Ed=ie,y==12&&(ve.F=Ae,ve.J=0+qe+2*ie),ve.Tc=ue,ve.lb=re)}if(N=1,re=I.S,ie=I.width,ue=I.height,re>=as&&13>re)if(11>re)y=I.f.RGBA,N&=(me=Math.abs(y.A))*(ue-1)+ie<=y.size,N&=me>=ie*wg[re],N&=y.eb!=null;else{y=I.f.kb,me=(ie+1)/2,qe=(ue+1)/2,ve=Math.abs(y.fa),Ae=Math.abs(y.Ab);var Je=Math.abs(y.Db),Se=Math.abs(y.lb),ze=Se*(ue-1)+ie;N&=ve*(ue-1)+ie<=y.Fd,N&=Ae*(qe-1)+me<=y.Cd,N=(N&=Je*(qe-1)+me<=y.Ed)&ve>=ie&Ae>=me&Je>=me,N&=y.y!=null,N&=y.f!=null,N&=y.ea!=null,re==12&&(N&=Se>=ie,N&=ze<=y.Tc,N&=y.F!=null)}else N=0;y=N?0:2}}return y!=0||O!=null&&O.fd&&(y=xu(I)),y}var Go=64,vs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],qs=24,Ko=32,oo=8,Il=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ze("Predictor0","PredictorAdd0"),U.Predictor0=function(){return 4278190080},U.Predictor1=function(y){return y},U.Predictor2=function(y,N,O){return N[O+0]},U.Predictor3=function(y,N,O){return N[O+1]},U.Predictor4=function(y,N,O){return N[O-1]},U.Predictor5=function(y,N,O){return V(V(y,N[O+1]),N[O+0])},U.Predictor6=function(y,N,O){return V(y,N[O-1])},U.Predictor7=function(y,N,O){return V(y,N[O+0])},U.Predictor8=function(y,N,O){return V(N[O-1],N[O+0])},U.Predictor9=function(y,N,O){return V(N[O+0],N[O+1])},U.Predictor10=function(y,N,O){return V(V(y,N[O-1]),V(N[O+0],N[O+1]))},U.Predictor11=function(y,N,O){var I=N[O+0];return 0>=kt(I>>24&255,y>>24&255,(N=N[O-1])>>24&255)+kt(I>>16&255,y>>16&255,N>>16&255)+kt(I>>8&255,y>>8&255,N>>8&255)+kt(255&I,255&y,255&N)?I:y},U.Predictor12=function(y,N,O){var I=N[O+0];return(Le((y>>24&255)+(I>>24&255)-((N=N[O-1])>>24&255))<<24|Le((y>>16&255)+(I>>16&255)-(N>>16&255))<<16|Le((y>>8&255)+(I>>8&255)-(N>>8&255))<<8|Le((255&y)+(255&I)-(255&N)))>>>0},U.Predictor13=function(y,N,O){var I=N[O-1];return(ft((y=V(y,N[O+0]))>>24&255,I>>24&255)<<24|ft(y>>16&255,I>>16&255)<<16|ft(y>>8&255,I>>8&255)<<8|ft(255&y,255&I))>>>0};var Cd=U.PredictorAdd0;U.PredictorAdd1=Mt,Ze("Predictor2","PredictorAdd2"),Ze("Predictor3","PredictorAdd3"),Ze("Predictor4","PredictorAdd4"),Ze("Predictor5","PredictorAdd5"),Ze("Predictor6","PredictorAdd6"),Ze("Predictor7","PredictorAdd7"),Ze("Predictor8","PredictorAdd8"),Ze("Predictor9","PredictorAdd9"),Ze("Predictor10","PredictorAdd10"),Ze("Predictor11","PredictorAdd11"),Ze("Predictor12","PredictorAdd12"),Ze("Predictor13","PredictorAdd13");var vu=U.PredictorAdd2;Ie("ColorIndexInverseTransform","MapARGB","32b",function(y){return y>>8&255},function(y){return y}),Ie("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(y){return y},function(y){return y>>8&255});var ln,qf=U.ColorIndexInverseTransform,Ya=U.MapARGB,Fs=U.VP8LColorIndexInverseTransformAlpha,yu=U.MapAlpha,bu=U.VP8LPredictorsAdd=[];bu.length=16,(U.VP8LPredictors=[]).length=16,(U.VP8LPredictorsAdd_C=[]).length=16,(U.VP8LPredictors_C=[]).length=16;var wu,ju,lo,ql,Zs,Wo,mi,Yo,Js,rs,Br,ca,Xa,Ta,co,_u,xc,Ff,mg,pg,ym,bm,Bf,pi,Nu,Qs,ei,vc,Uf=i(511),kd=i(2041),Ed=i(225),$f=i(767),yc=0,zf=kd,bc=Ed,In=$f,gi=Uf,as=0,Su=1,uo=2,Pd=3,wc=4,Xo=5,Vf=6,Td=7,Fl=8,Zo=9,Au=10,Hf=[2,3,7],xi=[3,3,11],ti=[280,256,256,256,40],jc=[0,1,1,1,0],Jo=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Qo=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],_c=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],gg=8,Od=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Dd=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Nn=null,Za=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],aa=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Bl=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],fo=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],wm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Nc=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],xg=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],el=[],ys=[],ri=[],vg=1,Cu=2,ho=[],qn=[];Is("UpsampleRgbLinePair",Ol,3),Is("UpsampleBgrLinePair",Dl,3),Is("UpsampleRgbaLinePair",Ad,4),Is("UpsampleBgraLinePair",Sd,4),Is("UpsampleArgbLinePair",hi,4),Is("UpsampleRgba4444LinePair",Rl,2),Is("UpsampleRgb565LinePair",Gn,2);var tl=U.UpsampleRgbLinePair,Ul=U.UpsampleBgrLinePair,mo=U.UpsampleRgbaLinePair,Gf=U.UpsampleBgraLinePair,Kf=U.UpsampleArgbLinePair,ku=U.UpsampleRgba4444LinePair,Wf=U.UpsampleRgb565LinePair,po=16,Sn=1<<po-1,$l=-227,Yf=482,Uv=6,yg=0,$v=i(256),An=i(256),jm=i(256),Rd=i(256),Ld=i(Yf-$l),_m=i(Yf-$l);io("YuvToRgbRow",Ol,3),io("YuvToBgrRow",Dl,3),io("YuvToRgbaRow",Ad,4),io("YuvToBgraRow",Sd,4),io("YuvToArgbRow",hi,4),io("YuvToRgba4444Row",Rl,2),io("YuvToRgb565Row",Gn,2);var Sc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],rl=[0,2,8],zv=[8,7,6,4,4,2,2,2,1,1,1,1],bg=1;this.WebPDecodeRGBA=function(y,N,O,I,re){var ie=Su,ue=new Ge,me=new Be;ue.ba=me,me.S=ie,me.width=[me.width],me.height=[me.height];var ve=me.width,Ae=me.height,qe=new We;if(qe==null||y==null)var Je=2;else t(qe!=null),Je=gc(y,N,O,qe.width,qe.height,qe.Pd,qe.Qd,qe.format,null);if(Je!=0?ve=0:(ve!=null&&(ve[0]=qe.width[0]),Ae!=null&&(Ae[0]=qe.height[0]),ve=1),ve){me.width=me.width[0],me.height=me.height[0],I!=null&&(I[0]=me.width),re!=null&&(re[0]=me.height);e:{if(I=new Sl,(re=new pt).data=y,re.w=N,re.ha=O,re.kd=1,N=[0],t(re!=null),((y=gc(re.data,re.w,re.ha,null,null,null,N,null,re))==0||y==7)&&N[0]&&(y=4),(N=y)==0){if(t(ue!=null),I.data=re.data,I.w=re.w+re.offset,I.ha=re.ha-re.offset,I.put=Ve,I.ac=we,I.bc=Ct,I.ma=ue,re.xa){if((y=ea())==null){ue=1;break e}if(function(Se,ze){var Ke=[0],lt=[0],Xe=[0];t:for(;;){if(Se==null)return 0;if(ze==null)return Se.a=2,0;if(Se.l=ze,Se.a=0,_e(Se.m,ze.data,ze.w,ze.ha),!Dt(Se.m,Ke,lt,Xe)){Se.a=3;break t}if(Se.xb=Cu,ze.width=Ke[0],ze.height=lt[0],!hn(Ke[0],lt[0],1,Se,null))break t;return 1}return t(Se.a!=0),0}(y,I)){if(I=(N=Ho(I.width,I.height,ue.Oa,ue.ba))==0){t:{I=y;r:for(;;){if(I==null){I=0;break t}if(t(I.s.yc!=null),t(I.s.Ya!=null),t(0<I.s.Wb),t((O=I.l)!=null),t((re=O.ma)!=null),I.xb!=0){if(I.ca=re.ba,I.tb=re.tb,t(I.ca!=null),!Ml(re.Oa,O,Pd)){I.a=2;break r}if(!ta(I,O.width)||O.da)break r;if((O.da||Qt(I.ca.S))&&fi(),11>I.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),I.ca.f.kb.F!=null&&fi()),I.Pb&&0<I.s.ua&&I.s.vb.X==null&&!B(I.s.vb,I.s.Wa.Xa)){I.a=1;break r}I.xb=0}if(!$a(I,I.V,I.Ba,I.c,I.i,O.o,Sr))break r;re.Dc=I.Ma,I=1;break t}t(I.a!=0),I=0}I=!I}I&&(N=y.a)}else N=y.a}else{if((y=new Fo)==null){ue=1;break e}if(y.Fa=re.na,y.P=re.P,y.qc=re.Sa,hu(y,I)){if((N=Ho(I.width,I.height,ue.Oa,ue.ba))==0){if(y.Aa=0,O=ue.Oa,t((re=y)!=null),O!=null){if(0<(ve=0>(ve=O.Md)?0:100<ve?255:255*ve/100)){for(Ae=qe=0;4>Ae;++Ae)12>(Je=re.pb[Ae]).lc&&(Je.ia=ve*zv[0>Je.lc?0:Je.lc]>>3),qe|=Je.ia;qe&&(alert("todo:VP8InitRandom"),re.ia=1)}re.Ga=O.Id,100<re.Ga?re.Ga=100:0>re.Ga&&(re.Ga=0)}(function(Se,ze){if(Se==null)return 0;if(ze==null)return Kr(Se,2,"NULL VP8Io parameter in VP8Decode().");if(!Se.cb&&!hu(Se,ze))return 0;if(t(Se.cb),ze.ac==null||ze.ac(ze)){ze.ob&&(Se.L=0);var Ke=rl[Se.L];if(Se.L==2?(Se.yb=0,Se.zb=0):(Se.yb=ze.v-Ke>>4,Se.zb=ze.j-Ke>>4,0>Se.yb&&(Se.yb=0),0>Se.zb&&(Se.zb=0)),Se.Va=ze.o+15+Ke>>4,Se.Hb=ze.va+15+Ke>>4,Se.Hb>Se.za&&(Se.Hb=Se.za),Se.Va>Se.Ub&&(Se.Va=Se.Ub),0<Se.L){var lt=Se.ed;for(Ke=0;4>Ke;++Ke){var Xe;if(Se.Qa.Cb){var dt=Se.Qa.Lb[Ke];Se.Qa.Fb||(dt+=lt.Tb)}else dt=lt.Tb;for(Xe=0;1>=Xe;++Xe){var ut=Se.gd[Ke][Xe],St=dt;if(lt.Pc&&(St+=lt.vd[0],Xe&&(St+=lt.od[0])),0<(St=0>St?0:63<St?63:St)){var bt=St;0<lt.wb&&(bt=4<lt.wb?bt>>2:bt>>1)>9-lt.wb&&(bt=9-lt.wb),1>bt&&(bt=1),ut.dd=bt,ut.tc=2*St+bt,ut.ld=40<=St?2:15<=St?1:0}else ut.tc=0;ut.La=Xe}}}Ke=0}else Kr(Se,6,"Frame setup failed"),Ke=Se.a;if(Ke=Ke==0){if(Ke){Se.$c=0,0<Se.Aa||(Se.Ic=bg);t:{Ke=Se.Ic,lt=4*(bt=Se.za);var ar=32*bt,Ht=bt+1,jr=0<Se.L?bt*(0<Se.Aa?2:1):0,Kt=(Se.Aa==2?2:1)*bt;if((ut=lt+832+(Xe=3*(16*Ke+rl[Se.L])/2*ar)+(dt=Se.Fa!=null&&0<Se.Fa.length?Se.Kc.c*Se.Kc.i:0))!=ut)Ke=0;else{if(ut>Se.Vb){if(Se.Vb=0,Se.Ec=i(ut),Se.Fc=0,Se.Ec==null){Ke=Kr(Se,1,"no memory during frame initialization.");break t}Se.Vb=ut}ut=Se.Ec,St=Se.Fc,Se.Ac=ut,Se.Bc=St,St+=lt,Se.Gd=l(ar,Os),Se.Hd=0,Se.rb=l(Ht+1,Vn),Se.sb=1,Se.wa=jr?l(jr,zn):null,Se.Y=0,Se.D.Nb=0,Se.D.wa=Se.wa,Se.D.Y=Se.Y,0<Se.Aa&&(Se.D.Y+=bt),t(!0),Se.oc=ut,Se.pc=St,St+=832,Se.ya=l(Kt,ro),Se.aa=0,Se.D.ya=Se.ya,Se.D.aa=Se.aa,Se.Aa==2&&(Se.D.aa+=bt),Se.R=16*bt,Se.B=8*bt,bt=(ar=rl[Se.L])*Se.R,ar=ar/2*Se.B,Se.sa=ut,Se.ta=St+bt,Se.qa=Se.sa,Se.ra=Se.ta+16*Ke*Se.R+ar,Se.Ha=Se.qa,Se.Ia=Se.ra+8*Ke*Se.B+ar,Se.$c=0,St+=Xe,Se.mb=dt?ut:null,Se.nb=dt?St:null,t(St+dt<=Se.Fc+Se.Vb),ao(Se),s(Se.Ac,Se.Bc,0,lt),Ke=1}}if(Ke){if(ze.ka=0,ze.y=Se.sa,ze.O=Se.ta,ze.f=Se.qa,ze.N=Se.ra,ze.ea=Se.Ha,ze.Vd=Se.Ia,ze.fa=Se.R,ze.Rc=Se.B,ze.F=null,ze.J=0,!yc){for(Ke=-255;255>=Ke;++Ke)Uf[255+Ke]=0>Ke?-Ke:Ke;for(Ke=-1020;1020>=Ke;++Ke)kd[1020+Ke]=-128>Ke?-128:127<Ke?127:Ke;for(Ke=-112;112>=Ke;++Ke)Ed[112+Ke]=-16>Ke?-16:15<Ke?15:Ke;for(Ke=-255;510>=Ke;++Ke)$f[255+Ke]=0>Ke?0:255<Ke?255:Ke;yc=1}mi=ki,Yo=dc,rs=no,Br=Xs,ca=fc,Js=mu,Xa=gu,Ta=Lf,co=k,_u=te,xc=mc,Ff=Mf,mg=Ce,pg=Me,ym=pa,bm=jn,Bf=Ms,pi=Rf,ys[0]=ht,ys[1]=Al,ys[2]=Pe,ys[3]=it,ys[4]=ct,ys[5]=Pt,ys[6]=et,ys[7]=Ft,ys[8]=or,ys[9]=yt,el[0]=ui,el[1]=hc,el[2]=pu,el[3]=$o,el[4]=kl,el[5]=Rs,el[6]=di,ri[0]=Fr,ri[1]=Cl,ri[2]=wr,ri[3]=Wr,ri[4]=ha,ri[5]=kr,ri[6]=Or,Ke=1}else Ke=0}Ke&&(Ke=function(Ir,gn){for(Ir.M=0;Ir.M<Ir.Va;++Ir.M){var vr,Yt=Ir.Jc[Ir.M&Ir.Xb],It=Ir.m,Va=Ir;for(vr=0;vr<Va.za;++vr){var _r=It,Pr=Va,Jt=Pr.Ac,Cr=Pr.Bc+4*vr,Hr=Pr.zc,Oa=Pr.ya[Pr.aa+vr];if(Pr.Qa.Bb?Oa.$b=Ne(_r,Pr.Pa.jb[0])?2+Ne(_r,Pr.Pa.jb[2]):Ne(_r,Pr.Pa.jb[1]):Oa.$b=0,Pr.kc&&(Oa.Ad=Ne(_r,Pr.Bd)),Oa.Za=!Ne(_r,145)+0,Oa.Za){var cn=Oa.Ob,un=0;for(Pr=0;4>Pr;++Pr){var Ja,Mr=Hr[0+Pr];for(Ja=0;4>Ja;++Ja){Mr=wm[Jt[Cr+Ja]][Mr];for(var Gr=Bl[Ne(_r,Mr[0])];0<Gr;)Gr=Bl[2*Gr+Ne(_r,Mr[Gr])];Mr=-Gr,Jt[Cr+Ja]=Mr}a(cn,un,Jt,Cr,4),un+=4,Hr[0+Pr]=Mr}}else Mr=Ne(_r,156)?Ne(_r,128)?1:3:Ne(_r,163)?2:0,Oa.Ob[0]=Mr,s(Jt,Cr,Mr,4),s(Hr,0,Mr,4);Oa.Dd=Ne(_r,142)?Ne(_r,114)?Ne(_r,183)?1:3:2:0}if(Va.m.Ka)return Kr(Ir,7,"Premature end-of-partition0 encountered.");for(;Ir.ja<Ir.za;++Ir.ja){if(Va=Yt,_r=(It=Ir).rb[It.sb-1],Jt=It.rb[It.sb+It.ja],vr=It.ya[It.aa+It.ja],Cr=It.kc?vr.Ad:0)_r.la=Jt.la=0,vr.Za||(_r.Na=Jt.Na=0),vr.Hc=0,vr.Gc=0,vr.ia=0;else{var Qa,dr;if(_r=Jt,Jt=Va,Cr=It.Pa.Xc,Hr=It.ya[It.aa+It.ja],Oa=It.pb[Hr.$b],Pr=Hr.ad,cn=0,un=It.rb[It.sb-1],Mr=Ja=0,s(Pr,cn,0,384),Hr.Za)var Cn=0,ai=Cr[3];else{Gr=i(16);var en=_r.Na+un.Na;if(en=Nn(Jt,Cr[1],en,Oa.Eb,0,Gr,0),_r.Na=un.Na=(0<en)+0,1<en)mi(Gr,0,Pr,cn);else{var bs=Gr[0]+3>>3;for(Gr=0;256>Gr;Gr+=16)Pr[cn+Gr]=bs}Cn=1,ai=Cr[0]}var va=15&_r.la,dn=15&un.la;for(Gr=0;4>Gr;++Gr){var ws=1&dn;for(bs=dr=0;4>bs;++bs)va=va>>1|(ws=(en=Nn(Jt,ai,en=ws+(1&va),Oa.Sc,Cn,Pr,cn))>Cn)<<7,dr=dr<<2|(3<en?3:1<en?2:Pr[cn+0]!=0),cn+=16;va>>=4,dn=dn>>1|ws<<7,Ja=(Ja<<8|dr)>>>0}for(ai=va,Cn=dn>>4,Qa=0;4>Qa;Qa+=2){for(dr=0,va=_r.la>>4+Qa,dn=un.la>>4+Qa,Gr=0;2>Gr;++Gr){for(ws=1&dn,bs=0;2>bs;++bs)en=ws+(1&va),va=va>>1|(ws=0<(en=Nn(Jt,Cr[2],en,Oa.Qc,0,Pr,cn)))<<3,dr=dr<<2|(3<en?3:1<en?2:Pr[cn+0]!=0),cn+=16;va>>=2,dn=dn>>1|ws<<5}Mr|=dr<<4*Qa,ai|=va<<4<<Qa,Cn|=(240&dn)<<Qa}_r.la=ai,un.la=Cn,Hr.Hc=Ja,Hr.Gc=Mr,Hr.ia=43690&Mr?0:Oa.ia,Cr=!(Ja|Mr)}if(0<It.L&&(It.wa[It.Y+It.ja]=It.gd[vr.$b][vr.Za],It.wa[It.Y+It.ja].La|=!Cr),Va.Ka)return Kr(Ir,7,"Premature end-of-file encountered.")}if(ao(Ir),It=gn,Va=1,vr=(Yt=Ir).D,_r=0<Yt.L&&Yt.M>=Yt.zb&&Yt.M<=Yt.Va,Yt.Aa==0)t:{if(vr.M=Yt.M,vr.uc=_r,ts(Yt,vr),Va=1,vr=(dr=Yt.D).Nb,_r=(Mr=rl[Yt.L])*Yt.R,Jt=Mr/2*Yt.B,Gr=16*vr*Yt.R,bs=8*vr*Yt.B,Cr=Yt.sa,Hr=Yt.ta-_r+Gr,Oa=Yt.qa,Pr=Yt.ra-Jt+bs,cn=Yt.Ha,un=Yt.Ia-Jt+bs,dn=(va=dr.M)==0,Ja=va>=Yt.Va-1,Yt.Aa==2&&ts(Yt,dr),dr.uc)for(ws=(en=Yt).D.M,t(en.D.uc),dr=en.yb;dr<en.Hb;++dr){Cn=dr,ai=ws;var Kn=(Aa=(En=en).D).Nb;Qa=En.R;var Aa=Aa.wa[Aa.Y+Cn],Zr=En.sa,ns=En.ta+16*Kn*Qa+16*Cn,Wn=Aa.dd,ua=Aa.tc;if(ua!=0)if(t(3<=ua),En.L==1)0<Cn&&bm(Zr,ns,Qa,ua+4),Aa.La&&pi(Zr,ns,Qa,ua),0<ai&&ym(Zr,ns,Qa,ua+4),Aa.La&&Bf(Zr,ns,Qa,ua);else{var js=En.B,kn=En.qa,go=En.ra+8*Kn*js+8*Cn,Pi=En.Ha,En=En.Ia+8*Kn*js+8*Cn;Kn=Aa.ld,0<Cn&&(Ta(Zr,ns,Qa,ua+4,Wn,Kn),_u(kn,go,Pi,En,js,ua+4,Wn,Kn)),Aa.La&&(Ff(Zr,ns,Qa,ua,Wn,Kn),pg(kn,go,Pi,En,js,ua,Wn,Kn)),0<ai&&(Xa(Zr,ns,Qa,ua+4,Wn,Kn),co(kn,go,Pi,En,js,ua+4,Wn,Kn)),Aa.La&&(xc(Zr,ns,Qa,ua,Wn,Kn),mg(kn,go,Pi,En,js,ua,Wn,Kn))}}if(Yt.ia&&alert("todo:DitherRow"),It.put!=null){if(dr=16*va,va=16*(va+1),dn?(It.y=Yt.sa,It.O=Yt.ta+Gr,It.f=Yt.qa,It.N=Yt.ra+bs,It.ea=Yt.Ha,It.W=Yt.Ia+bs):(dr-=Mr,It.y=Cr,It.O=Hr,It.f=Oa,It.N=Pr,It.ea=cn,It.W=un),Ja||(va-=Mr),va>It.o&&(va=It.o),It.F=null,It.J=null,Yt.Fa!=null&&0<Yt.Fa.length&&dr<va&&(It.J=mn(Yt,It,dr,va-dr),It.F=Yt.mb,It.F==null&&It.F.length==0)){Va=Kr(Yt,3,"Could not decode alpha data.");break t}dr<It.j&&(Mr=It.j-dr,dr=It.j,t(!(1&Mr)),It.O+=Yt.R*Mr,It.N+=Yt.B*(Mr>>1),It.W+=Yt.B*(Mr>>1),It.F!=null&&(It.J+=It.width*Mr)),dr<va&&(It.O+=It.v,It.N+=It.v>>1,It.W+=It.v>>1,It.F!=null&&(It.J+=It.v),It.ka=dr-It.j,It.U=It.va-It.v,It.T=va-dr,Va=It.put(It))}vr+1!=Yt.Ic||Ja||(a(Yt.sa,Yt.ta-_r,Cr,Hr+16*Yt.R,_r),a(Yt.qa,Yt.ra-Jt,Oa,Pr+8*Yt.B,Jt),a(Yt.Ha,Yt.Ia-Jt,cn,un+8*Yt.B,Jt))}if(!Va)return Kr(Ir,6,"Output aborted.")}return 1}(Se,ze)),ze.bc!=null&&ze.bc(ze),Ke&=1}return Ke?(Se.cb=0,Ke):0})(y,I)||(N=y.a)}}else N=y.a}N==0&&ue.Oa!=null&&ue.Oa.fd&&(N=xu(ue.ba))}ue=N}ie=ue!=0?null:11>ie?me.f.RGBA.eb:me.f.kb.y}else ie=null;return ie};var wg=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(U,oe){for(var R="",q=0;q<4;q++)R+=String.fromCharCode(U[oe++]);return R}function m(U,oe){return U[oe+0]|U[oe+1]<<8}function g(U,oe){return(U[oe+0]|U[oe+1]<<8|U[oe+2]<<16)>>>0}function v(U,oe){return(U[oe+0]|U[oe+1]<<8|U[oe+2]<<16|U[oe+3]<<24)>>>0}new d;var x=[0],j=[0],b=[],A=new d,S=e,T=function(U,oe){var R={},q=0,se=!1,J=0,Q=0;if(R.frames=[],!function(P,Z){for(var ce=0;ce<4;ce++)if(P[Z+ce]!="RIFF".charCodeAt(ce))return!0;return!1}(U,oe)){for(v(U,oe+=4),oe+=8;oe<U.length;){var ae=f(U,oe),he=v(U,oe+=4);oe+=4;var de=he+(1&he);switch(ae){case"VP8 ":case"VP8L":R.frames[q]===void 0&&(R.frames[q]={}),(ye=R.frames[q]).src_off=se?Q:oe-8,ye.src_size=J+he+8,q++,se&&(se=!1,J=0,Q=0);break;case"VP8X":(ye=R.header={}).feature_flags=U[oe];var _e=oe+4;ye.canvas_width=1+g(U,_e),_e+=3,ye.canvas_height=1+g(U,_e),_e+=3;break;case"ALPH":se=!0,J=de+8,Q=oe-8;break;case"ANIM":(ye=R.header).bgcolor=v(U,oe),_e=oe+4,ye.loop_count=m(U,_e),_e+=2;break;case"ANMF":var Y,ye;(ye=R.frames[q]={}).offset_x=2*g(U,oe),oe+=3,ye.offset_y=2*g(U,oe),oe+=3,ye.width=1+g(U,oe),oe+=3,ye.height=1+g(U,oe),oe+=3,ye.duration=g(U,oe),oe+=3,Y=U[oe++],ye.dispose=1&Y,ye.blend=Y>>1&1}ae!="ANMF"&&(oe+=de)}return R}}(S,0);T.response=S,T.rgbaoutput=!0,T.dataurl=!1;var E=T.header?T.header:null,D=T.frames?T.frames:null;if(E){E.loop_counter=E.loop_count,x=[E.canvas_height],j=[E.canvas_width];for(var L=0;L<D.length&&D[L].blend!=0;L++);}var F=D[0],z=A.WebPDecodeRGBA(S,F.src_off,F.src_size,j,x);F.rgba=z,F.imgwidth=j[0],F.imgheight=x[0];for(var M=0;M<j[0]*x[0]*4;M++)b[M]=z[M];return this.width=j,this.height=x,this.data=b,this}(function(e){var t,r,a,s,i,l,u,d,f,m=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new d,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new l,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new l,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new g(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,l=this.internal.Point,u=this.internal.Rectangle,d=this.internal.Matrix,f=new m}]);var g=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Z=P;Object.defineProperty(this,"pdf",{get:function(){return Z}});var ce=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ce},set:function(W){ce=!!W}});var je=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return je},set:function(W){je=!!W}});var ke=0;Object.defineProperty(this,"posX",{get:function(){return ke},set:function(W){isNaN(W)||(ke=W)}});var De=0;Object.defineProperty(this,"posY",{get:function(){return De},set:function(W){isNaN(W)||(De=W)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(W){var B;typeof W=="number"?B=[W,W,W,W]:((B=new Array(4))[0]=W[0],B[1]=W.length>=2?W[1]:B[0],B[2]=W.length>=3?W[2]:B[0],B[3]=W.length>=4?W[3]:B[1]),f.margin=B}});var Ee=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ee},set:function(W){Ee=W}});var ne=0;Object.defineProperty(this,"lastBreak",{get:function(){return ne},set:function(W){ne=W}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(W){Ne=W}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(W){W instanceof m&&(f=W)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(W){f.path=W}});var le=[];Object.defineProperty(this,"ctxStack",{get:function(){return le},set:function(W){le=W}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(W){var B;B=v(W),this.ctx.fillStyle=B.style,this.ctx.isFillTransparent=B.a===0,this.ctx.fillOpacity=B.a,this.pdf.setFillColor(B.r,B.g,B.b,{a:B.a}),this.pdf.setTextColor(B.r,B.g,B.b,{a:B.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(W){var B=v(W);this.ctx.strokeStyle=B.style,this.ctx.isStrokeTransparent=B.a===0,this.ctx.strokeOpacity=B.a,B.a===0?this.pdf.setDrawColor(255,255,255):(B.a,this.pdf.setDrawColor(B.r,B.g,B.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(W){["butt","round","square"].indexOf(W)!==-1&&(this.ctx.lineCap=W,this.pdf.setLineCap(W))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(W){isNaN(W)||(this.ctx.lineWidth=W,this.pdf.setLineWidth(W))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(W){["bevel","round","miter"].indexOf(W)!==-1&&(this.ctx.lineJoin=W,this.pdf.setLineJoin(W))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(W){isNaN(W)||(this.ctx.miterLimit=W,this.pdf.setMiterLimit(W))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(W){this.ctx.textBaseline=W}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(W){["right","end","center","left","start"].indexOf(W)!==-1&&(this.ctx.textAlign=W)}});var xe=null,H=null;Object.defineProperty(this,"fontFaces",{get:function(){return H},set:function(W){xe=null,H=W}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(W){var B;if(this.ctx.font=W,(B=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(W))!==null){var ee=B[1];B[2];var X=B[3],ge=B[4];B[5];var be=B[6],$e=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ge)[2];ge=Math.floor($e==="px"?parseFloat(ge)*this.pdf.internal.scaleFactor:$e==="em"?parseFloat(ge)*this.pdf.getFontSize():parseFloat(ge)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ge);var Ze=function(Nt){var Ie,Tt,mt=[],Et=Nt.trim();if(Et==="")return c2;if(Et in WC)return[WC[Et]];for(;Et!=="";){switch(Tt=null,Ie=(Et=XC(Et)).charAt(0)){case'"':case"'":Tt=aae(Et.substring(1),Ie);break;default:Tt=nae(Et)}if(Tt===null||(mt.push(Tt[0]),(Et=XC(Tt[1]))!==""&&Et.charAt(0)!==","))return c2;Et=Et.replace(/^,/,"")}return mt}(be);if(this.fontFaces){var pe=function(Nt,Ie){if(xe===null){var Tt=function(mt){var Et=[];return Object.keys(mt).forEach(function(zt){mt[zt].forEach(function(ur){var Rt=null;switch(ur){case"bold":Rt={family:zt,weight:"bold"};break;case"italic":Rt={family:zt,style:"italic"};break;case"bolditalic":Rt={family:zt,weight:"bold",style:"italic"};break;case"":case"normal":Rt={family:zt}}Rt!==null&&(Rt.ref={name:zt,style:ur},Et.push(Rt))})}),Et}(Nt.getFontList());xe=function(mt){for(var Et={},zt=0;zt<mt.length;++zt){var ur=l2(mt[zt]),Rt=ur.family,Vt=ur.stretch,Qt=ur.style,hr=ur.weight;Et[Rt]=Et[Rt]||{},Et[Rt][Vt]=Et[Rt][Vt]||{},Et[Rt][Vt][Qt]=Et[Rt][Vt][Qt]||{},Et[Rt][Vt][Qt][hr]=ur}return Et}(Tt.concat(Ie))}return xe}(this.pdf,this.fontFaces),V=Ze.map(function(Nt){return{family:Nt,stretch:"normal",weight:X,style:ee}}),Le=function(Nt,Ie,Tt){for(var mt=(Tt=Tt||{}).defaultFontFamily||"times",Et=Object.assign({},rae,Tt.genericFontFamilies||{}),zt=null,ur=null,Rt=0;Rt<Ie.length;++Rt)if(Et[(zt=l2(Ie[Rt])).family]&&(zt.family=Et[zt.family]),Nt.hasOwnProperty(zt.family)){ur=Nt[zt.family];break}if(!(ur=ur||Nt[mt]))throw new Error("Could not find a font-family for the rule '"+YC(zt)+"' and default family '"+mt+"'.");if(ur=function(Vt,Qt){if(Qt[Vt])return Qt[Vt];var hr=Fw[Vt],pr=hr<=Fw.normal?-1:1,Be=KC(Qt,xD,hr,pr);if(!Be)throw new Error("Could not find a matching font-stretch value for "+Vt);return Be}(zt.stretch,ur),ur=function(Vt,Qt){if(Qt[Vt])return Qt[Vt];for(var hr=gD[Vt],pr=0;pr<hr.length;++pr)if(Qt[hr[pr]])return Qt[hr[pr]];throw new Error("Could not find a matching font-style for "+Vt)}(zt.style,ur),!(ur=function(Vt,Qt){if(Qt[Vt])return Qt[Vt];if(Vt===400&&Qt[500])return Qt[500];if(Vt===500&&Qt[400])return Qt[400];var hr=tae[Vt],pr=KC(Qt,vD,hr,Vt<400?-1:1);if(!pr)throw new Error("Could not find a matching font-weight for value "+Vt);return pr}(zt.weight,ur)))throw new Error("Failed to resolve a font for the rule '"+YC(zt)+"'.");return ur}(pe,V);this.pdf.setFont(Le.ref.name,Le.ref.style)}else{var ft="";(X==="bold"||parseInt(X,10)>=700||ee==="bold")&&(ft="bold"),ee==="italic"&&(ft+="italic"),ft.length===0&&(ft="normal");for(var kt="",Mt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Lt=0;Lt<Ze.length;Lt++){if(this.pdf.internal.getFont(Ze[Lt],ft,{noFallback:!0,disableWarning:!0})!==void 0){kt=Ze[Lt];break}if(ft==="bolditalic"&&this.pdf.internal.getFont(Ze[Lt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)kt=Ze[Lt],ft="bold";else if(this.pdf.internal.getFont(Ze[Lt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){kt=Ze[Lt],ft="normal";break}}if(kt===""){for(var at=0;at<Ze.length;at++)if(Mt[Ze[at]]){kt=Mt[Ze[at]];break}}kt=kt===""?"Times":kt,this.pdf.setFont(kt,ft)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(W){this.ctx.globalCompositeOperation=W}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(W){this.ctx.globalAlpha=W}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(W){this.ctx.lineDashOffset=W,ye.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(W){this.ctx.lineDash=W,ye.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(W){this.ctx.ignoreClearRect=!!W}})};g.prototype.setLineDash=function(P){this.lineDash=P},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){D.call(this,"fill",!1)},g.prototype.stroke=function(){D.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(P,Z){if(isNaN(P)||isNaN(Z))throw Ra.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ce=this.ctx.transform.applyToPoint(new l(P,Z));this.path.push({type:"mt",x:ce.x,y:ce.y}),this.ctx.lastPoint=new l(P,Z)},g.prototype.closePath=function(){var P=new l(0,0),Z=0;for(Z=this.path.length-1;Z!==-1;Z--)if(this.path[Z].type==="begin"&&_a(this.path[Z+1])==="object"&&typeof this.path[Z+1].x=="number"){P=new l(this.path[Z+1].x,this.path[Z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(P.x,P.y)},g.prototype.lineTo=function(P,Z){if(isNaN(P)||isNaN(Z))throw Ra.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ce=this.ctx.transform.applyToPoint(new l(P,Z));this.path.push({type:"lt",x:ce.x,y:ce.y}),this.ctx.lastPoint=new l(ce.x,ce.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),D.call(this,null,!0)},g.prototype.quadraticCurveTo=function(P,Z,ce,je){if(isNaN(ce)||isNaN(je)||isNaN(P)||isNaN(Z))throw Ra.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ke=this.ctx.transform.applyToPoint(new l(ce,je)),De=this.ctx.transform.applyToPoint(new l(P,Z));this.path.push({type:"qct",x1:De.x,y1:De.y,x:ke.x,y:ke.y}),this.ctx.lastPoint=new l(ke.x,ke.y)},g.prototype.bezierCurveTo=function(P,Z,ce,je,ke,De){if(isNaN(ke)||isNaN(De)||isNaN(P)||isNaN(Z)||isNaN(ce)||isNaN(je))throw Ra.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ee=this.ctx.transform.applyToPoint(new l(ke,De)),ne=this.ctx.transform.applyToPoint(new l(P,Z)),Ne=this.ctx.transform.applyToPoint(new l(ce,je));this.path.push({type:"bct",x1:ne.x,y1:ne.y,x2:Ne.x,y2:Ne.y,x:Ee.x,y:Ee.y}),this.ctx.lastPoint=new l(Ee.x,Ee.y)},g.prototype.arc=function(P,Z,ce,je,ke,De){if(isNaN(P)||isNaN(Z)||isNaN(ce)||isNaN(je)||isNaN(ke))throw Ra.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(De=!!De,!this.ctx.transform.isIdentity){var Ee=this.ctx.transform.applyToPoint(new l(P,Z));P=Ee.x,Z=Ee.y;var ne=this.ctx.transform.applyToPoint(new l(0,ce)),Ne=this.ctx.transform.applyToPoint(new l(0,0));ce=Math.sqrt(Math.pow(ne.x-Ne.x,2)+Math.pow(ne.y-Ne.y,2))}Math.abs(ke-je)>=2*Math.PI&&(je=0,ke=2*Math.PI),this.path.push({type:"arc",x:P,y:Z,radius:ce,startAngle:je,endAngle:ke,counterclockwise:De})},g.prototype.arcTo=function(P,Z,ce,je,ke){throw new Error("arcTo not implemented.")},g.prototype.rect=function(P,Z,ce,je){if(isNaN(P)||isNaN(Z)||isNaN(ce)||isNaN(je))throw Ra.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,Z),this.lineTo(P+ce,Z),this.lineTo(P+ce,Z+je),this.lineTo(P,Z+je),this.lineTo(P,Z),this.lineTo(P+ce,Z),this.lineTo(P,Z)},g.prototype.fillRect=function(P,Z,ce,je){if(isNaN(P)||isNaN(Z)||isNaN(ce)||isNaN(je))throw Ra.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var ke={};this.lineCap!=="butt"&&(ke.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ke.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,Z,ce,je),this.fill(),ke.hasOwnProperty("lineCap")&&(this.lineCap=ke.lineCap),ke.hasOwnProperty("lineJoin")&&(this.lineJoin=ke.lineJoin)}},g.prototype.strokeRect=function(P,Z,ce,je){if(isNaN(P)||isNaN(Z)||isNaN(ce)||isNaN(je))throw Ra.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");j.call(this)||(this.beginPath(),this.rect(P,Z,ce,je),this.stroke())},g.prototype.clearRect=function(P,Z,ce,je){if(isNaN(P)||isNaN(Z)||isNaN(ce)||isNaN(je))throw Ra.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,Z,ce,je))},g.prototype.save=function(P){P=typeof P!="boolean"||P;for(var Z=this.pdf.internal.getCurrentPageInfo().pageNumber,ce=0;ce<this.pdf.internal.getNumberOfPages();ce++)this.pdf.setPage(ce+1),this.pdf.internal.out("q");if(this.pdf.setPage(Z),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var je=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=je}},g.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var Z=this.pdf.internal.getCurrentPageInfo().pageNumber,ce=0;ce<this.pdf.internal.getNumberOfPages();ce++)this.pdf.setPage(ce+1),this.pdf.internal.out("Q");this.pdf.setPage(Z),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(P){var Z,ce,je,ke;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))Z=0,ce=0,je=0,ke=0;else{var De=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(De!==null)Z=parseInt(De[1]),ce=parseInt(De[2]),je=parseInt(De[3]),ke=1;else if((De=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)Z=parseInt(De[1]),ce=parseInt(De[2]),je=parseInt(De[3]),ke=parseFloat(De[4]);else{if(ke=1,typeof P=="string"&&P.charAt(0)!=="#"){var Ee=new cD(P);P=Ee.ok?Ee.toHex():"#000000"}P.length===4?(Z=P.substring(1,2),Z+=Z,ce=P.substring(2,3),ce+=ce,je=P.substring(3,4),je+=je):(Z=P.substring(1,3),ce=P.substring(3,5),je=P.substring(5,7)),Z=parseInt(Z,16),ce=parseInt(ce,16),je=parseInt(je,16)}}return{r:Z,g:ce,b:je,a:ke,style:P}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},j=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(P,Z,ce,je){if(isNaN(Z)||isNaN(ce)||typeof P!="string")throw Ra.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(je=isNaN(je)?void 0:je,!x.call(this)){var ke=de(this.ctx.transform.rotation),De=this.ctx.transform.scaleX;q.call(this,{text:P,x:Z,y:ce,scale:De,angle:ke,align:this.textAlign,maxWidth:je})}},g.prototype.strokeText=function(P,Z,ce,je){if(isNaN(Z)||isNaN(ce)||typeof P!="string")throw Ra.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!j.call(this)){je=isNaN(je)?void 0:je;var ke=de(this.ctx.transform.rotation),De=this.ctx.transform.scaleX;q.call(this,{text:P,x:Z,y:ce,scale:De,renderingMode:"stroke",angle:ke,align:this.textAlign,maxWidth:je})}},g.prototype.measureText=function(P){if(typeof P!="string")throw Ra.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Z=this.pdf,ce=this.pdf.internal.scaleFactor,je=Z.internal.getFontSize(),ke=Z.getStringUnitWidth(P)*je/Z.internal.scaleFactor;return new function(De){var Ee=(De=De||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ee}}),this}({width:ke*=Math.round(96*ce/72*1e4)/1e4})},g.prototype.scale=function(P,Z){if(isNaN(P)||isNaN(Z))throw Ra.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ce=new d(P,0,0,Z,0,0);this.ctx.transform=this.ctx.transform.multiply(ce)},g.prototype.rotate=function(P){if(isNaN(P))throw Ra.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Z=new d(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},g.prototype.translate=function(P,Z){if(isNaN(P)||isNaN(Z))throw Ra.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ce=new d(1,0,0,1,P,Z);this.ctx.transform=this.ctx.transform.multiply(ce)},g.prototype.transform=function(P,Z,ce,je,ke,De){if(isNaN(P)||isNaN(Z)||isNaN(ce)||isNaN(je)||isNaN(ke)||isNaN(De))throw Ra.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ee=new d(P,Z,ce,je,ke,De);this.ctx.transform=this.ctx.transform.multiply(Ee)},g.prototype.setTransform=function(P,Z,ce,je,ke,De){P=isNaN(P)?1:P,Z=isNaN(Z)?0:Z,ce=isNaN(ce)?0:ce,je=isNaN(je)?1:je,ke=isNaN(ke)?0:ke,De=isNaN(De)?0:De,this.ctx.transform=new d(P,Z,ce,je,ke,De)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(P,Z,ce,je,ke,De,Ee,ne,Ne){var le=this.pdf.getImageProperties(P),xe=1,H=1,W=1,B=1;je!==void 0&&ne!==void 0&&(W=ne/je,B=Ne/ke,xe=le.width/je*ne/je,H=le.height/ke*Ne/ke),De===void 0&&(De=Z,Ee=ce,Z=0,ce=0),je!==void 0&&ne===void 0&&(ne=je,Ne=ke),je===void 0&&ne===void 0&&(ne=le.width,Ne=le.height);for(var ee,X=this.ctx.transform.decompose(),ge=de(X.rotate.shx),be=new d,$e=(be=(be=(be=be.multiply(X.translate)).multiply(X.skew)).multiply(X.scale)).applyToRectangle(new u(De-Z*W,Ee-ce*B,je*xe,ke*H)),Ze=A.call(this,$e),pe=[],V=0;V<Ze.length;V+=1)pe.indexOf(Ze[V])===-1&&pe.push(Ze[V]);if(E(pe),this.autoPaging)for(var Le=pe[0],ft=pe[pe.length-1],kt=Le;kt<ft+1;kt++){this.pdf.setPage(kt);var Mt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Lt=kt===1?this.posY+this.margin[0]:this.margin[0],at=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ie=kt===1?0:at+(kt-2)*Nt;if(this.ctx.clip_path.length!==0){var Tt=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(ee,this.posX+this.margin[3],-Ie+Lt+this.ctx.prevPageLastElemOffset),L.call(this,"fill",!0),this.path=Tt}var mt=JSON.parse(JSON.stringify($e));mt=T([mt],this.posX+this.margin[3],-Ie+Lt+this.ctx.prevPageLastElemOffset)[0];var Et=(kt>Le||kt<ft)&&b.call(this);Et&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Mt,Nt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",mt.x,mt.y,mt.w,mt.h,null,null,ge),Et&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",$e.x,$e.y,$e.w,$e.h,null,null,ge)};var A=function(P,Z,ce){var je=[];Z=Z||this.pdf.internal.pageSize.width,ce=ce||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ke=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":je.push(Math.floor((P.y+ke)/ce)+1);break;case"arc":je.push(Math.floor((P.y+ke-P.radius)/ce)+1),je.push(Math.floor((P.y+ke+P.radius)/ce)+1);break;case"qct":var De=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);je.push(Math.floor((De.y+ke)/ce)+1),je.push(Math.floor((De.y+De.h+ke)/ce)+1);break;case"bct":var Ee=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);je.push(Math.floor((Ee.y+ke)/ce)+1),je.push(Math.floor((Ee.y+Ee.h+ke)/ce)+1);break;case"rect":je.push(Math.floor((P.y+ke)/ce)+1),je.push(Math.floor((P.y+P.h+ke)/ce)+1)}for(var ne=0;ne<je.length;ne+=1)for(;this.pdf.internal.getNumberOfPages()<je[ne];)S.call(this);return je},S=function(){var P=this.fillStyle,Z=this.strokeStyle,ce=this.font,je=this.lineCap,ke=this.lineWidth,De=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=Z,this.font=ce,this.lineCap=je,this.lineWidth=ke,this.lineJoin=De},T=function(P,Z,ce){for(var je=0;je<P.length;je++)switch(P[je].type){case"bct":P[je].x2+=Z,P[je].y2+=ce;case"qct":P[je].x1+=Z,P[je].y1+=ce;default:P[je].x+=Z,P[je].y+=ce}return P},E=function(P){return P.sort(function(Z,ce){return Z-ce})},D=function(P,Z){for(var ce,je,ke=this.fillStyle,De=this.strokeStyle,Ee=this.lineCap,ne=this.lineWidth,Ne=Math.abs(ne*this.ctx.transform.scaleX),le=this.lineJoin,xe=JSON.parse(JSON.stringify(this.path)),H=JSON.parse(JSON.stringify(this.path)),W=[],B=0;B<H.length;B++)if(H[B].x!==void 0)for(var ee=A.call(this,H[B]),X=0;X<ee.length;X+=1)W.indexOf(ee[X])===-1&&W.push(ee[X]);for(var ge=0;ge<W.length;ge++)for(;this.pdf.internal.getNumberOfPages()<W[ge];)S.call(this);if(E(W),this.autoPaging)for(var be=W[0],$e=W[W.length-1],Ze=be;Ze<$e+1;Ze++){this.pdf.setPage(Ze),this.fillStyle=ke,this.strokeStyle=De,this.lineCap=Ee,this.lineWidth=Ne,this.lineJoin=le;var pe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],V=Ze===1?this.posY+this.margin[0]:this.margin[0],Le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],kt=Ze===1?0:Le+(Ze-2)*ft;if(this.ctx.clip_path.length!==0){var Mt=this.path;ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(ce,this.posX+this.margin[3],-kt+V+this.ctx.prevPageLastElemOffset),L.call(this,P,!0),this.path=Mt}if(je=JSON.parse(JSON.stringify(xe)),this.path=T(je,this.posX+this.margin[3],-kt+V+this.ctx.prevPageLastElemOffset),Z===!1||Ze===0){var Lt=(Ze>be||Ze<$e)&&b.call(this);Lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pe,ft,null).clip().discardPath()),L.call(this,P,Z),Lt&&this.pdf.restoreGraphicsState()}this.lineWidth=ne}else this.lineWidth=Ne,L.call(this,P,Z),this.lineWidth=ne;this.path=xe},L=function(P,Z){if((P!=="stroke"||Z||!j.call(this))&&(P==="stroke"||Z||!x.call(this))){for(var ce,je,ke=[],De=this.path,Ee=0;Ee<De.length;Ee++){var ne=De[Ee];switch(ne.type){case"begin":ke.push({begin:!0});break;case"close":ke.push({close:!0});break;case"mt":ke.push({start:ne,deltas:[],abs:[]});break;case"lt":var Ne=ke.length;if(De[Ee-1]&&!isNaN(De[Ee-1].x)&&(ce=[ne.x-De[Ee-1].x,ne.y-De[Ee-1].y],Ne>0)){for(;Ne>=0;Ne--)if(ke[Ne-1].close!==!0&&ke[Ne-1].begin!==!0){ke[Ne-1].deltas.push(ce),ke[Ne-1].abs.push(ne);break}}break;case"bct":ce=[ne.x1-De[Ee-1].x,ne.y1-De[Ee-1].y,ne.x2-De[Ee-1].x,ne.y2-De[Ee-1].y,ne.x-De[Ee-1].x,ne.y-De[Ee-1].y],ke[ke.length-1].deltas.push(ce);break;case"qct":var le=De[Ee-1].x+2/3*(ne.x1-De[Ee-1].x),xe=De[Ee-1].y+2/3*(ne.y1-De[Ee-1].y),H=ne.x+2/3*(ne.x1-ne.x),W=ne.y+2/3*(ne.y1-ne.y),B=ne.x,ee=ne.y;ce=[le-De[Ee-1].x,xe-De[Ee-1].y,H-De[Ee-1].x,W-De[Ee-1].y,B-De[Ee-1].x,ee-De[Ee-1].y],ke[ke.length-1].deltas.push(ce);break;case"arc":ke.push({deltas:[],abs:[],arc:!0}),Array.isArray(ke[ke.length-1].abs)&&ke[ke.length-1].abs.push(ne)}}je=Z?null:P==="stroke"?"stroke":"fill";for(var X=!1,ge=0;ge<ke.length;ge++)if(ke[ge].arc)for(var be=ke[ge].abs,$e=0;$e<be.length;$e++){var Ze=be[$e];Ze.type==="arc"?M.call(this,Ze.x,Ze.y,Ze.radius,Ze.startAngle,Ze.endAngle,Ze.counterclockwise,void 0,Z,!X):se.call(this,Ze.x,Ze.y),X=!0}else if(ke[ge].close===!0)this.pdf.internal.out("h"),X=!1;else if(ke[ge].begin!==!0){var pe=ke[ge].start.x,V=ke[ge].start.y;J.call(this,ke[ge].deltas,pe,V),X=!0}je&&U.call(this,je),Z&&oe.call(this)}},F=function(P){var Z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ce=Z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-ce;case"top":return P+Z-ce;case"hanging":return P+Z-2*ce;case"middle":return P+Z/2-ce;default:return P}},z=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(Z,ce){this.colorStops.push([Z,ce])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(P,Z,ce,je,ke,De,Ee,ne,Ne){for(var le=ae.call(this,ce,je,ke,De),xe=0;xe<le.length;xe++){var H=le[xe];xe===0&&(Ne?R.call(this,H.x1+P,H.y1+Z):se.call(this,H.x1+P,H.y1+Z)),Q.call(this,P,Z,H.x2,H.y2,H.x3,H.y3,H.x4,H.y4)}ne?oe.call(this):U.call(this,Ee)},U=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},oe=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(P,Z){this.pdf.internal.out(r(P)+" "+a(Z)+" m")},q=function(P){var Z;switch(P.align){case"right":case"end":Z="right";break;case"center":Z="center";break;default:Z="left"}var ce=this.pdf.getTextDimensions(P.text),je=F.call(this,P.y),ke=z.call(this,je)-ce.h,De=this.ctx.transform.applyToPoint(new l(P.x,je)),Ee=this.ctx.transform.decompose(),ne=new d;ne=(ne=(ne=ne.multiply(Ee.translate)).multiply(Ee.skew)).multiply(Ee.scale);for(var Ne,le,xe,H=this.ctx.transform.applyToRectangle(new u(P.x,je,ce.w,ce.h)),W=ne.applyToRectangle(new u(P.x,ke,ce.w,ce.h)),B=A.call(this,W),ee=[],X=0;X<B.length;X+=1)ee.indexOf(B[X])===-1&&ee.push(B[X]);if(E(ee),this.autoPaging)for(var ge=ee[0],be=ee[ee.length-1],$e=ge;$e<be+1;$e++){this.pdf.setPage($e);var Ze=$e===1?this.posY+this.margin[0]:this.margin[0],pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],V=this.pdf.internal.pageSize.height-this.margin[2],Le=V-this.margin[0],ft=this.pdf.internal.pageSize.width-this.margin[1],kt=ft-this.margin[3],Mt=$e===1?0:pe+($e-2)*Le;if(this.ctx.clip_path.length!==0){var Lt=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(Ne,this.posX+this.margin[3],-1*Mt+Ze),L.call(this,"fill",!0),this.path=Lt}var at=T([JSON.parse(JSON.stringify(W))],this.posX+this.margin[3],-Mt+Ze+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(le*P.scale),xe=this.lineWidth,this.lineWidth=xe*P.scale);var Nt=this.autoPaging!=="text";if(Nt||at.y+at.h<=V){if(Nt||at.y>=Ze&&at.x<=ft){var Ie=Nt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||ft-at.x)[0],Tt=T([JSON.parse(JSON.stringify(H))],this.posX+this.margin[3],-Mt+Ze+this.ctx.prevPageLastElemOffset)[0],mt=Nt&&($e>ge||$e<be)&&b.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],kt,Le,null).clip().discardPath()),this.pdf.text(Ie,Tt.x,Tt.y,{angle:P.angle,align:Z,renderingMode:P.renderingMode}),mt&&this.pdf.restoreGraphicsState()}}else at.y<V&&(this.ctx.prevPageLastElemOffset+=V-at.y);P.scale>=.01&&(this.pdf.setFontSize(le),this.lineWidth=xe)}else P.scale>=.01&&(le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(le*P.scale),xe=this.lineWidth,this.lineWidth=xe*P.scale),this.pdf.text(P.text,De.x+this.posX,De.y+this.posY,{angle:P.angle,align:Z,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(le),this.lineWidth=xe)},se=function(P,Z,ce,je){ce=ce||0,je=je||0,this.pdf.internal.out(r(P+ce)+" "+a(Z+je)+" l")},J=function(P,Z,ce){return this.pdf.lines(P,Z,ce,null,null)},Q=function(P,Z,ce,je,ke,De,Ee,ne){this.pdf.internal.out([t(s(ce+P)),t(i(je+Z)),t(s(ke+P)),t(i(De+Z)),t(s(Ee+P)),t(i(ne+Z)),"c"].join(" "))},ae=function(P,Z,ce,je){for(var ke=2*Math.PI,De=Math.PI/2;Z>ce;)Z-=ke;var Ee=Math.abs(ce-Z);Ee<ke&&je&&(Ee=ke-Ee);for(var ne=[],Ne=je?-1:1,le=Z;Ee>1e-5;){var xe=le+Ne*Math.min(Ee,De);ne.push(he.call(this,P,le,xe)),Ee-=Math.abs(xe-le),le=xe}return ne},he=function(P,Z,ce){var je=(ce-Z)/2,ke=P*Math.cos(je),De=P*Math.sin(je),Ee=ke,ne=-De,Ne=Ee*Ee+ne*ne,le=Ne+Ee*ke+ne*De,xe=4/3*(Math.sqrt(2*Ne*le)-le)/(Ee*De-ne*ke),H=Ee-xe*ne,W=ne+xe*Ee,B=H,ee=-W,X=je+Z,ge=Math.cos(X),be=Math.sin(X);return{x1:P*Math.cos(Z),y1:P*Math.sin(Z),x2:H*ge-W*be,y2:H*be+W*ge,x3:B*ge-ee*be,y3:B*be+ee*ge,x4:P*Math.cos(ce),y4:P*Math.sin(ce)}},de=function(P){return 180*P/Math.PI},_e=function(P,Z,ce,je,ke,De){var Ee=P+.5*(ce-P),ne=Z+.5*(je-Z),Ne=ke+.5*(ce-ke),le=De+.5*(je-De),xe=Math.min(P,ke,Ee,Ne),H=Math.max(P,ke,Ee,Ne),W=Math.min(Z,De,ne,le),B=Math.max(Z,De,ne,le);return new u(xe,W,H-xe,B-W)},Y=function(P,Z,ce,je,ke,De,Ee,ne){var Ne,le,xe,H,W,B,ee,X,ge,be,$e,Ze,pe,V,Le=ce-P,ft=je-Z,kt=ke-ce,Mt=De-je,Lt=Ee-ke,at=ne-De;for(le=0;le<41;le++)ge=(ee=(xe=P+(Ne=le/40)*Le)+Ne*((W=ce+Ne*kt)-xe))+Ne*(W+Ne*(ke+Ne*Lt-W)-ee),be=(X=(H=Z+Ne*ft)+Ne*((B=je+Ne*Mt)-H))+Ne*(B+Ne*(De+Ne*at-B)-X),le==0?($e=ge,Ze=be,pe=ge,V=be):($e=Math.min($e,ge),Ze=Math.min(Ze,be),pe=Math.max(pe,ge),V=Math.max(V,be));return new u(Math.round($e),Math.round(Ze),Math.round(pe-$e),Math.round(V-Ze))},ye=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,Z,ce=(P=this.ctx.lineDash,Z=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:Z}));this.prevLineDash!==ce&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ce)}}})(ir.API),function(e){var t=function(l){var u,d,f,m,g,v,x,j,b,A;for(d=[],f=0,m=(l+=u="\0\0\0\0".slice(l.length%4||4)).length;m>f;f+=4)(g=(l.charCodeAt(f)<<24)+(l.charCodeAt(f+1)<<16)+(l.charCodeAt(f+2)<<8)+l.charCodeAt(f+3))!==0?(v=(g=((g=((g=((g=(g-(A=g%85))/85)-(b=g%85))/85)-(j=g%85))/85)-(x=g%85))/85)%85,d.push(v+33,x+33,j+33,b+33,A+33)):d.push(122);return function(S,T){for(var E=T;E>0;E--)S.pop()}(d,u.length),String.fromCharCode.apply(String,d)+"~>"},r=function(l){var u,d,f,m,g,v=String,x="length",j=255,b="charCodeAt",A="slice",S="replace";for(l[A](-2),l=l[A](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),f=[],m=0,g=(l+=u="uuuuu"[A](l[x]%5||5))[x];g>m;m+=5)d=52200625*(l[b](m)-33)+614125*(l[b](m+1)-33)+7225*(l[b](m+2)-33)+85*(l[b](m+3)-33)+(l[b](m+4)-33),f.push(j&d>>24,j&d>>16,j&d>>8,j&d);return function(T,E){for(var D=E;D>0;D--)T.pop()}(f,u[x]),v.fromCharCode.apply(v,f)},a=function(l){return l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(l){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),u.test(l)===!1)return"";for(var d="",f=0;f<l.length;f+=2)d+=String.fromCharCode("0x"+(l[f]+l[f+1]));return d},i=function(l){for(var u=new Uint8Array(l.length),d=l.length;d--;)u[d]=l.charCodeAt(d);return(u=Ow(u)).reduce(function(f,m){return f+String.fromCharCode(m)},"")};e.processDataByFilters=function(l,u){var d=0,f=l||"",m=[];for(typeof(u=u||[])=="string"&&(u=[u]),d=0;d<u.length;d+=1)switch(u[d]){case"ASCII85Decode":case"/ASCII85Decode":f=r(f),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=t(f),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=s(f),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=a(f),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=i(f),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[d]+'" is not implemented')}return{data:f,reverseChain:m.reverse().join(" ")}}}(ir.API),function(e){e.loadFile=function(t,r,a){return function(s,i,l){i=i!==!1,l=typeof l=="function"?l:function(){};var u=void 0;try{u=function(d,f,m){var g=new XMLHttpRequest,v=0,x=function(j){var b=j.length,A=[],S=String.fromCharCode;for(v=0;v<b;v+=1)A.push(S(255&j.charCodeAt(v)));return A.join("")};if(g.open("GET",d,!f),g.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(g.onload=function(){g.status===200?m(x(this.responseText)):m(void 0)}),g.send(null),f&&g.status===200)return x(g.responseText)}(s,i,l)}catch{}return u}(t,r,a)},e.loadImageFile=e.loadFile}(ir.API),function(e){function t(){return(Nr.html2canvas?Promise.resolve(Nr.html2canvas):Ai(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function r(){return(Nr.DOMPurify?Promise.resolve(Nr.DOMPurify):Ai(()=>import("./purify.es-aGzT-_H7.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var a=function(u){var d=_a(u);return d==="undefined"?"undefined":d==="string"||u instanceof String?"string":d==="number"||u instanceof Number?"number":d==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":d==="object"?"object":"unknown"},s=function(u,d){var f=document.createElement(u);for(var m in d.className&&(f.className=d.className),d.innerHTML&&d.dompurify&&(f.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)f.style[m]=d.style[m];return f},i=function u(d,f){for(var m=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),g=d.firstChild;g;g=g.nextSibling)f!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||m.appendChild(u(g,f));return d.nodeType===1&&(d.nodeName==="CANVAS"?(m.width=d.width,m.height=d.height,m.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(m.value=d.value),m.addEventListener("load",function(){m.scrollTop=d.scrollTop,m.scrollLeft=d.scrollLeft},!0)),m},l=function u(d){var f=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),m=u.convert(Promise.resolve(),f);return(m=m.setProgress(1,u,1,[u])).set(d)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(u,d){return u.__proto__=d||l.prototype,u},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(u,d){return this.then(function(){switch(d=d||function(f){switch(a(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(u),d){case"string":return this.then(r).then(function(f){return this.set({src:s("div",{innerHTML:u,dompurify:f})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},l.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(t).then(function(d){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,d(this.prop.container,f)}).then(function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(t).then(function(d){var f=this.opt.jsPDF,m=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=m,m)for(var x=0;x<m.length;++x){var j=m[x],b=j.src.find(function(A){return A.format==="truetype"});b&&f.addFont(b.url,j.ref.name,j.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,f.context2d.save(!0),d(this.prop.container,v)}).then(function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(u,d,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(u,d):this.outputPdf(u,d)},l.prototype.outputPdf=function(u,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,d)})},l.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},l.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(u){if(a(u)!=="object")return this;var d=Object.keys(u||{}).map(function(f){if(f in l.template.prop)return function(){this.prop[f]=u[f]};switch(f){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[f]=u[f]}}},this);return this.then(function(){return this.thenList(d)})},l.prototype.get=function(u,d){return this.then(function(){var f=u in l.template.prop?this.prop[u]:this.opt[u];return d?d(f):f})},l.prototype.setMargin=function(u){return this.then(function(){switch(a(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},l.prototype.setPageSize=function(u){function d(f,m){return Math.floor(f*m/72*96)}return this.then(function(){(u=u||ir.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:d(u.inner.width,u.k),height:d(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},l.prototype.setProgress=function(u,d,f,m){return u!=null&&(this.progress.val=u),d!=null&&(this.progress.state=d),f!=null&&(this.progress.n=f),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(u,d,f,m){return this.setProgress(u?this.progress.val+u:null,d||null,f?this.progress.n+f:null,m?this.progress.stack.concat(m):null)},l.prototype.then=function(u,d){var f=this;return this.thenCore(u,d,function(m,g){return f.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(v){return f.updateProgress(null,m),v}).then(m,g).then(function(v){return f.updateProgress(1),v})})},l.prototype.thenCore=function(u,d,f){f=f||Promise.prototype.then;var m=this;u&&(u=u.bind(m)),d&&(d=d.bind(m));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:l.convert(Object.assign({},m),Promise.prototype),v=f.call(g,u,d);return l.convert(v,m.__proto__)},l.prototype.thenExternal=function(u,d){return Promise.prototype.then.call(this,u,d)},l.prototype.thenList=function(u){var d=this;return u.forEach(function(f){d=d.thenCore(f)}),d},l.prototype.catch=function(u){u&&(u=u.bind(this));var d=Promise.prototype.catch.call(this,u);return l.convert(d,this)},l.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},l.prototype.error=function(u){return this.then(function(){throw new Error(u)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,ir.getPageSize=function(u,d,f){if(_a(u)==="object"){var m=u;u=m.orientation,d=m.unit||d,f=m.format||f}d=d||"mm",f=f||"a4",u=(""+(u||"P")).toLowerCase();var g,v=(""+f).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+d}var j,b=0,A=0;if(x.hasOwnProperty(v))b=x[v][1]/g,A=x[v][0]/g;else try{b=f[1],A=f[0]}catch{throw new Error("Invalid format: "+f)}if(u==="p"||u==="portrait")u="p",A>b&&(j=A,A=b,b=j);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",b>A&&(j=A,A=b,b=j)}return{width:A,height:b,unit:d,k:g,orientation:u}},e.html=function(u,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map(l2):null;var f=new l(d);return d.worker?f:f.from(u).doCallback()}}(ir.API),ir.API.addJS=function(e){return JC=e,this.internal.events.subscribe("postPutResources",function(){K0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(K0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ZC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+JC+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){K0!==void 0&&ZC!==void 0&&this.internal.out("/Names <</JavaScript "+K0+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var l=s[i],u=a.exec(l);if(u!=null){var d=u[1];r.internal.newObjectDeferredBegin(d,!1)}r.internal.write(l)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,m=[];for(i=0;i<f;i++){var g=r.internal.newObject();m.push(g);var v=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var x=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<m.length;i++)r.internal.write("(page_"+(i+1)+")"+m[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+x+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,s,i){var l={title:s,options:i,children:[]};return a==null&&(a=this.root),a.children.push(l),l},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var s=0;s<a.children.length;s++)this.genIds_r(a.children[s])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<a.children.length;i++){var l=a.children[i];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(a)),i>0&&this.line("/Prev "+this.makeRef(a.children[i-1])),i<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[i+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var u=this.count=this.count_r({count:0},l);if(u>0&&this.line("/Count "+u),l.options&&l.options.pageNumber){var d=r.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var f=0;f<a.children.length;f++)this.renderItems(a.children[f])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,s){for(var i=0;i<s.children.length;i++)a.count++,this.count_r(a,s.children[i]);return a.count}}])}(ir.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,a,s,i,l,u){var d,f=this.decode.DCT_DECODE,m=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=l||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,d=function(g){for(var v,x=256*g.charCodeAt(4)+g.charCodeAt(5),j=g.length,b={width:0,height:0,numcomponents:1},A=4;A<j;A+=2){if(A+=x,t.indexOf(g.charCodeAt(A+1))!==-1){v=256*g.charCodeAt(A+5)+g.charCodeAt(A+6),b={width:256*g.charCodeAt(A+7)+g.charCodeAt(A+8),height:v,numcomponents:g.charCodeAt(A+9)};break}x=256*g.charCodeAt(A+2)+g.charCodeAt(A+3)}return b}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),d.numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}m={data:r,width:d.width,height:d.height,colorSpace:u,bitsPerComponent:8,filter:f,index:a,alias:s}}return m}}(ir.API),ir.API.processPNG=function(e,t,r,a){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var s,i=Ure(e,{checkCrc:!0}),l=i.width,u=i.height,d=i.channels,f=i.palette,m=i.depth;s=f&&d===1?function(M){for(var U=M.width,oe=M.height,R=M.data,q=M.palette,se=M.depth,J=!1,Q=[],ae=[],he=void 0,de=!1,_e=0,Y=0;Y<q.length;Y++){var ye=rC(q[Y],4),P=ye[0],Z=ye[1],ce=ye[2],je=ye[3];Q.push(P,Z,ce),je!=null&&(je===0?(_e++,ae.length<1&&ae.push(Y)):je<255&&(de=!0))}if(de||_e>1){J=!0,ae=void 0;var ke=U*oe;he=new Uint8Array(ke);for(var De=new DataView(R.buffer),Ee=0;Ee<ke;Ee++){var ne=u2(De,Ee,se),Ne=rC(q[ne],4)[3];he[Ee]=Ne}}else _e===0&&(ae=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:J?8:void 0,colorBytes:R,alphaBytes:he,needSMask:J,palette:Q,mask:ae}}(i):d===2||d===4?function(M){for(var U=M.data,oe=M.width,R=M.height,q=M.channels,se=M.depth,J=q===2?"DeviceGray":"DeviceRGB",Q=q-1,ae=oe*R,he=Q,de=ae*he,_e=1*ae,Y=Math.ceil(de*se/8),ye=Math.ceil(_e*se/8),P=new Uint8Array(Y),Z=new Uint8Array(ye),ce=new DataView(U.buffer),je=new DataView(P.buffer),ke=new DataView(Z.buffer),De=!1,Ee=0;Ee<ae;Ee++){for(var ne=Ee*q,Ne=0;Ne<he;Ne++)ok(je,u2(ce,ne+Ne,se),Ee*he+Ne,se);var le=u2(ce,ne+he,se);le<(1<<se)-1&&(De=!0),ok(ke,le,1*Ee,se)}return{colorSpace:J,colorsPerPixel:Q,sMaskBitsPerComponent:De?se:void 0,colorBytes:P,alphaBytes:Z,needSMask:De}}(i):function(M){var U=M.data,oe=M.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:oe,colorsPerPixel:oe==="DeviceGray"?1:3,colorBytes:U instanceof Uint16Array?function(R){for(var q=R.length,se=new Uint8Array(2*q),J=new DataView(se.buffer,se.byteOffset,se.byteLength),Q=0;Q<q;Q++)J.setUint16(2*Q,R[Q],!1);return se}(U):U,needSMask:!1}}(i);var g,v,x,j=s,b=j.colorSpace,A=j.colorsPerPixel,S=j.sMaskBitsPerComponent,T=j.colorBytes,E=j.alphaBytes,D=j.needSMask,L=j.palette,F=j.mask,z=null;return a!==ir.API.image_compression.NONE&&typeof Ow=="function"?(z=function(M){var U;switch(M){case ir.API.image_compression.FAST:U=11;break;case ir.API.image_compression.MEDIUM:U=13;break;case ir.API.image_compression.SLOW:U=14;break;default:U=12}return U}(a),g=this.decode.FLATE_DECODE,v="/Predictor ".concat(z," /Colors ").concat(A," /BitsPerComponent ").concat(m," /Columns ").concat(l),e=rk(T,Math.ceil(l*A*m/8),A,m,a),D&&(x=rk(E,Math.ceil(l*S/8),1,S,a))):(g=void 0,v=void 0,e=T,D&&(x=E)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(x&&this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),{alias:r,data:e,index:t,filter:g,decodeParameters:v,transparency:F,palette:L,sMask:x,predictor:z,width:l,height:u,bitsPerComponent:m,sMaskBitsPerComponent:S,colorSpace:b}}},function(e){e.processGIF89A=function(t,r,a,s){var i=new lae(t),l=i.width,u=i.height,d=[];i.decodeAndBlitFrameRGBA(0,d);var f={data:d,width:l,height:u},m=new d2(100).encode(f,100);return e.processJPEG.call(this,m,r,a,s)},e.processGIF87A=e.processGIF89A}(ir.API),cl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:a,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},cl.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Ra.log("bit decode error:"+r)}},cl.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),l=a*this.width*4+8*s*4,u=0;u<8&&8*s+u<this.width;u++){var d=this.palette[i>>7-u&1];this.data[l+4*u]=d.blue,this.data[l+4*u+1]=d.green,this.data[l+4*u+2]=d.red,this.data[l+4*u+3]=255}r!==0&&(this.pos+=4-r)}},cl.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),l=a*this.width*4+2*s*4,u=i>>4,d=15&i,f=this.palette[u];if(this.data[l]=f.blue,this.data[l+1]=f.green,this.data[l+2]=f.red,this.data[l+3]=255,2*s+1>=this.width)break;f=this.palette[d],this.data[l+4]=f.blue,this.data[l+4+1]=f.green,this.data[l+4+2]=f.red,this.data[l+4+3]=255}t!==0&&(this.pos+=4-t)}},cl.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*a;if(s<this.palette.length){var l=this.palette[s];this.data[i]=l.red,this.data[i+1]=l.green,this.data[i+2]=l.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},cl.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(i&t)/t*255|0,u=(i>>5&t)/t*255|0,d=(i>>10&t)/t*255|0,f=i>>15?255:0,m=a*this.width*4+4*s;this.data[m]=d,this.data[m+1]=u,this.data[m+2]=l,this.data[m+3]=f}this.pos+=e}},cl.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var s=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(l&t)/t*255|0,d=(l>>5&r)/r*255|0,f=(l>>11)/t*255|0,m=s*this.width*4+4*i;this.data[m]=f,this.data[m+1]=d,this.data[m+2]=u,this.data[m+3]=255}this.pos+=e}},cl.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=a,this.data[l+3]=255}this.pos+=this.width%4}},cl.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*r;this.data[u]=i,this.data[u+1]=s,this.data[u+2]=a,this.data[u+3]=l}},cl.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,a,s){var i=new cl(t,!1),l=i.width,u=i.height,d={data:i.getData(),width:l,height:u},f=new d2(100).encode(d,100);return e.processJPEG.call(this,f,r,a,s)}}(ir.API),ck.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,a,s){var i=new ck(t),l=i.width,u=i.height,d={data:i.getData(),width:l,height:u},f=new d2(100).encode(d,100);return e.processJPEG.call(this,f,r,a,s)}}(ir.API),ir.API.processRGBA=function(e,t,r){for(var a=e.data,s=a.length,i=new Uint8Array(s/4*3),l=new Uint8Array(s/4),u=0,d=0,f=0;f<s;f+=4){var m=a[f],g=a[f+1],v=a[f+2],x=a[f+3];i[u++]=m,i[u++]=g,i[u++]=v,l[d++]=x}var j=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:j,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},ir.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ph=ir.API,W0=Ph.getCharWidthsArray=function(e,t){var r,a,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),l=t.charSpace||this.internal.getCharSpace(),u=t.widths?t.widths:s.metadata.Unicode.widths,d=u.fof?u.fof:1,f=t.kerning?t.kerning:s.metadata.Unicode.kerning,m=f.fof?f.fof:1,g=t.doKerning!==!1,v=0,x=e.length,j=0,b=u[0]||d,A=[];for(r=0;r<x;r++)a=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?A.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(a))+l*(1e3/i)||0)/1e3):(v=g&&_a(f[a])==="object"&&!isNaN(parseInt(f[a][j],10))?f[a][j]/m:0,A.push((u[a]||b)/d+v)),j=a;return A},QC=Ph.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return Ph.processArabic&&(e=Ph.processArabic(e)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(e,r,s)/r:W0.apply(this,arguments).reduce(function(i,l){return i+l},0)},ek=function(e,t,r,a){for(var s=[],i=0,l=e.length,u=0;i!==l&&u+t[i]<r;)u+=t[i],i++;s.push(e.slice(0,i));var d=i;for(u=0;i!==l;)u+t[i]>a&&(s.push(e.slice(d,i)),u=0,d=i),u+=t[i],i++;return d!==i&&s.push(e.slice(d,i)),s},tk=function(e,t,r){r||(r={});var a,s,i,l,u,d,f,m=[],g=[m],v=r.textIndent||0,x=0,j=0,b=e.split(" "),A=W0.apply(this,[" ",r])[0];if(d=r.lineIndent===-1?b[0].length+2:r.lineIndent||0){var S=Array(d).join(" "),T=[];b.map(function(D){(D=D.split(/\s*\n/)).length>1?T=T.concat(D.map(function(L,F){return(F&&L.length?`
`:"")+L})):T.push(D[0])}),b=T,d=QC.apply(this,[S,r])}for(i=0,l=b.length;i<l;i++){var E=0;if(a=b[i],d&&a[0]==`
`&&(a=a.substr(1),E=1),v+x+(j=(s=W0.apply(this,[a,r])).reduce(function(D,L){return D+L},0))>t||E){if(j>t){for(u=ek.apply(this,[a,s,t-(v+x),t]),m.push(u.shift()),m=[u.pop()];u.length;)g.push([u.shift()]);j=s.slice(a.length-(m[0]?m[0].length:0)).reduce(function(D,L){return D+L},0)}else m=[a];g.push(m),v=j+d,x=A}else m.push(a),v+=x+j,x=A}return f=d?function(D,L){return(L?S:"")+D.join(" ")}:function(D){return D.join(" ")},g.map(f)},Ph.splitTextToSize=function(e,t,r){var a,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var g=this.internal.getFont(m.fontName,m.fontStyle),v="Unicode";return g.metadata[v]?{widths:g.metadata[v].widths||{0:1},kerning:g.metadata[v].kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var l=1*this.internal.scaleFactor*t/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var u,d,f=[];for(u=0,d=a.length;u<d;u++)f=f.concat(tk.apply(this,[a[u],l,i]));return f},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",a={},s={},i=0;i<16;i++)a[r[i]]=t[i],s[t[i]]=r[i];var l=function(v){return"0x"+parseInt(v,10).toString(16)},u=e.__fontmetrics__.compress=function(v){var x,j,b,A,S=["{"];for(var T in v){if(x=v[T],isNaN(parseInt(T,10))?j="'"+T+"'":(T=parseInt(T,10),j=(j=l(T).slice(2)).slice(0,-1)+s[j.slice(-1)]),typeof x=="number")x<0?(b=l(x).slice(3),A="-"):(b=l(x).slice(2),A=""),b=A+b.slice(0,-1)+s[b.slice(-1)];else{if(_a(x)!=="object")throw new Error("Don't know what to do with value type "+_a(x)+".");b=u(x)}S.push(j+b)}return S.push("}"),S.join("")},d=e.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,j,b,A,S={},T=1,E=S,D=[],L="",F="",z=v.length-1,M=1;M<z;M+=1)(A=v[M])=="'"?x?(b=x.join(""),x=void 0):x=[]:x?x.push(A):A=="{"?(D.push([E,b]),E={},b=void 0):A=="}"?((j=D.pop())[0][j[1]]=E,b=void 0,E=j[0]):A=="-"?T=-1:b===void 0?a.hasOwnProperty(A)?(L+=a[A],b=parseInt(L,16)*T,T=1,L=""):L+=A:a.hasOwnProperty(A)?(F+=a[A],E[b]=parseInt(F,16)*T,T=1,b=void 0,F=""):F+=A;return S},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},g={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(v){var x=v.font,j=g.Unicode[x.postScriptName];j&&(x.metadata.Unicode={},x.metadata.Unicode.widths=j.widths,x.metadata.Unicode.kerning=j.kerning);var b=m.Unicode[x.postScriptName];b&&(x.metadata.Unicode.encoding=b,x.encoding=b.codePages[0])}])}(ir.API),function(e){var t=function(r){for(var a=r.length,s=new Uint8Array(a),i=0;i<a;i++)s[i]=r.charCodeAt(i);return s};e.API.events.push(["addFont",function(r){var a=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(a=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(l,u){u=/^\x00\x01\x00\x00/.test(u)?t(u):t(J0(u)),l.metadata=e.API.TTFFont.open(u),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(s,a)}}])}(ir),ir.API.addSvgAsImage=function(e,t,r,a,s,i,l,u){if(isNaN(t)||isNaN(r))throw Ra.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(s))throw Ra.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=a,d.height=s;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return(Nr.canvg?Promise.resolve(Nr.canvg):Ai(()=>import("./index.es-BaEikXpV.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load canvg: "+v))}).then(function(v){return v.default?v.default:v}).then(function(v){return v.fromString(f,e,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(m)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),t,r,a,s,l,u)})},ir.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var s=0;s<this.internal.pages[a].length;s++)this.internal.pages[a][s]=this.internal.pages[a][s].replace(t,r);return this},ir.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var a,s,i,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(l),d=[],f=0,m=0,g=0;function v(j,b){var A,S=!1;for(A=0;A<j.length;A+=1)j[A]===b&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var x=u.length;for(g=0;g<x;g+=1)r[u[g]].value=r[u[g]].defaultValue,r[u[g]].explicitSet=!1}if(_a(e)==="object"){for(s in e)if(i=e[s],v(u,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&v(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(f=0;f<i.length;f+=1)if(a=!0,i[f].length===1&&typeof i[f][0]=="number")d.push(String(i[f]-1));else if(i[f].length>1){for(m=0;m<i[f].length;m+=1)typeof i[f][m]!="number"&&(a=!1);a===!0&&d.push([i[f][0]-1,i[f][1]-1].join(" "))}r[s].value="["+d.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var j,b=[];for(j in r)r[j].explicitSet===!0&&(r[j].type==="name"?b.push("/"+j+" /"+r[j].value):b.push("/"+j+" "+r[j].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(a)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),f=i.length+l.length+u.length+s.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(s+i+l+u+d),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(a,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(ir.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,l){for(var u,d=l.metadata.Unicode.widths,f=["","0","00","000","0000"],m=[""],g=0,v=i.length;g<v;++g){if(u=l.metadata.characterToGlyph(i.charCodeAt(g)),l.metadata.glyIdsUsed.push(u),l.metadata.toUnicode[u]=i.charCodeAt(g),d.indexOf(u)==-1&&(d.push(u),d.push([parseInt(l.metadata.widthOfGlyph(u),10)])),u=="0")return m.join("");u=u.toString(16),m.push(f[4-u.length],u)}return m.join("")},a=function(i){var l,u,d,f,m,g,v;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],g=0,v=(u=Object.keys(i).sort(function(x,j){return x-j})).length;g<v;g++)l=u[g],d.length>=100&&(m+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),i[l]!==void 0&&i[l]!==null&&typeof i[l].toString=="function"&&(f=("0000"+i[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),d.push("<"+l+"><"+f+">"));return d.length&&(m+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(l){var u=l.font,d=l.out,f=l.newObject,m=l.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="Identity-H"){for(var g=u.metadata.Unicode.widths,v=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),x="",j=0;j<v.length;j++)x+=String.fromCharCode(v[j]);var b=f();m({data:x,addLength1:!0,objectId:b}),d("endobj");var A=f();m({data:a(u.metadata.toUnicode),addLength1:!0,objectId:A}),d("endobj");var S=f();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+Lh(u.fontName)),d("/FontFile2 "+b+" 0 R"),d("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),d("/Flags "+u.metadata.flags),d("/StemV "+u.metadata.stemV),d("/ItalicAngle "+u.metadata.italicAngle),d("/Ascent "+u.metadata.ascender),d("/Descent "+u.metadata.decender),d("/CapHeight "+u.metadata.capHeight),d(">>"),d("endobj");var T=f();d("<<"),d("/Type /Font"),d("/BaseFont /"+Lh(u.fontName)),d("/FontDescriptor "+S+" 0 R"),d("/W "+e.API.PDFObject.convert(g)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+u.encoding+")"),d(">>"),d(">>"),d("endobj"),u.objectNumber=f(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+A+" 0 R"),d("/BaseFont /"+Lh(u.fontName)),d("/Encoding /"+u.encoding),d("/DescendantFonts ["+T+" 0 R]"),d(">>"),d("endobj"),u.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(l){var u=l.font,d=l.out,f=l.newObject,m=l.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var g=u.metadata.rawData,v="",x=0;x<g.length;x++)v+=String.fromCharCode(g[x]);var j=f();m({data:v,addLength1:!0,objectId:j}),d("endobj");var b=f();m({data:a(u.metadata.toUnicode),addLength1:!0,objectId:b}),d("endobj");var A=f();d("<<"),d("/Descent "+u.metadata.decender),d("/CapHeight "+u.metadata.capHeight),d("/StemV "+u.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+j+" 0 R"),d("/Flags 96"),d("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),d("/FontName /"+Lh(u.fontName)),d("/ItalicAngle "+u.metadata.italicAngle),d("/Ascent "+u.metadata.ascender),d(">>"),d("endobj"),u.objectNumber=f();for(var S=0;S<u.metadata.hmtx.widths.length;S++)u.metadata.hmtx.widths[S]=parseInt(u.metadata.hmtx.widths[S]*(1e3/u.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+Lh(u.fontName)+"/FontDescriptor "+A+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),d("endobj"),u.isAlreadyPutted=!0}})(i)}]);var s=function(i){var l,u=i.text||"",d=i.x,f=i.y,m=i.options||{},g=i.mutex||{},v=g.pdfEscape,x=g.activeFontKey,j=g.fonts,b=x,A="",S=0,T="",E=j[b].encoding;if(j[b].encoding!=="Identity-H")return{text:u,x:d,y:f,options:m,mutex:g};for(T=u,b=x,Array.isArray(u)&&(T=u[0]),S=0;S<T.length;S+=1)j[b].metadata.hasOwnProperty("cmap")&&(l=j[b].metadata.cmap.unicode.codeMap[T[S].charCodeAt(0)]),l||T[S].charCodeAt(0)<256&&j[b].metadata.hasOwnProperty("Unicode")?A+=T[S]:A+="";var D="";return parseInt(b.slice(1))<14||E==="WinAnsiEncoding"?D=v(A,b).split("").map(function(L){return L.charCodeAt(0).toString(16)}).join(""):E==="Identity-H"&&(D=r(A,j[b])),g.isHex=!0,{text:D,x:d,y:f,options:m,mutex:g}};t.events.push(["postProcessText",function(i){var l=i.text||"",u=[],d={text:l,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(l)){var f=0;for(f=0;f<l.length;f+=1)Array.isArray(l[f])&&l[f].length===3?u.push([s(Object.assign({},d,{text:l[f][0]})).text,l[f][1],l[f][2]]):u.push(s(Object.assign({},d,{text:l[f]})).text);i.text=u}else i.text=s(Object.assign({},d,{text:l})).text}])}(ir),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,a){return t.call(this),this.internal.vFS[r]=a,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(ir.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(a){var s,i,l,u,d,f,m,g=t,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],j={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},A=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),T=!1,E=0;this.__bidiEngine__={};var D=function(R){var q=R.charCodeAt(),se=q>>8,J=b[se];return J!==void 0?g[256*J+(255&q)]:se===252||se===253?"AL":S.test(se)?"L":se===8?"R":"N"},L=function(R){for(var q,se=0;se<R.length;se++){if((q=D(R.charAt(se)))==="L")return!1;if(q==="R")return!0}return!1},F=function(R,q,se,J){var Q,ae,he,de,_e=q[J];switch(_e){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":T=!1;break;case"N":case"AN":break;case"EN":T&&(_e="AN");break;case"AL":T=!0,_e="R";break;case"WS":case"BN":_e="N";break;case"CS":J<1||J+1>=q.length||(Q=se[J-1])!=="EN"&&Q!=="AN"||(ae=q[J+1])!=="EN"&&ae!=="AN"?_e="N":T&&(ae="AN"),_e=ae===Q?ae:"N";break;case"ES":_e=(Q=J>0?se[J-1]:"B")==="EN"&&J+1<q.length&&q[J+1]==="EN"?"EN":"N";break;case"ET":if(J>0&&se[J-1]==="EN"){_e="EN";break}if(T){_e="N";break}for(he=J+1,de=q.length;he<de&&q[he]==="ET";)he++;_e=he<de&&q[he]==="EN"?"EN":"N";break;case"NSM":if(l&&!u){for(de=q.length,he=J+1;he<de&&q[he]==="NSM";)he++;if(he<de){var Y=R[J],ye=Y>=1425&&Y<=2303||Y===64286;if(Q=q[he],ye&&(Q==="R"||Q==="AL")){_e="R";break}}}_e=J<1||(Q=q[J-1])==="B"?"N":se[J-1];break;case"B":T=!1,s=!0,_e=E;break;case"S":i=!0,_e="N"}return _e},z=function(R,q,se){var J=R.split("");return se&&M(J,se,{hiLevel:E}),J.reverse(),q&&q.reverse(),J.join("")},M=function(R,q,se){var J,Q,ae,he,de,_e=-1,Y=R.length,ye=0,P=[],Z=E?x:v,ce=[];for(T=!1,s=!1,i=!1,Q=0;Q<Y;Q++)ce[Q]=D(R[Q]);for(ae=0;ae<Y;ae++){if(de=ye,P[ae]=F(R,ce,P,ae),J=240&(ye=Z[de][j[P[ae]]]),ye&=15,q[ae]=he=Z[ye][5],J>0)if(J===16){for(Q=_e;Q<ae;Q++)q[Q]=1;_e=-1}else _e=-1;if(Z[ye][6])_e===-1&&(_e=ae);else if(_e>-1){for(Q=_e;Q<ae;Q++)q[Q]=he;_e=-1}ce[ae]==="B"&&(q[ae]=0),se.hiLevel|=he}i&&function(je,ke,De){for(var Ee=0;Ee<De;Ee++)if(je[Ee]==="S"){ke[Ee]=E;for(var ne=Ee-1;ne>=0&&je[ne]==="WS";ne--)ke[ne]=E}}(ce,q,Y)},U=function(R,q,se,J,Q){if(!(Q.hiLevel<R)){if(R===1&&E===1&&!s)return q.reverse(),void(se&&se.reverse());for(var ae,he,de,_e,Y=q.length,ye=0;ye<Y;){if(J[ye]>=R){for(de=ye+1;de<Y&&J[de]>=R;)de++;for(_e=ye,he=de-1;_e<he;_e++,he--)ae=q[_e],q[_e]=q[he],q[he]=ae,se&&(ae=se[_e],se[_e]=se[he],se[he]=ae);ye=de}ye++}}},oe=function(R,q,se){var J=R.split(""),Q={hiLevel:E};return se||(se=[]),M(J,se,Q),function(ae,he,de){if(de.hiLevel!==0&&m)for(var _e,Y=0;Y<ae.length;Y++)he[Y]===1&&(_e=A.indexOf(ae[Y]))>=0&&(ae[Y]=A[_e+1])}(J,se,Q),U(2,J,q,se,Q),U(1,J,q,se,Q),J.join("")};return this.__bidiEngine__.doBidiReorder=function(R,q,se){if(function(Q,ae){if(ae)for(var he=0;he<Q.length;he++)ae[he]=he;u===void 0&&(u=L(Q)),f===void 0&&(f=L(Q))}(R,q),l||!d||f)if(l&&d&&u^f)E=u?1:0,R=z(R,q,se);else if(!l&&d&&f)E=u?1:0,R=oe(R,q,se),R=z(R,q);else if(!l||u||d||f){if(l&&!d&&u^f)R=z(R,q),u?(E=0,R=oe(R,q,se)):(E=1,R=oe(R,q,se),R=z(R,q));else if(l&&u&&!d&&f)E=1,R=oe(R,q,se),R=z(R,q);else if(!l&&!d&&u^f){var J=m;u?(E=1,R=oe(R,q,se),E=0,m=!1,R=oe(R,q,se),m=J):(E=0,R=oe(R,q,se),R=z(R,q),E=1,m=!1,R=oe(R,q,se),m=J,R=z(R,q))}}else E=0,R=oe(R,q,se);else E=u?1:0,R=oe(R,q,se);return R},this.__bidiEngine__.setOptions=function(R){R&&(l=R.isInputVisual,d=R.isOutputVisual,u=R.isInputRtl,f=R.isOutputRtl,m=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(a){var s=a.text;a.x,a.y;var i=a.options||{};a.mutex,i.lang;var l=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var u=0;for(l=[],u=0;u<s.length;u+=1)Object.prototype.toString.call(s[u])==="[object Array]"?l.push([r.doBidiReorder(s[u][0]),s[u][1],s[u][2]]):l.push([r.doBidiReorder(s[u])]);a.text=l}else a.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(ir),ir.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new vd(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new _ae(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new cae(this.contents),this.head=new dae(this),this.name=new gae(this),this.cmap=new bD(this),this.toUnicode={},this.hhea=new fae(this),this.maxp=new xae(this),this.hmtx=new vae(this),this.post=new mae(this),this.os2=new hae(this),this.loca=new jae(this),this.glyf=new yae(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,a,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,u,d,f;for(f=[],l=0,u=(d=this.bbox).length;l<u;l++)t=d[l],f.push(Math.round(t*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(a=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,a){var s,i,l,u;for(l=0,i=0,u=(t=""+t).length;0<=u?i<u:i>u;i=0<=u?++i:--i)s=t.charCodeAt(i),l+=this.widthOfGlyph(this.characterToGlyph(s))+a*(1e3/r)||0;return l*(r/1e3)},e.prototype.lineHeight=function(t,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},e}();var jl,vd=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,a;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(t){var r,a,s;for(s=[],r=0,a=t.length;0<=a?r<a:r>a;r=0<=a?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,a,s,i,l,u,d;return t=this.readByte(),r=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),l=this.readByte(),u=this.readByte(),d=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^s)+16777216*(255^i)+65536*(255^l)+256*(255^u)+(255^d)+1):72057594037927940*t+281474976710656*r+1099511627776*a+4294967296*s+16777216*i+65536*l+256*u+d},e.prototype.writeLongLong=function(t){var r,a;return r=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,a;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push(this.readByte());return r},e.prototype.write=function(t){var r,a,s,i;for(i=[],a=0,s=t.length;a<s;a++)r=t[a],i.push(this.writeByte(r));return i},e}(),cae=function(){var e;function t(r){var a,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(r){var a,s,i,l,u,d,f,m,g,v,x,j,b;for(b in x=Object.keys(r).length,d=Math.log(2),g=16*Math.floor(Math.log(x)/d),l=Math.floor(g/d),m=16*x-g,(s=new vd).writeInt(this.scalarType),s.writeShort(x),s.writeShort(g),s.writeShort(l),s.writeShort(m),i=16*x,f=s.pos+i,u=null,j=[],r)for(v=r[b],s.writeString(b),s.writeInt(e(v)),s.writeInt(f),s.writeInt(v.length),j=j.concat(v),b==="head"&&(u=f),f+=v.length;f%4;)j.push(0),f++;return s.write(j),a=2981146554-e(s.data),s.pos=u+8,s.writeUInt32(a),s.data},e=function(r){var a,s,i,l;for(r=wD.call(r);r.length%4;)r.push(0);for(i=new vd(r),s=0,a=0,l=r.length;a<l;a=a+=4)s+=i.readUInt32();return 4294967295&s},t}(),uae={}.hasOwnProperty,cc=function(e,t){for(var r in t)uae.call(t,r)&&(e[r]=t[r]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};jl=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var dae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return cc(e,jl),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new vd).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),uk=function(){function e(t,r){var a,s,i,l,u,d,f,m,g,v,x,j,b,A,S,T,E;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),g=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=t.readByte();break;case 4:for(x=t.readUInt16(),v=x/2,t.pos+=6,i=function(){var D,L;for(L=[],d=D=0;0<=v?D<v:D>v;d=0<=v?++D:--D)L.push(t.readUInt16());return L}(),t.pos+=2,b=function(){var D,L;for(L=[],d=D=0;0<=v?D<v:D>v;d=0<=v?++D:--D)L.push(t.readUInt16());return L}(),f=function(){var D,L;for(L=[],d=D=0;0<=v?D<v:D>v;d=0<=v?++D:--D)L.push(t.readUInt16());return L}(),m=function(){var D,L;for(L=[],d=D=0;0<=v?D<v:D>v;d=0<=v?++D:--D)L.push(t.readUInt16());return L}(),s=(this.length-t.pos+this.offset)/2,u=function(){var D,L;for(L=[],d=D=0;0<=s?D<s:D>s;d=0<=s?++D:--D)L.push(t.readUInt16());return L}(),d=S=0,E=i.length;S<E;d=++S)for(A=i[d],a=T=j=b[d];j<=A?T<=A:T>=A;a=j<=A?++T:--T)m[d]===0?l=a+f[d]:(l=u[m[d]/2+(a-j)-(v-d)]||0)!==0&&(l+=f[d]),this.codeMap[a]=65535&l}t.pos=g}return e.encode=function(t,r){var a,s,i,l,u,d,f,m,g,v,x,j,b,A,S,T,E,D,L,F,z,M,U,oe,R,q,se,J,Q,ae,he,de,_e,Y,ye,P,Z,ce,je,ke,De,Ee,ne,Ne,le,xe;switch(J=new vd,l=Object.keys(t).sort(function(H,W){return H-W}),r){case"macroman":for(b=0,A=function(){var H=[];for(j=0;j<256;++j)H.push(0);return H}(),T={0:0},i={},Q=0,_e=l.length;Q<_e;Q++)T[ne=t[s=l[Q]]]==null&&(T[ne]=++b),i[s]={old:t[s],new:T[t[s]]},A[s]=T[t[s]];return J.writeUInt16(1),J.writeUInt16(0),J.writeUInt32(12),J.writeUInt16(0),J.writeUInt16(262),J.writeUInt16(0),J.write(A),{charMap:i,subtable:J.data,maxGlyphID:b+1};case"unicode":for(q=[],g=[],E=0,T={},a={},S=f=null,ae=0,Y=l.length;ae<Y;ae++)T[L=t[s=l[ae]]]==null&&(T[L]=++E),a[s]={old:L,new:T[L]},u=T[L]-s,S!=null&&u===f||(S&&g.push(S),q.push(s),f=u),S=s;for(S&&g.push(S),g.push(65535),q.push(65535),oe=2*(U=q.length),M=2*Math.pow(Math.log(U)/Math.LN2,2),v=Math.log(M/2)/Math.LN2,z=2*U-M,d=[],F=[],x=[],j=he=0,ye=q.length;he<ye;j=++he){if(R=q[j],m=g[j],R===65535){d.push(0),F.push(0);break}if(R-(se=a[R].new)>=32768)for(d.push(0),F.push(2*(x.length+U-j)),s=de=R;R<=m?de<=m:de>=m;s=R<=m?++de:--de)x.push(a[s].new);else d.push(se-R),F.push(0)}for(J.writeUInt16(3),J.writeUInt16(1),J.writeUInt32(12),J.writeUInt16(4),J.writeUInt16(16+8*U+2*x.length),J.writeUInt16(0),J.writeUInt16(oe),J.writeUInt16(M),J.writeUInt16(v),J.writeUInt16(z),De=0,P=g.length;De<P;De++)s=g[De],J.writeUInt16(s);for(J.writeUInt16(0),Ee=0,Z=q.length;Ee<Z;Ee++)s=q[Ee],J.writeUInt16(s);for(Ne=0,ce=d.length;Ne<ce;Ne++)u=d[Ne],J.writeUInt16(u);for(le=0,je=F.length;le<je;le++)D=F[le],J.writeUInt16(D);for(xe=0,ke=x.length;xe<ke;xe++)b=x[xe],J.writeUInt16(b);return{charMap:a,subtable:J.data,maxGlyphID:E+1}}},e}(),bD=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return cc(e,jl),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,a,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)r=new uk(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var a,s;return r==null&&(r="macroman"),a=uk.encode(t,r),(s=new vd).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},e}(),fae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return cc(e,jl),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),hae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return cc(e,jl),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,a;for(a=[],r=0;r<10;++r)a.push(t.readByte());return a}(),this.charRange=function(){var r,a;for(a=[],r=0;r<4;++r)a.push(t.readInt());return a}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,a;for(a=[],r=0;r<2;r=++r)a.push(t.readInt());return a}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),mae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return cc(e,jl),e.prototype.tag="post",e.prototype.parse=function(t){var r,a,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(a=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return a=t.readUInt16(),this.offsets=t.read(a);case 262144:return this.map=(function(){var l,u,d;for(d=[],i=l=0,u=this.file.maxp.numGlyphs;0<=u?l<u:l>u;i=0<=u?++l:--l)d.push(t.readUInt32());return d}).call(this)}},e}(),pae=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},gae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return cc(e,jl),e.prototype.tag="name",e.prototype.parse=function(t){var r,a,s,i,l,u,d,f,m,g,v;for(t.pos=this.offset,t.readShort(),r=t.readShort(),u=t.readShort(),a=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)a.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+u+t.readShort()});for(d={},i=m=0,g=a.length;m<g;i=++m)s=a[i],t.pos=s.offset,f=t.readString(s.length),l=new pae(f,s),d[v=s.nameID]==null&&(d[v]=[]),d[s.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),xae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return cc(e,jl),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),vae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return cc(e,jl),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,a,s,i,l,u,d;for(t.pos=this.offset,this.metrics=[],r=0,u=this.file.hhea.numberOfMetrics;0<=u?r<u:r>u;r=0<=u?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,m;for(m=[],r=f=0;0<=s?f<s:f>s;r=0<=s?++f:--f)m.push(t.readInt16());return m}(),this.widths=(function(){var f,m,g,v;for(v=[],f=0,m=(g=this.metrics).length;f<m;f++)i=g[f],v.push(i.advance);return v}).call(this),a=this.widths[this.widths.length-1],d=[],r=l=0;0<=s?l<s:l>s;r=0<=s?++l:--l)d.push(this.widths.push(a));return d},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),wD=[].slice,yae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return cc(e,jl),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,a,s,i,l,u,d,f,m,g;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,a=i.indexOf(t),(s=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+a,l=(u=new vd(r.read(s))).readShort(),f=u.readShort(),g=u.readShort(),d=u.readShort(),m=u.readShort(),this.cache[t]=l===-1?new wae(u,f,g,d,m):new bae(u,l,f,g,d,m),this.cache[t]))},e.prototype.encode=function(t,r,a){var s,i,l,u,d;for(l=[],i=[],u=0,d=r.length;u<d;u++)s=t[r[u]],i.push(l.length),s&&(l=l.concat(s.encode(a)));return i.push(l.length),{table:l,offsets:i}},e}(),bae=function(){function e(t,r,a,s,i,l){this.raw=t,this.numberOfContours=r,this.xMin=a,this.yMin=s,this.xMax=i,this.yMax=l,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),wae=function(){function e(t,r,a,s,i){var l,u;for(this.raw=t,this.xMin=r,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;u=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&u;)l.pos+=1&u?4:2,128&u?l.pos+=8:64&u?l.pos+=4:8&u&&(l.pos+=2)}return e.prototype.encode=function(){var t,r,a;for(r=new vd(wD.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),jae=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return cc(e,jl),e.prototype.tag="loca",e.prototype.parse=function(t){var r,a;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,l=0;l<a.length;++l)if(a[l]=s,i<r.length&&r[i]==l){++i,a[l]=s;var u=this.offsets[l],d=this.offsets[l+1]-u;d>0&&(s+=d)}for(var f=new Array(4*a.length),m=0;m<a.length;++m)f[4*m+3]=255&a[m],f[4*m+2]=(65280&a[m])>>8,f[4*m+1]=(16711680&a[m])>>16,f[4*m]=(4278190080&a[m])>>24;return f},e}(),_ae=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,a,s,i;for(r in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)a=i[r],t[r]=s[a];return t},e.prototype.glyphsFor=function(t){var r,a,s,i,l,u,d;for(s={},l=0,u=t.length;l<u;l++)s[i=t[l]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(a=s[i])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(i in d=this.glyphsFor(r))a=d[i],s[i]=a;return s},e.prototype.encode=function(t,r){var a,s,i,l,u,d,f,m,g,v,x,j,b,A,S;for(s in a=bD.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(t),x={0:0},S=a.charMap)x[(d=S[s]).old]=d.new;for(j in v=a.maxGlyphID,l)j in x||(x[j]=v++);return m=function(T){var E,D;for(E in D={},T)D[T[E]]=E;return D}(x),g=Object.keys(m).sort(function(T,E){return T-E}),b=function(){var T,E,D;for(D=[],T=0,E=g.length;T<E;T++)u=g[T],D.push(m[u]);return D}(),i=this.font.glyf.encode(l,b,x),f=this.font.loca.encode(i.offsets,b),A={cmap:this.font.cmap.raw(),glyf:i.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(A["OS/2"]=this.font.os2.raw()),this.font.directory.encode(A)},e}();ir.API.PDFObject=function(){var e;function t(){}return e=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},t.convert=function(r){var a,s,i,l;if(Array.isArray(r))return"["+function(){var u,d,f;for(f=[],u=0,d=r.length;u<d;u++)a=r[u],f.push(t.convert(a));return f}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)l=r[s],i.push("/"+s+" "+t.convert(l));return i.push(">>"),i.join(`
`)}return""+r},t}();const jD=async()=>ir;async function Nae(e,t){const r=await jD(),a=new r("p","mm","a4"),s=a.internal.pageSize.getWidth(),i=20;a.setFontSize(20),a.setFont("helvetica","bold"),a.text(t.title,i,30),t.subtitle&&(a.setFontSize(14),a.setFont("helvetica","normal"),a.text(t.subtitle,i,40)),a.setFontSize(12),a.setFont("helvetica","normal"),a.text(`Company: ${t.companyName}`,i,55),a.text(`Generated: ${t.generatedDate}`,i,65),a.text(`Currency: ${t.currency}`,i,75),a.setLineWidth(.5),a.line(i,85,s-i,85);const l=95,u=[40,35,25,25,25,30],d=["Investor",`Amount (${t.currency})`,"Equity %",`Utilized (${t.currency})`,`Remaining (${t.currency})`,"Date"];a.setFontSize(10),a.setFont("helvetica","bold");let f=i;d.forEach((v,x)=>{a.text(v,f,l),f+=u[x]}),a.setFont("helvetica","normal");let m=l+10;e.forEach((v,x)=>{m>250&&(a.addPage(),m=30,a.setFont("helvetica","bold"),f=i,d.forEach((b,A)=>{a.text(b,f,m),f+=u[A]}),m+=10,a.setFont("helvetica","normal")),f=i,[v.investorName,v.investmentAmount,v.equityAllocated,v.utilized,v.remainingFunds,v.investmentDate].forEach((b,A)=>{const S=Math.floor(u[A]/2),T=b.length>S?b.substring(0,S-3)+"...":b;a.text(T,f,m),f+=u[A]}),m+=8});const g=a.getNumberOfPages();for(let v=1;v<=g;v++)a.setPage(v),a.setFontSize(8),a.setFont("helvetica","normal"),a.text(`Page ${v} of ${g}`,s-i-20,a.internal.pageSize.getHeight()-10);return a.output("blob")}async function Sae(e,t,r){const a=await jD(),s=new a("p","mm","a4"),i=s.internal.pageSize.getWidth(),l=20;s.setFontSize(20),s.setFont("helvetica","bold"),s.text(`${r.title} - ${e}`,l,30),r.subtitle&&(s.setFontSize(14),s.setFont("helvetica","normal"),s.text(r.subtitle,l,40)),s.setFontSize(12),s.setFont("helvetica","normal"),s.text(`Company: ${r.companyName}`,l,55),s.text(`Investor: ${e}`,l,65),s.text(`Generated: ${r.generatedDate}`,l,75),s.text(`Currency: ${r.currency}`,l,85);let u;r.investmentAmount||r.equityAllocated||r.utilizedAmount||r.remainingAmount?(s.text(`Investment Amount: ${r.investmentAmount||"N/A"} ${r.currency}`,l,95),s.text(`Equity Allocated: ${r.equityAllocated||"N/A"}`,l,105),s.text(`Utilized Amount: ${r.utilizedAmount||"N/A"} ${r.currency}`,l,115),s.text(`Remaining Amount: ${r.remainingAmount||"N/A"} ${r.currency}`,l,125),s.setLineWidth(.5),s.line(l,135,i-l,135),u=145):(s.setLineWidth(.5),s.line(l,95,i-l,95),u=105);const d=[25,50,25,30,30],f=["Date","Description",`Amount (${r.currency})`,"Source",`Remaining (${r.currency})`];s.setFontSize(10),s.setFont("helvetica","bold");let m=l;f.forEach((b,A)=>{s.text(b,m,u),m+=d[A]}),s.setFont("helvetica","normal");let g=u+10;t.forEach((b,A)=>{g>250&&(s.addPage(),g=30,s.setFont("helvetica","bold"),m=l,f.forEach((T,E)=>{s.text(T,m,g),m+=d[E]}),g+=10,s.setFont("helvetica","normal")),m=l,[b.date,b.description,b.amount,b.fundingSource,b.remainingFunds].forEach((T,E)=>{const D=Math.floor(d[E]/2),L=T.length>D?T.substring(0,D-3)+"...":T;s.text(L,m,g),m+=d[E]}),g+=8}),g+=20,s.setFontSize(12),s.setFont("helvetica","bold"),s.text("Summary",l,g),g+=10,s.setFontSize(10),s.setFont("helvetica","normal");const v=t.length,x=t.reduce((b,A)=>{const S=parseFloat(A.amount.replace(/[^0-9.-]/g,""))||0;return b+S},0);s.text(`Total Transactions: ${v}`,l,g),g+=8,s.text(`Total Amount: ${x.toLocaleString()} ${r.currency}`,l,g),v===0&&(g+=15,s.setFontSize(10),s.setFont("helvetica","italic"),s.text("Note: No detailed expense transactions found for this investor.",l,g),g+=8,s.text("This may indicate that funds were utilized through other means",l,g),g+=8,s.text("or that expense records are not properly linked to this funding source.",l,g));const j=s.getNumberOfPages();for(let b=1;b<=j;b++)s.setPage(b),s.setFontSize(8),s.setFont("helvetica","normal"),s.text(`Page ${b} of ${j}`,i-l-20,s.internal.pageSize.getHeight()-10);return s.output("blob")}function dk(e,t){const r=URL.createObjectURL(e),a=document.createElement("a");a.href=r,a.download=t,a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}const f2=(e,t)=>ld(e,t),fk=["#1e40af","#1d4ed8","#3b82f6","#60a5fa"],Aae=({startup:e,userRole:t,user:r,onActivateFundraising:a,onInvestorAdded:s,onUpdateFounders:i,isViewOnly:l})=>{const u=qv(e),[d,f]=_.useState(!1),[m,g]=_.useState(!1),[v,x]=_.useState(!1),[j,b]=_.useState(!0),[A,S]=_.useState(null),[T,E]=_.useState(null);_.useEffect(()=>{(async()=>{if(e!=null&&e.id){console.log(" DIRECT DATABASE CHECK FOR STARTUP ID:",e.id);const{data:Pe,error:it}=await G.from("founders").select("*").eq("startup_id",e.id);console.log(" Direct founders query result:",Pe,it);const{data:ht,error:ct}=await G.from("startup_shares").select("*").eq("startup_id",e.id);console.log(" Direct shares query result:",ht,ct);const{data:et,error:Pt}=await G.from("startups").select("country_of_registration, company_type, registration_date, currency, country, total_shares, price_per_share, esop_reserved_shares").eq("id",e.id);console.log(" Direct profile query result:",et,Pt)}})()},[e==null?void 0:e.id]);const[D,L]=_.useState([]),[F,z]=_.useState([]),[M,U]=_.useState([]),[oe,R]=_.useState([]),[q,se]=_.useState([]),[J,Q]=_.useState([]),[ae,he]=_.useState([]),[de,_e]=_.useState({totalEquityFunding:0,totalDebtFunding:0,totalGrantFunding:0,totalInvestments:0,avgEquityAllocated:0}),[Y,ye]=_.useState("investment"),[P,Z]=_.useState(Fc.Free),ce=(t==="Startup"||t==="Admin")&&!l;console.log("CapTableTab - userRole:",t,"isViewOnly:",l,"canEdit:",ce);const[je,ke]=_.useState(!1),[De,Ee]=_.useState({active:!1,type:wa.SeriesA,value:5e6,equity:15,validationRequested:!1,pitchDeckUrl:"",pitchVideoUrl:""}),[ne,Ne]=_.useState(!1),[le,xe]=_.useState([]),[H,W]=_.useState(!1),[B,ee]=_.useState(null),[X,ge]=_.useState(!1),[be,$e]=_.useState(null),[Ze,pe]=_.useState(!1),[V,Le]=_.useState(null),[ft,kt]=_.useState(!1),[Mt,Lt]=_.useState(null),[at,Nt]=_.useState([]),[Ie,Tt]=_.useState(!1),[mt,Et]=_.useState(null),[zt,ur]=_.useState([]),[Rt,Vt]=_.useState([]),[Qt,hr]=_.useState(0),[pr,Be]=_.useState(null),[We,vt]=_.useState(""),[Fe,Te]=_.useState(""),[nt,we]=_.useState(""),[Ve,Ct]=_.useState(""),[Dt,Wt]=_.useState(""),[cr,Ot]=_.useState(""),[$t,rr]=_.useState(""),[qt,Sr]=_.useState(""),[Na,Tr]=_.useState(""),[on,$a]=_.useState(""),[Pa,ea]=_.useState(""),[hn,ta]=_.useState(""),[gr,ra]=_.useState(""),[ci,wn]=_.useState(""),[_l,qo]=_.useState(""),Ts=()=>{const $=M.reduce((et,Pt)=>et+(Pt.shares||0),0),Pe=D.reduce((et,Pt)=>et+(Pt.shares||0),0),it=(T==null?void 0:T.esopReservedShares)||e.esopReservedShares||0,ht=F.filter(et=>(et.feeType==="Equity"||et.feeType==="Hybrid")&&et.shares&&et.shares>0).reduce((et,Pt)=>et+(Pt.shares||0),0),ct=$+Pe+it+ht;return console.log(" Total Shares Calculation:",{totalFounderShares:$,totalInvestorShares:Pe,esopReservedShares:it,totalRecognitionShares:ht,totalShares:ct,recognitionRecords:F.map(et=>({id:et.id,feeType:et.feeType,shares:et.shares,programName:et.programName}))}),ct},zn=($,Pe)=>({isValid:!0,availableShares:0}),[Vn,to]=_.useState([]),[ro,Ys]=_.useState(!1);_.useEffect(()=>{console.log(" useEffect triggered - loading data for startup:",e==null?void 0:e.id),e!=null&&e.id&&(Os(),Mn(),Nl())},[e==null?void 0:e.id]),_.useEffect(()=>{M.length>0},[M,D,e.esopReservedShares]),_.useEffect(()=>{const $=Number(Ve),Pe=Number(Dt);if(console.log(" Auto-calculation triggered:",{shares:$,pricePerShare:Pe,invSharesDraft:Ve,invPricePerShareDraft:Dt}),Number.isFinite($)&&$>0&&Number.isFinite(Pe)&&Pe>0){const it=$*Pe;vt(String(it));const ht=Ts(),ct=ht+$;if(console.log(" Share calculation details:",{currentTotalShares:ht,postMoneyTotalShares:ct,shares:$}),ct>0){const et=$/ct*100;Te(String(et.toFixed(2)));const Pt=it*100/et;we(String(Pt.toFixed(2))),console.log(" Calculations completed:",{amount:it,equityPercentage:et.toFixed(2),postMoney:Pt.toFixed(2),currentTotalShares:ht,postMoneyTotalShares:ct,shares:$})}else{console.log(" No existing shares found, using fallback calculation");const et=$*4,Pt=et+$,Ft=$/Pt*100;Te(String(Ft.toFixed(2))),we(String(it.toFixed(2))),console.log(" Fallback calculation:",{assumedFounderShares:et,totalSharesWithFounders:Pt,equityPercentage:Ft.toFixed(2),amount:it})}}else($===0||Pe===0)&&(vt(""),Te(""),we(""))},[Ve,Dt,M,D,e.esopReservedShares,F]),_.useEffect(()=>{const $=Number(cr),Pe=Number($t);if(console.log(" Recognition auto-calculation triggered:",{shares:$,pricePerShare:Pe,recSharesDraft:cr,recPricePerShareDraft:$t}),Number.isFinite($)&&$>0&&Number.isFinite(Pe)&&Pe>0){const it=$*Pe;Sr(String(it));const ht=Ts(),ct=ht+$;if(console.log(" Recognition share calculation details:",{currentTotalShares:ht,postMoneyTotalShares:ct,shares:$}),ct>0){const et=$/ct*100;Tr(String(et.toFixed(2)));const Pt=it*100/et;$a(String(Pt.toFixed(2))),console.log(" Recognition calculations completed:",{amount:it,equityPercentage:et.toFixed(2),postMoney:Pt.toFixed(2),currentTotalShares:ht,postMoneyTotalShares:ct,shares:$})}else{console.log(" No existing shares found for recognition, using fallback calculation");const et=$*4,Pt=et+$,Ft=$/Pt*100;Tr(String(Ft.toFixed(2))),$a(String(it.toFixed(2))),console.log(" Recognition fallback calculation:",{assumedFounderShares:et,totalSharesWithFounders:Pt,equityPercentage:Ft.toFixed(2),amount:it})}}else($===0||Pe===0)&&(Sr(""),Tr(""),$a(""))},[cr,$t,M,D,e.esopReservedShares,F]),_.useEffect(()=>{const $=Number(Pa),Pe=Number(hn);if(console.log(" Edit Recognition auto-calculation triggered:",{shares:$,pricePerShare:Pe,editRecSharesDraft:Pa,editRecPricePerShareDraft:hn}),Number.isFinite($)&&$>0&&Number.isFinite(Pe)&&Pe>0){const it=$*Pe;ra(String(it));const ht=Ts(),ct=ht+$;if(console.log(" Edit Recognition share calculation details:",{currentTotalShares:ht,postMoneyTotalShares:ct,shares:$}),ct>0){const et=$/ct*100;wn(String(et.toFixed(2)));const Pt=it*100/et;qo(String(Pt.toFixed(2))),console.log(" Edit Recognition calculations completed:",{amount:it,equityPercentage:et.toFixed(2),postMoney:Pt.toFixed(2),currentTotalShares:ht,postMoneyTotalShares:ct,shares:$})}else{console.log(" No existing shares found for edit recognition, using fallback calculation");const et=$*4,Pt=et+$,Ft=$/Pt*100;wn(String(Ft.toFixed(2))),qo(String(it.toFixed(2))),console.log(" Edit Recognition fallback calculation:",{assumedFounderShares:et,totalSharesWithFounders:Pt,equityPercentage:Ft.toFixed(2),amount:it})}}else($===0||Pe===0)&&(ra(""),wn(""),qo(""))},[Pa,hn,M,D,e.esopReservedShares,F]),_.useEffect(()=>{var $,Pe,it,ht,ct;Ze&&V&&(ea((($=V.shares)==null?void 0:$.toString())||""),ta(((Pe=V.pricePerShare)==null?void 0:Pe.toString())||""),ra(((it=V.investmentAmount)==null?void 0:it.toString())||""),wn(((ht=V.equityAllocated)==null?void 0:ht.toString())||""),qo(((ct=V.postMoneyValuation)==null?void 0:ct.toString())||""))},[Ze,V]),_.useEffect(()=>{const $=Ts();if($<=0){hr(0);return}let Pe=e.currentValuation||0;if(D&&D.length>0){const ht=[...D].sort((ct,et)=>new Date(et.date).getTime()-new Date(ct.date).getTime())[0];ht!=null&&ht.postMoneyValuation&&ht.postMoneyValuation>0&&(Pe=ht.postMoneyValuation)}const it=Pe>0?Pe/$:0;hr(it)},[M,D,e.currentValuation,e.esopReservedShares,F]),_.useEffect(()=>{if(!(e!=null&&e.id))return;console.log(" Setting up real-time subscription for startup:",e.id);const $=G.channel("offers_received_changes").on("postgres_changes",{event:"*",schema:"public",table:"opportunity_applications",filter:`startup_id=eq.${e.id}`},async Pe=>{console.log(" Offers received change detected:",Pe),console.log(" Change details:",{event:Pe.eventType,table:Pe.table,record:Pe.new,old:Pe.old}),await Mn()}).subscribe(Pe=>{console.log(" Real-time subscription status:",Pe)});return()=>{console.log(" Unsubscribing from offers received changes"),$.unsubscribe()}},[e.id]),_.useEffect(()=>{if(!(e!=null&&e.id))return;console.log(" Setting up real-time subscription for recognition records:",e.id);const $=G.channel("recognition_records_changes").on("postgres_changes",{event:"*",schema:"public",table:"recognition_records",filter:`startup_id=eq.${e.id}`},async Pe=>{console.log(" Recognition records change detected:",Pe),console.log(" Change details:",{event:Pe.eventType,table:Pe.table,record:Pe.new,old:Pe.old});const it=await F0.getRecognitionRecordsByStartupId(e.id);z(it)}).subscribe(Pe=>{console.log(" Recognition records real-time subscription status:",Pe)});return()=>{console.log(" Unsubscribing from recognition records changes"),$.unsubscribe()}},[e.id]);const Os=async()=>{var $;if(e!=null&&e.id){console.log(" CapTableTab loading data for startup ID:",e.id),console.log(" Startup object:",e),console.log(" Startup ESOP data:",{esopReservedShares:e.esopReservedShares,pricePerShare:e.pricePerShare,totalShares:e.totalShares}),b(!0),S(null);try{const[Pe,it,ht,ct,et,Pt,Ft,yt,or,wr,Wr,ga,Fr]=await Promise.allSettled([na.getInvestmentRecords(e.id),na.getFounders(e.id),na.getFundraisingDetails(e.id),na.getValuationHistoryData(e.id),na.getEquityDistributionData(e.id),na.getInvestmentSummary(e.id),na.getStartupSharesData(e.id),q0.getIncubationPrograms(e.id),q0.getPopularPrograms(),cs.getFinancialRecords(e.id),F0.getRecognitionRecordsByStartupId(e.id),G.from("startups").select("country_of_registration, company_type, registration_date, currency, country, total_shares, price_per_share, esop_reserved_shares").eq("id",e.id).single(),id.getEmployees(e.id)]);if(L(Pe.status==="fulfilled"?Pe.value:[]),e.founders&&e.founders.length>0)console.log(" Startup already has founders data, preserving it:",e.founders),U(e.founders);else{const Bt=it.status==="fulfilled"?it.value:[];console.log(" Founders data loaded from database:",Bt),console.log(" Founders data status:",it.status),it.status==="rejected"&&console.error(" Founders data loading failed:",it.reason),U(Bt)}if(console.log(" All data loading results:"),console.log("Records:",Pe.status,Pe.status==="fulfilled"?Pe.value.length:Pe.reason),console.log("Founders:",it.status,it.status==="fulfilled"?it.value.length:it.reason),console.log("Total Shares:",Ft.status,Ft.status==="fulfilled"?Ft.value:Ft.reason),R(ht.status==="fulfilled"?ht.value:[]),se(ct.status==="fulfilled"?ct.value.map(Bt=>({roundName:Bt.round_name,valuation:Bt.valuation,investmentAmount:Bt.investment_amount,date:Bt.date})):[]),Q(et.status==="fulfilled"?et.value.map(Bt=>({holderType:Bt.holder_type,equityPercentage:Bt.equity_percentage,totalAmount:Bt.total_amount})):[]),he(Fr.status==="fulfilled"?Fr.value:[]),_e(Pt.status==="fulfilled"?{totalEquityFunding:Pt.value.total_equity_funding||0,totalDebtFunding:Pt.value.total_debt_funding||0,totalGrantFunding:Pt.value.total_grant_funding||0,totalInvestments:Pt.value.total_investments||0,avgEquityAllocated:Pt.value.avg_equity_allocated||0}:{totalEquityFunding:0,totalDebtFunding:0,totalGrantFunding:0,totalInvestments:0,avgEquityAllocated:0}),e.esopReservedShares!==void 0||e.pricePerShare!==void 0)console.log(" Startup already has share data, preserving it:",{esopReservedShares:e.esopReservedShares,pricePerShare:e.pricePerShare,totalShares:e.totalShares}),hr(e.pricePerShare||0);else if(Ft.status==="fulfilled"){const Bt=Ft.value,xa=Number(Bt.esopReservedShares)||0,ma=Number(Bt.pricePerShare)||0;if(console.log(" Shares data loaded from database:",{esopShares:xa,pricePerShare:ma}),console.log(" Raw shares data:",Bt),console.log(" Setting price per share to:",ma),hr(ma),e&&(e.esopReservedShares=xa,e.totalShares=Bt.totalShares||0,e.pricePerShare=ma,console.log(" Updated startup object with fresh data:",{esopReservedShares:e.esopReservedShares,totalShares:e.totalShares,pricePerShare:e.pricePerShare}),console.log(" Startup object after update:",e),E({esopReservedShares:xa,totalShares:Bt.totalShares||0,pricePerShare:ma})),xa===0&&ma===0){console.log(" No startup_shares record found, creating default record...");try{await na.upsertEsopReservedShares(e.id,1e4),console.log(" Created default startup_shares record with ESOP:",1e4),e&&(e.esopReservedShares=1e4)}catch(Ls){console.error(" Failed to create default startup_shares record:",Ls)}}}else{console.error(" Shares data loading failed:",Ft.reason);try{const{data:Bt}=await G.from("startup_profiles").select("price_per_share, esop_reserved_shares").eq("startup_id",e.id).single();Bt?(console.log(" Fallback: Loading shares from startup_profiles:",Bt),hr(Bt.price_per_share||0),e&&(e.esopReservedShares=Bt.esop_reserved_shares||0)):hr(0)}catch(Bt){console.error(" Fallback shares loading also failed:",Bt),hr(0)}}ht.status==="fulfilled"&&ht.value.length>0&&Ee(ht.value[0]),Wr.status==="fulfilled"?(z(Wr.value),console.log(" Recognition records loaded:",Wr.value.length)):console.error("Failed to load recognition records:",Wr.reason),console.log(" Processing startup profile data..."),console.log(" Startup data status:",ga.status),ga.status==="rejected"&&console.error(" Startup data loading failed:",ga.reason);const Or=ga.status==="fulfilled"?ga.value:null;if(console.log(" Startup data result:",Or),Or){Be(Or),console.log(" Startup profile data loaded and set:",Or);const Bt=Or.esop_reserved_shares||0,xa=Or.total_shares||0,ma=Or.price_per_share||0;console.log(" ESOP data from database:",{esopReservedShares:Bt,totalShares:xa,pricePerShare:ma}),E({esopReservedShares:Bt,totalShares:xa,pricePerShare:ma}),e&&(e.esopReservedShares=Bt,e.totalShares=xa,e.pricePerShare=ma)}else console.log(" No startup profile data available");if([Pe,it,ht,ct,et,Pt,yt,or,wr,Wr].forEach((Bt,xa)=>{Bt.status==="rejected"&&console.warn(`Failed to load data ${xa}:`,Bt.reason)}),console.log(" Cap Table Data Loaded:",{investmentRecords:Pe.status==="fulfilled"?Pe.value.length:"failed",founders:it.status==="fulfilled"?it.value.length:"failed",fundraisingDetails:ht.status==="fulfilled"?ht.value.length:"failed",valuationHistory:ct.status==="fulfilled"?ct.value.length:"failed",equityDistribution:et.status==="fulfilled"?et.value.length:"failed",investmentSummary:Pt.status==="fulfilled"?Pt.value:"failed",totalShares:Ft.status==="fulfilled"?Ft.value:"failed",incubationPrograms:yt.status==="fulfilled"?yt.value.length:"failed",popularPrograms:or.status==="fulfilled"?or.value.length:"failed",financialRecords:wr.status==="fulfilled"?wr.value.length:"failed",recognitionRecords:Wr.status==="fulfilled"?Wr.value.length:"failed"}),Pt.status==="fulfilled"&&(console.log(" Investment Summary Raw Data:",Pt.value),console.log(" Investment Summary Mapped Data:",{totalEquityFunding:Pt.value.total_equity_funding||0,totalDebtFunding:Pt.value.total_debt_funding||0,totalGrantFunding:Pt.value.total_grant_funding||0,totalInvestments:Pt.value.total_investments||0,avgEquityAllocated:Pt.value.avg_equity_allocated||0})),ct.status==="fulfilled"?(console.log(" Valuation History Raw Data:",ct.value),console.log(" Valuation History Mapped Data:",ct.value.map(Bt=>({roundName:Bt.round_name,valuation:Bt.valuation,investmentAmount:Bt.investment_amount,date:Bt.date})))):ct.status==="rejected"&&console.error(" Valuation History Failed:",ct.reason),et.status==="fulfilled"?(console.log(" Equity Distribution Raw Data:",et.value),console.log(" Equity Distribution Mapped Data:",et.value.map(Bt=>({holderType:Bt.holder_type,equityPercentage:Bt.equity_percentage,totalAmount:Bt.total_amount})))):et.status==="rejected"&&console.error(" Equity Distribution Failed:",et.reason),yt.status==="fulfilled"?(Nt(yt.value),console.log(" Incubation Programs Data:",yt.value),console.log(" Incubation Programs Count:",(($=yt.value)==null?void 0:$.length)||0)):yt.status==="rejected"?(console.error(" Incubation Programs Failed:",yt.reason),Nt([])):(console.log(" Incubation Programs Status: unavailable"),Nt([])),or.status==="fulfilled"&&(ur(or.value),console.log(" Popular Programs:",or.value)),wr.status==="fulfilled"){Vt(wr.value),console.log(" Financial Records:",wr.value.length,"records loaded");const Bt=wr.value.filter(ma=>ma.funding_source&&ma.funding_source.toLowerCase().includes("pooja"));Bt.length>0?console.log(" Found Pooja Financial Records:",Bt):console.log(" No Pooja financial records found");const xa=wr.value.filter(ma=>ma.funding_source).map(ma=>ma.funding_source);console.log(" All Funding Sources:",xa)}else wr.status==="rejected"&&console.error(" Financial Records Failed:",wr.reason)}catch(Pe){console.error("Error loading cap table data:",Pe),S("Failed to load cap table data")}finally{b(!1)}}},Nl=()=>{if(!(e!=null&&e.id))return;const $=na.subscribeToInvestmentRecords(e.id,ct=>{L(ct)}),Pe=na.subscribeToFounders(e.id,ct=>{U(ct)}),it=na.subscribeToFundraisingDetails(e.id,ct=>{R(ct),ct.length>0&&Ee(ct[0])}),ht=q0.subscribeToIncubationPrograms(e.id,ct=>{Nt(ct)});return()=>{$==null||$.unsubscribe(),Pe==null||Pe.unsubscribe(),it==null||it.unsubscribe(),ht==null||ht.unsubscribe()}},Sl=()=>{console.log(" Opening founder edit modal with founders:",M),xe(M.map($=>({...$,id:Math.random()*1e4}))),Ne(!0)},Fo=($,Pe,it)=>{console.log(" Editing founder:",{id:$,field:Pe,value:it}),xe(le.map(ht=>{if(ht.id===$){const ct={...ht};return Pe==="equityPercentage"||Pe==="shares"?ct[Pe]=it===""?void 0:Number(it):ct[Pe]=it,ct}return ht}))},Kr=()=>{xe([...le,{id:Date.now(),name:"",email:"",equityPercentage:void 0,shares:void 0}])},uc=$=>{le.length>1&&xe(le.filter(Pe=>Pe.id!==$))},hu=async()=>{if(e!=null&&e.id)try{const $=le.map(({id:et,...Pt})=>Pt),Pe=$.reduce((et,Pt)=>et+(Pt.shares||0),0),it=D.reduce((et,Pt)=>et+(Pt.shares||0),0),ht=e.esopReservedShares||0,ct=Pe+it+ht;console.log(" Saving founders with equity data:",$.map(et=>({name:et.name,email:et.email,equityPercentage:et.equityPercentage,shares:et.shares}))),await na.deleteAllFounders(e.id),console.log(" Deleted existing founders");for(const et of $)await na.addFounder(e.id,et),console.log(" Added founder with equity:",{name:et.name,equityPercentage:et.equityPercentage,shares:et.shares});i(e.id,$),Ne(!1),S(null),console.log(" Founders saved successfully")}catch($){console.error("Error saving founders:",$),S("Failed to save founder information")}},Ds=async()=>{var $;if(e!=null&&e.id)try{if(!De.type){S("Fundraising type is required");return}if(!De.value||De.value<=0){S("Valid fundraising value is required");return}if(!De.equity||De.equity<=0||De.equity>100){S("Valid equity percentage (1-100%) is required");return}b(!0),S(null);const Pe=document.getElementById("fr-deck"),it=($=Pe==null?void 0:Pe.files)==null?void 0:$[0];let ht=De.pitchDeckUrl;it&&(console.log(" Uploading pitch deck:",it.name),ht=await na.uploadPitchDeck(it,e.id),console.log(" Pitch deck uploaded:",ht));const ct={...De,pitchDeckUrl:ht};console.log(" Saving fundraising details:",ct);const et=await na.updateFundraisingDetails(e.id,ct);if(console.log(" Fundraising details saved:",et),Ee(et),R([et]),et.validationRequested)try{console.log(" Creating/updating validation request for startup:",e.name);const Pt=await lx.createValidationRequest(e.id,e.name);console.log(" Validation request processed:",Pt),alert(`${e.name} fundraising is now active! A Startup Nation validation request has been submitted and is pending admin approval.`)}catch(Pt){console.error(" Error processing validation request:",Pt),alert(`${e.name} fundraising is now active! However, there was an issue submitting the validation request. Please contact support.`)}else{try{console.log(" Removing validation request for startup:",e.name),await lx.removeValidationRequest(e.id),console.log(" Validation request removed")}catch(Pt){console.error(" Error removing validation request:",Pt)}a(et,e),alert(`${e.name} fundraising is now active!`)}ke(!1),console.log(" Fundraising details updated successfully!"),await Os()}catch(Pe){console.error(" Error saving fundraising details:",Pe);let it="Failed to save fundraising details. Please try again.";Pe instanceof Error&&(Pe.message.includes("RLS")?it="Permission denied. Please check your authentication.":Pe.message.includes("foreign key")?it="Invalid startup reference. Please refresh the page.":Pe.message.includes("unique constraint")?it="Fundraising details already exist for this startup.":Pe.message.includes("not null")?it="Please fill in all required fields.":it=`Database error: ${Pe.message}`),S(it)}finally{b(!1)}},ao=async $=>{var Pe,it;if(console.log(" handleAddInvestment called!"),$.preventDefault(),!(e!=null&&e.id)){console.error(" No startup ID found!");return}try{const ht=new FormData($.currentTarget),ct=(it=(Pe=$.currentTarget.querySelector('input[name="inv-proof"]'))==null?void 0:Pe.files)==null?void 0:it[0];console.log(" Investment Form Debug:"),console.log("Form data entries:");for(const[pa,jn]of ht.entries())console.log(`${pa}: ${jn}`);console.log("Current state values:"),console.log("invSharesDraft:",Ve),console.log("invPricePerShareDraft:",Dt),console.log("invAmountDraft:",We),console.log("invEquityDraft:",Fe),console.log("invPostMoneyDraft:",nt),console.log("esopReservedShares:",e.esopReservedShares),console.log("founders:",M.map(pa=>({name:pa.name,shares:pa.shares}))),console.log("investmentRecords:",D.map(pa=>({name:pa.investorName,shares:pa.shares})));const et=ht.get("inv-date"),Pt=ht.get("inv-investor-type"),Ft=ht.get("inv-type"),yt=ht.get("inv-name"),or=ht.get("inv-code"),wr=Number(Ve),Wr=Number(Dt),ga=Number(We),Fr=Number(Fe),kr=Number(nt)||(Fr&&Fr>0?ga*100/Fr:0);if(!et){S("Date is required");return}if(!Pt){S("Investor type is required");return}if(!Ft){S("Investment type is required");return}if(!yt){S("Investor name is required");return}if(!wr||wr<=0){S("Valid number of shares is required");return}if(!Wr||Wr<=0){S("Valid price per share is required");return}if(!ga||ga<=0){S("Valid investment amount is required");return}if(!Fr||Fr<0){S("Valid equity allocation is required");return}console.log(" Shares Validation Debug:"),console.log("Requested shares:",wr),console.log("ESOP reserved shares:",e.esopReservedShares),console.log("Founder shares:",M.reduce((pa,jn)=>pa+(jn.shares||0),0)),console.log("Existing investor shares:",D.reduce((pa,jn)=>pa+(jn.shares||0),0));const ha=zn(wr);if(console.log("Validation result:",ha),ha.isValid,!kr||kr<=0){S("Post-money valuation could not be calculated");return}let Or="";ct&&(Or=await na.uploadProofDocument(e.id,ct));const Bt={id:Date.now().toString(),startupId:e.id,date:et,investorType:Pt,investmentType:Ft,investorName:yt,investorCode:or,amount:ga,equityAllocated:Fr,shares:wr,pricePerShare:Wr,postMoneyValuation:kr,proofUrl:Or};console.log("Adding investment:",Bt),console.log("Startup ID:",e.id),console.log("Investment data type:",typeof Bt),console.log("Investment data keys:",Object.keys(Bt));const{startupId:xa,...ma}=Bt;console.log("Investment data for service:",ma);const Ls=await na.addInvestmentRecord(e.id,ma);if(console.log(" Investment record saved successfully:",Ls),vt(""),Te(""),we(""),Ct(""),Wt(""),or&&or.trim().length>0){console.log("Investor code provided:",or),console.log(" Calling onInvestorAdded callback...");try{s(Ls,e),console.log(" onInvestorAdded callback executed successfully")}catch(pa){console.error(" Error in onInvestorAdded callback:",pa)}}else console.log(" No investor code provided, skipping onInvestorAdded callback");$.currentTarget&&$.currentTarget.reset(),S(null),console.log(" Reloading data after adding investment..."),await Os();try{const[pa,jn]=await Promise.allSettled([na.getValuationHistoryData(e.id),na.getEquityDistributionData(e.id)]);pa.status==="fulfilled"&&(se(pa.value.map(Ms=>({roundName:Ms.round_name,valuation:Ms.valuation,investmentAmount:Ms.investment_amount,date:Ms.date}))),console.log(" Valuation history updated after investment")),jn.status==="fulfilled"&&(Q(jn.value.map(Ms=>({holderType:Ms.holder_type,equityPercentage:Ms.equity_percentage,totalAmount:Ms.total_amount}))),console.log(" Equity distribution updated after investment"))}catch(pa){console.error("Error updating chart data:",pa)}}catch(ht){console.error("Error adding investment:",ht),S("Failed to add investment")}},es=async $=>{if(!(!(e!=null&&e.id)||!ce))try{S(null),b(!0),console.log(" Deleting investment:",$),console.log(" Amount to remove from total funding:",$.amount),console.log(" Investor code to clean up:",$.investorCode),await na.deleteInvestmentRecord($.id);try{console.log(" Updating startup funding after investment deletion"),await na.updateStartupFundingAfterDeletion(e.id,$.amount)}catch(Pe){console.warn(" Warning: Could not update startup funding:",Pe)}if($.investorCode)try{console.log(" Cleaning up startup addition requests for investor code:",$.investorCode),await C2.cleanupOrphanedRequests()}catch(Pe){console.warn(" Warning: Could not clean up startup addition requests:",Pe)}L(Pe=>Pe.filter(it=>it.id!==$.id)),W(!1),ee(null),console.log(" Reloading all data after investment deletion..."),await Os(),console.log(" Investment and all related data deleted successfully from Supabase")}catch(Pe){console.error(" Error deleting investment:",Pe),S("Failed to delete investment. Please try again."),b(!1)}finally{b(!1)}},Bo=async $=>{if($.preventDefault(),!(e!=null&&e.id))return;const Pe=new FormData($.currentTarget),it=Pe.get("rec-program-name"),ht=Pe.get("rec-facilitator-name"),ct=Pe.get("rec-facilitator-code"),et=Pe.get("rec-incubation-type"),Pt=Pe.get("rec-fee-type"),Ft=Pe.get("rec-fee-amount")?parseFloat(Pe.get("rec-fee-amount")):void 0,yt=Pe.get("rec-shares")?parseInt(Pe.get("rec-shares")):void 0,or=Pe.get("rec-price-per-share")?parseFloat(Pe.get("rec-price-per-share")):void 0,wr=Pe.get("rec-amount")?parseFloat(Pe.get("rec-amount")):void 0,Wr=Pe.get("rec-equity")?parseFloat(Pe.get("rec-equity")):void 0,ga=Pe.get("rec-postmoney")?parseFloat(Pe.get("rec-postmoney")):void 0,Fr=Pe.get("rec-agreement");if(!it||!ht||!ct||!et||!Pt||!Fr){S("Please fill in all required fields");return}try{S(null),b(!0);let kr="";if(Fr&&Fr.size>0)try{const Or=await hs.uploadFile(Fr,"startup-documents",`agreements/${e.id}/signed_agreement_${Date.now()}_${Fr.name}`);if(Or.success&&Or.url)kr=Or.url;else throw new Error(Or.error||"Upload failed")}catch(Or){console.error("Failed to upload agreement file:",Or),S("Failed to upload agreement file");return}console.log(" Debug - Data being sent to createRecognitionRecord:",{startupId:e.id,programName:it,facilitatorName:ht,facilitatorCode:ct,incubationType:et,feeType:Pt,feeAmount:Ft,shares:yt,pricePerShare:or,investmentAmount:wr,equityAllocated:Wr,postMoneyValuation:ga,signedAgreementUrl:kr});const ha=await F0.createRecognitionRecord({startupId:e.id,programName:it,facilitatorName:ht,facilitatorCode:ct,incubationType:et,feeType:Pt,feeAmount:Ft,shares:yt,pricePerShare:or,investmentAmount:wr,equityAllocated:Wr,postMoneyValuation:ga,signedAgreementUrl:kr});z(Or=>[ha,...Or]),$.currentTarget&&$.currentTarget.reset(),S(null),Z(Fc.Free),Ot(""),rr(""),Sr(""),Tr(""),$a(""),console.log(" Recognition record added successfully to backend"),console.log(" New record:",ha)}catch(kr){console.error(" Error adding recognition record:",kr),kr instanceof Error?S(kr.message):S("Failed to add recognition record")}finally{b(!1)}},Vr=async $=>{if($.preventDefault(),!(e!=null&&e.id)||!V)return;const Pe=new FormData($.currentTarget),it=Pe.get("rec-program-name"),ht=Pe.get("rec-facilitator-name"),ct=Pe.get("rec-facilitator-code"),et=Pe.get("rec-incubation-type"),Pt=Pe.get("rec-fee-type"),Ft=Pe.get("rec-fee-amount")?parseFloat(Pe.get("rec-fee-amount")):void 0,yt=Pe.get("rec-shares")?parseInt(Pe.get("rec-shares")):void 0,or=Pe.get("rec-price-per-share")?parseFloat(Pe.get("rec-price-per-share")):void 0,wr=Pe.get("rec-amount")?parseFloat(Pe.get("rec-amount")):void 0,Wr=Pe.get("rec-equity")?parseFloat(Pe.get("rec-equity")):void 0,ga=Pe.get("rec-postmoney")?parseFloat(Pe.get("rec-postmoney")):void 0,Fr=Pe.get("rec-agreement");if(!it||!ht||!ct||!et||!Pt){S("Please fill in all required fields");return}try{S(null),b(!0);let kr=V.signedAgreementUrl;if(Fr&&Fr.size>0)try{const Or=await hs.uploadFile(Fr,"startup-documents",`agreements/${e.id}/signed_agreement_${Date.now()}_${Fr.name}`);if(Or.success&&Or.url)kr=Or.url;else throw new Error(Or.error||"Upload failed")}catch(Or){console.error("Failed to upload agreement file:",Or),S("Failed to upload agreement file");return}const ha=await F0.updateRecognitionRecord(V.id,{programName:it,facilitatorName:ht,facilitatorCode:ct,incubationType:et,feeType:Pt,feeAmount:Ft,shares:yt,pricePerShare:or,investmentAmount:wr,equityAllocated:Wr,postMoneyValuation:ga,signedAgreementUrl:kr});z(Or=>Or.map(Bt=>Bt.id===V.id?ha:Bt)),pe(!1),Le(null),S(null),console.log(" Recognition record updated successfully"),console.log(" Updated record:",ha)}catch(kr){console.error(" Error updating recognition record:",kr),kr instanceof Error?S(kr.message):S("Failed to update recognition record")}finally{b(!1)}},Uo=async $=>{console.log(" Form submitted! Entry type:",Y),$.preventDefault();try{Y==="investment"?(console.log(" Calling handleAddInvestment..."),await ao($)):(console.log(" Calling handleAddRecognition..."),await Bo($))}catch(Pe){console.error(" Error in handleEntrySubmit:",Pe),S("Failed to submit form. Please try again.")}},mu=$=>{console.log(" Editing investment:",$),$e($),ge(!0)},dc=$=>{console.log(" Editing recognition:",$),Le($),pe(!0)},no=$=>{console.log(" Deleting recognition:",$),Lt($),kt(!0)},Xs=async $=>{try{b(!0);const{error:Pe}=await G.from("recognition_records").delete().eq("id",parseInt($));if(Pe){console.error("Error deleting recognition record:",Pe),S("Failed to delete recognition record. Please try again.");return}z(it=>it.filter(ht=>ht.id!==$)),kt(!1),Lt(null),console.log(" Recognition record deleted successfully")}catch(Pe){console.error("Error deleting recognition record:",Pe),S("Failed to delete recognition record. Please try again.")}finally{b(!1)}},fc=$=>{console.log(" Editing incubation program:",$),alert("Edit functionality will be implemented in the next update")},ki=async $=>{if(e!=null&&e.id)try{await q0.deleteIncubationProgram($),Tt(!1),Et(null),await Os()}catch(Pe){console.error("Error deleting program:",Pe),S("Failed to delete program")}},so=async()=>{try{const $=D.map(ct=>{const et=Cl(ct.investorName,ct.amount);return{investorName:ct.investorName,investmentAmount:ct.amount.toLocaleString(),equityAllocated:`${ct.equityAllocated}%`,utilized:et.utilized.toLocaleString(),remainingFunds:(ct.amount-et.utilized).toLocaleString(),investmentDate:new Date(ct.date).toLocaleDateString()}}),Pe={title:"Fund Utilization Report",subtitle:"Investor Investment Summary",companyName:e.name,generatedDate:new Date().toLocaleDateString(),currency:u},it=await Nae($,Pe),ht=`fund-utilization-report-${e.name.replace(/[^a-zA-Z0-9]/g,"-")}-${new Date().toISOString().split("T")[0]}.pdf`;dk(it,ht),console.log(" Fund utilization report downloaded successfully as PDF")}catch($){console.error(" Error generating fund utilization report:",$),alert("Failed to generate fund utilization report. Please try again.")}},Al=async $=>{try{const Pe=Cl($.investorName,$.amount),it=$.investorName,ht=Rt.filter(yt=>yt.record_type==="expense"&&yt.funding_source&&yt.funding_source.toLowerCase()===it.toLowerCase());console.log(" PDF Generation Debug:",{investorName:$.investorName,investorFundingSource:it,totalFinancialRecords:Rt.length,expenseRecordsFound:ht.length,utilization:Pe,allFundingSources:Rt.filter(yt=>yt.funding_source).map(yt=>yt.funding_source).filter((yt,or,wr)=>wr.indexOf(yt)===or)});const ct=ht.map(yt=>({date:new Date(yt.date).toLocaleDateString(),description:yt.description||"N/A",amount:(yt.amount||0).toLocaleString(),fundingSource:yt.funding_source||"N/A",remainingFunds:($.amount-Pe.utilized).toLocaleString()})),et={title:"Individual Fund Utilization Report",subtitle:`Detailed expense breakdown for ${$.investorName} (${Pe.percentage.toFixed(2)}% utilized)`,companyName:e.name,generatedDate:new Date().toLocaleDateString(),currency:u,investmentAmount:$.amount.toLocaleString(),equityAllocated:`${$.equityAllocated}%`,utilizedAmount:Pe.utilized.toLocaleString(),remainingAmount:($.amount-Pe.utilized).toLocaleString()},Pt=await Sae($.investorName,ct,et),Ft=`fund-utilization-${$.investorName.replace(/[^a-zA-Z0-9]/g,"-")}-${new Date().toISOString().split("T")[0]}.pdf`;dk(Pt,Ft),console.log(" Individual fund utilization report downloaded successfully as PDF")}catch(Pe){console.error(" Error generating individual fund utilization report:",Pe),alert("Failed to generate individual fund utilization report. Please try again.")}},Cl=($,Pe)=>{const it=$;$.toLowerCase().includes("pooja")&&console.log(" Debugging Pooja Utilization:",{investorName:$,investmentAmount:Pe,expectedFundingSource:it,totalFinancialRecords:Rt.length,matchingRecords:Rt.filter(et=>et.record_type==="expense"&&et.funding_source&&et.funding_source.toLowerCase()===it.toLowerCase()),allFundingSources:Rt.filter(et=>et.funding_source).map(et=>et.funding_source)});const ht=Rt.filter(et=>et.record_type==="expense"&&et.funding_source&&et.funding_source.toLowerCase()===it.toLowerCase()).reduce((et,Pt)=>et+(Pt.amount||0),0),ct=Pe>0?ht/Pe*100:0;return{utilized:ht,percentage:Math.min(ct,100)}},hc=({utilized:$,total:Pe,percentage:it})=>{const ht=$>0?Math.max(it,1):0;return n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${ht}%`}})}),n.jsxs("div",{className:"text-xs text-slate-600",children:[Lr($,u)," Utilized (",it.toFixed(4),"%)"]})]})},pu=D.length>0?D.map($=>({name:$.investmentType||"Investment Round",valuation:Number($.preMoneyValuation)||0,investment:Number($.amount)||0})).filter($=>$.valuation>0||$.investment>0):[],$o=(()=>{const $=[],Pe=M.reduce((Ft,yt)=>Ft+(yt.shares||0),0),it=D.reduce((Ft,yt)=>Ft+(yt.shares||0),0),ht=e.esopReservedShares||0,ct=Pe+it+ht;if(M.forEach(Ft=>{if(Ft.shares&&Ft.shares>0&&ct>0){const yt=Ft.shares/ct*100;yt>0&&$.push({name:`Founder (${Ft.name})`,value:yt})}}),D.forEach(Ft=>{if(Ft.shares&&Ft.shares>0&&ct>0){const yt=Ft.shares/ct*100;yt>0&&$.push({name:`Investor (${Ft.investorName})`,value:yt})}else Ft.equityAllocated&&Ft.equityAllocated>0&&$.push({name:`Investor (${Ft.investorName})`,value:Ft.equityAllocated})}),ht>0&&ct>0){const Ft=ht/ct*100;Ft>0&&$.push({name:"ESOP Pool",value:Ft})}const Pt=100-$.reduce((Ft,yt)=>Ft+yt.value,0);return Pt>.1&&$.push({name:"Unallocated",value:Pt}),$.filter(Ft=>Ft.value>0)})(),Mn=async()=>{if(console.log(" loadOffersReceived function called!"),!!(e!=null&&e.id))try{console.log(" Loading offers for startup ID:",e.id),console.log(" Startup object:",e),console.log(" User role:",t),console.log(" Is view only:",l),console.log(" Fetching investment offers...");const $=await Zn.getOffersForStartup(e.id);console.log(" Investment offers fetched:",$);const{data:Pe,error:it}=await G.from("opportunity_applications").select(`
                    id,
                    startup_id,
                    opportunity_id,
                    status,
                    diligence_status,
                    agreement_url,
                    created_at,
                    incubation_opportunities(
                        id,
                        program_name,
                        facilitator_id,
                        facilitator_code
                    )
                `).eq("startup_id",e.id).order("created_at",{ascending:!1});if(it)throw console.error("Error fetching applications:",it),it;console.log(" Raw applications data:",Pe),console.log(" Applications count:",(Pe==null?void 0:Pe.length)||0),console.log(" Startup ID being queried:",e.id),Pe&&Pe.length>0&&Pe.forEach((yt,or)=>{console.log(` App ${or}:`,{id:yt.id,startup_id:yt.startup_id,opportunity_id:yt.opportunity_id,status:yt.status,diligence_status:yt.diligence_status,incubation_opportunities:yt.incubation_opportunities})});const ht=[...new Set((Pe==null?void 0:Pe.map(yt=>{var wr;const or=yt.incubation_opportunities;return Array.isArray(or)&&or.length>0?(wr=or[0])==null?void 0:wr.facilitator_id:or==null?void 0:or.facilitator_id}).filter(Boolean))||[])];let ct={};if(ht.length>0){const{data:yt,error:or}=await G.from("users").select("id, name").in("id",ht);or?console.error("Error fetching facilitators:",or):ct=(yt||[]).reduce((wr,Wr)=>(wr[Wr.id]=Wr.name,wr),{})}console.log(" Facilitator names:",ct),console.log(" Applications before filtering:",Pe),console.log(' Applications with status "accepted":',Pe==null?void 0:Pe.filter(yt=>yt.status==="accepted")),console.log(' Applications with diligence_status "requested":',Pe==null?void 0:Pe.filter(yt=>yt.diligence_status==="requested")),console.log(" Applications that will pass filter:",Pe==null?void 0:Pe.filter(yt=>yt.status==="accepted"||yt.diligence_status==="requested"));const et=$.map(yt=>({id:`investment_${yt.id}`,from:yt.investorName||yt.investorEmail||"Unknown Investor",type:"Investment",offerDetails:`${Lr(yt.offerAmount,u)} for ${yt.equityPercentage}% equity`,status:yt.status,code:yt.id.toString(),createdAt:yt.createdAt,isInvestmentOffer:!0,investmentOfferId:yt.id,startupScoutingFee:yt.startup_scouting_fee_paid||0,investorScoutingFee:yt.investor_scouting_fee_paid||0,contactDetailsRevealed:yt.contact_details_revealed||!1})),Pt=(Pe||[]).filter(yt=>{const or=yt.status==="accepted"||yt.diligence_status==="requested";return console.log(` App ${yt.id}: status=${yt.status}, diligence_status=${yt.diligence_status}, passesFilter=${or}`),or}).map(yt=>{console.log(` Processing app ${yt.id}:`,yt);const or=yt.status==="accepted",wr=yt.diligence_status==="requested",Wr=yt.diligence_status==="approved",ga=(()=>{var xa;const Bt=yt.incubation_opportunities;return Array.isArray(Bt)&&Bt.length>0?ct[(xa=Bt[0])==null?void 0:xa.facilitator_id]||"Program Facilitator":ct[Bt==null?void 0:Bt.facilitator_id]||"Program Facilitator"})();let Fr,kr,ha;wr&&!Wr?(Fr="Due Diligence",kr=`Request for Compliance access until ${new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0]}`,ha="pending"):Wr?(Fr="Due Diligence",kr="Compliance access granted",ha="accepted"):or&&!wr?(Fr="Incubation",kr="Accepted into Program",ha="accepted"):or&&wr?(Fr="Incubation",kr="Accepted into Program - Diligence may be requested later",ha="accepted"):(Fr="Incubation",kr="Application Submitted",ha="pending");const Or={id:yt.id,from:ga,type:Fr,offerDetails:kr,status:ha,code:(()=>{var xa;const Bt=yt.incubation_opportunities;return Array.isArray(Bt)&&Bt.length>0?((xa=Bt[0])==null?void 0:xa.facilitator_code)||"FAC-XXXXXX":(Bt==null?void 0:Bt.facilitator_code)||"FAC-XXXXXX"})(),agreementUrl:yt.agreement_url,applicationId:yt.id,createdAt:yt.created_at};return console.log(" Created offer:",Or),Or}),Ft=[...et,...Pt].sort((yt,or)=>new Date(or.createdAt).getTime()-new Date(yt.createdAt).getTime());console.log(" Investment offers:",et),console.log(" Incubation offers:",Pt),console.log(" Combined offers array:",Ft),console.log(" Final offers count:",Ft.length),console.log(" Setting offersReceived state to:",Ft),to(Ft),console.log(" State set complete")}catch($){console.error("Error loading offers received:",$),to([])}},ui=async $=>{if(e!=null&&e.id){if($.status==="accepted"||ro){console.log(" Offer already accepted or processing, preventing duplicate acceptance");return}Ys(!0);try{console.log(" Accepting diligence request for offer:",$.id),console.log(" Offer details:",{id:$.id,applicationId:$.applicationId,type:$.type,status:$.status,from:$.from});const{data:Pe,error:it}=await G.from("opportunity_applications").select("diligence_status").eq("id",$.applicationId).single();if(it)throw console.error("Error checking current status:",it),it;if(Pe.diligence_status==="approved"){console.log(" Diligence already approved in database"),await Mn();return}if(!window.confirm("By accepting this due diligence request, you are granting the facilitator view-only access to your compliance tab. Do you want to continue?")){Ys(!1);return}let ct=null;try{const{data:yt,error:or}=await G.rpc("safe_update_diligence_status",{p_application_id:$.applicationId,p_new_status:"approved",p_old_status:"requested"});if(or)throw console.error("RPC function error:",or),or;ct=yt}catch(yt){throw console.error("RPC function failed:",yt),yt}if(!ct){console.log(" Diligence was already approved or status changed"),await Mn();return}const{data:et,error:Pt}=await G.from("opportunity_applications").select("agreement_url").eq("id",$.applicationId).single();Pt&&console.warn("Could not fetch updated agreement URL:",Pt),console.log(" Diligence request approved in database"),console.log(" Updating local state for offer:",$.id),to(yt=>{const or=yt.map(wr=>wr.id===$.id?{...wr,status:"accepted",type:"Due Diligence",offerDetails:"Compliance access granted",agreementUrl:(et==null?void 0:et.agreement_url)||wr.agreementUrl}:wr);return console.log(" Local state updated:",or),or}),await Mn();const Ft=document.createElement("div");Ft.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",Ft.innerHTML=`
                <div class="bg-white rounded-lg p-6 max-w-sm mx-4 text-center">
                    <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Due Diligence Accepted!</h3>
                    <p class="text-gray-600 mb-4">The facilitator now has view-only access to your compliance tab.</p>
                    <button onclick="this.parentElement.parentElement.remove()" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors">
                        Continue
                    </button>
                </div>
            `,document.body.appendChild(Ft)}catch(Pe){console.error("Error accepting diligence request:",Pe);let it="Failed to accept diligence request. Please try again.";Pe&&typeof Pe=="object"&&"message"in Pe&&(it=`Error: ${Pe.message}`),alert(it)}finally{Ys(!1)}}},kl=async $=>{try{console.log(" Downloading agreement from:",$);const Pe=document.createElement("a");Pe.href=$,Pe.download=`facilitation-agreement-${Date.now()}.pdf`,Pe.target="_blank",Pe.rel="noopener noreferrer",document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe),console.log(" Agreement download initiated")}catch(Pe){console.error("Error downloading agreement:",Pe),alert("Failed to download agreement. Please try again.")}},Rs=async $=>{if($.investmentOfferId)try{console.log(" Accepting investment offer:",$.investmentOfferId);try{await Zn.acceptOfferSimple($.investmentOfferId),console.log(" Investment offer accepted successfully (simple)"),alert("Investment offer accepted! Contact details have been revealed to both parties.")}catch(Pe){console.log(" Simple accept failed, trying with fee:",Pe),await Zn.acceptOfferWithFee($.investmentOfferId,"United States",e.totalFunding||0),console.log(" Investment offer accepted successfully with investor scouting fee"),alert("Investment offer accepted! Investor scouting fee has been paid. Contact details will be revealed based on investment advisor assignment.")}await Mn()}catch(Pe){console.error("Error accepting investment offer:",Pe),alert("Failed to accept investment offer. Please try again.")}},di=async $=>{if($.investmentOfferId)try{console.log(" Rejecting investment offer:",$.investmentOfferId),await Zn.rejectOffer($.investmentOfferId),await Mn(),console.log(" Investment offer rejected successfully"),alert("Investment offer rejected successfully.")}catch(Pe){console.error("Error rejecting investment offer:",Pe),alert("Failed to reject investment offer. Please try again.")}};if(j)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-600",children:"Loading cap table data..."})]})});if(A)return n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-red-600 mb-4",children:A}),n.jsx(Oe,{onClick:Os,children:"Retry"})]});try{return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(tt,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Current Valuation"}),n.jsx("p",{className:"text-2xl font-bold",children:(()=>{if(D.length>0){const $=[...D].sort((it,ht)=>new Date(ht.date).getTime()-new Date(it.date).getTime())[0],Pe=$==null?void 0:$.postMoneyValuation;if(Pe&&Pe>0)return Lr(Pe,u)}return Lr(e.currentValuation,u)})()})]}),n.jsxs(tt,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Shares"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-2xl font-bold text-slate-900",children:(()=>{const $=Ts();return console.log(" Total Shares Display - Using calculateTotalShares():",{calculatedTotalShares:$,breakdown:{totalFounderShares:M.reduce((Pe,it)=>Pe+(it.shares||0),0),totalInvestorShares:D.reduce((Pe,it)=>Pe+(it.shares||0),0),esopReservedShares:e.esopReservedShares||0,totalRecognitionShares:F.filter(Pe=>(Pe.feeType==="Equity"||Pe.feeType==="Hybrid")&&Pe.shares&&Pe.shares>0).reduce((Pe,it)=>Pe+(it.shares||0),0)}}),$.toLocaleString()})()}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Calculated automatically"})]}),n.jsx("div",{className:"text-right",children:n.jsx("p",{className:"text-sm text-slate-500",children:(()=>{const $=Ts();if($>0){let Pe=e.currentValuation||0;if(D&&D.length>0){const ht=[...D].sort((ct,et)=>new Date(et.date).getTime()-new Date(ct.date).getTime())[0];ht!=null&&ht.postMoneyValuation&&ht.postMoneyValuation>0&&(Pe=ht.postMoneyValuation)}const it=Pe/$;return`Price/Share: ${Lr(it,u)}`}return"Price/Share: "})()})})]}),(()=>{const $=M.reduce((et,Pt)=>et+(Pt.shares||0),0),Pe=D.reduce((et,Pt)=>et+(Pt.shares||0),0),it=(T==null?void 0:T.esopReservedShares)||e.esopReservedShares||0,ht=F.filter(et=>(et.feeType==="Equity"||et.feeType==="Hybrid")&&et.shares&&et.shares>0).reduce((et,Pt)=>et+(Pt.shares||0),0),ct=$+Pe+it+ht;return ct>0?n.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200",children:[n.jsx("p",{className:"text-xs font-medium text-slate-600 mb-2",children:"Shares Allocation"}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-500",children:"Founders:"}),n.jsx("span",{className:"text-slate-700",children:$.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-500",children:"Investors:"}),n.jsx("span",{className:"text-slate-700",children:Pe.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-500",children:"ESOP Reserved:"}),n.jsx("span",{className:"text-slate-700",children:(()=>{const et=(T==null?void 0:T.esopReservedShares)||e.esopReservedShares||0;return console.log(" ESOP Reserved Display:",{esopReservedShares:et,esopDataEsopReservedShares:T==null?void 0:T.esopReservedShares,startupEsopReservedShares:e.esopReservedShares}),et.toLocaleString()})()})]}),ht>0&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-500",children:"Incubation Center:"}),n.jsx("span",{className:"text-slate-700",children:ht.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between font-medium pt-1 border-t border-slate-100",children:[n.jsx("span",{className:"text-slate-600",children:"Total:"}),n.jsx("span",{className:"text-slate-900 font-bold",children:ct.toLocaleString()})]})]})]}):null})()]}),n.jsxs(tt,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Funding"}),n.jsx("p",{className:"text-2xl font-bold",children:(()=>{const $=D.filter(ht=>ht.investmentType===$i.Equity).reduce((ht,ct)=>ht+(ct.amount||0),0),Pe=D.filter(ht=>ht.investmentType===$i.Debt).reduce((ht,ct)=>ht+(ct.amount||0),0),it=D.filter(ht=>ht.investmentType===$i.Grant).reduce((ht,ct)=>ht+(ct.amount||0),0);return Lr($+Pe+it,u)})()})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsxs(tt,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Investments"}),n.jsx("p",{className:"text-xl font-bold",children:D.length})]}),n.jsxs(tt,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Equity Funding"}),n.jsx("p",{className:"text-xl font-bold",children:f2(D.filter($=>$.investmentType===$i.Equity).reduce(($,Pe)=>$+(Pe.amount||0),0),u)})]}),n.jsxs(tt,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Debt Funding"}),n.jsx("p",{className:"text-xl font-bold",children:f2(D.filter($=>$.investmentType===$i.Debt).reduce(($,Pe)=>$+(Pe.amount||0),0),u)})]}),n.jsxs(tt,{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Grant Funding"}),n.jsx("p",{className:"text-xl font-bold",children:f2(D.filter($=>$.investmentType===$i.Grant).reduce(($,Pe)=>$+(Pe.amount||0),0),u)})]})]}),pr&&n.jsxs(tt,{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(bn,{className:"w-5 h-5 text-blue-600"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Company Information"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[pr.country_of_registration&&n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Country of Registration"}),n.jsx("p",{className:"text-sm text-slate-600",children:pr.country_of_registration})]}),pr.company_type&&n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Company Type"}),n.jsx("p",{className:"text-sm text-slate-600",children:pr.company_type})]}),pr.registration_date&&n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Registration Date"}),n.jsx("p",{className:"text-sm text-slate-600",children:new Date(pr.registration_date).toLocaleDateString()})]}),pr.currency&&n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Currency"}),n.jsx("p",{className:"text-sm text-slate-600",children:pr.currency})]}),pr.total_shares&&n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Total Shares (Profile)"}),n.jsx("p",{className:"text-sm text-slate-600",children:pr.total_shares.toLocaleString()})]}),pr.price_per_share&&n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-slate-900",children:"Price Per Share (Profile)"}),n.jsx("p",{className:"text-sm text-slate-600",children:Lr(pr.price_per_share,pr.currency||u)})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsxs(tt,{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Valuation History"}),n.jsx(Oe,{variant:"outline",size:"sm",onClick:async()=>{console.log(" Manual refresh of investment data...");try{const $=await na.getInvestmentRecords(e.id);L($),console.log(" Investment records manually refreshed")}catch($){console.error("Error refreshing investment records:",$)}},title:"Refresh chart data",children:n.jsx(xd,{className:"h-4 w-4"})})]}),pu.length>0?n.jsx("div",{style:{width:"100%",height:300},children:n.jsx(ii,{width:"100%",height:"100%",children:n.jsxs(Dv,{data:pu,children:[n.jsx(su,{strokeDasharray:"3 3"}),n.jsx(oc,{dataKey:"name",fontSize:12}),n.jsx(vl,{yAxisId:"left",orientation:"left",stroke:"#16a34a",fontSize:12,tickFormatter:$=>ld($,u)}),n.jsx(vl,{yAxisId:"right",orientation:"right",stroke:"#3b82f6",fontSize:12,tickFormatter:$=>ld($,u)}),n.jsx(si,{formatter:$=>Lr($,u)}),n.jsx(Es,{}),n.jsx(pd,{yAxisId:"left",dataKey:"valuation",fill:"#16a34a",name:"Valuation"}),n.jsx(pd,{yAxisId:"right",dataKey:"investment",fill:"#3b82f6",name:"Investment"})]})})}):n.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:n.jsxs("div",{children:[n.jsx(xd,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500 mb-2",children:"No valuation history available"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Add investment records to see valuation trends"})]})})]}),n.jsxs(tt,{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Equity Holdings"}),n.jsx(Oe,{variant:"outline",size:"sm",onClick:async()=>{console.log(" Manual refresh of investment and founder data...");try{const[$,Pe]=await Promise.all([na.getInvestmentRecords(e.id),na.getFounders(e.id)]);L($),U(Pe),console.log(" Investment and founder data manually refreshed")}catch($){console.error("Error refreshing investment and founder data:",$)}},title:"Refresh chart data",children:n.jsx(Nw,{className:"h-4 w-4"})})]}),(()=>{const $=M.reduce((ct,et)=>ct+(et.shares||0),0),Pe=D.reduce((ct,et)=>ct+(et.shares||0),0),it=e.esopReservedShares||0,ht=$+Pe+it;return null})(),$o.length>0?n.jsx("div",{style:{width:"100%",height:300},children:n.jsx(ii,{width:"100%",height:"100%",children:n.jsxs(jf,{children:[n.jsx(nu,{data:$o,cx:"50%",cy:"50%",labelLine:!1,outerRadius:110,fill:"#8884d8",dataKey:"value",nameKey:"name",label:({name:$,percent:Pe})=>`${$} ${(Pe*100).toFixed(0)}%`,children:$o.map(($,Pe)=>n.jsx(xl,{fill:fk[Pe%fk.length]},`cell-${Pe}`))}),n.jsx(si,{formatter:$=>`${$}%`}),n.jsx(Es,{})]})})}):n.jsx("div",{className:"flex items-center justify-center h-64 text-center",children:n.jsxs("div",{children:[n.jsx(Nw,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500 mb-2",children:"No equity distribution available"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Add founders and investments to see equity breakdown"})]})})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs(tt,{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Founder Information"}),n.jsxs(Oe,{variant:"outline",size:"sm",onClick:Sl,disabled:!ce,children:[n.jsx(df,{className:"h-4 w-4 mr-2"}),"Edit"]})]}),n.jsx("div",{className:"space-y-4",children:M&&M.length>0?M.map(($,Pe)=>n.jsx("div",{className:"border-b border-slate-200 pb-3 last:border-b-0",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:$.name}),n.jsx("p",{className:"text-sm text-slate-500",children:$.email})]}),n.jsx("div",{className:"text-right",children:(()=>{const it=M.reduce((Ft,yt)=>Ft+(yt.shares||0),0),ht=D.reduce((Ft,yt)=>Ft+(yt.shares||0),0),ct=e.esopReservedShares||0,et=it+ht+ct;console.log(" Founder equity check:",{name:$.name,equityPercentage:$.equityPercentage,equityType:typeof $.equityPercentage,shares:$.shares,sharesType:typeof $.shares,calculatedTotalShares:et});const Pt=$.shares&&et>0?$.shares/et*100:$.equityPercentage||0;return $.shares&&$.shares>0?n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-slate-700",children:[Pt.toFixed(1),"% Equity"]}),n.jsxs("p",{className:"text-xs text-slate-500",children:[$.shares.toLocaleString()," shares"]}),Pt>100&&n.jsx("p",{className:"text-xs text-red-500 font-medium",children:" Exceeds total shares"})]}):$.equityPercentage&&$.equityPercentage>0?n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-slate-700",children:[$.equityPercentage.toFixed(1),"% Equity"]}),n.jsx("p",{className:"text-xs text-slate-500",children:"No shares specified"})]}):n.jsx("p",{className:"text-sm text-slate-400",children:"No equity data"})})()})]})},Pe)):n.jsx("p",{className:"text-sm text-slate-500",children:"No founder information available."})})]}),n.jsxs(tt,{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Fundraising"}),De.active&&n.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Active"})]}),je?n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Oe,{variant:"secondary",size:"sm",onClick:()=>ke(!1),children:n.jsx(ac,{className:"h-4 w-4"})}),n.jsx(Oe,{size:"sm",onClick:Ds,disabled:j,children:j?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Mv,{className:"h-4 w-4 mr-2"}),"Save"]})})]}):n.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>ke(!0),disabled:!ce,children:[n.jsx(df,{className:"h-4 w-4 mr-2"}),"Edit"]})]}),je?n.jsx("fieldset",{disabled:!je,children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"fundraising-active",className:"h-4 w-4 rounded border-gray-300 text-brand-primary focus:ring-brand-primary",checked:De.active,onChange:$=>Ee({...De,active:$.target.checked})}),n.jsx("label",{htmlFor:"fundraising-active",className:"ml-2 block text-sm text-gray-900",children:"Activate Fundraising Round"})]}),n.jsx(ji,{label:"Type",id:"fr-type",value:De.type,onChange:$=>Ee({...De,type:$.target.value}),children:Object.values(wa).map($=>n.jsx("option",{value:$,children:$},$))}),n.jsx(At,{label:"Value",id:"fr-value",type:"number",value:De.value,onChange:$=>Ee({...De,value:Number($.target.value)})}),n.jsx(At,{label:"Equity",id:"fr-equity",type:"number",value:De.equity,onChange:$=>Ee({...De,equity:Number($.target.value)})}),n.jsx(At,{label:"Pitch Deck",id:"fr-deck",type:"file"}),n.jsx(At,{label:"Pitch Video (YouTube Link)",id:"fr-video",type:"url",placeholder:"https://www.youtube.com/watch?v=...",value:De.pitchVideoUrl||"",onChange:$=>Ee({...De,pitchVideoUrl:$.target.value})}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"fr-validation",className:"h-4 w-4 rounded border-gray-300 text-brand-primary focus:ring-brand-primary",checked:De.validationRequested,onChange:$=>Ee({...De,validationRequested:$.target.checked})}),n.jsx("label",{htmlFor:"fr-validation",className:"ml-2 block text-sm text-gray-900",children:"Startup Nation Validation Requested"})]}),De.validationRequested&&n.jsx("div",{className:"p-3 bg-blue-50 border-l-4 border-brand-accent text-sm text-slate-600",children:"Startup Nation will charge 3% of fund raised or 4% to total equity raised as fees for validation, documentation and connection."})]})}):n.jsx("div",{className:"space-y-4",children:oe.length>0?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700",children:"Round Type"}),n.jsx("p",{className:"text-slate-600",children:De.type})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700",children:"Target Value"}),n.jsx("p",{className:"text-slate-600",children:Lr(De.value,u)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700",children:"Equity Offered"}),n.jsxs("p",{className:"text-slate-600",children:[De.equity,"%"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700",children:"Status"}),n.jsx("p",{className:"text-slate-600",children:De.active?"Active":"Inactive"})]})]}),De.pitchDeckUrl&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700 mb-2",children:"Pitch Deck"}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>window.open(De.pitchDeckUrl,"_blank"),children:[n.jsx(_i,{className:"h-4 w-4 mr-2"}),"View Pitch Deck"]})]}),De.pitchVideoUrl&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-700 mb-2",children:"Pitch Video"}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>window.open(De.pitchVideoUrl,"_blank"),children:[n.jsx(_i,{className:"h-4 w-4 mr-2"}),"Watch Video"]})]}),De.validationRequested&&n.jsxs("div",{className:"p-3 bg-blue-50 border-l-4 border-brand-accent text-sm text-slate-600",children:[n.jsx("p",{className:"font-medium",children:"Startup Nation Validation Requested"}),n.jsx("p",{children:"3% of fund raised or 4% of total equity raised as fees for validation, documentation and connection."})]})]}):n.jsxs("div",{className:"text-center py-6",children:[n.jsx("p",{className:"text-slate-500 mb-2",children:"No fundraising details configured"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Click Edit to set up your fundraising round"})]})})]})]})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Offers Received"}),l&&n.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Debug Info:"})," Loading offers for startup ID: ",e.id," | Offers loaded: ",Vn.length," | User role: ",t," | View only: ",l?"Yes":"No"]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"From"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Offer Details"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Scouting Fees"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions / Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Code"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-slate-200",children:[Vn.map($=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:$.from}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:$.type}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:$.offerDetails}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:$.type==="Investment"?n.jsxs("div",{className:"text-xs",children:[n.jsxs("div",{children:["Startup: ",Lr($.startupScoutingFee||0)]}),n.jsxs("div",{children:["Investor: ",Lr($.investorScoutingFee||0)]})]}):n.jsx("span",{className:"text-slate-400",children:"N/A"})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[$.type==="Incubation"&&$.status==="accepted"&&$.agreementUrl&&n.jsxs("button",{onClick:()=>kl($.agreementUrl),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[n.jsx(_i,{className:"h-4 w-4"}),"Download Agreement"]}),$.type==="Due Diligence"&&$.status==="pending"&&n.jsxs(Oe,{size:"sm",onClick:()=>ui($),disabled:ro||$.status!=="pending",className:"flex items-center gap-1",children:[n.jsx(Po,{className:"h-4 w-4"}),ro?"Accepting...":"Accept Request"]}),$.type==="Due Diligence"&&$.status==="accepted"&&$.agreementUrl&&n.jsxs("button",{onClick:()=>kl($.agreementUrl),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[n.jsx(_i,{className:"h-4 w-4"}),"Download Agreement"]}),$.type==="Due Diligence"&&$.status==="accepted"&&!$.agreementUrl&&n.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[n.jsx(Po,{className:"h-4 w-4"}),"Accepted"]}),$.type==="Investment"&&($.status==="pending"||$.status==="startup_advisor_approved")&&n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Oe,{size:"sm",onClick:()=>Rs($),className:"bg-green-600 hover:bg-green-700 text-white",children:[n.jsx(Po,{className:"h-4 w-4 mr-1"}),"Accept"]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>di($),className:"border-red-300 text-red-600 hover:bg-red-50",children:[n.jsx(ac,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),$.type==="Investment"&&$.status==="accepted"&&n.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[n.jsx(Po,{className:"h-4 w-4"}),"Accepted"]}),$.type==="Investment"&&$.status==="rejected"&&n.jsxs("span",{className:"text-red-600 flex items-center gap-1",children:[n.jsx(ac,{className:"h-4 w-4"}),"Rejected"]})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:$.code})]},$.id)),Vn.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-slate-500",children:l?n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm",children:"No offers or opportunities received yet."}),n.jsx("p",{className:"text-xs text-slate-400",children:"This startup hasn't applied to any incubation programs or received investment offers."})]}):"No offers received yet."})})]})]})})]}),n.jsxs(Bn,{isOpen:ne,onClose:()=>Ne(!1),title:"Edit Founder Information",children:[n.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[le.map(($,Pe)=>n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2 relative border p-4 rounded-lg bg-slate-50/50",children:[n.jsx(At,{label:`Founder ${Pe+1} Name`,id:`founder-name-${$.id}`,type:"text",value:$.name,onChange:it=>Fo($.id,"name",it.target.value),required:!0}),n.jsx(At,{label:`Founder ${Pe+1} Email`,id:`founder-email-${$.id}`,type:"email",value:$.email,onChange:it=>Fo($.id,"email",it.target.value),required:!0}),n.jsx(At,{label:"Equity Percentage (%)",id:`founder-equity-${$.id}`,type:"number",step:"0.1",min:"0",max:"100",value:$.equityPercentage||"",onChange:it=>Fo($.id,"equityPercentage",it.target.value),placeholder:"e.g., 25.5"}),n.jsx(At,{label:"Shares",id:`founder-shares-${$.id}`,type:"number",min:"0",value:$.shares||"",onChange:it=>Fo($.id,"shares",it.target.value),placeholder:"e.g., 1000000"}),le.length>1&&n.jsx(Oe,{type:"button",onClick:()=>uc($.id),className:"absolute top-2 right-2 p-1.5 h-auto bg-transparent hover:bg-red-100 text-slate-400 hover:text-red-500 shadow-none border-none",variant:"secondary",size:"sm","aria-label":"Remove founder",children:n.jsx(Ma,{className:"h-4 w-4"})})]},$.id)),n.jsxs(Oe,{type:"button",variant:"outline",size:"sm",onClick:Kr,children:[n.jsx(qQ,{className:"h-4 w-4 mr-2"}),"Add Another Founder"]}),le.length>0&&n.jsxs("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg border",children:[n.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-3",children:"Shares Allocation Summary"}),(()=>{const $=le.reduce((ct,et)=>ct+(et.shares||0),0),Pe=D.reduce((ct,et)=>ct+(et.shares||0),0),it=e.esopReservedShares||0,ht=$+Pe+it;return n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Founder Shares:"}),n.jsx("span",{className:"text-slate-700",children:$.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Investor Shares:"}),n.jsx("span",{className:"text-slate-700",children:Pe.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"ESOP Reserved:"}),n.jsx("span",{className:"text-slate-700",children:it.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between font-medium pt-2 border-t border-slate-200",children:[n.jsx("span",{className:"text-slate-600",children:"Total Shares:"}),n.jsx("span",{className:"text-slate-900 font-bold",children:ht.toLocaleString()})]})]})})()]})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t mt-4",children:[n.jsx(Oe,{type:"button",variant:"secondary",onClick:()=>Ne(!1),children:"Cancel"}),n.jsx(Oe,{type:"button",onClick:hu,children:"Save Changes"})]})]}),n.jsxs(Bn,{isOpen:H,onClose:()=>W(!1),title:"Delete Investment",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("p",{className:"text-slate-600",children:["Are you sure you want to delete the investment from"," ",n.jsx("span",{className:"font-semibold",children:B==null?void 0:B.investorName}),"?"]}),n.jsx("p",{className:"text-sm text-slate-500",children:"This action cannot be undone. The investment record will be permanently removed."})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t mt-4",children:[n.jsx(Oe,{type:"button",variant:"secondary",onClick:()=>W(!1),children:"Cancel"}),n.jsx(Oe,{type:"button",variant:"destructive",onClick:()=>B&&es(B),children:"Delete Investment"})]})]}),n.jsx(Bn,{isOpen:Ze,onClose:()=>pe(!1),title:"Edit Recognition Record",size:"2xl",children:n.jsx("div",{className:"max-h-[80vh] overflow-y-auto pr-2",children:n.jsxs("form",{onSubmit:Vr,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(At,{label:"Program Name",name:"rec-program-name",id:"rec-program-name",defaultValue:(V==null?void 0:V.programName)||"",required:!0,containerClassName:"md:col-span-2"}),n.jsx(At,{label:"Facilitator Name",name:"rec-facilitator-name",id:"rec-facilitator-name",defaultValue:(V==null?void 0:V.facilitatorName)||"",required:!0}),n.jsx(At,{label:"Facilitator Code",name:"rec-facilitator-code",id:"rec-facilitator-code",defaultValue:(V==null?void 0:V.facilitatorCode)||"",placeholder:"e.g., FAC-D4E5F6",required:!0}),n.jsx(ji,{label:"Incubation Type",name:"rec-incubation-type",id:"rec-incubation-type",defaultValue:(V==null?void 0:V.incubationType)||"",required:!0,children:Object.values(p2).map($=>n.jsx("option",{value:$,children:$},$))}),n.jsx(ji,{label:"Fee Type",name:"rec-fee-type",id:"rec-fee-type",defaultValue:(V==null?void 0:V.feeType)||"",required:!0,children:Object.values(Fc).map($=>n.jsx("option",{value:$,children:$},$))}),n.jsx(At,{label:"Fee Amount",name:"rec-fee-amount",id:"rec-fee-amount",type:"number",defaultValue:(V==null?void 0:V.feeAmount)||"",step:"0.01"}),n.jsx(At,{label:"Number of Shares",name:"rec-shares",id:"rec-shares",type:"number",value:Pa||(V==null?void 0:V.shares)||"",onChange:$=>ea($.target.value),placeholder:"e.g., 10000"}),n.jsx(At,{label:`Price per Share (${u})`,name:"rec-price-per-share",id:"rec-price-per-share",type:"number",step:"0.01",value:hn||(V==null?void 0:V.pricePerShare)||"",onChange:$=>ta($.target.value),placeholder:"e.g., 1.50"}),n.jsx(At,{label:"Investment Amount (auto)",name:"rec-amount",id:"rec-amount",type:"number",value:gr||(V==null?void 0:V.investmentAmount)||"",readOnly:!0}),n.jsx(At,{label:"Equity Allocated (%) (auto)",name:"rec-equity",id:"rec-equity",type:"number",value:ci||(V==null?void 0:V.equityAllocated)||"",readOnly:!0}),n.jsx(At,{label:"Post-Money Valuation (auto)",name:"rec-postmoney",id:"rec-postmoney",type:"number",value:_l||(V==null?void 0:V.postMoneyValuation)||"",readOnly:!0}),n.jsx(At,{label:"Upload Signed Agreement",name:"rec-agreement",id:"rec-agreement",type:"file",containerClassName:"md:col-span-2"}),(V==null?void 0:V.signedAgreementUrl)&&n.jsx("div",{className:"md:col-span-2",children:n.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Current file: ",n.jsx("a",{href:V.signedAgreementUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"View current agreement"})]})})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t mt-4",children:[n.jsx(Oe,{type:"button",variant:"secondary",onClick:()=>pe(!1),children:"Cancel"}),n.jsx(Oe,{type:"submit",disabled:j,children:j?"Updating...":"Update Recognition Record"})]})]})})}),n.jsxs(Bn,{isOpen:ft,onClose:()=>kt(!1),title:"Delete Recognition Record",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("p",{className:"text-slate-600",children:["Are you sure you want to delete the recognition record for"," ",n.jsx("span",{className:"font-semibold",children:Mt==null?void 0:Mt.programName}),"?"]}),n.jsx("p",{className:"text-sm text-slate-500",children:"This action cannot be undone. The recognition record will be permanently removed."})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t mt-4",children:[n.jsx(Oe,{type:"button",variant:"secondary",onClick:()=>kt(!1),children:"Cancel"}),n.jsx(Oe,{type:"button",variant:"destructive",onClick:()=>Mt&&Xs(Mt.id),children:"Delete Recognition Record"})]})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Recognition and Incubation"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Program Name"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Facilitator"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Fee Type"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Fee Amount"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Shares"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Price per Share"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Investment Amount"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Equity (%)"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Date Added"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Signed Agreement"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Actions"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-slate-200",children:[F.map($=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2 font-medium text-slate-900",children:$.programName}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:$.facilitatorName}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:n.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${$.feeType==="Equity"?"bg-green-100 text-green-800":$.feeType==="Hybrid"?"bg-blue-100 text-blue-800":$.feeType==="Fees"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:$.feeType})}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:$.feeAmount?`${u} ${$.feeAmount.toLocaleString()}`:""}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:($.feeType==="Equity"||$.feeType==="Hybrid")&&$.shares?$.shares.toLocaleString():""}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:($.feeType==="Equity"||$.feeType==="Hybrid")&&$.pricePerShare?`${u} ${$.pricePerShare.toFixed(2)}`:""}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:($.feeType==="Equity"||$.feeType==="Hybrid")&&$.investmentAmount?`${u} ${$.investmentAmount.toLocaleString()}`:""}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:($.feeType==="Equity"||$.feeType==="Hybrid")&&$.equityAllocated?`${$.equityAllocated.toFixed(2)}%`:""}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:$.dateAdded}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:n.jsxs("a",{href:$.signedAgreementUrl,className:"flex items-center text-brand-primary hover:underline",children:[n.jsx(_i,{className:"h-4 w-4 mr-1"})," View Document"]})}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>dc($),className:"text-blue-600 border-blue-600 hover:bg-blue-50",title:"Edit recognition record",children:n.jsx(Xl,{className:"h-4 w-4"})}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>no($),className:"text-red-600 border-red-600 hover:bg-red-50",title:"Delete recognition record",children:n.jsx(Ma,{className:"h-4 w-4"})})]})})]},$.id)),F.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:11,className:"text-center py-6 text-slate-500",children:"No recognitions added yet."})})]})]})})]}),n.jsxs(tt,{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Investor List"}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:so,className:"flex items-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Fund Utilization Report (PDF)"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Investor Name"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Investor Code"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Amount"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Equity"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Post-Money"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Fund Utilization"}),n.jsx("th",{className:"px-4 py-2 text-right font-medium text-slate-500",children:"Actions"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-slate-200",children:[D.map($=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2 font-medium text-slate-900",children:$.investorName}),n.jsx("td",{className:"px-4 py-2 text-slate-500 font-mono text-xs",children:$.investorCode?n.jsx("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded border border-blue-200",children:$.investorCode}):n.jsx("span",{className:"text-slate-400",children:"No code"})}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:Lr($.amount,u)}),n.jsxs("td",{className:"px-4 py-2 text-slate-500",children:[$.equityAllocated,"%"]}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:Lr($.postMoneyValuation||($.equityAllocated&&$.equityAllocated>0?$.amount*100/$.equityAllocated:0),u)}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:(()=>{const Pe=Cl($.investorName,$.amount);return n.jsx(hc,{utilized:Pe.utilized,total:$.amount,percentage:Pe.percentage})})()}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>Al($),className:"text-blue-600 border-blue-300 hover:bg-blue-50",title:"Download Fund Utilization Report (PDF)",children:n.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),n.jsx(Oe,{size:"sm",variant:"outline",disabled:!ce,onClick:()=>mu($),children:n.jsx(df,{className:"h-4 w-4"})}),ce&&n.jsx(Oe,{size:"sm",variant:"outline",className:"text-red-600 border-red-300 hover:bg-red-50",onClick:()=>{ee($),W(!0)},children:n.jsx(Ma,{className:"h-4 w-4"})})]})})]},$.id)),D.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-6 text-slate-500",children:"No investments added yet."})})]})]})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Incubation & Acceleration Programs"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Program Name"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Program Type"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Start Date"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"End Date"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-slate-500",children:"Status"}),n.jsx("th",{className:"px-4 py-2 text-right font-medium text-slate-500",children:"Actions"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-slate-200",children:[at.map($=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2 font-medium text-slate-900",children:$.programName}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:$.programType}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:$.startDate}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:$.endDate}),n.jsx("td",{className:"px-4 py-2 text-slate-500",children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${$.status==="Active"?"bg-green-100 text-green-800":$.status==="Completed"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:$.status})}),n.jsx("td",{className:"px-4 py-2 text-right",children:n.jsx(Oe,{size:"sm",variant:"outline",disabled:!ce,onClick:()=>fc($),children:n.jsx(df,{className:"h-4 w-4"})})})]},$.id)),at.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"px-6 py-6 text-center text-slate-500",children:l?n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm",children:"No incubation programs enrolled yet."}),n.jsx("p",{className:"text-xs text-slate-400",children:"This startup hasn't joined any incubation or acceleration programs."})]}):"No incubation programs added yet."})})]})]})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Add New Entry to Cap Table"}),A&&n.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-red-500 mr-2",children:""}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Form Error"}),n.jsx("p",{className:"text-sm",children:A})]})]})}),n.jsx("fieldset",{disabled:!ce,children:n.jsxs("form",{onSubmit:Uo,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Entry Type"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Oe,{type:"button",variant:Y==="investment"?"default":"outline",onClick:()=>ye("investment"),className:`flex-1 border-2 ${Y==="investment"?"border-blue-600":"border-slate-300"}`,children:"Investment"}),n.jsx(Oe,{type:"button",variant:Y==="recognition"?"default":"outline",onClick:()=>ye("recognition"),className:`flex-1 border-2 ${Y==="recognition"?"border-blue-600":"border-slate-300"}`,children:"Recognition / Incubation"})]})]}),Y==="investment"&&n.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[(()=>{const $=M.reduce((ct,et)=>ct+(et.shares||0),0),Pe=D.reduce((ct,et)=>ct+(et.shares||0),0),it=e.esopReservedShares||0,ht=$+Pe+it;return ht>0?n.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[n.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-2",children:"Shares Allocation Summary"}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Total Shares:"}),n.jsx("span",{className:"font-medium",children:ht.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Founder Shares:"}),n.jsx("span",{children:$.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Investor Shares:"}),n.jsx("span",{children:Pe.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"ESOP Reserved:"}),n.jsx("span",{children:it.toLocaleString()})]})]})]}):null})(),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(At,{label:"Investment Date",name:"inv-date",id:"inv-date",type:"date",max:new Date().toISOString().split("T")[0],required:!0}),n.jsx(ji,{label:"Investor Type",name:"inv-investor-type",id:"inv-investor-type",required:!0,children:Object.values(ax).map($=>n.jsx("option",{value:$,children:$},$))}),n.jsx(ji,{label:"Investment Type",name:"inv-type",id:"inv-type",required:!0,children:Object.values($i).map($=>n.jsx("option",{value:$,children:$},$))}),n.jsx(At,{label:"Investor Name",name:"inv-name",id:"inv-name",required:!0}),n.jsx(At,{label:"Investor Code",name:"inv-code",id:"inv-code",placeholder:"e.g., INV-A7B3C9"}),n.jsx(At,{label:"Number of Shares",name:"inv-shares",id:"inv-shares",type:"number",required:!0,value:Ve,onChange:$=>Ct($.target.value),placeholder:"e.g., 10000"}),n.jsx(At,{label:`Price per Share (${u})`,name:"inv-price-per-share",id:"inv-price-per-share",type:"number",step:"0.01",required:!0,value:Dt,onChange:$=>Wt($.target.value),placeholder:"e.g., 1.50"}),n.jsx(At,{label:"Investment Amount (auto)",name:"inv-amount",id:"inv-amount",type:"number",readOnly:!0,value:We}),n.jsx(At,{label:"Equity Allocated (%) (auto)",name:"inv-equity",id:"inv-equity",type:"number",readOnly:!0,value:Fe}),n.jsx(At,{label:"Post-Money Valuation (auto)",name:"inv-postmoney",id:"inv-postmoney",type:"number",readOnly:!0,value:nt}),n.jsx(At,{label:"Proof of Investment",name:"inv-proof",id:"inv-proof",type:"file"})]})]}),Y==="recognition"&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t",children:[n.jsx(At,{label:"Program Name",name:"rec-program-name",id:"rec-program-name",required:!0,containerClassName:"md:col-span-2"}),n.jsx(At,{label:"Facilitator Name",name:"rec-facilitator-name",id:"rec-facilitator-name",required:!0}),n.jsx(At,{label:"Facilitator Code",name:"rec-facilitator-code",id:"rec-facilitator-code",placeholder:"e.g., FAC-D4E5F6",required:!0}),n.jsx(ji,{label:"Incubation Type",name:"rec-incubation-type",id:"rec-incubation-type",required:!0,children:Object.values(p2).map($=>n.jsx("option",{value:$,children:$},$))}),n.jsx(ji,{label:"Fee Type",name:"rec-fee-type",id:"rec-fee-type",value:P,onChange:$=>Z($.target.value),required:!0,children:Object.values(Fc).map($=>n.jsx("option",{value:$,children:$},$))}),(P===Fc.Fees||P===Fc.Hybrid)&&n.jsx(At,{label:"Fee Amount",name:"rec-fee-amount",id:"rec-fee-amount",type:"number",required:!0}),(P===Fc.Equity||P===Fc.Hybrid)&&n.jsxs(n.Fragment,{children:[n.jsx(At,{label:"Number of Shares",name:"rec-shares",id:"rec-shares",type:"number",required:!0,value:cr,onChange:$=>Ot($.target.value),placeholder:"e.g., 10000"}),n.jsx(At,{label:`Price per Share (${u})`,name:"rec-price-per-share",id:"rec-price-per-share",type:"number",step:"0.01",required:!0,value:$t,onChange:$=>rr($.target.value),placeholder:"e.g., 1.50"}),n.jsx(At,{label:"Investment Amount (auto)",name:"rec-amount",id:"rec-amount",type:"number",readOnly:!0,value:qt}),n.jsx(At,{label:"Equity Allocated (%) (auto)",name:"rec-equity",id:"rec-equity",type:"number",readOnly:!0,value:Na}),n.jsx(At,{label:"Post-Money Valuation (auto)",name:"rec-postmoney",id:"rec-postmoney",type:"number",readOnly:!0,value:on})]}),n.jsx(At,{label:"Upload Signed Agreement",name:"rec-agreement",id:"rec-agreement",type:"file",required:!0,containerClassName:"md:col-span-2"})]}),n.jsx("div",{className:"flex items-end pt-4 border-t",children:n.jsxs(Oe,{type:"submit",children:[n.jsx(Wi,{className:"h-4 w-4 mr-2"}),"Add Entry"]})})]})})]}),n.jsx(Bn,{isOpen:Ie,onClose:()=>Tt(!1),title:"Delete Program",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("p",{children:['Are you sure you want to delete the program "',mt==null?void 0:mt.programName,'"?']}),n.jsx("p",{className:"text-sm text-slate-500",children:"This action cannot be undone."}),n.jsxs("div",{className:"flex gap-3 justify-end",children:[n.jsx(Oe,{type:"button",variant:"outline",onClick:()=>Tt(!1),children:"Cancel"}),n.jsx(Oe,{type:"button",variant:"destructive",onClick:()=>mt&&ki(mt.id),children:"Delete Program"})]})]})}),n.jsx(Bn,{isOpen:X,onClose:()=>ge(!1),title:"Edit Investment",children:be&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Investment Date"}),n.jsx("input",{type:"date",value:be.investmentDate,onChange:$=>$e({...be,investmentDate:$.target.value}),max:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Investor Type"}),n.jsx("select",{value:be.investorType||"Individual",onChange:$=>$e({...be,investorType:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:Object.values(ax).map($=>n.jsx("option",{value:$,children:$},$))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Investment Type"}),n.jsx("select",{value:be.investmentType,onChange:$=>$e({...be,investmentType:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:Object.values($i).map($=>n.jsx("option",{value:$,children:$},$))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Investor Name"}),n.jsx("input",{type:"text",value:be.investorName,onChange:$=>$e({...be,investorName:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Investor Code"}),n.jsx("input",{type:"text",value:be.investorCode||"",onChange:$=>$e({...be,investorCode:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., INV-A7B3C9"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Shares"}),n.jsx("input",{type:"number",value:be.shares||0,onChange:$=>$e({...be,shares:parseInt($.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 10000",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Price per Share (",u,")"]}),n.jsx("input",{type:"number",step:"0.01",value:be.pricePerShare||0,onChange:$=>$e({...be,pricePerShare:parseFloat($.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 1.50",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Investment Amount (auto)"}),n.jsx("input",{type:"number",value:((be.shares||0)*(be.pricePerShare||0)).toFixed(2),readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equity Allocated (%) (auto)"}),n.jsx("input",{type:"number",value:be.equityAllocated||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Post-Money Valuation (auto)"}),n.jsx("input",{type:"number",value:be.postMoneyValuation||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Proof of Investment"}),n.jsx("input",{type:"file",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png"}),be.proofOfInvestment&&n.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Current file: ",be.proofOfInvestment]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{value:be.notes||"",onChange:$=>$e({...be,notes:$.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Additional notes about this investment..."})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[n.jsx(Oe,{variant:"outline",onClick:()=>ge(!1),children:"Cancel"}),n.jsx(Oe,{onClick:async()=>{try{console.log("Saving investment:",be),alert("Investment updated successfully! (This is a placeholder - actual save functionality will be implemented)"),ge(!1),await Os()}catch($){console.error("Error updating investment:",$),alert("Failed to update investment")}},children:"Save Changes"})]})]})})]})}catch($){return console.error("CapTableTab render error:",$),n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-red-600 mb-4",children:"An error occurred while loading the cap table."}),n.jsx(Oe,{onClick:()=>window.location.reload(),children:"Reload Page"})]})}},Cae=({currentUser:e,startup:t,onBack:r,onProfileUpdate:a,onLogout:s})=>{var E,D,L,F,z,M,U,oe,R;const[i,l]=_.useState(!1),[u,d]=_.useState(e),[f,m]=_.useState(!1);_.useEffect(()=>{e!=null&&e.id&&g()},[]);const g=async()=>{if(e!=null&&e.id)try{m(!0),console.log(" Refreshing startup profile data for user:",e.id);const q=await br.getCurrentUser();console.log(" Fresh startup profile data loaded:",q),d(q),a&&JSON.stringify(q)!==JSON.stringify(e)?(console.log(" Startup profile data changed, updating parent component"),a(q)):console.log(" Startup profile data unchanged, no parent update needed")}catch(q){console.error(" Error refreshing startup profile data:",q),d(e)}finally{m(!1)}},[v,x]=_.useState(!1),[j,b]=_.useState(!1),A=[{id:"account",icon:n.jsx(xm,{className:"h-5 w-5"}),title:"Account",description:"Manage your account settings",onClick:()=>l(!0)},{id:"notifications",icon:n.jsx($p,{className:"h-5 w-5"}),title:"Notifications",description:"Manage notification preferences",onClick:()=>x(!0)},{id:"help",icon:n.jsx(am,{className:"h-5 w-5"}),title:"Help & Support",description:"Get help and contact support",onClick:()=>b(!0)}],S=()=>{console.log("Logging out..."),s?s():window.location.href="/logout"},T=async q=>{if(!(e!=null&&e.id)){console.error("No user ID available");return}try{if(console.log("Saving startup profile:",q),a){const se={...e,...q,profile_photo_url:q.profile_photo_url||e.profile_photo_url,logo_url:q.logo_url||e.logo_url,name:q.name||e.name,phone:q.phone||e.phone,address:q.address||e.address,city:q.city||e.city,state:q.state||e.state,country:q.country||e.country,company:q.company||e.company};console.log(" Startup profile updated, calling onProfileUpdate with:",se),a(se)}console.log("Startup profile saved successfully!")}catch(se){console.error("Error in handleSaveProfile:",se)}};return n.jsxs("div",{className:"min-h-screen bg-slate-50",children:[n.jsxs("div",{className:"bg-blue-600 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 py-3 sm:py-4",children:[n.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-blue-700 transition-colors","aria-label":"Go back",children:n.jsx(lc,{className:"h-5 w-5 sm:h-6 sm:w-6"})}),n.jsx("h1",{className:"text-lg sm:text-xl font-semibold",children:"Startup Profile"}),n.jsx("button",{onClick:g,disabled:f,className:"p-2 rounded-full hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Refresh profile data",title:f?"Refreshing...":"Refresh profile data",children:n.jsx(sm,{className:`h-5 w-5 sm:h-6 sm:w-6 ${f?"animate-spin":""}`})})]}),u&&n.jsxs("div",{className:"text-xs text-blue-200 text-center pb-2",children:["Last updated: ",new Date().toLocaleTimeString()]})]}),n.jsx("div",{className:"bg-white px-4 sm:px-6 py-6 sm:py-8",children:n.jsxs("div",{className:"flex flex-col items-center text-center",children:[n.jsxs("div",{className:"relative mb-4 sm:mb-6",children:[u!=null&&u.profile_photo_url?n.jsxs("div",{className:"w-20 h-20 sm:w-24 sm:h-24 lg:w-32 lg:h-32 rounded-full overflow-hidden border-4 border-blue-600",children:[n.jsx("img",{src:u.profile_photo_url,alt:`${u.name||"User"}'s profile photo`,className:"w-full h-full object-cover",onError:q=>{var J;const se=q.target;se.style.display="none",(J=se.nextElementSibling)==null||J.classList.remove("hidden")}}),n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center text-white text-xl sm:text-2xl lg:text-3xl font-bold hidden",children:((D=(E=u==null?void 0:u.name)==null?void 0:E.charAt(0))==null?void 0:D.toUpperCase())||((F=(L=u==null?void 0:u.email)==null?void 0:L.charAt(0))==null?void 0:F.toUpperCase())||"S"})]}):n.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 lg:w-32 lg:h-32 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center text-white text-xl sm:text-2xl lg:text-3xl font-bold",children:((M=(z=u==null?void 0:u.name)==null?void 0:z.charAt(0))==null?void 0:M.toUpperCase())||((oe=(U=u==null?void 0:u.email)==null?void 0:U.charAt(0))==null?void 0:oe.toUpperCase())||"S"}),n.jsx("button",{className:"absolute bottom-0 right-0 w-6 h-6 sm:w-8 sm:h-8 lg:w-10 lg:h-10 bg-blue-600 rounded-full flex items-center justify-center text-white hover:bg-blue-700 transition-colors",onClick:()=>l(!0),children:n.jsx(df,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5"})})]}),n.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-slate-900 mb-2 sm:mb-3",children:(u==null?void 0:u.name)||((R=u==null?void 0:u.email)==null?void 0:R.split("@")[0])||"Startup User"}),n.jsx("p",{className:"text-sm sm:text-base text-slate-600 mb-3 sm:mb-4 break-all px-2",children:u==null?void 0:u.email}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 mb-3 sm:mb-4",children:[n.jsx("span",{className:"text-xs sm:text-sm text-slate-500",children:"Role:"}),n.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 sm:px-3 sm:py-1 rounded-full text-xs sm:text-sm font-medium flex items-center gap-1",children:[n.jsx(rc,{className:"h-3 w-3"}),"Startup"]})]}),(u==null?void 0:u.company)&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 mb-4 sm:mb-6",children:[n.jsx("span",{className:"text-xs sm:text-sm text-slate-500",children:"Company:"}),n.jsx("span",{className:"bg-slate-100 text-slate-800 px-2 py-1 sm:px-3 sm:py-1 rounded-md text-xs sm:text-sm font-medium",children:u.company})]}),n.jsx(Oe,{variant:"primary",className:"w-full max-w-xs sm:max-w-sm lg:max-w-md text-sm sm:text-base",onClick:()=>l(!0),children:"Edit Profile"})]})}),((u==null?void 0:u.government_id)||(u==null?void 0:u.verification_documents)&&u.verification_documents.length>0)&&n.jsxs("div",{className:"bg-white mt-4 px-4 sm:px-6 py-6",children:[n.jsx("h3",{className:"text-base sm:text-lg font-medium text-slate-900 mb-4",children:"Verification Documents"}),n.jsx("div",{className:"space-y-3",children:(u==null?void 0:u.government_id)&&n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 p-3 bg-green-50 border border-green-200 rounded-md",children:[n.jsx(Cs,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-green-800",children:"Government ID"}),n.jsx("p",{className:"text-xs text-green-600 break-all",children:u.government_id})]}),n.jsx("button",{onClick:()=>window.open(u.government_id,"_blank"),className:"text-green-600 hover:text-green-800 text-sm underline flex-shrink-0",children:"View"})]})})]}),u&&n.jsx("div",{className:"mt-4",children:n.jsx(E8,{userId:u.id,userType:"Startup",userCountry:u.country})}),u&&n.jsx("div",{className:"mt-4",children:n.jsx(k8,{userId:u.id,userType:"Startup",country:u.country||"Global",startupCount:t!=null&&t.id?1:0})}),n.jsx("div",{className:"bg-white mt-4",children:A.map((q,se)=>n.jsxs("div",{children:[n.jsxs("button",{onClick:q.onClick,className:"w-full px-4 sm:px-6 py-3 sm:py-4 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[n.jsx("div",{className:"text-slate-600 flex-shrink-0",children:q.icon}),n.jsxs("div",{className:"text-left min-w-0 flex-1",children:[n.jsx("p",{className:"text-sm sm:text-base font-medium text-slate-900",children:q.title}),n.jsx("p",{className:"text-xs sm:text-sm text-slate-500",children:q.description})]})]}),n.jsx("div",{className:"text-slate-400 flex-shrink-0",children:n.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),se<A.length-1&&n.jsx("div",{className:"border-b border-slate-100 mx-4 sm:mx-6"})]},q.id))}),n.jsx("div",{className:"bg-white mt-4",children:n.jsxs("button",{onClick:S,className:"w-full px-4 sm:px-6 py-3 sm:py-4 flex items-center gap-3 text-red-600 hover:bg-red-50 transition-colors",children:[n.jsx(Rv,{className:"h-4 w-4 sm:h-5 sm:w-5"}),n.jsx("span",{className:"text-sm sm:text-base font-medium",children:"Logout"})]})}),n.jsx(A8,{currentUser:u,isOpen:i,onClose:()=>l(!1),onSave:T}),v&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx($p,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Notifications"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"You're all caught up! No new notifications at this time."}),n.jsx(Oe,{variant:"primary",onClick:()=>x(!1),className:"w-full",children:"Got it"})]})})}),j&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsx("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx(am,{className:"h-12 w-12 text-blue-500 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Help & Support"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"Our detailed help documentation and support system is coming soon. We're working hard to provide you with the best assistance."}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[n.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Coming Soon Features:"}),n.jsxs("ul",{className:"text-sm text-blue-700 mt-2 space-y-1",children:[n.jsx("li",{children:" Comprehensive FAQ section"}),n.jsx("li",{children:" Live chat support"}),n.jsx("li",{children:" Video tutorials"}),n.jsx("li",{children:" Contact support team"})]})]}),n.jsx(Oe,{variant:"primary",onClick:()=>b(!1),className:"w-full",children:"Understood"})]})})})]})},hk=({startup:e,userRole:t,user:r,onBack:a,onActivateFundraising:s,onInvestorAdded:i,onUpdateFounders:l,isViewOnly:u=!1,investmentOffers:d=[],onProcessOffer:f})=>{var J;const m=u&&t==="Startup Facilitation Center",g=window.facilitatorTargetTab,[v,x]=_.useState(()=>{if(m)return g==="full"?"dashboard":"compliance";const Q=localStorage.getItem("startupHealthActiveTab");return Q&&["dashboard","opportunities","profile","compliance","financials","employees","capTable"].includes(Q)?Q:"dashboard"}),[j,b]=_.useState(e),[A,S]=_.useState(d||[]),[T,E]=_.useState(!1),[D,L]=_.useState(!1),[F,z]=_.useState(0);_.useEffect(()=>{console.log(" StartupHealthView: Startup prop changed, updating currentStartup"),console.log(" New startup data:",e),b(e)},[e]);const M=(A||d||[]).filter(Q=>Q.startupId===j.id||Q.startup&&Q.startup.id===j.id||Q.startupName===j.name);_.useEffect(()=>{d&&d.length>0&&S(d)},[d]),_.useEffect(()=>{let Q=!1;return((d==null?void 0:d.length)||0)===0&&(j==null?void 0:j.id)&&Zn.getOffersForStartup(j.id).then(he=>{Q||S(he)}).catch(()=>{}),()=>{Q=!0}},[j==null?void 0:j.id]),_.useEffect(()=>{localStorage.setItem("startupHealthActiveTab",v)},[v]);const U=Q=>{var ae,he;console.log(" StartupHealthView: Profile updated, updating currentStartup and triggering ComplianceTab refresh...",{startupId:Q.id,hasProfile:!!Q.profile,subsidiaries:((he=(ae=Q.profile)==null?void 0:ae.subsidiaries)==null?void 0:he.length)||0}),b(Q),z(de=>de+1)},oe=(Q,ae,he,de)=>{var Y;const _e=((Y=j.complianceChecks)==null?void 0:Y.map(ye=>ye.taskId===ae?{...ye,[he==="ca"?"caStatus":"csStatus"]:de}:ye))||[];b(ye=>({...ye,complianceChecks:_e}))},R=Q=>{x(Q),E(!1)},q=m?[{id:"dashboard",name:"Dashboard",icon:n.jsx(z6,{className:"w-4 h-4"})},{id:"profile",name:"Profile",icon:n.jsx(rc,{className:"w-4 h-4"})},{id:"compliance",name:"Compliance",icon:n.jsx(Ap,{className:"w-4 h-4"})},{id:"financials",name:"Financials",icon:n.jsx(B6,{className:"w-4 h-4"})},{id:"employees",name:"Employees",icon:n.jsx(bn,{className:"w-4 h-4"})},{id:"capTable",name:"Cap Table",icon:n.jsx(z1,{className:"w-4 h-4"})}]:[{id:"dashboard",name:"Dashboard",icon:n.jsx(z6,{className:"w-4 h-4"})},{id:"opportunities",name:"Opportunities",icon:n.jsx(z1,{className:"w-4 h-4"})},{id:"profile",name:"Profile",icon:n.jsx(rc,{className:"w-4 h-4"})},{id:"compliance",name:"Compliance",icon:n.jsx(Ap,{className:"w-4 h-4"})},{id:"financials",name:"Financials",icon:n.jsx(B6,{className:"w-4 h-4"})},{id:"employees",name:"Employees",icon:n.jsx(bn,{className:"w-4 h-4"})},{id:"capTable",name:"Cap Table",icon:n.jsx(z1,{className:"w-4 h-4"})}],se=()=>{switch(v){case"dashboard":return n.jsx(ree,{startup:j,isViewOnly:u,offers:M,onProcessOffer:f,currentUser:r});case"opportunities":return n.jsx(nee,{startup:{id:j.id,name:j.name}});case"profile":return n.jsx(fee,{startup:j,userRole:t,onProfileUpdate:U,isViewOnly:u});case"compliance":return n.jsx(bee,{startup:j,currentUser:r,onUpdateCompliance:oe,isViewOnly:u,allowCAEdit:t==="CA"||t==="CS",onProfileUpdated:F});case"financials":return n.jsx(jee,{startup:j,userRole:t,isViewOnly:u});case"employees":return n.jsx(Dee,{startup:j,userRole:t,isViewOnly:u});case"capTable":return n.jsx(Aae,{startup:j,userRole:t,user:r,onActivateFundraising:s,onInvestorAdded:i,onUpdateFounders:l,isViewOnly:u});default:return null}};return D?n.jsx(Cae,{currentUser:r,startup:j,onBack:()=>L(!1),onProfileUpdate:Q=>{console.log("Profile updated:",Q)}}):n.jsxs("div",{className:"min-h-screen bg-slate-50",children:[n.jsx("div",{className:"bg-white shadow-sm border-b",children:n.jsx("div",{className:"w-full px-3 sm:px-4 lg:px-8",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-start sm:justify-between items-start sm:items-center py-3 sm:py-4 gap-3 sm:gap-0",children:[n.jsxs("div",{className:"flex items-start sm:items-center space-x-2 sm:space-x-3 w-full sm:w-auto",children:[n.jsx("div",{className:"bg-blue-100 p-1.5 sm:p-2 rounded-lg flex-shrink-0",children:n.jsx(rc,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-slate-900 truncate",children:m?`${j.name} - Facilitator Access`:u?`${j.name} - CA Review`:j.name}),n.jsx("p",{className:"text-xs sm:text-sm text-slate-500 mt-1",children:m?g==="full"?"Facilitator view-only access to all tabs (except opportunities)":"Facilitator view-only access to compliance tab only":u?"CA compliance review and monitoring dashboard":"Comprehensive startup monitoring dashboard"}),m&&n.jsx("div",{className:"mt-1",children:n.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${g==="full"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:[" Facilitator ",g==="full"?"Full Access":"Compliance Access Only"]})})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 w-full sm:w-auto",children:[t==="Startup"&&!u&&n.jsxs(Oe,{onClick:()=>L(!0),variant:"outline",size:"sm",className:"w-full sm:w-auto",children:[n.jsx(xm,{className:"mr-2 h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Account"}),n.jsx("span",{className:"sm:hidden",children:"Account"})]}),t!=="Startup"&&a&&n.jsxs(Oe,{onClick:a,variant:"secondary",size:"sm",className:"w-full sm:w-auto",children:[n.jsx(lc,{className:"mr-2 h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Back to Portfolio"}),n.jsx("span",{className:"sm:hidden",children:"Back"})]})]})]})})}),n.jsxs(tt,{className:"!p-0 sm:!p-0",children:[n.jsx("div",{className:"sm:hidden border-b border-slate-200 p-3",children:n.jsxs(Oe,{onClick:()=>E(!T),variant:"outline",className:"w-full flex items-center justify-center gap-2",size:"sm",children:[n.jsx(Lv,{className:"h-4 w-4"}),((J=q.find(Q=>Q.id===v))==null?void 0:J.name)||"Dashboard"]})}),T&&n.jsx("div",{className:"sm:hidden bg-white border-b border-slate-200 p-3 space-y-1",children:q.map(Q=>n.jsxs("button",{onClick:()=>R(Q.id),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium flex items-center gap-2 ${v===Q.id?"bg-brand-primary text-white":"text-slate-700 hover:bg-slate-100"}`,children:[Q.icon,Q.name]},Q.id))}),n.jsx("div",{className:"hidden sm:block border-b border-slate-200",children:n.jsx("nav",{className:"-mb-px flex space-x-1 sm:space-x-4 px-4 overflow-x-auto","aria-label":"Tabs",children:q.map(Q=>n.jsxs("button",{onClick:()=>R(Q.id),className:`${v===Q.id?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center whitespace-nowrap py-4 px-1 sm:px-2 border-b-2 font-medium text-sm transition-colors`,children:[Q.icon,n.jsx("span",{className:"ml-2",children:Q.name})]},Q.id))})}),n.jsx("div",{className:"p-3 sm:p-4 lg:p-6",children:se()})]})]})},_D=({users:e})=>{const r=(()=>{const a={};return e.forEach(i=>{try{const l=new Date(i.registrationDate);if(isNaN(l.getTime()))return;const u=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}`;a[u]=(a[u]||0)+1}catch{console.error("Could not parse date:",i.registrationDate)}}),Object.keys(a).sort().map(i=>{const[l,u]=i.split("-");return{name:new Date(Number(l),Number(u)-1).toLocaleString("default",{month:"short",year:"numeric"}),"New Users":a[i]}})})();return n.jsxs("div",{children:[n.jsx("h4",{className:"text-md font-semibold mb-4 text-slate-600",children:"User Signups Over Time"}),n.jsx("div",{style:{width:"100%",height:300},children:n.jsx(ii,{children:n.jsxs(Dv,{data:r,margin:{top:5,right:20,left:-10,bottom:5},children:[n.jsx(su,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),n.jsx(oc,{dataKey:"name",stroke:"#64748b",fontSize:12}),n.jsx(vl,{allowDecimals:!1,stroke:"#64748b",fontSize:12}),n.jsx(si,{cursor:{fill:"rgba(239, 246, 255, 0.5)"},contentStyle:{backgroundColor:"#fff",borderRadius:"0.5rem",borderColor:"#e2e8f0"}}),n.jsx(Es,{wrapperStyle:{fontSize:"14px"}}),n.jsx(pd,{dataKey:"New Users",fill:"#3b82f6",radius:[4,4,0,0]})]})})})]})},mk=["#1e40af","#1d4ed8","#3b82f6","#60a5fa","#93c5fd","#dbeafe"],ND=({users:e})=>{const r=(()=>{const a={};return e.forEach(s=>{a[s.role]=(a[s.role]||0)+1}),Object.keys(a).map(s=>({name:s,value:a[s]})).sort((s,i)=>i.value-s.value)})();return n.jsxs("div",{children:[n.jsx("h4",{className:"text-md font-semibold mb-4 text-slate-600",children:"User Distribution by Role"}),n.jsx("div",{style:{width:"100%",height:300},children:n.jsx(ii,{children:n.jsxs(jf,{children:[n.jsx(nu,{data:r,cx:"50%",cy:"50%",labelLine:!1,outerRadius:100,fill:"#8884d8",dataKey:"value",nameKey:"name",label:({name:a,percent:s})=>`${(s*100).toFixed(0)}%`,children:r.map((a,s)=>n.jsx(xl,{fill:mk[s%mk.length]},`cell-${s}`))}),n.jsx(si,{formatter:(a,s)=>[`${a} users`,s]}),n.jsx(Es,{wrapperStyle:{fontSize:"14px"}})]})})})]})},pk={async checkDataExists(){try{const{data:e}=await G.from("startups").select("id").limit(1);return e&&e.length>0}catch(e){return console.error("Error checking data existence:",e),!1}},async migrateAllData(){if(console.log("Starting data migration..."),await this.checkDataExists())return console.log("Data already exists, skipping migration"),{success:!0,error:null,message:"Data already exists"};try{return await this.migrateUsers(),await this.migrateStartups(),await this.migrateNewInvestments(),await this.migrateStartupAdditionRequests(),await this.migrateVerificationRequests(),await this.migrateInvestmentOffers(),console.log("Data migration completed successfully!"),{success:!0,error:null,message:"Data migration completed successfully"}}catch(t){return console.error("Data migration failed:",t),{success:!1,error:t.message,message:"Data migration failed"}}},async migrateUsers(){console.log("Migrating users...");for(const e of oee)try{const{data:t}=await G.from("users").select("id").eq("email",e.email).single();if(!t){const{error:r}=await G.from("users").insert({id:e.id,email:e.email,name:e.name,role:e.role,registration_date:e.registrationDate});r?console.error(`Failed to migrate user ${e.email}:`,r):console.log(`Migrated user: ${e.email}`)}}catch(t){console.error(`Error migrating user ${e.email}:`,t)}},async migrateStartups(){console.log("Migrating startups...");for(const e of see)try{const{data:t}=await G.from("startups").select("id").eq("name",e.name).single();if(!t){const{data:r,error:a}=await G.from("startups").insert({id:e.id,name:e.name,investment_type:e.investmentType,investment_value:e.investmentValue,equity_allocation:e.equityAllocation,current_valuation:e.currentValuation,compliance_status:e.complianceStatus,sector:e.sector,total_funding:e.totalFunding,total_revenue:e.totalRevenue,registration_date:e.registrationDate}).select().single();if(a)console.error(`Failed to migrate startup ${e.name}:`,a);else if(console.log(`Migrated startup: ${e.name}`),e.founders&&e.founders.length>0){const s=e.founders.map(l=>({startup_id:r.id,name:l.name,email:l.email})),{error:i}=await G.from("founders").insert(s);i?console.error(`Failed to migrate founders for ${e.name}:`,i):console.log(`Migrated ${e.founders.length} founders for ${e.name}`)}}}catch(t){console.error(`Error migrating startup ${e.name}:`,t)}},async migrateNewInvestments(){console.log("Migrating new investments...");for(const e of kw)try{const{data:t}=await G.from("new_investments").select("id").eq("name",e.name).single();if(!t){const{error:r}=await G.from("new_investments").insert({id:e.id,name:e.name,investment_type:e.investmentType,investment_value:e.investmentValue,equity_allocation:e.equityAllocation,sector:e.sector,total_funding:e.totalFunding,total_revenue:e.totalRevenue,registration_date:e.registrationDate,pitch_deck_url:e.pitchDeckUrl,pitch_video_url:e.pitchVideoUrl,compliance_status:e.complianceStatus});r?console.error(`Failed to migrate investment ${e.name}:`,r):console.log(`Migrated investment: ${e.name}`)}}catch(t){console.error(`Error migrating investment ${e.name}:`,t)}},async migrateStartupAdditionRequests(){console.log("Migrating startup addition requests...");for(const e of iee)try{const{data:t}=await G.from("startup_addition_requests").select("id").eq("name",e.name).single();if(!t){const{error:r}=await G.from("startup_addition_requests").insert({id:e.id,name:e.name,investment_type:e.investmentType,investment_value:e.investmentValue,equity_allocation:e.equityAllocation,sector:e.sector,total_funding:e.totalFunding,total_revenue:e.totalRevenue,registration_date:e.registrationDate});r?console.error(`Failed to migrate request ${e.name}:`,r):console.log(`Migrated request: ${e.name}`)}}catch(t){console.error(`Error migrating request ${e.name}:`,t)}},async migrateVerificationRequests(){console.log("Migrating verification requests...");for(const e of lee)try{const{data:t}=await G.from("verification_requests").select("id").eq("startup_name",e.startupName).single();if(!t){const{error:r}=await G.from("verification_requests").insert({id:e.id,startup_id:e.startupId,startup_name:e.startupName,request_date:e.requestDate});r?console.error(`Failed to migrate verification request for ${e.startupName}:`,r):console.log(`Migrated verification request: ${e.startupName}`)}}catch(t){console.error(`Error migrating verification request for ${e.startupName}:`,t)}},async migrateInvestmentOffers(){console.log("Migrating investment offers...");for(const e of cee)try{const{data:t}=await G.from("investment_offers").select("id").eq("investor_email",e.investorEmail).eq("startup_name",e.startupName).single();if(!t){const{error:r}=await G.from("investment_offers").insert({id:e.id,investor_email:e.investorEmail,startup_name:e.startupName,investment_id:e.investment.id,offer_amount:e.offerAmount,equity_percentage:e.equityPercentage,status:e.status});r?console.error(`Failed to migrate offer for ${e.startupName}:`,r):console.log(`Migrated investment offer: ${e.startupName}`)}}catch(t){console.error(`Error migrating investment offer for ${e.startupName}:`,t)}},async clearAllData(){console.log("Clearing all data...");try{return await G.from("investment_offers").delete().neq("id",0),await G.from("verification_requests").delete().neq("id",0),await G.from("startup_addition_requests").delete().neq("id",0),await G.from("new_investments").delete().neq("id",0),await G.from("founders").delete().neq("id",0),await G.from("startups").delete().neq("id",0),console.log("All data cleared successfully!"),{success:!0,error:null}}catch(e){return console.error("Error clearing data:",e),{success:!1,error:e.message}}}},kae=()=>{const[e,t]=_.useState(!1),[r,a]=_.useState(null),s=async()=>{t(!0),a(null);try{const d=await pk.migrateAllData();d.success?a({type:"success",text:d.message||"Data migration completed successfully!"}):a({type:"error",text:d.message||"Data migration failed!"})}catch{a({type:"error",text:"An unexpected error occurred during migration."})}finally{t(!1)}},i=async()=>{if(confirm("Are you sure you want to clear all data? This action cannot be undone.")){t(!0),a(null);try{(await pk.clearAllData()).success?a({type:"success",text:"All data cleared successfully!"}):a({type:"error",text:"Failed to clear data!"})}catch{a({type:"error",text:"An unexpected error occurred while clearing data."})}finally{t(!1)}}},l=()=>{if(!r)return null;switch(r.type){case"success":return n.jsx(sa,{className:"h-5 w-5 text-green-500"});case"error":return n.jsx(iu,{className:"h-5 w-5 text-red-500"});case"info":return n.jsx(iu,{className:"h-5 w-5 text-blue-500"});default:return null}},u=()=>{if(!r)return"";switch(r.type){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return""}};return n.jsx("div",{className:"max-w-2xl mx-auto p-6",children:n.jsxs(tt,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(Hx,{className:"h-8 w-8 text-blue-600"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Data Manager"}),n.jsx("p",{className:"text-slate-600",children:"Manage database data and migrations"})]})]}),r&&n.jsxs("div",{className:`flex items-center gap-3 p-4 mb-6 rounded-lg border ${u()}`,children:[l(),n.jsx("p",{className:"font-medium",children:r.text})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Data Migration"}),n.jsx("p",{className:"text-blue-700 text-sm mb-4",children:"Populate the database with sample data including startups, investments, and user requests."}),n.jsxs(Oe,{onClick:s,disabled:e,className:"flex items-center gap-2",children:[e?n.jsx(sm,{className:"h-4 w-4 animate-spin"}):n.jsx(Hx,{className:"h-4 w-4"}),e?"Migrating...":"Migrate Sample Data"]})]}),n.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"Clear All Data"}),n.jsx("p",{className:"text-red-700 text-sm mb-4",children:"Warning: This will permanently delete all data from the database. This action cannot be undone."}),n.jsxs(Oe,{onClick:i,disabled:e,variant:"outline",className:"flex items-center gap-2 text-red-600 border-red-600 hover:bg-red-50",children:[e?n.jsx(sm,{className:"h-4 w-4 animate-spin"}):n.jsx(Ma,{className:"h-4 w-4"}),e?"Clearing...":"Clear All Data"]})]})]}),n.jsxs("div",{className:"mt-8 p-4 bg-slate-50 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Database Information"}),n.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[n.jsx("p",{children:" Sample data includes 20+ startups across various sectors"}),n.jsx("p",{children:" Investment opportunities with different funding stages"}),n.jsx("p",{children:" User requests and verification workflows"}),n.jsx("p",{children:" Mock users for testing different roles"})]})]})]})})},Eae=({currentUser:e})=>{const[t,r]=_.useState([]),[a,s]=_.useState(!0),[i,l]=_.useState(null),[u,d]=_.useState(null),[f,m]=_.useState(!1),[g,v]=_.useState({status:"under_review",review_notes:""}),[x,j]=_.useState({total:0,pending:0,approved:0,rejected:0,under_review:0}),b=async()=>{try{s(!0),l(null);const[L,F]=await Promise.all([Dh.getAllSubmissions(),Dh.getSubmissionStats()]);r(L),j(F)}catch(L){console.error("Error loading submissions:",L),l("Failed to load submissions")}finally{s(!1)}};_.useEffect(()=>{b()},[]);const A=async L=>{try{l(null),await Dh.approveAndPromoteToMainRules(L),await b(),m(!1),d(null),alert("Compliance approved and added to main rules successfully!")}catch(F){console.error("Error approving submission:",F),l("Failed to approve submission")}},S=async()=>{if(u)try{l(null),await Dh.updateSubmissionStatus(u.id,g),await b(),m(!1),d(null),v({status:"under_review",review_notes:""}),alert("Submission rejected successfully!")}catch(L){console.error("Error rejecting submission:",L),l("Failed to reject submission")}},T=async L=>{if(confirm("Are you sure you want to delete this submission? This action cannot be undone."))try{l(null),await Dh.deleteSubmission(L),await b(),alert("Submission deleted successfully!")}catch(F){console.error("Error deleting submission:",F),l("Failed to delete submission")}},E=L=>{const F={pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",under_review:"bg-blue-100 text-blue-800"};return n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${F[L]}`,children:L.replace("_"," ").toUpperCase()})},D=L=>{const F={parent:"bg-purple-100 text-purple-800",subsidiary:"bg-indigo-100 text-indigo-800",international:"bg-orange-100 text-orange-800"};return n.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${F[L]}`,children:L.toUpperCase()})};return a?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"New Compliances Added by Users"}),n.jsx("p",{className:"text-gray-600",children:"Review and approve compliance submissions from users"})]}),n.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x.total}),n.jsx("div",{className:"text-sm text-gray-600",children:"Total Submissions"})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:x.pending}),n.jsx("div",{className:"text-sm text-gray-600",children:"Pending Review"})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x.under_review}),n.jsx("div",{className:"text-sm text-gray-600",children:"Under Review"})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:x.approved}),n.jsx("div",{className:"text-sm text-gray-600",children:"Approved"})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:x.rejected}),n.jsx("div",{className:"text-sm text-gray-600",children:"Rejected"})]})]}),i&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i}),n.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted By"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company & Operation"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Compliance"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Country"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(L=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.submitted_by_name}),n.jsxs("div",{className:"text-sm text-gray-500",children:[L.submitted_by_role,"  ",L.submitted_by_email]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.company_name}),n.jsx("div",{className:"text-sm text-gray-500",children:L.company_type}),n.jsx("div",{className:"mt-1",children:D(L.operation_type)})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.compliance_name}),n.jsxs("div",{className:"text-sm text-gray-500",children:[L.frequency,"  ",L.verification_required]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"text-sm text-gray-900",children:[L.country_name," (",L.country_code,")"]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:E(L.status)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(L.created_at).toLocaleDateString()}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[L.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{d(L),v({status:"approved",review_notes:""}),m(!0)},className:"text-green-600 hover:text-green-900",children:"Approve"}),n.jsx("button",{onClick:()=>{d(L),v({status:"rejected",review_notes:""}),m(!0)},className:"text-red-600 hover:text-red-900",children:"Reject"})]}),n.jsx("button",{onClick:()=>T(L.id),className:"text-gray-600 hover:text-gray-900",children:"Delete"})]})]},L.id))})]})}),t.length===0&&n.jsx("div",{className:"text-center py-12",children:n.jsx("div",{className:"text-gray-500",children:"No user submissions found"})})]}),f&&u&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:n.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:n.jsxs("div",{className:"mt-3",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:[g.status==="approved"?"Approve":"Reject"," Submission"]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[n.jsx("strong",{children:"Compliance:"})," ",u.compliance_name]}),n.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[n.jsx("strong",{children:"Company:"})," ",u.company_name]}),n.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[n.jsx("strong",{children:"Operation Type:"})," ",u.operation_type]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Review Notes"}),n.jsx("textarea",{value:g.review_notes,onChange:L=>v(F=>({...F,review_notes:L.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Add review notes..."})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{onClick:()=>{m(!1),d(null),v({status:"under_review",review_notes:""})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),g.status==="approved"?n.jsx("button",{onClick:()=>A(u.id),className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700",children:"Approve & Add to Main Rules"}):n.jsx("button",{onClick:S,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Reject"})]})]})})})]})},Pae=()=>{const[e,t]=_.useState([]),[r,a]=_.useState(!0),[s,i]=_.useState(!1),[l,u]=_.useState(null),[d,f]=_.useState({country_code:"",country_name:"",ca_type:"",cs_type:"",company_type:"",compliance_name:"",compliance_description:"",frequency:"annual",verification_required:"both"}),[m,g]=_.useState({country:"",companyType:"",verification:""}),[v,x]=_.useState([]),[j,b]=_.useState([]),[A,S]=_.useState(""),[T,E]=_.useState(""),[D,L]=_.useState(!1),[F,z]=_.useState(null),[M,U]=_.useState({isUploading:!1,success:0,errors:[]}),[oe,R]=_.useState(!1),[q,se]=_.useState({code:"",name:"",caTypes:[],csTypes:[]}),[J,Q]=_.useState(""),[ae,he]=_.useState(""),de=async()=>{a(!0);try{const[X,ge,be]=await Promise.all([an.getAllRules(),an.getCountries(),an.getCompanyTypes()]);t(X),x(ge),b(be),d.country_code&&await _e(d.country_code)}catch(X){console.error("Error loading data:",X)}a(!1)},_e=async X=>{try{const[ge,be]=await Promise.all([an.getCATypeByCountry(X),an.getCSTypeByCountry(X)]);S(ge||""),E(be||"")}catch(ge){console.error("Error loading country-specific types:",ge)}};_.useEffect(()=>{de()},[]);const Y=async X=>{X.preventDefault();try{l?await an.updateRule(l.id,d):await an.addRule(d),i(!1),u(null),Z(),await de()}catch(ge){console.error("Error saving rule:",ge),alert("Error saving compliance rule. Please try again.")}},ye=async X=>{if(confirm("Are you sure you want to delete this compliance rule?"))try{await an.deleteRule(X),await de()}catch(ge){console.error("Error deleting rule:",ge),alert("Error deleting compliance rule. Please try again.")}},P=X=>{u(X),f({country_code:X.country_code,country_name:X.country_name,ca_type:X.ca_type||"",cs_type:X.cs_type||"",company_type:X.company_type,compliance_name:X.compliance_name,compliance_description:X.compliance_description||"",frequency:X.frequency,verification_required:X.verification_required}),i(!0)},Z=()=>{f({country_code:"",country_name:"",ca_type:"",cs_type:"",company_type:"",compliance_name:"",compliance_description:"",frequency:"annual",verification_required:"both"})},ce=e.filter(X=>!(m.country&&X.country_code!==m.country||m.companyType&&X.company_type!==m.companyType||m.verification&&X.verification_required!==m.verification)),je=async X=>{if(X)try{const ge=await an.getCompanyTypesByCountry(X);b(ge)}catch(ge){console.error("Error loading company types:",ge)}},ke=async()=>{if(!q.code||!q.name||q.caTypes.length===0||q.csTypes.length===0){alert("Please fill in country code, name, and at least one CA type and one CS type.");return}try{await an.addCountryWithTypes({country_code:q.code.toUpperCase(),country_name:q.name,ca_types:q.caTypes,cs_types:q.csTypes}),se({code:"",name:"",caTypes:[],csTypes:[]}),Q(""),he(""),R(!1),await de(),alert("Country added successfully with CA and CS types!")}catch(X){console.error("Error adding country:",X),alert("Error adding country. Please try again.")}},De=()=>{J&&!q.caTypes.includes(J)&&(se(X=>({...X,caTypes:[...X.caTypes,J]})),Q(""))},Ee=()=>{ae&&!q.csTypes.includes(ae)&&(se(X=>({...X,csTypes:[...X.csTypes,ae]})),he(""))},ne=X=>{se(ge=>({...ge,caTypes:ge.caTypes.filter(be=>be!==X)}))},Ne=X=>{se(ge=>({...ge,csTypes:ge.csTypes.filter(be=>be!==X)}))},le=async()=>{if(F){U({isUploading:!0,success:0,errors:[]});try{const X=await B(F);console.log("Raw data from file:",X),console.log("First row keys:",X.length>0?Object.keys(X[0]):"No data");const ge=X.map(($e,Ze)=>{let pe={country_code:($e["Country Code"]||$e["Country Co"]||$e.country_code||$e.country_co||"").toString().trim(),country_name:($e["Country Name"]||$e.country_name||"").toString().trim(),ca_type:($e["CA Type"]||$e.ca_type||"").toString().trim(),cs_type:($e["CS Type"]||$e.cs_type||"").toString().trim(),company_type:($e["Company Type"]||$e.Company||$e.company_type||$e.company||"").toString().trim(),compliance_name:($e["Compliance Name"]||$e.Complianc||$e.compliance_name||$e.compliance||"").toString().trim(),compliance_description:($e["Compliance Description"]||$e.Complianc||$e.compliance_description||$e.description||"").toString().trim(),frequency:($e.Frequency||$e.frequency||"annual").toString().trim(),verification_required:($e["Verification Required"]||$e.Verificatio||$e.verification_required||$e.verification||"both").toString().trim()};["first-year","monthly","quarterly","annual"].includes(pe.frequency)||(console.warn(`Row ${Ze+1}: Invalid frequency "${pe.frequency}", defaulting to "annual"`),pe.frequency="annual");const Le=pe.verification_required.toLowerCase().trim();return Le==="ca"||Le.includes("chartered")||Le.includes("tax advisor")||Le.includes("auditor")||Le.includes("cpa")||Le.includes("certified public accountant")||Le.includes("tax consultant")||Le.includes("financial advisor")||Le.includes("accounting professional")?pe.verification_required="CA":Le==="cs"||Le.includes("company secretary")||Le.includes("corporate secretary")||Le.includes("management")||Le.includes("lawyer")||Le.includes("legal advisor")||Le.includes("legal counsel")||Le.includes("corporate lawyer")||Le.includes("business lawyer")||Le.includes("corporate governance")?pe.verification_required="CS":(Le==="both"||Le.includes("ca and cs")||Le.includes("chartered accountant and company secretary")||Le.includes("tax advisor and legal advisor")||Le.includes("auditor and lawyer")||console.warn(`Row ${Ze+1}: Unrecognized verification_required "${pe.verification_required}", defaulting to "both"`),pe.verification_required="both"),(!pe.country_code||!pe.country_name||!pe.compliance_name)&&console.warn(`Row ${Ze+1} missing required fields:`,pe),console.log(`Row ${Ze+1} mapped:`,pe),pe}).filter($e=>$e.country_code&&$e.country_name&&$e.compliance_name);console.log("Mapped rules data:",ge);const be=await an.bulkUploadRules(ge);console.log("Result from bulkUploadRules received in handleBulkUpload:",{success:be.success,errors:be.errors}),U({isUploading:!1,success:be.success,errors:be.errors}),await de(),be.errors.length===0?(alert(`Successfully uploaded ${be.success} compliance rules!`),L(!1),z(null)):alert(`Uploaded ${be.success} rules successfully. ${be.errors.length} errors occurred. Check the error details.`)}catch(X){console.error("Error uploading file:",X);const ge=X instanceof Error?X.message:"Unknown error occurred";U({isUploading:!1,success:0,errors:[{row:0,error:ge,data:null}]}),alert(`Error uploading file: ${ge}`)}}},xe=()=>{const X=[{"Country Code":"US","Country Name":"United States","CA Type":"CPA","CS Type":"CISA","Company Type":"C-Corporation","Compliance Name":"Annual Financial Audit","Compliance Description":"Annual audit of financial statements by certified public accountant",Frequency:"annual","Verification Required":"both"},{"Country Code":"IN","Country Name":"India","CA Type":"CA","CS Type":"CISA","Company Type":"Private Limited","Compliance Name":"Tax Audit","Compliance Description":"Annual tax audit under Income Tax Act",Frequency:"annual","Verification Required":"CA"},{"Country Code":"UK","Country Name":"United Kingdom","CA Type":"ACA","CS Type":"CISA","Company Type":"Limited Company","Compliance Name":"Annual Return","Compliance Description":"Annual return filing with Companies House",Frequency:"annual","Verification Required":"both"},{"Country Code":"US","Country Name":"United States","CA Type":"CPA","CS Type":"CISA","Company Type":"LLC","Compliance Name":"Quarterly Tax Filing","Compliance Description":"Quarterly estimated tax payments",Frequency:"quarterly","Verification Required":"CA"},{"Country Code":"IN","Country Name":"India","CA Type":"CA","CS Type":"CISA","Company Type":"Public Limited","Compliance Name":"Board Meeting Minutes","Compliance Description":"Monthly board meeting minutes and resolutions",Frequency:"monthly","Verification Required":"CS"}],ge=Object.keys(X[0]),be=[ge.join(","),...X.map(V=>ge.map(Le=>{const ft=V[Le];return typeof ft=="string"&&(ft.includes(",")||ft.includes('"'))?`"${ft.replace(/"/g,'""')}"`:ft}).join(","))].join(`
`),$e=new Blob([be],{type:"text/csv;charset=utf-8;"}),Ze=document.createElement("a"),pe=URL.createObjectURL($e);Ze.setAttribute("href",pe),Ze.setAttribute("download","compliance_rules_sample.csv"),Ze.style.visibility="hidden",document.body.appendChild(Ze),Ze.click(),document.body.removeChild(Ze)},H=X=>{const ge=X.split(`
`).filter(Ze=>Ze.trim());if(ge.length<2)return[];const be=W(ge[0]);return ge.slice(1).map(Ze=>{const pe=W(Ze),V={};return be.forEach((Le,ft)=>{V[Le]=pe[ft]||""}),V})},W=X=>{const ge=[];let be="",$e=!1;for(let Ze=0;Ze<X.length;Ze++){const pe=X[Ze];pe==='"'?$e&&X[Ze+1]==='"'?(be+='"',Ze++):$e=!$e:pe===","&&!$e?(ge.push(be.trim()),be=""):be+=pe}return ge.push(be.trim()),ge},B=async X=>new Promise((ge,be)=>{const $e=new FileReader;$e.onload=Ze=>{var pe;try{const V=(pe=Ze.target)==null?void 0:pe.result;if(X.name.toLowerCase().endsWith(".csv")){const Le=H(V);console.log("Parsed CSV data:",Le),ge(Le)}else be(new Error("Excel files (.xlsx, .xls) are not supported yet. Please use CSV format."))}catch(V){console.error("Error parsing file:",V),be(V)}},$e.onerror=()=>be(new Error("Failed to read file")),$e.readAsText(X,"UTF-8")}),ee=async X=>{const ge=v.find(be=>be.country_code===X);X?(await Promise.all([je(X),_e(X)]),f(be=>({...be,country_code:X,country_name:(ge==null?void 0:ge.country_name)||"",ca_type:A,cs_type:T}))):(b([]),S(""),E(""),f(be=>({...be,country_code:"",country_name:"",ca_type:"",cs_type:""})))};return r?n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsx("div",{className:"text-slate-600",children:"Loading compliance rules..."})}):n.jsxs("div",{className:"space-y-6",children:[n.jsx(Eae,{currentUser:null}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:"Compliance Rules Management"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Manage all compliance rules in one comprehensive system"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs(Oe,{onClick:()=>L(!0),className:"bg-green-600 hover:bg-green-700",children:[n.jsx(Aw,{className:"w-4 h-4 mr-2"}),"Bulk Upload"]}),n.jsxs(Oe,{onClick:()=>{i(!0),u(null),Z()},className:"bg-blue-600 hover:bg-blue-700",children:[n.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Add Compliance Rule"]})]})]}),n.jsx(tt,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(VJ,{className:"w-5 h-5 text-slate-600"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("select",{value:m.country,onChange:X=>g(ge=>({...ge,country:X.target.value})),className:"border border-slate-300 rounded-md px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Countries"}),v.map(X=>n.jsx("option",{value:X.country_code,children:X.country_name},X.country_code))]}),n.jsxs("select",{value:m.companyType,onChange:X=>g(ge=>({...ge,companyType:X.target.value})),className:"border border-slate-300 rounded-md px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Company Types"}),j.map(X=>n.jsx("option",{value:X,children:X},X))]}),n.jsxs("select",{value:m.verification,onChange:X=>g(ge=>({...ge,verification:X.target.value})),className:"border border-slate-300 rounded-md px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Verification Types"}),n.jsx("option",{value:"CA",children:"CA Required"}),n.jsx("option",{value:"CS",children:"CS Required"}),n.jsx("option",{value:"both",children:"Both Required"})]})]})]})}),s&&n.jsxs(tt,{className:"p-6",children:[n.jsx("h4",{className:"text-lg font-semibold text-slate-700 mb-4",children:l?"Edit Compliance Rule":"Add New Compliance Rule"}),n.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Country *"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:d.country_code,onChange:X=>ee(X.target.value),required:!0,className:"flex-1 border border-slate-300 rounded-md px-3 py-2",children:[n.jsx("option",{value:"",children:"Select Country"}),v.map(X=>n.jsx("option",{value:X.country_code,children:X.country_name},X.country_code))]}),n.jsx(Oe,{type:"button",onClick:()=>R(!0),className:"bg-green-600 hover:bg-green-700 px-3 py-2",size:"sm",children:n.jsx(Wi,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Type *"}),n.jsx("input",{type:"text",value:d.company_type,onChange:X=>f(ge=>({...ge,company_type:X.target.value})),required:!0,className:"w-full border border-slate-300 rounded-md px-3 py-2",placeholder:"e.g., Private Limited Company"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Compliance Name *"}),n.jsx("input",{type:"text",value:d.compliance_name,onChange:X=>f(ge=>({...ge,compliance_name:X.target.value})),required:!0,className:"w-full border border-slate-300 rounded-md px-3 py-2",placeholder:"e.g., Annual Return Filing"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CA Type"}),n.jsx("input",{type:"text",value:d.ca_type,readOnly:!0,className:"w-full border border-slate-300 rounded-md px-3 py-2 bg-slate-50 text-slate-600",placeholder:"Auto-populated based on country"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CS Type"}),n.jsx("input",{type:"text",value:d.cs_type,readOnly:!0,className:"w-full border border-slate-300 rounded-md px-3 py-2 bg-slate-50 text-slate-600",placeholder:"Auto-populated based on country"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Frequency *"}),n.jsxs("select",{value:d.frequency,onChange:X=>f(ge=>({...ge,frequency:X.target.value})),required:!0,className:"w-full border border-slate-300 rounded-md px-3 py-2",children:[n.jsx("option",{value:"first-year",children:"First Year"}),n.jsx("option",{value:"monthly",children:"Monthly"}),n.jsx("option",{value:"quarterly",children:"Quarterly"}),n.jsx("option",{value:"annual",children:"Annual"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Verification Required *"}),n.jsxs("select",{value:d.verification_required,onChange:X=>f(ge=>({...ge,verification_required:X.target.value})),required:!0,className:"w-full border border-slate-300 rounded-md px-3 py-2",children:[n.jsx("option",{value:"CA",children:"CA Required"}),n.jsx("option",{value:"CS",children:"CS Required"}),n.jsx("option",{value:"both",children:"Both Required"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description"}),n.jsx("textarea",{value:d.compliance_description,onChange:X=>f(ge=>({...ge,compliance_description:X.target.value})),rows:3,className:"w-full border border-slate-300 rounded-md px-3 py-2",placeholder:"Detailed description of the compliance requirement..."})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(Oe,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:l?"Update Rule":"Add Rule"}),n.jsx(Oe,{type:"button",onClick:()=>{i(!1),u(null),Z()},className:"bg-slate-500 hover:bg-slate-600",children:"Cancel"})]})]})]}),n.jsxs(tt,{className:"overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:n.jsxs("h4",{className:"text-lg font-semibold text-slate-700",children:["Compliance Rules (",ce.length,")"]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Country"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Company Type"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Compliance"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Frequency"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Verification"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"CA Type"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"CS Type"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-slate-200",children:ce.map(X=>n.jsxs("tr",{className:"hover:bg-slate-50",children:[n.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:X.country_name}),n.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:X.company_type}),n.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:X.compliance_name}),X.compliance_description&&n.jsx("div",{className:"text-xs text-slate-500 mt-1",children:X.compliance_description})]})}),n.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:n.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:X.frequency})}),n.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${X.verification_required==="both"?"bg-purple-100 text-purple-800":X.verification_required==="CA"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:X.verification_required})}),n.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:X.ca_type||"-"}),n.jsx("td",{className:"px-4 py-3 text-sm text-slate-900",children:X.cs_type||"-"}),n.jsx("td",{className:"px-4 py-3 text-sm",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Oe,{size:"sm",onClick:()=>P(X),className:"bg-blue-600 hover:bg-blue-700",children:n.jsx(Xl,{className:"w-3 h-3"})}),n.jsx(Oe,{size:"sm",onClick:()=>ye(X.id),className:"bg-red-600 hover:bg-red-700",children:n.jsx(Ma,{className:"w-3 h-3"})})]})})]},X.id))})]})}),ce.length===0&&n.jsx("div",{className:"text-center py-8 text-slate-500",children:"No compliance rules found. Add your first rule to get started."})]}),oe&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-[600px] max-h-[80vh] overflow-y-auto",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-4",children:"Add New Country with CA & CS Types"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Country Code *"}),n.jsx("input",{type:"text",value:q.code,onChange:X=>se(ge=>({...ge,code:X.target.value.toUpperCase()})),className:"w-full border border-slate-300 rounded-md px-3 py-2",placeholder:"e.g., IN, US, UK",maxLength:3})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Country Name *"}),n.jsx("input",{type:"text",value:q.name,onChange:X=>se(ge=>({...ge,name:X.target.value})),className:"w-full border border-slate-300 rounded-md px-3 py-2",placeholder:"e.g., India, United States"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CA Types *"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:J,onChange:X=>Q(X.target.value),className:"flex-1 border border-slate-300 rounded-md px-3 py-2",placeholder:"e.g., CA, CPA, Auditor",onKeyPress:X=>X.key==="Enter"&&(X.preventDefault(),De())}),n.jsx(Oe,{type:"button",onClick:De,className:"bg-green-600 hover:bg-green-700 px-3 py-2",size:"sm",children:n.jsx(Wi,{className:"w-4 h-4"})})]}),q.caTypes.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2",children:q.caTypes.map((X,ge)=>n.jsxs("span",{className:"inline-flex items-center gap-1 bg-blue-100 text-blue-800 px-2 py-1 rounded-md text-sm",children:[X,n.jsx("button",{type:"button",onClick:()=>ne(X),className:"text-blue-600 hover:text-blue-800",children:""})]},ge))})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CS Types *"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:ae,onChange:X=>he(X.target.value),className:"flex-1 border border-slate-300 rounded-md px-3 py-2",placeholder:"e.g., CS, Director, Legal",onKeyPress:X=>X.key==="Enter"&&(X.preventDefault(),Ee())}),n.jsx(Oe,{type:"button",onClick:Ee,className:"bg-green-600 hover:bg-green-700 px-3 py-2",size:"sm",children:n.jsx(Wi,{className:"w-4 h-4"})})]}),q.csTypes.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2",children:q.csTypes.map((X,ge)=>n.jsxs("span",{className:"inline-flex items-center gap-1 bg-green-100 text-green-800 px-2 py-1 rounded-md text-sm",children:[X,n.jsx("button",{type:"button",onClick:()=>Ne(X),className:"text-green-600 hover:text-green-800",children:""})]},ge))})]})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx(Oe,{onClick:ke,className:"bg-blue-600 hover:bg-blue-700",children:"Add Country with Types"}),n.jsx(Oe,{onClick:()=>{R(!1),se({code:"",name:"",caTypes:[],csTypes:[]}),Q(""),he("")},className:"bg-slate-500 hover:bg-slate-600",children:"Cancel"})]})]})}),D&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-[600px] max-h-[80vh] overflow-y-auto",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-4",children:"Bulk Upload Compliance Rules"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Upload Excel/CSV File *"}),n.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:X=>{var ge;return z(((ge=X.target.files)==null?void 0:ge[0])||null)},className:"w-full border border-slate-300 rounded-md px-3 py-2"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Supported formats: .xlsx, .xls, .csv"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Sample File:"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(Oe,{onClick:xe,className:"bg-blue-600 hover:bg-blue-700",size:"sm",children:[n.jsx(Aw,{className:"w-4 h-4 mr-2"}),"Download Sample CSV"]}),n.jsx("span",{className:"text-xs text-slate-500",children:"Download a sample file with the correct format and example data"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Expected Column Headers:"}),n.jsx("div",{className:"bg-slate-50 p-3 rounded-md text-sm",children:n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("div",{children:" Country Code"}),n.jsx("div",{children:" Country Name"}),n.jsx("div",{children:" CA Type"}),n.jsx("div",{children:" CS Type"}),n.jsx("div",{children:" Company Type"}),n.jsx("div",{children:" Compliance Name"}),n.jsx("div",{children:" Compliance Description"}),n.jsx("div",{children:" Frequency"}),n.jsx("div",{children:" Verification Required"})]})}),n.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:[n.jsx("strong",{children:"Valid values:"}),n.jsx("br",{}),"Frequency: annual, quarterly, monthly, first-year",n.jsx("br",{}),"Verification Required: CA, CS, both"]})]}),M.isUploading&&n.jsx("div",{className:"text-center py-4",children:n.jsx("div",{className:"text-slate-600",children:"Uploading and processing data..."})}),!M.isUploading&&(M.success>0||M.errors.length>0)&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:n.jsxs("div",{className:"text-green-800 font-medium",children:["Successfully uploaded: ",M.success," rules"]})}),M.errors.length>0&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:[n.jsxs("div",{className:"text-red-800 font-medium mb-2",children:["Errors (",M.errors.length,"):"]}),n.jsx("div",{className:"max-h-32 overflow-y-auto text-sm",children:M.errors.map((X,ge)=>n.jsxs("div",{className:"text-red-700",children:["Row ",X.row,": ",X.error]},ge))})]})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx(Oe,{onClick:le,disabled:!F||M.isUploading,className:"bg-green-600 hover:bg-green-700 disabled:bg-slate-400",children:M.isUploading?"Uploading...":"Upload File"}),n.jsx(Oe,{onClick:()=>{L(!1),z(null),U({isUploading:!1,success:0,errors:[]})},className:"bg-slate-500 hover:bg-slate-600",children:"Cancel"})]})]})})]})};function Tae({currentUser:e}){const[t,r]=_.useState("pricing"),[a,s]=_.useState([]),[i,l]=_.useState([]),[u,d]=_.useState([]),[f,m]=_.useState([]),[g,v]=_.useState(!1),[x,j]=_.useState(null),[b,A]=_.useState(null),[S,T]=_.useState({name:"",price:"",currency:"EUR",interval:"monthly",description:"",user_type:"Investor",country:"Global",is_active:!0}),[E,D]=_.useState({code:"",discount_type:"percentage",discount_value:"",max_uses:"",valid_from:"",valid_until:"",is_active:!0}),[L,F]=_.useState({base_price:150,currency:"EUR",is_active:!0,selected_countries:[]}),[z,M]=_.useState({percentage:30,is_active:!0,selected_countries:[]}),[U,oe]=_.useState([]),[R,q]=_.useState({country:"",amountMin:0,amountMax:0,investorFeeType:"percentage",investorFeeValue:0,startupFeeType:"percentage",startupFeeValue:0}),[se,J]=_.useState(null),[Q,ae]=_.useState(null),[he,de]=_.useState([]),[_e,Y]=_.useState([]),[ye,P]=_.useState([]),[Z,ce]=_.useState([]),[je,ke]=_.useState([]);_.useEffect(()=>{De()},[]);const De=async()=>{try{v(!0);const V=await an.getAllRules(),Le=[...new Set(V.map(ft=>ft.country_name))].sort();d(Le),de([]),Y([]),P([]),ce([]),ke([]),s([]),l([])}catch(V){console.error("Error loading data:",V),j("Failed to load financial model data")}finally{v(!1)}},Ee=async()=>{try{if(v(!0),j(null),!S.name||!S.price||!S.description){j("Please fill in all required fields");return}const V={id:Date.now().toString(),name:S.name,price:parseFloat(S.price),currency:S.currency,interval:S.interval,description:S.description,user_type:S.user_type,country:S.country,is_active:S.is_active};s([...a,V]),T({name:"",price:"",currency:"EUR",interval:"monthly",description:"",user_type:"Investor",country:"Global",is_active:!0}),A("Pricing plan created successfully")}catch(V){console.error("Error creating plan:",V),j("Failed to create pricing plan")}finally{v(!1)}},ne=async()=>{try{if(v(!0),j(null),!E.code||!E.discount_value||!E.max_uses){j("Please fill in all required fields");return}const V={id:Date.now().toString(),code:E.code.toUpperCase(),discount_type:E.discount_type,discount_value:parseFloat(E.discount_value),max_uses:parseInt(E.max_uses),used_count:0,valid_from:E.valid_from||new Date().toISOString().split("T")[0],valid_until:E.valid_until,is_active:E.is_active,created_by:(e==null?void 0:e.id)||"",created_at:new Date().toISOString()};l([...i,V]),D({code:"",discount_type:"percentage",discount_value:"",max_uses:"",valid_from:"",valid_until:"",is_active:!0}),A("Discount coupon created successfully")}catch(V){console.error("Error creating coupon:",V),j("Failed to create discount coupon")}finally{v(!1)}},Ne=async V=>{if(confirm("Are you sure you want to delete this pricing plan?"))try{s(a.filter(Le=>Le.id!==V)),A("Pricing plan deleted successfully")}catch(Le){console.error("Error deleting plan:",Le),j("Failed to delete pricing plan")}},le=async V=>{if(confirm("Are you sure you want to delete this discount coupon?"))try{l(i.filter(Le=>Le.id!==V)),A("Discount coupon deleted successfully")}catch(Le){console.error("Error deleting coupon:",Le),j("Failed to delete discount coupon")}},xe=V=>{m(Le=>Le.includes(V)?Le.filter(ft=>ft!==V):[...Le,V])},H=()=>{m([...u])},W=()=>{m([])},B=V=>{F(Le=>({...Le,selected_countries:Le.selected_countries.includes(V)?Le.selected_countries.filter(ft=>ft!==V):[...Le.selected_countries,V]}))},ee=()=>{F(V=>({...V,selected_countries:[...u]}))},X=()=>{F(V=>({...V,selected_countries:[]}))},ge=async()=>{try{v(!0),j(null),A("Due diligence settings updated successfully")}catch(V){console.error("Error updating due diligence settings:",V),j("Failed to update due diligence settings")}finally{v(!1)}},be=()=>{if(!R.country||!R.investorFeeValue||!R.startupFeeValue){j("Please fill in all required fields");return}const V={id:Date.now(),country:R.country,userType:"Investor",amountMin:R.amountMin,amountMax:R.amountMax,feeType:R.investorFeeType,feeValue:R.investorFeeValue,isActive:!0},Le={id:Date.now()+1,country:R.country,userType:"Startup",amountMin:R.amountMin,amountMax:R.amountMax,feeType:R.startupFeeType,feeValue:R.startupFeeValue,isActive:!0};oe([...U,V,Le]),q({country:"",amountMin:0,amountMax:0,investorFeeType:"percentage",investorFeeValue:0,startupFeeType:"percentage",startupFeeValue:0}),A("Fee configurations added successfully for both investors and startups")},$e=V=>{const Le=[...U];Le[V].isActive=!Le[V].isActive,oe(Le)},Ze=V=>{const Le=U.filter((ft,kt)=>kt!==V);oe(Le),A("Fee configuration deleted successfully")},pe=V=>({Global:"EUR","United States":"USD","United Kingdom":"GBP",India:"INR",Germany:"EUR",France:"EUR",Canada:"CAD",Australia:"AUD",Japan:"JPY",China:"CNY",Brazil:"BRL",Mexico:"MXN","South Korea":"KRW",Singapore:"SGD",Netherlands:"EUR",Switzerland:"CHF",Sweden:"SEK",Norway:"NOK",Denmark:"DKK",Finland:"EUR",Italy:"EUR",Spain:"EUR",Portugal:"EUR",Ireland:"EUR",Austria:"EUR",Belgium:"EUR",Poland:"PLN","Czech Republic":"CZK",Hungary:"HUF",Romania:"RON",Bulgaria:"BGN",Croatia:"HRK",Slovenia:"EUR",Slovakia:"EUR",Estonia:"EUR",Latvia:"EUR",Lithuania:"EUR",Luxembourg:"EUR",Malta:"EUR",Cyprus:"EUR",Greece:"EUR"})[V]||"EUR";return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Financial Model Management"}),n.jsx("p",{className:"text-slate-600",children:"Manage subscription pricing and discount coupons"})]})}),n.jsx("div",{className:"border-b border-slate-200",children:n.jsxs("nav",{className:"-mb-px flex space-x-8",children:[n.jsxs("button",{onClick:()=>r("pricing"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="pricing"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[n.jsx(Ki,{className:"h-4 w-4 inline mr-2"}),"Pricing Plans"]}),n.jsxs("button",{onClick:()=>r("coupons"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="coupons"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[n.jsx(N8,{className:"h-4 w-4 inline mr-2"}),"Discount Coupons"]}),n.jsxs("button",{onClick:()=>r("dueDiligence"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="dueDiligence"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[n.jsx(gd,{className:"h-4 w-4 inline mr-2"}),"Due Diligence"]}),n.jsxs("button",{onClick:()=>r("scoutingFees"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="scoutingFees"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[n.jsx(xd,{className:"h-4 w-4 inline mr-2"}),"Scouting Fees"]})]})}),x&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:n.jsx("p",{className:"text-sm text-red-800",children:x})}),b&&n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:n.jsx("p",{className:"text-sm text-green-800",children:b})}),t==="pricing"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Create New Pricing Plan"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Plan Name"}),n.jsx(At,{value:S.name,onChange:V=>T({...S,name:V.target.value}),placeholder:"e.g., Monthly Plan"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Price ()"}),n.jsx(At,{type:"number",value:S.price,onChange:V=>T({...S,price:V.target.value}),placeholder:"15"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Interval"}),n.jsxs("select",{value:S.interval,onChange:V=>T({...S,interval:V.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"monthly",children:"Monthly"}),n.jsx("option",{value:"yearly",children:"Yearly"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"User Type"}),n.jsxs("select",{value:S.user_type,onChange:V=>T({...S,user_type:V.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"Investor",children:"Investor"}),n.jsx("option",{value:"Startup",children:"Startup"}),n.jsx("option",{value:"Startup Facilitation Center",children:"Startup Facilitation Center"}),n.jsx("option",{value:"Investment Advisor",children:"Investment Advisor"})]})]}),n.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Countries"}),n.jsxs("div",{className:"border border-slate-300 rounded-md p-3 max-h-40 overflow-y-auto",children:[n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsx(Oe,{type:"button",size:"sm",variant:"outline",onClick:H,className:"text-xs",children:"Select All"}),n.jsx(Oe,{type:"button",size:"sm",variant:"outline",onClick:W,className:"text-xs",children:"Unselect All"})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:u.map(V=>n.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:f.includes(V),onChange:()=>xe(V),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-slate-700",children:V})]},V))}),f.length===0&&n.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"No countries selected"})]})]}),n.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),n.jsx(At,{value:S.description,onChange:V=>T({...S,description:V.target.value}),placeholder:"Description of the pricing plan"})]})]}),n.jsx("div",{className:"mt-4",children:n.jsxs(Oe,{onClick:Ee,disabled:g,children:[n.jsx(Wi,{className:"h-4 w-4 mr-2"}),"Create Plan"]})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Existing Pricing Plans"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Plan Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"User Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Country"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Interval"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Description"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:a.map(V=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:V.name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:V.user_type}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:V.country}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:["",V.price]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 capitalize",children:V.interval}),n.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:V.description}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:n.jsx(Xl,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>Ne(V.id),className:"text-red-600 hover:text-red-900",children:n.jsx(Ma,{className:"h-4 w-4"})})]})})]},V.id))})]})})]})]}),t==="coupons"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Create New Discount Coupon"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Coupon Code"}),n.jsx(At,{value:E.code,onChange:V=>D({...E,code:V.target.value.toUpperCase()}),placeholder:"WELCOME20"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Discount Type"}),n.jsxs("select",{value:E.discount_type,onChange:V=>D({...E,discount_type:V.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"percentage",children:"Percentage"}),n.jsx("option",{value:"fixed",children:"Fixed Amount ()"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Discount Value ",E.discount_type==="percentage"?"(%)":"()"]}),n.jsx(At,{type:"number",value:E.discount_value,onChange:V=>D({...E,discount_value:V.target.value}),placeholder:E.discount_type==="percentage"?"20":"50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Max Uses"}),n.jsx(At,{type:"number",value:E.max_uses,onChange:V=>D({...E,max_uses:V.target.value}),placeholder:"100"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Valid From"}),n.jsx(At,{type:"date",value:E.valid_from,onChange:V=>D({...E,valid_from:V.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Valid Until"}),n.jsx(At,{type:"date",value:E.valid_until,onChange:V=>D({...E,valid_until:V.target.value})})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Applicable Countries"}),n.jsxs("div",{className:"border border-slate-300 rounded-md p-3 max-h-40 overflow-y-auto",children:[n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsx(Oe,{type:"button",size:"sm",variant:"outline",onClick:H,className:"text-xs",children:"Select All"}),n.jsx(Oe,{type:"button",size:"sm",variant:"outline",onClick:W,className:"text-xs",children:"Unselect All"})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:u.map(V=>n.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:f.includes(V),onChange:()=>xe(V),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-slate-700",children:V})]},V))}),f.length===0&&n.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"No countries selected - will apply globally"})]})]}),n.jsx("div",{className:"mt-4",children:n.jsxs(Oe,{onClick:ne,disabled:g,children:[n.jsx(Wi,{className:"h-4 w-4 mr-2"}),"Create Coupon"]})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Existing Discount Coupons"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Value"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Usage"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Valid Until"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:i.map(V=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:V.code}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 capitalize",children:V.discount_type}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:V.discount_type==="percentage"?`${V.discount_value}%`:`${V.discount_value}`}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:[V.used_count,"/",V.max_uses]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(V.valid_until).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${V.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:V.is_active?"Active":"Inactive"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:n.jsx(Xl,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>le(V.id),className:"text-red-600 hover:text-red-900",children:n.jsx(Ma,{className:"h-4 w-4"})})]})})]},V.id))})]})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Implemented General Discount Coupons"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Value"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Applicable To"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Countries"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Usage"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Valid Until"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:je.map(V=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:V.code}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 capitalize",children:V.discount_type}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:V.discount_type==="percentage"?`${V.discount_value}%`:`${V.discount_value}`}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${V.applicable_to==="All Services"?"bg-purple-100 text-purple-800":V.applicable_to==="Subscription Plans"?"bg-blue-100 text-blue-800":V.applicable_to==="Due Diligence"?"bg-green-100 text-green-800":V.applicable_to==="Scouting Fees"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:V.applicable_to})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx("div",{className:"flex flex-wrap gap-1",children:V.countries.map((Le,ft)=>n.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:Le},ft))})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:[V.used_count,"/",V.max_uses]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(V.valid_until).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${V.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:V.is_active?"Active":"Inactive"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:n.jsx(Xl,{className:"h-4 w-4"})}),n.jsx("button",{className:"text-red-600 hover:text-red-900",children:n.jsx(Ma,{className:"h-4 w-4"})})]})})]},V.id))})]})})]})]}),t==="dueDiligence"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Due Diligence Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Base Price ()"}),n.jsx(At,{type:"number",value:L.base_price,onChange:V=>F({...L,base_price:parseFloat(V.target.value)||0}),placeholder:"150"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Currency"}),n.jsxs("select",{value:L.currency,onChange:V=>F({...L,currency:V.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"EUR",children:"EUR"}),n.jsx("option",{value:"USD",children:"USD"}),n.jsx("option",{value:"GBP",children:"GBP"})]})]}),n.jsx("div",{className:"flex items-end",children:n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:L.is_active,onChange:V=>F({...L,is_active:V.target.checked}),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-slate-700",children:"Active"})]})})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Applicable Countries"}),n.jsxs("div",{className:"border border-slate-300 rounded-md p-3 max-h-40 overflow-y-auto",children:[n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsx(Oe,{type:"button",size:"sm",variant:"outline",onClick:ee,className:"text-xs",children:"Select All"}),n.jsx(Oe,{type:"button",size:"sm",variant:"outline",onClick:X,className:"text-xs",children:"Unselect All"})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:u.map(V=>n.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:L.selected_countries.includes(V),onChange:()=>B(V),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-slate-700",children:V})]},V))}),L.selected_countries.length===0&&n.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"No countries selected - will apply globally"})]})]}),n.jsx("div",{className:"mt-4",children:n.jsxs(Oe,{onClick:ge,disabled:g,children:[n.jsx(Mv,{className:"h-4 w-4 mr-2"}),"Update Settings"]})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Due Diligence Discount Coupons"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Coupon Code"}),n.jsx(At,{value:E.code,onChange:V=>D({...E,code:V.target.value.toUpperCase()}),placeholder:"DD20OFF"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Discount Type"}),n.jsxs("select",{value:E.discount_type,onChange:V=>D({...E,discount_type:V.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"percentage",children:"Percentage"}),n.jsx("option",{value:"fixed",children:"Fixed Amount ()"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Discount Value ",E.discount_type==="percentage"?"(%)":"()"]}),n.jsx(At,{type:"number",value:E.discount_value,onChange:V=>D({...E,discount_value:V.target.value}),placeholder:E.discount_type==="percentage"?"20":"30"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Max Uses"}),n.jsx(At,{type:"number",value:E.max_uses,onChange:V=>D({...E,max_uses:V.target.value}),placeholder:"100"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Valid From"}),n.jsx(At,{type:"date",value:E.valid_from,onChange:V=>D({...E,valid_from:V.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Valid Until"}),n.jsx(At,{type:"date",value:E.valid_until,onChange:V=>D({...E,valid_until:V.target.value})})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Applicable Countries"}),n.jsxs("div",{className:"border border-slate-300 rounded-md p-3 max-h-40 overflow-y-auto",children:[n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsx(Oe,{type:"button",size:"sm",variant:"outline",onClick:H,className:"text-xs",children:"Select All"}),n.jsx(Oe,{type:"button",size:"sm",variant:"outline",onClick:W,className:"text-xs",children:"Unselect All"})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:u.map(V=>n.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:f.includes(V),onChange:()=>xe(V),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-slate-700",children:V})]},V))}),f.length===0&&n.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"No countries selected - will apply globally"})]})]}),n.jsx("div",{className:"mt-4",children:n.jsxs(Oe,{onClick:ne,disabled:g,children:[n.jsx(Wi,{className:"h-4 w-4 mr-2"}),"Create Due Diligence Coupon"]})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Implemented Country-Specific Due Diligence Fees"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Country"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Base Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Currency"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Created"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:he.map(V=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:V.country}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:V.base_price}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:V.currency}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${V.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:V.is_active?"Active":"Inactive"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(V.created_at).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:n.jsx(Xl,{className:"h-4 w-4"})}),n.jsx("button",{className:"text-red-600 hover:text-red-900",children:n.jsx(Ma,{className:"h-4 w-4"})})]})})]},V.id))})]})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Implemented Due Diligence Discount Coupons"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Value"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Countries"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Usage"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Valid Until"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:_e.map(V=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:V.code}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 capitalize",children:V.discount_type}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:V.discount_type==="percentage"?`${V.discount_value}%`:`${V.discount_value}`}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx("div",{className:"flex flex-wrap gap-1",children:V.countries.map((Le,ft)=>n.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:Le},ft))})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:[V.used_count,"/",V.max_uses]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(V.valid_until).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${V.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:V.is_active?"Active":"Inactive"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:n.jsx(Xl,{className:"h-4 w-4"})}),n.jsx("button",{className:"text-red-600 hover:text-red-900",children:n.jsx(Ma,{className:"h-4 w-4"})})]})})]},V.id))})]})})]})]}),t==="scoutingFees"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"New Investment Flow with Scouting Fees"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Step 1: Investor Makes Offer"}),n.jsxs("p",{className:"text-sm text-blue-700",children:["Investor views pitch video and makes an offer, paying a ",n.jsx("strong",{children:"startup scouting fee"})," based on country, amount raised, and user type."]})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Step 2: Startup Reviews Offer"}),n.jsxs("p",{className:"text-sm text-green-700",children:["Startup sees the offer in their CapTable and can accept or reject it. If accepted, startup pays an ",n.jsx("strong",{children:"investor scouting fee"}),"."]})]}),n.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Step 3: Contact Details Revealed"}),n.jsx("p",{className:"text-sm text-purple-700",children:"Contact details are revealed based on investment advisor assignment. If no advisor is assigned, details are revealed directly to both parties."})]})]})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Add New Scouting Fee Configuration"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Country"}),n.jsxs("select",{value:R.country,onChange:V=>q({...R,country:V.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Select Country"}),n.jsx("option",{value:"Global",children:"Global (EUR)"}),u.map(V=>n.jsxs("option",{value:V,children:[V," (",pe(V),")"]},V))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Amount Range (Min)"}),n.jsx(At,{type:"number",value:R.amountMin,onChange:V=>q({...R,amountMin:parseFloat(V.target.value)||0}),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Amount Range (Max)"}),n.jsx(At,{type:"number",value:R.amountMax,onChange:V=>q({...R,amountMax:parseFloat(V.target.value)||0}),placeholder:"100000 (leave 0 for unlimited)"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsxs("h4",{className:"font-medium text-blue-800 mb-3 flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Investor Fees (Startup Scouting Fee)"]}),n.jsx("p",{className:"text-xs text-blue-600 mb-3",children:"Fee paid by investor when making an offer"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Fee Type"}),n.jsxs("select",{value:R.investorFeeType,onChange:V=>q({...R,investorFeeType:V.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Fee Value ",R.investorFeeType==="percentage"?"(%)":`(${pe(R.country)})`]}),n.jsx(At,{type:"number",step:(R.investorFeeType==="percentage","0.01"),value:R.investorFeeValue,onChange:V=>q({...R,investorFeeValue:parseFloat(V.target.value)||0}),placeholder:R.investorFeeType==="percentage"?"2.0":"500"})]})]})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[n.jsxs("h4",{className:"font-medium text-green-800 mb-3 flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Startup Fees (Investor Scouting Fee)"]}),n.jsx("p",{className:"text-xs text-green-600 mb-3",children:"Fee paid by startup when accepting an offer"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Fee Type"}),n.jsxs("select",{value:R.startupFeeType,onChange:V=>q({...R,startupFeeType:V.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Fee Value ",R.startupFeeType==="percentage"?"(%)":`(${pe(R.country)})`]}),n.jsx(At,{type:"number",step:(R.startupFeeType==="percentage","0.01"),value:R.startupFeeValue,onChange:V=>q({...R,startupFeeValue:parseFloat(V.target.value)||0}),placeholder:R.startupFeeType==="percentage"?"1.0":"300"})]})]})]})]}),n.jsx("div",{className:"mt-6",children:n.jsxs(Oe,{onClick:be,disabled:g,children:[n.jsx(Wi,{className:"h-4 w-4 mr-2"}),"Add Fee Configuration for Both User Types"]})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Current Scouting Fee Configurations"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Country"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"User Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Amount Range"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Fee Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Fee Value"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-slate-200",children:[U.map((V,Le)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:V.country}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${V.userType==="Investor"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:V.userType})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:["$",V.amountMin.toLocaleString()," - ",V.amountMax===0?"":`$${V.amountMax.toLocaleString()}`]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${V.feeType==="percentage"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:V.feeType==="percentage"?"Percentage":"Fixed"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:V.feeType==="percentage"?`${V.feeValue}%`:`${pe(V.country)} ${V.feeValue.toLocaleString()}`}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${V.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:V.isActive?"Active":"Inactive"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>$e(Le),className:`text-sm px-2 py-1 rounded ${V.isActive?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:V.isActive?"Deactivate":"Activate"}),n.jsx("button",{onClick:()=>Ze(Le),className:"text-red-600 hover:text-red-900",children:n.jsx(Ma,{className:"h-4 w-4"})})]})})]},V.id||Le)),U.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-sm text-slate-500",children:"No scouting fee configurations found. Add one above to get started."})})]})]})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Default Scouting Fee Configurations"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-slate-800 mb-2",children:"Global Defaults (Applied when no specific country rule exists)"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("h5",{className:"font-medium text-slate-700 mb-2",children:"For Investors (Startup Scouting Fee):"}),n.jsxs("ul",{className:"space-y-1 text-slate-600",children:[n.jsx("li",{children:" $0 - $100K: 2.0%"}),n.jsx("li",{children:" $100K - $500K: 1.5%"}),n.jsx("li",{children:" $500K - $1M: 1.0%"}),n.jsx("li",{children:" $1M+: 0.5%"})]})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"font-medium text-slate-700 mb-2",children:"For Startups (Investor Scouting Fee):"}),n.jsxs("ul",{className:"space-y-1 text-slate-600",children:[n.jsx("li",{children:" $0 - $100K: 1.0%"}),n.jsx("li",{children:" $100K - $500K: 0.8%"}),n.jsx("li",{children:" $500K - $1M: 0.5%"}),n.jsx("li",{children:" $1M+: 0.3%"})]})]})]})]})})]})]})]})}const No=({title:e,value:t,icon:r})=>n.jsx(tt,{className:"flex-1",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:e}),n.jsx("p",{className:"text-2xl font-bold text-slate-800",children:t})]}),n.jsx("div",{className:"p-3 bg-brand-light rounded-full",children:r})]})}),Co=(e,t="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:t,notation:"compact"}).format(e),Oae=({users:e,startups:t,verificationRequests:r,investmentOffers:a,validationRequests:s,onProcessVerification:i,onProcessOffer:l,onProcessValidationRequest:u,onViewStartup:d})=>{const[f,m]=_.useState("dashboard"),[g,v]=_.useState("all"),x=_.useMemo(()=>e.filter(U=>U.role==="Investor").length,[e]),j=_.useMemo(()=>e.filter(U=>U.role==="Startup").length,[e]),b=_.useMemo(()=>e.filter(U=>U.role==="CA").length,[e]),A=_.useMemo(()=>e.filter(U=>U.role==="CS").length,[e]),S=_.useMemo(()=>e.filter(U=>U.role==="Startup Facilitation Center").length,[e]),T=_.useMemo(()=>e.filter(U=>U.role==="Investment Advisor").length,[e]),E=a.length,D=s.filter(U=>U.status==="pending").length,L=r.length,F=a.filter(U=>U.status==="pending").length,z=_.useMemo(()=>{if(g==="all")return e;const U=new Date,oe=g==="30d"?30:90,R=new Date(new Date().setDate(U.getDate()-oe));return e.filter(q=>new Date(q.registrationDate)>=R)},[e,g]),M=()=>{switch(f){case"dashboard":return n.jsx(Dae,{startups:t,users:z,onViewStartup:d,timeFilter:g,setTimeFilter:v});case"userManagement":return n.jsx(Rae,{users:e});case"startupManagement":return n.jsx(Iae,{startups:t,verificationRequests:r,validationRequests:s,onProcessVerification:i,onProcessValidationRequest:u,onViewStartup:d});case"investmentFlow":return n.jsx(qae,{offers:a,onProcessOffer:l});case"compliance":return n.jsx(Fae,{});case"financial":return n.jsx(Bae,{});case"analytics":return n.jsx(Uae,{users:z,startups:t,offers:a,timeFilter:g,setTimeFilter:v});case"system":return n.jsx($ae,{});default:return null}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsx(No,{title:"Total Users",value:e.length,icon:n.jsx(bn,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(No,{title:"Total Startups",value:j,icon:n.jsx(rc,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(No,{title:"Total Investors",value:x,icon:n.jsx(Wp,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(No,{title:"Investment Advisors",value:T,icon:n.jsx(xd,{className:"h-6 w-6 text-brand-primary"})})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsx(No,{title:"CAs (Auditors)",value:b,icon:n.jsx(iQ,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(No,{title:"CSs (Governance)",value:A,icon:n.jsx(cJ,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(No,{title:"Facilitation Centers",value:S,icon:n.jsx(X0,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(No,{title:"Total Startups (Entities)",value:t.length,icon:n.jsx(BJ,{className:"h-6 w-6 text-brand-primary"})})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsx(No,{title:"Pending Verifications",value:L,icon:n.jsx(am,{className:"h-6 w-6 text-yellow-600"})}),n.jsx(No,{title:"Pending Offers",value:F,icon:n.jsx(qJ,{className:"h-6 w-6 text-yellow-600"})}),n.jsx(No,{title:"Pending Validations",value:D,icon:n.jsx(Cs,{className:"h-6 w-6 text-yellow-600"})}),n.jsx(No,{title:"Total Offers",value:E,icon:n.jsx(S8,{className:"h-6 w-6 text-brand-primary"})})]}),n.jsx("div",{className:"border-b border-slate-200",children:n.jsxs("nav",{className:"-mb-px flex flex-wrap space-x-6","aria-label":"Tabs",children:[n.jsx(ed,{id:"dashboard",activeTab:f,setActiveTab:m,icon:n.jsx(K_,{}),children:"Dashboard"}),n.jsx(ed,{id:"userManagement",activeTab:f,setActiveTab:m,icon:n.jsx(bn,{}),children:"User Management"}),n.jsx(ed,{id:"startupManagement",activeTab:f,setActiveTab:m,icon:n.jsx(rc,{}),children:"Startup Management"}),n.jsx(ed,{id:"investmentFlow",activeTab:f,setActiveTab:m,icon:n.jsx(xd,{}),children:"Investment Flow"}),n.jsx(ed,{id:"compliance",activeTab:f,setActiveTab:m,icon:n.jsx(Cs,{}),children:"Compliance"}),n.jsx(ed,{id:"financial",activeTab:f,setActiveTab:m,icon:n.jsx(Ki,{}),children:"Financial"}),n.jsx(ed,{id:"analytics",activeTab:f,setActiveTab:m,icon:n.jsx(G_,{}),children:"Analytics"}),n.jsx(ed,{id:"system",activeTab:f,setActiveTab:m,icon:n.jsx(Kp,{}),children:"System"})]})}),n.jsx("div",{className:"animate-fade-in",children:M()}),n.jsx("style",{children:`
                @keyframes fade-in {
                    from { opacity: 0; transform: translateY(10px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                .animate-fade-in {
                    animation: fade-in 0.4s ease-in-out forwards;
                }
            `})]})},ed=({id:e,activeTab:t,setActiveTab:r,icon:a,children:s})=>{const i={className:"h-5 w-5"};return n.jsxs("button",{onClick:()=>r(e),className:`${t===e?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:[Wc.cloneElement(a,i),s]})},Hh=({filter:e,currentFilter:t,setTimeFilter:r,children:a})=>n.jsx("button",{type:"button",onClick:()=>r(e),className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${t===e?"bg-brand-primary text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:a}),Dae=({startups:e,users:t,onViewStartup:r,timeFilter:a,setTimeFilter:s})=>n.jsxs("div",{className:"space-y-8",children:[n.jsxs(tt,{children:[n.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-4 gap-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Platform Analytics"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Hh,{filter:"30d",currentFilter:a,setTimeFilter:s,children:"30 Days"}),n.jsx(Hh,{filter:"90d",currentFilter:a,setTimeFilter:s,children:"90 Days"}),n.jsx(Hh,{filter:"all",currentFilter:a,setTimeFilter:s,children:"All Time"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsx(_D,{users:t}),n.jsx(ND,{users:t})]})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"All Startups"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Sector"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Valuation"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:e.map(i=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:i.name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:i.sector}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:Co(i.currentValuation)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx(Jx,{status:i.complianceStatus})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>r(i.id),children:[n.jsx(gl,{className:"mr-2 h-4 w-4"})," View Details"]})})]},i.id))})]})})]})]}),Rae=({users:e})=>{const[t,r]=_.useState("All"),[a,s]=_.useState(""),i=e.filter(u=>{const d=t==="All"||u.role===t,f=u.name.toLowerCase().includes(a.toLowerCase())||u.email.toLowerCase().includes(a.toLowerCase());return d&&f}),l=e.reduce((u,d)=>(u[d.role]=(u[d.role]||0)+1,u),{});return n.jsxs("div",{className:"space-y-6",children:[n.jsx(tt,{children:n.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Filter by Role"}),n.jsxs("select",{value:t,onChange:u=>r(u.target.value),className:"px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsxs("option",{value:"All",children:["All Roles (",e.length,")"]}),Object.entries(l).map(([u,d])=>n.jsxs("option",{value:u,children:[u," (",d,")"]},u))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Search Users"}),n.jsx("input",{type:"text",value:a,onChange:u=>s(u.target.value),placeholder:"Search by name or email...",className:"px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-64"})]})]}),n.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",i.length," of ",e.length," users"]})]})}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"User Management"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Email"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Role"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Service Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Registration Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:i.map(u=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:u.name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:u.email}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${u.role==="Admin"?"bg-purple-100 text-purple-800":u.role==="Investor"?"bg-green-100 text-green-800":u.role==="Startup"?"bg-blue-100 text-blue-800":u.role==="Investment Advisor"?"bg-orange-100 text-orange-800":u.role==="Startup Facilitation Center"?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"}`,children:u.role})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:u.serviceCode||u.investorCode||u.caCode||"-"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:u.registrationDate}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs(Oe,{size:"sm",variant:"outline",children:[n.jsx(gl,{className:"h-4 w-4 mr-1"}),"View"]})})]},u.id))})]})})]})]})},Lae=({requests:e,onProcessVerification:t})=>n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:'"Startup Nation" Verification Requests'}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Startup Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Request Date"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:e.length>0?e.map(r=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:r.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:r.requestDate}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[n.jsxs(Oe,{size:"sm",className:"bg-red-600 hover:bg-red-700",onClick:()=>t(r.id,"rejected"),children:[n.jsx(ac,{className:"mr-1 h-4 w-4"})," Reject"]}),n.jsxs(Oe,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>t(r.id,"approved"),children:[n.jsx(Po,{className:"mr-1 h-4 w-4"})," Approve"]})]})]},r.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:3,className:"text-center py-10 text-slate-500",children:"No pending verification requests."})})})]})})]}),Mae=({requests:e,onProcessValidationRequest:t})=>{const[r,a]=_.useState(null),[s,i]=_.useState(""),l=async(u,d)=>{a(u);try{await t(u,d,s),i("")}finally{a(null)}};return n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Startup Nation Validation Requests"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Admin Notes (optional)"}),n.jsx("textarea",{value:s,onChange:u=>i(u.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent",placeholder:"Add notes for the startup...",rows:3})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Startup Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Request Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:e.length>0?e.map(u=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:u.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(u.requestDate).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${u.status==="pending"?"bg-yellow-100 text-yellow-800":u.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.status})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[u.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsxs(Oe,{size:"sm",className:"bg-red-600 hover:bg-red-700",onClick:()=>l(u.id,"rejected"),disabled:r===u.id,children:[n.jsx(ac,{className:"mr-1 h-4 w-4"}),r===u.id?"Processing...":"Reject"]}),n.jsxs(Oe,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>l(u.id,"approved"),disabled:r===u.id,children:[n.jsx(Po,{className:"mr-1 h-4 w-4"}),r===u.id?"Processing...":"Approve"]})]}),u.status!=="pending"&&u.adminNotes&&n.jsx("span",{className:"text-xs text-slate-500",title:u.adminNotes,children:"Has notes"})]})]},u.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"text-center py-10 text-slate-500",children:"No validation requests found."})})})]})})]})},Iae=({startups:e,verificationRequests:t,validationRequests:r,onProcessVerification:a,onProcessValidationRequest:s,onViewStartup:i})=>{const[l,u]=_.useState("startups");return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"border-b border-slate-200",children:n.jsxs("nav",{className:"-mb-px flex space-x-6",children:[n.jsxs("button",{onClick:()=>u("startups"),className:`py-2 px-1 border-b-2 font-medium text-sm ${l==="startups"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[n.jsx(rc,{className:"h-4 w-4 inline mr-2"}),"All Startups (",e.length,")"]}),n.jsxs("button",{onClick:()=>u("verifications"),className:`py-2 px-1 border-b-2 font-medium text-sm ${l==="verifications"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[n.jsx(am,{className:"h-4 w-4 inline mr-2"}),"Verifications (",t.length,")"]}),n.jsxs("button",{onClick:()=>u("validations"),className:`py-2 px-1 border-b-2 font-medium text-sm ${l==="validations"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[n.jsx(Cs,{className:"h-4 w-4 inline mr-2"}),"Validations (",r.filter(d=>d.status==="pending").length,")"]})]})}),l==="startups"&&n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"All Startups"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Sector"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Valuation"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:e.map(d=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:d.name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:d.sector}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:Co(d.currentValuation)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx(Jx,{status:d.complianceStatus})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>i(d.id),children:[n.jsx(gl,{className:"mr-2 h-4 w-4"})," View Details"]})})]},d.id))})]})})]}),l==="verifications"&&n.jsx(Lae,{requests:t,onProcessVerification:a}),l==="validations"&&n.jsx(Mae,{requests:r,onProcessValidationRequest:s})]})},qae=({offers:e,onProcessOffer:t})=>{const[r,a]=_.useState("activeOffers"),[s,i]=_.useState("all"),l=e.filter(f=>f.status==="pending"||f.status==="accepted"),u=l.filter(f=>s==="all"||f.status===s),d=l.reduce((f,m)=>(f[m.status]=(f[m.status]||0)+1,f),{});return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"border-b border-gray-200",children:n.jsxs("nav",{className:"-mb-px flex space-x-8",children:[n.jsx("button",{onClick:()=>a("activeOffers"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="activeOffers"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Active Investment Offers"}),n.jsx("button",{onClick:()=>a("ledger"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="ledger"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Investment Ledger"})]})}),r==="activeOffers"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx(tt,{children:n.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[n.jsx("div",{className:"flex gap-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Filter by Status"}),n.jsxs("select",{value:s,onChange:f=>i(f.target.value),className:"px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsxs("option",{value:"all",children:["All Active Offers (",l.length,")"]}),n.jsxs("option",{value:"pending",children:["Pending (",d.pending||0,")"]}),n.jsxs("option",{value:"accepted",children:["Accepted (",d.accepted||0,")"]})]})]})}),n.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",u.length," of ",l.length," active offers"]})]})}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Active Investment Offers"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Startup"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Investor"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Offer Amount"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Equity %"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Scouting Fees"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Date"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:u.map(f=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:f.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.investorEmail}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:Co(f.offerAmount)}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:[f.equityPercentage,"%"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsxs("div",{className:"text-xs",children:[n.jsxs("div",{children:["Startup: ",Co(f.startup_scouting_fee_paid||0)]}),n.jsxs("div",{children:["Investor: ",Co(f.investor_scouting_fee_paid||0)]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${f.status==="pending"?"bg-yellow-100 text-yellow-800":f.status==="accepted"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:f.status})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(f.createdAt).toLocaleDateString()})]},f.id))})]})})]})]}),r==="ledger"&&n.jsx("div",{className:"space-y-6",children:n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Investment Ledger"}),n.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Complete transaction history of all investment activities including offers, scouting fees, and status changes."}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Activity"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Startup"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Investor"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Amount"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Description"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:e.map(f=>n.jsxs(Wc.Fragment,{children:[n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(f.createdAt).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:"Offer Made"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.investorEmail}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:Co(f.offerAmount)}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:["Investment offer for ",f.equityPercentage,"% equity"]})]}),f.startup_scouting_fee_paid>0&&n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(f.startup_scouting_fee_payment_date||f.createdAt).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600",children:"Startup Scouting Fee"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.investorEmail}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:Co(f.startup_scouting_fee_paid)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:"Paid by investor when making offer"})]}),f.status!=="pending"&&n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(f.updatedAt||f.createdAt).toLocaleDateString()}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:["Offer ",f.status==="accepted"?"Accepted":"Rejected"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.investorEmail}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:""}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.status==="accepted"?"Startup accepted the investment offer":"Startup rejected the investment offer"})]}),f.status==="accepted"&&f.investor_scouting_fee_paid>0&&n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(f.investor_scouting_fee_payment_date||f.updatedAt||f.createdAt).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600",children:"Investor Scouting Fee"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.investorEmail}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:Co(f.investor_scouting_fee_paid)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:"Paid by startup when accepting offer"})]}),f.contact_details_revealed&&n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:new Date(f.contact_details_revealed_date||f.updatedAt||f.createdAt).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-purple-600",children:"Contact Details Revealed"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:f.investorEmail}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:""}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:"Contact information shared between parties"})]})]},f.id))})]})})]})})]})},Fae=()=>n.jsx(Pae,{}),Bae=()=>n.jsx(Tae,{currentUser:null}),Uae=({users:e,startups:t,offers:r,timeFilter:a,setTimeFilter:s})=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs(tt,{children:[n.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-4 gap-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Platform Analytics"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Hh,{filter:"30d",currentFilter:a,setTimeFilter:s,children:"30 Days"}),n.jsx(Hh,{filter:"90d",currentFilter:a,setTimeFilter:s,children:"90 Days"}),n.jsx(Hh,{filter:"all",currentFilter:a,setTimeFilter:s,children:"All Time"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsx(_D,{users:e}),n.jsx(ND,{users:e})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Investment Activity"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Total Investment Offers"}),n.jsx("span",{className:"font-semibold",children:r.length})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Pending Offers"}),n.jsx("span",{className:"font-semibold text-yellow-600",children:r.filter(i=>i.status==="pending").length})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Approved Offers"}),n.jsx("span",{className:"font-semibold text-green-600",children:r.filter(i=>i.status==="approved").length})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Total Investment Value"}),n.jsx("span",{className:"font-semibold",children:Co(r.reduce((i,l)=>i+l.offerAmount,0))})]})]})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Startup Metrics"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Total Startups"}),n.jsx("span",{className:"font-semibold",children:t.length})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Average Valuation"}),n.jsx("span",{className:"font-semibold",children:Co(t.reduce((i,l)=>i+l.currentValuation,0)/t.length||0)})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Total Funding Raised"}),n.jsx("span",{className:"font-semibold",children:Co(t.reduce((i,l)=>i+l.totalFunding,0))})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Total Revenue"}),n.jsx("span",{className:"font-semibold",children:Co(t.reduce((i,l)=>i+l.totalRevenue,0))})]})]})]})]})]}),$ae=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"System Management"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg",children:[n.jsx(Hx,{className:"h-8 w-8 text-blue-600 mb-2"}),n.jsx("h4",{className:"font-semibold text-slate-700",children:"Data Management"}),n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Manage platform data and exports"}),n.jsxs(Oe,{size:"sm",className:"mt-2",variant:"outline",children:[n.jsx(Hx,{className:"h-4 w-4 mr-1"}),"Access"]})]}),n.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg",children:[n.jsx(Kp,{className:"h-8 w-8 text-green-600 mb-2"}),n.jsx("h4",{className:"font-semibold text-slate-700",children:"System Settings"}),n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Configure platform settings"}),n.jsxs(Oe,{size:"sm",className:"mt-2",variant:"outline",children:[n.jsx(Kp,{className:"h-4 w-4 mr-1"}),"Configure"]})]}),n.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg",children:[n.jsx(Ql,{className:"h-8 w-8 text-yellow-600 mb-2"}),n.jsx("h4",{className:"font-semibold text-slate-700",children:"System Health"}),n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Monitor system performance"}),n.jsxs(Oe,{size:"sm",className:"mt-2",variant:"outline",children:[n.jsx(Ql,{className:"h-4 w-4 mr-1"}),"Monitor"]})]})]})]}),n.jsx(kae,{})]}),zae=({startups:e,onUpdateCompliance:t,onViewStartup:r,currentUser:a,onProfileUpdate:s,onLogout:i})=>{const[l,u]=_.useState("all"),[d,f]=_.useState(""),[m,g]=_.useState(null),[v,x]=_.useState([]),[j,b]=_.useState([]),[A,S]=_.useState(e),[T,E]=_.useState({totalStartups:0,pendingReview:0,compliant:0,nonCompliant:0,activeAssignments:0,pendingRequests:0}),[D,L]=_.useState(!0),[F,z]=_.useState(!1),[M,U]=_.useState("assignments"),[oe,R]=_.useState(null),[q,se]=_.useState(!1),[J,Q]=_.useState(!1),[ae,he]=_.useState(!1),[de,_e]=_.useState(!1),[Y,ye]=_.useState([]),[P,Z]=_.useState(!1),[ce,je]=_.useState(new Set),ke=async ee=>{console.log("Share button clicked for startup:",ee.name),console.log("Startup object:",ee);const X=ee.pitchVideoUrl||"Video not available",ge=`Startup: ${ee.name||"N/A"}
Sector: ${ee.sector||"N/A"}
Ask: $${(ee.investmentValue||0).toLocaleString()} for ${ee.equityAllocation||0}% equity
Valuation: $${(ee.currentValuation||0).toLocaleString()}

Pitch Video: ${X}`;console.log("Share details:",ge);try{if(navigator.share){console.log("Using native share API");const be={title:ee.name||"Startup Pitch",text:ge,url:X!=="Video not available"?X:void 0};await navigator.share(be)}else if(navigator.clipboard&&navigator.clipboard.writeText)console.log("Using clipboard API"),await navigator.clipboard.writeText(ge),alert("Startup details copied to clipboard");else{console.log("Using fallback copy method");const be=document.createElement("textarea");be.value=ge,document.body.appendChild(be),be.select(),document.execCommand("copy"),document.body.removeChild(be),alert("Startup details copied to clipboard")}}catch(be){console.error("Share failed",be),alert("Unable to share. Try copying manually.")}};_.useEffect(()=>{(async()=>{L(!0);try{const[X,ge,be,$e]=await Promise.all([qi.getCACode(),qi.getCAStats(),qi.getAssignedStartups(),qi.getAssignmentRequests()]);g(X),E(ge),x(be),b($e)}catch(X){console.error("Error loading CA data:",X)}finally{L(!1)}})()},[]),_.useEffect(()=>{(async()=>{Z(!0);try{const X=await Ni.getActiveFundraisingStartups();ye(X)}catch(X){console.error("Error loading pitches:",X)}finally{Z(!1)}})()},[]),_.useEffect(()=>{S(e)},[e]);const Ee=(M==="browse"?A:v).filter(X=>{const ge=l==="all"||l==="pending"&&X.complianceStatus===_t.Pending||l==="compliant"&&X.complianceStatus===_t.Compliant||l==="non-compliant"&&X.complianceStatus===_t.NonCompliant,be=X.name.toLowerCase().includes(d.toLowerCase())||X.sector.toLowerCase().includes(d.toLowerCase());return ge&&be}),ne=j.filter(ee=>ee.status==="pending"),Ne=ee=>{switch(ee){case _t.Compliant:return n.jsx(sa,{className:"h-5 w-5 text-green-500"});case _t.NonCompliant:return n.jsx(Vp,{className:"h-5 w-5 text-red-500"});case _t.Pending:return n.jsx(Ql,{className:"h-5 w-5 text-yellow-500"});default:return n.jsx(La,{className:"h-5 w-5 text-gray-500"})}},le=ee=>{switch(ee){case _t.Compliant:return"text-green-700 bg-green-50 border-green-200";case _t.NonCompliant:return"text-red-700 bg-red-50 border-red-200";case _t.Pending:return"text-yellow-700 bg-yellow-50 border-yellow-200";default:return"text-gray-700 bg-gray-50 border-gray-200"}},xe=async ee=>{try{if(await qi.approveAssignmentRequest(ee)){const[ge,be,$e]=await Promise.all([qi.getCAStats(),qi.getAssignedStartups(),qi.getAssignmentRequests()]);E(ge),x(be),b($e),alert("Assignment request approved successfully!")}else alert("Failed to approve request. Please try again.")}catch(X){console.error("Error approving request:",X),alert("Error approving request.")}},H=async ee=>{const X=prompt("Please provide a reason for rejection (optional):");try{if(await qi.rejectAssignmentRequest(ee,X||void 0)){const[be,$e,Ze]=await Promise.all([qi.getCAStats(),qi.getAssignedStartups(),qi.getAssignmentRequests()]);E(be),x($e),b(Ze),alert("Assignment request rejected successfully!")}else alert("Failed to reject request. Please try again.")}catch(ge){console.error("Error rejecting request:",ge),alert("Error rejecting request.")}},W=ee=>v.some(X=>X.id===ee),B=ee=>{je(X=>{const ge=new Set(X);return ge.has(ee)?ge.delete(ee):ge.add(ee),ge})};return D?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-600",children:"Loading CA dashboard..."})]})}):de?(console.log(" CAView: Rendering ProfilePage, showProfilePage =",de),n.jsx(fg,{currentUser:a,onBack:()=>{console.log(" CAView: Back button clicked, setting showProfilePage to false"),_e(!1)},onProfileUpdate:ee=>{console.log("Profile updated in CAView:",ee)},onLogout:i})):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"relative profile-menu",children:n.jsx("button",{onClick:()=>{console.log(" CAView: Menu button clicked, setting showProfilePage to true"),_e(!0)},className:"p-2 rounded-full hover:bg-slate-100 transition-colors","aria-label":"Profile menu",children:n.jsx(Lv,{className:"h-6 w-6 text-slate-600"})})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900",children:"TrackMyStartup"}),n.jsx("p",{className:"text-slate-600 text-sm lg:text-base",children:"Manage financial compliance and audit requirements"})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 lg:gap-4",children:[m&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"CA Code:"}),n.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 lg:px-3 lg:py-1 rounded-md text-xs lg:text-sm font-medium",children:m})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ki,{className:"h-6 w-6 lg:h-8 lg:w-8 text-green-600"}),n.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Chartered Accountant"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3 lg:gap-4",children:[n.jsx(tt,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Total Startups"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-slate-900",children:T.totalStartups})]}),n.jsx(La,{className:"h-6 w-6 lg:h-8 lg:w-8 text-blue-500"})]})}),n.jsx(tt,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Pending Review"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-yellow-600",children:T.pendingReview})]}),n.jsx(Ql,{className:"h-6 w-6 lg:h-8 lg:w-8 text-yellow-500"})]})}),n.jsx(tt,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Compliant"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-green-600",children:T.compliant})]}),n.jsx(sa,{className:"h-6 w-6 lg:h-8 lg:w-8 text-green-500"})]})}),n.jsx(tt,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Non-Compliant"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-red-600",children:T.nonCompliant})]}),n.jsx(Vp,{className:"h-6 w-6 lg:h-8 lg:w-8 text-red-500"})]})}),n.jsx(tt,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Active Assignments"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-brand-primary",children:T.activeAssignments})]}),n.jsx(Wp,{className:"h-6 w-6 lg:h-8 lg:w-8 text-brand-primary"})]})}),n.jsx(tt,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Pending Requests"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-orange-600",children:T.pendingRequests})]}),n.jsx(Ql,{className:"h-6 w-6 lg:h-8 lg:w-8 text-orange-500"})]})})]}),n.jsx(W_,{currentUser:a,userRole:"CA",className:"mb-6"}),n.jsx(tt,{className:"p-4",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[n.jsx(Oe,{variant:M==="assignments"?"primary":"secondary",onClick:()=>U("assignments"),className:"w-full sm:w-auto text-sm",children:"My Assignments"}),n.jsxs(Oe,{variant:M==="requests"?"primary":"secondary",onClick:()=>U("requests"),className:"w-full sm:w-auto text-sm",children:["Assignment Requests (",T.pendingRequests,")"]}),n.jsx(Oe,{variant:M==="reels"?"primary":"secondary",onClick:()=>U("reels"),className:"w-full sm:w-auto text-sm",children:"Discover Pitches"})]}),n.jsxs("div",{className:"text-xs lg:text-sm text-slate-600 text-center lg:text-left",children:[M==="assignments"&&"View your assigned startups",M==="requests"&&"Review pending assignment requests",M==="reels"&&"Watch active fundraising pitches"]})]})}),M!=="reels"&&n.jsx(tt,{className:"p-4",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(gd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search startups...",value:d,onChange:ee=>f(ee.target.value),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary text-sm"})]})}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[n.jsx(Oe,{variant:l==="all"?"primary":"secondary",onClick:()=>u("all"),className:"text-xs py-2",children:"All"}),n.jsx(Oe,{variant:l==="pending"?"primary":"secondary",onClick:()=>u("pending"),className:"text-xs py-2",children:"Pending"}),n.jsx(Oe,{variant:l==="compliant"?"primary":"secondary",onClick:()=>u("compliant"),className:"text-xs py-2",children:"Compliant"}),n.jsx(Oe,{variant:l==="non-compliant"?"primary":"secondary",onClick:()=>u("non-compliant"),className:"text-xs py-2",children:"Non-Compliant"})]})]})}),M==="assignments"&&n.jsxs("div",{className:"space-y-4",children:[Ee.map(ee=>{const X=W(ee.id);return n.jsx(tt,{className:"p-4 lg:p-6",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{className:"flex items-start gap-3 lg:gap-4",children:[Ne(ee.complianceStatus),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-base lg:text-lg font-semibold text-slate-900 truncate",children:ee.name}),n.jsx("p",{className:"text-sm text-slate-600",children:ee.sector}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2",children:X&&n.jsx("span",{className:"text-xs lg:text-sm text-brand-primary font-medium",children:" Assigned"})})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[Ne(ee.complianceStatus),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${le(ee.complianceStatus)}`,children:ee.complianceStatus})]}),n.jsx("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:n.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>{console.log(" View Details clicked for startup:",ee),console.log(" onViewStartup function exists:",!!r),alert(`Navigating to ${ee.name} dashboard...`);const ge={id:ee.id,name:ee.name,investmentType:"Seed",investmentValue:ee.totalFunding||0,equityAllocation:0,currentValuation:ee.totalFunding||0,complianceStatus:ee.complianceStatus,sector:ee.sector,totalFunding:ee.totalFunding,totalRevenue:ee.totalRevenue,registrationDate:ee.registrationDate,founders:[]};console.log(" Calling onViewStartup with:",ge),r(ge),console.log(" onViewStartup called successfully")},className:"w-full sm:w-auto text-xs",children:"View Details"})})]})]})},ee.id)}),Ee.length===0&&n.jsxs(tt,{className:"p-6 lg:p-8 text-center",children:[n.jsx(La,{className:"h-10 w-10 lg:h-12 lg:w-12 text-slate-400 mx-auto mb-4"}),n.jsx("p",{className:"text-sm lg:text-base text-slate-600",children:"No startups assigned to you yet"}),n.jsx(Oe,{variant:"primary",className:"mt-4 w-full sm:w-auto",onClick:()=>U("browse"),children:"Browse All Startups"})]})]}),M==="requests"&&n.jsxs("div",{className:"space-y-4",children:[ne.map(ee=>n.jsx(tt,{className:"p-4 lg:p-6",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{className:"flex items-start gap-3 lg:gap-4",children:[n.jsx(Ql,{className:"h-5 w-5 text-orange-500 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-base lg:text-lg font-semibold text-slate-900",children:ee.startupName}),n.jsx("p",{className:"text-sm text-slate-600",children:"Assignment Request"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2",children:[n.jsxs("span",{className:"text-xs lg:text-sm text-slate-500",children:["Requested: ",new Date(ee.requestDate).toLocaleDateString()]}),ee.notes&&n.jsxs("span",{className:"text-xs lg:text-sm text-slate-500",children:["Notes: ",ee.notes]})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[n.jsx("span",{className:"px-2 py-1 lg:px-3 lg:py-1 rounded-full text-xs lg:text-sm font-medium border text-orange-700 bg-orange-50 border-orange-200",children:"Pending"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[n.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>r(e.find(X=>X.id===ee.startupId)||e[0]),children:"View Startup"}),n.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>xe(ee.id),className:"text-green-600 border-green-600 hover:bg-green-50 w-full sm:w-auto text-xs",children:"Approve"}),n.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>H(ee.id),className:"text-red-600 border-red-600 hover:bg-red-50 w-full sm:w-auto text-xs",children:"Reject"})]})]})]})},ee.id)),ne.length===0&&n.jsxs(tt,{className:"p-6 lg:p-8 text-center",children:[n.jsx(sa,{className:"h-10 w-10 lg:h-12 lg:w-12 text-green-400 mx-auto mb-4"}),n.jsx("p",{className:"text-sm lg:text-base text-slate-600",children:"No pending assignment requests"})]})]}),M==="reels"&&n.jsxs("div",{className:"animate-fade-in max-w-4xl mx-auto w-full",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-slate-800 mb-2",children:"Discover Pitches"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Watch startup videos and explore opportunities"})]}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(gd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search startups by name or sector...",value:d,onChange:ee=>f(ee.target.value),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary text-sm"})]})}),n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-100 gap-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("button",{onClick:()=>{se(!1),Q(!1)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${!q&&!J?"bg-blue-600 text-white shadow-blue-200":"bg-white text-slate-600 hover:bg-blue-50 hover:text-blue-600 border border-slate-200"}`,children:[n.jsx(Jl,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"All"})]}),n.jsxs("button",{onClick:()=>{se(!0),Q(!1)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${q&&!J?"bg-green-600 text-white shadow-green-200":"bg-white text-slate-600 hover:bg-green-50 hover:text-green-600 border border-slate-200"}`,children:[n.jsx(sa,{className:`h-3 w-3 sm:h-4 sm:w-4 ${q&&!J?"fill-current":""}`}),n.jsx("span",{className:"hidden sm:inline",children:"Verified"})]}),n.jsxs("button",{onClick:()=>{se(!1),Q(!0)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${J?"bg-red-600 text-white shadow-red-200":"bg-white text-slate-600 hover:bg-red-50 hover:text-red-600 border border-slate-200"}`,children:[n.jsx(nm,{className:`h-3 w-3 sm:h-4 sm:w-4 ${J?"fill-current":""}`}),n.jsx("span",{className:"hidden sm:inline",children:"Favorites"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:[Y.length," active pitches"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[n.jsx(Jl,{className:"h-4 w-4 sm:h-5 sm:w-5"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Pitch Reels"})]})]})]}),n.jsxs("div",{className:"space-y-8",children:[(()=>{let ee=Y;return d.trim()&&(ee=ee.filter(X=>X.name.toLowerCase().includes(d.toLowerCase())||X.sector.toLowerCase().includes(d.toLowerCase()))),q?ee=ee.filter(X=>X.isStartupNationValidated):J&&(ee=ee.filter(X=>ce.has(X.id))),ee})().map(ee=>{const X=Ni.getYoutubeEmbedUrl(ee.pitchVideoUrl);return n.jsxs(tt,{className:"!p-0 overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border-0 bg-white",children:[n.jsx("div",{className:"relative w-full aspect-[16/9] bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:X?oe===ee.id?n.jsxs("div",{className:"relative w-full h-full",children:[n.jsx("iframe",{src:X,title:`Pitch video for ${ee.name}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full"}),n.jsx("button",{onClick:()=>R(null),className:"absolute top-4 right-4 bg-black/70 text-white rounded-full p-2 hover:bg-black/90 transition-all duration-200 backdrop-blur-sm",children:""})]}):n.jsxs("div",{className:"relative w-full h-full group cursor-pointer",onClick:()=>R(ee.id),children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/40"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"w-20 h-20 bg-red-600 rounded-full flex items-center justify-center shadow-2xl transform group-hover:scale-110 transition-all duration-300 group-hover:shadow-red-500/50",children:n.jsx("svg",{className:"w-10 h-10 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M8 5v14l11-7z"})})})}),n.jsx("div",{className:"absolute bottom-4 left-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:n.jsx("p",{className:"text-sm font-medium",children:"Click to play"})})]}):n.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Zc,{className:"h-16 w-16 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No video available"})]})})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-1",children:ee.name}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),ee.sector]})]}),ee.isStartupNationValidated&&n.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-3 py-1.5 rounded-full text-xs font-medium shadow-sm",children:[n.jsx(sa,{className:"h-3 w-3"}),"Verified"]})]}),n.jsx("div",{className:"bg-gradient-to-r from-blue-50 via-purple-50 to-blue-50 px-4 py-3 mt-4 rounded-lg border border-blue-100 shadow-sm",children:n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"font-semibold text-slate-800",children:"Investment Ask:"}),n.jsxs("span",{className:"text-base font-bold text-blue-600 ml-2",children:["$",ee.investmentValue.toLocaleString()]}),n.jsx("span",{className:"text-slate-600 ml-2",children:"for"}),n.jsxs("span",{className:"font-semibold text-purple-600 ml-1",children:[ee.equityAllocation,"%"]}),n.jsx("span",{className:"text-slate-600 ml-1",children:"equity"})]})}),n.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[n.jsxs("button",{onClick:()=>B(ee.id),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 shadow-sm ${ce.has(ee.id)?"bg-gradient-to-r from-red-500 to-pink-500 text-white shadow-red-200 hover:shadow-red-300":"bg-white text-slate-600 hover:bg-red-50 hover:text-red-600 border border-slate-200 hover:border-red-200"}`,children:[n.jsx(nm,{className:`h-5 w-5 ${ce.has(ee.id)?"fill-current":""}`}),ce.has(ee.id)&&n.jsx("span",{className:"text-xs",children:"Liked"})]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>ke(ee),className:"flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 shadow-sm bg-white text-slate-600 hover:bg-blue-50 hover:text-blue-600 border border-slate-200 hover:border-blue-200",children:[n.jsx(Iv,{className:"h-5 w-5"}),"Share"]}),ee.pitchDeckUrl&&ee.pitchDeckUrl!=="#"&&n.jsx("a",{href:ee.pitchDeckUrl,target:"_blank",rel:"noreferrer",children:n.jsxs(Oe,{size:"sm",variant:"secondary",className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white border-0 hover:from-blue-600 hover:to-purple-600 shadow-md hover:shadow-lg transition-all duration-200",children:[n.jsx(La,{className:"h-4 w-4 mr-2"}),"View Deck"]})})]})]})]},ee.fundraisingId)}),Y.length===0&&n.jsx(tt,{className:"text-center py-16 text-slate-500",children:"No active fundraising startups."})]})]})]})},Vae=({startups:e,onUpdateCompliance:t,onViewStartup:r,currentUser:a,onProfileUpdate:s,onLogout:i})=>{const[l,u]=_.useState("all"),[d,f]=_.useState(""),[m,g]=_.useState(null),[v,x]=_.useState([]),[j,b]=_.useState([]),[A,S]=_.useState(e),[T,E]=_.useState({totalStartups:0,pendingReview:0,compliant:0,nonCompliant:0,activeAssignments:0,pendingRequests:0}),[D,L]=_.useState(!0),[F,z]=_.useState(!1),[M,U]=_.useState("assignments"),[oe,R]=_.useState(null),[q,se]=_.useState(!1),[J,Q]=_.useState(!1),[ae,he]=_.useState(!1),[de,_e]=_.useState(!1),[Y,ye]=_.useState([]),[P,Z]=_.useState(!1),[ce,je]=_.useState(new Set),ke=async ee=>{console.log("Share button clicked for startup:",ee.name),console.log("Startup object:",ee);const X=ee.pitchVideoUrl||"Video not available",ge=`Startup: ${ee.name||"N/A"}
Sector: ${ee.sector||"N/A"}
Ask: $${(ee.investmentValue||0).toLocaleString()} for ${ee.equityAllocation||0}% equity
Valuation: $${(ee.currentValuation||0).toLocaleString()}

Pitch Video: ${X}`;console.log("Share details:",ge);try{if(navigator.share){console.log("Using native share API");const be={title:ee.name||"Startup Pitch",text:ge,url:X!=="Video not available"?X:void 0};await navigator.share(be)}else if(navigator.clipboard&&navigator.clipboard.writeText)console.log("Using clipboard API"),await navigator.clipboard.writeText(ge),alert("Startup details copied to clipboard");else{console.log("Using fallback copy method");const be=document.createElement("textarea");be.value=ge,document.body.appendChild(be),be.select(),document.execCommand("copy"),document.body.removeChild(be),alert("Startup details copied to clipboard")}}catch(be){console.error("Share failed",be),alert("Unable to share. Try copying manually.")}};_.useEffect(()=>{(async()=>{L(!0);try{const[X,ge,be,$e]=await Promise.all([Fi.getCSCode(),Fi.getCSStats(),Fi.getAssignedStartups(),Fi.getAssignmentRequests()]);g(X),E(ge),x(be),b($e)}catch(X){console.error("Error loading CS data:",X)}finally{L(!1)}})()},[]),_.useEffect(()=>{(async()=>{Z(!0);try{const X=await Ni.getActiveFundraisingStartups();ye(X)}catch(X){console.error("Error loading pitches:",X)}finally{Z(!1)}})()},[]),_.useEffect(()=>{S(e)},[e]);const Ee=(M==="browse"?A:v).filter(X=>{const ge=l==="all"||l==="pending"&&X.complianceStatus===_t.Pending||l==="compliant"&&X.complianceStatus===_t.Compliant||l==="non-compliant"&&X.complianceStatus===_t.NonCompliant,be=X.name.toLowerCase().includes(d.toLowerCase())||X.sector.toLowerCase().includes(d.toLowerCase());return ge&&be}),ne=j.filter(ee=>ee.status==="pending"),Ne=ee=>{switch(ee){case _t.Compliant:return n.jsx(sa,{className:"h-5 w-5 text-green-500"});case _t.NonCompliant:return n.jsx(Vp,{className:"h-5 w-5 text-red-500"});case _t.Pending:return n.jsx(Ql,{className:"h-5 w-5 text-yellow-500"});default:return n.jsx(La,{className:"h-5 w-5 text-gray-500"})}},le=ee=>{switch(ee){case _t.Compliant:return"text-green-700 bg-green-50 border-green-200";case _t.NonCompliant:return"text-red-700 bg-red-50 border-red-200";case _t.Pending:return"text-yellow-700 bg-yellow-50 border-yellow-200";default:return"text-gray-700 bg-gray-50 border-gray-200"}},xe=async ee=>{try{if(await Fi.approveAssignmentRequest(ee)){const[ge,be,$e]=await Promise.all([Fi.getCSStats(),Fi.getAssignedStartups(),Fi.getAssignmentRequests()]);E(ge),x(be),b($e),alert("Assignment request approved successfully!")}else alert("Failed to approve request. Please try again.")}catch(X){console.error("Error approving request:",X),alert("Error approving request.")}},H=async ee=>{const X=prompt("Please provide a reason for rejection (optional):");try{if(await Fi.rejectAssignmentRequest(ee,X||void 0)){const[be,$e,Ze]=await Promise.all([Fi.getCSStats(),Fi.getAssignedStartups(),Fi.getAssignmentRequests()]);E(be),x($e),b(Ze),alert("Assignment request rejected successfully!")}else alert("Failed to reject request. Please try again.")}catch(ge){console.error("Error rejecting request:",ge),alert("Error rejecting request.")}},W=ee=>v.some(X=>X.id===ee),B=ee=>{je(X=>{const ge=new Set(X);return ge.has(ee)?ge.delete(ee):ge.add(ee),ge})};return D?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-600",children:"Loading CS dashboard..."})]})}):de?(console.log(" CSView: Rendering ProfilePage, showProfilePage =",de),n.jsx(fg,{currentUser:a,onBack:()=>{console.log(" CSView: Back button clicked, setting showProfilePage to false"),_e(!1)},onProfileUpdate:ee=>{console.log("Profile updated in CSView:",ee)},onLogout:i})):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"relative profile-menu",children:n.jsx("button",{onClick:()=>{console.log(" CSView: Menu button clicked, setting showProfilePage to true"),_e(!0)},className:"p-2 rounded-full hover:bg-slate-100 transition-colors","aria-label":"Profile menu",children:n.jsx(Lv,{className:"h-6 w-6 text-slate-600"})})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900",children:"TrackMyStartup"}),n.jsx("p",{className:"text-slate-600 text-sm lg:text-base",children:"Manage legal compliance and company secretary requirements"})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 lg:gap-4",children:[m&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"CS Code:"}),n.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 lg:px-3 lg:py-1 rounded-md text-xs lg:text-sm font-medium",children:m})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(vQ,{className:"h-6 w-6 lg:h-8 lg:w-8 text-purple-600"}),n.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Company Secretary"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3 lg:gap-4",children:[n.jsx(tt,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Total Startups"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-slate-900",children:T.totalStartups})]}),n.jsx(La,{className:"h-6 w-6 lg:h-8 lg:w-8 text-blue-500"})]})}),n.jsx(tt,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Pending Review"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-yellow-600",children:T.pendingReview})]}),n.jsx(Ql,{className:"h-6 w-6 lg:h-8 lg:w-8 text-yellow-500"})]})}),n.jsx(tt,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Compliant"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-green-600",children:T.compliant})]}),n.jsx(sa,{className:"h-6 w-6 lg:h-8 lg:w-8 text-green-500"})]})}),n.jsx(tt,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Non-Compliant"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-red-600",children:T.nonCompliant})]}),n.jsx(Vp,{className:"h-6 w-6 lg:h-8 lg:w-8 text-red-500"})]})}),n.jsx(tt,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Active Assignments"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-brand-primary",children:T.activeAssignments})]}),n.jsx(Wp,{className:"h-6 w-6 lg:h-8 lg:w-8 text-brand-primary"})]})}),n.jsx(tt,{className:"p-3 lg:p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs lg:text-sm font-medium text-slate-600",children:"Pending Requests"}),n.jsx("p",{className:"text-xl lg:text-2xl font-bold text-orange-600",children:T.pendingRequests})]}),n.jsx(Ql,{className:"h-6 w-6 lg:h-8 lg:w-8 text-orange-500"})]})})]}),n.jsx(W_,{currentUser:a,userRole:"CS",className:"mb-6"}),n.jsx(tt,{className:"p-4",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[n.jsx(Oe,{variant:M==="assignments"?"primary":"secondary",onClick:()=>U("assignments"),className:"w-full sm:w-auto text-sm",children:"My Assignments"}),n.jsxs(Oe,{variant:M==="requests"?"primary":"secondary",onClick:()=>U("requests"),className:"w-full sm:w-auto text-sm",children:["Assignment Requests (",T.pendingRequests,")"]}),n.jsx(Oe,{variant:M==="reels"?"primary":"secondary",onClick:()=>U("reels"),className:"w-full sm:w-auto text-sm",children:"Discover Pitches"})]}),n.jsxs("div",{className:"text-xs lg:text-sm text-slate-600 text-center lg:text-left",children:[M==="assignments"&&"View your assigned startups",M==="requests"&&"Review pending assignment requests",M==="reels"&&"Watch active fundraising pitches"]})]})}),M!=="reels"&&n.jsx(tt,{className:"p-4",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(gd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search startups...",value:d,onChange:ee=>f(ee.target.value),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary text-sm"})]})}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[n.jsx(Oe,{variant:l==="all"?"primary":"secondary",onClick:()=>u("all"),className:"text-xs py-2",children:"All"}),n.jsx(Oe,{variant:l==="pending"?"primary":"secondary",onClick:()=>u("pending"),className:"text-xs py-2",children:"Pending"}),n.jsx(Oe,{variant:l==="compliant"?"primary":"secondary",onClick:()=>u("compliant"),className:"text-xs py-2",children:"Compliant"}),n.jsx(Oe,{variant:l==="non-compliant"?"primary":"secondary",onClick:()=>u("non-compliant"),className:"text-xs py-2",children:"Non-Compliant"})]})]})}),M==="assignments"&&n.jsxs("div",{className:"space-y-4",children:[Ee.map(ee=>{const X=W(ee.id);return n.jsx(tt,{className:"p-4 lg:p-6",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{className:"flex items-start gap-3 lg:gap-4",children:[Ne(ee.complianceStatus),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-base lg:text-lg font-semibold text-slate-900 truncate",children:ee.name}),n.jsx("p",{className:"text-sm text-slate-600",children:ee.sector}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2",children:X&&n.jsx("span",{className:"text-xs lg:text-sm text-brand-primary font-medium",children:" Assigned"})})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[Ne(ee.complianceStatus),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${le(ee.complianceStatus)}`,children:ee.complianceStatus})]}),n.jsx("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:n.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>{console.log(" View Details clicked for startup:",ee),console.log(" onViewStartup function exists:",!!r),alert(`Navigating to ${ee.name} dashboard...`);const ge={id:ee.id,name:ee.name,investmentType:"Seed",investmentValue:ee.totalFunding||0,equityAllocation:0,currentValuation:ee.totalFunding||0,complianceStatus:ee.complianceStatus,sector:ee.sector,totalFunding:ee.totalFunding,totalRevenue:ee.totalRevenue,registrationDate:ee.registrationDate,founders:[]};console.log(" Calling onViewStartup with:",ge),r(ge),console.log(" onViewStartup called successfully")},className:"w-full sm:w-auto text-xs",children:"View Details"})})]})]})},ee.id)}),Ee.length===0&&n.jsxs(tt,{className:"p-6 lg:p-8 text-center",children:[n.jsx(La,{className:"h-10 w-10 lg:h-12 lg:w-12 text-slate-400 mx-auto mb-4"}),n.jsx("p",{className:"text-sm lg:text-base text-slate-600",children:"No startups assigned to you yet"}),n.jsx(Oe,{variant:"primary",className:"mt-4 w-full sm:w-auto",onClick:()=>U("browse"),children:"Browse All Startups"})]})]}),M==="requests"&&n.jsxs("div",{className:"space-y-4",children:[ne.map(ee=>n.jsx(tt,{className:"p-4 lg:p-6",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{className:"flex items-start gap-3 lg:gap-4",children:[n.jsx(Ql,{className:"h-5 w-5 text-orange-500 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-base lg:text-lg font-semibold text-slate-900",children:ee.startupName}),n.jsx("p",{className:"text-sm text-slate-600",children:"Assignment Request"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2",children:[n.jsxs("span",{className:"text-xs lg:text-sm text-slate-500",children:["Requested: ",new Date(ee.requestDate).toLocaleDateString()]}),ee.notes&&n.jsxs("span",{className:"text-xs lg:text-sm text-slate-500",children:["Notes: ",ee.notes]})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[n.jsx("span",{className:"px-2 py-1 lg:px-3 lg:py-1 rounded-full text-xs lg:text-sm font-medium border text-orange-700 bg-orange-50 border-orange-200",children:"Pending"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[n.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>r(e.find(X=>X.id===ee.startupId)||e[0]),className:"w-full sm:w-auto text-xs",children:"View Startup"}),n.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>xe(ee.id),className:"text-green-600 border-green-600 hover:bg-green-50 w-full sm:w-auto text-xs",children:"Approve"}),n.jsx(Oe,{variant:"outline",size:"sm",onClick:()=>H(ee.id),className:"text-red-600 border-red-600 hover:bg-red-50 w-full sm:w-auto text-xs",children:"Reject"})]})]})]})},ee.id)),ne.length===0&&n.jsxs(tt,{className:"p-6 lg:p-8 text-center",children:[n.jsx(sa,{className:"h-10 w-10 lg:h-12 lg:w-12 text-green-400 mx-auto mb-4"}),n.jsx("p",{className:"text-sm lg:text-base text-slate-600",children:"No pending assignment requests"})]})]}),M==="reels"&&n.jsxs("div",{className:"animate-fade-in max-w-4xl mx-auto w-full",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-slate-800 mb-2",children:"Discover Pitches"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Watch startup videos and explore opportunities"})]}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(gd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search startups by name or sector...",value:d,onChange:ee=>f(ee.target.value),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary text-sm"})]})}),n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-100 gap-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("button",{onClick:()=>{se(!1),Q(!1)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${!q&&!J?"bg-blue-600 text-white shadow-blue-200":"bg-white text-slate-600 hover:bg-blue-50 hover:text-blue-600 border border-slate-200"}`,children:[n.jsx(Jl,{className:"h-3 w-3 sm:h-4 sm:w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"All"})]}),n.jsxs("button",{onClick:()=>{se(!0),Q(!1)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${q&&!J?"bg-green-600 text-white shadow-green-200":"bg-white text-slate-600 hover:bg-green-50 hover:text-green-600 border border-slate-200"}`,children:[n.jsx(sa,{className:`h-3 w-3 sm:h-4 sm:w-4 ${q&&!J?"fill-current":""}`}),n.jsx("span",{className:"hidden sm:inline",children:"Verified"})]}),n.jsxs("button",{onClick:()=>{se(!1),Q(!0)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${J?"bg-red-600 text-white shadow-red-200":"bg-white text-slate-600 hover:bg-red-50 hover:text-red-600 border border-slate-200"}`,children:[n.jsx(nm,{className:`h-3 w-3 sm:h-4 sm:w-4 ${J?"fill-current":""}`}),n.jsx("span",{className:"hidden sm:inline",children:"Favorites"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:[Y.length," active pitches"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[n.jsx(Jl,{className:"h-4 w-4 sm:h-5 sm:w-5"}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Pitch Reels"})]})]})]}),n.jsxs("div",{className:"space-y-8",children:[(()=>{let ee=Y;return d.trim()&&(ee=ee.filter(X=>X.name.toLowerCase().includes(d.toLowerCase())||X.sector.toLowerCase().includes(d.toLowerCase()))),q?ee=ee.filter(X=>X.isStartupNationValidated):J&&(ee=ee.filter(X=>ce.has(X.id))),ee})().map(ee=>{const X=Ni.getYoutubeEmbedUrl(ee.pitchVideoUrl);return n.jsxs(tt,{className:"!p-0 overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border-0 bg-white",children:[n.jsx("div",{className:"relative w-full aspect-[16/9] bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:X?oe===ee.id?n.jsxs("div",{className:"relative w-full h-full",children:[n.jsx("iframe",{src:X,title:`Pitch video for ${ee.name}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full"}),n.jsx("button",{onClick:()=>R(null),className:"absolute top-4 right-4 bg-black/70 text-white rounded-full p-2 hover:bg-black/90 transition-all duration-200 backdrop-blur-sm",children:""})]}):n.jsxs("div",{className:"relative w-full h-full group cursor-pointer",onClick:()=>R(ee.id),children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/40"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"w-20 h-20 bg-red-600 rounded-full flex items-center justify-center shadow-2xl transform group-hover:scale-110 transition-all duration-300 group-hover:shadow-red-500/50",children:n.jsx("svg",{className:"w-10 h-10 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M8 5v14l11-7z"})})})}),n.jsx("div",{className:"absolute bottom-4 left-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:n.jsx("p",{className:"text-sm font-medium",children:"Click to play"})})]}):n.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Zc,{className:"h-16 w-16 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No video available"})]})})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-1",children:ee.name}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),ee.sector]})]}),ee.isStartupNationValidated&&n.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-3 py-1.5 rounded-full text-xs font-medium shadow-sm",children:[n.jsx(sa,{className:"h-3 w-3"}),"Verified"]})]}),n.jsx("div",{className:"bg-gradient-to-r from-blue-50 via-purple-50 to-blue-50 px-4 py-3 mt-4 rounded-lg border border-blue-100 shadow-sm",children:n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"font-semibold text-slate-800",children:"Investment Ask:"}),n.jsxs("span",{className:"text-base font-bold text-blue-600 ml-2",children:["$",ee.investmentValue.toLocaleString()]}),n.jsx("span",{className:"text-slate-600 ml-2",children:"for"}),n.jsxs("span",{className:"font-semibold text-purple-600 ml-1",children:[ee.equityAllocation,"%"]}),n.jsx("span",{className:"text-slate-600 ml-1",children:"equity"})]})}),n.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[n.jsxs("button",{onClick:()=>B(ee.id),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 shadow-sm ${ce.has(ee.id)?"bg-gradient-to-r from-red-500 to-pink-500 text-white shadow-red-200 hover:shadow-red-300":"bg-white text-slate-600 hover:bg-red-50 hover:text-red-600 border border-slate-200 hover:border-red-200"}`,children:[n.jsx(nm,{className:`h-5 w-5 ${ce.has(ee.id)?"fill-current":""}`}),ce.has(ee.id)&&n.jsx("span",{className:"text-xs",children:"Liked"})]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>ke(ee),className:"flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 shadow-sm bg-white text-slate-600 hover:bg-blue-50 hover:text-blue-600 border border-slate-200 hover:border-blue-200",children:[n.jsx(Iv,{className:"h-5 w-5"}),"Share"]}),ee.pitchDeckUrl&&ee.pitchDeckUrl!=="#"&&n.jsx("a",{href:ee.pitchDeckUrl,target:"_blank",rel:"noreferrer",children:n.jsxs(Oe,{size:"sm",variant:"secondary",className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white border-0 hover:from-blue-600 hover:to-purple-600 shadow-md hover:shadow-lg transition-all duration-200",children:[n.jsx(La,{className:"h-4 w-4 mr-2"}),"View Deck"]})})]})]})]},ee.fundraisingId)}),Y.length===0&&n.jsx(tt,{className:"text-center py-16 text-slate-500",children:"No active fundraising startups."})]})]})]})};class Hae{async addStartupToPortfolio(t,r,a){try{const{data:s,error:i}=await G.from("facilitator_startups").insert({facilitator_id:t,startup_id:r,recognition_record_id:a,status:"active"}).select().single();if(i)throw console.error(" Error adding startup to portfolio:",i),console.error(" Error details:",{code:i.code,message:i.message,details:i.details,hint:i.hint}),console.error(" Data being inserted:",{facilitator_id:t,startup_id:r,recognition_record_id:a,status:"active"}),i;return{id:s.id,facilitatorId:s.facilitator_id,startupId:s.startup_id,recognitionRecordId:s.recognition_record_id,accessGrantedAt:s.access_granted_at,status:s.status,createdAt:s.created_at,updatedAt:s.updated_at}}catch(s){return console.error("Error in addStartupToPortfolio:",s),null}}async getFacilitatorPortfolio(t){try{const{data:r,error:a}=await G.from("facilitator_startups").select(`
          startup_id,
          status,
          access_granted_at
        `).eq("facilitator_id",t).eq("status","active");if(a)throw console.error("Error fetching facilitator relationships:",a),a;if(!r||r.length===0)return[];const s=r.map(b=>b.startup_id),{data:i,error:l}=await G.from("startups").select(`
          id,
          name,
          sector,
          current_valuation,
          compliance_status,
          total_funding,
          total_revenue,
          registration_date
        `).in("id",s);if(l)throw console.error("Error fetching startup data:",l),l;const{data:u,error:d}=await G.from("cap_table").select("*").in("startup_id",s).order("created_at",{ascending:!1}),{data:f,error:m}=await G.from("compliance_tasks").select("*").in("startup_id",s),{data:g,error:v}=await G.from("financials").select("*").in("startup_id",s),{data:x,error:j}=await G.from("incubation_programs").select("*").in("startup_id",s);return d&&console.warn("Warning: Could not fetch cap table data:",d),m&&console.warn("Warning: Could not fetch compliance data:",m),v&&console.warn("Warning: Could not fetch financial data:",v),j&&console.warn("Warning: Could not fetch incubation data:",j),(i||[]).map(b=>{const A=(u==null?void 0:u.filter(z=>z.startup_id===b.id))||[],S=(f==null?void 0:f.filter(z=>z.startup_id===b.id))||[],T=(g==null?void 0:g.filter(z=>z.startup_id===b.id))||[],E=(x==null?void 0:x.filter(z=>z.startup_id===b.id))||[],D=A[0],L=(D==null?void 0:D.post_money_valuation)||b.current_valuation||0,F=this.calculateOverallComplianceStatus(S);return{id:b.id,name:b.name,sector:b.sector||"N/A",currentValuation:L,complianceStatus:F,totalFunding:b.total_funding||0,totalRevenue:b.total_revenue||0,registrationDate:b.registration_date||new Date().toISOString().split("T")[0],capTableData:A,complianceData:S,financialData:T,incubationData:E}})}catch(r){return console.error("Error in getFacilitatorPortfolio:",r),[]}}calculateOverallComplianceStatus(t){if(!t||t.length===0)return"Pending";const r=t.length,a=t.filter(l=>l.status==="completed").length,s=t.filter(l=>l.status==="pending").length;return t.filter(l=>l.status==="pending"&&l.due_date&&new Date(l.due_date)<new Date).length>0?"Non-Compliant":a===r?"Compliant":(s>0,"Pending")}async hasAccessToStartup(t,r){try{const{data:a,error:s}=await G.from("facilitator_startups").select("id").eq("facilitator_id",t).eq("startup_id",r).eq("status","active").single();if(s){if(s.code==="PGRST116")return!1;throw s}return!!a}catch(a){return console.error("Error checking facilitator access:",a),!1}}async revokeAccess(t,r){try{const{error:a}=await G.from("facilitator_startups").update({status:"revoked"}).eq("facilitator_id",t).eq("startup_id",r);if(a)throw console.error("Error revoking access:",a),a;return!0}catch(a){return console.error("Error in revokeAccess:",a),!1}}}const gk=new Hae;class Gae{generateFacilitatorCode(){return`FAC${Math.random().toString(36).substring(2,9).toUpperCase()}`}async getFacilitatorCodeByUserId(t){try{const{data:r,error:a}=await G.from("users").select("facilitator_code").eq("id",t).eq("role","Startup Facilitation Center").single();return a?(console.error("Error fetching facilitator code:",a),null):(r==null?void 0:r.facilitator_code)||null}catch(r){return console.error("Error in getFacilitatorCodeByUserId:",r),null}}async getOpportunitiesByCode(t){try{const{data:r,error:a}=await G.from("incubation_opportunities").select("*").eq("facilitator_code",t).order("created_at",{ascending:!1});return a?(console.error("Error fetching opportunities by facilitator code:",a),[]):(console.log("Found opportunities for facilitator code:",t,r),(r||[]).map(s=>({id:s.id,programName:s.program_name,description:s.description,deadline:s.deadline,posterUrl:s.poster_url||void 0,videoUrl:s.video_url||void 0,facilitatorId:s.facilitator_id,facilitatorCode:s.facilitator_code||t,createdAt:s.created_at})))}catch(r){return console.error("Error in getOpportunitiesByCode:",r),[]}}async getApplicationsByCode(t){try{const{data:r,error:a}=await G.from("incubation_opportunities").select("id").eq("facilitator_code",t);if(a)return console.error("Error fetching opportunities by facilitator code:",a),[];if(!r||r.length===0)return console.log("No opportunities found for facilitator code:",t),[];const s=r.map(f=>f.id);console.log("Found opportunities for facilitator code:",s);const{data:i,error:l}=await G.from("opportunity_applications").select(`
          *,
          incubation_opportunities!opportunity_applications_opportunity_id_fkey (
            program_name,
            facilitator_code
          ),
          startups!opportunity_applications_startup_id_fkey (
            name
          )
        `).in("opportunity_id",s).order("created_at",{ascending:!1});if(l)return console.error("Error fetching applications:",l),[];console.log("Raw applications data:",i);const u=[...new Set((i==null?void 0:i.map(f=>f.startup_id))||[])];let d={};if(u.length>0){const{data:f,error:m}=await G.from("startup_pitch_materials").select("startup_id, pitch_deck_url, pitch_video_url").in("startup_id",u);!m&&f&&(d=(f||[]).reduce((g,v)=>(g[v.startup_id]={pitchDeckUrl:v.pitch_deck_url||void 0,pitchVideoUrl:v.pitch_video_url||void 0},g),{}))}return console.log("Pitch materials loaded:",d),l?(console.error("Error fetching applications:",l),[]):(console.log("Raw applications data:",i),(i||[]).map(f=>{var g,v;const m=d[f.startup_id]||{};return{id:f.id,startupId:f.startup_id,startupName:((g=f.startups)==null?void 0:g.name)||"Unknown Startup",opportunityId:f.opportunity_id,status:f.status||"pending",diligenceStatus:f.diligence_status||"none",agreementUrl:f.agreement_url||void 0,pitchDeckUrl:f.pitch_deck_url||m.pitchDeckUrl||void 0,pitchVideoUrl:f.pitch_video_url||m.pitchVideoUrl||void 0,facilitatorCode:((v=f.incubation_opportunities)==null?void 0:v.facilitator_code)||t,createdAt:f.created_at}}))}catch(r){return console.error("Error in getApplicationsByCode:",r),[]}}async createOrUpdateFacilitatorCode(t){try{console.log(" Creating/updating facilitator code for user:",t);const r=await this.getFacilitatorCodeByUserId(t);if(r)return console.log(" User already has facilitator code:",r),r;const a=this.generateFacilitatorCode();console.log(" Generated new facilitator code:",a,"(length:",a.length,")");const{error:s}=await G.from("users").update({facilitator_code:a}).eq("id",t).eq("role","Startup Facilitation Center");return s?(console.error(" Error updating user with facilitator code:",s),console.error(" Code that failed:",a,"(length:",a.length,")"),null):(console.log(" Successfully created facilitator code:",a),a)}catch(r){return console.error(" Error in createOrUpdateFacilitatorCode:",r),null}}async checkComplianceAccess(t,r){try{console.log(" Checking compliance access for facilitator code:",t,"startup ID:",r);const{data:a,error:s}=await G.from("incubation_opportunities").select("id").eq("facilitator_code",t);if(s)return console.error("Error fetching opportunities for facilitator code:",s),!1;if(!a||a.length===0)return console.log("No opportunities found for facilitator code:",t),!1;const i=a.map(f=>f.id);console.log("Found opportunities for facilitator code:",i);const{data:l,error:u}=await G.from("opportunity_applications").select("id, diligence_status").eq("startup_id",r).in("opportunity_id",i).eq("diligence_status","approved");if(u)return console.error("Error checking applications for compliance access:",u),!1;const d=l&&l.length>0;return console.log("Compliance access check result:",d,"for startup:",r),d}catch(a){return console.error("Error in checkComplianceAccess:",a),!1}}}const SD=new Gae,AD=({className:e="",currentUser:t})=>{const[r,a]=_.useState(null),[s,i]=_.useState(!0);return _.useEffect(()=>{(async()=>{if(t!=null&&t.id)try{const u=await SD.getFacilitatorCodeByUserId(t.id);a(u)}catch(u){console.error("Error loading facilitator code:",u)}finally{i(!1)}else i(!1)})()},[t==null?void 0:t.id]),s?n.jsx("div",{className:`bg-blue-100 text-blue-800 px-3 py-1 rounded-md text-sm font-medium ${e}`,children:"Loading..."}):r?n.jsxs("div",{className:`bg-blue-100 text-blue-800 px-3 py-1 rounded-md text-sm font-medium ${e}`,children:["Facilitator Code: ",n.jsx("span",{className:"font-bold",children:r})]}):null},h2={programName:"",description:"",deadline:"",posterUrl:"",videoUrl:"",facilitatorDescription:"",facilitatorWebsite:""},td=({title:e,value:t,icon:r})=>n.jsx(tt,{className:"flex-1",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:e}),n.jsx("p",{className:"text-2xl font-bold text-slate-800",children:t})]}),n.jsx("div",{className:"p-3 bg-brand-light rounded-full",children:r})]})}),Kae=({startups:e,newInvestments:t,startupAdditionRequests:r,onViewStartup:a,onAcceptRequest:s,currentUser:i,onProfileUpdate:l,onLogout:u})=>{const[d,f]=_.useState("dashboard"),[m,g]=_.useState(null),[v,x]=_.useState(!1),[j,b]=_.useState(!1),[A,S]=_.useState(!1),[T,E]=_.useState(!1),[D,L]=_.useState(null),[F,z]=_.useState(!1),[M,U]=_.useState(""),[oe,R]=_.useState(null),[q,se]=_.useState(h2),[J,Q]=_.useState(""),[ae,he]=_.useState(null),[de,_e]=_.useState(!1),[Y,ye]=_.useState(null),[P,Z]=_.useState([]),[ce,je]=_.useState(!1),[ke,De]=_.useState(null),[Ee,ne]=_.useState(null),[Ne,le]=_.useState([]),[xe,H]=_.useState([]),[W,B]=_.useState([]),[ee,X]=_.useState(!1),[ge,be]=_.useState([]),[$e,Ze]=_.useState(!1),[pe,V]=_.useState(""),Le=async Fe=>{console.log("Share button clicked for startup:",Fe.name),console.log("Startup object:",Fe);const Te=Fe.pitchVideoUrl||"Video not available",nt=Fe.equityAllocation>0?Fe.investmentValue/(Fe.equityAllocation/100):0,we=`Startup: ${Fe.name||"N/A"}
Sector: ${Fe.sector||"N/A"}
Ask: $${(Fe.investmentValue||0).toLocaleString()} for ${Fe.equityAllocation||0}% equity
Valuation: $${nt.toLocaleString()}

Pitch Video: ${Te}`;console.log("Share details:",we);try{if(navigator.share){console.log("Using native share API");const Ve={title:Fe.name||"Startup Pitch",text:we,url:Te!=="Video not available"?Te:void 0};await navigator.share(Ve)}else if(navigator.clipboard&&navigator.clipboard.writeText)console.log("Using clipboard API"),await navigator.clipboard.writeText(we),alert("Startup details copied to clipboard");else{console.log("Using fallback copy method");const Ve=document.createElement("textarea");Ve.value=we,document.body.appendChild(Ve),Ve.select(),document.execCommand("copy"),document.body.removeChild(Ve),alert("Startup details copied to clipboard")}}catch(Ve){console.error("Share failed",Ve),alert("Unable to share. Try copying manually.")}},ft=_.useMemo(()=>ge,[ge]);_.useMemo(()=>r,[r]);const kt=async Fe=>{try{Ze(!0);const Te=await gk.getFacilitatorPortfolio(Fe);be(Te)}catch(Te){console.error("Error loading portfolio:",Te),be([])}finally{Ze(!1)}},Mt=async Fe=>{try{X(!0),console.log(" Loading recognition requests for facilitator ID:",Fe);const{data:Te,error:nt}=await G.from("users").select("facilitator_code").eq("id",Fe).single();if(nt){console.error(" Error getting facilitator code:",nt);return}let we=Te==null?void 0:Te.facilitator_code;if(!we&&(console.log(" No facilitator code found, creating one..."),we=await SD.createOrUpdateFacilitatorCode(Fe),!we)){console.error(" Failed to create facilitator code");return}if(console.log(" Facilitator code:",we),!we){console.error(" No facilitator code available, cannot load recognition records"),B([]);return}console.log(" Querying recognition_records with facilitator code:",we);const{data:Ve,error:Ct}=await G.from("recognition_records").select("*").limit(5);console.log(" All recognition records in database:",Ve),console.log(" All records error:",Ct);const{data:Dt,error:Wt}=await G.from("recognition_records").select(`
          *,
          startups (
            id, 
            name, 
            sector, 
            total_funding,
            total_revenue,
            registration_date
          )
        `).eq("facilitator_code",we).order("date_added",{ascending:!1});if(console.log(" Raw query result:",{data:Dt,error:Wt}),Wt){console.error(" Error loading recognition requests:",Wt),console.log(" Trying fallback query without foreign key join...");const{data:Ot,error:$t}=await G.from("recognition_records").select(`
            *,
            startups (
              id, 
              name, 
              sector, 
              total_funding,
              total_revenue,
              registration_date
            )
          `).eq("facilitator_code",we).order("date_added",{ascending:!1});if($t){console.error(" Fallback query also failed:",$t),B([]);return}console.log(" Fallback query successful:",Ot);const rr=(Ot||[]).map(qt=>({id:qt.id.toString(),startupId:qt.startup_id,programName:qt.program_name,facilitatorName:qt.facilitator_name,facilitatorCode:qt.facilitator_code,incubationType:qt.incubation_type,feeType:qt.fee_type,feeAmount:qt.fee_amount,equityAllocated:qt.equity_allocated,preMoneyValuation:qt.pre_money_valuation,signedAgreementUrl:qt.signed_agreement_url,status:qt.status||"pending",dateAdded:qt.date_added,startup:qt.startups}));console.log(" Loaded recognition requests (fallback):",rr),console.log(" Startup data in fallback records:",rr.map(qt=>{var Sr;return{id:qt.id,startupName:(Sr=qt.startup)==null?void 0:Sr.name,startupData:qt.startup}})),B(rr);return}const cr=(Dt||[]).map(Ot=>({id:Ot.id.toString(),startupId:Ot.startup_id,programName:Ot.program_name,facilitatorName:Ot.facilitator_name,facilitatorCode:Ot.facilitator_code,incubationType:Ot.incubation_type,feeType:Ot.fee_type,feeAmount:Ot.fee_amount,equityAllocated:Ot.equity_allocated,preMoneyValuation:Ot.pre_money_valuation,signedAgreementUrl:Ot.signed_agreement_url,status:Ot.status||"pending",dateAdded:Ot.date_added,startup:Ot.startups}));console.log(" Loaded recognition requests:",cr),console.log(" Startup data in records:",cr.map(Ot=>{var $t;return{id:Ot.id,startupName:($t=Ot.startup)==null?void 0:$t.name,startupData:Ot.startup}})),B(cr)}catch(Te){console.error("Error loading recognition requests:",Te)}finally{X(!1)}};_.useEffect(()=>{let Fe=!0,Te;return(async()=>{try{const{data:{user:we}}=await G.auth.getUser();if(!Fe||!(we!=null&&we.id))return;ne(we.id),console.log(" Facilitator ID set:",we.id),Te=setTimeout(()=>{Fe&&console.warn(" Data loading timeout - some data may not have loaded")},3e4);const[Ve,Ct,Dt]=await Promise.allSettled([G.from("incubation_opportunities").select("*").eq("facilitator_id",we.id).order("created_at",{ascending:!1}),Mt(we.id),kt(we.id)]);if(!Fe)return;if(Ve.status==="fulfilled"&&!Ve.value.error){const Wt=Ve.value.data;if(Array.isArray(Wt)){const cr=Wt.map(Ot=>({id:Ot.id,programName:Ot.program_name,description:Ot.description,deadline:Ot.deadline,posterUrl:Ot.poster_url||void 0,videoUrl:Ot.video_url||void 0,facilitatorId:Ot.facilitator_id,createdAt:Ot.created_at}));if(le(cr),cr.length>0){const Ot=cr.map($t=>$t.id);console.log(" Loading applications for opportunities:",Ot);try{const{data:$t,error:rr}=await G.from("opportunity_applications").select("id, opportunity_id, status, startup_id, pitch_deck_url, pitch_video_url, diligence_status, agreement_url, created_at, startups!inner(id,name)").in("opportunity_id",Ot).order("created_at",{ascending:!1});if(rr){console.error(" Error loading opportunity applications:",rr),console.log(" Trying fallback query without inner join...");const{data:qt,error:Sr}=await G.from("opportunity_applications").select("id, opportunity_id, status, startup_id, pitch_deck_url, pitch_video_url, diligence_status, agreement_url, sector, created_at").in("opportunity_id",Ot).order("created_at",{ascending:!1});if(Sr)console.error(" Fallback query also failed:",Sr),H([]);else{console.log(" Fallback applications query successful");const Na=(qt||[]).map(Tr=>({id:Tr.id,startupId:Tr.startup_id,startupName:"Unknown Startup",opportunityId:Tr.opportunity_id,status:Tr.status,diligenceStatus:Tr.diligence_status,agreementUrl:Tr.agreement_url,pitchDeckUrl:Tr.pitch_deck_url,pitchVideoUrl:Tr.pitch_video_url,sector:Tr.sector,createdAt:Tr.created_at}));H(Na)}}else{console.log(" Raw applications data:",$t);const qt=($t||[]).map(Sr=>{var Na;return{id:Sr.id,startupId:Sr.startup_id,startupName:((Na=Sr.startups)==null?void 0:Na.name)||`Startup #${Sr.startup_id}`,opportunityId:Sr.opportunity_id,status:Sr.status||"pending",pitchDeckUrl:Sr.pitch_deck_url||void 0,pitchVideoUrl:Sr.pitch_video_url||void 0,diligenceStatus:Sr.diligence_status||"none",agreementUrl:Sr.agreement_url||void 0,sector:Sr.sector,createdAt:Sr.created_at}});console.log(" Mapped applications:",qt),Fe&&H(qt)}}catch($t){console.error("Error loading applications:",$t),H([])}}else H([])}}else console.error("Error loading opportunities:",Ve.status==="rejected"?Ve.reason:Ve.value.error);Ct.status==="rejected"&&console.error("Error loading recognition records:",Ct.reason),Dt.status==="rejected"&&console.error("Error loading portfolio:",Dt.reason)}catch(we){console.error("Error in loadFacilitatorData:",we)}finally{Te&&clearTimeout(Te)}})(),()=>{Fe=!1,Te&&clearTimeout(Te)}},[]),_.useEffect(()=>{if(d!=="discover")return;let Fe=!0;return je(!0),Ni.getActiveFundraisingStartups().then(Te=>{Fe&&Z(Te)}).finally(()=>{Fe&&je(!1)}),()=>{Fe=!1}},[d]),_.useMemo(()=>{const Fe=we=>we?new Date(we).getTime():0,Te=xe.filter(we=>we.status==="pending").sort((we,Ve)=>Fe(Ve.createdAt)-Fe(we.createdAt)),nt=xe.filter(we=>we.status!=="pending").sort((we,Ve)=>Fe(Ve.createdAt)-Fe(we.createdAt));return[...Te,...nt]},[xe]),_.useEffect(()=>{if(!Ee||Ne.length===0)return;const Fe=Ne.map(nt=>nt.id);let Te=null;try{Te=G.channel("opportunity_applications_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"opportunity_applications"},async nt=>{try{const we=nt.new;if(!Fe.includes(we.opportunity_id))return;const{data:Ve,error:Ct}=await G.from("startups").select("id,name").eq("id",we.startup_id).single();if(Ct){console.error("Error fetching startup for new application:",Ct);return}H(Dt=>[{id:we.id,startupId:we.startup_id,startupName:(Ve==null?void 0:Ve.name)||`Startup #${we.startup_id}`,opportunityId:we.opportunity_id,status:we.status||"pending",pitchDeckUrl:we.pitch_deck_url||void 0,pitchVideoUrl:we.pitch_video_url||void 0,diligenceStatus:we.diligence_status||"none",agreementUrl:we.agreement_url||void 0,createdAt:we.created_at},...Dt]),console.log(` New application received from ${(Ve==null?void 0:Ve.name)||"Startup"} for opportunity ${we.opportunity_id}`),console.log(" Application details:",we)}catch(we){console.error("Error processing new application:",we)}}).on("postgres_changes",{event:"DELETE",schema:"public",table:"opportunity_applications"},async nt=>{try{const we=nt.old;if(!Fe.includes(we.opportunity_id))return;H(Ve=>Ve.filter(Ct=>Ct.id!==we.id)),console.log(` Application deleted: ${we.id}`)}catch(we){console.error("Error processing deleted application:",we)}}).subscribe(nt=>{nt==="SUBSCRIBED"?console.log(" Subscribed to opportunity applications changes"):nt==="CHANNEL_ERROR"&&console.error(" Error subscribing to opportunity applications changes")})}catch(nt){console.error("Error setting up opportunity applications subscription:",nt)}return()=>{Te&&(console.log(" Unsubscribing from opportunity applications changes"),Te.unsubscribe())}},[Ee,Ne]),_.useEffect(()=>{if(!Ee)return;let Fe=null;try{Fe=G.channel("recognition_records_changes").on("postgres_changes",{event:"DELETE",schema:"public",table:"recognition_records"},async Te=>{try{const nt=Te.old;B(we=>we.filter(Ve=>Ve.id!==nt.id.toString())),console.log(` Recognition record deleted: ${nt.id}`)}catch(nt){console.error("Error processing deleted recognition record:",nt)}}).subscribe(Te=>{Te==="SUBSCRIBED"?console.log(" Subscribed to recognition records changes"):Te==="CHANNEL_ERROR"&&console.error(" Error subscribing to recognition records changes")})}catch(Te){console.error("Error setting up recognition records subscription:",Te)}return()=>{Fe&&(console.log(" Unsubscribing from recognition records changes"),Fe.unsubscribe())}},[Ee]),_.useEffect(()=>{if(!Ee)return;let Fe=null;try{Fe=G.channel("facilitator_startups_changes").on("postgres_changes",{event:"DELETE",schema:"public",table:"facilitator_startups",filter:`facilitator_id=eq.${Ee}`},async Te=>{try{const nt=Te.old;be(we=>we.filter(Ve=>Ve.id!==nt.startup_id)),console.log(` Startup removed from portfolio: ${nt.startup_id}`)}catch(nt){console.error("Error processing deleted facilitator startup:",nt)}}).subscribe(Te=>{Te==="SUBSCRIBED"?console.log(" Subscribed to facilitator startups changes"):Te==="CHANNEL_ERROR"&&console.error(" Error subscribing to facilitator startups changes")})}catch(Te){console.error("Error setting up facilitator startups subscription:",Te)}return()=>{Fe&&(console.log(" Unsubscribing from facilitator startups changes"),Fe.unsubscribe())}},[Ee]),_.useEffect(()=>{if(!Ee||Ne.length===0)return;const Fe=Ne.map(nt=>nt.id);let Te=null;try{Te=G.channel("diligence_status_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"opportunity_applications",filter:`opportunity_id=in.(${Fe.join(",")})`},async nt=>{try{const we=nt.new;if(!Fe.includes(we.opportunity_id))return;if(H(Ve=>Ve.map(Ct=>Ct.id===we.id?{...Ct,diligenceStatus:we.diligence_status||"none"}:Ct)),we.diligence_status==="approved"){const{data:Ve,error:Ct}=await G.from("startups").select("name").eq("id",we.startup_id).single();if(Ct){console.error("Error fetching startup for diligence approval:",Ct);return}console.log(` Due diligence approved by ${(Ve==null?void 0:Ve.name)||"Startup"} for opportunity ${we.opportunity_id}`);const Dt=document.createElement("div");Dt.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",Dt.innerHTML=`
              <div class="bg-white rounded-lg p-6 max-w-sm mx-4 text-center">
                <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                  <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                  </svg>
            </div>
                <h3 class="text-lg font-semibold text-gray-900 mb-2">Due Diligence Approved!</h3>
                <p class="text-gray-600 mb-4">${(Ve==null?void 0:Ve.name)||"Startup"} has approved your due diligence request.</p>
                <button onclick="this.parentElement.parentElement.remove()" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors">
                  Continue
                </button>
          </div>
            `,document.body.appendChild(Dt)}}catch(we){console.error("Error handling diligence status update:",we)}}).subscribe(nt=>{nt==="SUBSCRIBED"?console.log(" Subscribed to diligence status changes"):nt==="CHANNEL_ERROR"&&console.error(" Error subscribing to diligence status changes")})}catch(nt){console.error("Error setting up diligence status subscription:",nt)}return()=>{Te&&(console.log(" Unsubscribing from diligence status changes"),Te.unsubscribe())}},[Ee,Ne]);const Lt=()=>{R(null),se(h2),Q(""),b(!0)},at=Fe=>{R(Fe);const Te=Ne[Fe];se({programName:(Te==null?void 0:Te.programName)||"",description:(Te==null?void 0:Te.description)||"",deadline:(Te==null?void 0:Te.deadline)||"",posterUrl:(Te==null?void 0:Te.posterUrl)||"",videoUrl:(Te==null?void 0:Te.videoUrl)||"",facilitatorDescription:"",facilitatorWebsite:""}),Q(""),b(!0)},Nt=Fe=>{const{name:Te,value:nt}=Fe.target;se(we=>({...we,[Te]:nt}))},Ie=Fe=>{L(Fe),S(!0)},Tt=Fe=>{U(Fe),z(!0)},mt=Fe=>{var Te,nt,we;if(!Fe)return"";if(Fe.includes("youtube.com/watch")){const Ve=(Te=Fe.split("v=")[1])==null?void 0:Te.split("&")[0];return Ve?`https://www.youtube.com/embed/${Ve}`:Fe}if(Fe.includes("youtu.be/")){const Ve=(nt=Fe.split("youtu.be/")[1])==null?void 0:nt.split("?")[0];return Ve?`https://www.youtube.com/embed/${Ve}`:Fe}if(Fe.includes("vimeo.com/")){const Ve=(we=Fe.split("vimeo.com/")[1])==null?void 0:we.split("?")[0];return Ve?`https://player.vimeo.com/video/${Ve}`:Fe}return Fe.includes("embed")||Fe.includes(".mp4")||Fe.includes(".webm")||Fe.includes(".mov"),Fe},Et=async Fe=>{if(confirm(`Are you sure you want to reject the application from ${Fe.startupName}?`))try{_e(!0);const{error:Te}=await G.from("opportunity_applications").update({status:"rejected"}).eq("id",Fe.id);if(Te){console.error("Error rejecting application:",Te),alert("Failed to reject application. Please try again.");return}H(nt=>nt.map(we=>we.id===Fe.id?{...we,status:"rejected"}:we)),alert("Application rejected successfully.")}catch(Te){console.error("Error rejecting application:",Te),alert("Failed to reject application. Please try again.")}finally{_e(!1)}},zt=async Fe=>{if(confirm(`Are you sure you want to delete the application from ${Fe.startupName}? This action cannot be undone.`))try{_e(!0),console.log(" Attempting to delete application:",{applicationId:Fe.id,startupName:Fe.startupName,table:"opportunity_applications"});const{data:Te,error:nt}=await G.from("opportunity_applications").delete().eq("id",Fe.id).select();if(console.log(" Delete result:",{data:Te,error:nt}),nt){console.error("Error deleting application:",nt),console.error("Error details:",{code:nt.code,message:nt.message,details:nt.details,hint:nt.hint}),alert("Failed to delete application. Please try again.");return}if(!Te||Te.length===0){console.warn(" No rows were deleted. Record might not exist or already deleted."),alert("Application was not found or was already deleted.");return}console.log(" Successfully deleted application:",Te),H(we=>we.filter(Ve=>Ve.id!==Fe.id)),alert("Application deleted successfully.")}catch(Te){console.error("Error deleting application:",Te),alert("Failed to delete application. Please try again.")}finally{_e(!1)}},ur=async Fe=>{if(confirm("Are you sure you want to remove this startup from your portfolio?"))try{_e(!0),console.log(" Attempting to delete startup from portfolio:",{startupId:Fe,facilitatorId:Ee,table:"facilitator_startups"});const{data:Te,error:nt}=await G.from("facilitator_startups").delete().eq("startup_id",Fe).eq("facilitator_id",Ee).select();if(console.log(" Delete result:",{data:Te,error:nt}),nt){console.error("Error removing startup from portfolio:",nt),console.error("Error details:",{code:nt.code,message:nt.message,details:nt.details,hint:nt.hint}),alert("Failed to remove startup from portfolio. Please try again.");return}if(!Te||Te.length===0){console.warn(" No rows were deleted. Record might not exist or already deleted."),alert("Startup was not found in your portfolio or was already removed.");return}console.log(" Successfully deleted startup from portfolio:",Te),be(we=>we.filter(Ve=>Ve.id!==Fe)),alert("Startup removed from portfolio successfully.")}catch(Te){console.error("Error removing startup from portfolio:",Te),alert("Failed to remove startup from portfolio. Please try again.")}finally{_e(!1)}},Rt=async Fe=>{if(confirm("Are you sure you want to delete this recognition record?"))try{_e(!0),console.log(" Attempting to delete recognition record:",{recordId:Fe,table:"recognition_records"});const{data:Te,error:nt}=await G.from("recognition_records").delete().eq("id",parseInt(Fe)).select();if(console.log(" Delete result:",{data:Te,error:nt}),nt){console.error("Error deleting recognition record:",nt),console.error("Error details:",{code:nt.code,message:nt.message,details:nt.details,hint:nt.hint}),alert("Failed to delete recognition record. Please try again.");return}if(!Te||Te.length===0){console.warn(" No rows were deleted. Record might not exist or already deleted."),alert("Recognition record was not found or was already deleted.");return}console.log(" Successfully deleted recognition record:",Te),B(we=>we.filter(Ve=>Ve.id!==Fe)),alert("Recognition record deleted successfully.")}catch(Te){console.error("Error deleting recognition record:",Te),alert("Failed to delete recognition record. Please try again.")}finally{_e(!1)}},Vt=Fe=>{if(Fe.target.files&&Fe.target.files[0]){const Te=Fe.target.files[0];if(Te.type!=="application/pdf"){alert("Please upload a PDF file for the agreement.");return}if(Te.size>10*1024*1024){alert("File size must be less than 10MB.");return}he(Te)}},Qt=async Fe=>{if(Fe.preventDefault(),!D||!ae){alert("Please upload an agreement PDF.");return}_e(!0);try{const Te=`agreements/${D.id}/${Date.now()}-${ae.name.replace(/[^a-zA-Z0-9.-]/g,"_")}`,{data:nt,error:we}=await G.storage.from("startup-documents").upload(Te,ae);if(we)throw console.error("Storage upload error:",we),new Error(`Failed to upload agreement: ${we.message}`);const{data:Ve}=G.storage.from("startup-documents").getPublicUrl(Te),{error:Ct}=await G.from("opportunity_applications").update({status:"accepted",agreement_url:Ve.publicUrl,diligence_status:"none"}).eq("id",D.id);if(Ct)throw console.error("Database update error:",Ct),new Error(`Failed to update application: ${Ct.message}`);H(Wt=>Wt.map(cr=>cr.id===D.id?{...cr,status:"accepted",agreementUrl:Ve.publicUrl,diligenceStatus:"none"}:cr)),S(!1),L(null),he(null);const Dt=document.createElement("div");Dt.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",Dt.innerHTML=`
        <div class="bg-white rounded-lg p-6 max-w-sm mx-4 text-center">
          <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            </div>
          <h3 class="text-lg font-semibold text-gray-900 mb-2">Application Accepted!</h3>
          <p class="text-gray-600 mb-4">Agreement uploaded successfully. You can now request due diligence.</p>
          <button onclick="this.parentElement.parentElement.remove()" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors">
            Continue
          </button>
          </div>
      `,document.body.appendChild(Dt)}catch(Te){console.error("Failed to accept application:",Te),alert("Failed to accept application. Please try again.")}finally{_e(!1)}},hr=async Fe=>{if(Fe.diligenceStatus!=="requested"){_e(!0);try{const{data:Te,error:nt}=await G.rpc("request_diligence",{p_application_id:Fe.id});if(nt)throw nt;H(Ve=>Ve.map(Ct=>Ct.id===Fe.id?{...Ct,diligenceStatus:"requested"}:Ct));const we=document.createElement("div");we.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",we.innerHTML=`
        <div class="bg-white rounded-lg p-6 max-w-sm mx-4 text-center">
          <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            </div>
          <h3 class="text-lg font-semibold text-gray-900 mb-2">Due Diligence Requested!</h3>
          <p class="text-gray-600 mb-4">The startup has been notified to complete due diligence.</p>
          <button onclick="this.parentElement.parentElement.remove()" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
            Continue
          </button>
          </div>
      `,document.body.appendChild(we)}catch(Te){console.error("Failed to request diligence:",Te),alert("Failed to request diligence. Please try again.")}finally{_e(!1)}}},pr=async Fe=>{if(!Ee){alert("Facilitator ID not found. Please refresh the page.");return}try{ye(Fe);const Te=W.find(Ot=>Ot.id===Fe);if(!Te){alert("Record not found. Please try again.");return}if(console.log(" Record found:",Te),console.log(" Startup ID type:",typeof Te.startupId,"Value:",Te.startupId),typeof Te.startupId!="number"){console.error(" Invalid startup ID type:",typeof Te.startupId,Te.startupId),alert("Invalid startup data. Please try again.");return}const nt=parseInt(Fe);if(isNaN(nt)){console.error(" Invalid record ID format:",Fe),alert("Invalid record ID. Please try again.");return}const we=await Promise.allSettled([G.from("recognition_records").select("id").eq("id",nt).single(),G.from("startups").select("id").eq("id",Te.startupId).single(),G.from("users").select("id, role").eq("id",Ee).single()]),[Ve,Ct,Dt]=we;if(Ve.status==="rejected"||!Ve.value.data){console.error(" Recognition record not found in database:",Ve.status==="rejected"?Ve.reason:"No data"),alert("Recognition record not found. Please try again.");return}if(Ct.status==="rejected"||!Ct.value.data){console.error(" Startup not found in database:",Ct.status==="rejected"?Ct.reason:"No data"),alert("Startup not found. Please try again.");return}if(Dt.status==="rejected"||!Dt.value.data){console.error(" User not found in database:",Dt.status==="rejected"?Dt.reason:"No data"),alert("User not found. Please try again.");return}if(Dt.value.data.role!=="Startup Facilitation Center"){console.error(" User is not a facilitator:",Dt.value.data.role),alert("User is not authorized as a facilitator. Please try again.");return}console.log(" All validation checks passed");const{error:Wt}=await G.from("recognition_records").update({status:"approved"}).eq("id",nt);if(Wt){console.error("Error updating recognition request status:",Wt),alert("Failed to approve recognition. Please try again.");return}if(console.log(" Adding startup to portfolio:",{facilitatorId:Ee,startupId:Te.startupId,recognitionRecordId:nt}),await gk.addStartupToPortfolio(Ee,Te.startupId,nt)){B($t=>{const rr=$t.map(qt=>qt.id===Fe?{...qt,status:"approved"}:qt);return console.log(" Updated recognition records:",rr),rr}),await kt(Ee);const Ot=document.createElement("div");Ot.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",Ot.innerHTML=`
            <div class="bg-white rounded-lg p-6 max-w-sm mx-4 text-center">
              <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
              </div>
              <h3 class="text-lg font-semibold text-gray-900 mb-2">Recognition Approved!</h3>
              <p class="text-gray-600 mb-4">Startup has been added to your portfolio.</p>
              <button onclick="this.parentElement.parentElement.remove()" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors">
                Continue
              </button>
            </div>
          `,document.body.appendChild(Ot)}else alert("Failed to add startup to portfolio. Please try again.")}catch(Te){console.error("Error approving recognition:",Te),alert("Failed to approve recognition. Please try again.")}finally{ye(null)}},Be=Fe=>{if(Fe.target.files&&Fe.target.files[0]){const Te=Fe.target.files[0];if(!Te.type.startsWith("image/")){alert("Please upload an image file (JPEG, PNG, GIF, WebP, SVG).");return}if(Te.size>5*1024*1024){alert("File size must be less than 5MB.");return}const nt=URL.createObjectURL(Te);Q(nt),se(we=>({...we,posterUrl:nt}))}},We=async Fe=>{if(Fe.preventDefault(),!Ee){alert("Unable to find facilitator account. Please re-login.");return}try{let Te=q.posterUrl;if(Te&&Te.startsWith("blob:")){const we=document.querySelector('input[name="posterUrl"]');if(we&&we.files&&we.files[0]){const Ve=we.files[0],Ct=`posters/${Ee}/${Date.now()}-${Ve.name.replace(/[^a-zA-Z0-9.-]/g,"_")}`;console.log("Uploading poster image:",Ct);const{data:Dt,error:Wt}=await G.storage.from("opportunity-posters").upload(Ct,Ve);if(Wt)throw console.error("Storage upload error:",Wt),new Error(`Failed to upload poster image: ${Wt.message}`);const{data:cr}=G.storage.from("opportunity-posters").getPublicUrl(Ct);Te=cr.publicUrl,console.log("Poster uploaded successfully:",Te)}}const nt={program_name:q.programName,description:q.description,deadline:q.deadline,poster_url:Te||null,video_url:q.videoUrl||null,facilitator_id:Ee};if(oe!==null){const we=Ne[oe],{data:Ve,error:Ct}=await G.from("incubation_opportunities").update(nt).eq("id",we.id).select().single();if(Ct)throw Ct;const Dt={id:Ve.id,programName:Ve.program_name,description:Ve.description,deadline:Ve.deadline,posterUrl:Ve.poster_url||void 0,videoUrl:Ve.video_url||void 0,facilitatorId:Ve.facilitator_id,createdAt:Ve.created_at};le(Wt=>Wt.map((cr,Ot)=>Ot===oe?Dt:cr))}else{const{data:we,error:Ve}=await G.from("incubation_opportunities").insert(nt).select().single();if(Ve)throw Ve;const Ct={id:we.id,programName:we.program_name,description:we.description,deadline:we.deadline,posterUrl:we.poster_url||void 0,videoUrl:we.video_url||void 0,facilitatorId:we.facilitator_id,createdAt:we.created_at};le(Dt=>[Ct,...Dt])}b(!1),Q(""),se(h2)}catch(Te){console.error("Failed to save opportunity:",Te),alert("Failed to save opportunity. Please try again.")}},vt=()=>{var Fe;switch(d){case"intakeManagement":const Te=m?xe.filter(we=>we.opportunityId===m):xe;return n.jsxs("div",{className:"space-y-8 animate-fade-in",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx(td,{title:"Opportunities Posted",value:Ne.length,icon:n.jsx(Xd,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(td,{title:"Applications Received",value:xe.length,icon:n.jsx(La,{className:"h-6 w-6 text-brand-primary"})})]}),n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Applications by Opportunity"}),n.jsx("div",{className:"border-b border-slate-200 mb-6",children:n.jsxs("nav",{className:"-mb-px flex space-x-6 overflow-x-auto","aria-label":"Opportunity Tabs",children:[n.jsxs("button",{onClick:()=>g(null),className:`${m===null?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:[n.jsx(La,{className:"h-4 w-4"}),"All Applications (",xe.length,")"]}),Ne.map(we=>{const Ve=xe.filter(Ct=>Ct.opportunityId===we.id).length;return n.jsxs("button",{onClick:()=>g(we.id),className:`${m===we.id?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:[n.jsx(Xd,{className:"h-4 w-4"}),we.programName," (",Ve,")"]},we.id)})]})}),n.jsx("div",{className:"overflow-x-auto max-h-96",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Startup"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Sector"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Opportunity"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 uppercase",children:"Pitch Materials"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-slate-200",children:[Te.map(we=>{var Ve;return n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:we.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:we.sector||""}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:((Ve=Ne.find(Ct=>Ct.id===we.opportunityId))==null?void 0:Ve.programName)||""}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:n.jsxs("div",{className:"flex justify-center items-center gap-3",children:[we.pitchDeckUrl?n.jsx("a",{href:we.pitchDeckUrl,target:"_blank",rel:"noopener noreferrer",className:"text-slate-500 hover:text-brand-primary transition-colors",title:"View Pitch Deck",children:n.jsx(La,{className:"h-5 w-5"})}):n.jsx("span",{className:"text-slate-300 cursor-not-allowed",title:"No Pitch Deck",children:n.jsx(La,{className:"h-5 w-5"})}),we.pitchVideoUrl?n.jsx("button",{onClick:()=>Tt(we.pitchVideoUrl),className:"text-slate-500 hover:text-brand-primary transition-colors",title:"View Pitch Video",children:n.jsx(Zc,{className:"h-5 w-5"})}):n.jsx("span",{className:"text-slate-300 cursor-not-allowed",title:"No Pitch Video",children:n.jsx(Zc,{className:"h-5 w-5"})})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-center",children:n.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[we.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx(Oe,{size:"sm",onClick:()=>Ie(we),disabled:de,className:"w-full",children:"Approve Application"}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>Et(we),disabled:de,className:"w-full text-red-600 border-red-600 hover:bg-red-50",children:"Reject Application"})]}),we.status==="accepted"&&n.jsx(Oe,{size:"sm",variant:"outline",disabled:!0,className:"w-full",children:"Approved"}),we.status==="rejected"&&n.jsx(Oe,{size:"sm",variant:"outline",disabled:!0,className:"w-full text-red-600 border-red-600",children:"Rejected"}),(we.diligenceStatus==="none"||we.diligenceStatus==null)&&we.status==="pending"&&n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>hr(we),disabled:de,className:"w-full",children:"Request Diligence"}),(we.diligenceStatus==="none"||we.diligenceStatus==null)&&we.status==="accepted"&&n.jsx(Oe,{size:"sm",variant:"outline",disabled:!0,title:"Disabled after application approval",className:"w-full",children:"Unavailable after approval"}),we.diligenceStatus==="requested"&&n.jsx(Oe,{size:"sm",variant:"outline",disabled:!0,className:"w-full",children:"Diligence Requested"}),we.diligenceStatus==="approved"&&n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>{const Ct={id:we.startupId,name:we.startupName,sector:"Unknown",investmentType:"equity",investmentValue:0,equityAllocation:0,currentValuation:0,totalFunding:0,totalRevenue:0,registrationDate:new Date().toISOString().split("T")[0],currency:"USD",complianceStatus:_t.Pending,founders:[]};a(Ct)},className:"w-full",children:"View Diligence"}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>{const Ct={id:we.startupId,name:we.startupName,sector:"Unknown",investmentType:"equity",investmentValue:0,equityAllocation:0,currentValuation:0,totalFunding:0,totalRevenue:0,registrationDate:new Date().toISOString().split("T")[0],currency:"USD",complianceStatus:_t.Pending,founders:[]};a(Ct)},className:"w-full",title:"View startup contact details and information",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"View Contact Details"]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>zt(we),disabled:de,className:"w-full text-red-600 border-red-600 hover:bg-red-50",title:"Delete this application permanently",children:[n.jsx(Ma,{className:"mr-2 h-4 w-4"}),"Delete Application"]})]})})]},we.id)}),Te.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-8 text-slate-500",children:m?`No applications received for ${((Fe=Ne.find(we=>we.id===m))==null?void 0:Fe.programName)||"this opportunity"} yet.`:"No applications received yet."})})]})]})})]})]});case"trackMyStartups":return n.jsxs("div",{className:"space-y-8 animate-fade-in",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsx(td,{title:"My Startups",value:ft.length,icon:n.jsx(bn,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(td,{title:"Active Startups",value:ft.filter(we=>we.complianceStatus==="compliant").length,icon:n.jsx(sa,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(td,{title:"Pending Review",value:ft.filter(we=>we.complianceStatus==="pending").length,icon:n.jsx(La,{className:"h-6 w-6 text-brand-primary"})})]}),n.jsx("div",{className:"space-y-8",children:n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"My Startups"}),n.jsx("div",{className:"overflow-x-auto",children:$e?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-2"}),n.jsx("p",{className:"text-slate-500",children:"Loading portfolio..."})]}):n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Startup Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Compliance Status"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsxs("tbody",{className:"bg-white divide-y divide-slate-200",children:[ft.map(we=>n.jsxs("tr",{children:[n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsx("div",{className:"text-sm font-medium text-slate-900",children:we.name}),n.jsx("div",{className:"text-xs text-slate-500",children:we.sector})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:n.jsx(Jx,{status:we.complianceStatus})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>{const Ve={id:we.id,name:we.name,sector:we.sector,investmentType:"equity",investmentValue:we.totalFunding||0,equityAllocation:0,currentValuation:we.totalFunding||0,totalFunding:we.totalFunding||0,totalRevenue:we.totalRevenue||0,registrationDate:we.registrationDate||new Date().toISOString().split("T")[0],currency:we.currency||"USD",complianceStatus:we.complianceStatus||_t.Pending,founders:[]};a(Ve)},title:"View complete startup dashboard for tracking",children:[n.jsx(gl,{className:"mr-2 h-4 w-4"}),"Track Startup"]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>{const Ve={id:we.id,name:we.name,sector:we.sector,investmentType:"equity",investmentValue:we.totalFunding||0,equityAllocation:0,currentValuation:we.totalFunding||0,totalFunding:we.totalFunding||0,totalRevenue:we.totalRevenue||0,registrationDate:we.registrationDate||new Date().toISOString().split("T")[0],currency:we.currency||"USD",complianceStatus:we.complianceStatus||_t.Pending,founders:[]};a(Ve)},title:"View startup contact details and information",children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"View Contact Details"]}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>ur(we.id),className:"text-red-600 border-red-600 hover:bg-red-50",title:"Remove startup from portfolio",children:n.jsx(Ma,{className:"h-4 w-4"})})]})})]},we.id)),ft.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:3,className:"text-center py-8 text-slate-500",children:"No startups in your portfolio yet."})})]})]})})]})})]});case"dashboard":return n.jsxs("div",{className:"space-y-8 animate-fade-in",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsx(td,{title:"My Startups",value:ft.length,icon:n.jsx(bn,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(td,{title:"Opportunities Posted",value:Ne.length,icon:n.jsx(Xd,{className:"h-6 w-6 text-brand-primary"})}),n.jsx(td,{title:"Applications Received",value:xe.length,icon:n.jsx(La,{className:"h-6 w-6 text-brand-primary"})})]}),n.jsx("div",{className:"space-y-8",children:n.jsx(w8,{data:ft})}),n.jsxs("div",{className:"space-y-8",children:[n.jsxs(tt,{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:"Recognition & Incubation Requests"}),n.jsx("div",{className:"overflow-x-auto",children:ee?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-2"}),n.jsx("p",{className:"text-slate-500",children:"Loading recognition requests..."})]}):W.length===0?n.jsxs("div",{className:"text-center py-8 text-slate-500",children:[n.jsx("p",{children:"No recognition requests received yet."}),n.jsx("p",{className:"text-sm mt-1",children:"Startups will appear here when they submit recognition forms."})]}):n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Startup Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Program"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Documents"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:W.map(we=>{var Ve,Ct;return n.jsxs("tr",{children:[n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsx("div",{className:"text-sm font-medium text-slate-900",children:((Ve=we.startup)==null?void 0:Ve.name)||"Unknown Startup"}),n.jsx("div",{className:"text-xs text-slate-500",children:((Ct=we.startup)==null?void 0:Ct.sector)||"N/A"})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:we.programName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:we.incubationType}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:we.signedAgreementUrl?n.jsx("a",{href:we.signedAgreementUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"View Agreement"}):n.jsx("span",{className:"text-slate-400",children:"No document"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[we.status==="pending"&&n.jsxs(Oe,{size:"sm",onClick:()=>pr(we.id),disabled:Y===we.id,children:[n.jsx(Po,{className:"mr-2 h-4 w-4"}),Y===we.id?"Processing...":"Accept"]}),we.status==="approved"&&n.jsxs(Oe,{size:"sm",variant:"outline",disabled:!0,className:"bg-green-50 text-green-700 border-green-200",children:[n.jsx(Po,{className:"mr-2 h-4 w-4"}),"Approved"]}),Y===we.id&&we.status!=="approved"&&n.jsxs(Oe,{size:"sm",variant:"outline",disabled:!0,className:"bg-blue-50 text-blue-700 border-blue-200",children:[n.jsx(Po,{className:"mr-2 h-4 w-4"}),"Processing..."]}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>Rt(we.id),className:"text-red-600 border-red-600 hover:bg-red-50",title:"Delete recognition record",children:n.jsx(Ma,{className:"h-4 w-4"})})]})})]},we.id)})})]})})]}),n.jsxs(tt,{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"My Opportunities"}),n.jsxs(Oe,{size:"sm",onClick:Lt,children:[n.jsx(_8,{className:"h-4 w-4 mr-1"})," Post"]})]}),n.jsx("div",{className:"overflow-x-auto max-h-96",children:n.jsxs("ul",{className:"divide-y divide-slate-200",children:[Ne.map((we,Ve)=>n.jsxs("li",{className:"py-3 flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-slate-800",children:we.programName}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Deadline: ",we.deadline||""]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>at(Ve),title:"Edit",children:n.jsx(Xl,{className:"h-4 w-4"})}),n.jsx(Oe,{size:"sm",variant:"outline",onClick:async()=>{if(!confirm("Delete this opportunity?"))return;const Ct=Ne[Ve],{error:Dt}=await G.from("incubation_opportunities").delete().eq("id",Ct.id);Dt||le(Wt=>Wt.filter((cr,Ot)=>Ot!==Ve))},title:"Delete",children:""})]})]},we.id)),Ne.length===0&&n.jsx("li",{className:"text-center py-6 text-slate-500",children:"No opportunities posted."})]})})]})]})]});case"discover":const nt=pe.trim()?P.filter(we=>we.name.toLowerCase().includes(pe.toLowerCase())||we.sector.toLowerCase().includes(pe.toLowerCase())):P;return n.jsxs("div",{className:"animate-fade-in max-w-3xl mx-auto w-full",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(gd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search startups by name or sector...",value:pe,onChange:we=>V(we.target.value),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary text-sm"})]})}),ce?n.jsxs(tt,{className:"text-center py-16",children:[n.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-600",children:"Loading Pitches..."})]}):nt.length===0?n.jsxs(tt,{className:"p-8 text-center",children:[n.jsx(Jl,{className:"h-10 w-10 text-slate-400 mx-auto mb-2"}),n.jsx("p",{className:"text-slate-600",children:pe.trim()?"No startups found matching your search.":"No active fundraising pitches."})]}):n.jsx("div",{className:"space-y-6",children:nt.map(we=>{const Ve=Ni.getYoutubeEmbedUrl(we.pitchVideoUrl);return n.jsxs(tt,{className:"!p-0 overflow-hidden shadow-lg",children:[n.jsx("div",{className:"relative w-full aspect-[16/9] bg-slate-900",children:Ve?ke===we.id?n.jsx("iframe",{src:Ve,title:`Pitch video for ${we.name}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full"}):n.jsxs("div",{className:"relative w-full h-full group cursor-pointer",onClick:()=>De(we.id),children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-black/20"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center shadow-lg transform group-hover:scale-110 transition-transform duration-200",children:n.jsx("svg",{className:"w-8 h-8 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M8 5v14l11-7z"})})})})]}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-slate-800 to-slate-900 flex items-center justify-center",children:n.jsxs("div",{className:"text-center text-slate-400",children:[n.jsx(Zc,{className:"h-16 w-16 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"Video not available"})]})})}),n.jsxs("div",{className:"p-5",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-xl font-bold text-slate-800",children:we.name}),we.complianceStatus===_t.Compliant&&n.jsxs("div",{className:"flex items-center gap-1 bg-blue-600 text-white px-3 py-1.5 rounded-full text-xs font-medium",children:[n.jsx(sa,{className:"h-3 w-3"}),"Startup Nation Verified"]})]}),n.jsxs(Oe,{size:"sm",variant:"outline",onClick:()=>Le(we),className:"flex items-center gap-2",children:[n.jsx(Iv,{className:"h-4 w-4"}),"Share"]})]}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:we.sector}),n.jsxs("div",{className:"mt-3 text-sm",children:["Ask: $",we.investmentValue.toLocaleString()," for ",n.jsxs("span",{className:"font-semibold text-blue-600",children:[we.equityAllocation,"%"]})," equity"]}),n.jsx("div",{className:"mt-3 text-sm text-slate-500",children:we.pitchDeckUrl?n.jsxs("a",{href:we.pitchDeckUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 hover:text-blue-600",children:[n.jsx(La,{className:"h-4 w-4"})," View Deck"]}):n.jsxs("span",{className:"inline-flex items-center gap-2 text-slate-400",children:[n.jsx(La,{className:"h-4 w-4"})," Deck not available"]})})]})]},we.id)})})]});case"ourInvestments":return n.jsxs("div",{className:"space-y-8 animate-fade-in",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(tt,{children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(Xd,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Investments"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:ge.length})]})]})}),n.jsx(tt,{children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(bn,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Active Startups"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:ge.filter(we=>we.complianceStatus==="compliant").length})]})]})}),n.jsx(tt,{children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(sa,{className:"h-6 w-6 text-purple-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Equity"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:"15.5%"})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(tt,{children:[n.jsx("h4",{className:"text-lg font-semibold text-slate-700 mb-4",children:"Investment Distribution by Sector"}),n.jsx("div",{className:"space-y-3",children:["Technology","Healthcare","Finance","Education","Other"].map((we,Ve)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-slate-600",children:we}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-20 bg-slate-200 rounded-full h-2",children:n.jsx("div",{className:"bg-brand-primary h-2 rounded-full",style:{width:`${Math.random()*100}%`}})}),n.jsxs("span",{className:"text-sm font-medium text-slate-900",children:[Math.floor(Math.random()*30)+10,"%"]})]})]},we))})]}),n.jsxs(tt,{children:[n.jsx("h4",{className:"text-lg font-semibold text-slate-700 mb-4",children:"Investment Performance"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Total Portfolio Value"}),n.jsx("span",{className:"text-lg font-bold text-slate-900",children:"$2.4M"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Average ROI"}),n.jsx("span",{className:"text-lg font-bold text-green-600",children:"+24.5%"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Best Performer"}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:"TechCorp (+156%)"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Active Investments"}),n.jsxs("span",{className:"text-sm font-medium text-slate-900",children:[ge.length," startups"]})]})]})]})]}),n.jsxs(tt,{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Our Investment Portfolio"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Oe,{size:"sm",variant:"outline",children:[n.jsx(La,{className:"h-4 w-4 mr-2"}),"Export"]}),n.jsxs(Oe,{size:"sm",variant:"outline",children:[n.jsx(gl,{className:"h-4 w-4 mr-2"}),"View Details"]})]})]}),W.filter(we=>we.equityAllocated&&we.equityAllocated>0).length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Xd,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No Investments Yet"}),n.jsx("p",{className:"text-slate-500 mb-6",children:"Startups will appear here when you take equity in them through your programs."}),n.jsx(Oe,{onClick:()=>f("intakeManagement"),children:"Go to Intake Management"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Startup"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Sector"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Investment Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Equity %"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Valuation"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:W.filter(we=>we.equityAllocated&&we.equityAllocated>0).map(we=>{var Ve,Ct,Dt,Wt;return n.jsxs("tr",{className:"hover:bg-slate-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:n.jsx("div",{className:"h-10 w-10 rounded-full bg-brand-primary flex items-center justify-center",children:n.jsx("span",{className:"text-sm font-medium text-white",children:((Ct=(Ve=we.startup)==null?void 0:Ve.name)==null?void 0:Ct.charAt(0).toUpperCase())||"S"})})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("div",{className:"text-sm font-medium text-slate-900",children:((Dt=we.startup)==null?void 0:Dt.name)||"Unknown Startup"}),n.jsxs("div",{className:"text-sm text-slate-500",children:["ID: ",we.startupId]})]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:((Wt=we.startup)==null?void 0:Wt.sector)||""}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:we.dateAdded?new Date(we.dateAdded).toLocaleDateString():""}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:[we.equityAllocated||0,"%"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:we.preMoneyValuation?`$${we.preMoneyValuation.toLocaleString()}`:""}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${we.status==="approved"?"bg-green-100 text-green-800":we.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:we.status==="approved"?"Active":we.status==="pending"?"Pending":"Inactive"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:n.jsxs("div",{className:"flex justify-center gap-2",children:[n.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>{var Ot,$t,rr,qt,Sr;const cr={id:we.startupId.toString(),name:((Ot=we.startup)==null?void 0:Ot.name)||"Unknown Startup",sector:(($t=we.startup)==null?void 0:$t.sector)||"",totalFunding:((rr=we.startup)==null?void 0:rr.total_funding)||0,totalRevenue:((qt=we.startup)==null?void 0:qt.total_revenue)||0,registrationDate:((Sr=we.startup)==null?void 0:Sr.registration_date)||new Date().toISOString().split("T")[0],currency:"USD",complianceStatus:"compliant",founders:[]};a(cr)},title:"View startup details",children:n.jsx(gl,{className:"h-4 w-4"})}),n.jsx(Oe,{size:"sm",variant:"outline",title:"Download investment documents",children:n.jsx(La,{className:"h-4 w-4"})})]})})]},we.id)})})]})})]})]});default:return null}};return v?n.jsx(fg,{currentUser:i,onBack:()=>x(!1),onProfileUpdate:l,onLogout:u}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Facilitation Center Dashboard"}),n.jsx("p",{className:"text-slate-600",children:"Manage your startup portfolio and opportunities"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(AD,{currentUser:i}),n.jsxs(Oe,{variant:"outline",size:"sm",onClick:()=>x(!0),className:"flex items-center gap-2",children:[n.jsx(bn,{className:"h-4 w-4"}),"Profile"]})]})]}),n.jsx("div",{className:"border-b border-slate-200",children:n.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[n.jsxs("button",{onClick:()=>f("dashboard"),className:`${d==="dashboard"?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:[n.jsx(K_,{className:"h-5 w-5"}),"Dashboard"]}),n.jsxs("button",{onClick:()=>f("intakeManagement"),className:`${d==="intakeManagement"?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:[n.jsx(Xd,{className:"h-5 w-5"}),"Intake Management"]}),n.jsxs("button",{onClick:()=>f("trackMyStartups"),className:`${d==="trackMyStartups"?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:[n.jsx(bn,{className:"h-5 w-5"}),"Track My Startups"]}),n.jsxs("button",{onClick:()=>f("ourInvestments"),className:`${d==="ourInvestments"?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:[n.jsx(Xd,{className:"h-5 w-5"}),"Our Investments"]}),n.jsxs("button",{onClick:()=>f("discover"),className:`${d==="discover"?"border-brand-primary text-brand-primary":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"} flex items-center gap-2 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:[n.jsx(Jl,{className:"h-5 w-5"}),"Discover Pitches"]})]})}),n.jsx("div",{className:"animate-fade-in",children:vt()}),n.jsx(Bn,{isOpen:j,onClose:()=>b(!1),title:oe!==null?"Edit Opportunity":"Post New Opportunity",size:"2xl",children:n.jsxs("form",{onSubmit:We,children:[n.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-4",children:[n.jsx(At,{label:"Program Name",id:"programName",name:"programName",value:q.programName,onChange:Nt,required:!0}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 mb-1",children:"Program Description"}),n.jsx("textarea",{id:"description",name:"description",value:q.description,onChange:Nt,required:!0,rows:3,className:"block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-brand-primary focus:border-brand-primary sm:text-sm"})]}),n.jsx(At,{label:"Application Deadline",id:"deadline",name:"deadline",type:"date",value:q.deadline,onChange:Nt,required:!0}),n.jsxs("div",{className:"border-t pt-4 mt-2 space-y-4",children:[n.jsx(At,{label:"Poster/Banner Image",id:"posterUrl",name:"posterUrl",type:"file",accept:"image/*",onChange:Be}),J&&n.jsx("img",{src:J,alt:"Poster preview",className:"mt-2 rounded-lg max-h-40 w-auto"}),n.jsx("p",{className:"text-center text-sm text-slate-500",children:"OR"}),n.jsx(At,{label:"YouTube Video Link",id:"videoUrl",name:"videoUrl",type:"url",placeholder:"https://www.youtube.com/watch?v=...",value:q.videoUrl,onChange:Nt})]}),n.jsxs("div",{className:"border-t pt-4 mt-2 space-y-4",children:[n.jsx("h4",{className:"text-md font-semibold text-slate-700",children:"About Your Organization"}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"facilitatorDescription",className:"block text-sm font-medium text-slate-700 mb-1",children:"Organization Description"}),n.jsx("textarea",{id:"facilitatorDescription",name:"facilitatorDescription",value:q.facilitatorDescription,onChange:Nt,required:!0,rows:3,className:"block w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-brand-primary focus:border-brand-primary sm:text-sm"})]}),n.jsx(At,{label:"Organization Website",id:"facilitatorWebsite",name:"facilitatorWebsite",type:"url",placeholder:"https://...",value:q.facilitatorWebsite,onChange:Nt})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-4",children:[n.jsx(Oe,{type:"button",variant:"secondary",onClick:()=>b(!1),children:"Cancel"}),n.jsx(Oe,{type:"submit",children:oe!==null?"Save Changes":"Post Opportunity"})]})]})}),n.jsx(Bn,{isOpen:A,onClose:()=>S(!1),title:`Accept Application: ${D==null?void 0:D.startupName}`,children:n.jsxs("form",{onSubmit:Qt,className:"space-y-4",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["To accept this application, please upload the agreement PDF for ",n.jsx("span",{className:"font-semibold",children:D==null?void 0:D.startupName}),"."]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Agreement PDF"}),n.jsx("input",{type:"file",accept:".pdf",onChange:Vt,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-slate-100 file:text-slate-700 hover:file:bg-slate-200",required:!0}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Max 10MB"}),ae&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 mt-2",children:[n.jsx(Po,{className:"h-4 w-4"}),n.jsx("span",{children:ae.name})]})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[n.jsx(Oe,{type:"button",variant:"secondary",onClick:()=>S(!1),disabled:de,children:"Cancel"}),n.jsx(Oe,{type:"submit",disabled:!ae||de,children:de?"Processing...":"Accept & Upload Agreement"})]})]})}),n.jsx(Bn,{isOpen:F,onClose:()=>z(!1),title:"Pitch Video",size:"2xl",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"relative w-full aspect-video bg-slate-900 rounded-lg overflow-hidden",children:M?n.jsx("iframe",{src:mt(M),title:"Pitch Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full"}):n.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Zc,{className:"h-16 w-16 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"Video not available"})]})})}),M&&n.jsx("div",{className:"text-sm text-slate-500 text-center",children:n.jsxs("p",{children:["Original URL: ",n.jsx("a",{href:M,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:M})]})}),n.jsx("div",{className:"flex justify-end",children:n.jsx(Oe,{variant:"secondary",onClick:()=>z(!1),children:"Close"})})]})}),n.jsx("style",{children:`
        @keyframes fade-in { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fade-in 0.4s ease-out forwards; }
      `})]})},Wae=e=>_.useMemo(()=>(e==null?void 0:e.currency)||"USD",[e==null?void 0:e.currency]),Yae=({currentUser:e,users:t,startups:r,investments:a,offers:s,interests:i})=>{var be,$e,Ze;const[l,u]=_.useState("dashboard"),[d,f]=_.useState(!1),[m,g]=_.useState(!1),[v,x]=_.useState(null),[j,b]=_.useState("investor"),[A,S]=_.useState({minimumInvestment:"",maximumInvestment:"",stage:"",successFee:"",successFeeType:"percentage",scoutingFee:""}),[T,E]=_.useState(null),[D,L]=_.useState(new Set),[F,z]=_.useState(!1),[M,U]=_.useState([]),[oe,R]=_.useState([]),[q,se]=_.useState(null),[J,Q]=_.useState(new Set),[ae,he]=_.useState(!1),[de,_e]=_.useState(!1),[Y,ye]=_.useState(!1),[P,Z]=_.useState(""),ce=Wae(e);_.useEffect(()=>{console.log(" InvestmentAdvisorView - All users data:",t),console.log(" InvestmentAdvisorView - Current user data:",e),console.log(" InvestmentAdvisorView - All startups data:",r)},[t,e,r]),_.useEffect(()=>{(async()=>{if(l==="discovery"){ye(!0);try{const V=await Ni.getActiveFundraisingStartups();U(V)}catch(V){console.error("Error loading active fundraising startups:",V)}finally{ye(!1)}}})()},[l]),_.useEffect(()=>{if(l==="discovery"&&M.length>0){const pe=M.filter(Lt=>Lt.complianceStatus===_t.Compliant),V=M.filter(Lt=>Lt.complianceStatus!==_t.Compliant),Le=Lt=>{const at=[...Lt];for(let Nt=at.length-1;Nt>0;Nt--){const Ie=Math.floor(Math.random()*(Nt+1));[at[Nt],at[Ie]]=[at[Ie],at[Nt]]}return at},ft=Le(pe),kt=Le(V),Mt=[...ft,...kt];R(Mt)}},[l,M]);const je=_.useMemo(()=>{if(!t||!Array.isArray(t)||!r||!Array.isArray(r))return[];console.log(" InvestmentAdvisorView Debug - serviceRequests:",{totalUsers:t.length,totalStartups:r.length,currentAdvisorCode:e==null?void 0:e.investment_advisor_code,currentUserRole:e==null?void 0:e.role,currentUserId:e==null?void 0:e.id});const pe=t.filter(Le=>Le.role==="Investor"||Le.role==="Startup");console.log(" All users with Investor/Startup roles:",pe.map(Le=>({id:Le.id,name:Le.name,email:Le.email,role:Le.role,investment_advisor_code_entered:Le.investment_advisor_code_entered,advisor_accepted:Le.advisor_accepted,advisor_accepted_date:Le.advisor_accepted_date}))),pe.forEach(Le=>{const ft=Le.investment_advisor_code_entered,kt=e==null?void 0:e.investment_advisor_code,Mt=Le.advisor_accepted===!0;console.log(` User ${Le.name} (${Le.role}):`,{userCode:ft,advisorCode:kt,codesMatch:ft===kt,isAccepted:Mt,shouldShow:ft===kt&&!Mt})});const V=pe.filter(Le=>{const ft=Le.investment_advisor_code_entered===(e==null?void 0:e.investment_advisor_code),kt=Le.advisor_accepted!==!0;return ft&&kt});return console.log(" Pending requests found:",V.length),console.log(" Pending requests details:",V.map(Le=>({id:Le.id,name:Le.name,email:Le.email,role:Le.role,code:Le.investment_advisor_code_entered}))),V.map(Le=>({...Le,type:Le.role==="Investor"?"investor":"startup"}))},[t,r,e==null?void 0:e.investment_advisor_code]),ke=_.useMemo(()=>{if(!t||!Array.isArray(t))return[];const pe=t.filter(V=>V.role==="Investor"&&V.investment_advisor_code_entered===(e==null?void 0:e.investment_advisor_code)&&V.advisor_accepted===!0);return console.log(" Accepted investors found:",pe.length,pe.map(V=>({id:V.id,name:V.name,email:V.email,code:V.investment_advisor_code_entered,accepted:V.advisor_accepted}))),pe},[t,e==null?void 0:e.investment_advisor_code]),De=_.useMemo(()=>!r||!Array.isArray(r)?[]:r.filter(pe=>pe.investment_advisor_code===(e==null?void 0:e.investment_advisor_code)),[r,e==null?void 0:e.investment_advisor_code]),Ee=_.useMemo(()=>{if(!s||!Array.isArray(s))return console.log(" Offers Made Debug: No offers data or not an array",{offers:s}),[];console.log(" Offers Made Debug: Starting filtering",{totalOffers:s.length,currentAdvisorCode:e==null?void 0:e.investment_advisor_code,totalUsers:(t==null?void 0:t.length)||0,totalStartups:(r==null?void 0:r.length)||0});const pe=s.filter(V=>{const Le=t.some(Mt=>{const Lt=Mt.email===V.investorEmail&&Mt.investment_advisor_code_entered===(e==null?void 0:e.investment_advisor_code);return Lt&&console.log(" Found investor match:",{userEmail:Mt.email,offerInvestorEmail:V.investorEmail,userAdvisorCode:Mt.investment_advisor_code_entered,currentAdvisorCode:e==null?void 0:e.investment_advisor_code}),Lt}),ft=r.some(Mt=>{const Lt=Mt.id===V.startupId&&Mt.investment_advisor_code===(e==null?void 0:e.investment_advisor_code);return Lt&&console.log(" Found startup match:",{startupId:Mt.id,offerStartupId:V.startupId,startupAdvisorCode:Mt.investment_advisor_code,currentAdvisorCode:e==null?void 0:e.investment_advisor_code}),Lt}),kt=Le||ft;return kt&&console.log(" Including offer:",{offerId:V.id,investorEmail:V.investorEmail,startupId:V.startupId,startupName:V.startupName,investorHasAdvisor:Le,startupHasAdvisor:ft}),kt});return console.log(" Offers Made Debug: Filtering complete",{totalOffers:s.length,filteredOffers:pe.length,filteredOfferIds:pe.map(V=>V.id)}),pe},[s,t,r,e==null?void 0:e.investment_advisor_code]),ne=_.useMemo(()=>!a||!Array.isArray(a)?[]:a,[a]),Ne=async pe=>{try{if(z(!0),pe.type==="investor")await ox.acceptInvestmentAdvisorRequest(pe.id,A);else{console.log(" Finding startup for user:",pe.id);const V=r.find(Le=>Le.user_id===pe.id);if(!V)throw new Error("Startup not found for this user");console.log(" Found startup:",V),await ox.acceptStartupAdvisorRequest(V.id,pe.id,A)}alert(`${pe.type==="investor"?"Investor":"Startup"} request accepted successfully!`),g(!1),window.location.reload()}catch(V){console.error("Error accepting request:",V),alert("Failed to accept request. Please try again.")}finally{z(!1)}},le=async pe=>{try{if(z(!0),ke.length===0){alert("You have no assigned investors to recommend this opportunity to.");return}const V=ke.map(ft=>ft.id),Le=await Zn.recommendCoInvestmentOpportunity(pe,(e==null?void 0:e.id)||"",V);alert(`Successfully recommended this opportunity to ${Le} investors!`),window.location.reload()}catch(V){console.error("Error recommending opportunity:",V),alert("Failed to recommend opportunity. Please try again.")}finally{z(!1)}},xe=async(pe,V,Le)=>{try{z(!0),Le==="investor"?await Zn.approveInvestorAdvisorOffer(pe,V):await Zn.approveStartupAdvisorOffer(pe,V),alert(`Offer ${V}ed successfully!`),window.location.reload()}catch(ft){console.error(`Error ${V}ing offer:`,ft),alert(`Failed to ${V} offer. Please try again.`)}finally{z(!1)}},H=async pe=>{try{z(!0),await Zn.revealContactDetails(pe),alert("Contact details have been revealed to both parties."),window.location.reload()}catch(V){console.error("Error revealing contact details:",V),alert("Failed to reveal contact details. Please try again.")}finally{z(!1)}},W=()=>{console.log("Logging out..."),window.location.href="/logout"},B=pe=>{Q(V=>{const Le=new Set(V);return Le.has(pe)?Le.delete(pe):Le.add(pe),Le})},ee=async pe=>{try{const V={title:`${pe.name} - Investment Opportunity`,text:`Check out this startup: ${pe.name} in ${pe.sector}`,url:window.location.href};navigator.share?await navigator.share(V):(await navigator.clipboard.writeText(`${V.title}
${V.text}
${V.url}`),alert("Startup details copied to clipboard"))}catch(V){console.error("Share failed",V),alert("Unable to share. Try copying manually.")}},X=pe=>{alert(`Due Diligence service for ${pe.name} - This feature can be implemented for advisors`)},ge=pe=>{alert(`Help investors make offers for ${pe.name} - This feature can be implemented for advisors`)};return d?n.jsx(fg,{user:e,onBack:()=>f(!1),onUpdateUser:()=>{}}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-800 px-4 py-3 m-4 rounded",children:[n.jsx("h4",{className:"font-bold",children:" Debug Information:"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Current Advisor Code:"})," ",(e==null?void 0:e.investment_advisor_code)||"None"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Total Users:"})," ",(t==null?void 0:t.length)||0]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Investors with your code:"})," ",(t==null?void 0:t.filter(pe=>pe.role==="Investor"&&pe.investment_advisor_code_entered===(e==null?void 0:e.investment_advisor_code)).length)||0]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Pending Requests:"})," ",je.length]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Accepted Investors:"})," ",ke.length]}),n.jsxs("details",{className:"mt-2",children:[n.jsx("summary",{className:"cursor-pointer font-medium",children:"Show All Users with Advisor Codes"}),n.jsx("pre",{className:"mt-2 text-xs bg-white p-2 rounded overflow-auto max-h-40",children:JSON.stringify(t==null?void 0:t.filter(pe=>pe.investment_advisor_code_entered).map(pe=>({name:pe.name,role:pe.role,code:pe.investment_advisor_code_entered,accepted:pe.advisor_accepted})),null,2)})]})]}),n.jsx("div",{className:"bg-white shadow",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center py-6",children:[n.jsx("div",{className:"flex items-center",children:n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Investment Advisor Dashboard"})}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{onClick:()=>f(!0),className:"text-gray-500 hover:text-gray-700",children:n.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),n.jsx("button",{onClick:W,className:"text-gray-500 hover:text-gray-700",children:n.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})})}),n.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:n.jsx("div",{className:"border-b border-gray-200",children:n.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[n.jsx("button",{onClick:()=>u("dashboard"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="dashboard"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:n.jsxs("div",{className:"flex items-center",children:[n.jsxs("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"})]}),"Dashboard"]})}),n.jsx("button",{onClick:()=>u("discovery"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="discovery"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Discover Pitches"]})}),n.jsx("button",{onClick:()=>u("myInvestments"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="myInvestments"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"My Investments"]})}),n.jsx("button",{onClick:()=>u("myInvestors"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="myInvestors"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),"My Investors"]})}),n.jsx("button",{onClick:()=>u("myStartups"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="myStartups"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"My Startups"]})}),n.jsx("button",{onClick:()=>u("interests"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="interests"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Investment Interests"]})})]})})}),l==="dashboard"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Service Requests"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Investors and Startups who have requested your services using your Investment Advisor Code"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Request Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:je.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No pending service requests"})}):je.map(pe=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:pe.name||"N/A"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:pe.email}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${pe.type==="investor"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:pe.type==="investor"?"Investor":"Startup"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(pe.created_at||Date.now()).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsx("button",{onClick:()=>{x(pe),b(pe.type),g(!0)},className:"text-blue-600 hover:text-blue-900",children:"Accept Request"})})]},pe.id))})]})})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Offers Made"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Investment offers made by your assigned investors or received by your assigned startups"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Startup"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Investor"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Offer Amount"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Equity %"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scouting Fees"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ee.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{children:"No relevant offers found"}),n.jsxs("div",{className:"text-xs text-gray-400",children:["Debug Info: Total offers: ",(s==null?void 0:s.length)||0," | Current advisor code: ",(e==null?void 0:e.investment_advisor_code)||"None"," | Users with advisor codes: ",(t==null?void 0:t.filter(pe=>pe.investment_advisor_code_entered).length)||0," | Startups with advisor codes: ",(r==null?void 0:r.filter(pe=>pe.investment_advisor_code).length)||0]}),n.jsxs("div",{className:"text-xs text-gray-400",children:["Sample offer data: ",(s==null?void 0:s.length)>0?JSON.stringify({investorEmail:(be=s[0])==null?void 0:be.investorEmail,startupId:($e=s[0])==null?void 0:$e.startupId,startupName:(Ze=s[0])==null?void 0:Ze.startupName}):"No offers"]})]})})}):Ee.map(pe=>{const V=pe.investor_advisor_approval_status,Le=pe.startup_advisor_approval_status,ft=pe.contact_details_revealed;return n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:pe.startupName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:pe.investorEmail}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Lr(pe.offerAmount)}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[pe.equityPercentage,"%"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${pe.status==="pending"?"bg-yellow-100 text-yellow-800":pe.status==="accepted"?"bg-green-100 text-green-800":pe.status==="pending_investor_advisor_approval"?"bg-blue-100 text-blue-800":pe.status==="pending_startup_advisor_approval"?"bg-purple-100 text-purple-800":pe.status==="investor_advisor_approved"||pe.status==="startup_advisor_approved"?"bg-green-100 text-green-800":pe.status==="investor_advisor_rejected"||pe.status==="startup_advisor_rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:pe.status.replace(/_/g," ").replace(/\b\w/g,kt=>kt.toUpperCase())})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsxs("div",{className:"text-xs",children:[n.jsxs("div",{children:["Startup: ",Lr(pe.startup_scouting_fee_amount||0)]}),n.jsxs("div",{children:["Investor: ",Lr(pe.investor_scouting_fee_amount||0)]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(pe.createdAt).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:V==="pending"||Le==="pending"?n.jsxs("div",{className:"space-x-2",children:[n.jsx("button",{onClick:()=>xe(pe.id,"approve",V==="pending"?"investor":"startup"),disabled:F,className:"px-3 py-1 text-xs bg-green-100 text-green-800 rounded-full hover:bg-green-200 disabled:opacity-50",children:"Approve"}),n.jsx("button",{onClick:()=>xe(pe.id,"reject",V==="pending"?"investor":"startup"),disabled:F,className:"px-3 py-1 text-xs bg-red-100 text-red-800 rounded-full hover:bg-red-200 disabled:opacity-50",children:"Reject"})]}):!ft&&pe.status==="accepted"?n.jsx("button",{onClick:()=>H(pe.id),disabled:F,className:"text-blue-600 hover:text-blue-900 disabled:opacity-50",children:"View Contact Details"}):ft?n.jsx("span",{className:"text-green-600",children:"Contact Details Revealed"}):n.jsx("span",{className:"text-gray-400",children:"Pending"})})]},pe.id)})})]})})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Co-Investment Opportunities"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"All co-investment opportunities across the platform"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Startup"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sector"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Investment Amount"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Equity %"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lead Investor"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ne.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"No co-investment opportunities available"})}):ne.map(pe=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:pe.name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:pe.sector}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Lr(pe.investmentValue)}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[pe.equityAllocation,"%"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"Lead Investor Name"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${pe.complianceStatus==="Approved"?"bg-green-100 text-green-800":pe.complianceStatus==="Pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:pe.complianceStatus})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{alert("Due diligence functionality coming soon!")},className:"px-3 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800 hover:bg-purple-200",children:"Due Diligence"}),n.jsx("button",{onClick:()=>le(pe.id),disabled:F,className:"px-3 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200 disabled:opacity-50",children:"Recommend to My Investors"})]})})]},pe.id))})]})})]})})]}),l==="discovery"&&n.jsxs("div",{className:"animate-fade-in max-w-4xl mx-auto w-full",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-slate-800 mb-2",children:"Discover Pitches"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Watch startup videos and explore opportunities for your investors"})]}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),n.jsx("input",{type:"text",placeholder:"Search startups by name or sector...",value:P,onChange:pe=>Z(pe.target.value),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]})}),n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-100 gap-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("button",{onClick:()=>{_e(!1),he(!1)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${!de&&!ae?"bg-blue-600 text-white shadow-blue-200":"bg-white text-slate-600 hover:bg-blue-50 hover:text-blue-600 border border-slate-200"}`,children:[n.jsx("svg",{className:"h-3 w-3 sm:h-4 sm:w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),n.jsx("span",{className:"hidden sm:inline",children:"All"})]}),n.jsxs("button",{onClick:()=>{_e(!0),he(!1)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${de&&!ae?"bg-green-600 text-white shadow-green-200":"bg-white text-slate-600 hover:bg-green-50 hover:text-green-600 border border-slate-200"}`,children:[n.jsx("svg",{className:`h-3 w-3 sm:h-4 sm:w-4 ${de&&!ae?"fill-current":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("span",{className:"hidden sm:inline",children:"Verified"})]}),n.jsxs("button",{onClick:()=>{_e(!1),he(!0)},className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 shadow-sm ${ae?"bg-red-600 text-white shadow-red-200":"bg-white text-slate-600 hover:bg-red-50 hover:text-red-600 border border-slate-200"}`,children:[n.jsx("svg",{className:`h-3 w-3 sm:h-4 sm:w-4 ${ae?"fill-current":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),n.jsx("span",{className:"hidden sm:inline",children:"Favorites"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:[M.length," active pitches"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[n.jsx("svg",{className:"h-4 w-4 sm:h-5 sm:w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Pitch Reels"})]})]})]}),n.jsx("div",{className:"space-y-8",children:Y?n.jsx("div",{className:"bg-white rounded-lg shadow text-center py-20",children:n.jsxs("div",{className:"max-w-sm mx-auto",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:"Loading Pitches..."}),n.jsx("p",{className:"text-slate-500",children:"Fetching active fundraising startups"})]})}):(()=>{let V=l==="discovery"?oe:M;return P.trim()&&(V=V.filter(Le=>Le.name.toLowerCase().includes(P.toLowerCase())||Le.sector.toLowerCase().includes(P.toLowerCase()))),de&&(V=V.filter(Le=>Le.isStartupNationValidated)),ae&&(V=V.filter(Le=>J.has(Le.id))),V.length===0?n.jsx("div",{className:"bg-white rounded-lg shadow text-center py-20",children:n.jsxs("div",{className:"max-w-sm mx-auto",children:[n.jsx("svg",{className:"h-16 w-16 text-slate-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),n.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:P.trim()?"No Matching Startups":de?"No Verified Startups":ae?"No Favorited Pitches":"No Active Fundraising"}),n.jsx("p",{className:"text-slate-500",children:P.trim()?"No startups found matching your search. Try adjusting your search terms or filters.":de?"No Startup Nation verified startups are currently fundraising. Try removing the verification filter or check back later.":ae?"Start favoriting pitches to see them here.":"No startups are currently fundraising. Check back later for new opportunities."})]})}):V.map(Le=>{const ft=Ni.getYoutubeEmbedUrl(Le.pitchVideoUrl);return n.jsxs("div",{className:"bg-white rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border-0 overflow-hidden",children:[n.jsx("div",{className:"relative w-full aspect-[16/9] bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:ft?q===Le.id?n.jsxs("div",{className:"relative w-full h-full",children:[n.jsx("iframe",{src:ft,title:`Pitch video for ${Le.name}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full"}),n.jsx("button",{onClick:()=>se(null),className:"absolute top-4 right-4 bg-black/70 text-white rounded-full p-2 hover:bg-black/90 transition-all duration-200 backdrop-blur-sm",children:""})]}):n.jsxs("div",{className:"relative w-full h-full group cursor-pointer",onClick:()=>se(Le.id),children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/40"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"w-20 h-20 bg-red-600 rounded-full flex items-center justify-center shadow-2xl transform group-hover:scale-110 transition-all duration-300 group-hover:shadow-red-500/50",children:n.jsx("svg",{className:"w-10 h-10 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M8 5v14l11-7z"})})})}),n.jsx("div",{className:"absolute bottom-4 left-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:n.jsx("p",{className:"text-sm font-medium",children:"Click to play"})})]}):n.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:n.jsxs("div",{className:"text-center",children:[n.jsx("svg",{className:"h-16 w-16 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),n.jsx("p",{className:"text-sm",children:"No video available"})]})})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:Le.name}),n.jsx("p",{className:"text-slate-600 font-medium",children:Le.sector})]}),n.jsx("div",{className:"flex items-center gap-2",children:Le.isStartupNationValidated&&n.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-3 py-1.5 rounded-full text-xs font-medium shadow-sm",children:[n.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Verified"]})})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[n.jsx("button",{onClick:()=>B(Le.id),className:`!rounded-full !p-3 transition-all duration-200 ${J.has(Le.id)?"bg-gradient-to-r from-red-500 to-pink-600 text-white shadow-lg shadow-red-200":"hover:bg-red-50 hover:text-red-600 border border-slate-200 bg-white"} px-3 py-2 rounded-lg text-sm font-medium`,children:n.jsx("svg",{className:`h-5 w-5 ${J.has(Le.id)?"fill-current":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),n.jsx("button",{onClick:()=>ee(Le),className:"!rounded-full !p-3 hover:bg-blue-50 hover:text-blue-600 hover:border-blue-300 transition-all duration-200 border border-slate-200 bg-white px-3 py-2 rounded-lg text-sm font-medium",children:n.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})})}),Le.pitchDeckUrl&&Le.pitchDeckUrl!=="#"&&n.jsx("a",{href:Le.pitchDeckUrl,target:"_blank",rel:"noopener noreferrer",className:"flex-1",children:n.jsxs("button",{className:"w-full hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 border border-slate-200 bg-white px-3 py-2 rounded-lg text-sm font-medium",children:[n.jsx("svg",{className:"h-4 w-4 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"View Deck"]})}),n.jsxs("button",{onClick:()=>X(Le),className:"flex-1 hover:bg-purple-50 hover:text-purple-600 hover:border-purple-300 transition-all duration-200 border border-slate-200 bg-white px-3 py-2 rounded-lg text-sm font-medium",children:[n.jsx("svg",{className:"h-4 w-4 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Due Diligence (150)"]}),n.jsxs("button",{onClick:()=>ge(Le),className:"flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg shadow-blue-200 text-white px-3 py-2 rounded-lg text-sm font-medium",children:[n.jsx("svg",{className:"h-4 w-4 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Help Make Offer"]})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 px-6 py-4 flex justify-between items-center border-t border-slate-200",children:[n.jsxs("div",{className:"text-base",children:[n.jsx("span",{className:"font-semibold text-slate-800",children:"Ask:"})," ",Ni.formatCurrency(Le.investmentValue,ce)," for ",n.jsxs("span",{className:"font-semibold text-blue-600",children:[Le.equityAllocation,"%"]})," equity"]}),Le.complianceStatus===_t.Compliant&&n.jsxs("div",{className:"flex items-center gap-1 text-green-600",title:"This startup has been verified by Startup Nation",children:[n.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("span",{className:"text-xs font-semibold",children:"Verified"})]})]})]},Le.id)})})()})]}),l==="myInvestments"&&n.jsx("div",{className:"bg-white rounded-lg shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"My Investments"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Investment deals facilitated through your advisory services"}),n.jsx("div",{className:"text-center text-gray-500 py-8",children:"Investment tracking functionality coming soon"})]})}),l==="myInvestors"&&n.jsx("div",{className:"bg-white rounded-lg shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"My Investors"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Investors who have accepted your advisory services"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Accepted Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ke.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"No assigned investors"})}):ke.map(pe=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:pe.name||"N/A"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:pe.email}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(pe.created_at||Date.now()).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Active"})})]},pe.id))})]})})]})}),l==="myStartups"&&n.jsx("div",{className:"bg-white rounded-lg shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"My Startups"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Startups that have accepted your advisory services"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sector"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Investment Value"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:De.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"No assigned startups"})}):De.map(pe=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:pe.name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:pe.sector}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Lr(pe.investmentValue)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Active"})})]},pe.id))})]})})]})}),l==="interests"&&n.jsx("div",{className:"bg-white rounded-lg shadow",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Investment Interests"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Investment interests and preferences from your assigned clients"}),n.jsx("div",{className:"text-center text-gray-500 py-8",children:"Investment interests functionality coming soon"})]})}),m&&v&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:n.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:n.jsxs("div",{className:"mt-3",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Accept ",v.type==="investor"?"Investor":"Startup"," Request"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Minimum Investment"}),n.jsx("input",{type:"number",value:A.minimumInvestment,onChange:pe=>S({...A,minimumInvestment:pe.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Maximum Investment"}),n.jsx("input",{type:"number",value:A.maximumInvestment,onChange:pe=>S({...A,maximumInvestment:pe.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Success Fee"}),n.jsx("input",{type:"number",value:A.successFee,onChange:pe=>S({...A,successFee:pe.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),n.jsx("button",{onClick:()=>Ne(v),disabled:F,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:F?"Accepting...":"Accept Request"})]})]})})})]})},Xae=({isOpen:e,onClose:t})=>{const[r,a]=_.useState(""),[s,i]=_.useState(!1),[l,u]=_.useState(!1),[d,f]=_.useState(null),m=async x=>{x.preventDefault(),i(!0),f(null);try{const{success:j,error:b}=await br.sendPasswordResetEmail(r);j?(u(!0),a("")):f(b||"Failed to send password reset email. Please try again.")}catch(j){console.error("Password reset error:",j),f(j.message||"An unexpected error occurred. Please try again.")}finally{i(!1)}},g=()=>{a(""),f(null),u(!1),t()},v=()=>{a(""),f(null),u(!1)};return n.jsx(Bn,{isOpen:e,onClose:g,title:"Forgot Password",children:l?n.jsxs("div",{className:"text-center space-y-6",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:n.jsx(sa,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"Check your email"}),n.jsxs("p",{className:"text-sm text-slate-600",children:["We've sent a password reset link to ",n.jsx("strong",{children:r})]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 text-left",children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"What happens next?"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" Check your email inbox (and spam folder)"}),n.jsx("li",{children:" Click the reset link in the email"}),n.jsx("li",{children:" Create a new password"}),n.jsx("li",{children:" Sign in with your new password"})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsx(Oe,{onClick:v,variant:"outline",className:"flex-1",children:"Send to Different Email"}),n.jsx(Oe,{onClick:g,className:"flex-1",children:"Got it, thanks!"})]})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 mb-4",children:n.jsx(ko,{className:"h-6 w-6 text-blue-600"})}),n.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"Reset your password"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),n.jsxs("form",{onSubmit:m,className:"space-y-4",children:[n.jsx(At,{label:"Email address",id:"reset-email",type:"email",autoComplete:"email",value:r,onChange:x=>a(x.target.value),required:!0,placeholder:"Enter your email address"}),d&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(iu,{className:"h-4 w-4 text-red-600"}),n.jsx("p",{className:"text-red-800 text-sm",children:d})]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsx(Oe,{type:"button",variant:"outline",onClick:g,className:"flex-1",disabled:s,children:"Cancel"}),n.jsx(Oe,{type:"submit",className:"flex-1",disabled:s||!r.trim(),children:s?n.jsxs(n.Fragment,{children:[n.jsx(Hp,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Send Reset Link"})]})]})]})})},Zae=({onLogin:e,onNavigateToRegister:t,onNavigateToCompleteRegistration:r,onNavigateToLanding:a})=>{const[s,i]=_.useState(""),[l,u]=_.useState(""),[d,f]=_.useState(!1),[m,g]=_.useState(null),[v,x]=_.useState(!1),[j,b]=_.useState(!1),A=async S=>{S.preventDefault(),f(!0),g(null),x(!1);const T=setTimeout(()=>{f(!1),g("Login timed out. Please try again.")},1e4);try{const{user:E,error:D}=await br.signInMinimal({email:s,password:l});if(clearTimeout(T),E){console.log("User authenticated:",E.email);const{data:L,error:F}=await br.supabase.from("users").select("government_id, ca_license").eq("id",E.id),z=L&&L.length>0?L[0]:null;if(console.log("Profile check result:",{profile:z,profileError:F,hasGovId:!!(z!=null&&z.government_id),hasCaLicense:!!(z!=null&&z.ca_license),govIdValue:z==null?void 0:z.government_id,caLicenseValue:z==null?void 0:z.ca_license}),F){console.error("Error fetching profile:",F),r();return}if(z)if(!z.government_id||!z.ca_license){console.log("Profile exists but documents missing - redirecting to Form 2"),console.log("Missing documents:",{govId:z.government_id,caLicense:z.ca_license}),r();return}else console.log("User complete, proceeding to dashboard"),e(E);else{console.log("No profile found - redirecting to Form 2"),r();return}}else D&&(g(D),(D.includes("does not exist")||D.includes("Please register first"))&&(x(!0),setTimeout(()=>{t()},3e3)))}catch(E){clearTimeout(T),console.error("Login error:",E),g(E.message||"An unexpected error occurred. Please try again.")}finally{f(!1)}};return n.jsxs("div",{className:"w-full flex flex-col items-center",children:[a&&n.jsx("div",{className:"w-full max-w-md mb-4 flex justify-start",children:n.jsx("button",{onClick:a,className:"text-sm text-slate-500 hover:text-slate-700 underline","aria-label":"Back",children:" Back"})}),n.jsxs(tt,{className:"w-full max-w-md",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("img",{src:ou,alt:"TrackMyStartup",className:"mx-auto h-40 w-40 cursor-pointer hover:opacity-80 transition-opacity",onClick:a}),n.jsx("h2",{className:"mt-4 text-3xl font-bold tracking-tight text-slate-900",children:"Sign in to your account"}),n.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Or"," ",n.jsx("button",{onClick:t,className:"font-medium text-brand-primary hover:text-brand-secondary",children:"create a new account"})]})]}),n.jsxs("form",{onSubmit:A,className:"space-y-6",children:[n.jsx(At,{label:"Email address",id:"email",type:"email",autoComplete:"email",value:s,onChange:S=>i(S.target.value),required:!0}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(At,{label:"Password",id:"password",type:"password",autoComplete:"current-password",value:l,onChange:S=>u(S.target.value),required:!0}),n.jsx("div",{className:"text-right",children:n.jsx("button",{type:"button",onClick:()=>b(!0),className:"text-sm text-brand-primary hover:text-brand-secondary font-medium",children:"Forgot your password?"})})]}),m&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:[n.jsx("p",{className:"text-red-800 text-sm",children:m}),v&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}),n.jsx("p",{className:"text-red-600 text-xs",children:"Redirecting to registration..."})]})]}),n.jsx("div",{children:n.jsx(Oe,{type:"submit",className:"w-full",disabled:d||v,children:d?n.jsxs(n.Fragment,{children:[n.jsx(Hp,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):v?n.jsxs(n.Fragment,{children:[n.jsx(Hp,{className:"mr-2 h-4 w-4 animate-spin"}),"Redirecting..."]}):"Sign in"})})]})]}),n.jsx(Xae,{isOpen:j,onClose:()=>b(!1)})]})},Jae=({onEmailVerified:e,onNavigateToLogin:t,onNavigateToLanding:r})=>{const[a,s]=_.useState({name:"",email:"",password:"",confirmPassword:"",role:"Investor",startupName:"",investmentAdvisorCode:""}),[i,l]=_.useState(!1),[u,d]=_.useState(null),[f,m]=_.useState(!1),[g,v]=_.useState(!1),[x,j]=_.useState(["Investor","Startup","Startup Facilitation Center","Investment Advisor","Admin"]),[b,A]=_.useState({isValidating:!1,exists:!1,error:null,lastChecked:null}),S=_.useCallback((()=>{let D;return L=>{clearTimeout(D),D=setTimeout(async()=>{if(L&&L.includes("@")){A(F=>({...F,isValidating:!0}));try{const F=await br.checkEmailExists(L);A({isValidating:!1,exists:F.exists,error:F.error||null,lastChecked:L})}catch{A({isValidating:!1,exists:!1,error:"Unable to check email availability",lastChecked:L})}}else A({isValidating:!1,exists:!1,error:null,lastChecked:null})},500)}})(),[]);_.useEffect(()=>{a.email?S(a.email):A({isValidating:!1,exists:!1,error:null,lastChecked:null})},[a.email,S]);const T=(D,L)=>{s(F=>({...F,[D]:L})),D==="email"&&A(F=>({...F,error:null}))},E=async D=>{if(D.preventDefault(),l(!0),d(null),b.exists){d("This email is already registered. Please sign in instead."),l(!1);return}if(a.password!==a.confirmPassword){d("Passwords do not match"),l(!1);return}if(a.role==="Startup"&&!a.startupName.trim()){d("Startup name is required for Startup role"),l(!1);return}if(!a.email||!a.email.includes("@")){d("Please enter a valid email address"),l(!1);return}try{const{user:L,error:F,confirmationRequired:z}=await br.signUp({email:a.email,password:a.password,name:a.name,role:a.role,startupName:a.role==="Startup"?a.startupName:void 0,investmentAdvisorCode:a.investmentAdvisorCode||void 0,founders:[],fileUrls:{}});if(F){d(F),l(!1);return}z?(v(!0),m(!0),console.log("Email verification required for:",a.email)):L&&e({name:a.name,email:a.email,password:a.password,role:a.role,startupName:a.role==="Startup"?a.startupName:void 0,investmentAdvisorCode:a.investmentAdvisorCode||void 0})}catch(L){d(L.message||"An error occurred")}finally{l(!1)}};return f?n.jsx(tt,{className:"w-full max-w-md",children:n.jsxs("div",{className:"text-center",children:[n.jsx(ko,{className:"mx-auto h-12 w-12 text-blue-500"}),n.jsx("h2",{className:"mt-4 text-2xl font-bold text-slate-900",children:"Check Your Email"}),n.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["We've sent a verification link to ",n.jsx("strong",{children:a.email})]}),n.jsx("p",{className:"mt-4 text-xs text-slate-500",children:"Please check your email and click the verification link to continue."}),g&&n.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-md",children:n.jsxs("div",{className:"flex items-center text-green-800",children:[n.jsx(sa,{className:"h-4 w-4 mr-2"}),n.jsx("span",{className:"text-sm",children:"Verification email sent successfully!"})]})}),n.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[n.jsx("p",{className:"text-sm text-blue-800 mb-3",children:n.jsx("strong",{children:"Next Steps:"})}),n.jsxs("p",{className:"text-xs text-blue-600",children:["1. Check your email for the verification link",n.jsx("br",{}),"2. Click the verification link in your email",n.jsx("br",{}),'3. Come back here and click "Continue to Login"']})]}),n.jsx("div",{className:"mt-4",children:n.jsx(Oe,{onClick:()=>{m(!1),v(!1),t()},className:"w-full",children:"Continue to Login"})}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{onClick:()=>{m(!1),v(!1)},className:"text-sm text-slate-500 hover:text-slate-700 underline",children:" Back to Registration Form"})})]})}):n.jsxs("div",{className:"w-full flex flex-col items-center",children:[r&&n.jsx("div",{className:"w-full max-w-2xl mb-4 flex justify-start",children:n.jsx("button",{onClick:r,className:"text-sm text-slate-500 hover:text-slate-700 underline","aria-label":"Back",children:" Back"})}),n.jsxs(tt,{className:"w-full max-w-2xl",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("img",{src:ou,alt:"TrackMyStartup",className:"mx-auto h-40 w-40 cursor-pointer hover:opacity-80 transition-opacity",onClick:r}),n.jsx("h2",{className:"mt-4 text-3xl font-bold tracking-tight text-slate-900",children:"Create a new account"}),n.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Or"," ",n.jsx("button",{onClick:t,className:"text-brand-primary hover:text-brand-primary-dark underline",children:"sign in to your existing account"})]})]}),n.jsxs("form",{onSubmit:E,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx(At,{label:"Full Name",id:"name",name:"name",type:"text",required:!0,value:a.name,onChange:D=>T("name",D.target.value)}),n.jsxs("div",{children:[n.jsx(At,{label:"Email address",id:"email",name:"email",type:"email",required:!0,value:a.email,onChange:D=>T("email",D.target.value),className:b.exists?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-slate-300"}),a.email&&n.jsxs("div",{className:"mt-1",children:[b.isValidating&&n.jsxs("div",{className:"flex items-center text-sm text-slate-500",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-slate-500 mr-2"}),"Checking email availability..."]}),!b.isValidating&&b.exists&&n.jsxs("div",{className:"flex items-center text-sm text-red-600",children:[n.jsx(Vp,{className:"h-4 w-4 mr-1"}),"This email is already registered. Please sign in instead."]}),!b.isValidating&&!b.exists&&b.lastChecked===a.email&&n.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[n.jsx(sa,{className:"h-4 w-4 mr-1"}),"Email is available"]}),b.error&&n.jsxs("div",{className:"flex items-center text-sm text-amber-600",children:[n.jsx(iu,{className:"h-4 w-4 mr-1"}),b.error]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx(At,{label:"Password",id:"password",name:"password",type:"password",required:!0,value:a.password,onChange:D=>T("password",D.target.value)}),n.jsx(At,{label:"Confirm Password",id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:a.confirmPassword,onChange:D=>T("confirmPassword",D.target.value)})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.jsxs("div",{children:[n.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-slate-700 mb-2",children:"Role *"}),n.jsxs("select",{id:"role",name:"role",required:!0,value:a.role,onChange:D=>T("role",D.target.value),className:"block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-brand-primary focus:border-brand-primary",children:[n.jsx("option",{value:"",children:"Select Role"}),x.map(D=>n.jsx("option",{value:D,children:D==="CA"?`${D} (Chartered Accountant)`:D==="CS"?`${D} (Company Secretary)`:D},D))]})]})}),(a.role==="Investor"||a.role==="Startup")&&n.jsx(At,{label:"Investment Advisor Code (Optional)",id:"investmentAdvisorCode",name:"investmentAdvisorCode",type:"text",placeholder:"IA-XXXXXX",value:a.investmentAdvisorCode,onChange:D=>T("investmentAdvisorCode",D.target.value),helpText:"Enter your Investment Advisor's code if you have one"}),a.role==="Startup"&&n.jsx(At,{label:"Startup Name",id:"startupName",name:"startupName",type:"text",required:!0,placeholder:"Enter your startup name",value:a.startupName,onChange:D=>T("startupName",D.target.value)}),u&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:n.jsxs("div",{className:"text-sm text-red-800",children:[n.jsx("strong",{children:"Error:"})," ",u]})}),n.jsx(Oe,{type:"submit",className:"w-full",disabled:i||b.exists,children:i?"Creating Account...":"Create Account"})]})]})]})},Qae=({userData:e,onComplete:t,onBack:r})=>{var E,D,L;const[a,s]=_.useState({govId:null,roleSpecific:null,license:null,logo:null}),[i,l]=_.useState(""),[u,d]=_.useState([{id:"1",name:"",email:"",equity:0}]),[f,m]=_.useState(!1),[g,v]=_.useState(null);console.log("DocumentUploadStep - User role:",e.role),console.log("DocumentUploadStep - Is Investment Advisor?",e.role==="Investment Advisor");const x=(F,z)=>{var U;const M=(U=F.target.files)==null?void 0:U[0];M&&s(oe=>({...oe,[z]:M}))},j=()=>{const F=(u.length+1).toString();d(z=>[...z,{id:F,name:"",email:""}])},b=F=>{u.length>1&&d(z=>z.filter(M=>M.id!==F))},A=(F,z,M)=>{d(U=>U.map(oe=>oe.id===F?{...oe,[z]:M}:oe))},S=F=>{switch(F){case"Investor":return"PAN Card";case"Startup":return"Proof of Company Registration";case"CA":return"Copy of CA License";case"CS":return"Copy of CS License";case"Startup Facilitation Center":return"Proof of Organization Registration";case"Investment Advisor":return"Proof of Firm Registration";default:return"Document"}},T=async F=>{var z;if(F.preventDefault(),m(!0),v(null),!i){v("Country selection is required"),m(!1);return}if(!a.govId){v("Government ID is required"),m(!1);return}if(!a.roleSpecific){v(`${S(e.role)} is required`),m(!1);return}if(e.role==="Investment Advisor"||((z=e.role)==null?void 0:z.trim())==="Investment Advisor"){if(!a.license){v("License (As per country regulations) is required for Investment Advisors"),m(!1);return}if(!a.logo){v("Company logo is required for Investment Advisors"),m(!1);return}}if(e.role==="Startup"&&u.filter(U=>!U.name.trim()||!U.email.trim()).length>0){v("Please fill in all founder details"),m(!1);return}try{t(e,a,u,i)}catch(M){v(M.message||"An error occurred")}finally{m(!1)}};return n.jsxs(tt,{className:"w-full max-w-2xl",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("img",{src:ou,alt:"TrackMyStartup",className:"mx-auto h-40 w-40"}),n.jsx("h2",{className:"mt-4 text-3xl font-bold tracking-tight text-slate-900",children:"Complete Your Profile"}),n.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["TrackMyStartup - Welcome, ",e.name,"! Now let's upload your verification documents."]}),n.jsxs("p",{className:"mt-1 text-xs text-slate-400",children:["Role: ",e.role]})]}),n.jsxs("form",{onSubmit:T,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(bn,{className:"h-5 w-5 mr-2"}),"Country Information"]}),n.jsxs(Select,{label:"Country",id:"country",value:i,onChange:F=>l(F.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Select Country"}),n.jsx("option",{value:"United States",children:"United States"}),n.jsx("option",{value:"India",children:"India"}),n.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),n.jsx("option",{value:"Canada",children:"Canada"}),n.jsx("option",{value:"Australia",children:"Australia"}),n.jsx("option",{value:"Germany",children:"Germany"}),n.jsx("option",{value:"France",children:"France"}),n.jsx("option",{value:"Singapore",children:"Singapore"}),n.jsx("option",{value:"Japan",children:"Japan"}),n.jsx("option",{value:"China",children:"China"}),n.jsx("option",{value:"Brazil",children:"Brazil"}),n.jsx("option",{value:"Mexico",children:"Mexico"}),n.jsx("option",{value:"South Africa",children:"South Africa"}),n.jsx("option",{value:"Nigeria",children:"Nigeria"}),n.jsx("option",{value:"Kenya",children:"Kenya"}),n.jsx("option",{value:"Egypt",children:"Egypt"}),n.jsx("option",{value:"UAE",children:"UAE"}),n.jsx("option",{value:"Saudi Arabia",children:"Saudi Arabia"}),n.jsx("option",{value:"Israel",children:"Israel"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(La,{className:"h-5 w-5 mr-2"}),"Verification Documents"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Government ID (Passport, Driver's License, etc.)"}),n.jsx(At,{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:F=>x(F,"govId"),required:!0}),a.govId&&n.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[" ",a.govId.name," selected"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:S(e.role)}),n.jsx(At,{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:F=>x(F,"roleSpecific"),required:!0}),a.roleSpecific&&n.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[" ",a.roleSpecific.name," selected"]})]}),(e.role==="Investment Advisor"||((E=e.role)==null?void 0:E.trim())==="Investment Advisor")&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"License (As per country regulations)"}),n.jsx(At,{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:F=>x(F,"license"),required:!0}),a.license&&n.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[" ",a.license.name," selected"]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Upload your financial advisor license (if applicable)"})]}),e.role!=="Investment Advisor"&&n.jsxs("div",{className:"p-4 bg-yellow-100 border border-yellow-300 rounded-md",children:[n.jsxs("p",{className:"text-sm text-yellow-800",children:[n.jsx("strong",{children:"Debug:"}),' Role is "',e.role,'" (length: ',(D=e.role)==null?void 0:D.length,")"]}),n.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:'Expected: "Investment Advisor" (length: 18)'})]}),(e.role==="Investment Advisor"||((L=e.role)==null?void 0:L.trim())==="Investment Advisor")&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Upload Logo"}),n.jsx(At,{type:"file",accept:".jpg,.jpeg,.png,.svg",onChange:F=>x(F,"logo"),required:!0}),a.logo&&n.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[" ",a.logo.name," selected"]}),n.jsxs("div",{className:"text-xs text-slate-500 mt-1 space-y-1",children:[n.jsx("p",{children:"Upload your company logo (JPG, PNG, or SVG format)"}),n.jsxs("div",{className:"bg-blue-50 p-2 rounded border border-blue-200",children:[n.jsx("p",{className:"font-medium text-blue-800 mb-1",children:"Logo Specifications:"}),n.jsxs("ul",{className:"text-blue-700 space-y-0.5",children:[n.jsx("li",{children:" Recommended size: 64x64 pixels (square format)"}),n.jsx("li",{children:" Maximum file size: 2MB"}),n.jsx("li",{children:" Supported formats: JPG, PNG, SVG"}),n.jsx("li",{children:" Logo will be displayed as 64x64px with white background"}),n.jsx("li",{children:" For best results, use a square logo or center your logo in a square canvas"})]})]})]})]})]})]}),e.role==="Startup"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(bn,{className:"h-5 w-5 mr-2"}),"Founder Information"]}),n.jsx("p",{className:"text-sm text-slate-600",children:"Please provide the details of all founders."}),n.jsxs("div",{className:"space-y-4",children:[u.map((F,z)=>n.jsxs("div",{className:"p-4 border border-slate-200 rounded-md",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h4",{className:"font-medium text-slate-900",children:["Founder ",z+1]}),u.length>1&&n.jsx("button",{type:"button",onClick:()=>b(F.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(At,{label:"Name",value:F.name,onChange:M=>A(F.id,"name",M.target.value),required:!0}),n.jsx(At,{label:"Email",type:"email",value:F.email,onChange:M=>A(F.id,"email",M.target.value),required:!0}),n.jsx(At,{label:"Equity (%)",type:"number",min:"0",max:"100",step:"0.1",value:F.equity,onChange:M=>A(F.id,"equity",parseFloat(M.target.value)||0),required:!0})]})]},F.id)),n.jsxs(Oe,{type:"button",onClick:j,variant:"outline",className:"w-full",children:[n.jsx(bn,{className:"h-4 w-4 mr-2"}),"Add Another Founder"]})]})]}),g&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:n.jsxs("div",{className:"text-sm text-red-800",children:[n.jsx("strong",{children:"Error:"})," ",g]})}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx(Oe,{type:"button",onClick:r,variant:"outline",className:"flex-1",children:"Back"}),n.jsx(Oe,{type:"submit",className:"flex-1",disabled:f,children:f?"Creating Profile...":"Complete Registration"})]})]})]})},ene=e=>({"United States":"USD",India:"INR","United Kingdom":"GBP",Canada:"CAD",Australia:"AUD",Germany:"EUR",France:"EUR",Singapore:"SGD",Japan:"JPY",China:"CNY",Brazil:"BRL",Mexico:"MXN","South Africa":"ZAR",Nigeria:"NGN",Kenya:"KES",Egypt:"EGP",UAE:"AED","Saudi Arabia":"SAR",Israel:"ILS"})[e]||"USD",tne=({onRegister:e,onNavigateToLogin:t,onNavigateToLanding:r})=>{const[a,s]=_.useState("basic"),[i,l]=_.useState(()=>{const v=localStorage.getItem("registrationData");if(v){const x=JSON.parse(v);return s("documents"),x}return null}),u=v=>{localStorage.setItem("registrationData",JSON.stringify(v)),l(v),s("documents")},d=()=>{s("basic"),l(null),localStorage.removeItem("registrationData")},f=async(v,x,j,b)=>{const A=new Promise((S,T)=>{setTimeout(()=>T(new Error("Registration timed out after 60 seconds. Please try again.")),6e4)});try{localStorage.removeItem("registrationData"),console.log(" Starting optimized registration process..."),await Promise.race([m(v,x,j,b),A])}catch(S){throw console.error("Registration error:",S),S}},m=async(v,x,j,b)=>{try{const A=[];if(x.govId&&A.push(hs.uploadVerificationDocument(x.govId,v.email,"government-id").then(q=>({type:"govId",result:q}))),x.roleSpecific){const q=g(v.role);A.push(hs.uploadVerificationDocument(x.roleSpecific,v.email,q).then(se=>({type:"roleSpecific",result:se})))}x.license&&v.role==="Investment Advisor"&&A.push(hs.uploadVerificationDocument(x.license,v.email,"financial-advisor-license").then(q=>({type:"license",result:q}))),x.logo&&v.role==="Investment Advisor"&&A.push(hs.uploadVerificationDocument(x.logo,v.email,"company-logo").then(q=>({type:"logo",result:q}))),console.log(` Uploading ${A.length} files in parallel...`);const S=await Promise.all(A);let T="",E="",D="",L="";S.forEach(({type:q,result:se})=>{if(se.success&&se.url)switch(q){case"govId":T=se.url;break;case"roleSpecific":E=se.url;break;case"license":D=se.url;break;case"logo":L=se.url;break}}),console.log(" All file uploads completed");const{data:{user:F},error:z}=await br.supabase.auth.getUser();if(z||!F)throw new Error("User not authenticated");const M={government_id:T,ca_license:E,verification_documents:[T,E].filter(Boolean),country:b,updated_at:new Date().toISOString()};v.role==="Investment Advisor"&&(D&&(M.financial_advisor_license_url=D),L&&(M.logo_url=L),M.verification_documents=[T,E,D,L].filter(Boolean)),investmentAdvisorCode&&investmentAdvisorCode.trim()&&(M.investment_advisor_code=investmentAdvisorCode.trim()),console.log("Updating user profile with data:",M),console.log("User ID:",F.id);const{data:U,error:oe}=await br.supabase.from("users").update(M).eq("id",F.id).select().single();if(oe)throw console.error("Update error:",oe),new Error(`Failed to update user profile: ${oe.message}`);if(v.role==="Startup")try{console.log(" Setting up startup and founders...");const q={name:v.startupName||`${v.name}'s Startup`,investment_type:"Seed",investment_value:0,equity_allocation:0,current_valuation:0,compliance_status:"Pending",sector:"Technology",total_funding:0,total_revenue:0,registration_date:new Date().toISOString().split("T")[0],user_id:F.id,country_of_registration:b,currency:ene(b)};investmentAdvisorCode&&investmentAdvisorCode.trim()&&(q.investment_advisor_code=investmentAdvisorCode.trim());const{data:se,error:J}=await br.supabase.from("startups").upsert(q,{onConflict:"name",ignoreDuplicates:!1}).select().single();if(J)throw console.error("Startup upsert error:",J),new Error(`Failed to create/update startup: ${J.message}`);const Q=se==null?void 0:se.id;if(console.log(" Startup created/updated:",Q),Q&&j.length>0){console.log(` Adding ${j.length} founders...`);const ae=j.map(de=>({startup_id:Q,name:de.name,email:de.email,equity_percentage:de.equity||0})),{error:he}=await br.supabase.from("founders").upsert(ae,{onConflict:"startup_id,email",ignoreDuplicates:!1});if(he)throw console.error("Founders upsert error:",he),new Error(`Failed to create/update founders: ${he.message}`);console.log(" Founders added successfully")}}catch(q){throw console.error("Error handling startup/founders:",q),q}const R={id:U.id,email:U.email,name:U.name,role:U.role,startup_name:U.startup_name,investor_code:U.investor_code,ca_code:U.ca_code,cs_code:U.cs_code,registration_date:U.registration_date,phone:U.phone,address:U.address,city:U.city,state:U.state,country:U.country,company:U.company,government_id:U.government_id,ca_license:U.ca_license,verification_documents:U.verification_documents,profile_photo_url:U.profile_photo_url,is_profile_complete:!0,investment_advisor_code:U.investment_advisor_code,logo_url:U.logo_url,proof_of_business_url:U.proof_of_business_url,financial_advisor_license_url:U.financial_advisor_license_url};e(R,v.role==="Startup"?j:[],v.role==="Startup"?v.startupName:void 0,b)}catch(A){throw console.error("Registration error:",A),A}},g=v=>{switch(v){case"Investor":return"pan-card";case"Startup":return"company-registration";case"CA":return"ca-license";case"CS":return"cs-license";case"Startup Facilitation Center":return"org-registration";case"Investment Advisor":return"financial-advisor-license";default:return"document"}};return a==="documents"&&i?n.jsx(Qae,{userData:i,onComplete:f,onBack:d}):n.jsx(Jae,{onEmailVerified:u,onNavigateToLogin:t,onNavigateToLanding:r})};class rne{async getAvailableCountries(){try{const t=await an.getCountries(),r=[];for(const a of t){const[s,i]=await Promise.all([an.getCATypeByCountry(a.country_code),an.getCSTypeByCountry(a.country_code)]);r.push({country_code:a.country_code,country_name:a.country_name,ca_type:s,cs_type:i})}return r}catch(t){return console.error("Error fetching available countries:",t),[]}}async getCountryComplianceInfo(t){try{const a=(await an.getCountries()).find(l=>l.country_code===t);if(!a)return null;const[s,i]=await Promise.all([an.getCATypeByCountry(t),an.getCSTypeByCountry(t)]);return{country_code:t,country_name:a.country_name,ca_type:s,cs_type:i}}catch(r){return console.error("Error fetching country compliance info:",r),null}}async getComplianceRulesForUser(t,r){try{return await an.getRulesByCountryAndCompanyType(t,r)}catch(a){return console.error("Error fetching compliance rules for user:",a),[]}}async getCompanyTypesForCountry(t){try{return await an.getCompanyTypesByCountry(t)}catch(r){return console.error("Error fetching company types for country:",r),[]}}async validateUserComplianceProfile(t){const r=[];try{const a=await this.getCountryComplianceInfo(t.country);return a?((await this.getCompanyTypesForCountry(t.country)).includes(t.company_type)||r.push("Invalid company type for selected country"),t.ca_type&&a.ca_type&&t.ca_type!==a.ca_type&&r.push(`CA type must be "${a.ca_type}" for ${a.country_name}`),t.cs_type&&a.cs_type&&t.cs_type!==a.cs_type&&r.push(`CS type must be "${a.cs_type}" for ${a.country_name}`),{valid:r.length===0,errors:r}):(r.push("Invalid country selected"),{valid:!1,errors:r})}catch(a){return console.error("Error validating user compliance profile:",a),{valid:!1,errors:["Error validating compliance profile"]}}}async getUserComplianceDashboard(t){try{const[r,a]=await Promise.all([this.getCountryComplianceInfo(t.country),this.getComplianceRulesForUser(t.country,t.company_type)]);return{compliance_rules:a,ca_type:(r==null?void 0:r.ca_type)||null,cs_type:(r==null?void 0:r.cs_type)||null,country_name:(r==null?void 0:r.country_name)||t.country}}catch(r){return console.error("Error fetching user compliance dashboard:",r),{compliance_rules:[],ca_type:null,cs_type:null,country_name:t.country}}}}const ane=new rne,xk=({onNavigateToRegister:e,onNavigateToDashboard:t})=>{const[r,a]=_.useState(null),[s,i]=_.useState([]),[l,u]=_.useState(null),[d,f]=_.useState({govId:null,roleSpecific:null,license:null,logo:null}),[m,g]=_.useState([{id:"1",name:"",email:"",shares:0,equity:0}]),[v,x]=_.useState({country:"United States",companyType:"C-Corporation",registrationDate:new Date().toISOString().split("T")[0],caServiceCode:"",csServiceCode:"",currency:"USD"}),[j,b]=_.useState({totalShares:1e6,pricePerShare:.01,esopReservedShares:1e4}),A=(H,W)=>{if(H>0&&W>=0&&H>=W){const B=H-W,ee=m.reduce((X,ge)=>X+(ge.shares||0),0);m.length===1&&(ee===0||m[0].shares===0)&&g(X=>X.map((ge,be)=>be===0?{...ge,shares:B}:ge))}},[S,T]=_.useState([]),[E,D]=_.useState([]),[L,F]=_.useState(!1),[z,M]=_.useState(null),[U,oe]=_.useState(!0),[R,q]=_.useState(!1),[se,J]=_.useState(!1),[Q,ae]=_.useState({}),[he,de]=_.useState([]),_e=Wc.useMemo(()=>{if(console.log(" Computing company types for country:",v.country),console.log(" Current rules map:",Q),!v.country)return[];let H=v.country;if(v.country&&!Q[v.country]){for(const[ee,X]of Object.entries(Q))if(X.country_name===v.country){H=ee;break}}const W=Q[H];if(console.log(" Country data for",H,":",W),!W||!W.company_types)return console.log(" No company types found for country:",H),[];const B=Object.keys(W.company_types);return console.log(" Company types for",H,":",B),B},[Q,v.country]);_.useEffect(()=>{Y()},[]),_.useEffect(()=>{const H=setTimeout(()=>{q(!0)},100);return()=>clearTimeout(H)},[]),_.useEffect(()=>{const H=async()=>{try{console.log(" Loading compliance rules for company types...");const B=await an.getAllRules();console.log(" Loaded compliance rules:",B.length,"rules");const ee={},X=[];B.forEach(ge=>{ee[ge.country_code]||(ee[ge.country_code]={country_name:ge.country_name,company_types:{}});const be=ge.company_type;be&&!be.toLowerCase().includes("setup")&&!be.toLowerCase().includes("ca type")&&!be.toLowerCase().includes("cs type")&&be!==ge.ca_type&&be!==ge.cs_type&&(ee[ge.country_code].company_types[be]||(ee[ge.country_code].company_types[be]=[]),ee[ge.country_code].company_types[be].push({id:ge.id,name:ge.compliance_name,description:ge.compliance_description,frequency:ge.frequency,verification_required:ge.verification_required})),ge.country_code&&ge.country_code!=="default"&&!X.includes(ge.country_code)&&X.push(ge.country_code)}),console.log(" Built rules map:",ee),console.log(" Available countries:",X),ae(ee),de(X.sort())}catch(B){console.error(" Error loading compliance rules:",B)}},W=async()=>{try{const B=await ane.getAvailableCountries();i(B)}catch(B){console.error("Error loading country compliance info:",B)}};H(),W()},[]),_.useEffect(()=>{if(v.country&&v.companyType){const H=_e;H.length>0&&!H.includes(v.companyType)&&(console.log(` Auto-updating company type: ${v.companyType} -> ${H[0]} for country: ${v.country}`),x(W=>({...W,companyType:H[0]})))}},[v.country,_e]),_.useEffect(()=>{if(v.country){const H=nf(v.country);H!==v.currency&&(console.log(` Auto-updating currency: ${v.currency} -> ${H} for country: ${v.country}`),x(W=>({...W,currency:H})))}},[v.country]),_.useEffect(()=>{if(v.country){const H=s.find(W=>W.country_name===v.country);if(H&&(H.ca_type||H.cs_type))u(H),console.log(` Auto-updating CA/CS types for country: ${v.country}`,H);else{const B={"United States":"US",India:"IN","United Kingdom":"GB",Canada:"CA",Australia:"AU",Germany:"DE",France:"FR",Singapore:"SG",Japan:"JP",China:"CN",Brazil:"BR",Mexico:"MX","South Africa":"ZA",Nigeria:"NG",Kenya:"KE",Egypt:"EG",UAE:"AE","Saudi Arabia":"SA",Israel:"IL",Austria:"AT","Hong Kong":"HK",Netherlands:"NL",Finland:"FI",Greece:"GR",Vietnam:"VN",Myanmar:"MM",Azerbaijan:"AZ",Serbia:"RS",Monaco:"MC",Pakistan:"PK",Philippines:"PH",Jordan:"JO",Georgia:"GE",Belarus:"BY",Armenia:"AM",Bhutan:"BT","Sri Lanka":"LK",Russia:"RU",Italy:"IT",Spain:"ES",Portugal:"PT",Belgium:"BE",Switzerland:"CH",Sweden:"SE",Norway:"NO",Denmark:"DK",Ireland:"IE","New Zealand":"NZ","South Korea":"KR",Thailand:"TH",Malaysia:"MY",Indonesia:"ID",Bangladesh:"BD",Nepal:"NP"}[v.country];if(B){const ee=Fk(B),X={country_code:B,country_name:v.country,ca_type:ee.caTitle,cs_type:ee.csTitle};u(X),console.log(` Auto-updating CA/CS types for country: ${v.country} (code: ${B})`,ee)}else u(null),x(ee=>({...ee,caServiceCode:"",csServiceCode:""})),console.log(` No CA/CS mapping found for country: ${v.country}`)}}},[v.country,s]);const Y=async()=>{var H,W,B;try{const{data:{user:ee},error:X}=await br.supabase.auth.getUser();if(X||!ee){e();return}if(await br.isProfileComplete(ee.id)){t();return}const{data:be}=await br.supabase.from("users").select("*").eq("id",ee.id).single();a({id:ee.id,email:ee.email,name:(be==null?void 0:be.name)||((H=ee.user_metadata)==null?void 0:H.name)||"User",role:(be==null?void 0:be.role)||((W=ee.user_metadata)==null?void 0:W.role)||"Investor",startupName:(be==null?void 0:be.startup_name)||((B=ee.user_metadata)==null?void 0:B.startupName)})}catch(ee){console.error("Error checking user:",ee),e()}finally{oe(!1)}},ye=(H,W)=>{var ee;const B=(ee=H.target.files)==null?void 0:ee[0];B&&f(X=>({...X,[W]:B}))},P=()=>{const H=(m.length+1).toString();g(W=>[...W,{id:H,name:"",email:"",shares:0,equity:0}])},Z=H=>{m.length>1&&g(W=>W.filter(B=>B.id!==H))},ce=(H,W,B)=>{g(ee=>ee.map(X=>X.id===H?{...X,[W]:B}:X))},je=()=>{const H=(S.length+1).toString();T(W=>[...W,{id:H,country:"",companyType:"",registrationDate:"",caCode:"",csCode:""}])},ke=H=>{T(W=>W.filter(B=>B.id!==H))},De=(H,W,B)=>{T(ee=>ee.map(X=>X.id===H?{...X,[W]:B}:X))},Ee=H=>{if(!H)return[];const W=Q[H];return!W||!W.company_types?[]:Object.keys(W.company_types)},ne=async(H,W)=>{const B=s.find(ee=>ee.country_code===W);if(B){const ee=Q[W],X=ee!=null&&ee.company_types?Object.keys(ee.company_types):[],ge=X.length>0?X[0]:"";T(be=>be.map($e=>$e.id===H?{...$e,country:W,companyType:ge,caCode:B.ca_type||"",csCode:B.cs_type||""}:$e))}},Ne=H=>{switch(H){case"Investor":return"PAN Card";case"Startup":return"Proof of Company Registration";case"CA":return"Copy of CA License";case"CS":return"Copy of CS License";case"Startup Facilitation Center":return"Proof of Organization Registration";case"Investment Advisor":return"Proof of Firm Registration";default:return"Document"}},le=async()=>{try{await br.signOut(),e()}catch(H){console.error("Error during logout:",H)}},xe=async H=>{var W,B,ee,X,ge,be,$e,Ze;if(H.preventDefault(),F(!0),M(null),!v.country){M("Country selection is required"),F(!1);return}if(!d.govId){M("Government ID is required"),F(!1);return}if(!d.roleSpecific){M(`${Ne(r.role)} is required`),F(!1);return}if(r.role==="Investment Advisor"){if(!d.license){M("License (As per country regulations) is required for Investment Advisors"),F(!1);return}if(!d.logo){M("Company logo is required for Investment Advisors"),F(!1);return}}if(r.role==="Startup"){if(m.filter(at=>!at.name.trim()||!at.email.trim()).length>0){M("Please fill in all founder details"),F(!1);return}if(m.filter(at=>!at.shares||at.shares<=0).length>0){M("Please specify the number of shares for all founders"),F(!1);return}if(j.totalShares<=0||j.pricePerShare<=0){M("Please enter valid share information"),F(!1);return}const Le=m.reduce((at,Nt)=>at+(Nt.shares||0),0),ft=j.esopReservedShares||0,kt=Le+ft;if(kt>j.totalShares){M(`Total allocated shares (${kt.toLocaleString()}) cannot exceed total authorized shares (${j.totalShares.toLocaleString()}). Please reduce founder shares or ESOP reserved shares.`),F(!1);return}const Mt=m.reduce((at,Nt)=>at+(Nt.equity||0),0);if(Mt>100){M(`Total founder equity (${Mt.toFixed(1)}%) exceeds 100%. Please adjust founder equity percentages.`),F(!1);return}if(m.filter(at=>!at.equity||at.equity<=0).length>0){M("Please specify equity percentage for all founders"),F(!1);return}}try{let pe="",V="";if(console.log(" Starting file uploads...",{govId:d.govId,roleSpecific:d.roleSpecific}),d.govId){console.log(" Uploading government ID...");const at=await hs.uploadVerificationDocument(d.govId,r.email,"government-id");at.success&&at.url?(pe=at.url,console.log(" Government ID uploaded successfully:",pe)):console.error(" Government ID upload failed:",at)}if(d.roleSpecific){const at=Ne(r.role);console.log(" Uploading role-specific document:",at);const Nt=await hs.uploadVerificationDocument(d.roleSpecific,r.email,at);Nt.success&&Nt.url?(V=Nt.url,console.log(" Role-specific document uploaded successfully:",V)):console.error(" Role-specific document upload failed:",Nt)}let Le="",ft="";if(r.role==="Investment Advisor"){if(d.license){console.log(" Uploading license document...");const at=await hs.uploadVerificationDocument(d.license,r.email,"license");at.success&&at.url?(Le=at.url,console.log(" License document uploaded successfully:",Le)):console.error(" License document upload failed:",at)}if(d.logo){console.log(" Uploading company logo...");const at=await hs.uploadVerificationDocument(d.logo,r.email,"logo");at.success&&at.url?(ft=at.url,console.log(" Company logo uploaded successfully:",ft)):console.error(" Company logo upload failed:",at)}}console.log(" Upload results:",{governmentIdUrl:pe,roleSpecificUrl:V,licenseUrl:Le,logoUrl:ft});const kt=[pe,V];Le&&kt.push(Le),ft&&kt.push(ft),console.log(" Updating user profile in database...",{userId:r.id,governmentId:pe,caLicense:V,verificationDocuments:kt});const Mt={government_id:pe,ca_license:V,verification_documents:kt,logo_url:ft||null,financial_advisor_license_url:Le||null,updated_at:new Date().toISOString()},{error:Lt}=await br.supabase.from("users").update(Mt).eq("id",r.id);if(Lt)throw console.error(" Database update failed:",Lt),new Error("Failed to update user profile");if(console.log(" User profile updated successfully in database"),r.role==="Startup")try{console.log(" Looking for existing startup for user:",r.id);const{data:at,error:Nt}=await br.supabase.from("startups").select("*").eq("user_id",r.id);if(Nt)throw console.error(" Error finding existing startup:",Nt),Nt;let Ie;if(at&&at.length>0)console.log(" Found existing startup, updating with profile data"),Ie=at[0];else{console.log(" No existing startup found, creating new one");const{data:Tt,error:mt}=await br.supabase.from("startups").insert({name:r.startupName||`${r.name}'s Startup`,investment_type:"Seed",investment_value:0,equity_allocation:0,current_valuation:0,compliance_status:"Pending",sector:"Technology",total_funding:0,total_revenue:0,registration_date:v.registrationDate,user_id:r.id}).select().single();if(mt)throw console.error(" Error creating startup:",mt),mt;Ie=Tt}if(Ie){if(m.length>0){const Rt=m.map(hr=>({startup_id:Ie.id,name:hr.name,email:hr.email,shares:hr.shares||0,equity_percentage:hr.equity||0}));console.log(" Saving founders data:",Rt);const{data:Vt,error:Qt}=await br.supabase.from("founders").insert(Rt).select();if(Qt)throw console.error(" Error saving founders:",Qt),Qt;console.log(" Founders saved successfully:",Vt)}const Tt={country:v.country,country_of_registration:v.country,company_type:v.companyType,registration_date:v.registrationDate,ca_service_code:v.caServiceCode||null,cs_service_code:v.csServiceCode||null,currency:v.currency,total_shares:j.totalShares,price_per_share:j.pricePerShare,esop_reserved_shares:j.esopReservedShares};console.log(" Updating startup with profile data:",Tt);const{data:mt,error:Et}=await br.supabase.from("startups").update(Tt).eq("id",Ie.id).select();if(Et)throw console.error(" Error updating startup with profile data:",Et),Et;console.log(" Startup updated with profile data successfully:",mt);try{console.log(" Generating compliance tasks for startup after profile save...");const{complianceRulesIntegrationService:Rt}=await Ai(async()=>{const{complianceRulesIntegrationService:Vt}=await Promise.resolve().then(()=>pee);return{complianceRulesIntegrationService:Vt}},void 0);await Rt.forceRegenerateComplianceTasks(Ie.id),console.log(" Compliance tasks generated successfully")}catch(Rt){console.error(" Error generating compliance tasks:",Rt)}console.log(" Syncing shares data to startup_shares table...");const{data:zt,error:ur}=await br.supabase.from("startup_shares").upsert({startup_id:Ie.id,total_shares:j.totalShares,price_per_share:j.pricePerShare,esop_reserved_shares:j.esopReservedShares},{onConflict:"startup_id"}).select();if(ur?console.error(" Error syncing shares data to startup_shares table:",ur):console.log(" Shares data synced to startup_shares table successfully:",zt),console.log(" Updated startup data for profile tab:",{id:(W=mt[0])==null?void 0:W.id,country:(B=mt[0])==null?void 0:B.country,company_type:(ee=mt[0])==null?void 0:ee.company_type,registration_date:(X=mt[0])==null?void 0:X.registration_date,currency:(ge=mt[0])==null?void 0:ge.currency,total_shares:(be=mt[0])==null?void 0:be.total_shares,price_per_share:($e=mt[0])==null?void 0:$e.price_per_share,esop_reserved_shares:(Ze=mt[0])==null?void 0:Ze.esop_reserved_shares}),console.log(" Shares data already stored in startups table"),S.length>0){const Rt=S.filter(Vt=>Vt.country&&Vt.companyType&&Vt.registrationDate).map(Vt=>({startup_id:Ie.id,country:Vt.country,company_type:Vt.companyType,registration_date:Vt.registrationDate,ca_code:Vt.caCode||null,cs_code:Vt.csCode||null}));Rt.length>0&&await br.supabase.from("subsidiaries").insert(Rt)}if(E.length>0){const Rt=E.filter(Vt=>Vt.country&&Vt.companyType&&Vt.startDate).map(Vt=>({startup_id:Ie.id,country:Vt.country,company_type:Vt.companyType,start_date:Vt.startDate}));Rt.length>0&&await br.supabase.from("international_operations").insert(Rt)}}}catch(at){console.error("Error creating startup:",at)}console.log(" Registration complete! Redirecting to dashboard..."),t()}catch(pe){M(pe.message||"An error occurred")}finally{F(!1)}};return U?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:n.jsx(tt,{className:"w-full max-w-md",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-primary mx-auto"}),n.jsx("p",{className:"mt-4 text-slate-600",children:"Checking your account..."})]})})}):r?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 py-12",children:n.jsxs(tt,{className:"w-full max-w-2xl",children:[n.jsx("div",{className:"relative",children:n.jsx("div",{className:"absolute top-0 right-0",children:n.jsxs(Oe,{type:"button",variant:"outline",size:"sm",onClick:le,className:"flex items-center gap-2 text-slate-600 hover:text-slate-800",children:[n.jsx(Rv,{className:"h-4 w-4"}),"Logout"]})})}),n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("img",{src:ou,alt:"TrackMyStartup",className:"mx-auto h-40 w-40"}),n.jsx("h2",{className:"mt-4 text-3xl font-bold tracking-tight text-slate-900",children:"Complete Your Registration"}),n.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["TrackMyStartup - Welcome, ",r.name,"! Please upload your verification documents to complete your profile."]})]}),n.jsxs("form",{onSubmit:xe,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(La,{className:"h-5 w-5 mr-2"}),"Verification Documents"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Government ID (Passport, Driver's License, etc.)"}),n.jsx(At,{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:H=>ye(H,"govId"),required:!0}),d.govId&&n.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[" ",d.govId.name," selected"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:Ne(r.role)}),n.jsx(At,{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:H=>ye(H,"roleSpecific"),required:!0}),d.roleSpecific&&n.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[" ",d.roleSpecific.name," selected"]})]}),r.role==="Investment Advisor"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"License (As per country regulations)"}),n.jsx(At,{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:H=>ye(H,"license"),required:!0}),d.license&&n.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[" ",d.license.name," selected"]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Upload your financial advisor license (if applicable)"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Logo"}),n.jsx(At,{type:"file",accept:".jpg,.jpeg,.png,.svg",onChange:H=>ye(H,"logo"),required:!0}),d.logo&&n.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[" ",d.logo.name," selected"]}),n.jsxs("div",{className:"text-xs text-slate-500 mt-1 space-y-1",children:[n.jsx("p",{children:"Upload your company logo (JPG, PNG, or SVG format)"}),n.jsxs("div",{className:"bg-blue-50 p-2 rounded border border-blue-200",children:[n.jsx("p",{className:"font-medium text-blue-800 mb-1",children:"Logo Specifications:"}),n.jsxs("ul",{className:"text-blue-700 space-y-0.5",children:[n.jsx("li",{children:" Recommended size: 64x64 pixels (square format)"}),n.jsx("li",{children:" Maximum file size: 2MB"}),n.jsx("li",{children:" Supported formats: JPG, PNG, SVG"}),n.jsx("li",{children:" Logo will be displayed as 64x64px with white background"}),n.jsx("li",{children:" For best results, use a square logo or center your logo in a square canvas"})]})]})]})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(Sw,{className:"h-5 w-5 mr-2"}),"Country Information"]}),n.jsx("p",{className:"text-sm text-slate-600",children:"Select your country of operation."}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Country"}),n.jsxs("select",{value:v.country,onChange:H=>x(W=>({...W,country:H.target.value})),className:"w-full bg-white border border-slate-300 rounded-md px-3 py-2 text-slate-900 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[n.jsx("option",{value:"",children:"Select Country"}),n.jsx("option",{value:"United States",children:"United States"}),n.jsx("option",{value:"India",children:"India"}),n.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),n.jsx("option",{value:"Canada",children:"Canada"}),n.jsx("option",{value:"Australia",children:"Australia"}),n.jsx("option",{value:"Germany",children:"Germany"}),n.jsx("option",{value:"France",children:"France"}),n.jsx("option",{value:"Singapore",children:"Singapore"}),n.jsx("option",{value:"Japan",children:"Japan"}),n.jsx("option",{value:"China",children:"China"}),n.jsx("option",{value:"Brazil",children:"Brazil"}),n.jsx("option",{value:"Mexico",children:"Mexico"}),n.jsx("option",{value:"South Africa",children:"South Africa"}),n.jsx("option",{value:"Nigeria",children:"Nigeria"}),n.jsx("option",{value:"Kenya",children:"Kenya"}),n.jsx("option",{value:"Egypt",children:"Egypt"}),n.jsx("option",{value:"UAE",children:"UAE"}),n.jsx("option",{value:"Saudi Arabia",children:"Saudi Arabia"}),n.jsx("option",{value:"Israel",children:"Israel"}),n.jsx("option",{value:"Other",children:"Other"})]})]})]}),r.role==="Startup"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(rc,{className:"h-5 w-5 mr-2"}),"Company Profile"]}),n.jsx("p",{className:"text-sm text-slate-600",children:"Provide your company's basic information and structure."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Type"}),n.jsx("select",{value:v.companyType,onChange:H=>x(W=>({...W,companyType:H.target.value})),className:"w-full bg-white border border-slate-300 rounded-md px-3 py-2 text-slate-900 focus:ring-blue-500 focus:border-blue-500",required:!0,children:_e.length>0?_e.map(H=>n.jsx("option",{value:H,children:H},H)):n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"C-Corporation",children:"C-Corporation"}),n.jsx("option",{value:"S-Corporation",children:"S-Corporation"}),n.jsx("option",{value:"LLC",children:"LLC"}),n.jsx("option",{value:"Partnership",children:"Partnership"}),n.jsx("option",{value:"Sole Proprietorship",children:"Sole Proprietorship"}),n.jsx("option",{value:"Private Limited",children:"Private Limited"}),n.jsx("option",{value:"Public Limited",children:"Public Limited"}),n.jsx("option",{value:"Other",children:"Other"})]})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Currency"}),n.jsxs("select",{value:v.currency,onChange:H=>x(W=>({...W,currency:H.target.value})),className:"w-full bg-white border border-slate-300 rounded-md px-3 py-2 text-slate-900 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[n.jsx("option",{value:"USD",children:"USD - US Dollar"}),n.jsx("option",{value:"EUR",children:"EUR - Euro"}),n.jsx("option",{value:"GBP",children:"GBP - British Pound"}),n.jsx("option",{value:"INR",children:"INR - Indian Rupee"}),n.jsx("option",{value:"CAD",children:"CAD - Canadian Dollar"}),n.jsx("option",{value:"AUD",children:"AUD - Australian Dollar"}),n.jsx("option",{value:"JPY",children:"JPY - Japanese Yen"}),n.jsx("option",{value:"CHF",children:"CHF - Swiss Franc"}),n.jsx("option",{value:"SGD",children:"SGD - Singapore Dollar"}),n.jsx("option",{value:"CNY",children:"CNY - Chinese Yuan"})]})]}),n.jsx(At,{label:"Registration Date",type:"date",value:v.registrationDate,onChange:H=>x(W=>({...W,registrationDate:H.target.value})),required:!0})]})]}),r.role==="Startup"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(Nw,{className:"h-5 w-5 mr-2"}),"Share Information"]}),n.jsx("p",{className:"text-sm text-slate-600",children:"Define your company's share structure and equity distribution."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(At,{label:"Total Shares Issued",type:"number",min:"1",value:j.totalShares,onChange:H=>{const W=parseInt(H.target.value)||0;b(B=>({...B,totalShares:W})),A(W,j.esopReservedShares),R&&W>0&&g(B=>B.map(ee=>{if(ee.shares>0){const X=ee.shares/W*100,ge=Math.round(X*100)/100;return{...ee,equity:ge}}return ee}))},required:!0}),n.jsx(At,{label:`Price Per Share (${v.currency})`,type:"number",min:"0.01",step:"0.01",value:j.pricePerShare,onChange:H=>b(W=>({...W,pricePerShare:parseFloat(H.target.value)||0})),required:!0}),n.jsx(At,{label:"ESOP Reserved Shares",type:"number",min:"0",value:j.esopReservedShares,onChange:H=>{const W=parseInt(H.target.value)||0;b(B=>({...B,esopReservedShares:W})),A(j.totalShares,W)},required:!0})]})]}),r.role==="Startup"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(bn,{className:"h-5 w-5 mr-2"}),"Founder Information"]}),n.jsx("p",{className:"text-sm text-slate-600",children:"Please provide the details of all founders."}),n.jsxs("div",{className:"space-y-4",children:[m.map((H,W)=>n.jsxs("div",{className:"p-4 border border-slate-200 rounded-md",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h4",{className:"font-medium text-slate-900",children:["Founder ",W+1]}),m.length>1&&n.jsx("button",{type:"button",onClick:()=>Z(H.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(At,{label:"Name",value:H.name,onChange:B=>ce(H.id,"name",B.target.value),required:!0}),n.jsx(At,{label:"Email",type:"email",value:H.email,onChange:B=>ce(H.id,"email",B.target.value),required:!0}),n.jsx(At,{label:"Number of Shares",type:"number",min:"0",value:H.shares||0,onChange:B=>{const ee=parseInt(B.target.value)||0;if(ce(H.id,"shares",ee),R&&j.totalShares>0&&!se){J(!0);const X=ee/j.totalShares*100,ge=Math.round(X*100)/100;ce(H.id,"equity",ge),setTimeout(()=>J(!1),10)}},required:!0}),n.jsx(At,{label:R?"Equity (%) (auto-calculated)":"Equity (%)",type:"number",min:"0",max:"100",step:"0.1",value:H.equity?Number(H.equity).toFixed(2):0,onChange:B=>{const ee=parseFloat(B.target.value)||0;if(ce(H.id,"equity",ee),R&&j.totalShares>0&&ee>0&&!se){J(!0);const X=ee/100*j.totalShares;if(X>=1){const ge=Math.round(X);ce(H.id,"shares",ge)}setTimeout(()=>J(!1),10)}},required:!0,readOnly:!1})]})]},H.id)),r.role==="Startup"&&m.length>0&&j.totalShares>0&&n.jsxs("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg border",children:[n.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-3",children:"Shares Allocation Summary"}),(()=>{const H=m.reduce((Ze,pe)=>Ze+(pe.shares||0),0),W=j.esopReservedShares||0,B=H+W,ee=j.totalShares-B,X=B>j.totalShares,ge=m.reduce((Ze,pe)=>Ze+(pe.equity||0),0),be=j.totalShares>0?W/j.totalShares*100:0,$e=100-ge-be;return n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Total Shares:"}),n.jsx("span",{className:"font-medium",children:j.totalShares.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Founder Shares:"}),n.jsxs("span",{className:H>j.totalShares?"text-red-600 font-medium":"text-slate-700",children:[H.toLocaleString()," (",ge.toFixed(1),"%)"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"ESOP Reserved:"}),n.jsxs("span",{className:"text-slate-700",children:[W.toLocaleString()," (",be.toFixed(1),"%)"]})]}),n.jsxs("div",{className:"flex justify-between font-medium pt-2 border-t border-slate-200",children:[n.jsx("span",{className:"text-slate-700",children:"Available for Investment:"}),n.jsxs("span",{className:ee<0?"text-red-600":ee===0?"text-yellow-600":"text-green-600",children:[ee.toLocaleString()," (",$e.toFixed(1),"%)"]})]}),X&&n.jsxs("div",{className:"text-red-600 text-sm font-medium mt-3 p-3 bg-red-50 border border-red-200 rounded",children:[" Total allocated shares exceed total shares by ",(B-j.totalShares).toLocaleString(),n.jsx("br",{}),n.jsx("span",{className:"text-xs",children:"Please reduce founder shares or increase total shares."})]}),ge>100&&n.jsxs("div",{className:"text-red-600 text-sm font-medium mt-3 p-3 bg-red-50 border border-red-200 rounded",children:[" Total founder equity exceeds 100% (",ge.toFixed(1),"%)",n.jsx("br",{}),n.jsx("span",{className:"text-xs",children:"Please adjust founder equity percentages."})]})]})})()]}),n.jsxs(Oe,{type:"button",onClick:P,variant:"outline",className:"w-full",children:[n.jsx(bn,{className:"h-4 w-4 mr-2"}),"Add Another Founder"]})]})]}),r.role==="Startup"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(sa,{className:"h-5 w-5 mr-2"}),"Service Provider Codes"]}),n.jsx("p",{className:"text-sm text-slate-600",children:"Enter the appropriate professional service types for your country. Suggestions are provided based on your selected country."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CA Type"}),n.jsx("input",{type:"text",value:v.caServiceCode||"",onChange:H=>x(W=>({...W,caServiceCode:H.target.value})),placeholder:"Enter CA type for your country",className:"w-full border border-slate-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),(l==null?void 0:l.ca_type)&&n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Suggested: ",l.ca_type]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CS Type"}),n.jsx("input",{type:"text",value:v.csServiceCode||"",onChange:H=>x(W=>({...W,csServiceCode:H.target.value})),placeholder:"Enter CS type for your country",className:"w-full border border-slate-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),(l==null?void 0:l.cs_type)&&n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Suggested: ",l.cs_type]})]})]})]}),r.role==="Startup"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[n.jsx(Sw,{className:"h-5 w-5 mr-2"}),"Subsidiaries (Optional)"]}),n.jsx("p",{className:"text-sm text-slate-600",children:"Add any subsidiaries or international operations."}),n.jsxs("div",{className:"space-y-4",children:[S.map((H,W)=>n.jsxs("div",{className:"p-4 border border-slate-200 rounded-md",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h4",{className:"font-medium text-slate-900",children:["Subsidiary ",W+1]}),n.jsxs("button",{type:"button",onClick:()=>ke(H.id),className:"text-red-600 hover:text-red-800 text-sm flex items-center",children:[n.jsx(Ma,{className:"h-4 w-4 mr-1"}),"Remove"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Country"}),n.jsxs("select",{value:H.country,onChange:B=>ne(H.id,B.target.value),className:"w-full bg-white border border-slate-300 rounded-md px-3 py-2 text-slate-900 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Select Country"}),s.map(B=>n.jsx("option",{value:B.country_code,children:B.country_name},B.country_code))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Type"}),n.jsxs("select",{value:H.companyType,onChange:B=>De(H.id,"companyType",B.target.value),className:"w-full bg-white border border-slate-300 rounded-md px-3 py-2 text-slate-900 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Select Company Type"}),Ee(H.country).map(B=>n.jsx("option",{value:B,children:B},B))]})]}),n.jsx(At,{label:"Registration Date",type:"date",value:H.registrationDate,onChange:B=>De(H.id,"registrationDate",B.target.value)}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CA Type (Auto-populated)"}),n.jsx("input",{type:"text",value:H.caCode||"Select country first",readOnly:!0,className:"w-full bg-slate-50 border border-slate-300 rounded-md px-3 py-2 text-slate-600"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CS Type (Auto-populated)"}),n.jsx("input",{type:"text",value:H.csCode||"Select country first",readOnly:!0,className:"w-full bg-slate-50 border border-slate-300 rounded-md px-3 py-2 text-slate-600"})]})]})]},H.id)),n.jsxs(Oe,{type:"button",onClick:je,variant:"outline",className:"w-full",children:[n.jsx(Wi,{className:"h-4 w-4 mr-2"}),"Add Subsidiary"]})]})]}),z&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:n.jsxs("div",{className:"text-sm text-red-800",children:[n.jsx("strong",{children:"Error:"})," ",z]})}),n.jsx(Oe,{type:"submit",className:"w-full",disabled:L,children:L?"Completing Registration...":"Complete Registration"})]})]})}):null},nne=({onNavigateToLogin:e})=>{const[t,r]=_.useState(""),[a,s]=_.useState(""),[i,l]=_.useState(!1),[u,d]=_.useState(!1),[f,m]=_.useState(!1),[g,v]=_.useState(!1),[x,j]=_.useState(null),[b,A]=_.useState(!1),[S,T]=_.useState({});_.useEffect(()=>{(async()=>{var Q,ae,he,de,_e;console.log("=== RESET PASSWORD SESSION DEBUG ==="),console.log("Full URL:",window.location.href),console.log("Pathname:",window.location.pathname),console.log("Search params:",window.location.search),console.log("Hash:",window.location.hash);const M=new URLSearchParams(window.location.search),U=window.location.hash,oe=M.get("access_token")||(U.includes("access_token=")?(Q=U.split("access_token=")[1])==null?void 0:Q.split("&")[0]:null),R=M.get("refresh_token")||(U.includes("refresh_token=")?(ae=U.split("refresh_token=")[1])==null?void 0:ae.split("&")[0]:null),q=M.get("code")||(U.includes("code=")?(he=U.split("code=")[1])==null?void 0:he.split("&")[0]:null),se=M.get("token")||(U.includes("token=")?(de=U.split("token=")[1])==null?void 0:de.split("&")[0]:null),J=M.get("type")||(U.includes("type=")?(_e=U.split("type=")[1])==null?void 0:_e.split("&")[0]:null);if(console.log("Token extraction results:",{accessToken:oe?`${oe.substring(0,20)}...`:null,refreshToken:R?`${R.substring(0,20)}...`:null,code:q?`${q.substring(0,20)}...`:null,pkceToken:se?`${se.substring(0,20)}...`:null,type:J,hasAccessToken:!!oe,hasRefreshToken:!!R,hasCode:!!q,hasPkceToken:!!se}),oe&&R)try{console.log("Setting session with tokens...");const{data:Y,error:ye}=await br.supabase.auth.setSession({access_token:oe,refresh_token:R});ye?(console.error("Error setting reset password session:",ye),j(`Invalid or expired reset link: ${ye.message}`)):(console.log("Reset password session established successfully:",Y),A(!0),window.history.replaceState({},document.title,window.location.pathname))}catch(Y){console.error("Error handling reset password session:",Y),j(`Invalid or expired reset link: ${Y.message}`)}else if(se){console.log("Found PKCE token, attempting to verify OTP...");try{let Y=!1;try{const{data:ye,error:P}=await br.supabase.auth.verifyOtp({token_hash:se,type:"recovery"});!P&&ye?(console.log("PKCE OTP verified successfully with token_hash:",ye),A(!0),Y=!0,window.history.replaceState({},document.title,window.location.pathname)):console.log("PKCE token_hash approach failed:",P)}catch(ye){console.log("PKCE token_hash approach error:",ye)}if(Y||console.log("Skipping PKCE token approach (requires email), trying other methods..."),!Y){console.log("All PKCE verification approaches failed - the reset link is invalid or expired"),j("Invalid or expired reset link. Please request a new password reset.");return}}catch(Y){console.error("Error handling PKCE token verification:",Y),j(`Invalid or expired reset link: ${Y.message}`)}}else if(q){console.log("Found code parameter, attempting to verify OTP...");try{let Y=!1;try{const{data:ye,error:P}=await br.supabase.auth.verifyOtp({token_hash:q,type:"recovery"});!P&&ye?(console.log("OTP verified successfully with token_hash:",ye),A(!0),Y=!0,window.history.replaceState({},document.title,window.location.pathname)):console.log("token_hash approach failed:",P)}catch(ye){console.log("token_hash approach error:",ye)}if(Y||console.log("Skipping token approach (requires email), trying other methods..."),!Y)try{console.log("Skipping token approach, trying exchangeCodeForSession...")}catch(ye){console.log("token approach error:",ye)}if(!Y)try{const{data:ye,error:P}=await br.supabase.auth.exchangeCodeForSession(q);!P&&ye?(console.log("Code exchanged for session successfully:",ye),A(!0),Y=!0,window.history.replaceState({},document.title,window.location.pathname)):console.log("exchangeCodeForSession failed:",P)}catch(ye){console.log("exchangeCodeForSession error:",ye)}if(!Y)try{const{data:{user:ye},error:P}=await br.supabase.auth.getUser();ye&&!P?(console.log("User session found after code processing:",ye.email),A(!0),Y=!0):console.log("No user session found after code processing:",P)}catch(ye){console.log("Error getting user after code processing:",ye)}if(!Y){console.log("All verification approaches failed - the reset link is invalid or expired"),j("Invalid or expired reset link. Please request a new password reset.");return}Y||j("Invalid or expired reset link. Please request a new password reset.")}catch(Y){console.error("Error handling code verification:",Y),j(`Invalid or expired reset link: ${Y.message}`)}}else if(J==="recovery"){console.log("Found recovery type link, attempting to handle...");try{const{data:{session:Y},error:ye}=await br.supabase.auth.getSession();Y&&!ye?(console.log("Recovery session found:",Y.user.email),A(!0)):(console.log("No recovery session found:",ye),j("Invalid or expired reset link. Please request a new password reset."))}catch(Y){console.error("Error handling recovery session:",Y),j("Invalid or expired reset link. Please request a new password reset.")}}else{console.log("No tokens found, checking existing session...");const{data:{user:Y},error:ye}=await br.supabase.auth.getUser();ye||!Y?(console.log("No existing session found:",ye),window.location.pathname==="/reset-password"?(console.log("Reset password path detected, but no tokens. This might be a Supabase configuration issue."),j("Password reset link configuration issue. Please check your Supabase settings and try requesting a new reset link.")):j("Invalid or expired reset link. Please request a new password reset.")):(console.log("Existing session found for user:",Y.email),A(!0))}})()},[]);const E=z=>z.length<8?"Password must be at least 8 characters long":/(?=.*[a-z])/.test(z)?/(?=.*[A-Z])/.test(z)?/(?=.*\d)/.test(z)?null:"Password must contain at least one number":"Password must contain at least one uppercase letter":"Password must contain at least one lowercase letter",D=()=>{const z={},M=E(t);return M&&(z.password=M),t!==a&&(z.confirmPassword="Passwords do not match"),T(z),Object.keys(z).length===0},L=async z=>{if(z.preventDefault(),!!D()){m(!0),j(null);try{console.log("Attempting password reset...");const{success:M,error:U}=await br.resetPassword(t);if(M)console.log("Password reset successful"),v(!0),setTimeout(()=>{e()},3e3);else{console.error("Password reset failed:",U),console.log("Trying alternative password reset method...");const{data:oe,error:R}=await br.supabase.auth.updateUser({password:t});R?(console.error("Alternative method also failed:",R),j(U||R.message||"Failed to reset password. Please try again.")):(console.log("Alternative method succeeded"),v(!0),setTimeout(()=>{e()},3e3))}}catch(M){console.error("Password reset error:",M),j(M.message||"An unexpected error occurred. Please try again.")}finally{m(!1)}}},F=()=>{e()};return g?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center px-4",children:n.jsxs(tt,{className:"w-full max-w-md text-center",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:n.jsx(sa,{className:"h-6 w-6 text-green-600"})}),n.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Password Reset Successful!"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"Your password has been successfully updated. You can now sign in with your new password."}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-4 text-left mb-6",children:[n.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"What's next?"}),n.jsxs("ul",{className:"text-sm text-green-800 space-y-1",children:[n.jsx("li",{children:" You'll be redirected to the login page"}),n.jsx("li",{children:" Sign in with your new password"}),n.jsx("li",{children:" Your account is now secure"})]})]}),n.jsx(Oe,{onClick:F,className:"w-full",children:"Go to Login"}),n.jsx("p",{className:"text-xs text-slate-500 mt-4",children:"Redirecting automatically in a few seconds..."})]})}):!b&&!x?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center px-4",children:n.jsxs(tt,{className:"w-full max-w-md text-center",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 mb-4",children:n.jsx(Hp,{className:"h-6 w-6 text-blue-600 animate-spin"})}),n.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Preparing Reset"}),n.jsx("p",{className:"text-slate-600",children:"Setting up your password reset session..."})]})}):n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center px-4",children:n.jsxs(tt,{className:"w-full max-w-md",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 mb-4",children:n.jsx(eQ,{className:"h-6 w-6 text-blue-600"})}),n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Reset Your Password"}),n.jsx("p",{className:"text-slate-600 mt-2",children:"Enter your new password below"})]}),x&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 mb-6",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(iu,{className:"h-4 w-4 text-red-600"}),n.jsx("p",{className:"text-red-800 text-sm",children:x})]})}),!1,n.jsxs("form",{onSubmit:L,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-slate-700",children:"New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(At,{id:"new-password",type:i?"text":"password",value:t,onChange:z=>r(z.target.value),required:!0,placeholder:"Enter new password",className:S.password?"border-red-300 focus:border-red-500 focus:ring-red-500":""}),n.jsx("button",{type:"button",onClick:()=>l(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:i?n.jsx($6,{className:"h-4 w-4 text-slate-400"}):n.jsx(gl,{className:"h-4 w-4 text-slate-400"})})]}),S.password&&n.jsx("p",{className:"text-red-600 text-xs",children:S.password})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-slate-700",children:"Confirm New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(At,{id:"confirm-password",type:u?"text":"password",value:a,onChange:z=>s(z.target.value),required:!0,placeholder:"Confirm new password",className:S.confirmPassword?"border-red-300 focus:border-red-500 focus:ring-red-500":""}),n.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:u?n.jsx($6,{className:"h-4 w-4 text-slate-400"}):n.jsx(gl,{className:"h-4 w-4 text-slate-400"})})]}),S.confirmPassword&&n.jsx("p",{className:"text-red-600 text-xs",children:S.confirmPassword})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Password Requirements"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" At least 8 characters long"}),n.jsx("li",{children:" Contains at least one lowercase letter"}),n.jsx("li",{children:" Contains at least one uppercase letter"}),n.jsx("li",{children:" Contains at least one number"})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsx(Oe,{type:"button",variant:"outline",onClick:F,className:"flex-1",disabled:f,children:"Back to Login"}),n.jsx(Oe,{type:"submit",className:"flex-1",disabled:f||!t.trim()||!a.trim()||!b,children:f?n.jsxs(n.Fragment,{children:[n.jsx(Hp,{className:"mr-2 h-4 w-4 animate-spin"}),"Resetting..."]}):b?"Reset Password":"Preparing..."})]})]})]})})},sne=({onNavigateToLogin:e,onNavigateToRegister:t})=>n.jsxs("div",{className:"min-h-screen bg-slate-50",children:[n.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-50",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-3 sm:py-4 flex justify-between items-center",children:[n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("img",{src:ou,alt:"TrackMyStartup",className:"h-7 w-7 sm:h-8 sm:w-8 scale-[5] sm:scale-[5] origin-left cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>window.location.reload()})}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[n.jsx(Oe,{variant:"outline",size:"sm",onClick:e,className:"hidden sm:inline-flex",children:"Login"}),n.jsx(Oe,{variant:"primary",size:"sm",onClick:t,className:"px-3 py-1.5",children:"Get Started"})]})]})}),n.jsx("section",{className:"py-12 sm:py-16 lg:py-20 px-4 sm:px-6 lg:px-8",children:n.jsx("div",{className:"container mx-auto text-center",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("h1",{className:"text-3xl sm:text-5xl lg:text-6xl font-bold text-slate-900 mb-4 sm:mb-6",children:["Track Your Startup's",n.jsx("span",{className:"text-brand-primary block",children:"Growth Journey"})]}),n.jsx("p",{className:"text-base sm:text-xl text-slate-600 mb-6 sm:mb-8 max-w-2xl mx-auto",children:"Comprehensive startup tracking platform for investors, founders, and professionals. Monitor compliance, track investments, and manage your startup ecosystem all in one place."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",children:[n.jsxs(Oe,{variant:"primary",size:"md",onClick:t,className:"group w-full sm:w-auto",children:["Start Now",n.jsx(F6,{className:"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform"})]}),n.jsx(Oe,{variant:"outline",size:"md",onClick:e,className:"w-full sm:w-auto",children:"Sign In"})]})]})})}),n.jsx("section",{className:"py-12 sm:py-16 lg:py-20 px-4 sm:px-6 lg:px-8 bg-white",children:n.jsxs("div",{className:"container mx-auto",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-2xl sm:text-4xl font-bold text-slate-900 mb-3 sm:mb-4",children:"Everything You Need to Track"}),n.jsx("p",{className:"text-base sm:text-xl text-slate-600 max-w-2xl mx-auto",children:"From compliance monitoring to investment tracking, we've got you covered"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:[n.jsxs("div",{className:"text-center p-5 sm:p-6",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-brand-primary/10 rounded-full flex items-center justify-center",children:n.jsx(G_,{className:"h-8 w-8 text-brand-primary"})}),n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Portfolio Management"}),n.jsx("p",{className:"text-slate-600",children:"Track all your startup investments in one comprehensive dashboard with real-time updates."})]}),n.jsxs("div",{className:"text-center p-5 sm:p-6",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-brand-primary/10 rounded-full flex items-center justify-center",children:n.jsx(Cs,{className:"h-8 w-8 text-brand-primary"})}),n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Compliance Tracking"}),n.jsx("p",{className:"text-slate-600",children:"Stay compliant with automated compliance monitoring and task management for your startups."})]}),n.jsxs("div",{className:"text-center p-5 sm:p-6",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-brand-primary/10 rounded-full flex items-center justify-center",children:n.jsx(xd,{className:"h-8 w-8 text-brand-primary"})}),n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Performance Analytics"}),n.jsx("p",{className:"text-slate-600",children:"Get insights into your startup's financial health and growth metrics with detailed analytics."})]}),n.jsxs("div",{className:"text-center p-5 sm:p-6",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-brand-primary/10 rounded-full flex items-center justify-center",children:n.jsx(bn,{className:"h-8 w-8 text-brand-primary"})}),n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Team Collaboration"}),n.jsx("p",{className:"text-slate-600",children:"Collaborate with CA, CS, and facilitation teams for seamless startup management."})]}),n.jsxs("div",{className:"text-center p-5 sm:p-6",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-brand-primary/10 rounded-full flex items-center justify-center",children:n.jsx(Sw,{className:"h-8 w-8 text-brand-primary"})}),n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Global Compliance"}),n.jsx("p",{className:"text-slate-600",children:"Support for multiple countries and compliance frameworks including Canada, India, and US."})]}),n.jsxs("div",{className:"text-center p-5 sm:p-6",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-brand-primary/10 rounded-full flex items-center justify-center",children:n.jsx(dJ,{className:"h-8 w-8 text-brand-primary"})}),n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Investment Opportunities"}),n.jsx("p",{className:"text-slate-600",children:"Discover and invest in promising startups with our comprehensive investment platform."})]})]})]})}),n.jsx("section",{className:"py-12 sm:py-16 lg:py-20 px-4 sm:px-6 lg:px-8 bg-slate-100",children:n.jsxs("div",{className:"container mx-auto",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-2xl sm:text-4xl font-bold text-slate-900 mb-3 sm:mb-4",children:"Simple, Transparent Pricing"}),n.jsx("p",{className:"text-base sm:text-xl text-slate-600 max-w-2xl mx-auto",children:"Choose the plan that fits your needs. All plans include full access to our platform features."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 max-w-5xl mx-auto",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8 border border-slate-200",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Startups"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("span",{className:"text-3xl font-bold text-brand-primary",children:"1,200"}),n.jsx("span",{className:"text-slate-600",children:"/month"})]}),n.jsxs("div",{className:"text-sm text-slate-500 mb-6",children:["or ",n.jsx("span",{className:"font-semibold text-slate-700",children:"9,600/year"})," (save 33%)"]}),n.jsxs("ul",{className:"text-left space-y-2 text-slate-600 mb-6",children:[n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:""}),"Full platform access"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:""}),"Compliance tracking"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:""}),"Investment management"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:""}),"Financial reporting"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:""}),"Team collaboration"]})]}),n.jsx(Oe,{variant:"outline",size:"md",onClick:t,className:"w-full",children:"Get Started"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8 border border-slate-200 relative",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Investors"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("span",{className:"text-3xl font-bold text-brand-primary",children:"1,200"}),n.jsx("span",{className:"text-slate-600",children:"/month"})]}),n.jsx("div",{className:"text-sm text-slate-500 mb-2",children:"per startup"}),n.jsxs("div",{className:"text-sm text-slate-500 mb-6",children:["or ",n.jsx("span",{className:"font-semibold text-slate-700",children:"9,600/year"})," per startup (save 33%)"]}),n.jsxs("ul",{className:"text-left space-y-2 text-slate-600 mb-6",children:[n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:""}),"Portfolio management"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:""}),"Investment tracking"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:""}),"Due diligence tools"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:""}),"Performance analytics"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:""}),"Investment opportunities"]})]}),n.jsx(Oe,{variant:"outline",size:"md",onClick:t,className:"w-full",children:"Get Started"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8 border border-slate-200",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Facilitation Center"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("span",{className:"text-3xl font-bold text-brand-primary",children:"1,600"}),n.jsx("span",{className:"text-slate-600",children:"/month"})]}),n.jsx("div",{className:"text-sm text-slate-500 mb-6",children:"Flat monthly rate"}),n.jsxs("ul",{className:"text-left space-y-2 text-slate-600 mb-6",children:[n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:""}),"Multi-startup management"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:""}),"Facilitator dashboard"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:""}),"Request management"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:""}),"Team coordination"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:""}),"Advanced reporting"]})]}),n.jsx(Oe,{variant:"outline",size:"md",onClick:t,className:"w-full",children:"Get Started"})]})})]}),n.jsxs("div",{className:"text-center mt-12",children:[n.jsx("p",{className:"text-slate-600 mb-4",children:"All plans include 24/7 support and regular platform updates"}),n.jsxs("p",{className:"text-sm text-slate-500",children:["Need a custom plan? ",n.jsx("a",{href:"mailto:support@trackmystartup.com",className:"text-brand-primary hover:underline",children:"Contact us"})," for enterprise solutions"]})]})]})}),n.jsx("section",{className:"py-12 sm:py-16 lg:py-20 px-4 sm:px-6 lg:px-8 bg-slate-100",children:n.jsx("div",{className:"container mx-auto text-center",children:n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsx("h2",{className:"text-2xl sm:text-4xl font-bold text-slate-900 mb-3 sm:mb-4",children:"Ready to Transform Your Startup Tracking?"}),n.jsx("p",{className:"text-base sm:text-xl text-slate-600 mb-6 sm:mb-8",children:"Join thousands of investors and founders who trust TrackMyStartup to manage their startup ecosystem."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",children:[n.jsxs(Oe,{variant:"primary",size:"md",onClick:t,className:"group w-full sm:w-auto",children:["Get Started Today",n.jsx(F6,{className:"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform"})]}),n.jsx(Oe,{variant:"outline",size:"md",onClick:e,className:"w-full sm:w-auto",children:"Already have an account? Sign In"})]})]})})})]}),m2=()=>{const e=new Date().getFullYear(),t=r=>{window.location.href=r};return n.jsx("footer",{className:"bg-slate-900 text-white mt-auto",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Track My Startup"}),n.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:"Comprehensive platform for tracking startup growth, compliance, and investments. Built for investors, founders, and professionals."}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsx("a",{href:"mailto:support@trackmystartup.com",className:"w-8 h-8 bg-brand-primary/20 rounded-full flex items-center justify-center hover:bg-brand-primary/30 transition-colors",children:n.jsx(ko,{className:"h-4 w-4 text-brand-primary"})}),n.jsx("a",{href:"tel:+919146169956",className:"w-8 h-8 bg-brand-primary/20 rounded-full flex items-center justify-center hover:bg-brand-primary/30 transition-colors",children:n.jsx(Gx,{className:"h-4 w-4 text-brand-primary"})}),n.jsx("div",{className:"w-8 h-8 bg-brand-primary/20 rounded-full flex items-center justify-center",children:n.jsx(Gp,{className:"h-4 w-4 text-brand-primary"})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"text-md font-semibold text-white",children:"Contact Info"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"mailto:support@trackmystartup.com",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(ko,{className:"h-4 w-4 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-300 text-sm",children:"General Support"}),n.jsx("p",{className:"text-white text-sm",children:"support@trackmystartup.com"})]})]})}),n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"mailto:startup@trackmystartup.com",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(ko,{className:"h-4 w-4 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-300 text-sm",children:"Startup Support"}),n.jsx("p",{className:"text-white text-sm",children:"startup@trackmystartup.com"})]})]})}),n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"mailto:investor@trackmystartup.com",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(ko,{className:"h-4 w-4 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-300 text-sm",children:"Investor Relations"}),n.jsx("p",{className:"text-white text-sm",children:"investor@trackmystartup.com"})]})]})}),n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"tel:+919146169956",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(Gx,{className:"h-4 w-4 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-300 text-sm",children:"Phone"}),n.jsx("p",{className:"text-white text-sm",children:"+91 91461 69956"})]})]})}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(Gp,{className:"h-4 w-4 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-300 text-sm",children:"Address"}),n.jsxs("p",{className:"text-white text-sm",children:["E&P Community Farms",n.jsx("br",{}),"1956/2 Wada Road",n.jsx("br",{}),"Rajgurunagar 410505, India"]})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"text-md font-semibold text-white",children:"Quick Links"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsx("li",{children:n.jsxs("button",{onClick:()=>t("/about"),className:"text-slate-300 hover:text-white text-sm transition-colors duration-200 flex items-center group",children:["About Us - E&P Community Farms",n.jsx(Lc,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),n.jsx("li",{children:n.jsxs("button",{onClick:()=>t("/contact"),className:"text-slate-300 hover:text-white text-sm transition-colors duration-200 flex items-center group",children:["Contact - E&P Community Farms",n.jsx(Lc,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),n.jsx("li",{children:n.jsxs("button",{onClick:()=>t("/products"),className:"text-slate-300 hover:text-white text-sm transition-colors duration-200 flex items-center group",children:["Product Price & Registration",n.jsx(Lc,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"text-md font-semibold text-white",children:"Specialized Support"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsx("li",{children:n.jsxs("a",{href:"mailto:incubation_center@trackmystartup.com",className:"text-slate-300 hover:text-white text-sm transition-colors duration-200 flex items-center group",children:["Incubation Centers",n.jsx(Lc,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),n.jsx("li",{children:n.jsxs("a",{href:"mailto:investment_advisor@trackmystartup.com",className:"text-slate-300 hover:text-white text-sm transition-colors duration-200 flex items-center group",children:["Investment Advisors",n.jsx(Lc,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),n.jsx("li",{children:n.jsxs("button",{onClick:()=>t("/privacy-policy"),className:"text-slate-300 hover:text-white text-sm transition-colors duration-200 flex items-center group",children:["Privacy Policy",n.jsx(Lc,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),n.jsx("li",{children:n.jsxs("button",{onClick:()=>t("/terms-conditions"),className:"text-slate-300 hover:text-white text-sm transition-colors duration-200 flex items-center group",children:["Terms & Conditions",n.jsx(Lc,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),n.jsx("li",{children:n.jsxs("button",{onClick:()=>t("/cancellation-refunds"),className:"text-slate-300 hover:text-white text-sm transition-colors duration-200 flex items-center group",children:["Cancellation & Refunds",n.jsx(Lc,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),n.jsx("li",{children:n.jsxs("button",{onClick:()=>t("/shipping"),className:"text-slate-300 hover:text-white text-sm transition-colors duration-200 flex items-center group",children:["Shipping Policy",n.jsx(Lc,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})]})]}),n.jsx("div",{className:"border-t border-slate-700 mt-8 pt-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0",children:[n.jsxs("div",{className:"text-center sm:text-left",children:[n.jsxs("p",{className:"text-slate-400 text-sm",children:[" ",e," E&P Community Farms. All rights reserved."]}),n.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Powered by E&P Community Farms"}),n.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Specialized Support by E&P Community Farms"})]}),n.jsxs("div",{className:"flex items-center space-x-6",children:[n.jsx("button",{onClick:()=>t("/home"),className:"text-slate-400 hover:text-white text-sm transition-colors duration-200",children:"Home"}),n.jsx("button",{onClick:()=>t("/contact"),className:"text-slate-400 hover:text-white text-sm transition-colors duration-200",children:"Contact"})]})]})})]})})},ine=()=>{const e=()=>{window.history.back()};return n.jsx("div",{className:"min-h-screen bg-slate-50",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-brand-primary hover:text-brand-secondary mb-6 transition-colors",children:[n.jsx(lc,{className:"h-4 w-4"}),"Back"]}),n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Privacy Policy"}),n.jsx("p",{className:"text-slate-600 mb-8",children:"E&P Community Farms"}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8",children:n.jsxs("div",{className:"prose prose-slate max-w-none",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Privacy Policy of E&P Community Farms"}),n.jsx("p",{className:"text-slate-600 mb-4",children:'This Privacy Policy describes how E&P Community Farms ("we," "our," "us," or "the Owner") collects, uses, stores, and protects the personal data of users ("you," "your," or "User") when accessing or using our website www.trackmystartup.com and related services.'}),n.jsx("p",{className:"text-slate-600 mb-4",children:"By using this Website, you agree to the practices described in this Privacy Policy. Please read it carefully."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"1. Information We Collect"}),n.jsx("p",{className:"text-slate-600 mb-2",children:"We may collect the following types of information:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Personal Information:"})," Name, email address, phone number, organization, and login details when you register or contact us."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Business Information:"})," Startup details, investment-related information, compliance documents, and other data uploaded by Users for monitoring purposes."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Usage Data:"})," IP address, browser type, operating system, referral source, and browsing behavior within our platform."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Cookies and Tracking Technologies:"})," We use cookies and similar tools to enhance User experience and analyze platform performance."]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"2. How We Use Your Information"}),n.jsx("p",{className:"text-slate-600 mb-2",children:"We use the collected information for purposes including:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2",children:[n.jsx("li",{children:"Providing and improving our compliance and monitoring services."}),n.jsx("li",{children:"Facilitating communication between investors, incubators, and startups."}),n.jsx("li",{children:"Ensuring platform security, fraud prevention, and compliance with applicable laws."}),n.jsx("li",{children:"Personalizing User experience and providing relevant insights."}),n.jsx("li",{children:"Sending service updates, notifications, or promotional material (where consent is provided)."})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"3. Data Sharing and Disclosure"}),n.jsx("p",{className:"text-slate-600 mb-2",children:"We do not sell or rent personal data. However, we may share information in the following cases:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"With Consent:"})," When Users explicitly agree to share information."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"With Service Providers:"})," Third-party vendors that help us deliver services (e.g., hosting, analytics, communication tools)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"For Legal Reasons:"})," If required by law, regulation, or legal process."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Business Transfers:"})," In case of mergers, acquisitions, or sale of assets."]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"4. Data Retention"}),n.jsx("p",{className:"text-slate-600",children:"We retain personal data only as long as necessary to provide our services, comply with legal obligations, resolve disputes, and enforce agreements. After this period, data will be securely deleted or anonymized."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"5. Data Security"}),n.jsx("p",{className:"text-slate-600",children:"We implement technical and organizational measures to safeguard your data against unauthorized access, disclosure, alteration, or destruction. However, no method of electronic transmission or storage is 100% secure, and we cannot guarantee absolute security."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"6. User Rights"}),n.jsx("p",{className:"text-slate-600 mb-2",children:"Depending on applicable laws, Users may have the right to:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2",children:[n.jsx("li",{children:"Access, update, or delete their personal data."}),n.jsx("li",{children:"Restrict or object to certain data processing activities."}),n.jsx("li",{children:"Withdraw consent at any time where processing is based on consent."}),n.jsx("li",{children:"Request data portability."})]}),n.jsx("p",{className:"text-slate-600 mt-4",children:"Requests may be submitted via the contact details provided below."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"7. International Data Transfers"}),n.jsx("p",{className:"text-slate-600",children:"If you are accessing the Website from outside India, please note that your data may be transferred and stored on servers located in jurisdictions with different data protection laws."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"8. Cookies Policy"}),n.jsx("p",{className:"text-slate-600",children:"Our Website uses cookies to improve functionality, analyze usage, and deliver personalized experiences. Users may control cookie settings through their browser, but some features may not function properly without cookies."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"9. Children's Privacy"}),n.jsx("p",{className:"text-slate-600",children:"Our services are not directed to individuals under 18. We do not knowingly collect personal data from minors. If you believe a child has provided us with personal information, please contact us immediately."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"10. Changes to This Policy"}),n.jsx("p",{className:"text-slate-600",children:"We may update this Privacy Policy from time to time. Users will be notified of significant changes through the Website or email. Continued use of the Website after changes constitutes acceptance of the revised Privacy Policy."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"11. Contact Information"}),n.jsxs("p",{className:"text-slate-600",children:["For questions, concerns, or requests regarding this Privacy Policy, please contact:",n.jsx("br",{}),"E&P Community Farms",n.jsx("br",{}),"Email: ",n.jsx("a",{href:"mailto:support@trackmystartup.com",className:"text-brand-primary hover:underline",children:"support@trackmystartup.com"}),n.jsx("br",{}),"Website: ",n.jsx("a",{href:"https://www.trackmystartup.com",className:"text-brand-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:"www.trackmystartup.com"})]})]})]})})]})]})})},one=()=>{const e=()=>{window.history.back()};return n.jsx("div",{className:"min-h-screen bg-slate-50",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-brand-primary hover:text-brand-secondary mb-6 transition-colors",children:[n.jsx(lc,{className:"h-4 w-4"}),"Back"]}),n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Cancellation & Refund Policy"}),n.jsx("p",{className:"text-slate-600 mb-2",children:"Track My Startup"}),n.jsx("p",{className:"text-sm text-slate-500 mb-8",children:"Effective Date: 23-09-2025"}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8",children:n.jsxs("div",{className:"prose prose-slate max-w-none",children:[n.jsx("div",{className:"mb-6",children:n.jsx("p",{className:"text-slate-600 mb-4",children:'This policy outlines the procedures for canceling your subscription to "Track My Startup" and the conditions under which a refund may be issued.'})}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"Part A: Cancellation Policy"}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"1. Your Right to Cancel"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"You have the right to cancel your subscription at any time. You can manage your subscription and initiate a cancellation directly from your account settings or billing dashboard within the platform."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"2. Effect of Cancellation"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2 mb-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"For Monthly Subscriptions:"})," When you cancel a monthly subscription, you will retain full access to your paid features until the end of your current billing period. At the end of that period, your account will be downgraded to our free plan (if available) or access will be restricted, and you will not be charged again."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"For Annual Subscriptions:"})," When you cancel an annual subscription, you will retain full access to your paid features until the end of your one-year subscription term. You will not be charged for the subsequent year."]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"3. Data Retention After Cancellation"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"Upon cancellation, your data will be retained on our servers for a grace period of ninety (90) days. During this period, you can resubscribe to regain access to your data. After 90 days, we reserve the right to permanently delete your data from our systems."})]})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"Part B: Refund Policy"}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"1. 14-Day Money-Back Guarantee (New Customers)"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"We offer a 14-day money-back guarantee for your first subscription purchase. If you are not satisfied with our service for any reason, you may request a full refund within 14 calendar days of your initial payment. This guarantee applies only to your first purchase and does not apply to subsequent renewals."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"2. Subscription Renewals"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2 mb-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Monthly Renewals:"})," Payments for monthly subscription renewals are non-refundable."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Annual Renewals:"})," Payments for annual subscription renewals are non-refundable. We will send a reminder email to your registered address before your annual renewal date."]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"3. How to Request a Refund"}),n.jsxs("p",{className:"text-slate-600 mb-4",children:["To request a refund under the 14-Day Money-Back Guarantee, you must contact our support team at ",n.jsx("a",{href:"mailto:support@trackmystartup.com",className:"text-brand-primary hover:underline",children:"support@trackmystartup.com"})," within the 14-day period. Please provide your account details and the reason for your request."]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"4. Exceptions"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"Refunds outside of the 14-day guarantee will not be issued, except in cases of a significant, prolonged platform outage or a billing error on our part. These exceptions will be reviewed on a case-by-case basis."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"5. Processing Time"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"Approved refunds will be processed within 5-10 business days and will be credited back to the original method of payment."})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Contact Information"}),n.jsxs("p",{className:"text-slate-600",children:["For cancellation requests, refund inquiries, or questions about this policy, please contact us:",n.jsx("br",{}),n.jsx("strong",{children:"Phone:"})," ",n.jsx("a",{href:"tel:+919146169956",className:"text-brand-primary hover:underline",children:"+91 91461 69956"}),n.jsx("br",{}),n.jsx("strong",{children:"Address:"})," 1956/2 Wada Road, Rajgurunagar 410505, India",n.jsx("br",{}),n.jsx("strong",{children:"Email:"})," ",n.jsx("a",{href:"mailto:support@trackmystartup.com",className:"text-brand-primary hover:underline",children:"support@trackmystartup.com"})]})]})]})})]})]})})},lne=()=>{const e=()=>{window.history.back()};return n.jsx("div",{className:"min-h-screen bg-slate-50",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-brand-primary hover:text-brand-secondary mb-6 transition-colors",children:[n.jsx(lc,{className:"h-4 w-4"}),"Back"]}),n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Shipping Policy"}),n.jsx("p",{className:"text-slate-600 mb-2",children:"Track My Startup"}),n.jsx("p",{className:"text-sm text-slate-500 mb-8",children:"Effective Date: 23-09-2025"}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8",children:n.jsxs("div",{className:"prose prose-slate max-w-none",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"1. Scope of Policy"}),n.jsx("p",{className:"text-slate-600 mb-4",children:'This Service Delivery Policy outlines how "Track My Startup" provides users with access to our platform and its services upon subscription. As a digital Software-as-a-Service (SaaS) platform, we do not ship physical goods. All services are delivered electronically.'})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"2. Account Activation and Access"}),n.jsx("p",{className:"text-slate-600 mb-4",children:'Upon successful completion of your registration and payment, your "Track My Startup" account will be activated immediately. You will receive a confirmation email sent to the address you provided during registration. This email will include your login credentials or a link to set up your password and access your account dashboard.'})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"3. Service Delivery Timeline"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2 mb-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Instant Access:"})," Access to the platform is granted instantaneously once your payment is successfully processed by our payment gateway."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Confirmation Email:"})," The confirmation email is dispatched within minutes of successful registration. If you do not receive this email within one hour, please check your spam or junk mail folder before contacting support."]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"4. Communication"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"All communications regarding your service delivery, including account activation, billing notifications, and platform updates, will be sent to the email address associated with your account. It is your responsibility to keep this email address up to date."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"5. System Requirements"}),n.jsx("p",{className:"text-slate-600 mb-4",children:'To access and use the "Track My Startup" platform, you will need a stable internet connection and a modern web browser (e.g., Chrome, Firefox, Safari, Edge).'})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"6. No Physical Shipping"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"No physical products, software CDs, or printed materials will be shipped to you. Your access to the platform is entirely digital."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Contact Information"}),n.jsxs("p",{className:"text-slate-600",children:["For any questions regarding service delivery or account access, please contact us:",n.jsx("br",{}),n.jsx("strong",{children:"Phone:"})," ",n.jsx("a",{href:"tel:+919146169956",className:"text-brand-primary hover:underline",children:"+91 91461 69956"}),n.jsx("br",{}),n.jsx("strong",{children:"Address:"})," 1956/2 Wada Road, Rajgurunagar 410505, India",n.jsx("br",{}),n.jsx("strong",{children:"Email:"})," ",n.jsx("a",{href:"mailto:support@trackmystartup.com",className:"text-brand-primary hover:underline",children:"support@trackmystartup.com"})]})]})]})})]})]})})},cne=()=>{const e=()=>{window.history.back()};return n.jsx("div",{className:"min-h-screen bg-slate-50",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-brand-primary hover:text-brand-secondary mb-6 transition-colors",children:[n.jsx(lc,{className:"h-4 w-4"}),"Back"]}),n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Terms & Conditions"}),n.jsx("p",{className:"text-slate-600 mb-8",children:"Track My Startup"}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8",children:n.jsxs("div",{className:"prose prose-slate max-w-none",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Terms and Conditions of Track My Startup"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"These Terms govern:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 mb-4 space-y-1",children:[n.jsx("li",{children:"the use of this Website (www.trackmystartup.com), and"}),n.jsx("li",{children:"any other related agreement or legal relationship with the Owner,"})]}),n.jsx("p",{className:"text-slate-600 mb-4",children:"in a legally binding way. By accessing or using the Website, you agree to these Terms and Conditions. Please read this document carefully."}),n.jsxs("p",{className:"text-slate-600 mb-4",children:[n.jsx("strong",{children:"This Website is provided by:"}),n.jsx("br",{}),"Track My Startup",n.jsx("br",{}),"Owner contact email: ",n.jsx("a",{href:"mailto:saeel.momin@gmail.com",className:"text-brand-primary hover:underline",children:"saeel.momin@gmail.com"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"1. What Users Should Know at a Glance"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2",children:[n.jsx("li",{children:"These Terms apply to all Users of the Website."}),n.jsx("li",{children:"Some provisions may apply differently to Consumers (individuals using for personal purposes) and Business Users (investors, incubators, startups). Where applicable, such distinctions will be clearly mentioned."}),n.jsx("li",{children:"Unless otherwise stated, all provisions apply equally to all Users."})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"2. Terms of Use"}),n.jsx("p",{className:"text-slate-600 mb-2",children:"By using this Website, Users confirm that they:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2",children:[n.jsx("li",{children:"Are at least 18 years of age."}),n.jsx("li",{children:"Have the legal authority to enter into binding agreements."}),n.jsx("li",{children:"Will use the Website in compliance with applicable laws and these Terms."})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"3. Services Provided"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"E&P Community Farms offers compliance and investment monitoring tools to investors, incubators, and other stakeholders for tracking startup progress."}),n.jsx("p",{className:"text-slate-600 mb-4",children:"The Owner reserves the right to add, modify, suspend, or discontinue services at any time."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"4. Content on This Website"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"Unless otherwise specified, all content, tools, and features available on this Website are owned or licensed by the Owner."}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2",children:[n.jsx("li",{children:"Users may not copy, modify, distribute, or exploit any content except as explicitly permitted."}),n.jsx("li",{children:"Business data uploaded by Users remains their property, but by uploading it, Users grant E&P Community Farms a license to use such data solely for providing the services."})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"5. Acceptable Use"}),n.jsx("p",{className:"text-slate-600 mb-2",children:"Users agree not to:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2",children:[n.jsx("li",{children:"Use the Website for unlawful, harmful, or fraudulent activities."}),n.jsx("li",{children:"Upload false, misleading, or infringing information."}),n.jsx("li",{children:"Attempt to hack, disrupt, or interfere with the Website's functionality."}),n.jsx("li",{children:"Reproduce, resell, or exploit services without written permission."})]}),n.jsx("p",{className:"text-slate-600 mt-4",children:"Violation of these rules may result in suspension or termination of access."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"6. Access to External Resources"}),n.jsx("p",{className:"text-slate-600",children:"The Website may contain links to third-party resources. E&P Community Farms has no control over such resources and is not responsible for their content, availability, or practices."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"7. Liability and Indemnification"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Disclaimer of Warranties"}),n.jsx("p",{className:"text-slate-600 mb-4",children:'The Website is provided on an "as is" and "as available" basis. We make no guarantees about accuracy, availability, or error-free operation.'}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Limitation of Liability"}),n.jsx("p",{className:"text-slate-600 mb-2",children:"To the fullest extent permitted by law, E&P Community Farms shall not be liable for:"}),n.jsxs("ul",{className:"list-disc list-inside text-slate-600 space-y-2 mb-4",children:[n.jsx("li",{children:"Any indirect, incidental, or consequential damages."}),n.jsx("li",{children:"Loss of profits, business opportunities, or data."}),n.jsx("li",{children:"Unauthorized access to or use of User information."})]}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Indemnification"}),n.jsx("p",{className:"text-slate-600",children:"Users agree to indemnify and hold harmless E&P Community Farms, its affiliates, officers, employees, and partners from any claims, liabilities, damages, or expenses arising from their use of the Website or violation of these Terms."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"8. Privacy Policy"}),n.jsx("p",{className:"text-slate-600",children:"The collection and processing of personal data are governed by our Privacy Policy, available on the Website."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"9. Service Interruption"}),n.jsx("p",{className:"text-slate-600",children:"We reserve the right to interrupt or suspend services temporarily for maintenance, system updates, or unforeseen events. In case of termination of services, we will provide reasonable notice where possible."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"10. Intellectual Property Rights"}),n.jsx("p",{className:"text-slate-600 mb-4",children:"All intellectual property rights related to the Website, including trademarks, service marks, logos, and software, remain the exclusive property of E&P Community Farms or its licensors."}),n.jsx("p",{className:"text-slate-600",children:"Users may not use these without prior written consent."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"11. Changes to These Terms"}),n.jsx("p",{className:"text-slate-600",children:"We may update these Terms from time to time. Users will be notified through the Website or via email when significant changes occur. Continued use of the Website implies acceptance of the updated Terms."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"12. Governing Law and Jurisdiction"}),n.jsx("p",{className:"text-slate-600",children:"These Terms are governed by the laws of India. Any disputes shall be subject to the exclusive jurisdiction of the courts of Pune, Maharashtra, India."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"13. Severability"}),n.jsx("p",{className:"text-slate-600",children:"If any provision of these Terms is found invalid or unenforceable, the remaining provisions will remain in effect."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"14. Contact Information"}),n.jsxs("p",{className:"text-slate-600",children:["For any questions or concerns regarding these Terms, please contact:",n.jsx("br",{}),"E&P Community Farms",n.jsx("br",{}),"Email: ",n.jsx("a",{href:"mailto:support@trackmystartup.com",className:"text-brand-primary hover:underline",children:"support@trackmystartup.com"}),n.jsx("br",{}),"Website: ",n.jsx("a",{href:"https://www.trackmystartup.com",className:"text-brand-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:"www.trackmystartup.com"})]})]})]})})]})]})})},une=()=>{const e=()=>{window.history.back()};return n.jsx("div",{className:"min-h-screen bg-slate-50",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-brand-primary hover:text-brand-secondary mb-6 transition-colors",children:[n.jsx(lc,{className:"h-4 w-4"}),"Back"]}),n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"About Us"}),n.jsx("p",{className:"text-slate-600 mb-8",children:"Track My Startup"}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8 mb-8",children:n.jsxs("div",{className:"prose prose-slate max-w-none",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"About Track My Startup"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"Track My Startup is a comprehensive platform designed to facilitate early-stage startups and mentor first-time founders. We bridge the gap between academia and industry through startup facilitation, research collaboration, student entrepreneurship, and professional training programs."}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Our Mission"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"We are dedicated to empowering the startup ecosystem by providing robust tools for compliance monitoring, investment tracking, and startup health assessment. Our platform serves investors, incubators, startups, and other stakeholders in creating a more transparent and efficient startup ecosystem."}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Leadership"}),n.jsxs("div",{className:"bg-slate-50 rounded-lg p-6 mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Dr. Saeel Ismail Momin"}),n.jsxs("p",{className:"text-slate-600 mb-4",children:[n.jsx("strong",{children:"Founder & CEO"}),n.jsx("br",{}),"Polymer scientist with over 9 years of global research experience and 3 years of entrepreneurial experience. Dr. Momin's expertise lies in polymer science, macromolecules, and nanotechnology."]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Education"}),n.jsxs("ul",{className:"text-sm text-slate-600 space-y-1",children:[n.jsx("li",{children:" PhD. Polymer Chemistry (University of Strasbourg, France)"}),n.jsx("li",{children:" MSc. Sustainable Materials Polymer Science (University of Freiburg, Germany)"}),n.jsx("li",{children:" Graduate Diploma in Science (University of Sydney, Australia)"}),n.jsx("li",{children:" BSc. Chemistry (University of Sydney, Australia)"})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Key Achievements"}),n.jsxs("ul",{className:"text-sm text-slate-600 space-y-1",children:[n.jsx("li",{children:" Led Startup Nation Olympiad 2025 (World's Largest Startup Competition)"}),n.jsx("li",{children:" India-Australia RISE Accelerator Grant (45 Lakhs)"}),n.jsx("li",{children:" Startup India Seed Fund (10 Lakhs)"}),n.jsx("li",{children:" National Finalist UNDP Youth Co:Lab 2022"})]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Patents & Innovations"}),n.jsxs("ul",{className:"text-sm text-slate-600 space-y-1",children:[n.jsx("li",{children:" Process for developing self-stratifying aqueous coating (India: 558402)"}),n.jsx("li",{children:" High speed and high accuracy humidity sensor (World: WO2024156677)"}),n.jsx("li",{children:" Process to convert waste leachate into plant growth promoter (India: 558759)"}),n.jsx("li",{children:" Carbon negative food waste processing system (India: IN202121018361)"})]})]}),n.jsxs("p",{className:"text-slate-600 text-sm",children:[n.jsx("strong",{children:"Languages:"})," English, Hindi, Marathi, Urdu, French",n.jsx("br",{}),n.jsx("strong",{children:"Specialization:"})," Problem-solving social issues with robust industrial know-how, promoting academia-industry collaboration through startup facilitation and research."]})]}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"What We Do"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"E&P Community Farms provides comprehensive services including compliance monitoring, investment tracking, startup health assessment, and mentorship programs. We work with a network of 400+ educational institutions, 300+ founders, and 250+ incubation centers and investors across Asia, Africa, Europe, Middle-East, and Oceania."})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-brand-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(bn,{className:"h-6 w-6 text-brand-primary"})}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Global Network"}),n.jsx("p",{className:"text-slate-600 text-sm",children:"We work with 400+ educational institutions, 300+ founders, and 250+ incubation centers across multiple continents."})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-brand-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(S8,{className:"h-6 w-6 text-brand-primary"})}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Research-Driven"}),n.jsx("p",{className:"text-slate-600 text-sm",children:"Our solutions are backed by 9+ years of global research experience and cutting-edge polymer science expertise."})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-brand-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(sJ,{className:"h-6 w-6 text-brand-primary"})}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Proven Track Record"}),n.jsx("p",{className:"text-slate-600 text-sm",children:"Led the world's largest startup competition and secured multiple grants including India-Australia RISE Accelerator."})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Contact Us"}),n.jsxs("p",{className:"text-slate-600",children:["Ready to learn more about E&P Community Farms? We'd love to hear from you.",n.jsx("br",{}),"General Support: ",n.jsx("a",{href:"mailto:support@trackmystartup.com",className:"text-brand-primary hover:underline",children:"support@trackmystartup.com"}),n.jsx("br",{}),"Startup Support: ",n.jsx("a",{href:"mailto:startup@trackmystartup.com",className:"text-brand-primary hover:underline",children:"startup@trackmystartup.com"}),n.jsx("br",{}),"Investor Relations: ",n.jsx("a",{href:"mailto:investor@trackmystartup.com",className:"text-brand-primary hover:underline",children:"investor@trackmystartup.com"}),n.jsx("br",{}),"Phone: ",n.jsx("a",{href:"tel:+919146169956",className:"text-brand-primary hover:underline",children:"+91 91461 69956"}),n.jsx("br",{}),"Address: E&P Community Farms, 1956/2 Wada Road, Rajgurunagar 410505, India"]})]})]})]})})},dne=()=>{const[e,t]=_.useState({name:"",email:"",subject:"",message:""}),r=()=>{window.history.back()},a=i=>{const{name:l,value:u}=i.target;t(d=>({...d,[l]:u}))},s=i=>{i.preventDefault(),alert("Thank you for your message! We will get back to you soon."),t({name:"",email:"",subject:"",message:""})};return n.jsx("div",{className:"min-h-screen bg-slate-50",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("button",{onClick:r,className:"flex items-center gap-2 text-brand-primary hover:text-brand-secondary mb-6 transition-colors",children:[n.jsx(lc,{className:"h-4 w-4"}),"Back"]}),n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Contact Us"}),n.jsx("p",{className:"text-slate-600 mb-8",children:"E&P Community Farms"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Get in Touch"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"We'd love to hear from you. Send us a message and we'll respond as soon as possible."}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"mailto:support@trackmystartup.com",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(ko,{className:"h-5 w-5 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-600 text-sm",children:"General Support"}),n.jsx("p",{className:"text-slate-900 font-medium",children:"support@trackmystartup.com"})]})]})}),n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"mailto:startup@trackmystartup.com",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(ko,{className:"h-5 w-5 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-600 text-sm",children:"Startup Support"}),n.jsx("p",{className:"text-slate-900 font-medium",children:"startup@trackmystartup.com"})]})]})}),n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"mailto:investor@trackmystartup.com",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(ko,{className:"h-5 w-5 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-600 text-sm",children:"Investor Relations"}),n.jsx("p",{className:"text-slate-900 font-medium",children:"investor@trackmystartup.com"})]})]})}),n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"mailto:incubation_center@trackmystartup.com",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(ko,{className:"h-5 w-5 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-600 text-sm",children:"Incubation Centers"}),n.jsx("p",{className:"text-slate-900 font-medium",children:"incubation_center@trackmystartup.com"})]})]})}),n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"mailto:investment_advisor@trackmystartup.com",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(ko,{className:"h-5 w-5 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-600 text-sm",children:"Investment Advisors"}),n.jsx("p",{className:"text-slate-900 font-medium",children:"investment_advisor@trackmystartup.com"})]})]})}),n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("a",{href:"tel:+919146169956",className:"flex items-start space-x-3 hover:opacity-80 transition-opacity",children:[n.jsx(Gx,{className:"h-5 w-5 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-600 text-sm",children:"Phone"}),n.jsx("p",{className:"text-slate-900 font-medium",children:"+91 91461 69956"})]})]})}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(Gp,{className:"h-5 w-5 text-brand-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-600 text-sm",children:"Address"}),n.jsxs("p",{className:"text-slate-900 font-medium",children:["E&P Community Farms",n.jsx("br",{}),"1956/2 Wada Road",n.jsx("br",{}),"Rajgurunagar 410505, India"]})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Business Hours"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Monday - Friday"}),n.jsx("span",{className:"text-slate-900",children:"8:00 AM - 6:00 PM"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Saturday"}),n.jsx("span",{className:"text-slate-900",children:"9:00 AM - 4:00 PM"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600",children:"Sunday"}),n.jsx("span",{className:"text-slate-900",children:"Closed"})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Send us a Message"}),n.jsxs("form",{onSubmit:s,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 mb-1",children:"Name"}),n.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:a,required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),n.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:a,required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-slate-700 mb-1",children:"Subject"}),n.jsx("input",{type:"text",id:"subject",name:"subject",value:e.subject,onChange:a,required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-slate-700 mb-1",children:"Message"}),n.jsx("textarea",{id:"message",name:"message",value:e.message,onChange:a,required:!0,rows:4,className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent"})]}),n.jsxs("button",{type:"submit",className:"w-full bg-brand-primary text-white py-2 px-4 rounded-md hover:bg-brand-secondary transition-colors duration-200 flex items-center justify-center gap-2",children:[n.jsx(wQ,{className:"h-4 w-4"}),"Send Message"]})]})]})]})]})]})})},fne=()=>{const e=()=>{window.history.back()},t=[{name:"Farm Management Package",price:"$299/month",description:"Complete farm management solution with crop planning, inventory tracking, and financial reporting.",features:["Crop Planning","Inventory Management","Financial Reports","Weather Integration"]},{name:"Community Farm Program",price:"$199/month",description:"Collaborative farming program for community-based agricultural projects.",features:["Community Dashboard","Resource Sharing","Collaborative Planning","Progress Tracking"]},{name:"Sustainable Practices Guide",price:"$99/month",description:"Comprehensive guide to sustainable farming practices and environmental stewardship.",features:["Best Practices","Environmental Impact","Certification Support","Expert Consultation"]}];return n.jsx("div",{className:"min-h-screen bg-slate-50",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-brand-primary hover:text-brand-secondary mb-6 transition-colors",children:[n.jsx(lc,{className:"h-4 w-4"}),"Back"]}),n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Product Price & Registration"}),n.jsx("p",{className:"text-slate-600 mb-8",children:"E AND P Community Farms"}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8 mb-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"Our Products & Services"}),n.jsx("p",{className:"text-slate-600 max-w-2xl mx-auto",children:"Choose from our comprehensive range of agricultural solutions designed to help you succeed in modern farming. All our products come with full support and training from our expert team."})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.map((r,a)=>n.jsxs("div",{className:"bg-slate-50 rounded-lg p-6 border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 bg-brand-primary/10 rounded-full flex items-center justify-center",children:n.jsx(lQ,{className:"h-5 w-5 text-brand-primary"})}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:r.name})]}),n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Ki,{className:"h-5 w-5 text-green-600"}),n.jsx("span",{className:"text-2xl font-bold text-green-600",children:r.price})]}),n.jsx("p",{className:"text-slate-600 mb-4 text-sm",children:r.description}),n.jsx("ul",{className:"space-y-2 mb-6",children:r.features.map((s,i)=>n.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[n.jsx(sa,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),n.jsx("span",{className:"text-slate-600",children:s})]},i))}),n.jsx("button",{className:"w-full bg-brand-primary text-white py-2 px-4 rounded-md hover:bg-brand-secondary transition-colors duration-200",children:"Register Now"})]},a))})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Registration Process"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-brand-primary/10 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx("span",{className:"text-brand-primary font-bold",children:"1"})}),n.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Choose Package"}),n.jsx("p",{className:"text-slate-600 text-sm",children:"Select the product that best fits your needs"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-brand-primary/10 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx("span",{className:"text-brand-primary font-bold",children:"2"})}),n.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Complete Form"}),n.jsx("p",{className:"text-slate-600 text-sm",children:"Fill out our registration form with your details"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-brand-primary/10 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx("span",{className:"text-brand-primary font-bold",children:"3"})}),n.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Payment"}),n.jsx("p",{className:"text-slate-600 text-sm",children:"Secure payment processing for your subscription"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-brand-primary/10 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx("span",{className:"text-brand-primary font-bold",children:"4"})}),n.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Get Started"}),n.jsx("p",{className:"text-slate-600 text-sm",children:"Access your account and begin using our services"})]})]})]})]})]})})},hne=()=>{switch(window.location.pathname){case"/privacy-policy":return n.jsx(ine,{});case"/cancellation-refunds":return n.jsx(one,{});case"/shipping":return n.jsx(lne,{});case"/terms-conditions":return n.jsx(cne,{});case"/about":return n.jsx(une,{});case"/contact":return n.jsx(dne,{});case"/products":return n.jsx(fne,{});default:return n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Page Not Found"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"The page you're looking for doesn't exist."}),n.jsx("button",{onClick:()=>window.history.back(),className:"bg-brand-primary text-white px-6 py-2 rounded-md hover:bg-brand-secondary transition-colors",children:"Go Back"})]})})}},mne=()=>{const e=["/privacy-policy","/cancellation-refunds","/shipping","/terms-conditions","/about","/contact","/products"],t=window.location.pathname;if(e.includes(t))return n.jsx("div",{className:"min-h-screen bg-slate-100 flex flex-col",children:n.jsx("main",{className:"flex-1",children:n.jsx(hne,{})})});const r=(Be,We,vt=7)=>{const Fe=new Date;Fe.setTime(Fe.getTime()+vt*24*60*60*1e3),document.cookie=`${Be}=${We};expires=${Fe.toUTCString()};path=/`},a=Be=>{const We=Be+"=",vt=document.cookie.split(";");for(let Fe=0;Fe<vt.length;Fe++){let Te=vt[Fe];for(;Te.charAt(0)===" ";)Te=Te.substring(1,Te.length);if(Te.indexOf(We)===0)return Te.substring(We.length,Te.length)}return null},s=Be=>{document.cookie=`${Be}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;`},[i,l]=_.useState(()=>{const Be=a("currentView");return Be==="startupHealth"||Be==="dashboard"?Be:"dashboard"}),[u,d]=_.useState(0),[f,m]=_.useState(0),[g,v]=_.useState(()=>{if(typeof window<"u"){const Be=window.location.pathname,We=new URLSearchParams(window.location.search),vt=window.location.hash;if(Be==="/reset-password"||We.get("type")==="recovery"||vt.includes("type=recovery")||We.get("access_token")||We.get("refresh_token"))return"reset-password"}return"landing"}),[x,j]=_.useState(null),[b,A]=_.useState(null),[S,T]=_.useState(!1),[E,D]=_.useState(!0),[L,F]=_.useState(!1),[z,M]=_.useState(null),[U,oe]=_.useState(!1),[R,q]=_.useState(!1);_.useEffect(()=>{const Be=()=>{const We=window.location.pathname,vt=new URLSearchParams(window.location.search),Fe=window.location.hash;(We==="/reset-password"||vt.get("type")==="recovery"||Fe.includes("type=recovery")||vt.get("access_token")||vt.get("refresh_token"))&&v("reset-password")};return Be(),window.addEventListener("popstate",Be),()=>{window.removeEventListener("popstate",Be)}},[]);const[se,J]=_.useState(null),[Q,ae]=_.useState(!1),he=_.useRef(null),de=_.useRef(null);_.useEffect(()=>{},[i,se,Q]),_.useEffect(()=>{const Be=We=>{};return window.addEventListener("tab-change",Be),()=>{window.removeEventListener("tab-change",Be)}},[]),_.useEffect(()=>{he.current=se},[se]),_.useEffect(()=>{de.current=x},[x]);const[_e,Y]=_.useState([]),[ye,P]=_.useState([]),[Z,ce]=_.useState([]),[je,ke]=_.useState([]),[De,Ee]=_.useState([]),[ne,Ne]=_.useState([]),[le,xe]=_.useState([]),H=_.useRef([]),W=_.useRef([]),B=_.useRef([]);_.useEffect(()=>{H.current=_e},[_e]),_.useEffect(()=>{W.current=ne},[ne]),_.useEffect(()=>{B.current=le},[le]);const[ee,X]=_.useState("Initializing..."),ge=_.useRef(!1),be=_.useRef(!1);_.useEffect(()=>{ge.current=S},[S]),_.useEffect(()=>{be.current=U},[U]);const $e=(Be,We)=>{const vt=new CustomEvent("tab-change",{detail:{tabName:Be,component:We}});window.dispatchEvent(vt)};window.emitTabChange=$e,window.forceDataRefresh=()=>{console.log(" Global force data refresh triggered"),oe(!1),be.current=!1,initializeAuth()},window.resetAuthState=()=>{console.log(" Global auth state reset triggered"),j(null),T(!1),oe(!1),de.current=null,ge.current=!1,be.current=!1,r("lastAuthUserId",""),r("lastAuthTimestamp",""),initializeAuth()},_.useEffect(()=>{r("currentView",i,1)},[i]),_.useEffect(()=>{let Be=!0;(async()=>{try{console.log("Starting auth initialization..."),await(async()=>{var Ve,Ct,Dt;const Te=window.location.hash,nt=new URLSearchParams(window.location.search);let we=null;if(Te.includes("access_token=")?we=(Ve=Te.split("access_token=")[1])==null?void 0:Ve.split("&")[0]:nt.has("access_token")&&(we=nt.get("access_token")),we){console.log("Found access token in URL");try{console.log("Setting session with access token...");const{data:Wt,error:cr}=await br.supabase.auth.setSession({access_token:we,refresh_token:""});if(cr)console.error("Error setting session:",cr);else if(Wt.user){console.log("Session set successfully, handling email confirmation...");const{user:Ot,error:$t}=await br.handleEmailConfirmation();if(Ot&&Be)console.log("Email confirmation successful, user:",Ot.email),j(Ot),T(!0);else if($t){console.error("Email confirmation failed:",$t),console.log("Attempting to create profile manually...");const{user:rr,error:qt}=await br.createProfile(((Ct=Wt.user.user_metadata)==null?void 0:Ct.name)||"Unknown",((Dt=Wt.user.user_metadata)==null?void 0:Dt.role)||"Investor");rr&&Be?(console.log("Profile created manually:",rr.email),j(rr),T(!0)):console.error("Manual profile creation failed:",qt)}}window.history.replaceState({},document.title,window.location.pathname)}catch(Wt){console.error("Error during email confirmation:",Wt)}}console.log("Auth initialization complete, waiting for auth state...")})()}catch(Fe){console.error("Error in auth initialization:",Fe)}finally{Be&&console.log("Auth initialization complete")}})();const{data:{subscription:vt}}=br.onAuthStateChange(async(Fe,Te)=>{var nt,we,Ve,Ct,Dt,Wt;if(R){console.log(" Ignoring auth event because ignoreAuthEvents flag is set");return}if(`${Fe}`,`${((nt=Te==null?void 0:Te.user)==null?void 0:nt.email)||"none"}`,`${S}`,`${(x==null?void 0:x.email)||"none"}`,`${U}`,`${i}`,`${L}`,`${R}`,!!Be&&Fe!=="TOKEN_REFRESHED")if(Fe==="SIGNED_IN"||Fe==="INITIAL_SESSION"){if(L){console.log("Auth state change already in progress, skipping...");return}if(ge.current&&de.current&&be.current&&(Te!=null&&Te.user)&&de.current.id===Te.user.id){if(Fe==="TOKEN_REFRESHED"||Fe==="INITIAL_SESSION"){console.log(" AGGRESSIVE FIX: Blocking duplicate auth event to prevent unnecessary refresh");return}console.log(" Allowing auth event to proceed:",Fe)}const cr=a("lastAuthUserId"),Ot=a("lastAuthTimestamp"),$t=Date.now().toString();if(console.log(" Auth event debug:",{event:Fe,sessionUserId:(we=Te==null?void 0:Te.user)==null?void 0:we.id,lastAuthUserId:cr,lastAuthTimestamp:Ot,currentTime:$t,isAuthenticated:ge.current,currentUserId:(Ve=de.current)==null?void 0:Ve.id}),Te!=null&&Te.user&&cr===Te.user.id&&Ot){const rr=parseInt($t)-parseInt(Ot);if(console.log(" Time difference:",rr,"ms"),rr<5e3){console.log(" Duplicate auth event detected (likely from window focus), skipping to prevent refresh");return}}Te!=null&&Te.user&&(r("lastAuthUserId",Te.user.id,1),r("lastAuthTimestamp",$t,1),console.log(" Stored auth info in cookies:",{userId:Te.user.id,timestamp:$t})),F(!0);try{if(Te!=null&&Te.user){if(!Te.user.email_confirmed_at){console.log("Email not confirmed, signing out user"),await br.supabase.auth.signOut(),M("Please confirm your email before logging in. Check your inbox for the confirmation link.");return}if(Be){const rr={id:Te.user.id,email:Te.user.email||"",name:((Ct=Te.user.user_metadata)==null?void 0:Ct.name)||"Unknown",role:((Dt=Te.user.user_metadata)==null?void 0:Dt.role)||"Investor",startup_name:((Wt=Te.user.user_metadata)==null?void 0:Wt.startupName)||void 0,registration_date:new Date().toISOString().split("T")[0]},qt=x,Sr=["1. Creating basic user from session",`2. User email: ${rr.email}`,`3. User role: ${rr.role}`,`4. User startup name: ${rr.startup_name||"none"}`,`5. Registration date: ${rr.registration_date}`,`6. Previous user: ${(qt==null?void 0:qt.email)||"none"}`,`7. Previous role: ${(qt==null?void 0:qt.role)||"none"}`,"8. About to call setCurrentUser"];j(rr),T(!0),D(!1),U||oe(!1)}(async()=>{try{console.log("Fetching full profile after sign-in...");let rr=await br.getCurrentUser();if(!rr){console.log("Profile not found, attempting to create it automatically...");const qt=Te.user.user_metadata;if(qt!=null&&qt.name&&(qt!=null&&qt.role)){console.log("Creating profile automatically with metadata:",{name:qt.name,role:qt.role});const{data:Sr,error:Na}=await br.supabase.from("users").insert({id:Te.user.id,email:Te.user.email,name:qt.name,role:qt.role,startup_name:qt.startupName||null,registration_date:new Date().toISOString().split("T")[0]}).select().single();if(Na)console.error("Error creating profile automatically:",Na);else{if(console.log("Profile created automatically:",Sr),qt.role==="Startup"&&qt.startupName)try{const{data:Tr}=await br.supabase.from("startups").select("id").eq("name",qt.startupName).single();Tr||(await br.supabase.from("startups").insert({name:qt.startupName,investment_type:"Seed",investment_value:0,equity_allocation:0,current_valuation:0,compliance_status:"Pending",sector:"Technology",total_funding:0,total_revenue:0,registration_date:new Date().toISOString().split("T")[0],user_id:Te.user.id}),console.log("Startup record created automatically"))}catch(Tr){console.warn("Failed to create startup record automatically (non-blocking):",Tr)}rr=await br.getCurrentUser()}}}if(rr&&Be){if(console.log("Full profile loaded. Updating currentUser with startup_name:",rr.startup_name),console.log("Profile completion status:",rr.is_profile_complete),!rr.is_profile_complete){console.log("Profile not complete, redirecting to complete-registration page"),j(rr),v("complete-registration"),D(!1),F(!1);return}j(rr)}}catch(rr){console.error("Failed to load/create full user profile after sign-in (non-blocking):",rr)}finally{Be&&F(!1)}})()}else Be&&(j(null),T(!1),D(!1),F(!1))}catch(rr){console.error("Error processing auth state change:",rr),Be&&F(!1)}}else Fe==="SIGNED_OUT"&&Be&&(j(null),A(null),T(!1),D(!1),F(!1),oe(!1))});return()=>{Be=!1,vt==null||vt.unsubscribe()}},[]);const Ze=_.useCallback(async Be=>{try{console.log(" Fetching investment advisor data for code:",Be);const{data:We,error:vt}=await G.from("users").select("id, email, name, role, investment_advisor_code, logo_url").eq("investment_advisor_code",Be).eq("role","Investment Advisor").single();return vt?(console.error(" Error fetching investment advisor:",vt),null):We?(console.log(" Found assigned investment advisor:",We),console.log(" Advisor logo_url:",We.logo_url),console.log(" Advisor has logo:",!!We.logo_url),A(We),We):null}catch(We){return console.error(" Error in fetchAssignedInvestmentAdvisor:",We),null}},[]),pe=_.useCallback(async(Be=!1)=>{var We,vt,Fe,Te,nt,we,Ve,Ct,Dt,Wt,cr;if(!(!ge.current||!de.current)&&!(be.current&&!Be))try{console.log("Fetching data for authenticated user...",{forceRefresh:Be,hasInitialDataLoaded:be.current});const Ot=new Promise((ta,gr)=>{setTimeout(()=>gr(new Error("Request timeout - network may be unavailable")),1e4)});let $t;((We=de.current)==null?void 0:We.role)==="Admin"?(console.log(" Using getAllStartupsForAdmin for Admin role"),$t=x0.getAllStartupsForAdmin()):((vt=de.current)==null?void 0:vt.role)==="Investment Advisor"?(console.log(" Using getAllStartupsForInvestmentAdvisor for Investment Advisor role"),$t=x0.getAllStartupsForInvestmentAdvisor()):((Fe=de.current)==null?void 0:Fe.role)==="CA"?$t=qi.getAssignedStartups().then(ta=>ta.map(gr=>({id:gr.id,name:gr.name,investmentType:"Seed",investmentValue:gr.totalFunding||0,equityAllocation:0,currentValuation:gr.totalFunding||0,complianceStatus:gr.complianceStatus,sector:gr.sector,totalFunding:gr.totalFunding,totalRevenue:gr.totalRevenue,registrationDate:gr.registrationDate,founders:[]}))):((Te=de.current)==null?void 0:Te.role)==="CS"?$t=Fi.getAssignedStartups().then(ta=>ta.map(gr=>({id:gr.id,name:gr.name,investmentType:"Seed",investmentValue:gr.totalFunding||0,equityAllocation:0,currentValuation:gr.totalFunding||0,complianceStatus:gr.complianceStatus,sector:gr.sector,totalFunding:gr.totalFunding,totalRevenue:gr.totalRevenue,registrationDate:gr.registrationDate,founders:[]}))):(console.log(" Using default startup fetching for role:",(nt=de.current)==null?void 0:nt.role),$t=x0.getAllStartups());const rr=Promise.allSettled([$t,Zn.getNewInvestments(),ox.getStartupAdditionRequests(),ox.getAllUsers(),RS.getVerificationRequests(),((we=de.current)==null?void 0:we.role)==="Investor"?Zn.getUserInvestmentOffers(de.current.email):((Ve=de.current)==null?void 0:Ve.role)==="Admin"?Zn.getAllInvestmentOffers():Promise.resolve([]),lx.getAllValidationRequests()]),[qt,Sr,Na,Tr,on,$a,Pa]=await Promise.race([rr,Ot]);let ea=qt.status==="fulfilled"?qt.value:[];const hn=Na.status==="fulfilled"?Na.value:[];if((x==null?void 0:x.role)==="Investor"&&Array.isArray(hn)){const ta=(x==null?void 0:x.investor_code)||(x==null?void 0:x.investorCode),gr=hn.filter(ra=>(ra.status||"pending")==="approved"&&(!ta||!(ra!=null&&ra.investor_code)||ra.investor_code===ta||ra.investorCode===ta)).map(ra=>ra.name).filter(ra=>!!ra);if(gr.length>0){const ra=await x0.getStartupsByNames(gr),ci={};ea.forEach(wn=>{wn&&wn.name&&(ci[wn.name]=wn)}),ra.forEach(wn=>{wn&&wn.name&&(ci[wn.name]=wn)}),ea=Object.values(ci)}}if(Y(ea),P(Sr.status==="fulfilled"?Sr.value:[]),ce(hn),ke(Tr.status==="fulfilled"?Tr.value:[]),Ee(on.status==="fulfilled"?on.value:[]),Ne($a.status==="fulfilled"?$a.value:[]),xe(Pa.status==="fulfilled"?Pa.value:[]),console.log("Data fetched successfully!"),console.log("Startups loaded:",qt.status==="fulfilled"?qt.value.length:0),console.log("Users loaded:",Tr.status==="fulfilled"?Tr.value.length:0),console.log("Current user role:",x==null?void 0:x.role),console.log(" Checking for investment advisor code..."),console.log(" Current user:",de.current),console.log(" Investment advisor code entered:",(Ct=de.current)==null?void 0:Ct.investment_advisor_code_entered),(Dt=de.current)!=null&&Dt.investment_advisor_code_entered){console.log(" User has assigned investment advisor code:",de.current.investment_advisor_code_entered);const ta=await Ze(de.current.investment_advisor_code_entered);console.log(" Advisor fetch result:",ta)}else console.log(" User has no assigned investment advisor"),A(null);if(((Wt=de.current)==null?void 0:Wt.role)==="Startup"&&qt.status==="fulfilled"&&!he.current){console.log(" Auto-finding startup for user:",de.current.email),console.log(" User startup_name:",de.current.startup_name),console.log(" Available startups:",qt.value.map(gr=>({name:gr.name,id:gr.id})));let ta=qt.value.find(gr=>gr.name===de.current.startup_name);!ta&&qt.value.length===1&&(console.log(" Fallback: selecting the only startup available for this user"),ta=qt.value[0]),console.log(" Auto-found startup:",ta),ta&&(J(ta),be.current||l("startupHealth"))}else if(((cr=de.current)==null?void 0:cr.role)==="Startup"&&he.current&&(console.log(" Startup user already has selected startup, preserving current state"),qt.status==="fulfilled")){const ta=qt.value.find(gr=>{var ra;return gr.id===((ra=he.current)==null?void 0:ra.id)});ta&&(console.log(" Updating selectedStartup with fresh data from database"),J(ta))}}catch(Ot){console.error("Error fetching data:",Ot),Y([]),P([]),ce([]),ke([]),Ee([]),Ne([])}finally{D(!1),oe(!0)}},[Ze]);_.useEffect(()=>{S&&x&&!U&&pe()},[S,x==null?void 0:x.id]),_.useEffect(()=>{S&&x&&U?(console.log(" User fully authenticated with data loaded, setting ignoreAuthEvents flag"),q(!0)):q(!1)},[S,x,U]),_.useEffect(()=>{(async()=>{if((x==null?void 0:x.role)==="Startup"&&(se!=null&&se.id)){const Be=await Zn.getOffersForStartup(se.id);Ne(Be)}})()},[se==null?void 0:se.id]);const V=_.useCallback(Be=>{console.log(`User ${Be.email} logged in as ${Be.role}`),T(!0),j(Be),Be.role!=="Startup"&&l("investor")},[]),Le=_.useCallback((Be,We,vt,Fe)=>{if(console.log(`User ${Be.email} registered as ${Be.role}`),Be.role==="Startup"&&We.length>0){console.log("Registering with founders:",We);const Te={id:Date.now(),name:vt||"Newly Registered Co",investmentType:wa.Seed,investmentValue:0,equityAllocation:0,currentValuation:0,complianceStatus:_t.Pending,sector:"Technology",totalFunding:0,totalRevenue:0,registrationDate:new Date().toISOString().split("T")[0],founders:We};Y(nt=>[Te,...nt]),J(Te),l("startupHealth")}V(Be)},[V]),ft=_.useCallback(async()=>{try{await br.signOut(),T(!1),j(null),A(null),J(null),v("login"),l("investor"),oe(!1),q(!1),s("lastAuthUserId"),s("lastAuthTimestamp"),s("currentView")}catch(Be){console.error("Logout failed:",Be)}},[]),kt=_.useCallback((Be,We)=>{let vt;if(typeof Be=="number"){if(vt=H.current.find(Te=>Te.id===Be),!vt)if(console.error("Startup not found with ID:",Be,"in available startups:",H.current.map(Te=>({id:Te.id,name:Te.name}))),(x==null?void 0:x.role)==="Startup Facilitation Center"){console.log(" Facilitator accessing startup, fetching from database..."),Mt(Be,We);return}else return}else vt=Be;console.log(" Setting selectedStartup to:",vt);const Fe=(x==null?void 0:x.role)==="CA"||(x==null?void 0:x.role)==="CS"||(x==null?void 0:x.role)==="Startup Facilitation Center"||(x==null?void 0:x.role)==="Investor";console.log(" Setting isViewOnly to:",Fe),J(vt),ae(Fe),l("startupHealth"),(x==null?void 0:x.role)==="Startup Facilitation Center"&&We&&(window.facilitatorTargetTab=We),d(Te=>Te+1),m(Te=>Te+1),setTimeout(()=>{console.log(" Forcing additional re-render..."),d(Te=>Te+1),m(Te=>Te+1)},50),setTimeout(()=>{console.log(" Forcing final re-render..."),d(Te=>Te+1),m(Te=>Te+1)},100),console.log(" handleViewStartup completed")},[x==null?void 0:x.role]),Mt=async(Be,We)=>{try{console.log(" Fetching startup data for facilitator, ID:",Be);const[vt,Fe,Te]=await Promise.allSettled([G.from("startups").select("*").eq("id",Be).single(),G.from("startup_shares").select("total_shares, esop_reserved_shares, price_per_share").eq("startup_id",Be).single(),G.from("founders").select("name, email, shares, equity_percentage").eq("startup_id",Be)]),nt=vt.status==="fulfilled"?vt.value:null,we=Fe.status==="fulfilled"?Fe.value:null,Ve=Te.status==="fulfilled"?Te.value:null;if(nt.error||!nt.data){console.error("Error fetching startup from database:",nt.error),alert("Unable to access startup. Please check your permissions.");return}const Ct=nt.data,Dt=we.data,cr=(Ve.data||[]).map($t=>({name:$t.name,email:$t.email,shares:$t.shares||0,equityPercentage:$t.equity_percentage||0})),Ot={id:Ct.id,name:Ct.name,investmentType:Ct.investment_type,investmentValue:Ct.investment_value,equityAllocation:Ct.equity_allocation,currentValuation:Ct.current_valuation,complianceStatus:Ct.compliance_status,sector:Ct.sector,totalFunding:Ct.total_funding,totalRevenue:Ct.total_revenue,registrationDate:Ct.registration_date,founders:cr,esopReservedShares:(Dt==null?void 0:Dt.esop_reserved_shares)||0,totalShares:(Dt==null?void 0:Dt.total_shares)||0,pricePerShare:(Dt==null?void 0:Dt.price_per_share)||0};console.log(" Startup fetched from database with shares and founders:",Ot),console.log(" Share data:",Dt),console.log(" Founders data:",cr),ae(!0),J(Ot),l("startupHealth"),We&&(window.facilitatorTargetTab=We),d($t=>$t+1),m($t=>$t+1),setTimeout(()=>{console.log(" Forcing additional re-render..."),d($t=>$t+1),m($t=>$t+1)},50),setTimeout(()=>{console.log(" Forcing final re-render..."),d($t=>$t+1),m($t=>$t+1)},100),console.log(" Facilitator startup access completed")}catch(vt){console.error("Error in facilitator startup access:",vt),alert("Unable to access startup. Please try again.")}},Lt=_.useCallback(()=>{J(null),ae(!1),l("dashboard"),d(Be=>Be+1)},[]);_.useCallback(Be=>{l(Be),r("currentView",Be,30)},[i]);const at=_.useCallback(async Be=>{try{const We=await C2.acceptStartupRequest(Be);Y(vt=>[...vt,We]),ce(vt=>vt.filter(Fe=>Fe.id!==Be)),alert(`${We.name} has been added to your portfolio.`)}catch(We){console.error("Error accepting startup request:",We),alert("Failed to accept startup request. Please try again.")}},[]),Nt=_.useCallback((Be,We)=>{const vt={id:Date.now(),name:We.name,investmentType:Be.type,investmentValue:Be.value,equityAllocation:Be.equity,sector:We.sector,totalFunding:We.totalFunding,totalRevenue:We.totalRevenue,registrationDate:We.registrationDate,pitchDeckUrl:Be.pitchDeckUrl,pitchVideoUrl:Be.pitchVideoUrl,complianceStatus:We.complianceStatus};if(P(Fe=>[vt,...Fe]),Be.validationRequested){const Fe={id:Date.now(),startupId:We.id,startupName:We.name,requestDate:new Date().toISOString().split("T")[0]};Ee(Te=>[Fe,...Te]),alert(`${We.name} is now listed for fundraising and a verification request has been sent to the admin.`)}else alert(`${We.name} is now listed for fundraising.`)},[]),Ie=_.useCallback(async(Be,We)=>{var Fe,Te;console.log(" handleInvestorAdded called with:",{investment:Be,startup:We}),console.log(" Investment object keys:",Object.keys(Be)),console.log(" Investment investor code:",Be.investorCode),console.log(" Current user investor codes:",{investor_code:x==null?void 0:x.investor_code,investorCode:x==null?void 0:x.investorCode});const vt=((Fe=de.current)==null?void 0:Fe.investor_code)||((Te=de.current)==null?void 0:Te.investorCode)||Be.investorCode;if(console.log(" Normalized investor code:",vt),!Be.investorCode){console.log(" No investor code found in investment, returning early");return}console.log(" Investor code found, proceeding to create startup addition request...");try{const nt={id:Date.now(),name:We.name,investmentType:We.investmentType,investmentValue:Be.amount,equityAllocation:Be.equityAllocated,sector:We.sector,totalFunding:We.totalFunding+Be.amount,totalRevenue:We.totalRevenue,registrationDate:We.registrationDate,investorCode:Be.investorCode,status:"pending"},we=await C2.createStartupAdditionRequest({name:We.name,investment_type:We.investmentType,investment_value:Be.amount,equity_allocation:Be.equityAllocated,sector:We.sector,total_funding:We.totalFunding+Be.amount,total_revenue:We.totalRevenue,registration_date:We.registrationDate,investor_code:Be.investorCode,status:"pending"}),Ve={...nt,id:we.id};ce(Ct=>[Ve,...Ct]),console.log(" Startup addition request created and saved to database:",we),console.log(" Local state updated with request ID:",Ve.id),alert(`Investor request created for ${We.name}. It will appear in the investor's Approve Startup Requests.`)}catch(nt){console.error(" Error creating startup addition request:",nt),alert("Failed to create investor request. Please try again.")}},[]),Tt=_.useCallback((Be,We)=>{Y(vt=>vt.map(Fe=>Fe.id===Be?{...Fe,founders:We}:Fe)),(se==null?void 0:se.id)===Be&&J(vt=>vt?{...vt,founders:We}:null),alert("Founder information updated successfully.")},[]),mt=_.useCallback(async(Be,We,vt,Fe,Te)=>{if(de.current)try{const nt=await Zn.createInvestmentOffer({investor_email:de.current.email,startup_name:Be.name,startup_id:Be.id,offer_amount:We,equity_percentage:vt,country:Fe||"United States",startup_amount_raised:Te||Be.totalFunding});Ne(Ve=>[nt,...Ve]);const we=nt.startup_scouting_fee_paid||0;we>0?alert(`Your offer for ${Be.name} has been submitted successfully! A startup scouting fee of $${we.toFixed(2)} has been paid. The startup will now review your offer.`):alert(`Your offer for ${Be.name} has been submitted successfully! The startup will now review your offer.`)}catch(nt){console.error("Error submitting offer:",nt);let we="Failed to submit offer. Please try again.";nt instanceof Error?we=nt.message:typeof nt=="object"&&nt!==null&&(we=`Submit failed: ${JSON.stringify(nt)}`),alert(we)}},[]),Et=_.useCallback(async(Be,We)=>{try{(await RS.processVerification(Be,We)).success&&(Ee(Fe=>Fe.filter(Te=>Te.id!==Be)),alert(We==="approved"?'Verification request has been approved and startup is now "Startup Nation Verified".':"Verification request has been rejected."))}catch(vt){console.error("Error processing verification:",vt),alert("Failed to process verification. Please try again.")}},[]),zt=_.useCallback(async(Be,We)=>{try{await Zn.updateOfferStatus(Be,We),Ne(Fe=>Fe.map(Te=>Te.id===Be?{...Te,status:We}:Te));const vt=W.current.find(Fe=>Fe.id===Be);if(vt){let Fe=`The offer for ${vt.startupName} from ${vt.investorEmail} has been ${We}.`;We==="accepted"?Fe+=" The investment deal is now finalized!":We==="completed"&&(Fe+=" The investment transaction has been completed!"),alert(Fe)}}catch(vt){console.error("Error processing offer:",vt),alert("Failed to process offer. Please try again.")}},[]),ur=_.useCallback(async(Be,We,vt)=>{try{console.log("Attempting to update offer:",{offerId:Be,offerAmount:We,equityPercentage:vt});const Fe=await Zn.updateInvestmentOffer(Be,We,vt);Ne(Te=>Te.map(nt=>nt.id===Be?{...nt,offerAmount:We,equityPercentage:vt}:nt)),alert("Offer updated successfully!")}catch(Fe){console.error("Error updating offer:",Fe);let Te="Failed to update offer. Please try again.";Fe instanceof Error?Te=`Update failed: ${Fe.message}`:typeof Fe=="object"&&Fe!==null&&(Te=`Update failed: ${JSON.stringify(Fe)}`),alert(Te)}},[]),Rt=_.useCallback(async Be=>{try{await Zn.deleteInvestmentOffer(Be),Ne(We=>We.filter(vt=>vt.id!==Be)),alert("Offer cancelled successfully!")}catch(We){console.error("Error cancelling offer:",We),alert("Failed to cancel offer. Please try again.")}},[]),Vt=_.useCallback(async(Be,We,vt)=>{try{const Fe=await lx.processValidationRequest(Be,We,vt);xe(nt=>nt.map(we=>we.id===Be?Fe:we));const Te=B.current.find(nt=>nt.id===Be);Te&&alert(`The validation request for ${Te.startupName} has been ${We}.`)}catch(Fe){console.error("Error processing validation request:",Fe),alert("Failed to process validation request. Please try again.")}},[]),Qt=_.useCallback(async(Be,We)=>{try{console.log(` Updating compliance status for startup ${Be} to: ${We}`),console.log(` Status type: ${typeof We}, Value: "${We}"`);const{data:vt,error:Fe}=await G.from("startups").select("id, name, compliance_status").eq("id",Be).single();if(Fe)throw console.error(" Error checking startup existence:",Fe),new Error(`Startup with ID ${Be} not found in database`);console.log(" Found startup in database:",vt),console.log(" Current database status:",vt.compliance_status);const{data:Te,error:nt}=await G.from("startups").update({compliance_status:We}).eq("id",Be).select();if(nt)throw console.error(" Database update error:",nt),console.error(" Error details:",{code:nt.code,message:nt.message,details:nt.details,hint:nt.hint}),nt;if(console.log(" Database update successful:",Te),console.log(" Rows affected:",Te.length),Te.length===0)throw new Error(`No rows were updated. Startup ID ${Be} may not exist or have different permissions.`);Y(Ct=>Ct.map(Dt=>Dt.id===Be?{...Dt,complianceStatus:We}:Dt));const we=H.current.find(Ct=>Ct.id===Be),Ve=(we==null?void 0:we.name)||"Startup";console.log(` Successfully updated ${Ve} compliance status to ${We}`),alert(`${Ve} compliance status has been updated to ${We}.`)}catch(vt){console.error(" Error updating compliance:",vt),alert(`Failed to update compliance status: ${vt.message||"Unknown error"}. Please try again.`)}},[]),hr=_.useCallback(Be=>{console.log(" handleProfileUpdate called - this might trigger refresh"),j(We=>({...We,...Be})),console.log(" Profile updated in App.tsx:",Be)},[]);if(E)return console.log("Rendering loading screen...",{isAuthenticated:S,currentUser:!!x}),n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50 text-brand-primary",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx(G_,{className:"w-16 h-16 animate-pulse"}),n.jsx("p",{className:"text-xl font-semibold",children:"Loading Application..."}),n.jsxs("p",{className:"text-sm text-slate-600",children:["Auth: ",S?"Yes":"No"," | User: ",x?"Yes":"No"," | Role: ",(x==null?void 0:x.role)||"None"]}),ee&&n.jsx("p",{className:"text-sm text-slate-600",children:ee})]})});if(g==="complete-registration")return console.log(" Showing CompleteRegistrationPage (Form 2)"),n.jsxs("div",{className:"min-h-screen bg-slate-100 flex flex-col",children:[n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsx(xk,{onNavigateToRegister:()=>v("register"),onNavigateToDashboard:async()=>{console.log(" Navigating to dashboard after registration completion");try{const Be=await br.getCurrentUser();Be&&(console.log(" User data refreshed for dashboard:",Be),j(Be),T(!0),v("login"))}catch(Be){console.error(" Error refreshing user data:",Be),T(!0),v("login")}}})}),n.jsx(m2,{})]});if(g==="reset-password")return console.log(" Showing ResetPasswordPage"),n.jsxs("div",{className:"min-h-screen bg-slate-100 flex flex-col",children:[n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsx(nne,{onNavigateToLogin:()=>v("login")})}),n.jsx(m2,{})]});if(console.log(" App.tsx render - currentPage:",g,"isAuthenticated:",S),!S)return n.jsxs("div",{className:"min-h-screen bg-slate-100 flex flex-col",children:[n.jsx("div",{className:"flex-1 flex items-center justify-center",children:g==="landing"?n.jsx(sne,{onNavigateToLogin:()=>v("login"),onNavigateToRegister:()=>v("register")}):g==="login"?n.jsx(Zae,{onLogin:V,onNavigateToRegister:()=>v("register"),onNavigateToCompleteRegistration:()=>{console.log(" Navigating to complete-registration page"),v("complete-registration")},onNavigateToLanding:()=>v("landing")}):g==="register"?n.jsx(tne,{onRegister:Le,onNavigateToLogin:()=>v("login"),onNavigateToLanding:()=>v("landing")}):n.jsx(xk,{onNavigateToRegister:()=>v("register"),onNavigateToDashboard:async()=>{console.log(" Navigating to dashboard after registration completion");try{const Be=await br.getCurrentUser();Be&&(console.log(" User data refreshed for dashboard:",Be),j(Be),T(!0),v("login"),console.log(" Forcing startup data refresh after registration..."),setTimeout(()=>{pe(!0)},1e3))}catch(Be){console.error(" Error refreshing user data:",Be),T(!0),v("login")}}})}),g==="landing"&&n.jsx(m2,{})]});const pr=()=>{if(S&&x&&!x.role)return n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary mx-auto mb-4"}),n.jsx("p",{className:"text-slate-600",children:"Loading your dashboard..."})]})});if(i==="startupHealth"&&se)return n.jsx(hk,{startup:se,userRole:x==null?void 0:x.role,user:x,onBack:Lt,onActivateFundraising:Nt,onInvestorAdded:Ie,onUpdateFounders:Tt,isViewOnly:Q,investmentOffers:ne,onProcessOffer:zt});if((x==null?void 0:x.role)==="Admin")return n.jsx(Oae,{users:je,startups:_e,verificationRequests:De,investmentOffers:ne,validationRequests:le,onProcessVerification:Et,onProcessOffer:zt,onProcessValidationRequest:Vt,onViewStartup:kt});if((x==null?void 0:x.role)==="CA")return n.jsx(zae,{startups:_e,onUpdateCompliance:Qt,onViewStartup:kt,currentUser:x,onProfileUpdate:hr,onLogout:ft});if((x==null?void 0:x.role)==="CS")return n.jsx(Vae,{startups:_e,onUpdateCompliance:Qt,onViewStartup:kt,currentUser:x,onProfileUpdate:hr,onLogout:ft});if((x==null?void 0:x.role)==="Startup Facilitation Center")return n.jsx(Kae,{startups:_e,newInvestments:ye,startupAdditionRequests:Z,onViewStartup:kt,onAcceptRequest:at,currentUser:x,onProfileUpdate:hr,onLogout:ft});if((x==null?void 0:x.role)==="Investment Advisor")return n.jsx(Yae,{currentUser:x,users:je,startups:_e,investments:ye,offers:ne,interests:[]});if((x==null?void 0:x.role)==="Investor")return n.jsx(ZQ,{startups:_e,newInvestments:ye,startupAdditionRequests:Z,investmentOffers:ne,currentUser:x,onViewStartup:kt,onAcceptRequest:at,onMakeOffer:mt,onUpdateOffer:ur,onCancelOffer:Rt});if((x==null?void 0:x.role)==="Startup"){console.log(" Startup user detected:",x.email),console.log(" User startup_name:",x.startup_name),console.log(" Available startups:",_e.map(We=>({name:We.name,id:We.id})));let Be=_e.find(We=>We.name===x.startup_name);return!Be&&_e.length===1&&(console.log(" Fallback in renderer: selecting the only startup available for this user"),Be=_e[0]),console.log(" APP COMPONENT DEBUGGING - STARTUP DATA "),console.log(" Found user startup:",Be),console.log(" User startup founders:",Be==null?void 0:Be.founders),console.log(" User startup ESOP reserved shares:",Be==null?void 0:Be.esopReservedShares),console.log(" END APP COMPONENT DEBUGGING "),Be?(console.log(" Rendering StartupHealthView for startup:",Be.name),n.jsx(hk,{startup:Be,userRole:x==null?void 0:x.role,user:x,onBack:()=>{},onActivateFundraising:Nt,onInvestorAdded:Ie,onUpdateFounders:Tt,investmentOffers:ne,onProcessOffer:zt})):(console.log(" No startup found for user:",x.email),n.jsxs("div",{className:"text-center py-20",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"No Startup Found"}),n.jsx("p",{className:"text-slate-500 mt-2",children:"No startup associated with your account. Please contact support."}),n.jsxs("div",{className:"mt-4 text-sm text-slate-400",children:[n.jsx("p",{children:"Debug Info:"}),n.jsxs("p",{children:["User startup_name: ",x.startup_name||"NULL"]}),n.jsxs("p",{children:["Available startups: ",_e.length]})]})]}))}return n.jsxs("div",{className:"text-center py-20",children:[n.jsxs("h2",{className:"text-xl font-semibold",children:["TrackMyStartup - Welcome, ",x==null?void 0:x.email]}),n.jsx("p",{className:"text-slate-500 mt-2",children:"Startup user view - select a startup to view details."})]})};return n.jsxs("div",{className:"min-h-screen bg-slate-100 text-slate-800 flex flex-col",children:[n.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-50",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[n.jsx("div",{className:"flex items-center gap-3",children:(()=>{const Be=(x==null?void 0:x.role)==="Investment Advisor"&&(x==null?void 0:x.logo_url),We=b&&((x==null?void 0:x.role)==="Investor"||(x==null?void 0:x.role)==="Startup"),vt=!!(Be||We);return console.log(" Header logo display check:",{currentUserRole:x==null?void 0:x.role,currentUserLogo:x==null?void 0:x.logo_url,assignedAdvisor:!!b,assignedAdvisorLogo:b==null?void 0:b.logo_url,isInvestmentAdvisor:Be,hasAssignedAdvisor:We,shouldShowAdvisorLogo:vt}),vt})()?n.jsxs("div",{className:"flex items-center gap-3",children:[(x==null?void 0:x.role)==="Investment Advisor"&&(x!=null&&x.logo_url)||b!=null&&b.logo_url?n.jsxs(n.Fragment,{children:[n.jsx("img",{src:(x==null?void 0:x.role)==="Investment Advisor"?x.logo_url:b==null?void 0:b.logo_url,alt:"Company Logo",className:"h-8 w-8 rounded object-contain bg-white border border-gray-200 p-1",onError:Be=>{var We;Be.currentTarget.style.display="none",(We=Be.currentTarget.nextElementSibling)==null||We.classList.remove("hidden")}}),n.jsx("img",{src:ou,alt:"TrackMyStartup",className:"h-8 w-8 scale-[5] md:scale-[4] lg:scale-[5] xl:scale-[6] origin-left hidden"})]}):n.jsx("div",{className:"h-8 w-8 rounded bg-purple-100 border border-purple-200 flex items-center justify-center",children:n.jsx("span",{className:"text-purple-600 font-semibold text-xs",children:"IA"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:(x==null?void 0:x.role)==="Investment Advisor"?x.name||"Investment Advisor":(b==null?void 0:b.name)||"Investment Advisor"}),n.jsx("p",{className:"text-xs text-blue-600",children:"Supported by Track My Startup"})]})]}):n.jsx("img",{src:ou,alt:"TrackMyStartup",className:"h-8 w-8 scale-[5] md:scale-[4] lg:scale-[5] xl:scale-[6] origin-left"})}),n.jsxs("div",{className:"flex items-center gap-6",children:[(x==null?void 0:x.role)==="Investor"&&n.jsxs("div",{className:"hidden sm:block text-sm text-slate-500 bg-slate-100 px-3 py-1.5 rounded-md font-mono",children:["Investor Code: ",n.jsx("span",{className:"font-semibold text-brand-primary",children:x.investor_code||x.investorCode||"Not Set"}),!x.investor_code&&!x.investorCode&&n.jsx("span",{className:"text-red-500 text-xs ml-2",children:" Code missing"})]}),(x==null?void 0:x.role)==="Startup Facilitation Center"&&n.jsx(AD,{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-md text-sm font-medium",currentUser:x}),(x==null?void 0:x.role)==="Investment Advisor"&&n.jsxs("div",{className:"hidden sm:block text-sm text-slate-500 bg-slate-100 px-3 py-1.5 rounded-md font-mono",children:["Advisor Code: ",n.jsx("span",{className:"font-semibold text-brand-primary",children:(x==null?void 0:x.investment_advisor_code)||"IA-XXXXXX"})]}),((x==null?void 0:x.role)==="Investor"||(x==null?void 0:x.role)==="Startup")&&(x==null?void 0:x.investment_advisor_code_entered)&&n.jsxs("div",{className:"hidden sm:block text-sm text-slate-500 bg-purple-100 px-3 py-1.5 rounded-md font-mono",children:["Advisor: ",n.jsx("span",{className:"font-semibold text-purple-800",children:x.investment_advisor_code_entered})]}),n.jsxs("button",{onClick:ft,className:"flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-brand-primary transition-colors",children:[n.jsx(Rv,{className:"h-4 w-4"}),"Logout"]})]})]})}),z&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mx-4 mt-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsxs("div",{className:"text-sm text-red-800",children:[n.jsx("strong",{children:"Error:"})," ",z]}),n.jsx("button",{onClick:()=>M(null),className:"ml-auto text-red-600 hover:text-red-800",children:""})]})}),n.jsx("main",{className:"container mx-auto p-4 sm:p-6 lg:p-8 flex-1",children:n.jsx(pr,{},`${u}-${f}`)})]})},CD=document.getElementById("root");if(!CD)throw new Error("Could not find root element to mount to");const pne=$R.createRoot(CD);pne.render(n.jsx(Wc.StrictMode,{children:n.jsx(mne,{})}));export{_a as _,xne as c,Ro as g,G as s};
